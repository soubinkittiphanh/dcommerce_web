(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1008:function(t,e,n){"use strict";n.r(e);var r=n(1688),o=n(318),c=n(113),d=(n(44),n(9),n(5),n(34),n(7),n(11),n(12),n(3)),l=n(27),m=n(33),f=n(20);n(92),n(39),n(51),n(66),n(209),n(10),n(332),n(30),n(979),n(940),n(63),n(68),n(8);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(d.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={name:"SettlementDialog",components:{VoucherPrintComponent:n(1009).default},props:{paymentMethod:{type:String,default:"cash"},visible:{type:Boolean,default:!1},settlement:{type:Object,default:null},outstandingInvoices:{type:Array,default:function(){return[]}},currencies:{type:Array,default:function(){return[]}},bankAccounts:{type:Array,default:function(){return[]}},ministries:{type:Array,default:function(){return[]}},chartAccounts:{type:Array,default:function(){return[]}},users:{type:Array,default:function(){return[]}}},emits:["close","save","created","updated"],data:function(){return{bookingDateMenu:!1,pickerBookingDate:null,formattedBookingDate:null,showPrintVoucher:!1,settlementDetail:null,loading:!1,isSubmitting:!1,justCreated:!1,loadingAdvances:!1,showAdvanceBrowser:!1,selectedAdvanceForBrowser:null,availableAdvances:[],filteredAdvances:[],advanceSearch:{query:"",status:""},formData:{bookingDate:"",method:"",amount:null,currencyId:"",exchangeRate:1,bankAccountId:"",ministryId:"",chartAccountId:"",userId:"",notes:"",selectedInvoices:[],linkToAdvance:"false",moneyAdvanceId:"",externalRef:"",externalRefNo:"",chequeNo:"",fromPersonName:""},errors:{},formErrors:[]}},computed:{isEditMode:function(){return this.settlement&&this.settlement.id||this.formData.id&&this.justCreated},isLinkedToAdvance:function(){return"true"===this.formData.linkToAdvance&&this.formData.moneyAdvanceId},isBaseCurrency:function(){return"LAK"===this.selectedCurrencyCode},showEquivalentAmount:function(){return!this.isBaseCurrency&&this.formData.amount>0&&this.formData.exchangeRate>0},equivalentAmountLAK:function(){return this.showEquivalentAmount?this.formData.amount*this.formData.exchangeRate:0},selectedInvoicesTotal:function(){var t=this;return this.outstandingInvoices.filter((function(e){return t.formData.selectedInvoices.includes(e.id)})).reduce((function(t,e){return t+(e.outstandingAmount||0)}),0)},selectedCurrencyCode:function(){var t=this;if(!this.formData.currencyId)return"LAK";var e=this.currencies.find((function(e){return e.id==t.formData.currencyId}));return this._isInitializing||(this.formData.exchangeRate=(null==e?void 0:e.rate)||1),e?e.code||e.currencyCode:"LAK"},selectedBankAccount:function(){var t=this;return this.formData.bankAccountId?this.bankAccounts.find((function(e){return e.id==t.formData.bankAccountId})):null},selectedMinistry:function(){var t=this;return this.formData.ministryId?this.ministries.find((function(e){return e.id==t.formData.ministryId})):null},selectedCurrency:function(){var t=this;return this.formData.currencyId?this.currencies.find((function(e){return e.id==t.formData.currencyId})):null},selectedAdvance:function(){var t=this;return this.formData.moneyAdvanceId?this.availableAdvances.find((function(e){return e.id==t.formData.moneyAdvanceId})):null},user:function(){return this.$auth.user||""},filteredBankAccounts:function(){if(!this.selectedCurrency||!this.bankAccounts.length)return this.bankAccounts.filter((function(t){return!1!==t.isActive}));var t=this.selectedCurrency.code||this.selectedCurrency.currencyCode,e=this.bankAccounts.filter((function(e){return(e.currency===t||!e.currency)&&!1!==e.isActive}));return e.length>0?e:this.bankAccounts.filter((function(t){return!1!==t.isActive}))},today:function(){return(new Date).toISOString().split("T")[0]},isFormValid:function(){var t={hasAmount:!!(this.formData.amount&&parseFloat(this.formData.amount)>0),hasCurrency:!!this.formData.currencyId,hasUser:!!this.formData.userId,hasSettlementDate:!!this.formData.bookingDate,hasMethod:!!this.formData.method,hasUsers:this.users.length>0,hasCurrencies:this.currencies.length>0,bankAccountValid:"bank_transfer"!==this.formData.method||!!this.formData.bankAccountId,exchangeRateValid:!this.formData.exchangeRate||this.formData.exchangeRate>0,chequeNoValid:"cheque"!==this.formData.method||!!this.formData.chequeNo,fromPersonNameValid:"cash"!==this.formData.method&&"cheque"!==this.formData.method||!!this.formData.fromPersonName};return Object.values(t).every((function(t){return!0===t}))},isFormDisabled:function(){return this.loading||this.isSubmitting}},watch:{visible:function(t){t?(this.justCreated=!1,this.initializeForm(),this.loadMoneyAdvances()):this.resetForm()},"formData.currencyId":function(t,e){t!==e&&(this._isInitializing&&this.isEditMode||this.handleCurrencyChange())},settlement:{handler:function(t,e){var n=this;!this.visible||t===e||this.isSubmitting||this.justCreated||this.$nextTick((function(){n.initializeForm()}))},deep:!0,immediate:!1},"formData.moneyAdvanceId":function(t,e){var n=this;t&&t!==e&&this.$nextTick((function(){n.syncCurrencyFromAdvance(),n.syncAmountFromAdvance()}))},"formData.linkToAdvance":function(t,e){"false"===t&&"true"===e&&this.clearAdvanceSelection()},availableAdvances:{handler:function(t){var e=this;t.length>0&&this.formData.moneyAdvanceId&&"true"===this.formData.linkToAdvance&&this.$nextTick((function(){e.syncCurrencyFromAdvance(),e.syncAmountFromAdvance()}))},immediate:!1}},mounted:function(){console.log("Refs available:",Object.keys(this.$refs)),this.checkForCarouselCode()},beforeDestroy:function(){document.body.style.overflow="auto",this.isSubmitting=!1,this.loading=!1,this.cleanupEventListeners()},methods:{formatDateForDisplay:function(t){if(!t)return null;var e=new Date(t),n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return"".concat(n,"/").concat(r,"/").concat(o)},setBookingDate:function(t){this.pickerBookingDate=t,this.formData.bookingDate=t,this.formattedBookingDate=this.formatDateForDisplay(t),this.bookingDateMenu=!1,this.clearFieldError("bookingDate")},clearBookingDate:function(){this.pickerBookingDate=null,this.formData.bookingDate="",this.formattedBookingDate=null,this.clearFieldError("bookingDate")},checkForCarouselCode:function(){var t=Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter((function(t){return t.toLowerCase().includes("carousel")||t.toLowerCase().includes("next")||t.toLowerCase().includes("prev")}));t.length>0&&console.warn("Found potential carousel-related methods:",t)},cleanupEventListeners:function(){try{document.removeEventListener("keydown",this.handleKeydown),window.removeEventListener("resize",this.handleResize)}catch(t){console.warn("Error cleaning up event listeners:",t)}},nextSlide:function(){console.warn("nextSlide called but no carousel exists")},prevSlide:function(){console.warn("prevSlide called but no carousel exists")},formatVoucherNumber:function(t){return String(t).padStart(6,"0")},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[e](t):this.$notify?this.$notify({title:"error"===e?"Error":"Success",message:t,type:"error"===e?"error":"success"}):alert("".concat(e.toUpperCase(),": ").concat(t))},fetchSettlementByid:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.formData.id){e.next=2;break}return e.abrupt("return",t.showToast("‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫Å‡ªà‡∫≠‡∫ô","error"));case 2:return t.loading=!0,e.prev=3,e.next=6,t.$axios.get("/api/settlements/".concat(t.formData.id));case 6:n=e.sent,data=n.data,t.settlementDetail=data.data,console.info("Settlement detail ".concat(JSON.stringify(t.settlementDetail))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),t.showToast("Error fetching settlement details","error"),console.error(e.t0);case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})))()},closePrintVoucher:function(){var t=this;this.showPrintVoucher=!1,setTimeout((function(){t.settlementDetail=null}),100)},printSettlement:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveSettlement();case 2:return e.next=4,t.fetchSettlementByid();case 4:t.showPrintVoucher=!0;case 5:case"end":return e.stop()}}),e)})))()},initializeForm:function(){var t=this;if(console.info("INITIALY DATA BEING CALLED ..... "),!this.isSubmitting)if(this.justCreated&&this.formData.id)console.log("Skipping form initialization - record was just created");else{this._isInitializing=!0;try{if(this.settlement&&(this.settlement.id||this.settlement.moneyAdvanceId)){var e=this.settlement.moneyAdvanceId&&null!==this.settlement.moneyAdvanceId&&""!==this.settlement.moneyAdvanceId&&"0"!==this.settlement.moneyAdvanceId&&0!==this.settlement.moneyAdvanceId;this.formData={id:this.settlement.id,bookingDate:this.settlement.bookingDate?this.settlement.bookingDate.split("T")[0]:"",method:this.settlement.method||"",amount:this.settlement.amount||null,currencyId:this.settlement.currencyId||"",exchangeRate:void 0!==this.settlement.exchangeRate&&null!==this.settlement.exchangeRate?this.settlement.exchangeRate:1,bankAccountId:this.settlement.bankAccountId||"",ministryId:this.settlement.ministryId||"",chartAccountId:this.settlement.chartAccountId||"",userId:this.settlement.userId||"",notes:this.settlement.notes||"",selectedInvoices:[],linkToAdvance:e||"true"===this.settlement.linkToAdvance?"true":"false",moneyAdvanceId:e?this.settlement.moneyAdvanceId.toString():"",externalRef:this.settlement.externalRef||"",externalRefNo:this.settlement.externalRefNo||"",chequeNo:this.settlement.chequeNo||"",fromPersonName:this.settlement.fromPersonName||""},this.formData.bookingDate&&(this.pickerBookingDate=this.formData.bookingDate,this.formattedBookingDate=this.formatDateForDisplay(this.formData.bookingDate)),"true"===this.formData.linkToAdvance&&this.$nextTick((function(){t.waitForAdvancesAndSync()}))}else{var n,r=this.today;if(this.formData={bookingDate:r,method:this.paymentMethod,amount:null,currencyId:"",exchangeRate:1,bankAccountId:"",ministryId:"",chartAccountId:"",userId:(null===(n=this.user)||void 0===n?void 0:n.id)||"",notes:"",selectedInvoices:[],linkToAdvance:"false",moneyAdvanceId:"",externalRef:"",externalRefNo:"",chequeNo:"",fromPersonName:""},this.pickerBookingDate=r,this.formattedBookingDate=this.formatDateForDisplay(r),this.currencies.length>0){var o=this.currencies.find((function(t){return"LAK"===(t.code||t.currencyCode)}))||this.currencies[0];this.formData.currencyId=o.id}}this.errors={},this.formErrors=[]}catch(t){console.error("Error initializing form:",t),this.showToast("Error initializing form","error")}finally{this.$nextTick((function(){t._isInitializing=!1}))}console.info("SETTLEMENT AFTER INITIALIZATION: ".concat(JSON.stringify(this.formData)))}},resetForm:function(){var t;this.isSubmitting||(this.formData={bookingDate:"",method:"",amount:null,currencyId:"",exchangeRate:1,bankAccountId:"",ministryId:"",chartAccountId:"",userId:(null===(t=this.user)||void 0===t?void 0:t.id)||"",notes:"",selectedInvoices:[],linkToAdvance:"false",moneyAdvanceId:"",externalRef:"",externalRefNo:"",chequeNo:"",fromPersonName:""},this.pickerBookingDate=null,this.formattedBookingDate=null,this.bookingDateMenu=!1,this.errors={},this.formErrors=[],this.loading=!1,this.isSubmitting=!1,this.justCreated=!1,this.showAdvanceBrowser&&this.closeAdvanceBrowser())},waitForAdvancesAndSync:function(){var t=this;!function e(){t.availableAdvances.length>0&&t.formData.moneyAdvanceId?t.availableAdvances.find((function(e){return e.id.toString()===t.formData.moneyAdvanceId.toString()}))&&(t.syncCurrencyFromAdvance(),t.syncAmountFromAdvance()):t.loadingAdvances||setTimeout(e,200)}()},handleCurrencyChange:function(){this.isBaseCurrency?this.isEditMode&&null!==this.formData.exchangeRate&&void 0!==this.formData.exchangeRate||(this.formData.exchangeRate=1):this.formData.exchangeRate&&1!==this.formData.exchangeRate||this.isEditMode||(this.formData.exchangeRate=null)},calculateEquivalentAmount:function(){},loadMoneyAdvances:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n,r,data,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingAdvances=!0,e.prev=1,n={status:["pending","approved"],available_for_settlement:!0},t.formData.moneyAdvanceId&&(n.include_advance_id=t.formData.moneyAdvanceId),e.next=6,t.$axios.get("/api/money-advances",{params:n});case 6:if(r=e.sent,!(data=r.data)||!data.success){e.next=26;break}if(t.availableAdvances=data.data||[],!t.formData.moneyAdvanceId){e.next=24;break}if(t.availableAdvances.find((function(e){return e.id.toString()===t.formData.moneyAdvanceId.toString()}))){e.next=24;break}return e.prev=13,e.next=16,t.$axios.get("/api/money-advances/".concat(t.formData.moneyAdvanceId));case 16:o=e.sent,(c=o.data)&&c.success&&t.availableAdvances.unshift(c.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(13),console.error("Error fetching individual advance:",e.t0);case 24:e.next=27;break;case 26:t.availableAdvances=[];case 27:t.filteredAdvances=Object(m.a)(t.availableAdvances),e.next=35;break;case 30:e.prev=30,e.t1=e.catch(1),console.error("Error loading money advances:",e.t1),t.availableAdvances=[],t.filteredAdvances=[];case 35:return e.prev=35,t.loadingAdvances=!1,e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[1,30,35,38],[13,21]])})))()},handleMethodChange:function(){"bank_transfer"!==this.formData.method&&(this.formData.bankAccountId=""),"deduction"!==this.formData.method&&(this.formData.selectedInvoices=[]),"cheque"!==this.formData.method&&(this.formData.chequeNo=""),"cash"!==this.formData.method&&"cheque"!==this.formData.method&&(this.formData.fromPersonName=""),this.clearFieldError("bankAccountId"),this.clearFieldError("chequeNo"),this.clearFieldError("fromPersonName")},updateSelectedInvoicesAmount:function(){"deduction"===this.formData.method&&(this.formData.amount=this.selectedInvoicesTotal)},updateSelectedCurrency:function(){if(this.selectedBankAccount&&this.selectedCurrency){var t=this.selectedBankAccount.currency,e=this.selectedCurrency.code||this.selectedCurrency.currencyCode;t&&t!==e&&(this.formData.bankAccountId="")}},updateSelectedBankAccount:function(){},updateSelectedMinistry:function(){},clearAdvanceSelection:function(){if(this.formData.moneyAdvanceId="",this.formData.linkToAdvance="false",this.currencies.length>0){var t=this.currencies.find((function(t){return"LAK"===(t.code||t.currencyCode)}))||this.currencies[0];this.formData.currencyId=t.id,this.formData.exchangeRate=1}this.formData.amount=null},updateSelectedAdvance:function(){this.selectedAdvance&&(this.syncCurrencyFromAdvance(),this.syncAmountFromAdvance())},syncCurrencyFromAdvance:function(){if(this.selectedAdvance){var t=this.getAdvanceCurrency();t&&(this.formData.currencyId=t.id,this.selectedAdvance.exchangeRate&&null!==this.selectedAdvance.exchangeRate?this.formData.exchangeRate=this.selectedAdvance.exchangeRate:!this.isBaseCurrency||null!==this.formData.exchangeRate&&void 0!==this.formData.exchangeRate||(this.formData.exchangeRate=1))}},syncAmountFromAdvance:function(){this.selectedAdvance&&this.selectedAdvance.amount&&(this.formData.amount=this.selectedAdvance.amount)},getAdvanceCurrency:function(){var t=this;return this.selectedAdvance?this.selectedAdvance.currencyId?this.currencies.find((function(e){return e.id==t.selectedAdvance.currencyId})):this.selectedAdvance.currencyCode?this.currencies.find((function(e){return(e.code||e.currencyCode)===t.selectedAdvance.currencyCode})):this.selectedAdvance.currency?"object"===Object(l.a)(this.selectedAdvance.currency)?this.currencies.find((function(e){return e.id==t.selectedAdvance.currency.id})):this.currencies.find((function(e){return(e.code||e.currencyCode)===t.selectedAdvance.currency})):null:null},browseMoneyAdvances:function(){this.showAdvanceBrowser=!0,this.selectedAdvanceForBrowser=this.selectedAdvance,document.body.style.overflow="hidden"},closeAdvanceBrowser:function(){this.showAdvanceBrowser=!1,this.selectedAdvanceForBrowser=null,this.advanceSearch.query="",this.advanceSearch.status="",this.filteredAdvances=Object(m.a)(this.availableAdvances),document.body.style.overflow="auto"},handleAdvanceBrowserOverlayClick:function(t){t.target===t.currentTarget&&this.closeAdvanceBrowser()},selectAdvanceFromBrowser:function(t){this.selectedAdvanceForBrowser=t},confirmAdvanceSelection:function(){var t=this;this.selectedAdvanceForBrowser&&(this.formData.moneyAdvanceId=this.selectedAdvanceForBrowser.id,this.closeAdvanceBrowser(),this.$nextTick((function(){t.syncCurrencyFromAdvance(),t.syncAmountFromAdvance()})))},searchAdvances:function(){this.filterAdvances()},filterAdvances:function(){var t=this,e=Object(m.a)(this.availableAdvances);if(this.advanceSearch.status&&(e=e.filter((function(e){return e.status===t.advanceSearch.status}))),this.advanceSearch.query){var n=this.advanceSearch.query.toLowerCase();e=e.filter((function(t){return t.purpose&&t.purpose.toLowerCase().includes(n)||t.note&&t.note.toLowerCase().includes(n)||t.id.toString().includes(n)}))}this.filteredAdvances=e},validateForm:function(){this.errors={},this.formErrors=[];try{if(this.formData.bookingDate||(this.errors.bookingDate="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ß‡∫±‡∫ô‡∫ó‡∫µ",this.formErrors.push("‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫•‡∫ª‡∫á‡∫ä‡∫≥‡∫•‡∫∞ ‡ªÅ‡∫°‡ªà‡∫ô‡∫à‡∫≥‡ªÄ‡∫õ‡∫±‡∫ô")),this.formData.method||(this.errors.method="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞",this.formErrors.push("‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞ ‡ªÅ‡∫°‡ªà‡∫ô‡∫à‡∫≥‡ªÄ‡∫õ‡∫±‡∫ô")),(!this.formData.amount||this.formData.amount<=0)&&(this.errors.amount="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫ó‡∫µ‡ªà‡∫ñ‡∫∑‡∫Å‡∫ï‡ªâ‡∫≠‡∫á",this.formErrors.push("‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô ‡ªÅ‡∫°‡ªà‡∫ô‡∫à‡∫≥‡ªÄ‡∫õ‡∫±‡∫ô ‡ªÅ‡∫•‡∫∞ ‡∫ï‡ªâ‡∫≠‡∫á‡∫´‡∫º‡∫≤‡∫ç‡∫Å‡∫ß‡ªà‡∫≤ 0")),this.formData.currencyId||(this.errors.currencyId="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô",this.formErrors.push("‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô ‡ªÅ‡∫°‡ªà‡∫ô‡∫à‡∫≥‡ªÄ‡∫õ‡∫±‡∫ô")),this.formData.exchangeRate&&this.formData.exchangeRate<=0&&(this.errors.exchangeRate="‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡ªÅ‡∫•‡∫Å‡∫õ‡ªà‡∫Ω‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫´‡∫º‡∫≤‡∫ç‡∫Å‡∫ß‡ªà‡∫≤ 0",this.formErrors.push("‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡ªÅ‡∫•‡∫Å‡∫õ‡ªà‡∫Ω‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫´‡∫º‡∫≤‡∫ç‡∫Å‡∫ß‡ªà‡∫≤ 0")),this.formData.userId||(this.errors.userId="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ú‡∫π‡ªâ‡∫•‡∫ª‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ",this.formErrors.push("‡∫ú‡∫π‡ªâ‡∫•‡∫ª‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ ‡ªÅ‡∫°‡ªà‡∫ô‡∫à‡∫≥‡ªÄ‡∫õ‡∫±‡∫ô")),"bank_transfer"!==this.formData.method||this.formData.bankAccountId||(this.errors.bankAccountId="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô",this.formErrors.push("‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô ‡ªÅ‡∫°‡ªà‡∫ô‡∫à‡∫≥‡ªÄ‡∫õ‡∫±‡∫ô‡∫™‡∫≥‡∫•‡∫±‡∫ö‡∫Å‡∫≤‡∫ô‡ªÇ‡∫≠‡∫ô‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô")),"cheque"!==this.formData.method||this.formData.chequeNo||(this.errors.chequeNo="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡ªÄ‡∫•‡∫Å‡ªÄ‡∫ä‡∫±‡∫Å",this.formErrors.push("‡ªÄ‡∫•‡∫Å‡ªÄ‡∫ä‡∫±‡∫Å ‡ªÅ‡∫°‡ªà‡∫ô‡∫à‡∫≥‡ªÄ‡∫õ‡∫±‡∫ô‡∫™‡∫≥‡∫•‡∫±‡∫ö‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞‡∫î‡ªâ‡∫ß‡∫ç‡ªÄ‡∫ä‡∫±‡∫Å")),"cash"!==this.formData.method&&"cheque"!==this.formData.method||this.formData.fromPersonName||(this.errors.fromPersonName="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫ä‡∫∑‡ªà‡∫ú‡∫π‡ªâ‡∫à‡ªà‡∫≤‡∫ç",this.formErrors.push("‡∫ä‡∫∑‡ªà‡∫ú‡∫π‡ªâ‡∫à‡ªà‡∫≤‡∫ç ‡ªÅ‡∫°‡ªà‡∫ô‡∫à‡∫≥‡ªÄ‡∫õ‡∫±‡∫ô‡∫™‡∫≥‡∫•‡∫±‡∫ö‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞‡∫î‡ªâ‡∫ß‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫ª‡∫î ‡ªÅ‡∫•‡∫∞ ‡ªÄ‡∫ä‡∫±‡∫Å")),this.isLinkedToAdvance&&this.selectedAdvance){var t=this.getAdvanceCurrency();t&&this.formData.currencyId!=t.id&&(this.errors.currencyId="‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫ª‡∫á‡∫Å‡∫±‡∫ö‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫•‡ªà‡∫ß‡∫á‡ªú‡ªâ‡∫≤",this.formErrors.push("‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫ª‡∫á‡∫Å‡∫±‡∫ö‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫•‡ªà‡∫ß‡∫á‡ªú‡ªâ‡∫≤‡∫ó‡∫µ‡ªà‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å")),this.selectedAdvance.amount&&Math.abs(this.formData.amount-this.selectedAdvance.amount)>.01&&(this.errors.amount="‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫ª‡∫á‡∫Å‡∫±‡∫ö‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫•‡ªà‡∫ß‡∫á‡ªú‡ªâ‡∫≤",this.formErrors.push("‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫ª‡∫á‡∫Å‡∫±‡∫ö‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫•‡ªà‡∫ß‡∫á‡ªú‡ªâ‡∫≤‡∫ó‡∫µ‡ªà‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å"))}return this.formData.notes&&this.formData.notes.length>500&&this.formErrors.push("‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î‡∫ï‡ªâ‡∫≠‡∫á‡∫ö‡ªç‡ªà‡ªÄ‡∫Å‡∫µ‡∫ô 500 ‡∫ï‡∫ª‡∫ß‡∫≠‡∫±‡∫Å‡∫™‡∫≠‡∫ô"),0===this.users.length&&this.formErrors.push("‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫ú‡∫π‡ªâ‡ªÉ‡∫ä‡ªâ‡∫á‡∫≤‡∫ô. ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫ï‡∫¥‡∫î‡∫ï‡ªç‡ªà‡∫ú‡∫π‡ªâ‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡∫•‡∫∞‡∫ö‡∫ª‡∫ö."),0===this.currencies.length&&this.formErrors.push("‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô. ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫ï‡∫¥‡∫î‡∫ï‡ªç‡ªà‡∫ú‡∫π‡ªâ‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡∫•‡∫∞‡∫ö‡∫ª‡∫ö."),0===this.formErrors.length}catch(t){return console.error("Validation error:",t),this.formErrors.push("‡ªÄ‡∫Å‡∫µ‡∫î‡∫Ç‡ªç‡ªâ‡∫ú‡∫¥‡∫î‡∫û‡∫≤‡∫î‡ªÉ‡∫ô‡∫Å‡∫≤‡∫ô‡∫Å‡∫ß‡∫î‡∫™‡∫≠‡∫ö‡∫ü‡∫≠‡∫°"),!1}},clearFieldError:function(t){this.errors[t]&&this.$delete(this.errors,t)},saveSettlement:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateForm()&&!t.isSubmitting){e.next=2;break}return e.abrupt("return");case 2:if(t.isSubmitting=!0,t.loading=!0,e.prev=4,n=h(h({},t.formData),{},{selectedInvoices:"deduction"===t.formData.method?t.formData.selectedInvoices:[],bookingDate:t.formData.bookingDate}),Object.keys(n).forEach((function(t){""!==n[t]&&null!==n[t]||delete n[t]})),"true"!==n.linkToAdvance&&delete n.moneyAdvanceId,delete n.linkToAdvance,console.log("üì§ Submitting settlement data:",n),!!t.formData.id){e.next=21;break}return console.info("SETTLEMENT BEFORE SAVE ".concat(JSON.stringify(t.formData))),e.next=15,t.$axios.post("/api/settlements",n);case 15:r=e.sent,console.info("RESPONSE DATA ".concat(JSON.stringify(r.data))),r.data&&r.data.data&&(t.formData.id=r.data.data.id,t.formData.bookingDate=r.data.data.bookingDate,t.$emit("created",r.data.data),t.showToast("Money settlement created successfully","success")),console.info("SETTLEMENT AFTER SAVE ".concat(JSON.stringify(t.formData))),e.next=26;break;case 21:return e.next=23,t.$axios.put("/api/settlements/".concat(t.formData.id),n);case 23:r=e.sent,console.info("UPDATE RESPONSE DATA ".concat(JSON.stringify(r.data))),r.data&&r.data.data&&(t.$emit("updated",r.data.data),t.showToast("Money settlement updated successfully","success"));case 26:t.errors={},t.formErrors=[],e.next=36;break;case 30:e.prev=30,e.t0=e.catch(4),console.error("Form submission error:",e.t0),t.formErrors=[],e.t0.response?(o=e.t0.response.status,c=e.t0.response.data,422===o&&c.errors?Object.keys(c.errors).forEach((function(e){t.errors[e]=c.errors[e][0],t.formErrors.push("".concat(e,": ").concat(c.errors[e][0]))})):409===o?t.formErrors.push("‡∫°‡∫µ‡∫Å‡∫≤‡∫ô‡∫Ç‡∫±‡∫î‡ªÅ‡∫ç‡ªâ‡∫á‡∫Å‡∫±‡∫ö‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ó‡∫µ‡ªà‡∫°‡∫µ‡∫¢‡∫π‡ªà‡ªÅ‡∫•‡ªâ‡∫ß. ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫•‡∫≠‡∫á‡ªÉ‡ªù‡ªà."):404===o?t.formErrors.push("‡∫ö‡ªç‡ªà‡∫û‡∫ª‡∫ö‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ó‡∫µ‡ªà‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫≤‡∫ô. ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫•‡∫≠‡∫á‡ªÉ‡ªù‡ªà."):t.formErrors.push(c.message||"‡ªÄ‡∫Å‡∫µ‡∫î‡∫Ç‡ªç‡ªâ‡∫ú‡∫¥‡∫î‡∫û‡∫≤‡∫î‡∫à‡∫≤‡∫Å‡ªÄ‡∫ä‡∫µ‡ªÄ‡∫ß‡∫µ. ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫•‡∫≠‡∫á‡ªÉ‡ªù‡ªà.")):e.t0.request?t.formErrors.push("‡∫ö‡ªç‡ªà‡∫™‡∫≤‡∫°‡∫≤‡∫î‡ªÄ‡∫ä‡∫∑‡ªà‡∫≠‡∫°‡∫ï‡ªç‡ªà‡ªÄ‡∫ä‡∫µ‡ªÄ‡∫ß‡∫µ‡ªÑ‡∫î‡ªâ. ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫Å‡∫ß‡∫î‡∫™‡∫≠‡∫ö‡∫Å‡∫≤‡∫ô‡ªÄ‡∫ä‡∫∑‡ªà‡∫≠‡∫°‡∫ï‡ªç‡ªà‡∫≠‡∫¥‡∫ô‡ªÄ‡∫ï‡∫µ‡ªÄ‡∫ô‡∫±‡∫î."):t.formErrors.push("‡ªÄ‡∫Å‡∫µ‡∫î‡∫Ç‡ªç‡ªâ‡∫ú‡∫¥‡∫î‡∫û‡∫≤‡∫î‡ªÉ‡∫ô‡∫Å‡∫≤‡∫ô‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å. ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫•‡∫≠‡∫á‡ªÉ‡ªù‡ªà."),t.showToast(t.formErrors[0]||"‡ªÄ‡∫Å‡∫µ‡∫î‡∫Ç‡ªç‡ªâ‡∫ú‡∫¥‡∫î‡∫û‡∫≤‡∫î","error");case 36:return e.prev=36,t.loading=!1,t.isSubmitting=!1,e.finish(36);case 40:case"end":return e.stop()}}),e,null,[[4,30,36,40]])})))()},closeDialog:function(){if(this.isSubmitting){if(!confirm("Are you sure you want to cancel? The form is currently being submitted."))return;this.isSubmitting=!1,this.loading=!1,this.justCreated=!1}else this.justCreated=!1;this.$emit("close")},handleOverlayClick:function(t){t.target!==t.currentTarget||this.isSubmitting||this.closeDialog()},formatCurrency:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LAK",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"number"!=typeof t&&null!=t&&(t=0);var o=h({style:"currency",currency:e.toUpperCase(),minimumFractionDigits:0,maximumFractionDigits:2},r);try{return new Intl.NumberFormat(n,o).format(t||0)}catch(n){return"".concat(e.toUpperCase()," ").concat((t||0).toLocaleString())}},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"‡∫ö‡ªç‡ªà‡∫•‡∫∞‡∫ö‡∫∏"},formatAdvanceOption:function(t){return"#".concat(t.id," - ").concat(this.formatCurrency(t.amount,t.currency.code)," - ").concat(t.purpose||"No purpose")},formatStatus:function(t){return{pending:"‡∫•‡ªç‡∫ñ‡ªâ‡∫≤",approved:"‡∫≠‡∫∞‡∫ô‡∫∏‡∫°‡∫±‡∫î",settled:"‡∫™‡∫≥‡ªÄ‡∫•‡∫±‡∫î",cancelled:"‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å"}[t]||t}}},x=_,y=(n(1430),n(32)),component=Object(y.a)(x,(function(){var t,e=this,n=e._self._c;return n("div",[e.visible?n("div",{staticClass:"modal-overlay",on:{click:e.handleOverlayClick}},[n("div",{staticClass:"modal-dialog enhanced-dialog",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"modal-header"},[n("div",{staticClass:"modal-title-section"},[n("i",{staticClass:"fas fa-money-bill-wave modal-icon"}),e._v(" "),n("h5",{staticClass:"modal-title"},[e._v("\n            "+e._s(e.isEditMode?"‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞":"‡∫•‡∫ª‡∫á‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞")+"\n          ")])]),e._v(" "),n("div",{staticClass:"modal-header-right"},[n("span",{staticClass:"voucher-number"},[e._v("\n            ‡ªÄ‡∫•‡∫Å‡∫ó‡∫µ:\n            "+e._s(e.formData.id?e.formatVoucherNumber(e.formData.id):"000000")+"\n          ")]),e._v(" "),n("button",{staticClass:"close-btn",attrs:{disabled:e.isFormDisabled},on:{click:e.closeDialog}},[n("i",{staticClass:"fas fa-times"})])])]),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.saveSettlement.apply(null,arguments)}}},[n("div",{staticClass:"modal-body"},[e.loading||e.isSubmitting?n("div",{staticClass:"form-loading"},[n("div",{staticClass:"spinner-small"}),e._v(" "),n("p",[e._v("\n              "+e._s(e.isSubmitting?"‡∫Å‡∫≥‡∫•‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô...":"‡∫Å‡∫≥‡∫•‡∫±‡∫á‡ªÇ‡∫´‡∫º‡∫î‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô...")+"\n            ")])]):n("div",{staticClass:"form-grid compact"},[n("div",{staticClass:"form-group"},[e._m(0),e._v(" "),n(o.a,{ref:"bookingDateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto",disabled:e.isFormDisabled},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n(c.a,e._g(e._b({class:{"compact-date-field":!0},attrs:{outlined:"",dense:"",clearable:"","hide-details":"","prepend-inner-icon":"mdi-calendar",error:!!e.errors.bookingDate,"error-messages":e.errors.bookingDate,disabled:e.isFormDisabled},on:{"click:clear":e.clearBookingDate},model:{value:e.formattedBookingDate,callback:function(t){e.formattedBookingDate=t},expression:"formattedBookingDate"}},"v-text-field",o,!1),r))]}}],null,!1,2723088033),model:{value:e.bookingDateMenu,callback:function(t){e.bookingDateMenu=t},expression:"bookingDateMenu"}},[e._v(" "),n(r.a,{attrs:{"no-title":"",max:e.today,disabled:e.isFormDisabled},on:{input:e.setBookingDate},model:{value:e.pickerBookingDate,callback:function(t){e.pickerBookingDate=t},expression:"pickerBookingDate"}})],1)],1),e._v(" "),n("div",{staticClass:"form-group"},[e._m(1),e._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.method,expression:"formData.method"}],staticClass:"form-control custom-select compact",class:{"is-invalid":e.errors.method},attrs:{disabled:e.isFormDisabled,required:""},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.formData,"method",t.target.multiple?n:n[0])},e.handleMethodChange]}},[n("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞")]),e._v(" "),n("option",{attrs:{value:"cash"}},[e._v("‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫ª‡∫î (Cash)")]),e._v(" "),n("option",{attrs:{value:"cheque"}},[e._v("‡ªÄ‡∫ä‡∫±‡∫Å (Cheque)")]),e._v(" "),n("option",{attrs:{value:"bank_transfer"}},[e._v("\n                    ‡ªÇ‡∫≠‡∫ô‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô (Bank Transfer)\n                  ")]),e._v(" "),n("option",{attrs:{value:"deduction"}},[e._v("‡∫´‡∫±‡∫Å‡∫•‡∫ª‡∫ö (Deduction)")])]),e._v(" "),e._m(2)]),e._v(" "),e.errors.method?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.method)+"\n              ")]):e._e()]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(3),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.externalRef,expression:"formData.externalRef"}],staticClass:"form-control compact",class:{"is-invalid":e.errors.externalRef},attrs:{type:"text",disabled:e.isFormDisabled,placeholder:"‡∫≠‡∫µ‡∫á‡∫ï‡∫≤‡∫° ‡∫Å‡∫≤‡∫ô‡∫ï‡∫ª‡∫Å‡∫•‡∫ª‡∫á ‡ªÄ‡∫´‡∫±‡∫ô‡∫î‡∫µ...",maxlength:"50"},domProps:{value:e.formData.externalRef},on:{input:function(t){t.target.composing||e.$set(e.formData,"externalRef",t.target.value)}}}),e._v(" "),e.errors.externalRef?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.externalRef)+"\n              ")]):e._e()]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(4),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.externalRefNo,expression:"formData.externalRefNo"}],staticClass:"form-control compact",class:{"is-invalid":e.errors.externalRefNo},attrs:{type:"text",disabled:e.isFormDisabled,placeholder:"REF-001, TXN-123...",maxlength:"50"},domProps:{value:e.formData.externalRefNo},on:{input:function(t){t.target.composing||e.$set(e.formData,"externalRefNo",t.target.value)}}}),e._v(" "),e.errors.externalRefNo?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.externalRefNo)+"\n              ")]):e._e()]),e._v(" "),"cheque"===e.formData.method?n("div",{staticClass:"form-group"},[e._m(5),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.chequeNo,expression:"formData.chequeNo"}],staticClass:"form-control compact",class:{"is-invalid":e.errors.chequeNo},attrs:{type:"text",disabled:e.isFormDisabled,placeholder:"‡ªÉ‡∫™‡ªà‡ªÄ‡∫•‡∫Å‡ªÄ‡∫ä‡∫±‡∫Å...",maxlength:"20",required:"cheque"===e.formData.method},domProps:{value:e.formData.chequeNo},on:{input:function(t){t.target.composing||e.$set(e.formData,"chequeNo",t.target.value)}}}),e._v(" "),e.errors.chequeNo?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.chequeNo)+"\n              ")]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"form-group"},[e._m(6),e._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.currencyId,expression:"formData.currencyId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":e.errors.currencyId},attrs:{disabled:e.isFormDisabled||e.isLinkedToAdvance,required:""},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.formData,"currencyId",t.target.multiple?n:n[0])},e.updateSelectedCurrency]}},[n("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô")]),e._v(" "),e._l(e.currencies,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.code||t.currencyCode)+" -\n                    "+e._s(t.name||t.currencyName)+"\n                  ")])}))],2),e._v(" "),e._m(7)]),e._v(" "),e.errors.currencyId?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.currencyId)+"\n              ")]):e._e()]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(8),e._v(" "),n("div",{staticClass:"input-group compact"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.formData.amount,expression:"formData.amount",modifiers:{number:!0}}],staticClass:"form-control compact",class:{"is-invalid":e.errors.amount},attrs:{type:"number",step:"0.01",min:"0",disabled:e.isFormDisabled,placeholder:"0.00",required:""},domProps:{value:e.formData.amount},on:{input:function(t){t.target.composing||e.$set(e.formData,"amount",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text compact"},[e._v("\n                    "+e._s(e.selectedCurrencyCode)+"\n                  ")])])]),e._v(" "),e.errors.amount?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.amount)+"\n              ")]):e._e()]),e._v(" "),"cash"===e.formData.method||"cheque"===e.formData.method?n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-label",class:{required:"cash"===e.formData.method||"cheque"===e.formData.method}},[n("i",{staticClass:"fas fa-user-circle"}),e._v("\n                ‡∫à‡∫≤‡∫Å‡∫ó‡ªà‡∫≤‡∫ô (‡∫ú‡∫π‡ªâ‡∫à‡ªà‡∫≤‡∫ç)\n              ")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.fromPersonName,expression:"formData.fromPersonName"}],staticClass:"form-control compact",class:{"is-invalid":e.errors.fromPersonName},attrs:{type:"text",disabled:e.isFormDisabled,placeholder:"‡∫ä‡∫∑‡ªà‡∫ú‡∫π‡ªâ‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô...",maxlength:"100",required:"cash"===e.formData.method||"cheque"===e.formData.method},domProps:{value:e.formData.fromPersonName},on:{input:function(t){t.target.composing||e.$set(e.formData,"fromPersonName",t.target.value)}}}),e._v(" "),e.errors.fromPersonName?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.fromPersonName)+"\n              ")]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"form-group"},[e._m(9),e._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.ministryId,expression:"formData.ministryId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":e.errors.ministryId},attrs:{disabled:e.isFormDisabled},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.formData,"ministryId",t.target.multiple?n:n[0])},e.updateSelectedMinistry]}},[n("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫Å‡∫∞‡∫ä‡∫ß‡∫á (‡∫ó‡∫≤‡∫á‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å)")]),e._v(" "),e._l(e.ministries,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.ministryCode)+" - "+e._s(t.ministryName)+"\n                  ")])}))],2),e._v(" "),e._m(10)])]),e._v(" "),"bank_transfer"===e.formData.method?n("div",{staticClass:"form-group full-width"},[e._m(11),e._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.bankAccountId,expression:"formData.bankAccountId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":e.errors.bankAccountId},attrs:{disabled:e.isFormDisabled,required:"bank_transfer"===e.formData.method},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.formData,"bankAccountId",t.target.multiple?n:n[0])},e.updateSelectedBankAccount]}},[n("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô")]),e._v(" "),e._l(e.filteredBankAccounts,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.bankName)+" - "+e._s(t.accountNumber)+"\n                  ")])}))],2),e._v(" "),e._m(12)]),e._v(" "),e.errors.bankAccountId?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.bankAccountId)+"\n              ")]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"form-group"},[e._m(13),e._v(" "),n("div",{staticClass:"input-group compact"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.formData.exchangeRate,expression:"formData.exchangeRate",modifiers:{number:!0}}],staticClass:"form-control compact",class:{"is-invalid":e.errors.exchangeRate},attrs:{type:"number",step:"0.0001",min:"0",disabled:e.isFormDisabled,placeholder:"1.0000"},domProps:{value:e.formData.exchangeRate},on:{input:[function(t){t.target.composing||e.$set(e.formData,"exchangeRate",e._n(t.target.value))},e.calculateEquivalentAmount],blur:function(t){return e.$forceUpdate()}}}),e._v(" "),e._m(14)]),e._v(" "),e.errors.exchangeRate?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.exchangeRate)+"\n              ")]):e._e()]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(15),e._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.chartAccountId,expression:"formData.chartAccountId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":e.errors.chartAccountId},attrs:{disabled:e.isFormDisabled},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.formData,"chartAccountId",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫•‡∫ß‡∫° (‡∫ó‡∫≤‡∫á‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å)")]),e._v(" "),e._l(e.chartAccounts,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.accountNumber)+" -\n                    "+e._s(t.accountName)+"\n                  ")])}))],2),e._v(" "),e._m(16)])]),e._v(" "),n("div",{staticClass:"form-group"},[e._m(17),e._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.userId,expression:"formData.userId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":e.errors.userId},attrs:{disabled:!0,required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.formData,"userId",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ú‡∫π‡ªâ‡∫•‡∫ª‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ")]),e._v(" "),e._l(e.users,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                    "+e._s(t.cus_name||t.name||t.username)+"\n                  ")])}))],2),e._v(" "),e._m(18)]),e._v(" "),e.errors.userId?n("div",{staticClass:"invalid-feedback"},[e._v("\n                "+e._s(e.errors.userId)+"\n              ")]):e._e()]),e._v(" "),n("div",{staticClass:"form-group full-width compact-advance"},[n("div",{staticClass:"advance-toggle"},[e._m(19),e._v(" "),n("div",{staticClass:"link-advance-options compact"},[n("label",{staticClass:"radio-option"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.linkToAdvance,expression:"formData.linkToAdvance"}],attrs:{type:"radio",value:"false",disabled:e.isFormDisabled},domProps:{checked:e._q(e.formData.linkToAdvance,"false")},on:{change:[function(t){return e.$set(e.formData,"linkToAdvance","false")},e.clearAdvanceSelection]}}),e._v(" "),n("span",{staticClass:"radio-label"},[e._v("‡∫ö‡ªç‡ªà‡ªÄ‡∫ä‡∫∑‡ªà‡∫≠‡∫°‡∫ï‡ªç‡ªà")])]),e._v(" "),n("label",{staticClass:"radio-option"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.linkToAdvance,expression:"formData.linkToAdvance"}],attrs:{type:"radio",value:"true",disabled:e.isFormDisabled},domProps:{checked:e._q(e.formData.linkToAdvance,"true")},on:{change:function(t){return e.$set(e.formData,"linkToAdvance","true")}}}),e._v(" "),n("span",{staticClass:"radio-label"},[e._v("‡ªÄ‡∫ä‡∫∑‡ªà‡∫≠‡∫°‡∫ï‡ªç‡ªà")])])])]),e._v(" "),"true"===e.formData.linkToAdvance?n("div",{staticClass:"advance-selection compact"},[n("div",{staticClass:"advance-selection-container compact"},[n("div",{staticClass:"custom-select-wrapper flex-1"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.formData.moneyAdvanceId,expression:"formData.moneyAdvanceId"}],staticClass:"form-control custom-select compact",attrs:{disabled:e.isFormDisabled},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.formData,"moneyAdvanceId",t.target.multiple?n:n[0])},e.updateSelectedAdvance]}},[n("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫•‡ªà‡∫ß‡∫á‡ªú‡ªâ‡∫≤")]),e._v(" "),e._l(e.availableAdvances,(function(t){var r;return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n                        #"+e._s(t.id)+" - #"+e._s(t.receiveName)+" - #"+e._s((null===(r=t.ministry)||void 0===r?void 0:r.ministryName)||"")+"\n                        -\n                        "+e._s(e.formatCurrency(t.amount,t.currency.code))+"\n                      ")])}))],2),e._v(" "),e._m(20)]),e._v(" "),n("button",{staticClass:"btn btn-outline-primary btn-sm compact",attrs:{type:"button",disabled:e.isFormDisabled||e.loadingAdvances},on:{click:function(t){return t.stopPropagation(),e.browseMoneyAdvances.apply(null,arguments)}}},[e.loadingAdvances?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("i",{staticClass:"fas fa-search"})])]),e._v(" "),e.selectedAdvance?n("div",{staticClass:"advance-info compact"},[n("div",{staticClass:"advance-summary"},[n("span",{staticClass:"advance-id"},[e._v("#"+e._s(e.selectedAdvance.id))]),e._v(" "),n("span",{staticClass:"advance-amount"},[e._v(e._s(e.formatCurrency(e.selectedAdvance.amount,e.selectedAdvance.currency.code)))]),e._v(" "),n("span",{staticClass:"advance-purpose"},[e._v(e._s(e.selectedAdvance.purpose||"No purpose"))]),e._v(" "),n("span",{class:["status-badge",e.selectedAdvance.status]},[e._v("\n                      "+e._s(e.formatStatus(e.selectedAdvance.status))+"\n                    ")])])]):e._e()]):e._e()]),e._v(" "),n("div",{staticClass:"form-group full-width"},[e._m(21),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formData.notes,expression:"formData.notes"}],staticClass:"form-control compact",attrs:{disabled:e.isFormDisabled,rows:"3",placeholder:"‡ªÄ‡∫ô‡∫∑‡ªâ‡∫≠‡ªÉ‡∫ô‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö / ‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÄ‡∫ï‡∫µ‡∫°...",maxlength:"500"},domProps:{value:e.formData.notes},on:{input:function(t){t.target.composing||e.$set(e.formData,"notes",t.target.value)}}}),e._v(" "),n("div",{staticClass:"field-hint"},[n("span",{staticClass:"text-counter"},[e._v(e._s((null===(t=e.formData.notes)||void 0===t?void 0:t.length)||0)+"/500")])])])]),e._v(" "),e.formErrors.length>0?n("div",{staticClass:"form-errors compact"},[e._m(22),e._v(" "),n("ul",e._l(e.formErrors,(function(t){return n("li",{key:t},[e._v(e._s(t))])})),0)]):e._e()]),e._v(" "),n("div",{staticClass:"modal-footer enhanced-footer compact"},[n("button",{staticClass:"btn btn-secondary compact",attrs:{type:"button",disabled:e.isFormDisabled},on:{click:e.closeDialog}},[n("i",{staticClass:"fas fa-times"}),e._v("\n            ‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å\n          ")]),e._v(" "),n("button",{staticClass:"btn btn-primary compact",attrs:{type:"submit",disabled:e.isFormDisabled||!e.isFormValid}},[e.isSubmitting?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("i",{staticClass:"fas",class:e.isEditMode?"fa-save":"fa-plus"}),e._v("\n            "+e._s(e.isSubmitting?"‡∫Å‡∫≥‡∫•‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å...":e.isEditMode?"‡∫≠‡∫±‡∫ö‡ªÄ‡∫î‡∫î":"‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å")+"\n          ")]),e._v(" "),n("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button",title:"Save & Print",disabled:e.isFormDisabled||!e.isFormValid},on:{click:function(t){return t.preventDefault(),e.printSettlement.apply(null,arguments)}}},[n("i",{staticClass:"fas fa-print"}),e._v("\n            Save & Print\n          ")])])])]),e._v(" "),e.showAdvanceBrowser?n("div",{staticClass:"modal-overlay browser-overlay",on:{click:e.handleAdvanceBrowserOverlayClick}},[n("div",{staticClass:"modal-dialog advance-browser-dialog",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"modal-header"},[e._m(23),e._v(" "),n("button",{staticClass:"close-btn",on:{click:e.closeAdvanceBrowser}},[n("i",{staticClass:"fas fa-times"})])]),e._v(" "),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"advance-filters compact"},[n("div",{staticClass:"filter-row compact"},[n("div",{staticClass:"filter-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.advanceSearch.query,expression:"advanceSearch.query"}],staticClass:"form-control compact",attrs:{type:"text",placeholder:"‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤‡∫ï‡∫≤‡∫°‡∫à‡∫∏‡∫î‡∫õ‡∫∞‡∫™‡∫ª‡∫á, ‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î..."},domProps:{value:e.advanceSearch.query},on:{input:[function(t){t.target.composing||e.$set(e.advanceSearch,"query",t.target.value)},e.searchAdvances]}})]),e._v(" "),n("div",{staticClass:"filter-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.advanceSearch.status,expression:"advanceSearch.status"}],staticClass:"form-control compact",on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.advanceSearch,"status",t.target.multiple?n:n[0])},e.filterAdvances]}},[n("option",{attrs:{value:""}},[e._v("‡∫ó‡∫∏‡∫Å‡∫™‡∫∞‡∫ñ‡∫≤‡∫ô‡∫∞")]),e._v(" "),n("option",{attrs:{value:"pending"}},[e._v("‡∫•‡ªç‡∫ñ‡ªâ‡∫≤")]),e._v(" "),n("option",{attrs:{value:"approved"}},[e._v("‡∫≠‡∫∞‡∫ô‡∫∏‡∫°‡∫±‡∫î")])])])])]),e._v(" "),n("div",{staticClass:"advances-list compact"},[e.loadingAdvances?n("div",{staticClass:"loading-state"},[n("div",{staticClass:"spinner-small"}),e._v(" "),n("p",[e._v("‡∫Å‡∫≥‡∫•‡∫±‡∫á‡ªÇ‡∫´‡∫º‡∫î...")])]):0===e.filteredAdvances.length?n("div",{staticClass:"empty-state"},[n("i",{staticClass:"fas fa-inbox"}),e._v(" "),n("p",[e._v("‡∫ö‡ªç‡ªà‡∫û‡∫ª‡∫ö‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫•‡ªà‡∫ß‡∫á‡ªú‡ªâ‡∫≤")])]):n("div",{staticClass:"advance-items compact"},e._l(e.filteredAdvances,(function(t){var r;return n("div",{key:t.id,staticClass:"advance-item compact",class:{selected:(null===(r=e.selectedAdvanceForBrowser)||void 0===r?void 0:r.id)===t.id},on:{click:function(n){return n.stopPropagation(),e.selectAdvanceFromBrowser(t)}}},[n("div",{staticClass:"advance-item-content compact"},[n("div",{staticClass:"advance-item-header compact"},[n("span",{staticClass:"advance-id"},[e._v("#"+e._s(t.id))]),e._v(" "),n("span",{class:["status-badge",t.status]},[e._v("\n                      "+e._s(e.formatStatus(t.status))+"\n                    ")])]),e._v(" "),n("div",{staticClass:"advance-item-body compact"},[n("div",{staticClass:"advance-amount"},[e._v("\n                      "+e._s(e.formatCurrency(t.amount,t.currency.code))+"\n                    ")]),e._v(" "),n("div",{staticClass:"advance-date"},[e._v("\n                      "+e._s(e.formatDate(t.bookingDate))+"\n                    ")]),e._v(" "),t.purpose?n("div",{staticClass:"advance-purpose"},[e._v("\n                      "+e._s(t.purpose)+"\n                    ")]):e._e()])])])})),0)])]),e._v(" "),n("div",{staticClass:"modal-footer compact"},[n("button",{staticClass:"btn btn-secondary compact",attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.closeAdvanceBrowser.apply(null,arguments)}}},[n("i",{staticClass:"fas fa-times"}),e._v("\n            ‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å\n          ")]),e._v(" "),n("button",{staticClass:"btn btn-primary compact",attrs:{type:"button",disabled:!e.selectedAdvanceForBrowser},on:{click:function(t){return t.stopPropagation(),e.confirmAdvanceSelection.apply(null,arguments)}}},[n("i",{staticClass:"fas fa-check"}),e._v("\n            ‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å\n          ")])])])]):e._e()]):e._e(),e._v(" "),e.showPrintVoucher&&e.settlementDetail?n("VoucherPrintComponent",{key:e.settlementDetail.id,attrs:{"voucher-data":e.settlementDetail},on:{close:e.closePrintVoucher}}):e._e()],1)}),[function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-calendar"}),this._v("\n                ‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫•‡∫ª‡∫á‡∫ä‡∫≥‡∫•‡∫∞\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-credit-card"}),this._v("\n                ‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-hashtag"}),this._v("\n                ‡∫≠‡∫µ‡∫á‡∫ï‡∫≤‡∫°\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-hashtag"}),this._v("\n                ‡ªÄ‡∫•‡∫Å‡∫≠‡ªâ‡∫≤‡∫á‡∫≠‡∫¥‡∫á‡∫û‡∫≤‡∫ç‡∫ô‡∫≠‡∫Å\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-money-check"}),this._v("\n                ‡ªÄ‡∫•‡∫Å‡ªÄ‡∫ä‡∫±‡∫Å\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-coins"}),this._v("\n                ‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-dollar-sign"}),this._v("\n                ‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-building"}),this._v("\n                ‡∫™‡∫±‡∫á‡∫Å‡∫±‡∫î‡∫¢‡∫π‡ªà (‡∫Å‡∫∞‡∫ä‡∫ß‡∫á)\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-university"}),this._v("\n                ‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-exchange-alt"}),this._v("\n                ‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡ªÅ‡∫•‡∫Å‡∫õ‡ªà‡∫Ω‡∫ô\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"input-group-append"},[t("span",{staticClass:"input-group-text compact"},[t("i",{staticClass:"fas fa-calculator"})])])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-chart-line"}),this._v("\n                ‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫•‡∫ß‡∫°\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-user"}),this._v("\n                ‡∫ú‡∫π‡ªâ‡∫•‡∫ª‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ (‡∫ú‡∫π‡ªâ‡∫Æ‡∫±‡∫ö)\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-link"}),this._v("\n                  ‡∫≠‡ªâ‡∫≤‡∫á‡∫≠‡∫¥‡∫á‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫•‡ªà‡∫ß‡∫á‡ªú‡ªâ‡∫≤\n                ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-sticky-note"}),this._v("\n                ‡ªÄ‡∫ô‡∫∑‡ªâ‡∫≠‡ªÉ‡∫ô‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö (‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î)\n              ")])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-exclamation-circle"}),this._v("\n              ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç‡∫Ç‡ªç‡ªâ‡∫ú‡∫¥‡∫î‡∫û‡∫≤‡∫î:\n            ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-title-section"},[e("i",{staticClass:"fas fa-search modal-icon"}),t._v(" "),e("h5",{staticClass:"modal-title"},[t._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫•‡ªà‡∫ß‡∫á‡ªú‡ªâ‡∫≤")])])}],!1,null,"216c16b2",null);e.default=component.exports},1199:function(t,e,n){var content=n(1431);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("33c9f604",content,!0,{sourceMap:!1})},1430:function(t,e,n){"use strict";n(1199)},1431:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,'.compact-date-field[data-v-216c16b2]{font-size:13px!important}.compact-date-field .v-input__control[data-v-216c16b2],.compact-date-field .v-input__slot[data-v-216c16b2]{max-height:40px!important;min-height:40px!important}.compact-date-field .v-input__slot[data-v-216c16b2]{align-items:center!important;padding:0 12px!important}.compact-date-field .v-text-field__details[data-v-216c16b2]{display:none!important}.compact-date-field .v-input__icon--prepend-inner[data-v-216c16b2]{align-self:center!important;margin-right:8px!important;margin-top:0!important}.compact-date-field .v-input__icon--append[data-v-216c16b2]{align-self:center!important;margin-left:8px!important;margin-top:0!important}.compact-date-field .v-text-field__slot[data-v-216c16b2]{align-items:center!important;max-height:38px!important;min-height:38px!important}.compact-date-field input[data-v-216c16b2]{font-size:13px!important;height:38px!important;line-height:1.2!important;margin:0!important;padding:0!important}.compact-date-field .v-text-field--outlined .v-input__control .v-input__slot[data-v-216c16b2],.compact-date-field.v-text-field--outlined .v-input__control .v-input__slot[data-v-216c16b2]{background:#fafafa!important;border:2px solid #e5e7eb!important;border-radius:6px!important}.compact-date-field .v-text-field--outlined.v-input--is-focused .v-input__control .v-input__slot[data-v-216c16b2],.compact-date-field.v-input--is-focused .v-input__slot[data-v-216c16b2]{background:#fff!important;border-color:#667eea!important;box-shadow:0 0 0 2px rgba(102,126,234,.1)!important}.compact-date-field .v-text-field--outlined.v-input--is-disabled .v-input__control .v-input__slot[data-v-216c16b2],.compact-date-field.v-input--is-disabled .v-input__slot[data-v-216c16b2]{background-color:#f3f4f6!important;border-color:#d1d5db!important}.compact-date-field.error--text .v-text-field--outlined .v-input__control .v-input__slot[data-v-216c16b2]{border-color:#e74c3c!important}.compact-date-field .v-text-field--outlined fieldset[data-v-216c16b2]{border:none!important}.compact-date-field .v-text-field--outlined .v-text-field__details[data-v-216c16b2]{display:none!important}.v-menu__content[data-v-216c16b2]{border-radius:8px!important;box-shadow:0 8px 32px rgba(0,0,0,.12)!important;overflow:hidden!important}.v-date-picker[data-v-216c16b2]{box-shadow:none!important}.modal-header-right[data-v-216c16b2]{align-items:center;display:flex;gap:15px}.voucher-number[data-v-216c16b2]{color:#fff;font-size:14px;font-weight:600;opacity:.9}.modal-overlay[data-v-216c16b2]{align-items:center;animation:fadeIn-216c16b2 .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.enhanced-dialog[data-v-216c16b2]{animation:slideIn-216c16b2 .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);display:flex;flex-direction:column;height:95vh;margin:0 auto;max-height:95vh;max-width:95vw;overflow:hidden;width:95%}.modal-header[data-v-216c16b2]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;flex-shrink:0;justify-content:space-between;padding:16px 24px}.modal-title-section[data-v-216c16b2]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-216c16b2]{font-size:18px;opacity:.9}.modal-title[data-v-216c16b2]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-216c16b2]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;opacity:.8;padding:6px;transition:opacity .2s}.close-btn[data-v-216c16b2]:hover{background:hsla(0,0%,100%,.1);opacity:1}.close-btn[data-v-216c16b2]:disabled{cursor:not-allowed;opacity:.5}.modal-body[data-v-216c16b2]{flex:1;min-height:0;overflow-y:auto;padding:16px 24px}.form-loading[data-v-216c16b2]{align-items:center;color:#666;display:flex;justify-content:center;padding:40px}.spinner-small[data-v-216c16b2]{animation:spin-216c16b2 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:20px;margin-right:10px;width:20px}@keyframes spin-216c16b2{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.form-grid.compact[data-v-216c16b2]{grid-gap:12px;align-content:start;display:grid;gap:12px;grid-template-columns:repeat(4,1fr);height:100%}.form-group[data-v-216c16b2]{margin-bottom:0}.form-group.full-width[data-v-216c16b2]{grid-column:1/-1}.form-label[data-v-216c16b2]{align-items:center;color:#374151;display:flex;font-size:12px;font-weight:600;gap:6px;margin-bottom:4px}.form-label.required[data-v-216c16b2]:after{color:#e74c3c;content:"*";margin-left:2px}.form-label i[data-v-216c16b2]{color:#6b7280;font-size:10px}.form-control.compact[data-v-216c16b2]{background:#fafafa;border:2px solid #e5e7eb;border-radius:6px;box-sizing:border-box;font-size:13px;padding:8px 12px;transition:all .2s ease;width:100%}.form-control.compact[data-v-216c16b2]:focus{background:#fff;border-color:#667eea;box-shadow:0 0 0 2px rgba(102,126,234,.1);outline:none}.form-control.compact[data-v-216c16b2]:disabled{background-color:#f3f4f6;border-color:#d1d5db;color:#6b7280;cursor:not-allowed}.form-control.is-invalid[data-v-216c16b2]{border-color:#e74c3c}.invalid-feedback[data-v-216c16b2]{color:#e74c3c;display:block;font-size:10px;margin-top:2px}.input-group.compact[data-v-216c16b2]{border-radius:6px;display:flex;overflow:hidden}.input-group.compact .form-control[data-v-216c16b2]{border-radius:0;border-right:none}.input-group-append[data-v-216c16b2]{display:flex}.input-group-text.compact[data-v-216c16b2]{background:#f8f9fa;border:2px solid #e5e7eb;border-left:none;color:#6b7280;font-size:12px;font-weight:600;padding:8px 12px}.custom-select-wrapper[data-v-216c16b2]{position:relative}.custom-select.compact[data-v-216c16b2]{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:30px}.select-icon[data-v-216c16b2]{color:#6b7280;font-size:10px;pointer-events:none;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.link-advance-options.compact[data-v-216c16b2]{display:flex;gap:12px;margin-top:4px}.radio-option[data-v-216c16b2]{align-items:center;color:#374151;cursor:pointer;display:flex;font-size:12px;gap:4px}.radio-option input[type=radio][data-v-216c16b2]{margin:0;transform:scale(.8)}.radio-label[data-v-216c16b2]{font-weight:500}.compact-advance[data-v-216c16b2]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:1px solid #e2e8f0;border-radius:8px;margin:8px 0;padding:12px}.advance-toggle[data-v-216c16b2]{align-items:center;display:flex;justify-content:space-between;margin-bottom:8px}.advance-selection.compact[data-v-216c16b2]{margin-top:8px}.advance-selection-container.compact[data-v-216c16b2]{align-items:flex-start;display:flex;gap:8px;margin-bottom:8px}.flex-1[data-v-216c16b2]{flex:1}.btn.compact[data-v-216c16b2]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:12px;font-weight:600;gap:4px;padding:6px 12px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn-sm.compact[data-v-216c16b2]{font-size:11px;padding:4px 8px}.advance-info.compact[data-v-216c16b2]{background:#f0f9ff;border:1px solid #bae6fd;border-radius:6px;margin-top:8px;padding:8px}.advance-summary[data-v-216c16b2]{align-items:center;display:flex;flex-wrap:wrap;font-size:11px;gap:8px}.advance-id[data-v-216c16b2]{background:#e2e8f0;color:#1e293b;font-family:"Courier New",monospace}.advance-amount[data-v-216c16b2],.advance-id[data-v-216c16b2]{border-radius:4px;font-size:10px;font-weight:700;padding:2px 6px}.advance-amount[data-v-216c16b2]{background:#d1fae5;color:#059669}.advance-purpose[data-v-216c16b2]{color:#6b7280;font-size:10px;font-style:italic}.status-badge[data-v-216c16b2]{border-radius:8px;font-size:9px;font-weight:600;letter-spacing:.3px;padding:2px 6px;text-transform:uppercase}.status-badge.pending[data-v-216c16b2]{background:#fef3c7;color:#92400e}.status-badge.approved[data-v-216c16b2]{background:#d1fae5;color:#065f46}.status-badge.settled[data-v-216c16b2]{background:#dbeafe;color:#1e40af}.field-hint[data-v-216c16b2]{align-items:center;display:flex;font-size:10px;gap:4px;justify-content:space-between;margin-top:4px}.field-hint.error[data-v-216c16b2]{color:#e74c3c}.field-hint.warning[data-v-216c16b2]{color:#f39c12}.field-hint.info[data-v-216c16b2]{color:#0ea5e9}.text-counter[data-v-216c16b2]{color:#9ca3af;font-size:9px;margin-left:auto}.form-errors.compact[data-v-216c16b2]{background:#fef2f2;border:1px solid #fecaca;border-radius:6px;margin-top:12px;padding:12px}.form-errors.compact h6[data-v-216c16b2]{align-items:center;color:#dc2626;display:flex;font-size:12px;gap:4px;margin:0 0 6px}.form-errors.compact ul[data-v-216c16b2]{color:#dc2626;font-size:11px;margin:0;padding-left:16px}.enhanced-footer.compact[data-v-216c16b2],.modal-footer.compact[data-v-216c16b2]{background:#f8f9fa;border-top:1px solid #e9ecef;display:flex;flex-shrink:0;gap:8px;justify-content:flex-end;padding:12px 24px}.btn[data-v-216c16b2]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:13px;font-weight:600;gap:6px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn[data-v-216c16b2]:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-1px)}.btn[data-v-216c16b2]:active:not(:disabled){transform:translateY(0)}.btn-primary[data-v-216c16b2]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-secondary[data-v-216c16b2]{background:#6c757d;color:#fff}.btn-outline-primary[data-v-216c16b2]{background:transparent;border:2px solid #667eea;color:#667eea}.btn-outline-primary[data-v-216c16b2]:hover{background:#667eea;color:#fff}.btn[data-v-216c16b2]:disabled{box-shadow:none!important;cursor:not-allowed;opacity:.6;transform:none!important}.fa-spin[data-v-216c16b2]{animation:spin-216c16b2 1s linear infinite}.advance-filters.compact[data-v-216c16b2]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;margin-bottom:12px;padding:12px}.filter-row.compact[data-v-216c16b2]{grid-gap:12px;align-items:center;display:grid;gap:12px;grid-template-columns:1fr auto}.advances-list.compact[data-v-216c16b2]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;max-height:300px;overflow-y:auto}.advance-items.compact[data-v-216c16b2]{display:flex;flex-direction:column;padding:8px}.advance-item.compact[data-v-216c16b2]{background:#fff;border:1px solid #e5e7eb;border-radius:6px;cursor:pointer;margin-bottom:8px;padding:12px;transition:all .2s ease}.advance-item.compact[data-v-216c16b2]:hover{background:#f0f9ff;border-color:#60a5fa}.advance-item.compact.selected[data-v-216c16b2]{background:#dbeafe;border-color:#3b82f6}.advance-item-content.compact[data-v-216c16b2]{display:flex;flex-direction:column;gap:8px}.advance-item-header.compact[data-v-216c16b2]{align-items:center;display:flex;justify-content:space-between}.advance-item-body.compact[data-v-216c16b2]{grid-gap:8px;display:grid;font-size:11px;gap:8px;grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}.empty-state[data-v-216c16b2],.loading-state[data-v-216c16b2]{align-items:center;color:#666;display:flex;flex-direction:column;justify-content:center;padding:40px}.empty-state i[data-v-216c16b2]{color:#ccc;font-size:48px;margin-bottom:16px}@media (max-width:1200px){.form-grid.compact[data-v-216c16b2]{grid-template-columns:repeat(3,1fr)}}@media (max-width:768px){.enhanced-dialog[data-v-216c16b2]{height:98vh;margin:1vh auto;max-height:98vh;width:98%}.form-grid.compact[data-v-216c16b2]{gap:8px;grid-template-columns:repeat(2,1fr)}.modal-body[data-v-216c16b2],.modal-header[data-v-216c16b2]{padding:12px 16px}.enhanced-footer.compact[data-v-216c16b2],.modal-footer.compact[data-v-216c16b2]{flex-direction:column-reverse;padding:12px 16px}.enhanced-footer.compact .btn[data-v-216c16b2],.modal-footer.compact .btn[data-v-216c16b2]{justify-content:center;width:100%}.compact-date-field .v-input__slot[data-v-216c16b2]{padding:0 8px!important}}@media (max-width:480px){.form-grid.compact[data-v-216c16b2]{grid-template-columns:1fr}.advance-toggle[data-v-216c16b2]{align-items:flex-start;gap:8px}.advance-selection-container.compact[data-v-216c16b2],.advance-toggle[data-v-216c16b2]{flex-direction:column}}@keyframes fadeIn-216c16b2{0%{opacity:0}to{opacity:1}}@keyframes slideIn-216c16b2{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}',""]),r.locals={},t.exports=r},940:function(t,e,n){var r=n(13),o=n(26),c=n(78),d=n(348),l=n(457);r({target:"Object",stat:!0,forced:o((function(){d(1)})),sham:!l},{getPrototypeOf:function(t){return d(c(t))}})},979:function(t,e,n){var r=n(13),o=n(26),c=n(350).f;r({target:"Object",stat:!0,forced:o((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:c})}}]);