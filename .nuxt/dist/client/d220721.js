(window.webpackJsonp=window.webpackJsonp||[]).push([[133,76],{859:function(e,t,r){"use strict";r.r(t);var n=r(788),o=r(317),c=r(314),l=r(18),d=r(821),f=r(318),m=r(786),v=r(795),x=r(760),y=r(313),h=r(787),O=r(167),_=r(785),k=r(65),P=r(783),w=r(113),j=(r(34),r(35),r(131),r(5),r(53),r(10),r(7),r(9),r(11),r(8),r(12),r(3)),I=r(20),C=(r(92),r(22),r(36)),A=r(40);function $(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function R(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(t){Object(j.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var E={props:{isCreate:{type:Boolean,require:!0,default:!0},recordId:{type:Number,require:!1,default:0}},data:function(){return{grades:["A","B","C","D","E","F"],search:"",form:{grade:"",productId:"",id:null,name:"",amount:0,type:"Price",currencyId:1,isActive:!0},type:["Price","Percent"],entries:[],headers:[{text:"Name",align:"end",value:"name",sortable:!1},{text:"ລາຄາ",align:"end",value:"amount",sortable:!1},{text:"ສູດຄິດໄລ່",align:"end",value:"type",sortable:!1},{text:"ລົບ",align:"end",value:"id",sortable:!1}],isloading:!1,nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=150||"Name must be less than 20 characters"}]}},created:function(){var e=this;return Object(I.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.form.productId=e.recordId,e.loadEntry();case 2:case"end":return t.stop()}}),t)})))()},methods:R(R({},Object(A.b)(["addProductPricesToCreate","deleteProductPricesToCreate"])),{},{formatNumber:function(e){return Object(C.e)(e)},commitRecord:function(){var e=this;return Object(I.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()||e.isloading){t.next=23;break}if(0!=e.recordId){t.next=6;break}return r=R({},e.form),e.addProductPricesToCreate(r),console.log("Item to create ".concat(e.findAllProductPriceListToCreate.length)),t.abrupt("return");case 6:return e.isloading=!0,n="api/priceList/create",console.log("API => ",n),t.prev=9,t.next=12,e.$axios.post(n,e.form);case 12:return o=t.sent,console.log("Load data ".concat(JSON.stringify(o))),t.next=16,e.loadEntry();case 16:Object(C.k)(e.$swal,"Succeed","Your transaction completed"),t.next=22;break;case 19:return t.prev=19,t.t0=t.catch(9),t.abrupt("return",Object(C.j)(e.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ"));case 22:e.isloading=!1;case 23:case"end":return t.stop()}}),t,null,[[9,19]])})))()},deleteItem:function(e,t){var r=this;return Object(I.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!=r.recordId){n.next=3;break}return r.deleteProductPricesToCreate(t),n.abrupt("return");case 3:if(r.isloading){n.next=21;break}return r.isloading=!0,o="api/priceList/find/".concat(e.id),console.log("API => ",o),n.prev=7,n.next=10,r.$axios.delete(o);case 10:return n.sent,console.log("Load data "),n.next=14,r.loadEntry();case 14:Object(C.k)(r.$swal,"Succeed","Your transaction has been deleted"),n.next=20;break;case 17:return n.prev=17,n.t0=n.catch(7),n.abrupt("return",Object(C.j)(r.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ"));case 20:r.isloading=!1;case 21:case"end":return n.stop()}}),n,null,[[7,17]])})))()},loadEntry:function(){var e=this;return Object(I.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Loading data .... ".concat(e.recordId)),0!=e.recordId){t.next=4;break}return e.entries=e.findAllProductPriceListToCreate,t.abrupt("return");case 4:return t.prev=4,t.next=7,e.$axios.get("api/priceList/findByProductId/".concat(e.recordId));case 7:r=t.sent,console.warn("RESPONSE DATA ".concat(JSON.stringify(r.data))),e.entries=r.data,t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(4),console.log("Cannot fetch data "+t.t0),t.abrupt("return",Object(C.j)(e.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ"));case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()},refreshData:function(){this.$emit("reload-data")}}),computed:R({},Object(A.c)(["findAllProductPriceListToCreate","findAllProduct","findAllClient","findAllPayment","findAllUnit","findAllCurrency"]))},N=r(32),component=Object(N.a)(E,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(x.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[t("loading-indicator")],1),e._v(" "),t(c.a,{staticClass:"pa-4"},[t(l.d,[t(f.a,{staticClass:"ma-0",attrs:{color:"primary",label:"","text-color":"white"}},[t(O.a,{attrs:{start:""}},[e._v("mdi-label")]),e._v("\n        ຈັດການ ລາຍການລາຄາ\n      ")],1)],1),e._v(" "),t(l.c,[t(h.a,{ref:"form"},[t(_.a,[t(m.a,{attrs:{cols:"12"}},[t(w.a,{attrs:{label:"* ລະຫັດສິນຄ້າ",disabled:""},model:{value:e.form.productId,callback:function(t){e.$set(e.form,"productId",t)},expression:"form.productId"}})],1),e._v(" "),t(m.a,{attrs:{cols:"2"}},[t(w.a,{attrs:{label:"* Name",required:"",rules:e.nameRules},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t(m.a,{attrs:{cols:"2"}},[t(n.a,{attrs:{items:e.grades,label:"Grade *"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}})],1),e._v(" "),t(m.a,{attrs:{cols:"2"}},[t(w.a,{attrs:{label:"* ລາຄາ",required:"",rules:e.nameRules},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1),e._v(" "),t(m.a,{attrs:{cols:"2"}},[t(n.a,{attrs:{"item-text":"code","item-value":"id",items:e.findAllCurrency,label:"Currency*"},model:{value:e.form.currencyId,callback:function(t){e.$set(e.form,"currencyId",t)},expression:"form.currencyId"}})],1),e._v(" "),t(m.a,{attrs:{cols:"2"}},[t(k.a,{attrs:{items:e.type,label:"ຮູບແບບລາຄາ",required:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),e._v(" "),t(m.a,{attrs:{cols:"2"}},[t(d.a,{attrs:{label:"Is Active"},model:{value:e.form.isActive,callback:function(t){e.$set(e.form,"isActive",e._n(t))},expression:"form.isActive"}})],1)],1),e._v(" "),t(_.a,[t(m.a,{attrs:{cols:"12"}},[t(o.a,{attrs:{color:"primary",rounded:"",variant:"text"},on:{click:e.commitRecord}},[e._v("\n              ເພີ່ມ\n            ")])],1)],1)],1),e._v(" "),t("small",[e._v("* ສະແດງເຖິງຟິວທີ່ຕ້ອງໃສ່ຂໍ້ມູນ")]),e._v(" "),t(y.a),e._v(" "),t(v.a,{attrs:{headers:e.headers,search:e.search,items:e.entries},scopedSlots:e._u([{key:"item.id",fn:function(r){var n=r.item,c=r.index;return[t(o.a,{attrs:{color:"warning",text:""},on:{click:function(t){return e.deleteItem(n,c)}}},[t("i",{staticClass:"fa fa-trash"})])]}},{key:"item.name",fn:function(t){var r=t.item;return[e._v("\n          "+e._s(r.name)+" [ "+e._s(r.grade)+" ]\n        ")]}},{key:"item.amount",fn:function(t){var r=t.item;return[e._v("\n          "+e._s(e.formatNumber(r.amount))+"\n        ")]}}],null,!0)})],1),e._v(" "),t(l.a,[t(P.a),e._v(" "),t(o.a,{attrs:{color:"warning",rounded:"",variant:"text"},on:{click:function(t){return e.$emit("close-dialog")}}},[e._v("\n        Close\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingIndicator:r(248).default})},869:function(e,t,r){"use strict";r.r(t);var n=r(317),o=r(314),c=r(18),l=r(244),d=r(783),f={props:["iUrl"]},m=r(32),component=Object(m.a)(f,(function(){var e=this,t=e._self._c;return t(o.a,[t(l.a,{attrs:{src:e.iUrl||"No image"}}),e._v(" "),t(c.a,[t(d.a),e._v(" "),t(n.a,{attrs:{color:"primary",variant:"text",rounded:""},on:{click:function(t){return t.preventDefault(),e.$emit("closeDia")}}},[e._v("\n      Close\n    ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);