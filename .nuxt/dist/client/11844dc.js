(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{1261:function(t,e,n){var content=n(1559);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("06f1fdc2",content,!0,{sourceMap:!1})},1558:function(t,e,n){"use strict";n(1261)},1559:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".ap-invoice-container[data-v-340245a8]{margin:0 auto;max-width:1400px;padding:20px}.header-section[data-v-340245a8]{align-items:center;display:flex;justify-content:space-between;margin-bottom:30px}.header-actions[data-v-340245a8]{align-items:center;display:flex;gap:12px}.page-title[data-v-340245a8]{color:#333;font-size:28px;font-weight:600;margin:0}.summary-cards[data-v-340245a8]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:30px}.summary-card[data-v-340245a8]{border:1px solid #e3e6f0;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1)}.card-body[data-v-340245a8]{padding:20px;text-align:center}.card-title[data-v-340245a8]{color:#666;font-size:14px;font-weight:600;margin-bottom:10px;text-transform:uppercase}.card-value[data-v-340245a8]{color:#333;font-size:24px;font-weight:700;margin:0}.card-value.pending[data-v-340245a8]{color:#f39c12}.card-value.approved[data-v-340245a8]{color:#27ae60}.card-value.paid[data-v-340245a8]{color:#3498db}.card-value.overdue[data-v-340245a8]{color:#e74c3c}.card-value.outstanding[data-v-340245a8]{color:#e67e22}.filters-section[data-v-340245a8]{background:#f8f9fa;border-radius:8px;margin-bottom:20px;padding:20px}.row[data-v-340245a8]{display:flex;flex-wrap:wrap;margin:-10px}.col-md-1[data-v-340245a8]{flex:0 0 8.333%;max-width:8.333%;padding:10px}.col-md-2[data-v-340245a8]{flex:0 0 16.666%;max-width:16.666%;padding:10px}.col-md-3[data-v-340245a8]{flex:0 0 25%;max-width:25%;padding:10px}.form-control[data-v-340245a8]{border:1px solid #ddd;border-radius:4px;font-size:14px;padding:8px 12px;width:100%}.btn[data-v-340245a8]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:8px;padding:8px 16px;transition:all .2s ease}.btn-primary[data-v-340245a8]{background:#007bff;color:#fff}.btn-secondary[data-v-340245a8]{background:#6c757d;color:#fff}.btn-block[data-v-340245a8]{justify-content:center;width:100%}.btn[data-v-340245a8]:hover{opacity:.9;transform:translateY(-1px)}.table-container[data-v-340245a8]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);overflow:hidden;position:relative}.loading-overlay[data-v-340245a8]{align-items:center;background:hsla(0,0%,100%,.8);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:10}.spinner[data-v-340245a8]{animation:spin-340245a8 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:40px;width:40px}@keyframes spin-340245a8{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.table[data-v-340245a8]{border-collapse:collapse;margin:0;width:100%}.table th[data-v-340245a8]{background:#f8f9fa;border-bottom:2px solid #dee2e6;font-weight:600;white-space:nowrap}.table td[data-v-340245a8],.table th[data-v-340245a8]{font-size:13px;padding:15px 10px}.table td[data-v-340245a8]{border-top:1px solid #dee2e6;vertical-align:middle}.table-striped tbody tr[data-v-340245a8]:nth-of-type(odd){background-color:rgba(0,0,0,.05)}.invoice-number[data-v-340245a8]{color:#333;font-weight:600}.overdue-badge[data-v-340245a8]{color:#e74c3c;font-size:10px;font-weight:500;margin-top:2px}.vendor-info[data-v-340245a8]{font-size:12px}.vendor-name[data-v-340245a8]{color:#333;font-weight:600;margin-bottom:2px}.vendor-code[data-v-340245a8]{background:#e3f2fd;border-radius:3px;color:#666;font-family:monospace;font-size:10px;padding:1px 4px}.no-vendor[data-v-340245a8]{color:#999;font-size:11px;font-style:italic}.amount[data-v-340245a8]{font-weight:600}.amount.paid[data-v-340245a8]{color:#27ae60}.amount.outstanding[data-v-340245a8]{color:#e67e22}.text-danger[data-v-340245a8]{color:#e74c3c!important}.status-badge[data-v-340245a8]{align-items:center;border:1px solid transparent;border-radius:20px;display:inline-flex;font-size:12px;font-weight:600;gap:6px;padding:6px 12px;text-transform:uppercase}.status-badge.draft[data-v-340245a8]{background:#f8f9fa;border-color:#dee2e6;color:#6c757d}.status-badge.pending[data-v-340245a8]{background:#fff3cd;border-color:#ffeaa7;color:#856404}.status-badge.approved[data-v-340245a8]{background:#d4edda;border-color:#c3e6cb;color:#155724}.status-badge.partially_paid[data-v-340245a8]{background:#cce5ff;border-color:#b3d7ff;color:#004085}.status-badge.paid[data-v-340245a8]{background:#d1ecf1;border-color:#bee5eb;color:#0c5460}.status-badge.overdue[data-v-340245a8]{background:#f8d7da;border-color:#f5c6cb;color:#721c24}.status-badge.cancelled[data-v-340245a8]{background:#e2e3e5;border-color:#d6d8db;color:#383d41}.action-buttons[data-v-340245a8]{flex-wrap:wrap;gap:4px}.action-buttons[data-v-340245a8],.btn-sm[data-v-340245a8]{display:flex;justify-content:center}.btn-sm[data-v-340245a8]{align-items:center;border:none;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);cursor:pointer;font-size:11px;height:28px;padding:0;transition:all .2s ease;width:28px}.btn-sm[data-v-340245a8]:hover{box-shadow:0 4px 8px rgba(0,0,0,.15);transform:translateY(-2px)}.btn-sm.btn-info[data-v-340245a8]{background:#17a2b8;color:#fff}.btn-sm.btn-warning[data-v-340245a8]{background:#ffc107;color:#212529}.btn-sm.btn-success[data-v-340245a8]{background:#28a745;color:#fff}.btn-sm.btn-dark[data-v-340245a8]{background:#343a40;color:#fff}.no-data[data-v-340245a8]{color:#666;padding:60px 20px;text-align:center}.no-data i[data-v-340245a8]{font-size:48px;margin-bottom:15px;opacity:.5}.pagination-nav[data-v-340245a8]{display:flex;justify-content:center;margin-top:20px}.pagination[data-v-340245a8]{display:flex;list-style:none;margin:0;padding:0}.page-item[data-v-340245a8]{margin:0 2px}.page-link[data-v-340245a8]{background:#fff;border:1px solid #dee2e6;color:#007bff;cursor:pointer;padding:8px 12px;-webkit-text-decoration:none;text-decoration:none}.page-link[data-v-340245a8]:hover{background:#e9ecef}.page-item.active .page-link[data-v-340245a8]{background:#007bff;border-color:#007bff;color:#fff}.page-item.disabled .page-link[data-v-340245a8]{background:#fff;color:#6c757d;cursor:not-allowed}.modal-overlay[data-v-340245a8]{align-items:center;background-color:rgba(0,0,0,.6);display:flex;height:100%;justify-content:center;left:0;padding:20px;position:fixed;top:0;width:100%;z-index:1050}.detail-modal[data-v-340245a8]{background:#fff;border-radius:8px;box-shadow:0 10px 30px rgba(0,0,0,.3);display:flex;flex-direction:column;max-height:80vh;max-width:600px;overflow:hidden;width:100%}.modal-header[data-v-340245a8]{align-items:center;background:#f8f9fa;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px}.modal-header h4[data-v-340245a8]{color:#333;margin:0}.close-btn[data-v-340245a8]{background:none;border:none;color:#666;cursor:pointer;font-size:18px;padding:5px}.close-btn[data-v-340245a8]:hover{color:#333}.modal-body[data-v-340245a8]{flex:1;overflow-y:auto;padding:20px}.loading-state[data-v-340245a8]{align-items:center;color:#666;justify-content:center;padding:40px}.detail-content[data-v-340245a8],.loading-state[data-v-340245a8]{display:flex;flex-direction:column}.detail-content[data-v-340245a8]{gap:15px}.detail-row[data-v-340245a8]{align-items:flex-start;border-bottom:1px solid #f0f0f0;display:flex;padding:10px 0}.detail-row[data-v-340245a8]:last-child{border-bottom:none}.detail-row label[data-v-340245a8]{color:#333;font-size:14px;font-weight:600;margin-right:15px;min-width:140px}.detail-row span[data-v-340245a8]{color:#666;flex:1;font-size:14px}@media (max-width:768px){.summary-cards[data-v-340245a8]{grid-template-columns:repeat(2,1fr)}.table-container[data-v-340245a8]{overflow-x:auto}.table[data-v-340245a8]{min-width:1000px}.row[data-v-340245a8]{flex-direction:column}.col-md-1[data-v-340245a8],.col-md-2[data-v-340245a8],.col-md-3[data-v-340245a8]{flex:1;margin-bottom:10px;max-width:100%}.detail-row[data-v-340245a8]{flex-direction:column;gap:5px}.detail-row label[data-v-340245a8]{margin-right:0;min-width:auto}}@media (max-width:480px){.summary-cards[data-v-340245a8]{grid-template-columns:1fr}.header-section[data-v-340245a8]{flex-direction:column;gap:15px;text-align:center}.action-buttons[data-v-340245a8]{justify-content:center}}",""]),r.locals={},t.exports=r},1822:function(t,e,n){"use strict";n.r(e);n(44),n(9),n(5),n(35),n(39),n(7),n(67),n(10),n(12),n(8),n(13);var r=n(3),o=n(20),c=(n(54),n(53),n(34),n(131),n(62),n(30),n(92),n(1698)),d=n(36);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"APInvoiceManagement",components:{APInvoiceDialog:c.default},data:function(){return{statusFilter:"",statusLabels:{draft:"ຮ່າງ",pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",partially_paid:"ຊຳລະບາງສ່ວນ",paid:"ຊຳລະແລ້ວ",overdue:"ເກີນກຳນົດ",cancelled:"ຍົກເລີກ"},invoices:[],vendors:[],glAccounts:[],currencies:[],dashboard:null,pagination:{currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10},filters:{status:"",vendorId:"",startDate:"",endDate:""},searchTerm:"",loading:!1,detailLoading:!1,showDialog:!1,showDetailModal:!1,selectedInvoice:null,invoiceDetails:null,searchTimeout:null}},computed:{user:function(){return this.$auth.user||""},safeDashboard:function(){var t,e;return{counts:(null===(t=this.dashboard)||void 0===t?void 0:t.counts)||{total:0,draft:0,pending:0,approved:0,partially_paid:0,paid:0,overdue:0,cancelled:0},amounts:(null===(e=this.dashboard)||void 0===e?void 0:e.amounts)||{total:0,outstanding:0,paid:0}}},paginationPages:function(){for(var t=[],e=Math.max(1,this.pagination.currentPage-2),n=Math.min(this.pagination.totalPages,this.pagination.currentPage+2),i=e;i<=n;i++)t.push(i);return t}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:case"end":return e.stop()}}),e)})))()},methods:{getStatusInLao:function(t){return this.statusLabels[t]||t.toUpperCase()},getOutstandingAmount:function(t){return parseFloat(t.totalAmount||0)-parseFloat(t.paidAmount||0)},isOverdue:function(t){return!!t&&new Date(t)<new Date},loadInitialData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.fetchData(),t.fetchDashboard(),t.fetchVendors(),t.fetchCurrencies(),t.fetchAccountCharts()]);case 2:case"end":return e.stop()}}),e)})))()},fetchData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=v({page:t.pagination.currentPage,limit:t.pagination.itemsPerPage},t.filters),t.statusFilter&&(n.status=t.statusFilter),t.searchTerm&&(n.search=t.searchTerm),e.next=7,t.$axios.get("/api/ap-invoices",{params:n});case 7:r=e.sent,data=r.data,t.invoices=data.data.invoices,t.pagination=data.data.pagination,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),t.showToast("ເກີດຂໍ້ຜິດພາດໃນການດຶງຂໍ້ມູນໃບແຈ້ງໜີ້","error"),console.error(e.t0);case 17:return e.prev=17,t.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))()},fetchDashboard:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},t.filters.vendorId&&(n.vendorId=t.filters.vendorId),e.next=5,t.$axios.get("/api/ap-invoices/reports/summary",{params:n});case 5:r=e.sent,(data=r.data)&&data.data&&(t.dashboard={counts:data.data.counts||{total:0,draft:0,pending:0,approved:0,partially_paid:0,paid:0,overdue:0,cancelled:0},amounts:data.data.amounts||{total:0,outstanding:0,paid:0}}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching dashboard:",e.t0),t.dashboard={counts:{total:0,draft:0,pending:0,approved:0,partially_paid:0,paid:0,overdue:0,cancelled:0},amounts:{total:0,outstanding:0,paid:0}};case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},fetchVendors:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/vendor/find");case 3:n=e.sent,data=n.data,t.vendors=data||[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching vendors:",e.t0),t.vendors=[],t.showToast("ບໍ່ສາມາດດຶງຂໍ້ມູນຜູ້ຂາຍໄດ້","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchCurrencies:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/currency/find");case 3:n=e.sent,data=n.data,t.currencies=data||[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching currencies:",e.t0),t.currencies=[],t.showToast("ບໍ່ສາມາດດຶງຂໍ້ມູນສະກຸນເງິນໄດ້","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchAccountCharts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/accountChart/find");case 3:n=e.sent,data=n.data,t.glAccounts=data||[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching currencies:",e.t0),t.glAccounts=[],t.showToast("ບໍ່ສາມາດດຶງຂໍ້ມູນສະກຸນເງິນໄດ້","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},openDialog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.selectedInvoice=t,this.showDialog=!0},closeDialog:function(){this.showDialog=!1,this.selectedInvoice=null},viewDetails:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.selectedInvoice=t,e.showDetailModal=!0,n.prev=2,e.detailLoading=!0,n.next=6,e.$axios.get("/api/ap-invoices/".concat(t.id));case 6:r=n.sent,data=r.data,e.invoiceDetails=data.data,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),console.error("Error fetching invoice details:",n.t0),e.showToast("ບໍ່ສາມາດດຶງຂໍ້ມູນລາຍລະອຽດໄດ້","error");case 15:return n.prev=15,e.detailLoading=!1,n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,11,15,18]])})))()},closeDetailModal:function(){this.showDetailModal=!1,this.selectedInvoice=null,this.invoiceDetails=null},saveInvoice:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c,d,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,o={reason:t.reason||(t.id?"Updated invoice":"Created new invoice"),userId:null===(r=e.user)||void 0===r?void 0:r.id},!t.id){n.next=8;break}return n.next=5,e.$axios.put("/api/ap-invoices/".concat(t.id),v(v({},t),o));case 5:e.showToast("ອັບເດດໃບແຈ້ງໜີ້ສຳເລັດ","success"),n.next=11;break;case 8:return n.next=10,e.$axios.post("/api/ap-invoices",v(v({},t),o));case 10:e.showToast("ສ້າງໃບແຈ້ງໜີ້ສຳເລັດ","success");case 11:return e.closeDialog(),n.next=14,e.fetchData();case 14:return n.next=16,e.fetchDashboard();case 16:n.next=23;break;case 18:n.prev=18,n.t0=n.catch(0),l=(null===(c=n.t0.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||"ເກີດຂໍ້ຜິດພາດໃນການບັນທຶກ",e.showToast(l,"error"),console.error("Save error:",n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,18]])})))()},approveInvoice:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(d.i)(e.$swal,"ຢືນຢັນການອະນຸມັດ","ທ່ານແນ່ໃຈທີ່ຈະອະນຸມັດໃບແຈ້ງໜີ້ ".concat(t.invoiceNumber," ແມ່ນບໍ່?"),"question","ບໍ່","ຕົກລົງ");case 3:if(!n.sent.isConfirmed){n.next=12;break}return n.next=7,e.$axios.post("/api/ap-invoices/".concat(t.id,"/approve"),{checkerId:e.user.id,reason:"Approved by manager"});case 7:return e.showToast("ອະນຸມັດໃບແຈ້ງໜີ້ສຳເລັດ","success"),n.next=10,e.fetchData();case 10:return n.next=12,e.fetchDashboard();case 12:n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),console.error("Error approving invoice:",n.t0),e.showToast("ເກີດຂໍ້ຜິດພາດໃນການອະນຸມັດ","error");case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))()},cancelInvoice:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(d.i)(e.$swal,"ຢືນຢັນການຍົກເລີກ","ທ່ານແນ່ໃຈທີ່ຈະຍົກເລີກໃບແຈ້ງໜີ້ ".concat(t.invoiceNumber," ແມ່ນບໍ່?"),"warning","ບໍ່","ຍົກເລີກ");case 3:if(!n.sent.isConfirmed){n.next=12;break}return n.next=7,e.$axios.post("/api/ap-invoices/".concat(t.id,"/cancel"),{reason:"Cancelled by user"});case 7:return e.showToast("ຍົກເລີກໃບແຈ້ງໜີ້ສຳເລັດ","success"),n.next=10,e.fetchData();case 10:return n.next=12,e.fetchDashboard();case 12:n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),console.error("Error cancelling invoice:",n.t0),e.showToast("ເກີດຂໍ້ຜິດພາດໃນການຍົກເລີກ","error");case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))()},onFilterChange:function(){this.filters.status=this.statusFilter,this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},changePage:function(t){t>=1&&t<=this.pagination.totalPages&&(this.pagination.currentPage=t,this.fetchData())},resetFilters:function(){this.filters={status:"",vendorId:"",startDate:"",endDate:""},this.searchTerm="",this.statusFilter="",this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},debounceSearch:function(){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.pagination.currentPage=1,t.fetchData()}),500)},formatCurrency:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-GB"):"N/A"},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[e](t):this.$notify?this.$notify({title:"error"===e?"ຂໍ້ຜິດພາດ":"ສຳເລັດ",message:t,type:"error"===e?"error":"success"}):alert("".concat(e.toUpperCase(),": ").concat(t))}}},m=f,h=(n(1558),n(32)),component=Object(h.a)(m,(function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"ap-invoice-container"},[n("div",{staticClass:"header-section"},[n("h1",{staticClass:"page-title"},[e._v("ໃບແຈ້ງໜີ້ຄ້າງຈ່າຍ (AP Invoice)")]),e._v(" "),n("div",{staticClass:"header-actions"},[n("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.openDialog()}}},[n("i",{staticClass:"fas fa-plus"}),e._v(" ເພີ່ມໃບແຈ້ງໜີ້ໃໝ່\n      ")])])]),e._v(" "),n("div",{staticClass:"summary-cards"},[n("div",{staticClass:"card summary-card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("ຈຳນວນໃບແຈ້ງໜີ້ທັງໝົດ")]),e._v(" "),n("p",{staticClass:"card-value"},[e._v(e._s(e.safeDashboard.counts.total))])])]),e._v(" "),n("div",{staticClass:"card summary-card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("ຄ້າງອະນຸມັດ")]),e._v(" "),n("p",{staticClass:"card-value pending"},[e._v(e._s(e.safeDashboard.counts.pending))])])]),e._v(" "),n("div",{staticClass:"card summary-card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("ອະນຸມັດແລ້ວ")]),e._v(" "),n("p",{staticClass:"card-value approved"},[e._v(e._s(e.safeDashboard.counts.approved))])])]),e._v(" "),n("div",{staticClass:"card summary-card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("ຊຳລະແລ້ວ")]),e._v(" "),n("p",{staticClass:"card-value paid"},[e._v(e._s(e.safeDashboard.counts.paid))])])]),e._v(" "),n("div",{staticClass:"card summary-card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("ເກີນກຳນົດ")]),e._v(" "),n("p",{staticClass:"card-value overdue"},[e._v(e._s(e.safeDashboard.counts.overdue))])])]),e._v(" "),n("div",{staticClass:"card summary-card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("ລວມຍອດທັງໝົດ")]),e._v(" "),n("p",{staticClass:"card-value"},[e._v("\n          "+e._s(e.formatCurrency(e.safeDashboard.amounts.total))+"\n        ")])])]),e._v(" "),n("div",{staticClass:"card summary-card"},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[e._v("ຍອດຄ້າງຈ່າຍ")]),e._v(" "),n("p",{staticClass:"card-value outstanding"},[e._v("\n          "+e._s(e.formatCurrency(e.safeDashboard.amounts.outstanding))+"\n        ")])])])]),e._v(" "),n("div",{staticClass:"filters-section"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-2"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.statusFilter,expression:"statusFilter"}],staticClass:"form-control",on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.statusFilter=t.target.multiple?n:n[0]},e.onFilterChange]}},[n("option",{attrs:{value:""}},[e._v("ທຸກສະຖານະ")]),e._v(" "),n("option",{attrs:{value:"draft"}},[e._v("ຮ່າງ")]),e._v(" "),n("option",{attrs:{value:"pending"}},[e._v("ຄ້າງອະນຸມັດ")]),e._v(" "),n("option",{attrs:{value:"approved"}},[e._v("ອະນຸມັດແລ້ວ")]),e._v(" "),n("option",{attrs:{value:"partially_paid"}},[e._v("ຊຳລະບາງສ່ວນ")]),e._v(" "),n("option",{attrs:{value:"paid"}},[e._v("ຊຳລະແລ້ວ")]),e._v(" "),n("option",{attrs:{value:"overdue"}},[e._v("ເກີນກຳນົດ")]),e._v(" "),n("option",{attrs:{value:"cancelled"}},[e._v("ຍົກເລີກ")])])]),e._v(" "),n("div",{staticClass:"col-md-3"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.vendorId,expression:"filters.vendorId"}],staticClass:"form-control",on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.$set(e.filters,"vendorId",t.target.multiple?n:n[0])},e.fetchData]}},[n("option",{attrs:{value:""}},[e._v("ຈາກຜູ້ຂາຍທັງໝົດ")]),e._v(" "),e._l(e.vendors,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}))],2)]),e._v(" "),n("div",{staticClass:"col-md-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.startDate,expression:"filters.startDate"}],staticClass:"form-control",attrs:{type:"date",placeholder:"ວັນທີເລີ່ມຕົ້ນ"},domProps:{value:e.filters.startDate},on:{change:e.fetchData,input:function(t){t.target.composing||e.$set(e.filters,"startDate",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"col-md-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.endDate,expression:"filters.endDate"}],staticClass:"form-control",attrs:{type:"date",placeholder:"ວັນທີສິ້ນສຸດ"},domProps:{value:e.filters.endDate},on:{change:e.fetchData,input:function(t){t.target.composing||e.$set(e.filters,"endDate",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"col-md-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ຄົ້ນຫາເລກທີໃບແຈ້ງໜີ້..."},domProps:{value:e.searchTerm},on:{input:[function(t){t.target.composing||(e.searchTerm=t.target.value)},e.debounceSearch]}})]),e._v(" "),n("div",{staticClass:"col-md-1"},[n("button",{staticClass:"btn btn-secondary btn-block",on:{click:e.resetFilters}},[n("i",{staticClass:"fas fa-undo"}),e._v(" ຄ່າເລີ່ມຕົ້ນ\n        ")])])])]),e._v(" "),n("div",{staticClass:"table-container"},[e.loading?n("div",{staticClass:"loading-overlay"},[n("div",{staticClass:"spinner"})]):e._e(),e._v(" "),n("table",{staticClass:"table table-striped"},[e._m(0),e._v(" "),n("tbody",e._l(e.invoices,(function(t){return n("tr",{key:t.id},[n("td",[n("div",{staticClass:"invoice-number"},[e._v("\n              "+e._s(t.invoiceNumber)+"\n              "),e.isOverdue(t.dueDate)&&"paid"!==t.status?n("div",{staticClass:"overdue-badge"},[n("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" ເກີນກຳນົດ\n              ")]):e._e()])]),e._v(" "),n("td",[e._v(e._s(t.vendorInvoiceNumber))]),e._v(" "),n("td",[t.vendor?n("div",{staticClass:"vendor-info"},[n("div",{staticClass:"vendor-name"},[e._v(e._s(t.vendor.name))]),e._v(" "),t.vendor.vendorCode?n("div",{staticClass:"vendor-code"},[e._v("\n                "+e._s(t.vendor.vendorCode)+"\n              ")]):e._e()]):n("span",{staticClass:"no-vendor"},[e._v("ບໍ່ໄດ້ລະບຸຜູ້ຂາຍ")])]),e._v(" "),n("td",[e._v(e._s(e.formatDate(t.invoiceDate)))]),e._v(" "),n("td",[n("span",{class:{"text-danger":e.isOverdue(t.dueDate)&&"paid"!==t.status}},[e._v("\n              "+e._s(e.formatDate(t.dueDate))+"\n            ")])]),e._v(" "),n("td",[n("span",{staticClass:"amount"},[e._v("\n              "+e._s(e.formatCurrency(t.totalAmount))+"\n              "),t.currency?n("small",[e._v(e._s(t.currency.code))]):e._e()])]),e._v(" "),n("td",[n("span",{staticClass:"amount paid"},[e._v("\n              "+e._s(e.formatCurrency(t.paidAmount))+"\n            ")])]),e._v(" "),n("td",[n("span",{staticClass:"amount outstanding"},[e._v("\n              "+e._s(e.formatCurrency(e.getOutstandingAmount(t)))+"\n            ")])]),e._v(" "),n("td",[n("span",{class:["status-badge",t.status]},[e._v("\n              "+e._s(e.getStatusInLao(t.status))+"\n            ")])]),e._v(" "),n("td",[e._v(e._s(t.maker?t.maker.cus_name:"N/A"))]),e._v(" "),n("td",[n("div",{staticClass:"action-buttons"},[n("button",{staticClass:"btn btn-sm btn-info",attrs:{title:"ເບິ່ງລາຍລະອຽດ"},on:{click:function(n){return e.viewDetails(t)}}},[n("i",{staticClass:"fas fa-eye"})]),e._v(" "),["draft","pending"].includes(t.status)?n("button",{staticClass:"btn btn-sm btn-warning",attrs:{title:"ແກ້ໄຂ"},on:{click:function(n){return e.openDialog(t)}}},[n("i",{staticClass:"fas fa-edit"})]):e._e(),e._v(" "),"pending"===t.status?n("button",{staticClass:"btn btn-sm btn-success",attrs:{title:"ອະນຸມັດ"},on:{click:function(n){return e.approveInvoice(t)}}},[n("i",{staticClass:"fas fa-check"})]):e._e()])])])})),0)]),e._v(" "),e.loading||0!==e.invoices.length?e._e():n("div",{staticClass:"no-data"},[n("i",{staticClass:"fas fa-file-invoice"}),e._v(" "),n("p",[e._v("ບໍ່ພົບຂໍ້ມູນໃບແຈ້ງໜີ້")])])]),e._v(" "),e.pagination.totalPages>1?n("nav",{staticClass:"pagination-nav"},[n("ul",{staticClass:"pagination"},[n("li",{staticClass:"page-item",class:{disabled:1===e.pagination.currentPage}},[n("button",{staticClass:"page-link",on:{click:function(t){return e.changePage(e.pagination.currentPage-1)}}},[e._v("\n          ກ່ອນໜ້າ\n        ")])]),e._v(" "),e._l(e.paginationPages,(function(t){return n("li",{key:t,staticClass:"page-item",class:{active:t===e.pagination.currentPage}},[n("button",{staticClass:"page-link",on:{click:function(n){return e.changePage(t)}}},[e._v("\n          "+e._s(t)+"\n        ")])])})),e._v(" "),n("li",{staticClass:"page-item",class:{disabled:e.pagination.currentPage===e.pagination.totalPages}},[n("button",{staticClass:"page-link",on:{click:function(t){return e.changePage(e.pagination.currentPage+1)}}},[e._v("\n          ຕໍ່ໄປ\n        ")])])],2)]):e._e(),e._v(" "),n("APInvoiceDialog",{attrs:{visible:e.showDialog,invoice:e.selectedInvoice,vendors:e.vendors,currencies:e.currencies,"gl-accounts":e.glAccounts,user:e.user},on:{close:e.closeDialog,save:e.saveInvoice}}),e._v(" "),e.showDetailModal?n("div",{staticClass:"modal-overlay",on:{click:e.closeDetailModal}},[n("div",{staticClass:"detail-modal",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"modal-header"},[n("h4",[e._v("ລາຍລະອຽດໃບແຈ້ງໜີ້")]),e._v(" "),n("button",{staticClass:"close-btn",on:{click:e.closeDetailModal}},[n("i",{staticClass:"fas fa-times"})])]),e._v(" "),n("div",{staticClass:"modal-body"},[e.detailLoading?n("div",{staticClass:"loading-state"},[n("div",{staticClass:"spinner"}),e._v(" "),n("p",[e._v("ກຳລັງໂຫຼດ...")])]):e.invoiceDetails?n("div",{staticClass:"detail-content"},[n("div",{staticClass:"detail-row"},[n("label",[e._v("ເລກທີໃບແຈ້ງໜີ້:")]),e._v(" "),n("span",[e._v(e._s(e.invoiceDetails.invoiceNumber))])]),e._v(" "),n("div",{staticClass:"detail-row"},[n("label",[e._v("ເລກທີຜູ້ຂາຍ:")]),e._v(" "),n("span",[e._v(e._s(e.invoiceDetails.vendorInvoiceNumber))])]),e._v(" "),n("div",{staticClass:"detail-row"},[n("label",[e._v("ຜູ້ຂາຍ:")]),e._v(" "),n("span",[e._v(e._s((null===(t=e.invoiceDetails.vendor)||void 0===t?void 0:t.name)||"N/A"))])]),e._v(" "),n("div",{staticClass:"detail-row"},[n("label",[e._v("ວັນທີໃບແຈ້ງໜີ້:")]),e._v(" "),n("span",[e._v(e._s(e.formatDate(e.invoiceDetails.invoiceDate)))])]),e._v(" "),n("div",{staticClass:"detail-row"},[n("label",[e._v("ວັນທີຄົບກຳນົດ:")]),e._v(" "),n("span",[e._v(e._s(e.formatDate(e.invoiceDetails.dueDate)))])]),e._v(" "),n("div",{staticClass:"detail-row"},[n("label",[e._v("ຈຳນວນເງິນລວມ:")]),e._v(" "),n("span",[e._v(e._s(e.formatCurrency(e.invoiceDetails.totalAmount)))])]),e._v(" "),n("div",{staticClass:"detail-row"},[n("label",[e._v("ສະຖານະ:")]),e._v(" "),n("span",{class:["status-badge",e.invoiceDetails.status]},[e._v("\n              "+e._s(e.getStatusInLao(e.invoiceDetails.status))+"\n            ")])]),e._v(" "),n("div",{staticClass:"detail-row"},[n("label",[e._v("ຄຳອະທິບາຍ:")]),e._v(" "),n("span",[e._v(e._s(e.invoiceDetails.description||"N/A"))])]),e._v(" "),n("div",{staticClass:"detail-row"},[n("label",[e._v("ໝາຍເຫດ:")]),e._v(" "),n("span",[e._v(e._s(e.invoiceDetails.note||"N/A"))])])]):e._e()])])]):e._e()],1)}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ເລກທີໃບແຈ້ງໜີ້")]),t._v(" "),e("th",[t._v("ເລກທີຜູ້ຂາຍ")]),t._v(" "),e("th",[t._v("ຜູ້ຂາຍ")]),t._v(" "),e("th",[t._v("ວັນທີໃບແຈ້ງໜີ້")]),t._v(" "),e("th",[t._v("ວັນທີຄົບກຳນົດ")]),t._v(" "),e("th",[t._v("ຈຳນວນເງິນລວມ")]),t._v(" "),e("th",[t._v("ຈຳນວນທີ່ຈ່າຍແລ້ວ")]),t._v(" "),e("th",[t._v("ຍອດຄ້າງຈ່າຍ")]),t._v(" "),e("th",[t._v("ສະຖານະ")]),t._v(" "),e("th",[t._v("ຜູ້ລົງບັນຊີ")]),t._v(" "),e("th",[t._v("ຟັງຊັ່ນ")])])])}],!1,null,"340245a8",null);e.default=component.exports}}]);