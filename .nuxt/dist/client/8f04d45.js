(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{1285:function(t,e,n){var content=n(1592);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("584f1fbc",content,!0,{sourceMap:!1})},1591:function(t,e,n){"use strict";n(1285)},1592:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,".v-card-title.primary[data-v-10fcb2d0]{background:linear-gradient(45deg,#1976d2,#1565c0)}.text-caption[data-v-10fcb2d0]{font-size:12px!important}.gap-1[data-v-10fcb2d0]{gap:4px}",""]),o.locals={},t.exports=o},1857:function(t,e,n){"use strict";n.r(e);var o=n(321),r=n(318),c=n(19),l=n(322),d=n(797),m=n(792),v=n(806),h=n(771),f=n(317),_=n(168),x=n(311),y=n(198),C=n(169),w=n(29),O=n(323),k=n(796),j=n(794),S=n(112),D=n(963),M=(n(34),n(130),n(3)),A=n(17);n(85),n(62),n(10),n(7),n(9),n(5),n(12),n(8),n(13);function I(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var U={name:"MouSummary",components:{MouMaintenanceDialog:n(1730).default},data:function(){return{mous:[],loading:!1,search:"",maintenanceDialog:!1,deleteDialog:!1,editingItem:null,deletingItem:null,searchTimeout:null,pagination:{totalItems:0,totalPages:0,currentPage:1},options:{page:1,itemsPerPage:25,sortBy:["createdAt"],sortDesc:[!0]},headers:[{text:"ລະຫັດ",value:"jobCode",width:"100px"},{text:"ຊື່ວຽກ",value:"jobTitle",width:"180px"},{text:"ບໍລິສັດ",value:"employerCompany",width:"180px"},{text:"ສະຖານທີ່",value:"workLocation",width:"150px"},{text:"ຈຳນວນ",value:"numberOfWorkers",width:"100px",align:"center"},{text:"Agency",value:"agency",width:"150px"},{text:"ສະຖານະ",value:"jobStatus",width:"120px"},{text:"Job Batch",value:"jobBatchStats",width:"120px",sortable:!1,align:"center"},{text:"ຜູ້ສະໝັກ",value:"applicantStats",width:"150px",sortable:!1,align:"center"},{text:"MOU Amount",value:"projectAmount",width:"120px"},{text:"PM Charge",value:"pmCharge",width:"120px"},{text:"ຄຳສັ່ງ",value:"actions",sortable:!1,width:"80px",align:"center"}]}},watch:{options:{handler:function(){this.fetchMOUs()},deep:!0},search:function(){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.options.page=1,t.fetchMOUs()}),500)}},mounted:function(){this.fetchMOUs()},methods:{fetchMOUs:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,l,d,m,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=t.options,o=n.page,r=n.itemsPerPage,c=n.sortBy,l=n.sortDesc,d={page:o,limit:r,sortBy:c[0]||"createdAt",sortOrder:l[0]?"DESC":"ASC"},t.search&&(d.search=t.search),e.next=7,t.$axios.get("/api/mous",{params:d});case 7:m=e.sent,(data=m.data).success&&(t.mous=data.data.mous,t.pagination=data.data.pagination),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t.$toast.error("ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ"),console.error("Error fetching MOUs:",e.t0);case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))()},openMaintenanceDialog:function(){this.editingItem=null,this.maintenanceDialog=!0},editMOU:function(t){this.editingItem=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(e){Object(M.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t),this.maintenanceDialog=!0},viewJobBatches:function(t){this.$router.push("/job-batches?mouId=".concat(t.id))},deleteMOU:function(t){this.deletingItem=t,this.deleteDialog=!0},confirmDelete:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.delete("/api/mous/".concat(t.deletingItem.id));case 3:if(n=e.sent,!n.data.success){e.next=9;break}return t.$toast.success("ລົບ MOU ສຳເລັດແລ້ວ"),e.next=9,t.fetchMOUs();case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t.$toast.error("ການລົບບໍ່ສຳເລັດ"),console.error("Error deleting MOU:",e.t0);case 15:t.deleteDialog=!1,t.deletingItem=null;case 17:case"end":return e.stop()}}),e,null,[[0,11]])})))()},onMOUSaved:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.maintenanceDialog=!1,t.editingItem=null,e.next=4,t.fetchMOUs();case 4:case"end":return e.stop()}}),e)})))()},formatStatusName:function(t){return{draft:"ຮ່າງ",open:"ເປີດ",in_progress:"ກຳລັງດຳເນີນ",completed:"ສຳເລັດ",cancelled:"ຍົກເລີກ"}[t]||t},getStatusColor:function(t){return{draft:"grey",open:"primary",in_progress:"warning",completed:"success",cancelled:"error"}[t]||"grey"},getStatusIcon:function(t){return{draft:"mdi-file-document-outline",open:"mdi-door-open",in_progress:"mdi-progress-clock",completed:"mdi-check-circle",cancelled:"mdi-close-circle"}[t]||"mdi-help-circle"},formatCurrency:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return t?new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(t):"-"}}},B=U,T=(n(1591),n(31)),component=Object(T.a)(B,(function(){var t,e=this,n=e._self._c;return n(m.a,{attrs:{fluid:""}},[n(k.a,[n(d.a,{attrs:{cols:"12"}},[n(r.a,[n(c.d,{staticClass:"primary white--text py-3"},[n(_.a,{staticClass:"mr-2",attrs:{color:"white"}},[e._v("mdi-file-document-multiple")]),e._v(" "),n("span",[e._v("ຈັດການສັນຍາ MOU")]),e._v(" "),n(j.a),e._v(" "),n(o.a,{attrs:{color:"white",text:""},on:{click:e.openMaintenanceDialog}},[n(_.a,{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n            ເພີ່ມສັນຍາ MOU\n          ")],1)],1)],1)],1)],1),e._v(" "),n(k.a,{staticClass:"mt-3"},[n(d.a,{attrs:{cols:"12"}},[n(r.a,[n(c.d,{staticClass:"py-3"},[n(_.a,{staticClass:"mr-2"},[e._v("mdi-table")]),e._v(" "),n("span",[e._v("ລາຍການສັນຍາ MOU")]),e._v(" "),n(j.a),e._v(" "),n(S.a,{staticStyle:{"max-width":"300px"},attrs:{"prepend-inner-icon":"mdi-magnify",label:"ຄົ້ນຫາ","single-line":"","hide-details":"",dense:"",outlined:"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n(v.a,{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.mous,loading:e.loading,"server-items-length":e.pagination.totalItems,options:e.options,"footer-props":{"items-per-page-options":[10,25,50,100]},"loading-text":"ກຳລັງໂຫຼດຂໍ້ມູນ...","no-data-text":"ບໍ່ມີຂໍ້ມູນ"},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.jobCode",fn:function(t){var o=t.item;return[n("div",{staticClass:"d-flex align-center"},[n(_.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"primary"}},[e._v("mdi-barcode")]),e._v(" "),n("span",{staticClass:"text-caption font-weight-bold"},[e._v(e._s(o.jobCode))])],1)]}},{key:"item.jobTitle",fn:function(t){var o=t.item;return[n("div",{staticClass:"d-flex align-center"},[n(_.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"purple"}},[e._v("mdi-briefcase")]),e._v(" "),n("span",{staticClass:"text-caption"},[e._v(e._s(o.jobTitle))])],1)]}},{key:"item.employerCompany",fn:function(t){var o=t.item;return[n("div",{staticClass:"d-flex align-center"},[n(_.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"blue"}},[e._v("mdi-office-building")]),e._v(" "),n("span",{staticClass:"text-caption"},[e._v(e._s(o.employerCompany))])],1)]}},{key:"item.workLocation",fn:function(t){var o=t.item;return[n("div",{staticClass:"d-flex align-center"},[n(_.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"orange"}},[e._v("mdi-map-marker")]),e._v(" "),n("span",{staticClass:"text-caption"},[e._v(e._s(o.workLocation))])],1)]}},{key:"item.numberOfWorkers",fn:function(t){var o=t.item;return[n("div",{staticClass:"d-flex align-center justify-center"},[n(_.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"success"}},[e._v("mdi-account-multiple")]),e._v(" "),n("span",{staticClass:"text-caption font-weight-bold"},[e._v(e._s(o.numberOfWorkers))])],1)]}},{key:"item.agency",fn:function(t){var o,r=t.item;return[n("div",{staticClass:"d-flex align-center"},[n(_.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"indigo"}},[e._v("mdi-domain")]),e._v(" "),n("span",{staticClass:"text-caption"},[e._v(e._s((null===(o=r.agency)||void 0===o?void 0:o.agencyName)||"-"))])],1)]}},{key:"item.jobStatus",fn:function(t){var o=t.item;return[n(l.a,{attrs:{"x-small":"",color:e.getStatusColor(o.jobStatus),"text-color":"white"}},[n(_.a,{attrs:{"x-small":"",left:""}},[e._v(e._s(e.getStatusIcon(o.jobStatus)))]),e._v("\n              "+e._s(e.formatStatusName(o.jobStatus))+"\n            ")],1)]}},{key:"item.jobBatchStats",fn:function(t){var o,r,c=t.item;return[n("div",{staticClass:"d-flex align-center justify-center"},[n(l.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"primary",outlined:""}},[n(_.a,{attrs:{"x-small":"",left:""}},[e._v("mdi-briefcase")]),e._v("\n                "+e._s((null===(o=c.jobBatchStatistics)||void 0===o?void 0:o.totalJobBatches)||0)+"\n              ")],1),e._v(" "),null!==(r=c.jobBatchStatistics)&&void 0!==r&&r.activeJobBatches?n(D.a,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n(l.a,e._g({attrs:{"x-small":"",color:"success"}},o),[e._v("\n                    "+e._s(c.jobBatchStatistics.activeJobBatches)+"\n                  ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("ກຳລັງດຳເນີນ")])]):e._e()],1)]}},{key:"item.applicantStats",fn:function(t){var o,r,c,d=t.item;return[n("div",{staticClass:"d-flex align-center justify-center gap-1"},[n(l.a,{attrs:{"x-small":"",color:"indigo",outlined:""}},[n(_.a,{attrs:{"x-small":"",left:""}},[e._v("mdi-account-group")]),e._v("\n                "+e._s((null===(o=d.applicantStatistics)||void 0===o?void 0:o.totalApplicants)||0)+"\n              ")],1),e._v(" "),n("div",{staticClass:"d-flex gap-1"},[null!==(r=d.applicantStatistics)&&void 0!==r&&r.interview?n(D.a,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n(l.a,e._g({attrs:{"x-small":"",color:"orange"}},o),[e._v("\n                      "+e._s(d.applicantStatistics.interview)+"\n                    ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("ສະໝັກ")])]):e._e(),e._v(" "),null!==(c=d.applicantStatistics)&&void 0!==c&&c.confirm?n(D.a,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n(l.a,e._g({attrs:{"x-small":"",color:"success"}},o),[e._v("\n                      "+e._s(d.applicantStatistics.confirm)+"\n                    ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("ກຽມສົ່ງ")])]):e._e()],1)],1)]}},{key:"item.projectAmount",fn:function(t){var o,r=t.item;return[n("div",{staticClass:"d-flex align-center"},[n(_.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"green"}},[e._v("mdi-currency-usd")]),e._v(" "),n("span",{staticClass:"text-caption font-weight-medium"},[e._v("\n                "+e._s(e.formatCurrency(r.projectAmount,null===(o=r.currency)||void 0===o?void 0:o.code))+"\n              ")])],1)]}},{key:"item.pmCharge",fn:function(t){var o,r=t.item;return[n("div",{staticClass:"d-flex align-center"},[n(_.a,{staticClass:"mr-1",attrs:{"x-small":"",color:"teal"}},[e._v("mdi-cash")]),e._v(" "),n("span",{staticClass:"text-caption font-weight-medium"},[e._v("\n                "+e._s(e.formatCurrency(r.pmCharge,null===(o=r.currency)||void 0===o?void 0:o.code))+"\n              ")])],1)]}},{key:"item.actions",fn:function(t){var r=t.item;return[n(O.a,{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,c=t.attrs;return[n(o.a,e._g(e._b({attrs:{icon:"",small:""}},"v-btn",c,!1),r),[n(_.a,{attrs:{small:""}},[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),n(x.a,{attrs:{dense:""}},[n(y.a,{on:{click:function(t){return e.editMOU(r)}}},[n(C.a,[n(_.a,{attrs:{small:"",color:"info"}},[e._v("mdi-pencil")])],1),e._v(" "),n(w.c,[e._v("ແກ້ໄຂ")])],1),e._v(" "),n(y.a,{on:{click:function(t){return e.viewJobBatches(r)}}},[n(C.a,[n(_.a,{attrs:{small:"",color:"primary"}},[e._v("mdi-briefcase")])],1),e._v(" "),n(w.c,[e._v("ເບິ່ງ Job Batch")])],1),e._v(" "),n(f.a),e._v(" "),n(y.a,{on:{click:function(t){return e.deleteMOU(r)}}},[n(C.a,[n(_.a,{attrs:{small:"",color:"error"}},[e._v("mdi-delete")])],1),e._v(" "),n(w.c,{staticClass:"error--text"},[e._v("ລົບ")])],1)],1)],1)]}}])})],1)],1)],1),e._v(" "),n("MouMaintenanceDialog",{attrs:{"editing-item":e.editingItem},on:{saved:e.onMOUSaved,cancelled:function(t){e.maintenanceDialog=!1}},model:{value:e.maintenanceDialog,callback:function(t){e.maintenanceDialog=t},expression:"maintenanceDialog"}}),e._v(" "),n(h.a,{attrs:{"max-width":"400"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[n(r.a,[n(c.d,{staticClass:"headline"},[e._v("ຢືນຢັນການລົບ")]),e._v(" "),n(c.c,[e._v('\n        ທ່ານແນ່ໃຈບໍ່ວ່າຕ້ອງການລົບ MOU "'+e._s(null===(t=e.deletingItem)||void 0===t?void 0:t.jobCode)+'"?\n        ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້.\n      ')]),e._v(" "),n(c.a,[n(j.a),e._v(" "),n(o.a,{attrs:{text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("ຍົກເລີກ")]),e._v(" "),n(o.a,{attrs:{color:"error",text:""},on:{click:e.confirmDelete}},[e._v("ລົບ")])],1)],1)],1)],1)}),[],!1,null,"10fcb2d0",null);e.default=component.exports},896:function(t,e,n){var content=n(897);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("53887fd2",content,!0,{sourceMap:!1})},897:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,".v-tooltip{display:none}.v-tooltip--attached{display:inline}.v-tooltip__content{background:rgba(97,97,97,.9);border-radius:4px;color:#fff;display:inline-block;font-size:14px;line-height:22px;opacity:0;padding:5px 16px;pointer-events:none;position:absolute;text-transform:none;width:auto}.v-tooltip__content.menuable__content__active{opacity:.9}.v-tooltip__content--fixed{position:fixed}.v-tooltip__content[class*=-active]{transition-timing-function:cubic-bezier(0,0,.2,1)}.v-tooltip__content[class*=enter-active]{transition-duration:.15s}.v-tooltip__content[class*=leave-active]{transition-duration:75ms}",""]),o.locals={},t.exports=o},963:function(t,e,n){"use strict";var o=n(3),r=(n(24),n(896),n(138)),c=n(26),l=n(147),d=n(123),m=n(272),v=n(1),h=n(16),f=n(6);e.a=Object(f.a)(c.a,l.a,d.a,m.a).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!(this.bottom||this.left||this.top||this.right),o=!1!==this.attach?e.offsetLeft:e.left,r=0;return this.top||this.bottom||n?r=o+e.width/2-content.width/2:(this.left||this.right)&&(r=o+(this.right?e.width:-content.width)+(this.right?10:-10)),this.nudgeLeft&&(r-=parseInt(this.nudgeLeft)),this.nudgeRight&&(r+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(r,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!1!==this.attach?e.offsetTop:e.top,o=0;return this.top||this.bottom?o=n+(this.bottom?e.height:-content.height)+(this.bottom?10:-10):(this.left||this.right)&&(o=n+e.height/2-content.height/2),this.nudgeTop&&(o-=parseInt(this.nudgeTop)),this.nudgeBottom&&(o+=parseInt(this.nudgeBottom)),!1===this.attach&&(o+=this.pageYOffset),"".concat(this.calcYOverflow(o),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(v.h)(this.maxWidth),minWidth:Object(v.h)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(v.t)(this,"activator",!0)&&Object(h.b)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=r.a.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")}),e.keydown=function(e){e.keyCode===v.y.esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var content=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[content]):content},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(o.a)(t,this.contentClass,!0),Object(o.a)(t,"menuable__content__active",this.isActive),Object(o.a)(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}})}}]);