(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{1017:function(e,t,n){"use strict";n(956)},1018:function(e,t,n){var r=n(14)((function(i){return i[1]}));r.push([e.i,".v-row.dense[data-v-d0848e8c]{margin-bottom:8px}.v-card-title.primary[data-v-d0848e8c]{background:linear-gradient(45deg,#1976d2,#1565c0)}",""]),r.locals={},e.exports=r},1360:function(e,t,n){"use strict";n.r(t);var r=n(321),o=n(318),l=n(19),c=n(796),d=n(791),f=n(1748),m=n(770),v=n(797),D=n(168),y=n(323),h=n(795),x=n(66),_=n(793),k=n(112),E=n(32),w=n(17),$=(n(85),n(34),n(5),n(8),n(10),n(460),n(9),n(346),{name:"AgencyDialog",props:{visible:{type:Boolean,default:!1},agency:{type:Object,default:null}},data:function(){return{valid:!1,loading:!1,registrationDateMenu:!1,licenseExpiryMenu:!1,agencyTypeOptions:["Agency","Broker"],formData:{agencyName:"",agencyCode:"",agencyType:"",phone:"",email:"",village:"",city:"",district:"",address:"",registrationNumber:"",registrationDate:"",licenseNumber:"",licenseExpiryDate:"",contactPersonName:"",contactPersonPosition:"",contactPersonPhone:"",status:"active",notes:""},statusOptions:[{text:"ດຳເນີນງານ",value:"active"},{text:"ບໍ່ດຳເນີນງານ",value:"inactive"},{text:"ຖືກຢຸດ",value:"suspended"}],nameRules:[function(e){return!!e||"ຈຳເປັນ"},function(e){return(null==e?void 0:e.length)>=2||"ສັ້ນເກີນໄປ"}],phoneRules:[function(e){return!!e||"ຈຳເປັນ"},function(e){return(null==e?void 0:e.length)>=8||"ບໍ່ຖືກຕ້ອງ"}],emailRules:[function(e){return!e||/.+@.+\..+/.test(e)||"ບໍ່ຖືກຕ້ອງ"}],statusRules:[function(e){return!!e||"ຈຳເປັນ"}]}},computed:{isEditMode:function(){var e;return null===(e=this.agency)||void 0===e?void 0:e.id},isLicenseExpired:function(){return this.formData.licenseExpiryDate&&new Date(this.formData.licenseExpiryDate)<=new Date},isContractExpired:function(){return this.formData.contractEndDate&&new Date(this.formData.contractEndDate)<=new Date}},watch:{visible:function(e){e?this.initializeForm():this.resetForm()},agency:{handler:function(){var e=this;this.visible&&this.$nextTick((function(){return e.initializeForm()}))},deep:!0}},methods:{initializeForm:function(){var e,t=this;if(null!==(e=this.agency)&&void 0!==e&&e.id){Object.keys(this.formData).forEach((function(e){t.formData[e]=t.agency[e]||""}));["registrationDate","licenseExpiryDate"].forEach((function(e){t.agency[e]&&(t.formData[e]=t.agency[e].split("T")[0])}))}else this.resetFormData();this.$nextTick((function(){var e;return null===(e=t.$refs.form)||void 0===e?void 0:e.resetValidation()}))},resetFormData:function(){var e=this;Object.keys(this.formData).forEach((function(t){e.formData[t]="status"===t?"active":""}))},resetForm:function(){this.resetFormData(),this.valid=!1,this.loading=!1,this.registrationDateMenu=!1,this.licenseExpiryMenu=!1},saveAgency:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){e.loading=!0;try{n=Object.fromEntries(Object.entries(e.formData).filter((function(e){var t=Object(E.a)(e,2),n=(t[0],t[1]);return""!==n&&null!==n}))),e.$emit("save",n)}catch(e){console.error("Form submission error:",e)}finally{e.loading=!1}}case 1:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.$emit("close")}}}),M=(n(1017),n(31)),component=Object(M.a)($,(function(){var e=this,t=e._self._c;return t(m.a,{attrs:{persistent:"",transition:"dialog-bottom-transition"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t(o.a,[t(l.d,{staticClass:"primary white--text py-3"},[t(D.a,{staticClass:"mr-2",attrs:{color:"white"}},[e._v("mdi-office-building")]),e._v("\n      "+e._s(e.isEditMode?"ແກ້ໄຂບໍລິສັດ":"ເພີ່ມບໍລິສັດ")+"\n      "),t(_.a),e._v(" "),t(r.a,{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[t(D.a,[e._v("mdi-close")])],1)],1),e._v(" "),t(v.a,{ref:"form",on:{submit:function(t){return t.preventDefault(),e.saveAgency.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(l.c,{staticClass:"py-4"},[t(d.a,{staticClass:"py-0"},[t(h.a,{attrs:{dense:""}},[t(c.a,{attrs:{cols:"12",md:"8"}},[t(k.a,{attrs:{label:"ຊື່ບໍລິສັດ *",rules:e.nameRules,outlined:"",dense:"","hide-details":"auto"},model:{value:e.formData.agencyName,callback:function(t){e.$set(e.formData,"agencyName",t)},expression:"formData.agencyName"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",md:"4"}},[t(k.a,{attrs:{label:"ລະຫັດ",outlined:"",dense:"","hide-details":"auto"},model:{value:e.formData.agencyCode,callback:function(t){e.$set(e.formData,"agencyCode",t)},expression:"formData.agencyCode"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",md:"3"}},[t(x.a,{attrs:{items:e.agencyTypeOptions,label:"ປະເພດ *",rules:e.typeRules,outlined:"",dense:"","hide-details":"auto"},model:{value:e.formData.agencyType,callback:function(t){e.$set(e.formData,"agencyType",t)},expression:"formData.agencyType"}})],1)],1),e._v(" "),t(h.a,{attrs:{dense:""}},[t(c.a,{attrs:{cols:"12",md:"6"}},[t(k.a,{attrs:{label:"ເບີໂທ *",rules:e.phoneRules,outlined:"",dense:"","hide-details":"auto"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1),e._v(" "),e._e()],1),e._v(" "),t(h.a,{attrs:{dense:""}},[t(c.a,{attrs:{cols:"12",md:"4"}},[t(k.a,{attrs:{label:"ບ້ານ",outlined:"",dense:"","hide-details":"auto"},model:{value:e.formData.village,callback:function(t){e.$set(e.formData,"village",t)},expression:"formData.village"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",md:"4"}},[t(k.a,{attrs:{label:"ເມືອງ",outlined:"",dense:"","hide-details":"auto"},model:{value:e.formData.city,callback:function(t){e.$set(e.formData,"city",t)},expression:"formData.city"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",md:"4"}},[t(k.a,{attrs:{label:"ແຂວງ",outlined:"",dense:"","hide-details":"auto"},model:{value:e.formData.district,callback:function(t){e.$set(e.formData,"district",t)},expression:"formData.district"}})],1)],1),e._v(" "),t(h.a,{attrs:{dense:""}},[t(c.a,{attrs:{cols:"12"}},[t(k.a,{attrs:{label:"ທີ່ຢູ່",outlined:"",dense:"","hide-details":"auto"},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}})],1)],1),e._v(" "),t(h.a,{attrs:{dense:""}},[e._e(),e._v(" "),t(c.a,{attrs:{cols:"12",md:"6"}},[t(y.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[t(k.a,e._g(e._b({attrs:{label:"ວັນທີເລີ່ມຕົ້ນສັນຍາ",readonly:"",outlined:"",dense:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar"},model:{value:e.formData.registrationDate,callback:function(t){e.$set(e.formData,"registrationDate",t)},expression:"formData.registrationDate"}},"v-text-field",o,!1),r))]}}]),model:{value:e.registrationDateMenu,callback:function(t){e.registrationDateMenu=t},expression:"registrationDateMenu"}},[e._v(" "),t(f.a,{on:{input:function(t){e.registrationDateMenu=!1}},model:{value:e.formData.registrationDate,callback:function(t){e.$set(e.formData,"registrationDate",t)},expression:"formData.registrationDate"}})],1)],1),e._v(" "),t(c.a,{attrs:{cols:"12",md:"6"}},[t(y.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[t(k.a,e._g(e._b({attrs:{label:"ວັນທີສິ້ນສຸດສັນຍາ",readonly:"",outlined:"",dense:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar",color:e.isLicenseExpired?"error":"primary"},scopedSlots:e._u([e.formData.licenseExpiryDate?{key:"append",fn:function(){return[t(D.a,{attrs:{small:"",color:e.isLicenseExpired?"error":"success"}},[e._v("\n                        "+e._s(e.isLicenseExpired?"mdi-alert-circle":"mdi-check-circle")+"\n                      ")])]},proxy:!0}:null],null,!0),model:{value:e.formData.licenseExpiryDate,callback:function(t){e.$set(e.formData,"licenseExpiryDate",t)},expression:"formData.licenseExpiryDate"}},"v-text-field",o,!1),r))]}}]),model:{value:e.licenseExpiryMenu,callback:function(t){e.licenseExpiryMenu=t},expression:"licenseExpiryMenu"}},[e._v(" "),t(f.a,{on:{input:function(t){e.licenseExpiryMenu=!1}},model:{value:e.formData.licenseExpiryDate,callback:function(t){e.$set(e.formData,"licenseExpiryDate",t)},expression:"formData.licenseExpiryDate"}})],1)],1)],1),e._v(" "),e._e(),e._v(" "),t(h.a,{attrs:{dense:""}},[e._e(),e._v(" "),e._e()],1),e._v(" "),t(h.a,{attrs:{dense:""}},[e._e(),e._v(" "),e._e()],1),e._v(" "),t(h.a,{attrs:{dense:""}},[e._e()],1)],1)],1),e._v(" "),t(l.a,{staticClass:"px-6 py-3"},[t(_.a),e._v(" "),t(r.a,{attrs:{text:"",disabled:e.loading},on:{click:e.closeDialog}},[e._v(" ຍົກເລີກ ")]),e._v(" "),t(r.a,{attrs:{color:"primary",type:"submit",loading:e.loading,disabled:!e.valid||e.loading}},[e._v("\n          "+e._s(e.isEditMode?"ອັບເດດ":"ບັນທຶກ")+"\n        ")])],1)],1)],1)],1)}),[],!1,null,"d0848e8c",null);t.default=component.exports},956:function(e,t,n){var content=n(1018);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(15).default)("2eb219ec",content,!0,{sourceMap:!1})}}]);