(window.webpackJsonp=window.webpackJsonp||[]).push([[30,62],{1016:function(t,e,n){"use strict";n.r(e);n(35);var r=n(20),o=(n(91),n(31),n(62),{name:"PrintTicketDialog",props:{show:{type:Boolean,default:!1},ticket:{type:Object,default:null},restaurantInfo:{type:Object,default:function(){return{name:"Restaurant Name",address:"123 Main Street<br>City, State 12345<br>Phone: (555) 123-4567"}}},footerMessage:{type:String,default:"Thank you for your visit!"},customFooter:{type:String,default:null},printTitle:{type:String,default:"Print Ticket"}},data:function(){return{printing:!1}},methods:{closeDialog:function(){this.$emit("close")},printNow:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ticket){e.next=2;break}return e.abrupt("return");case 2:t.printing=!0;try{n=document.querySelector(".print-preview").innerHTML,(r=window.open("","_blank")).document.write("\n          <!DOCTYPE html>\n          <html>\n          <head>\n            <title>Ticket #".concat(t.ticket.id,"</title>\n            <style>\n              ").concat(t.getPrintStyles(),"\n            </style>\n          </head>\n          <body>\n            ").concat(n,"\n          </body>\n          </html>\n        ")),r.document.close(),r.focus(),setTimeout((function(){r.print(),r.close(),t.printing=!1,t.$emit("printed",t.ticket),t.closeDialog()}),250)}catch(e){console.error("Print error:",e),t.printing=!1,t.$emit("print-error",e)}case 4:case"end":return e.stop()}}),e)})))()},getPrintStyles:function(){return"\n        body {\n          font-family: 'Courier New', monospace;\n          font-size: 12px;\n          line-height: 1.4;\n          margin: 0;\n          padding: 20px;\n          color: #000;\n        }\n        .print-header {\n          text-align: center;\n          margin-bottom: 20px;\n        }\n        .restaurant-name {\n          font-size: 18px;\n          font-weight: bold;\n          margin: 0 0 8px 0;\n        }\n        .restaurant-address {\n          font-size: 11px;\n          margin: 0;\n          line-height: 1.3;\n        }\n        .print-ticket-info {\n          margin-bottom: 15px;\n        }\n        .detail-row {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 3px;\n        }\n        .detail-label {\n          font-weight: bold;\n        }\n        .print-divider {\n          border-top: 1px dashed #000;\n          margin: 15px 0;\n        }\n        .section-title {\n          font-size: 14px;\n          font-weight: bold;\n          margin: 0 0 10px 0;\n          text-align: center;\n        }\n        .print-item {\n          margin-bottom: 8px;\n        }\n        .item-line {\n          margin-bottom: 2px;\n        }\n        .item-main {\n          display: flex;\n          justify-content: space-between;\n          font-weight: bold;\n        }\n        .item-details {\n          display: flex;\n          justify-content: space-between;\n          font-size: 11px;\n          margin-left: 10px;\n        }\n        .item-notes {\n          font-size: 10px;\n          font-style: italic;\n          margin-left: 10px;\n          color: #666;\n        }\n        .print-summary {\n          margin: 15px 0;\n        }\n        .summary-line {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 3px;\n        }\n        .total-line {\n          font-weight: bold;\n          font-size: 14px;\n          border-top: 1px solid #000;\n          padding-top: 5px;\n          margin-top: 8px;\n        }\n        .print-payment {\n          margin: 15px 0;\n        }\n        .payment-status {\n          display: flex;\n          justify-content: space-between;\n          font-weight: bold;\n        }\n        .payment-details {\n          font-size: 11px;\n          margin-top: 5px;\n        }\n        .payment-info {\n          display: flex;\n          flex-direction: column;\n          gap: 2px;\n        }\n        .print-notes {\n          margin: 15px 0;\n        }\n        .print-notes h4 {\n          font-size: 12px;\n          margin: 0 0 5px 0;\n        }\n        .print-notes p {\n          margin: 0;\n          font-size: 11px;\n        }\n        .print-custom-footer {\n          margin: 15px 0;\n          text-align: center;\n        }\n        .print-footer {\n          text-align: center;\n          margin-top: 20px;\n        }\n        .thank-you {\n          font-weight: bold;\n          margin: 10px 0 5px 0;\n        }\n        .print-time {\n          font-size: 10px;\n          margin: 0;\n          color: #666;\n        }\n        .payment-pending { color: #856404; }\n        .payment-paid { color: #155724; }\n        .payment-refunded { color: #721c24; }\n        .no-items-print {\n          text-align: center;\n          padding: 20px;\n          color: #666;\n          font-style: italic;\n        }\n        @media print {\n          body { margin: 0; padding: 10px; }\n        }\n      "},formatPrintDate:function(t){return t?new Date(t).toLocaleDateString():"N/A"},formatPrintTime:function(t){return t?new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"},formatPrintDateTime:function(t){return t?new Date(t).toLocaleString():"N/A"},formatPrice:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(t||0));return e?"".concat(n," ₭"):n},formatStatus:function(t){return{pending:"Pending",preparing:"Preparing",ready:"Ready",served:"Served",paid:"Paid"}[t]||t},formatPaymentStatus:function(t){return{pending:"Unpaid",paid:"Paid",refunded:"Refunded"}[t]||t},getItemName:function(line){return console.info("Line detail ".concat(JSON.stringify(line))),line.pro_name||line.pro_desc||"Unknown Item"},getItemTotal:function(line){return line.total||line.totalPrice||line.subtotal||line.quantity*line.originalTicketLinePrice||0}}}),c=o,l=(n(974),n(30)),component=Object(l.a)(c,(function(){var t,e,n,r,o=this,c=o._self._c;return o.show?c("div",{staticClass:"dialog-overlay",on:{click:o.closeDialog}},[c("div",{staticClass:"print-dialog-content",on:{click:function(t){t.stopPropagation()}}},[c("div",{staticClass:"print-dialog-header"},[c("h2",[o._v("Print Ticket")]),o._v(" "),c("button",{staticClass:"close-btn",on:{click:o.closeDialog}},[o._v("×")])]),o._v(" "),o.ticket?c("div",{staticClass:"print-preview"},[c("div",{staticClass:"print-header"},[c("div",{staticClass:"restaurant-info"},[c("h1",{staticClass:"restaurant-name"},[o._v(o._s(o.restaurantInfo.name))]),o._v(" "),c("p",{staticClass:"restaurant-address",domProps:{innerHTML:o._s(o.restaurantInfo.address)}})])]),o._v(" "),c("div",{staticClass:"print-ticket-info"},[c("div",{staticClass:"ticket-details"},[c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[o._v("Ticket #:")]),o._v(" "),c("span",{staticClass:"detail-value"},[o._v(o._s(o.ticket.id))])]),o._v(" "),c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[o._v("Date:")]),o._v(" "),c("span",{staticClass:"detail-value"},[o._v(o._s(o.formatPrintDate(o.ticket.createdAt)))])]),o._v(" "),c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[o._v("Time:")]),o._v(" "),c("span",{staticClass:"detail-value"},[o._v(o._s(o.formatPrintTime(o.ticket.createdAt)))])]),o._v(" "),c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[o._v("Status:")]),o._v(" "),c("span",{staticClass:"detail-value"},[o._v(o._s(o.formatStatus(o.ticket.status)))])])]),o._v(" "),c("div",{staticClass:"customer-table-info"},[c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[o._v("Customer:")]),o._v(" "),c("span",{staticClass:"detail-value"},[o._v(o._s((null===(t=o.ticket.client)||void 0===t?void 0:t.name)||"Walk-in Customer"))])]),o._v(" "),c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[o._v("Table:")]),o._v(" "),c("span",{staticClass:"detail-value"},[o._v(o._s((null===(e=o.ticket.table)||void 0===e?void 0:e.number)||(null===(n=o.ticket.table)||void 0===n?void 0:n.name)||"N/A"))])]),o._v(" "),null!==(r=o.ticket.client)&&void 0!==r&&r.phone?c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[o._v("Phone:")]),o._v(" "),c("span",{staticClass:"detail-value"},[o._v(o._s(o.ticket.client.phone))])]):o._e()])]),o._v(" "),c("div",{staticClass:"print-divider"}),o._v(" "),c("div",{staticClass:"print-items"},[c("h3",{staticClass:"section-title"},[o._v("ORDER ITEMS")]),o._v(" "),o.ticket.ticketLines&&o.ticket.ticketLines.length>0?c("div",o._l(o.ticket.ticketLines,(function(line){return c("div",{key:line.id,staticClass:"print-item"},[c("div",{staticClass:"item-line"},[c("div",{staticClass:"item-main"},[c("span",{staticClass:"item-name"},[o._v(o._s(o.getItemName(line)))]),o._v(" "),c("span",{staticClass:"item-price"},[o._v("$"+o._s(o.formatPrice(line.originalTicketLinePrice)))])]),o._v(" "),c("div",{staticClass:"item-details"},[c("span",{staticClass:"item-qty"},[o._v("Qty: "+o._s(line.quantity))]),o._v(" "),c("span",{staticClass:"item-total"},[o._v("$"+o._s(o.formatPrice(o.getItemTotal(line))))])])]),o._v(" "),line.notes?c("div",{staticClass:"item-notes"},[o._v("\n              Note: "+o._s(line.notes)+"\n            ")]):o._e()])})),0):c("div",{staticClass:"no-items-print"},[c("p",[o._v("No items in this order")])])]),o._v(" "),c("div",{staticClass:"print-divider"}),o._v(" "),c("div",{staticClass:"print-summary"},[c("div",{staticClass:"summary-line"},[c("span",{staticClass:"summary-label"},[o._v("Subtotal:")]),o._v(" "),c("span",{staticClass:"summary-value"},[o._v("$"+o._s(o.formatPrice(o.ticket.subtotal)))])]),o._v(" "),c("div",{staticClass:"summary-line"},[c("span",{staticClass:"summary-label"},[o._v("Tax:")]),o._v(" "),c("span",{staticClass:"summary-value"},[o._v("$"+o._s(o.formatPrice(o.ticket.tax)))])]),o._v(" "),c("div",{staticClass:"summary-line total-line"},[c("span",{staticClass:"summary-label"},[o._v("TOTAL:")]),o._v(" "),c("span",{staticClass:"summary-value"},[o._v("$"+o._s(o.formatPrice(o.ticket.total)))])])]),o._v(" "),c("div",{staticClass:"print-payment"},[c("div",{staticClass:"payment-status"},[c("span",{staticClass:"payment-label"},[o._v("Payment Status:")]),o._v(" "),c("span",{staticClass:"payment-value",class:"payment-".concat(o.ticket.paymentStatus)},[o._v("\n            "+o._s(o.formatPaymentStatus(o.ticket.paymentStatus))+"\n          ")])]),o._v(" "),o.ticket.payment&&"paid"===o.ticket.paymentStatus?c("div",{staticClass:"payment-details"},[c("div",{staticClass:"payment-info"},[c("span",[o._v("Method: "+o._s(o.ticket.payment.payment_code||"N/A"))]),o._v(" "),o.ticket.payment.id?c("span",[o._v("\n              Transaction: "+o._s(o.ticket.payment.payment_code)+"\n            ")]):o._e()])]):o._e()]),o._v(" "),o.ticket.notes?c("div",{staticClass:"print-notes"},[c("div",{staticClass:"print-divider"}),o._v(" "),c("h4",[o._v("NOTES:")]),o._v(" "),c("p",[o._v(o._s(o.ticket.notes))])]):o._e(),o._v(" "),o.customFooter?c("div",{staticClass:"print-custom-footer"},[c("div",{staticClass:"print-divider"}),o._v(" "),c("div",{domProps:{innerHTML:o._s(o.customFooter)}})]):o._e(),o._v(" "),c("div",{staticClass:"print-footer"},[c("div",{staticClass:"print-divider"}),o._v(" "),c("p",{staticClass:"thank-you"},[o._v(o._s(o.footerMessage))]),o._v(" "),c("p",{staticClass:"print-time"},[o._v("\n          Printed: "+o._s(o.formatPrintDateTime(new Date))+"\n        ")])])]):o._e(),o._v(" "),c("div",{staticClass:"print-dialog-actions"},[c("button",{staticClass:"print-btn print-primary",attrs:{disabled:o.printing},on:{click:o.printNow}},[o.printing?c("span",[o._v("Printing...")]):c("span",[o._v("🖨️ Print")])]),o._v(" "),c("button",{staticClass:"print-btn print-secondary",on:{click:o.closeDialog}},[o._v("\n        Cancel\n      ")])])])]):o._e()}),[],!1,null,"02cb606c",null);e.default=component.exports},1017:function(t,e,n){"use strict";n.r(e);var r=n(872),o=n(318),c=n(315),l=n(18),d=n(793),m=n(767),v=n(167),f=n(253),h=n(792),_=n(790),y=n(20),C=(n(91),n(22),n(34),n(84),n(334),n(5),n(68),n(31),n(62),{name:"PaymentDialog",props:{show:{type:Boolean,default:!1},amount:{type:Number,default:0},tableNumber:{type:[String,Number],default:""},paymentMethods:{type:Array,default:function(){return[]}},paymentLoading:{type:Boolean,default:!1},actionLoading:{type:Boolean,default:!1}},data:function(){return{selectedPaymentMethod:null,showQRDialog:!1,copied:!1,qrString:"00020101021238640016A0052662846625770108701404180203002032 1IDB-000000000001417- M5204511453034185405100005802LA5907KHAMMAO6260011713a321asS321as2250302120713te rminal000010812test remarks63041c9f"}},computed:{showDialog:{get:function(){return this.show},set:function(t){t||this.closeDialog()}},qrCodeUrl:function(){var t=encodeURIComponent(this.currentQRString.replace(/\s/g,""));return"https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=".concat(t,"&format=png&margin=10&color=01532B&bgcolor=ffffff")},currentQRString:function(){return this.generateQRString()}},watch:{show:function(t){t||this.resetComponent()}},methods:{showQROnCustomerScreen:function(){var t={amount:this.amount,tableNumber:this.tableNumber,qrString:this.generateQRString(),timestamp:Date.now()};localStorage.setItem("customerDisplay",JSON.stringify({type:"SHOW_QR_PAYMENT",data:t})),window.dispatchEvent(new Event("storage")),this.$emit("show-message","QR displayed on customer screen","success","mdi-qrcode")},hideQRFromCustomerScreen:function(){localStorage.setItem("customerDisplay",JSON.stringify({type:"HIDE_QR_PAYMENT",timestamp:Date.now()})),window.dispatchEvent(new Event("storage"))},showPaymentSuccessOnCustomerScreen:function(){localStorage.setItem("customerDisplay",JSON.stringify({type:"PAYMENT_SUCCESS",data:{amount:this.amount,tableNumber:this.tableNumber},timestamp:Date.now()})),window.dispatchEvent(new Event("storage"))},generateQRString:function(){if(!this.amount||!this.tableNumber)return this.qrString;var t=Math.round(this.amount).toString().padStart(6,"0"),e=this.tableNumber.toString().padStart(6,"0");return"00020101021238640016A0052662846625770108701404180203002032 1IDB-000000000001417- M5204511453034185405".concat(t,"05802LA5907KHAMMAO6260011713a321asS321as2250302120713terminal").concat(e,"0812Table ").concat(this.tableNumber," payment63041c9f")},closeDialog:function(){this.hideQRFromCustomerScreen(),this.resetComponent(),this.$emit("close")},resetComponent:function(){this.selectedPaymentMethod=null,this.showQRDialog=!1,this.copied=!1},confirmPayment:function(){this.selectedPaymentMethod?(this.showPaymentSuccessOnCustomerScreen(),this.$emit("confirm-payment",this.selectedPaymentMethod)):this.$emit("show-message","Please select a payment method","warning","mdi-alert")},copyQRString:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.currentQRString,!navigator.clipboard){e.next=7;break}return e.next=5,navigator.clipboard.writeText(n);case 5:e.next=13;break;case 7:(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r);case 13:t.copied=!0,setTimeout((function(){t.copied=!1}),2e3),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Failed to copy QR string:",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},downloadQR:function(){var link=document.createElement("a");link.href=this.qrCodeUrl,link.download="qr-payment-table-".concat(this.tableNumber,"-").concat(Date.now(),".png"),document.body.appendChild(link),link.click(),document.body.removeChild(link)},shareQR:function(){navigator.share?navigator.share({title:"Payment QR - Table ".concat(this.tableNumber),text:"Payment QR Code for ".concat(this.formatPrice(this.amount)),url:this.qrCodeUrl}).catch((function(t){return console.log("Error sharing:",t)})):(this.copyQRString(),this.$emit("show-message","QR code details copied!","success","mdi-check"))},onQRError:function(){this.$emit("show-message","Failed to load QR code","error","mdi-alert")},formatPrice:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(t||0));return e?"".concat(n," ₭"):n},getPaymentIcon:function(t){return{CASH:"mdi-cash",CARD:"mdi-credit-card",CREDIT:"mdi-credit-card-outline",DEBIT:"mdi-credit-card",MOBILE:"mdi-cellphone",DIGITAL:"mdi-wallet",BANK:"mdi-bank",CHECK:"mdi-checkbook"}[t]||"mdi-currency-usd"},getPaymentColor:function(t){return{CASH:"green",CARD:"blue",CREDIT:"purple",DEBIT:"indigo",MOBILE:"orange",DIGITAL:"teal",BANK:"brown",CHECK:"grey"}[t]||"primary"}},beforeDestroy:function(){this.hideQRFromCustomerScreen()}}),x=C,w=(n(976),n(30)),component=Object(w.a)(x,(function(){var t=this,e=t._self._c;return e("div",[e(m.a,{attrs:{"max-width":"800",persistent:""},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[e(c.a,[e(l.d,{staticClass:"primary white--text py-2"},[e(v.a,{attrs:{left:"",color:"white",size:"20"}},[t._v("mdi-credit-card")]),t._v("\n        Payment - Table "+t._s(t.tableNumber)+"\n        "),e(_.a),t._v(" "),e("div",{staticClass:"text-h6 font-weight-bold"},[t._v(t._s(t.formatPrice(t.amount)))]),t._v(" "),e(o.a,{staticClass:"ml-2",attrs:{icon:"",color:"white",disabled:t.actionLoading},on:{click:t.closeDialog}},[e(v.a,{attrs:{size:"20"}},[t._v("mdi-close")])],1)],1),t._v(" "),e(l.c,{staticClass:"pa-4"},[e(h.a,{staticClass:"mb-3",attrs:{dense:""}},[e(d.a,{attrs:{cols:"6"}},[e(o.a,{staticClass:"text-none",staticStyle:{"background-color":"#01532b !important",color:"white !important"},attrs:{block:""},on:{click:t.showQROnCustomerScreen}},[e(v.a,{attrs:{left:"",size:"20"}},[t._v("mdi-monitor-multiple")]),t._v("\n              Customer Screen\n            ")],1)],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(o.a,{staticClass:"text-none",attrs:{block:"",color:"deep-purple"},on:{click:function(e){t.showQRDialog=!0}}},[e(v.a,{attrs:{left:"",size:"20"}},[t._v("mdi-qrcode")]),t._v("\n              Local QR\n            ")],1)],1)],1),t._v(" "),t.paymentLoading?e("div",{staticClass:"text-center py-2"},[e(f.a,{attrs:{size:"32",color:"primary",indeterminate:""}}),t._v(" "),e("div",{staticClass:"caption mt-1"},[t._v("Loading...")])],1):e("div",[e("div",{staticClass:"subtitle-2 mb-2"},[e(v.a,{attrs:{left:"",size:"18"}},[t._v("mdi-wallet")]),t._v("\n            Payment Method\n          ")],1),t._v(" "),t.paymentMethods.length>0?e(h.a,{attrs:{dense:""}},t._l(t.paymentMethods,(function(n){var r,o,m;return e(d.a,{key:n.id,staticClass:"pa-1",attrs:{cols:"4"}},[e(c.a,{class:["payment-card cursor-pointer text-center",(null===(r=t.selectedPaymentMethod)||void 0===r?void 0:r.id)===n.id?"white--text elevation-3":"elevation-1"],attrs:{color:(null===(o=t.selectedPaymentMethod)||void 0===o?void 0:o.id)===n.id?t.getPaymentColor(n.payment_code):"",hover:"",height:"70"},on:{click:function(e){t.selectedPaymentMethod=n}}},[e(l.c,{staticClass:"pa-2"},[e(v.a,{attrs:{color:(null===(m=t.selectedPaymentMethod)||void 0===m?void 0:m.id)===n.id?"white":t.getPaymentColor(n.payment_code),size:"24"}},[t._v("\n                    "+t._s(t.getPaymentIcon(n.payment_code))+"\n                  ")]),t._v(" "),e("div",{staticClass:"caption font-weight-medium mt-1"},[t._v("\n                    "+t._s(n.payment_name)+"\n                  ")])],1)],1)],1)})),1):e(r.a,{staticClass:"ma-0",attrs:{type:"warning",dense:""}},[t._v("\n            No payment methods available\n            "),e(o.a,{staticClass:"ml-2",attrs:{"x-small":"",color:"warning"},on:{click:function(e){return t.$emit("reload-payment-methods")}}},[t._v("\n              Retry\n            ")])],1)],1)],1),t._v(" "),e(l.a,{staticClass:"pa-3"},[e(o.a,{attrs:{text:"",disabled:t.actionLoading},on:{click:t.closeDialog}},[t._v("Cancel")]),t._v(" "),e(_.a),t._v(" "),e(o.a,{staticClass:"text-none",attrs:{color:"success",disabled:!t.selectedPaymentMethod||t.actionLoading,loading:t.actionLoading},on:{click:t.confirmPayment}},[e(v.a,{attrs:{left:"",size:"18"}},[t._v("mdi-check")]),t._v("\n          Process Payment\n        ")],1)],1)],1)],1),t._v(" "),e(m.a,{attrs:{"max-width":"400",persistent:""},model:{value:t.showQRDialog,callback:function(e){t.showQRDialog=e},expression:"showQRDialog"}},[e(c.a,[e(l.d,{staticClass:"white--text py-2",staticStyle:{"background-color":"#01532B !important"}},[e(v.a,{attrs:{left:"",color:"white",size:"20"}},[t._v("mdi-qrcode")]),t._v("\n        QR Payment\n        "),e(_.a),t._v(" "),e("div",{staticClass:"font-weight-bold"},[t._v(t._s(t.formatPrice(t.amount)))]),t._v(" "),e(o.a,{staticClass:"ml-2",attrs:{icon:"",color:"white"},on:{click:function(e){t.showQRDialog=!1}}},[e(v.a,{attrs:{size:"20"}},[t._v("mdi-close")])],1)],1),t._v(" "),e(l.c,{staticClass:"pa-4 text-center"},[e(c.a,{staticClass:"pa-2 mb-3",staticStyle:{"border-color":"#01532B !important"},attrs:{outlined:""}},[e("img",{staticStyle:{width:"200px",height:"200px",display:"block",margin:"0 auto"},attrs:{src:t.qrCodeUrl,alt:"QR Payment Code"},on:{error:t.onQRError}})]),t._v(" "),e("div",{staticClass:"caption grey--text mb-3"},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-information")]),t._v("\n          Scan with mobile banking app\n        ")],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(d.a,{attrs:{cols:"4"}},[e(o.a,{staticStyle:{color:"#01532B !important"},attrs:{small:"",text:""},on:{click:t.downloadQR}},[e(v.a,{attrs:{small:""}},[t._v("mdi-download")])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"4"}},[e(o.a,{staticStyle:{color:"#01532B !important"},attrs:{small:"",text:""},on:{click:t.shareQR}},[e(v.a,{attrs:{small:""}},[t._v("mdi-share")])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"4"}},[e(o.a,{staticStyle:{color:"#01532B !important"},attrs:{small:"",text:""},on:{click:t.copyQRString}},[e(v.a,{attrs:{small:""}},[t._v(t._s(t.copied?"mdi-check":"mdi-content-copy"))])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"7e316119",null);e.default=component.exports},1063:function(t,e,n){var content=n(1424);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("6f64fd4a",content,!0,{sourceMap:!1})},1334:function(t,e,n){"use strict";n.r(e);var r=n(318),o=n(315),c=n(18),l=n(319),d=n(793),m=n(767),v=n(794),f=n(167),h=n(253),_=n(792),y=n(65),C=n(790),x=n(113),w=n(823),k=(n(35),n(20)),P=(n(91),n(34),n(9),n(5),n(39),n(51),n(74),{name:"CustomerDialog",props:{show:{type:Boolean,default:!1},customers:{type:Array,default:function(){return[]}},selectedCustomer:{type:Object,default:null},loadingCustomers:{type:Boolean,default:!1}},data:function(){return{tempSelectedCustomer:null,customerSearchQuery:"",showAddCustomerForm:!1,savingCustomer:!1,customerFormValid:!1,newCustomer:{name:"",company:"",email:"",address:"",telephone:"",credit:30,lateChargePercent:0,grade:"A",isActive:!0},rules:{required:function(t){return!!t||"This field is required"},email:function(t){if(!t)return!0;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||"Invalid email format"}},gradeOptions:["A","B","C","D","E","F"]}},computed:{dialogVisible:{get:function(){return this.show},set:function(t){t||this.closeDialog()}},filteredCustomers:function(){if(!this.customerSearchQuery)return this.customers.filter((function(t){return t.isActive}));var t=this.customerSearchQuery.toLowerCase();return this.customers.filter((function(e){var n,r,o;return e.isActive&&(e.name.toLowerCase().includes(t)||(null===(n=e.company)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(o=e.telephone)||void 0===o?void 0:o.includes(t)))}))}},watch:{show:function(t){t||(this.tempSelectedCustomer=null,this.customerSearchQuery="")}},methods:{selectCustomer:function(t){this.tempSelectedCustomer=t},confirmCustomerSelection:function(){this.$emit("customer-selected",this.tempSelectedCustomer),this.closeDialog()},selectWalkInCustomer:function(){this.$emit("walk-in-selected"),this.closeDialog()},closeDialog:function(){this.tempSelectedCustomer=null,this.customerSearchQuery="",this.$emit("close")},closeAddCustomerForm:function(){this.showAddCustomerForm=!1,this.resetNewCustomerForm()},resetNewCustomerForm:function(){this.newCustomer={name:"",company:"",email:"",address:"",telephone:"",credit:30,lateChargePercent:0,grade:"A",isActive:!0},this.customerFormValid=!1,this.$refs.customerForm&&this.$refs.customerForm.resetValidation()},saveNewCustomer:function(){var t=this;return Object(k.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.customerFormValid){e.next=3;break}return t.$emit("show-message","Please fill in all required fields","warning","mdi-alert"),e.abrupt("return");case 3:t.savingCustomer=!0,l={name:t.newCustomer.name.trim(),company:(null===(n=t.newCustomer.company)||void 0===n?void 0:n.trim())||null,email:(null===(r=t.newCustomer.email)||void 0===r?void 0:r.trim())||null,address:(null===(o=t.newCustomer.address)||void 0===o?void 0:o.trim())||null,telephone:(null===(c=t.newCustomer.telephone)||void 0===c?void 0:c.trim())||null,credit:parseInt(t.newCustomer.credit)||30,lateChargePercent:parseFloat(t.newCustomer.lateChargePercent)||0,grade:t.newCustomer.grade,isActive:!0};try{t.$emit("save-customer",l)}finally{t.savingCustomer=!1}case 6:case"end":return e.stop()}}),e)})))()},onCustomerSaved:function(){this.closeAddCustomerForm(),this.closeDialog()},getGradeColor:function(t){return{A:"success",B:"info",C:"warning",D:"orange",E:"deep-orange",F:"error"}[t]||"grey"}}}),S=(n(978),n(30)),component=Object(S.a)(P,(function(){var t=this,e=t._self._c;return e("div",[e(m.a,{attrs:{"max-width":"800",persistent:""},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}},[e(o.a,[e(c.d,{staticClass:"primary white--text"},[e(f.a,{attrs:{left:"",color:"white"}},[t._v("mdi-account-search")]),t._v("\n        Select Customer\n        "),e(C.a),t._v(" "),e(r.a,{attrs:{icon:"",color:"white"},on:{click:t.closeDialog}},[e(f.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(c.c,{staticClass:"pa-4"},[e(x.a,{staticClass:"mb-4",attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search customers by name, company, phone...",variant:"outlined",density:"compact",clearable:""},model:{value:t.customerSearchQuery,callback:function(e){t.customerSearchQuery=e},expression:"customerSearchQuery"}}),t._v(" "),e("div",{staticClass:"mb-4"},[e(r.a,{staticClass:"mr-2",attrs:{color:"success"},on:{click:function(e){t.showAddCustomerForm=!0}}},[e(f.a,{attrs:{left:""}},[t._v("mdi-account-plus")]),t._v("\n            Add New Customer\n          ")],1),t._v(" "),e(r.a,{attrs:{color:"info",outlined:""},on:{click:t.selectWalkInCustomer}},[e(f.a,{attrs:{left:""}},[t._v("mdi-walk")]),t._v("\n            Walk-in Customer\n          ")],1)],1),t._v(" "),t.loadingCustomers?e("div",{staticClass:"text-center pa-4"},[e(h.a,{attrs:{size:"48",color:"primary",indeterminate:""}}),t._v(" "),e("p",{staticClass:"mt-2"},[t._v("Loading customers...")])],1):e("div",{staticStyle:{"max-height":"400px","overflow-y":"auto"}},[t._l(t.filteredCustomers,(function(n){var r;return e(o.a,{key:n.id,staticClass:"mb-2 cursor-pointer customer-card",class:{"selected-customer":(null===(r=t.tempSelectedCustomer)||void 0===r?void 0:r.id)===n.id},attrs:{outlined:"",hover:""},on:{click:function(e){return t.selectCustomer(n)}}},[e(c.c,{staticClass:"pa-3"},[e("div",{staticClass:"d-flex justify-space-between align-center"},[e("div",[e("div",{staticClass:"font-weight-bold text-subtitle-1"},[t._v("\n                    "+t._s(n.name)+"\n                  ")]),t._v(" "),e("div",{staticClass:"text-body-2 grey--text"},[t._v("\n                    "+t._s(n.company||"No company")+"\n                  ")]),t._v(" "),e("div",{staticClass:"caption mt-1"},[n.email?e("span",[e(f.a,{attrs:{"x-small":""}},[t._v("mdi-email")]),t._v("\n                      "+t._s(n.email)+"\n                    ")],1):t._e(),t._v(" "),n.telephone?e("span",{staticClass:"ml-2"},[e(f.a,{attrs:{"x-small":""}},[t._v("mdi-phone")]),t._v("\n                      "+t._s(n.telephone)+"\n                    ")],1):t._e()])]),t._v(" "),e("div",{staticClass:"text-right"},[e(l.a,{staticClass:"mb-1",attrs:{color:t.getGradeColor(n.grade),"text-color":"white",small:""}},[t._v("\n                    Grade "+t._s(n.grade)+"\n                  ")]),t._v(" "),e("div",{staticClass:"caption"},[t._v("\n                    Credit: "+t._s(n.credit)+" days\n                  ")]),t._v(" "),n.isActive?t._e():e(l.a,{attrs:{color:"error","text-color":"white","x-small":""}},[t._v("\n                    Inactive\n                  ")])],1)])])],1)})),t._v(" "),0===t.filteredCustomers.length?e("div",{staticClass:"text-center pa-4"},[e(f.a,{attrs:{size:"48",color:"grey"}},[t._v("mdi-account-search")]),t._v(" "),e("p",{staticClass:"mt-2 grey--text"},[t._v("No customers found")])],1):t._e()],2)],1),t._v(" "),e(c.a,{staticClass:"pa-4"},[e(C.a),t._v(" "),e(r.a,{attrs:{color:"grey",text:""},on:{click:t.closeDialog}},[t._v(" Cancel ")]),t._v(" "),e(r.a,{attrs:{color:"primary",disabled:!t.tempSelectedCustomer},on:{click:t.confirmCustomerSelection}},[t._v("\n          Select Customer\n        ")])],1)],1)],1),t._v(" "),e(m.a,{attrs:{"max-width":"600",persistent:""},model:{value:t.showAddCustomerForm,callback:function(e){t.showAddCustomerForm=e},expression:"showAddCustomerForm"}},[e(o.a,[e(c.d,{staticClass:"success white--text"},[e(f.a,{attrs:{left:"",color:"white"}},[t._v("mdi-account-plus")]),t._v("\n        Add New Customer\n        "),e(C.a),t._v(" "),e(r.a,{attrs:{icon:"",color:"white"},on:{click:t.closeAddCustomerForm}},[e(f.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(c.c,{staticClass:"pa-4"},[e(v.a,{ref:"customerForm",model:{value:t.customerFormValid,callback:function(e){t.customerFormValid=e},expression:"customerFormValid"}},[e(_.a,[e(d.a,{attrs:{cols:"12"}},[e(x.a,{attrs:{label:"Customer Name *",variant:"outlined",rules:[t.rules.required],required:""},model:{value:t.newCustomer.name,callback:function(e){t.$set(t.newCustomer,"name",e)},expression:"newCustomer.name"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e(x.a,{attrs:{label:"Company",variant:"outlined"},model:{value:t.newCustomer.company,callback:function(e){t.$set(t.newCustomer,"company",e)},expression:"newCustomer.company"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(x.a,{attrs:{label:"Email",variant:"outlined",rules:[t.rules.email]},model:{value:t.newCustomer.email,callback:function(e){t.$set(t.newCustomer,"email",e)},expression:"newCustomer.email"}})],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(x.a,{attrs:{label:"Phone",variant:"outlined"},model:{value:t.newCustomer.telephone,callback:function(e){t.$set(t.newCustomer,"telephone",e)},expression:"newCustomer.telephone"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e(w.a,{attrs:{label:"Address",variant:"outlined",rows:"2"},model:{value:t.newCustomer.address,callback:function(e){t.$set(t.newCustomer,"address",e)},expression:"newCustomer.address"}})],1),t._v(" "),e(d.a,{attrs:{cols:"4"}},[e(y.a,{attrs:{items:t.gradeOptions,label:"Grade",variant:"outlined"},model:{value:t.newCustomer.grade,callback:function(e){t.$set(t.newCustomer,"grade",e)},expression:"newCustomer.grade"}})],1),t._v(" "),e(d.a,{attrs:{cols:"4"}},[e(x.a,{attrs:{label:"Credit Days",type:"number",variant:"outlined"},model:{value:t.newCustomer.credit,callback:function(e){t.$set(t.newCustomer,"credit",e)},expression:"newCustomer.credit"}})],1),t._v(" "),e(d.a,{attrs:{cols:"4"}},[e(x.a,{attrs:{label:"Late Charge %",type:"number",variant:"outlined"},model:{value:t.newCustomer.lateChargePercent,callback:function(e){t.$set(t.newCustomer,"lateChargePercent",e)},expression:"newCustomer.lateChargePercent"}})],1)],1)],1)],1),t._v(" "),e(c.a,{staticClass:"pa-4"},[e(C.a),t._v(" "),e(r.a,{attrs:{color:"grey",text:""},on:{click:t.closeAddCustomerForm}},[t._v("\n          Cancel\n        ")]),t._v(" "),e(r.a,{attrs:{color:"success",disabled:!t.customerFormValid,loading:t.savingCustomer},on:{click:t.saveNewCustomer}},[e(f.a,{attrs:{left:""}},[t._v("mdi-content-save")]),t._v("\n          Save Customer\n        ")],1)],1)],1)],1)],1)}),[],!1,null,"73f437f1",null);e.default=component.exports},1423:function(t,e,n){"use strict";n(1063)},1424:function(t,e,n){var r=n(14)((function(i){return i[1]}));r.push([t.i,".cursor-pointer[data-v-1bdc38ea]{cursor:pointer}.w-100[data-v-1bdc38ea]{width:100%}.product-card[data-v-1bdc38ea]:hover:not(.product-disabled){transform:translateY(-2px);transition:transform .2s ease}.product-disabled[data-v-1bdc38ea]{cursor:not-allowed!important;opacity:.6}.product-disabled[data-v-1bdc38ea]:hover{transform:none!important}.ticket-line-item[data-v-1bdc38ea]{background-color:rgba(33,150,243,.05);border-left:3px solid #2196f3}",""]),r.locals={},t.exports=r},1711:function(t,e,n){"use strict";n.r(e);var r=n(872),o=n(795),c=n(318),l=n(315),d=n(18),m=n(319),v=n(793),f=n(788),h=n(767),_=n(314),y=n(167),C=n(253),x=n(792),w=n(973),k=n(790),P=n(113),S=(n(35),n(3)),T=n(20),D=(n(91),n(22),n(9),n(5),n(39),n(51),n(68),n(251),n(62),n(66),n(44),n(341),n(104),n(121),n(31),n(10),n(7),n(11),n(8),n(12),n(1016)),I=n(1017),A=n(1334);function R(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(e){Object(S.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var F={components:{PrintTicketDialog:D.default,PaymentDialog:I.default,CustomerDialog:A.default},name:"MenuPOSScreen",props:{tableId:{type:[String,Number],required:!0}},data:function(){return{restaurantConfig:{name:"Your Restaurant Name",address:"123 Main Street<br>City, State 12345<br>Phone: (555) 123-4567"},showCustomerPrint:!1,selectedTicket:null,showPrintConfirmDialog:!1,cart:[],products:[],currentTicket:null,loading:!1,savingTicket:!1,searchQuery:"",categoryFilter:"",categoryOptions:[{title:"All Categories",value:""},{title:"Engine Oils",value:49},{title:"Car Care",value:50}],showPaymentDialog:!1,paymentAmount:0,actionLoading:!1,paymentLoading:!1,paymentList:[],customers:[],selectedCustomer:null,showCustomerDialog:!1,loadingCustomers:!1,snackbar:{show:!1,message:"",color:"success",icon:"mdi-check-circle",timeout:4e3},autoSaveTimeout:null}},computed:{filteredProducts:function(){var t=this,e=this.products;if(this.searchQuery){var n=this.searchQuery.toLowerCase();e=e.filter((function(t){var e,r;return t.pro_name.toLowerCase().includes(n)||(null===(e=t.pro_desc)||void 0===e?void 0:e.toLowerCase().includes(n))||t.pro_id.toString().includes(n)||(null===(r=t.barCode)||void 0===r?void 0:r.toLowerCase().includes(n))}))}return this.categoryFilter&&(e=e.filter((function(e){return e.pro_category===t.categoryFilter}))),e.sort((function(a,b){return a.pro_name.localeCompare(b.pro_name)}))}},mounted:function(){this.fetchProducts(),this.fetchCustomers(),this.loadExistingTicket()},watch:{cart:{handler:function(){var t=this;this.currentTicket&&this.cart.length>0&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout((function(){t.saveTicket(!0)}),2e3))},deep:!0}},methods:{getProductName:function(t){try{var e=this.filteredProducts.find((function(e){return e.id===parseInt(t)}));return console.info("PRODUCT ".concat(this.filteredProducts.length)),console.info("PRODUCT ".concat(JSON.stringify(this.filteredProducts))),console.info("PRODUCT ".concat(JSON.stringify(e))),(null==e?void 0:e.pro_name)||"Product ".concat(t)}catch(e){return console.error("Error getting product name:",e),"Product ".concat(t)}},fetchProducts:function(){var t=this;return Object(T.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.$axios.get("product_f/1");case 4:n=e.sent,console.log("Products response:",n.data),r=n.data.data||n.data,t.products=r.map((function(t){return{id:t.id,pro_id:t.pro_id,pro_name:t.pro_name,pro_price:t.pro_price,duration_minutes:t.duration_minutes||0,pro_desc:t.pro_desc||"",pro_status:t.pro_status,pro_image_path:t.img_path,retail_cost_percent:t.retail_cost_percent||0,cost_price:t.cost_price,stock_count:t.card_count||0,minStock:t.minStock||0,locking_session_id:t.locking_session_id,barCode:t.barCode,vendorName:t.vendorName,isActive:1===t.pro_status,_category:"product",categ_name:t.categ_name,co_name:t.co_name,companyId:t.companyId,img_name:t.img_name,receiveUnitId:t.receiveUnitId,stockUnitId:t.stockUnitId,pro_category:t.pro_category,saleCurrencyId:t.saleCurrencyId,costCurrencyId:t.costCurrencyId,createdAt:t.createdAt,updatedAt:t.updatedAt}})),t.showMessage("Loaded ".concat(t.products.length," products successfully!")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Error fetching products:",e.t0),t.showMessage("Failed to load products. Please try again.","error","mdi-alert");case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})))()},fetchCustomers:function(){var t=this;return Object(T.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingCustomers=!0,e.prev=1,e.next=4,t.$axios.get("api/client/find");case 4:n=e.sent,console.log("Customers response:",n.data),r=n.data.data||n.data,t.customers=r.map((function(t){return{id:t.id,name:t.name,company:t.company,email:t.email,address:t.address,telephone:t.telephone,credit:t.credit,lateChargePercent:t.lateChargePercent,grade:t.grade,isActive:t.isActive,createdAt:t.createdAt,updatedAt:t.updatedAt}})),console.log("Loaded ".concat(t.customers.length," customers")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Error fetching customers:",e.t0),t.showMessage("Failed to load customers","error","mdi-alert");case 15:return e.prev=15,t.loadingCustomers=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})))()},loadExistingTicket:function(){var t=this;return Object(T.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("api/ticket/table/".concat(t.tableId,"/pending"));case 3:if(!((n=e.sent).data&&n.data.length>0)){e.next=10;break}if(t.currentTicket=n.data[0],!t.currentTicket.clientId){e.next=9;break}return e.next=9,t.loadTicketCustomer(t.currentTicket.clientId);case 9:t.loadTicketLines();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("No existing ticket found or error:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},loadTicketCustomer:function(t){var e=this;return Object(T.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.get("api/client/find/".concat(t));case 3:r=n.sent,e.selectedCustomer=r.data.data||r.data,console.log("Loaded ticket customer:",e.selectedCustomer.name),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error("Error loading ticket customer:",n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},loadTicketLines:function(){var t=this;return Object(T.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentTicket){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.$axios.get("api/ticketLine/ticket/".concat(t.currentTicket.id));case 5:n=e.sent,r=n.data.data||n.data,t.cart=r.map((function(line){var e,n=t.products.find((function(p){return p.id===line.productId}));return{id:line.productId,pro_id:line.productId,pro_name:(null===(e=line.product)||void 0===e?void 0:e.name)||(null==n?void 0:n.pro_name)||"Product ".concat(line.productId),categ_name:(null==n?void 0:n.categ_name)||"Unknown Category",stock_count:(null==n?void 0:n.stock_count)||0,isActive:(null==n?void 0:n.isActive)||!1,pro_price:line.unitPrice,quantity:line.quantity,ticketLineId:line.id,totalPrice:line.totalPrice||line.unitPrice*line.quantity,isFromTicketLine:!0,originalTicketLinePrice:line.unitPrice}})).filter((function(t){return t.pro_name})),console.info("Loaded ".concat(t.cart.length," items from ticket lines")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Error loading ticket lines:",e.t0),t.showMessage("Failed to load saved ticket items","error","mdi-alert");case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},saveTicket:function(){var t=arguments,e=this;return Object(T.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]&&t[0],0!==e.cart.length){n.next=4;break}return r||e.showMessage("Cart is empty","warning","mdi-alert"),n.abrupt("return");case 4:if(e.tableId){n.next=8;break}return console.error("Table ID is missing:",e.tableId),r||e.showMessage("Table ID is missing. Please check the table selection.","error","mdi-alert"),n.abrupt("return");case 8:if(e.savingTicket=!0,n.prev=9,o=e.getTotalPrice(),l=o+(c=.085*o),d={tableId:parseInt(e.tableId),clientId:e.selectedCustomer?e.selectedCustomer.id:null,status:"pending",subtotal:parseFloat(o.toFixed(2)),tax:parseFloat(c.toFixed(2)),total:parseFloat(l.toFixed(2)),paymentStatus:"pending",customerNotes:e.selectedCustomer?"Customer: ".concat(e.selectedCustomer.name):"Walk-in customer",ticketLines:e.cart.map((function(t){return{id:t.ticketLineId||void 0,productId:t.id,quantity:t.quantity,unitPrice:parseFloat(t.pro_price),totalPrice:parseFloat((t.pro_price*t.quantity).toFixed(2)),status:"ordered"}}))},console.log("Saving ticket with data:",d),!e.currentTicket){n.next=23;break}return n.next=18,e.$axios.put("api/ticket/".concat(e.currentTicket.id),d);case 18:m=n.sent,e.$emit("reload-data"),r||e.showMessage("Ticket updated successfully!","success","mdi-content-save"),n.next=29;break;case 23:return n.next=25,e.$axios.post("api/ticket/",d);case 25:m=n.sent,e.currentTicket=m.data.data||m.data,e.$emit("reload-data"),r||e.showMessage("Ticket saved successfully!","success","mdi-content-save");case 29:n.next=35;break;case 31:n.prev=31,n.t0=n.catch(9),console.error("Error saving ticket:",n.t0),r||e.showMessage("Failed to save ticket. Please try again.","error","mdi-alert");case 35:return n.prev=35,e.savingTicket=!1,n.finish(35);case 38:case"end":return n.stop()}}),n,null,[[9,31,35,38]])})))()},addToCart:function(t){if(console.log("Adding product to cart:",t),t.isActive)if(t.stock_count<=0)this.showMessage("Product is out of stock","warning","mdi-alert");else{var e=this.cart.find((function(e){return e.id===t.id}));e?e.quantity<t.stock_count?(e.quantity+=1,e.isFromTicketLine||(e.pro_price=parseFloat(t.pro_price))):this.showMessage("Maximum stock reached","warning","mdi-alert"):this.cart.push({id:t.id,pro_id:t.id,pro_name:t.pro_name,pro_price:parseFloat(t.pro_price),categ_name:t.categ_name,stock_count:t.stock_count,isActive:t.isActive,quantity:1,isFromTicketLine:!1})}else this.showMessage("Product is not active","warning","mdi-alert")},updateQuantity:function(t,e){var n=this.cart.find((function(i){return i.id===t}));if(n){var r=n.quantity+e;r<=0?this.removeFromCart(t):r>n.stock_count?this.showMessage("Maximum stock reached","warning","mdi-alert"):n.quantity=r}},removeFromCart:function(t){var e=this.cart.findIndex((function(e){return e.id===t}));if(e>-1){var n=this.cart[e];this.cart.splice(e,1),this.showMessage("".concat(n.pro_name," removed from cart"),"info","mdi-information")}},clearCart:function(){if(0!==this.cart.length){var t=this.getTotalItems(),e=this.getTotalPrice();this.cart=[],this.currentTicket=null,this.selectedCustomer=null,this.showMessage("Cart cleared - ".concat(t," items (").concat(this.formatPrice(e),") removed"),"info","mdi-cart-remove")}else this.showMessage("Cart is already empty","info","mdi-information")},loadPaymentMethods:function(){var t=this;return Object(T.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.paymentLoading=!0,t.paymentList=[],e.prev=2,e.next=5,t.$axios.get("/api/paymentMethod/find");case 5:n=e.sent,t.paymentList=n.data.filter((function(t){return t.isActive})),console.log("Payment methods loaded:",t.paymentList),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Error loading payment methods:",e.t0),t.showMessage("Failed to load payment methods","error","mdi-alert");case 14:return e.prev=14,t.paymentLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})))()},processPayment:function(){var t=this;return Object(T.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=1.085*t.getTotalPrice()||0)<=0)){e.next=4;break}return t.showMessage("No amount to process","warning","mdi-alert"),e.abrupt("return");case 4:return t.paymentAmount=n,e.next=7,t.loadPaymentMethods();case 7:t.showPaymentDialog=!0;case 8:case"end":return e.stop()}}),e)})))()},handlePaymentConfirm:function(t){var e=this;return Object(T.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.actionLoading=!0,n.prev=1,!e.currentTicket.id){n.next=5;break}return n.next=5,e.$axios.patch("/api/ticket/".concat(e.currentTicket.id,"/payment-status"),{paymentStatus:"paid",paymentId:t.id});case 5:return e.closePaymentDialog(),e.showPrintConfirmDialog=!0,n.next=9,e.updateTableStatus("cleaning");case 9:n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),console.error("Payment processing error:",n.t0),e.showMessage("Failed to process payment","error","mdi-alert");case 15:return n.prev=15,e.actionLoading=!1,n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,11,15,18]])})))()},handlePrintConfirmation:function(t){this.showPrintConfirmDialog=!1,t?this.printCustomerReceipt():this.showMessage("Payment of ".concat(this.formatPrice(this.paymentAmount)," processed successfully"),"success","mdi-check-circle"),this.paymentAmount=0},closePaymentDialog:function(){this.showPaymentDialog=!1,this.paymentAmount=0},updateTableStatus:function(t){var e=this;return Object(T.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={status:t,timeOccupied:"occupied"===t?new Date:null,currentOrderId:"occupied"===t?e.currentTicket.id:null},n.next=3,e.$axios.patch("api/tables/".concat(e.tableId,"/status"),r);case 3:return n.next=5,e.loadExistingTicket();case 5:e.$emit("reload-data"),e.$emit("reload-table");case 7:case"end":return n.stop()}}),n)})))()},handleCustomerSelected:function(t){this.selectedCustomer=t,this.showMessage("Customer ".concat(t.name," selected"),"success","mdi-account-check")},handleWalkInSelected:function(){this.selectedCustomer=null,this.showMessage("Walk-in customer selected","info","mdi-walk")},handleSaveCustomer:function(t){var e=this;return Object(T.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("Saving customer:",t),n.next=4,e.$axios.post("api/client/create",t);case 4:r=n.sent,o=r.data.data||r.data,e.customers.unshift(o),e.selectedCustomer=o,e.showMessage("Customer ".concat(o.name," created successfully!"),"success","mdi-account-plus"),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("Error saving customer:",n.t0),400===(null===(c=n.t0.response)||void 0===c?void 0:c.status)?e.showMessage("Invalid customer data. Please check all fields.","error","mdi-alert"):e.showMessage("Failed to save customer. Please try again.","error","mdi-alert");case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))()},closeCustomerDialog:function(){this.showCustomerDialog=!1},printCustomerReceipt:function(){var t=this;return Object(T.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,v,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Print button clicked"),t.currentTicket){e.next=4;break}return t.showMessage("Please save the ticket first before printing","warning","mdi-alert"),e.abrupt("return");case 4:return e.prev=4,t.loading=!0,console.log("Fetching latest ticket data before printing..."),e.next=9,t.$axios.get("api/ticket/".concat(t.currentTicket.id));case 9:if(n=e.sent,r=n.data.data||n.data,o=null,!r.clientId){e.next=24;break}return e.prev=13,e.next=16,t.$axios.get("api/client/find/".concat(r.clientId));case 16:c=e.sent,o=c.data.data||c.data,e.next=24;break;case 20:e.prev=20,e.t0=e.catch(13),console.warn("Could not fetch customer data:",e.t0),o=t.selectedCustomer;case 24:return e.next=26,t.$axios.get("api/ticketLine/ticket/".concat(r.id));case 26:l=e.sent,d=l.data.data||l.data,m=d.map((function(line){var e,n=t.products.find((function(p){return p.id===line.productId}));return{id:line.productId,pro_id:line.productId,pro_name:(null===(e=line.product)||void 0===e?void 0:e.name)||(null==n?void 0:n.pro_name)||"Product ".concat(line.productId),categ_name:(null==n?void 0:n.categ_name)||"Unknown Category",stock_count:(null==n?void 0:n.stock_count)||0,isActive:(null==n?void 0:n.isActive)||!1,pro_price:line.unitPrice,quantity:line.quantity,ticketLineId:line.id,totalPrice:line.totalPrice||line.unitPrice*line.quantity,isFromTicketLine:!0,originalTicketLinePrice:line.unitPrice}})).filter((function(t){return t.pro_name})),(v=M(M({},r),{},{client:o,table:{id:t.tableId,number:t.tableId,name:"Table ".concat(t.tableId)},ticketLines:m})).subtotal||(f=m.reduce((function(t,e){return t+parseFloat(e.pro_price)*e.quantity}),0),v.subtotal=f,v.tax=.085*f,v.total=f+.085*f),console.log("Updated ticket for print: ".concat(JSON.stringify(v)," }")),console.log("Ticket lines count:",m.length),t.currentTicket=r,t.selectedTicket=v,t.showCustomerPrint=!0,e.next=46;break;case 38:e.prev=38,e.t1=e.catch(4),console.error("Error fetching latest ticket data for printing:",e.t1),t.showMessage("Failed to load latest ticket data. Using current data for printing.","warning","mdi-alert"),(h=M(M({},t.currentTicket),{},{client:t.selectedCustomer||null,table:{id:t.tableId,number:t.tableId,name:"Table ".concat(t.tableId)},ticketLines:t.cart})).subtotal||(h.subtotal=t.getTotalPrice(),h.tax=.085*t.getTotalPrice(),h.total=1.085*t.getTotalPrice()),t.selectedTicket=h,t.showCustomerPrint=!0;case 46:return e.prev=46,t.loading=!1,e.finish(46);case 49:case"end":return e.stop()}}),e,null,[[4,38,46,49],[13,20]])})))()},closePrintDialog:function(){this.showCustomerPrint=!1,this.selectedTicket=null},onPrintSuccess:function(t){console.log("Ticket printed successfully:",t.id),this.showMessage("Ticket printed successfully!","success","mdi-printer")},showMessage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mdi-check-circle";this.snackbar={show:!0,message:t,color:e,icon:n,timeout:4e3}},getCurrentProductPrice:function(t){var e=this.products.find((function(p){return p.id===t}));return e?parseFloat(e.pro_price):0},getTotalPrice:function(){return this.cart.reduce((function(t,e){return t+parseFloat(e.pro_price)*e.quantity}),0)},getTotalItems:function(){return this.cart.reduce((function(t,e){return t+e.quantity}),0)},formatPrice:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(t||0));return e?"".concat(n," ₭"):n},formatDateTime:function(t){return t?new Date(t).toLocaleString():""},getCategoryColor:function(t){return t&&t.includes("Engine")?"primary":t&&t.includes("ຄາແຄຣ")?"purple":"info"},getStockColor:function(t){return t<=0?"error":t<=5?"warning":"success"},getTicketStatusColor:function(t){return{pending:"orange",preparing:"blue",ready:"green",served:"purple",paid:"success"}[t]||"grey"},getGradeColor:function(t){return{A:"success",B:"info",C:"warning",D:"orange",E:"deep-orange",F:"error"}[t]||"grey"}},beforeDestroy:function(){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout)}},L=F,O=(n(1423),n(30)),component=Object(O.a)(L,(function(){var t=this,e=t._self._c;return e(f.a,{staticClass:"pa-0 fill-height",attrs:{fluid:""}},[e("PrintTicketDialog",{attrs:{show:t.showCustomerPrint,ticket:t.selectedTicket,"restaurant-info":t.restaurantConfig},on:{close:t.closePrintDialog,printed:t.onPrintSuccess}}),t._v(" "),e("PaymentDialog",{attrs:{show:t.showPaymentDialog,"table-number":t.tableId,amount:t.paymentAmount,"payment-methods":t.paymentList,"payment-loading":t.paymentLoading,"action-loading":t.actionLoading,"enable-q-r":!0,"show-q-r-details":!1},on:{close:t.closePaymentDialog,"confirm-payment":t.handlePaymentConfirm,"reload-payment-methods":t.loadPaymentMethods,"show-message":t.showMessage}}),t._v(" "),e(h.a,{attrs:{"max-width":"400",persistent:""},model:{value:t.showPrintConfirmDialog,callback:function(e){t.showPrintConfirmDialog=e},expression:"showPrintConfirmDialog"}},[e(l.a,[e(d.d,{staticClass:"headline d-flex align-center"},[e(y.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-check-circle")]),t._v("\n        Payment Successful!\n      ")],1),t._v(" "),e(d.c,{staticClass:"text-center py-4"},[e(y.a,{staticClass:"mb-3",attrs:{size:"64",color:"success"}},[t._v("mdi-credit-card-check")]),t._v(" "),e("div",{staticClass:"text-h6 mb-2"},[t._v("\n          Payment has been processed successfully\n        ")]),t._v(" "),e("div",{staticClass:"text-subtitle-1 mb-4"},[t._v("\n          Amount: "),e("strong",[t._v(t._s(t.formatPrice(t.paymentAmount)))])]),t._v(" "),e("div",{staticClass:"text-body-1"},[t._v("\n          Would you like to print the receipt now?\n        ")])],1),t._v(" "),e(d.a,{staticClass:"justify-center pb-4"},[e(c.a,{staticClass:"mr-2",attrs:{color:"grey",text:""},on:{click:function(e){return t.handlePrintConfirmation(!1)}}},[e(y.a,{attrs:{left:""}},[t._v("mdi-close")]),t._v("\n          No, Skip\n        ")],1),t._v(" "),e(c.a,{staticClass:"ml-2",attrs:{color:"primary"},on:{click:function(e){return t.handlePrintConfirmation(!0)}}},[e(y.a,{attrs:{left:""}},[t._v("mdi-printer")]),t._v("\n          Yes, Print Receipt\n        ")],1)],1)],1)],1),t._v(" "),e("CustomerDialog",{attrs:{show:t.showCustomerDialog,customers:t.customers,"selected-customer":t.selectedCustomer,"loading-customers":t.loadingCustomers},on:{close:t.closeCustomerDialog,"customer-selected":t.handleCustomerSelected,"walk-in-selected":t.handleWalkInSelected,"save-customer":t.handleSaveCustomer,"show-message":t.showMessage}}),t._v(" "),e(x.a,{staticStyle:{height:"100vh"},attrs:{"no-gutters":""}},[e(v.a,{staticClass:"d-flex flex-column",staticStyle:{overflow:"hidden"},attrs:{cols:"8"}},[e(l.a,{staticClass:"ma-0 rounded-0"},[e(d.d,{staticClass:"primary white--text"},[e(y.a,{attrs:{left:"",color:"white"}},[t._v("mdi-storefront")]),t._v("\n          Product Menu\n          "),e(k.a),t._v(" "),t.tableId?e(m.a,{staticClass:"mr-2",attrs:{color:"accent","text-color":"white"}},[e(y.a,{attrs:{left:"",small:""}},[t._v("mdi-table-furniture")]),t._v("\n            Table "+t._s(t.tableId)+"\n          ")],1):t._e(),t._v(" "),e(m.a,{staticClass:"mr-2",attrs:{color:"white","text-color":"primary"}},[e(y.a,{attrs:{left:"",small:""}},[t._v("mdi-package-variant")]),t._v("\n            "+t._s(t.filteredProducts.length)+" items\n          ")],1),t._v(" "),e(c.a,{attrs:{color:"white",text:"",loading:t.loading},on:{click:t.fetchProducts}},[e(y.a,{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n            Refresh\n          ")],1)],1),t._v(" "),e(d.c,{staticClass:"pa-3"},[e(x.a,[e(v.a,{attrs:{cols:"6"}},[e(P.a,{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search products...",variant:"outlined",density:"compact",clearable:"","hide-details":""},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),t._v(" "),e(v.a,{attrs:{cols:"3"}},[e(o.a,{attrs:{items:t.categoryOptions,"item-text":"title","item-value":"value",label:"Filter by Category",variant:"outlined",density:"compact",clearable:"","hide-details":""},model:{value:t.categoryFilter,callback:function(e){t.categoryFilter=e},expression:"categoryFilter"}})],1)],1)],1)],1),t._v(" "),t.loading?e(l.a,{staticClass:"flex-grow-1 ma-0 rounded-0 d-flex align-center justify-center"},[e("div",{staticClass:"text-center"},[e(C.a,{attrs:{size:"64",color:"primary",indeterminate:""}}),t._v(" "),e("p",{staticClass:"mt-4 text-h6"},[t._v("Loading products...")])],1)]):e(l.a,{staticClass:"flex-grow-1 ma-0 rounded-0",staticStyle:{"overflow-y":"auto"}},[e(d.c,{staticClass:"pa-4"},[t.filteredProducts.length>0?e(x.a,t._l(t.filteredProducts,(function(n){return e(v.a,{key:n.id,staticClass:"pa-2",attrs:{cols:"4"}},[e(l.a,{staticClass:"text-center pa-4 cursor-pointer product-card",class:{"product-disabled":!n.isActive||n.stock_count<=0},attrs:{elevation:"2",hover:"",height:"160",disabled:!n.isActive||n.stock_count<=0},on:{click:function(e){return t.addToCart(n)}}},[e(d.d,{staticClass:"justify-center text-subtitle-1 pa-1",staticStyle:{"line-height":"1.2"}},[t._v("\n                  "+t._s(n.pro_name)+"\n                ")]),t._v(" "),e(d.c,{staticClass:"pa-2"},[e("div",{staticClass:"text-h5 primary--text font-weight-bold mb-2"},[t._v("\n                    "+t._s(t.formatPrice(n.pro_price))+"\n                  ")]),t._v(" "),e("div",{staticClass:"d-flex justify-space-between align-center"},[e(m.a,{attrs:{color:t.getCategoryColor(n.categ_name),"text-color":"white","x-small":""}},[t._v("\n                      "+t._s(n.categ_name)+"\n                    ")]),t._v(" "),e(m.a,{attrs:{color:t.getStockColor(n.stock_count),"text-color":"white","x-small":""}},[t._v("\n                      "+t._s(n.stock_count)+" left\n                    ")])],1),t._v(" "),n.pro_desc?e("div",{staticClass:"caption mt-2 grey--text",staticStyle:{height:"32px",overflow:"hidden"}},[t._v("\n                    "+t._s(n.pro_desc)+"\n                  ")]):t._e(),t._v(" "),n.isActive?t._e():e("div",{staticClass:"caption mt-1 error--text font-weight-bold"},[t._v("\n                    INACTIVE\n                  ")])])],1)],1)})),1):e("div",{staticClass:"text-center pa-8"},[e(y.a,{attrs:{size:"64",color:"grey"}},[t._v("mdi-package-variant-closed")]),t._v(" "),e("p",{staticClass:"text-h6 mt-4 grey--text"},[t._v("No products found")]),t._v(" "),e("p",{staticClass:"grey--text"},[t._v("Try adjusting your search or filters")]),t._v(" "),e(c.a,{staticClass:"mt-2",attrs:{color:"primary"},on:{click:t.fetchProducts}},[e(y.a,{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n              Refresh Products\n            ")],1)],1)],1)],1)],1),t._v(" "),e(v.a,{staticClass:"d-flex flex-column",staticStyle:{"max-height":"100vh",overflow:"hidden"},attrs:{cols:"4"}},[e(l.a,{staticClass:"flex-grow-1 ma-0 rounded-0 d-flex flex-column",staticStyle:{overflow:"hidden"},attrs:{elevation:"2"}},[e(d.d,{staticClass:"secondary white--text"},[e(y.a,{attrs:{left:"",color:"white"}},[t._v("mdi-shopping")]),t._v("\n          Current Order\n          "),e(k.a),t._v(" "),e(m.a,{attrs:{color:"white","text-color":"secondary",small:""}},[t._v("\n            "+t._s(t.getTotalItems())+" items\n          ")]),t._v(" "),t.currentTicket?e(m.a,{staticClass:"ml-2",attrs:{color:t.getTicketStatusColor(t.currentTicket.status),"text-color":"white",small:""}},[t._v("\n            "+t._s(t.currentTicket.status.toUpperCase())+"\n          ")]):t._e()],1),t._v(" "),e(d.c,{staticClass:"pa-3 bg-grey-lighten-5"},[e("div",{staticClass:"d-flex justify-space-between align-center mb-2"},[e("div",{staticClass:"text-subtitle-2 font-weight-bold"},[e(y.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-account")]),t._v("\n              Customer Information\n            ")],1),t._v(" "),e(c.a,{attrs:{color:"primary",small:"",outlined:""},on:{click:function(e){t.showCustomerDialog=!0}}},[e(y.a,{attrs:{left:"",small:""}},[t._v(t._s(t.selectedCustomer?"mdi-account-edit":"mdi-account-plus"))]),t._v("\n              "+t._s(t.selectedCustomer?"Change":"Select")+"\n            ")],1)],1),t._v(" "),t.selectedCustomer?e(l.a,{staticClass:"pa-2",attrs:{outlined:""}},[e("div",{staticClass:"d-flex justify-space-between align-center"},[e("div",[e("div",{staticClass:"font-weight-medium"},[t._v("\n                  "+t._s(t.selectedCustomer.name)+"\n                ")]),t._v(" "),e("div",{staticClass:"caption grey--text"},[t._v("\n                  "+t._s(t.selectedCustomer.company||"No company")+"\n                ")]),t._v(" "),t.selectedCustomer.telephone?e("div",{staticClass:"caption"},[e(y.a,{attrs:{"x-small":""}},[t._v("mdi-phone")]),t._v("\n                  "+t._s(t.selectedCustomer.telephone)+"\n                ")],1):t._e()]),t._v(" "),e("div",{staticClass:"text-right"},[e(m.a,{attrs:{color:t.getGradeColor(t.selectedCustomer.grade),"text-color":"white","x-small":""}},[t._v("\n                  Grade "+t._s(t.selectedCustomer.grade)+"\n                ")]),t._v(" "),e("div",{staticClass:"caption mt-1"},[t._v("\n                  Credit: "+t._s(t.selectedCustomer.credit)+" days\n                ")])],1)])]):e(r.a,{attrs:{type:"info",dense:"",outlined:""}},[t._v("\n            No customer selected - Walk-in customer\n          ")])],1),t._v(" "),t.currentTicket?e(d.c,{staticClass:"pa-2 bg-grey-lighten-4"},[e("div",{staticClass:"caption"},[e("strong",[t._v("Ticket #"+t._s(t.currentTicket.id))]),t._v(" "),e("span",{staticClass:"ml-2"},[t._v(t._s(t.formatDateTime(t.currentTicket.createdAt)))])])]):t._e(),t._v(" "),e("div",{staticClass:"flex-grow-1",staticStyle:{"overflow-y":"auto",padding:"16px"}},[0===t.cart.length?e("div",{staticClass:"text-center mt-8"},[e(y.a,{staticClass:"mb-4",attrs:{size:"64",color:"grey lighten-2"}},[t._v("\n              mdi-shopping-outline\n            ")]),t._v(" "),e("p",{staticClass:"grey--text"},[t._v("No items in cart")]),t._v(" "),e("p",{staticClass:"grey--text caption"},[t._v("Add items from the menu")])],1):e("div",t._l(t.cart,(function(n){return e(l.a,{key:n.id,staticClass:"mb-2 pa-2",class:{"ticket-line-item":n.isFromTicketLine},attrs:{outlined:""}},[e("div",{staticClass:"d-flex justify-space-between align-center mb-2"},[e("div",[e("div",{staticClass:"font-weight-medium"},[t._v("\n                    "+t._s(t.getProductName(n.pro_id))+"\n                  ")]),t._v(" "),e("div",{staticClass:"caption grey--text"},[t._v("\n                    ID: "+t._s(n.pro_id)+" | "+t._s(n.categ_name)+"\n                  ")]),t._v(" "),n.isFromTicketLine?e("div",{staticClass:"caption info--text"},[e(y.a,{attrs:{"x-small":"",color:"info"}},[t._v("mdi-history")]),t._v("\n                    Saved item ("+t._s(t.formatPrice(n.pro_price))+" each)\n                  ")],1):t._e(),t._v(" "),n.isFromTicketLine&&t.getCurrentProductPrice(n.pro_id)!==n.pro_price?e("div",{staticClass:"caption warning--text"},[e(y.a,{attrs:{"x-small":"",color:"warning"}},[t._v("mdi-alert")]),t._v("\n                    Current price:\n                    "+t._s(t.formatPrice(t.getCurrentProductPrice(n.pro_id)))+"\n                  ")],1):t._e()]),t._v(" "),e(c.a,{attrs:{icon:"",small:"",color:"error"},on:{click:function(e){return t.removeFromCart(n.id)}}},[e(y.a,{attrs:{small:""}},[t._v("mdi-delete")])],1)],1),t._v(" "),e("div",{staticClass:"d-flex justify-space-between align-center"},[e("div",{staticClass:"d-flex align-center"},[e(c.a,{attrs:{icon:"","x-small":"",color:"grey"},on:{click:function(e){return t.updateQuantity(n.id,-1)}}},[e(y.a,[t._v("mdi-minus")])],1),t._v(" "),e("span",{staticClass:"mx-3 font-weight-bold"},[t._v(t._s(n.quantity))]),t._v(" "),e(c.a,{attrs:{icon:"","x-small":"",color:"grey",disabled:n.quantity>=n.stock_count},on:{click:function(e){return t.updateQuantity(n.id,1)}}},[e(y.a,[t._v("mdi-plus")])],1)],1),t._v(" "),e("div",{staticClass:"font-weight-bold primary--text"},[t._v("\n                  "+t._s(t.formatPrice(n.pro_price*n.quantity))+"\n                ")])]),t._v(" "),n.quantity>=n.stock_count?e("div",{staticClass:"caption error--text mt-1"},[t._v("\n                Max stock reached\n              ")]):t._e(),t._v(" "),n.isFromTicketLine&&!n.isActive?e("div",{staticClass:"caption warning--text mt-1"},[e(y.a,{attrs:{"x-small":"",color:"warning"}},[t._v("mdi-alert")]),t._v("\n                Product is currently inactive\n              ")],1):t._e()])})),1)]),t._v(" "),e("div",{staticClass:"pa-4"},[t.cart.length>0?e(l.a,{staticClass:"mb-3 pa-3 w-100",attrs:{outlined:""}},[e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("span",[t._v("Subtotal:")]),t._v(" "),e("span",{staticClass:"font-weight-medium"},[t._v(t._s(t.formatPrice(t.getTotalPrice())))])]),t._v(" "),e("div",{staticClass:"d-flex justify-space-between mb-1"},[e("span",[t._v("Tax (8.5%):")]),t._v(" "),e("span",{staticClass:"font-weight-medium"},[t._v(t._s(t.formatPrice(.085*t.getTotalPrice())))])]),t._v(" "),e(_.a,{staticClass:"my-2"}),t._v(" "),e("div",{staticClass:"d-flex justify-space-between text-h6 font-weight-bold"},[e("span",[t._v("Total:")]),t._v(" "),e("span",{staticClass:"primary--text"},[t._v(t._s(t.formatPrice(1.085*t.getTotalPrice())))])])],1):t._e(),t._v(" "),t.cart.length>0?e("div",[e(c.a,{staticClass:"mb-2",attrs:{color:"info",block:"",loading:t.savingTicket},on:{click:t.saveTicket}},[e(y.a,{attrs:{left:""}},[t._v("mdi-content-save")]),t._v("\n              "+t._s(t.currentTicket?"Update Ticket":"Save Ticket")+"\n            ")],1),t._v(" "),e(x.a,{staticClass:"mb-2",attrs:{"no-gutters":""}},[e(v.a,{staticClass:"pr-1",attrs:{cols:"6"}},[e(c.a,{attrs:{color:"primary",block:"",large:"",disabled:!t.currentTicket},on:{click:t.processPayment}},[e(y.a,{attrs:{left:""}},[t._v("mdi-credit-card")]),t._v("\n                  Payment\n                ")],1)],1),t._v(" "),e(v.a,{staticClass:"pl-1",attrs:{cols:"6"}},[e(c.a,{attrs:{color:"green",block:"",large:"",disabled:!t.currentTicket},on:{click:t.printCustomerReceipt}},[e(y.a,{attrs:{left:""}},[t._v("mdi-printer")]),t._v("\n                  Print Ticket\n                ")],1)],1)],1),t._v(" "),e(c.a,{staticClass:"mb-2",attrs:{color:"grey",block:"",large:""},on:{click:t.clearCart}},[e(y.a,{attrs:{left:""}},[t._v("mdi-cart-remove")]),t._v("\n              Clear Cart\n            ")],1)],1):t._e()],1)],1)],1)],1),t._v(" "),e(w.a,{attrs:{color:t.snackbar.color,timeout:t.snackbar.timeout,location:"top right",variant:"elevated"},scopedSlots:t._u([{key:"actions",fn:function(){return[e(c.a,{attrs:{color:"white",variant:"text"},on:{click:function(e){t.snackbar.show=!1}}},[t._v("\n        Close\n      ")])]},proxy:!0}]),model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[e("div",{staticClass:"d-flex align-center"},[e(y.a,{staticClass:"mr-2"},[t._v(t._s(t.snackbar.icon))]),t._v("\n      "+t._s(t.snackbar.message)+"\n    ")],1)])],1)}),[],!1,null,"1bdc38ea",null);e.default=component.exports},921:function(t,e,n){var content=n(975);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("129a2380",content,!0,{sourceMap:!1})},922:function(t,e,n){var content=n(977);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("aa2877e6",content,!0,{sourceMap:!1})},923:function(t,e,n){var content=n(979);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("3c2be8fc",content,!0,{sourceMap:!1})},974:function(t,e,n){"use strict";n(921)},975:function(t,e,n){var r=n(14)((function(i){return i[1]}));r.push([t.i,'.dialog-overlay[data-v-02cb606c]{align-items:center;background:rgba(0,0,0,.5);bottom:0;display:flex;justify-content:center;left:0;padding:20px;position:fixed;right:0;top:0;z-index:1000}.print-dialog-content[data-v-02cb606c]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:600px;overflow-y:auto;width:100%}.print-dialog-header[data-v-02cb606c]{align-items:center;background:#f8f9fa;border-bottom:1px solid #e9ecef;border-radius:12px 12px 0 0;display:flex;justify-content:space-between;padding:20px 24px}.print-dialog-header h2[data-v-02cb606c]{color:#333;font-size:20px;margin:0}.close-btn[data-v-02cb606c]{align-items:center;background:none;border:none;border-radius:50%;color:#6c757d;cursor:pointer;display:flex;font-size:28px;height:32px;justify-content:center;padding:0;transition:all .2s;width:32px}.close-btn[data-v-02cb606c]:hover{background:#e9ecef;color:#333}.print-preview[data-v-02cb606c]{background:#fff;color:#000;font-family:"Courier New",monospace;font-size:13px;line-height:1.4;padding:24px}.print-header[data-v-02cb606c]{margin-bottom:20px;text-align:center}.restaurant-name[data-v-02cb606c]{color:#333;font-size:24px;font-weight:700;margin:0 0 8px}.restaurant-address[data-v-02cb606c]{color:#666;font-size:14px;line-height:1.3;margin:0}.print-ticket-info[data-v-02cb606c]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:1fr 1fr;margin-bottom:15px}.detail-row[data-v-02cb606c]{display:flex;font-size:13px;justify-content:space-between;margin-bottom:4px}.detail-label[data-v-02cb606c]{color:#333;font-weight:700}.detail-value[data-v-02cb606c]{color:#000}.print-divider[data-v-02cb606c]{border-top:2px dashed #333;margin:20px 0}.print-items[data-v-02cb606c]{margin-bottom:20px}.section-title[data-v-02cb606c]{color:#333;font-size:16px;font-weight:700;margin:0 0 15px;text-align:center}.print-item[data-v-02cb606c]{border-bottom:1px dotted #ccc;margin-bottom:12px;padding-bottom:8px}.print-item[data-v-02cb606c]:last-child{border-bottom:none}.item-line[data-v-02cb606c]{margin-bottom:4px}.item-main[data-v-02cb606c]{display:flex;font-weight:700;justify-content:space-between;margin-bottom:2px}.item-name[data-v-02cb606c]{color:#333}.item-price[data-v-02cb606c]{color:#000}.item-details[data-v-02cb606c]{color:#666;display:flex;font-size:12px;justify-content:space-between;margin-left:15px}.item-total[data-v-02cb606c]{color:#000;font-weight:700}.item-notes[data-v-02cb606c]{color:#888;font-size:11px;font-style:italic;margin-left:15px;margin-top:4px}.no-items-print[data-v-02cb606c]{color:#666;font-style:italic;padding:20px;text-align:center}.print-summary[data-v-02cb606c]{margin:20px 0}.summary-line[data-v-02cb606c]{display:flex;font-size:14px;justify-content:space-between;margin-bottom:4px}.summary-label[data-v-02cb606c]{color:#333}.summary-value[data-v-02cb606c]{color:#000;font-weight:700}.total-line[data-v-02cb606c]{border-top:2px solid #333;font-size:18px;font-weight:700;margin-top:12px;padding-top:8px}.total-line .summary-label[data-v-02cb606c],.total-line .summary-value[data-v-02cb606c]{color:#000}.print-payment[data-v-02cb606c]{margin:20px 0}.payment-status[data-v-02cb606c]{display:flex;font-size:14px;font-weight:700;justify-content:space-between;margin-bottom:8px}.payment-label[data-v-02cb606c]{color:#333}.payment-value.payment-pending[data-v-02cb606c]{color:#856404}.payment-value.payment-paid[data-v-02cb606c]{color:#155724}.payment-value.payment-refunded[data-v-02cb606c]{color:#721c24}.payment-details[data-v-02cb606c]{color:#666;font-size:12px}.payment-info[data-v-02cb606c]{display:flex;flex-direction:column;gap:4px}.print-notes[data-v-02cb606c]{margin:20px 0}.print-notes h4[data-v-02cb606c]{color:#333;font-size:14px;font-weight:700;margin:0 0 8px}.print-notes p[data-v-02cb606c]{background:#f8f9fa;border-left:4px solid #ffc107;border-radius:4px;color:#000;font-size:13px;margin:0;padding:10px}.print-custom-footer[data-v-02cb606c]{color:#666;font-size:12px;margin:20px 0;text-align:center}.print-footer[data-v-02cb606c]{margin-top:30px;text-align:center}.thank-you[data-v-02cb606c]{color:#333;font-size:16px;font-weight:700;margin:15px 0 10px}.print-time[data-v-02cb606c]{color:#888;font-size:11px;margin:0}.print-dialog-actions[data-v-02cb606c]{background:#f8f9fa;border-radius:0 0 12px 12px;border-top:1px solid #e9ecef;display:flex;gap:12px;justify-content:flex-end;padding:20px 24px}.print-btn[data-v-02cb606c]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:flex;font-size:14px;font-weight:500;gap:8px;padding:12px 24px;transition:all .2s}.print-primary[data-v-02cb606c]{background:#007bff;color:#fff}.print-primary[data-v-02cb606c]:disabled{background:#6c757d;cursor:not-allowed}.print-secondary[data-v-02cb606c]{background:#6c757d;color:#fff}.print-btn[data-v-02cb606c]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}@media (max-width:768px){.print-dialog-content[data-v-02cb606c]{margin:10px;max-height:95vh}.print-preview[data-v-02cb606c]{font-size:12px;padding:16px}.print-ticket-info[data-v-02cb606c]{gap:10px;grid-template-columns:1fr}.restaurant-name[data-v-02cb606c]{font-size:20px}.section-title[data-v-02cb606c]{font-size:14px}.total-line[data-v-02cb606c]{font-size:16px}.print-dialog-actions[data-v-02cb606c]{flex-direction:column}.print-btn[data-v-02cb606c]{justify-content:center;width:100%}}',""]),r.locals={},t.exports=r},976:function(t,e,n){"use strict";n(922)},977:function(t,e,n){var r=n(14)((function(i){return i[1]}));r.push([t.i,".cursor-pointer[data-v-7e316119]{cursor:pointer}.payment-card[data-v-7e316119]{transition:all .2s ease}.payment-card[data-v-7e316119]:hover{transform:translateY(-1px)}.text-none[data-v-7e316119]{text-transform:none!important}",""]),r.locals={},t.exports=r},978:function(t,e,n){"use strict";n(923)},979:function(t,e,n){var r=n(14)((function(i){return i[1]}));r.push([t.i,".cursor-pointer[data-v-73f437f1]{cursor:pointer}.customer-card[data-v-73f437f1]{border:2px solid transparent;transition:all .3s ease}.customer-card[data-v-73f437f1]:hover{border-color:rgba(25,118,210,.3);transform:translateY(-1px)}.selected-customer[data-v-73f437f1]{background-color:rgba(25,118,210,.1);border-color:#1976d2!important}",""]),r.locals={},t.exports=r}}]);