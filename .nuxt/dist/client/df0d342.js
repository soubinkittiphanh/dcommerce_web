(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1e3:function(e,t,n){"use strict";n.r(t);n(44),n(9),n(5),n(34),n(7),n(11),n(12);var r=n(3),o=n(27),c=n(33),d=n(20);n(92),n(39),n(51),n(66),n(209),n(333),n(30),n(63),n(68),n(8),n(10);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={name:"SettlementDialog",components:{VoucherPrintComponent:n(1001).default},props:{paymentMethod:{type:String,default:"cash"},visible:{type:Boolean,default:!1},settlement:{type:Object,default:null},outstandingInvoices:{type:Array,default:function(){return[]}},currencies:{type:Array,default:function(){return[]}},bankAccounts:{type:Array,default:function(){return[]}},ministries:{type:Array,default:function(){return[]}},chartAccounts:{type:Array,default:function(){return[]}},users:{type:Array,default:function(){return[]}}},data:function(){return{showPrintVoucher:!1,settlementDetail:null,loading:!1,loadingAdvances:!1,showAdvanceBrowser:!1,selectedAdvanceForBrowser:null,availableAdvances:[],filteredAdvances:[],advanceSearch:{query:"",status:""},formData:{settlementDate:"",method:"",amount:null,currencyId:"",exchangeRate:1,bankAccountId:"",ministryId:"",chartAccountId:"",userId:"",notes:"",selectedInvoices:[],linkToAdvance:"false",moneyAdvanceId:"",externalRef:"",externalRefNo:"",chequeNo:"",fromPersonName:""},errors:{},formErrors:[]}},computed:{isEditMode:function(){return this.settlement&&this.settlement.id},isLinkedToAdvance:function(){return"true"===this.formData.linkToAdvance&&this.formData.moneyAdvanceId},isBaseCurrency:function(){return"LAK"===this.selectedCurrencyCode},showEquivalentAmount:function(){return!this.isBaseCurrency&&this.formData.amount>0&&this.formData.exchangeRate>0},equivalentAmountLAK:function(){return this.showEquivalentAmount?this.formData.amount*this.formData.exchangeRate:0},selectedInvoicesTotal:function(){var e=this;return this.outstandingInvoices.filter((function(t){return e.formData.selectedInvoices.includes(t.id)})).reduce((function(e,t){return e+(t.outstandingAmount||0)}),0)},selectedCurrencyCode:function(){var e=this;if(!this.formData.currencyId)return"LAK";var t=this.currencies.find((function(t){return t.id==e.formData.currencyId}));return this._isInitializing||(this.formData.exchangeRate=t.rate||1),t?t.code||t.currencyCode:"LAK"},selectedBankAccount:function(){var e=this;return this.formData.bankAccountId?this.bankAccounts.find((function(t){return t.id==e.formData.bankAccountId})):null},selectedMinistry:function(){var e=this;return this.formData.ministryId?this.ministries.find((function(t){return t.id==e.formData.ministryId})):null},selectedCurrency:function(){var e=this;return this.formData.currencyId?this.currencies.find((function(t){return t.id==e.formData.currencyId})):null},selectedAdvance:function(){var e=this;return this.formData.moneyAdvanceId?this.availableAdvances.find((function(t){return t.id==e.formData.moneyAdvanceId})):null},user:function(){return this.$auth.user||""},filteredBankAccounts:function(){if(!this.selectedCurrency||!this.bankAccounts.length)return this.bankAccounts.filter((function(e){return!1!==e.isActive}));var e=this.selectedCurrency.code||this.selectedCurrency.currencyCode,t=this.bankAccounts.filter((function(t){return(t.currency===e||!t.currency)&&!1!==t.isActive}));return t.length>0?t:this.bankAccounts.filter((function(e){return!1!==e.isActive}))},today:function(){return(new Date).toISOString().split("T")[0]},isFormValid:function(){var e={hasAmount:!!(this.formData.amount&&parseFloat(this.formData.amount)>0),hasCurrency:!!this.formData.currencyId,hasUser:!!this.formData.userId,hasSettlementDate:!!this.formData.settlementDate,hasMethod:!!this.formData.method,hasUsers:this.users.length>0,hasCurrencies:this.currencies.length>0,bankAccountValid:"bank_transfer"!==this.formData.method||!!this.formData.bankAccountId,exchangeRateValid:!this.formData.exchangeRate||this.formData.exchangeRate>0,chequeNoValid:"cheque"!==this.formData.method||!!this.formData.chequeNo,fromPersonNameValid:"cash"!==this.formData.method&&"cheque"!==this.formData.method||!!this.formData.fromPersonName};return Object.values(e).every((function(e){return!0===e}))}},watch:{visible:function(e){e?(this.initializeForm(),this.loadMoneyAdvances()):this.resetForm()},"formData.currencyId":function(e,t){e!==t&&(this._isInitializing&&this.isEditMode||this.handleCurrencyChange())},settlement:{handler:function(e,t){var n=this;this.visible&&e!==t&&this.$nextTick((function(){n.initializeForm()}))},deep:!0},"formData.moneyAdvanceId":function(e,t){var n=this;e&&e!==t&&this.$nextTick((function(){n.syncCurrencyFromAdvance(),n.syncAmountFromAdvance()}))},"formData.linkToAdvance":function(e,t){"false"===e&&"true"===t&&this.clearAdvanceSelection()},availableAdvances:{handler:function(e){var t=this;e.length>0&&this.formData.moneyAdvanceId&&"true"===this.formData.linkToAdvance&&this.$nextTick((function(){t.syncCurrencyFromAdvance(),t.syncAmountFromAdvance()}))},immediate:!1}},beforeDestroy:function(){document.body.style.overflow="auto"},methods:{formatVoucherNumber:function(e){return String(e).padStart(6,"0")},showToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[t](e):this.$notify?this.$notify({title:"error"===t?"Error":"Success",message:e,type:"error"===t?"error":"success"}):alert("".concat(t.toUpperCase(),": ").concat(e))},fetchSettlementByid:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formData.id){t.next=2;break}return t.abrupt("return",e.showToast("ກະລຸນາບັນທຶກຂໍ້ມູນກ່ອນ","error"));case 2:return e.loading=!0,t.prev=3,t.next=6,e.$axios.get("/api/settlements/".concat(e.formData.id));case 6:n=t.sent,data=n.data,e.settlementDetail=data.data,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),e.showToast("Error fetching money advances","error"),console.error(t.t0);case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},closePrintVoucher:function(){var e=this;this.showPrintVoucher=!1,setTimeout((function(){e.settlementDetail=null}),100)},printSettlement:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchSettlementByid();case 2:e.showPrintVoucher=!0;case 3:case"end":return t.stop()}}),t)})))()},initializeForm:function(){var e=this;if(this.settlement&&(this.settlement.id||this.settlement.moneyAdvanceId)){var t=this.settlement.moneyAdvanceId&&null!==this.settlement.moneyAdvanceId&&""!==this.settlement.moneyAdvanceId&&"0"!==this.settlement.moneyAdvanceId&&0!==this.settlement.moneyAdvanceId;this.formData={id:this.settlement.id,settlementDate:this.settlement.settlementDate?this.settlement.settlementDate.split("T")[0]:"",method:this.settlement.method||"",amount:this.settlement.amount||null,currencyId:this.settlement.currencyId||"",exchangeRate:void 0!==this.settlement.exchangeRate&&null!==this.settlement.exchangeRate?this.settlement.exchangeRate:1,bankAccountId:this.settlement.bankAccountId||"",ministryId:this.settlement.ministryId||"",chartAccountId:this.settlement.chartAccountId||"",userId:this.settlement.userId||"",notes:this.settlement.notes||"",selectedInvoices:[],linkToAdvance:t||"true"===this.settlement.linkToAdvance?"true":"false",moneyAdvanceId:t?this.settlement.moneyAdvanceId.toString():"",externalRef:this.settlement.externalRef||"",externalRefNo:this.settlement.externalRefNo||"",chequeNo:this.settlement.chequeNo||"",fromPersonName:this.settlement.fromPersonName||""},this._isInitializing=!0,"true"===this.formData.linkToAdvance?this.$nextTick((function(){e.waitForAdvancesAndSync(),e._isInitializing=!1})):this.$nextTick((function(){e._isInitializing=!1}))}else{if(this.formData={settlementDate:this.today,method:this.paymentMethod,amount:null,currencyId:"",exchangeRate:1,bankAccountId:"",ministryId:"",chartAccountId:"",userId:this.user.id,notes:"",selectedInvoices:[],linkToAdvance:"false",moneyAdvanceId:"",externalRef:"",externalRefNo:"",chequeNo:"",fromPersonName:""},this._isInitializing=!0,this.currencies.length>0){var n=this.currencies.find((function(e){return"LAK"===(e.code||e.currencyCode)}))||this.currencies[0];this.formData.currencyId=n.id}this.$nextTick((function(){e._isInitializing=!1}))}this.errors={},this.formErrors=[]},waitForAdvancesAndSync:function(){var e=this;!function t(){e.availableAdvances.length>0&&e.formData.moneyAdvanceId?e.availableAdvances.find((function(t){return t.id.toString()===e.formData.moneyAdvanceId.toString()}))&&(e.syncCurrencyFromAdvance(),e.syncAmountFromAdvance()):e.loadingAdvances||setTimeout(t,200)}()},resetForm:function(){this.formData={settlementDate:"",method:"",amount:null,currencyId:"",exchangeRate:1,bankAccountId:"",ministryId:"",chartAccountId:"",userId:this.user.id,notes:"",selectedInvoices:[],linkToAdvance:"false",moneyAdvanceId:"",externalRef:"",externalRefNo:"",chequeNo:"",fromPersonName:""},this.errors={},this.formErrors=[],this.loading=!1,this.showAdvanceBrowser&&(this.showAdvanceBrowser=!1,this.selectedAdvanceForBrowser=null,document.body.style.overflow="auto")},handleCurrencyChange:function(){this.isBaseCurrency?this.isEditMode&&null!==this.formData.exchangeRate&&void 0!==this.formData.exchangeRate||(this.formData.exchangeRate=1):this.formData.exchangeRate&&1!==this.formData.exchangeRate||this.isEditMode||(this.formData.exchangeRate=null)},calculateEquivalentAmount:function(){},loadMoneyAdvances:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var n,r,data,o,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingAdvances=!0,t.prev=1,n={status:["pending","approved"],available_for_settlement:!0},e.formData.moneyAdvanceId&&(n.include_advance_id=e.formData.moneyAdvanceId),t.next=6,e.$axios.get("/api/money-advances",{params:n});case 6:if(r=t.sent,!(data=r.data)||!data.success){t.next=26;break}if(e.availableAdvances=data.data||[],!e.formData.moneyAdvanceId){t.next=24;break}if(e.availableAdvances.find((function(t){return t.id.toString()===e.formData.moneyAdvanceId.toString()}))){t.next=24;break}return t.prev=13,t.next=16,e.$axios.get("/api/money-advances/".concat(e.formData.moneyAdvanceId));case 16:o=t.sent,(d=o.data)&&d.success&&e.availableAdvances.unshift(d.data),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(13),console.error("Error fetching individual advance:",t.t0);case 24:t.next=27;break;case 26:e.availableAdvances=[];case 27:e.filteredAdvances=Object(c.a)(e.availableAdvances),t.next=35;break;case 30:t.prev=30,t.t1=t.catch(1),console.error("Error loading money advances:",t.t1),e.availableAdvances=[],e.filteredAdvances=[];case 35:return t.prev=35,e.loadingAdvances=!1,t.finish(35);case 38:case"end":return t.stop()}}),t,null,[[1,30,35,38],[13,21]])})))()},handleMethodChange:function(){"bank_transfer"!==this.formData.method&&(this.formData.bankAccountId=""),"deduction"!==this.formData.method&&(this.formData.selectedInvoices=[]),"cheque"!==this.formData.method&&(this.formData.chequeNo=""),"cash"!==this.formData.method&&"cheque"!==this.formData.method&&(this.formData.fromPersonName=""),this.clearFieldError("bankAccountId"),this.clearFieldError("chequeNo"),this.clearFieldError("fromPersonName")},updateSelectedInvoicesAmount:function(){"deduction"===this.formData.method&&(this.formData.amount=this.selectedInvoicesTotal)},updateSelectedCurrency:function(){if(this.selectedBankAccount&&this.selectedCurrency){var e=this.selectedBankAccount.currency,t=this.selectedCurrency.code||this.selectedCurrency.currencyCode;e&&e!==t&&(this.formData.bankAccountId="")}},updateSelectedBankAccount:function(){},updateSelectedMinistry:function(){},clearAdvanceSelection:function(){if(this.formData.moneyAdvanceId="",this.formData.linkToAdvance="false",this.currencies.length>0){var e=this.currencies.find((function(e){return"LAK"===(e.code||e.currencyCode)}))||this.currencies[0];this.formData.currencyId=e.id,this.formData.exchangeRate=1}this.formData.amount=null},updateSelectedAdvance:function(){this.selectedAdvance&&(this.syncCurrencyFromAdvance(),this.syncAmountFromAdvance())},syncCurrencyFromAdvance:function(){if(this.selectedAdvance){var e=this.getAdvanceCurrency();e&&(this.formData.currencyId=e.id,this.selectedAdvance.exchangeRate&&null!==this.selectedAdvance.exchangeRate?this.formData.exchangeRate=this.selectedAdvance.exchangeRate:!this.isBaseCurrency||null!==this.formData.exchangeRate&&void 0!==this.formData.exchangeRate||(this.formData.exchangeRate=1))}},syncAmountFromAdvance:function(){this.selectedAdvance&&this.selectedAdvance.amount&&(this.formData.amount=this.selectedAdvance.amount)},getAdvanceCurrency:function(){var e=this;return this.selectedAdvance?this.selectedAdvance.currencyId?this.currencies.find((function(t){return t.id==e.selectedAdvance.currencyId})):this.selectedAdvance.currencyCode?this.currencies.find((function(t){return(t.code||t.currencyCode)===e.selectedAdvance.currencyCode})):this.selectedAdvance.currency?"object"===Object(o.a)(this.selectedAdvance.currency)?this.currencies.find((function(t){return t.id==e.selectedAdvance.currency.id})):this.currencies.find((function(t){return(t.code||t.currencyCode)===e.selectedAdvance.currency})):null:null},browseMoneyAdvances:function(){this.showAdvanceBrowser=!0,this.selectedAdvanceForBrowser=this.selectedAdvance,document.body.style.overflow="hidden"},closeAdvanceBrowser:function(){this.showAdvanceBrowser=!1,this.selectedAdvanceForBrowser=null,this.advanceSearch.query="",this.advanceSearch.status="",this.filteredAdvances=Object(c.a)(this.availableAdvances),document.body.style.overflow="auto"},handleAdvanceBrowserOverlayClick:function(e){e.target===e.currentTarget&&this.closeAdvanceBrowser()},selectAdvanceFromBrowser:function(e){this.selectedAdvanceForBrowser=e},confirmAdvanceSelection:function(){var e=this;this.selectedAdvanceForBrowser&&(this.formData.moneyAdvanceId=this.selectedAdvanceForBrowser.id,this.closeAdvanceBrowser(),this.$nextTick((function(){e.syncCurrencyFromAdvance(),e.syncAmountFromAdvance()})))},searchAdvances:function(){this.filterAdvances()},filterAdvances:function(){var e=this,t=Object(c.a)(this.availableAdvances);if(this.advanceSearch.status&&(t=t.filter((function(t){return t.status===e.advanceSearch.status}))),this.advanceSearch.query){var n=this.advanceSearch.query.toLowerCase();t=t.filter((function(e){return e.purpose&&e.purpose.toLowerCase().includes(n)||e.note&&e.note.toLowerCase().includes(n)||e.id.toString().includes(n)}))}this.filteredAdvances=t},validateForm:function(){if(this.errors={},this.formErrors=[],this.formData.settlementDate||(this.errors.settlementDate="ກະລຸນາເລືອກວັນທີ",this.formErrors.push("ວັນທີລົງຊຳລະ ແມ່ນຈຳເປັນ")),this.formData.method||(this.errors.method="ກະລຸນາເລືອກວິທີການຊຳລະ",this.formErrors.push("ວິທີການຊຳລະ ແມ່ນຈຳເປັນ")),(!this.formData.amount||this.formData.amount<=0)&&(this.errors.amount="ກະລຸນາໃສ່ຈຳນວນເງິນທີ່ຖືກຕ້ອງ",this.formErrors.push("ຈຳນວນເງິນ ແມ່ນຈຳເປັນ ແລະ ຕ້ອງຫຼາຍກວ່າ 0")),this.formData.currencyId||(this.errors.currencyId="ກະລຸນາເລືອກສະກຸນເງິນ",this.formErrors.push("ສະກຸນເງິນ ແມ່ນຈຳເປັນ")),this.formData.exchangeRate&&this.formData.exchangeRate<=0&&(this.errors.exchangeRate="ອັດຕາແລກປ່ຽນຕ້ອງຫຼາຍກວ່າ 0",this.formErrors.push("ອັດຕາແລກປ່ຽນຕ້ອງຫຼາຍກວ່າ 0")),this.formData.userId||(this.errors.userId="ກະລຸນາເລືອກຜູ້ລົງບັນຊີ",this.formErrors.push("ຜູ້ລົງບັນຊີ ແມ່ນຈຳເປັນ")),"bank_transfer"!==this.formData.method||this.formData.bankAccountId||(this.errors.bankAccountId="ກະລຸນາເລືອກບັນຊີທະນາຄານ",this.formErrors.push("ບັນຊີທະນາຄານ ແມ່ນຈຳເປັນສຳລັບການໂອນທະນາຄານ")),"cheque"!==this.formData.method||this.formData.chequeNo||(this.errors.chequeNo="ກະລຸນາໃສ່ເລກເຊັກ",this.formErrors.push("ເລກເຊັກ ແມ່ນຈຳເປັນສຳລັບການຊຳລະດ້ວຍເຊັກ")),"cash"!==this.formData.method&&"cheque"!==this.formData.method||this.formData.fromPersonName||(this.errors.fromPersonName="ກະລຸນາໃສ່ຊື່ຜູ້ຈ່າຍ",this.formErrors.push("ຊື່ຜູ້ຈ່າຍ ແມ່ນຈຳເປັນສຳລັບການຊຳລະດ້ວຍເງິນສົດ ແລະ ເຊັກ")),this.isLinkedToAdvance&&this.selectedAdvance){var e=this.getAdvanceCurrency();e&&this.formData.currencyId!=e.id&&(this.errors.currencyId="ສະກຸນເງິນຕ້ອງກົງກັບລາຍຈ່າຍລ່ວງໜ້າ",this.formErrors.push("ສະກຸນເງິນຕ້ອງກົງກັບລາຍຈ່າຍລ່ວງໜ້າທີ່ເລືອກ"))}return this.formData.notes&&this.formData.notes.length>500&&this.formErrors.push("ໝາຍເຫດຕ້ອງບໍ່ເກີນ 500 ຕົວອັກສອນ"),0===this.users.length&&this.formErrors.push("ບໍ່ມີຜູ້ໃຊ້ງານ. ກະລຸນາຕິດຕໍ່ຜູ້ຄຸ້ມຄອງລະບົບ."),0===this.currencies.length&&this.formErrors.push("ບໍ່ມີສະກຸນເງິນ. ກະລຸນາຕິດຕໍ່ຜູ້ຄຸ້ມຄອງລະບົບ."),0===this.formErrors.length},clearFieldError:function(e){this.errors[e]&&this.$delete(this.errors,e)},saveSettlement:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validateForm()){t.next=2;break}return t.abrupt("return");case 2:if(e.loading=!0,t.prev=3,n=f(f({},e.formData),{},{selectedInvoices:"deduction"===e.formData.method?e.formData.selectedInvoices:[],bookingDate:e.formData.settlementDate}),Object.keys(n).forEach((function(e){""!==n[e]&&null!==n[e]||delete n[e]})),"true"!==n.linkToAdvance&&delete n.moneyAdvanceId,delete n.linkToAdvance,console.log("📤 Submitting settlement data:",n),e.formData.id){t.next=17;break}return t.next=12,e.$axios.post("/api/settlements",n);case 12:return r=t.sent,console.info("REPONSE DATA ".concat(JSON.stringify(r.data))),e.formData.id=r.data.data.id,e.showToast("Money settlement created successfully","success"),t.abrupt("return");case 17:e.$emit("save",n),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(3),console.error("Form submission error:",t.t0),e.formErrors.push("ເກີດຂໍ້ຜິດພາດໃນການບັນທຶກ. ກະລຸນາລອງໃໝ່.");case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[3,20,24,27]])})))()},closeDialog:function(){this.$emit("close")},handleOverlayClick:function(){this.closeDialog()},formatCurrency:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LAK",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"number"!=typeof e&&null!=e&&(e=0);var o=f({style:"currency",currency:t.toUpperCase(),minimumFractionDigits:0,maximumFractionDigits:2},r);try{return new Intl.NumberFormat(n,o).format(e||0)}catch(n){return"".concat(t.toUpperCase()," ").concat((e||0).toLocaleString())}},formatDate:function(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"ບໍ່ລະບຸ"},formatAdvanceOption:function(e){return"#".concat(e.id," - ").concat(this.formatCurrency(e.amount,e.currency.code)," - ").concat(e.purpose||"No purpose")},formatStatus:function(e){return{pending:"ລໍຖ້າ",approved:"ອະນຸມັດ",settled:"ສຳເລັດ",cancelled:"ຍົກເລີກ"}[e]||e}}},v=m,h=(n(1415),n(32)),component=Object(h.a)(v,(function(){var e,t=this,n=t._self._c;return n("div",[t.visible?n("div",{staticClass:"modal-overlay",on:{click:t.handleOverlayClick}},[n("div",{staticClass:"modal-dialog enhanced-dialog",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"modal-header"},[n("div",{staticClass:"modal-title-section"},[n("i",{staticClass:"fas fa-money-bill-wave modal-icon"}),t._v(" "),n("h5",{staticClass:"modal-title"},[t._v("\n            "+t._s(t.isEditMode?"ແກ້ໄຂການຊຳລະ":"ລົງລາຍຮັບ ການຊຳລະ")+"\n          ")])]),t._v(" "),n("div",{staticClass:"modal-header-right"},[n("span",{staticClass:"voucher-number"},[t._v("\n            ເລກທີ:\n            "+t._s(t.formData.id?t.formatVoucherNumber(t.formData.id):"000000")+"\n          ")]),t._v(" "),n("button",{staticClass:"close-btn",on:{click:t.closeDialog}},[n("i",{staticClass:"fas fa-times"})])])]),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.saveSettlement.apply(null,arguments)}}},[n("div",{staticClass:"modal-body"},[t.loading?n("div",{staticClass:"form-loading"},[n("div",{staticClass:"spinner-small"}),t._v(" "),n("p",[t._v("Loading form data...")])]):n("div",{staticClass:"form-grid compact"},[n("div",{staticClass:"form-group"},[t._m(0),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.settlementDate,expression:"formData.settlementDate"}],staticClass:"form-control compact",class:{"is-invalid":t.errors.settlementDate},attrs:{type:"date",max:t.today,required:""},domProps:{value:t.formData.settlementDate},on:{input:function(e){e.target.composing||t.$set(t.formData,"settlementDate",e.target.value)}}}),t._v(" "),t.errors.settlementDate?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.settlementDate)+"\n              ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[t._m(1),t._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.method,expression:"formData.method"}],staticClass:"form-control custom-select compact",class:{"is-invalid":t.errors.method},attrs:{required:""},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.$set(t.formData,"method",e.target.multiple?n:n[0])},t.handleMethodChange]}},[n("option",{attrs:{value:""}},[t._v("ເລືອກວິທີການຊຳລະ")]),t._v(" "),n("option",{attrs:{value:"cash"}},[t._v("ເງິນສົດ (Cash)")]),t._v(" "),n("option",{attrs:{value:"cheque"}},[t._v("ເຊັກ (Cheque)")]),t._v(" "),n("option",{attrs:{value:"bank_transfer"}},[t._v("\n                    ໂອນທະນາຄານ (Bank Transfer)\n                  ")]),t._v(" "),n("option",{attrs:{value:"deduction"}},[t._v("ຫັກລົບ (Deduction)")])]),t._v(" "),t._m(2)]),t._v(" "),t.errors.method?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.method)+"\n              ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[t._m(3),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.externalRef,expression:"formData.externalRef"}],staticClass:"form-control compact",class:{"is-invalid":t.errors.externalRef},attrs:{type:"text",placeholder:"ອີງຕາມ ການຕົກລົງ ເຫັນດີ...",maxlength:"50"},domProps:{value:t.formData.externalRef},on:{input:function(e){e.target.composing||t.$set(t.formData,"externalRef",e.target.value)}}}),t._v(" "),t.errors.externalRef?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.externalRef)+"\n              ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[t._m(4),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.externalRefNo,expression:"formData.externalRefNo"}],staticClass:"form-control compact",class:{"is-invalid":t.errors.externalRefNo},attrs:{type:"text",placeholder:"REF-001, TXN-123...",maxlength:"50"},domProps:{value:t.formData.externalRefNo},on:{input:function(e){e.target.composing||t.$set(t.formData,"externalRefNo",e.target.value)}}}),t._v(" "),t.errors.externalRefNo?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.externalRefNo)+"\n              ")]):t._e()]),t._v(" "),"cheque"===t.formData.method?n("div",{staticClass:"form-group"},[t._m(5),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.chequeNo,expression:"formData.chequeNo"}],staticClass:"form-control compact",class:{"is-invalid":t.errors.chequeNo},attrs:{type:"text",placeholder:"ໃສ່ເລກເຊັກ...",maxlength:"20",required:"cheque"===t.formData.method},domProps:{value:t.formData.chequeNo},on:{input:function(e){e.target.composing||t.$set(t.formData,"chequeNo",e.target.value)}}}),t._v(" "),t.errors.chequeNo?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.chequeNo)+"\n              ")]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[t._m(6),t._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.currencyId,expression:"formData.currencyId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":t.errors.currencyId},attrs:{required:"",disabled:t.isLinkedToAdvance},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.$set(t.formData,"currencyId",e.target.multiple?n:n[0])},t.updateSelectedCurrency]}},[n("option",{attrs:{value:""}},[t._v("ເລືອກສະກຸນເງິນ")]),t._v(" "),t._l(t.currencies,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.code||e.currencyCode)+" -\n                    "+t._s(e.name||e.currencyName)+"\n                  ")])}))],2),t._v(" "),t._m(7)]),t._v(" "),t.errors.currencyId?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.currencyId)+"\n              ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[t._m(8),t._v(" "),n("div",{staticClass:"input-group compact"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.amount,expression:"formData.amount",modifiers:{number:!0}}],staticClass:"form-control compact",class:{"is-invalid":t.errors.amount},attrs:{type:"number",step:"0.01",min:"0",placeholder:"0.00",required:""},domProps:{value:t.formData.amount},on:{input:function(e){e.target.composing||t.$set(t.formData,"amount",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text compact"},[t._v("\n                    "+t._s(t.selectedCurrencyCode)+"\n                  ")])])]),t._v(" "),t.errors.amount?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.amount)+"\n              ")]):t._e()]),t._v(" "),"cash"===t.formData.method||"cheque"===t.formData.method?n("div",{staticClass:"form-group"},[n("label",{staticClass:"form-label",class:{required:"cash"===t.formData.method||"cheque"===t.formData.method}},[n("i",{staticClass:"fas fa-user-circle"}),t._v("\n                ຈາກທ່ານ (ຜູ້ຈ່າຍ)\n              ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.fromPersonName,expression:"formData.fromPersonName"}],staticClass:"form-control compact",class:{"is-invalid":t.errors.fromPersonName},attrs:{type:"text",placeholder:"ຊື່ຜູ້ຈ່າຍເງິນ...",maxlength:"100",required:"cash"===t.formData.method||"cheque"===t.formData.method},domProps:{value:t.formData.fromPersonName},on:{input:function(e){e.target.composing||t.$set(t.formData,"fromPersonName",e.target.value)}}}),t._v(" "),t.errors.fromPersonName?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.fromPersonName)+"\n              ")]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[t._m(9),t._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.ministryId,expression:"formData.ministryId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":t.errors.ministryId},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.$set(t.formData,"ministryId",e.target.multiple?n:n[0])},t.updateSelectedMinistry]}},[n("option",{attrs:{value:""}},[t._v("ເລືອກກະຊວງ (ທາງເລືອກ)")]),t._v(" "),t._l(t.ministries,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.ministryCode)+" - "+t._s(e.ministryName)+"\n                  ")])}))],2),t._v(" "),t._m(10)])]),t._v(" "),"bank_transfer"===t.formData.method?n("div",{staticClass:"form-group full-width"},[t._m(11),t._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.bankAccountId,expression:"formData.bankAccountId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":t.errors.bankAccountId},attrs:{required:"bank_transfer"===t.formData.method},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.$set(t.formData,"bankAccountId",e.target.multiple?n:n[0])},t.updateSelectedBankAccount]}},[n("option",{attrs:{value:""}},[t._v("ເລືອກບັນຊີທະນາຄານ")]),t._v(" "),t._l(t.filteredBankAccounts,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.bankName)+" - "+t._s(e.accountNumber)+"\n                  ")])}))],2),t._v(" "),t._m(12)]),t._v(" "),t.errors.bankAccountId?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.bankAccountId)+"\n              ")]):t._e()]):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[t._m(13),t._v(" "),n("div",{staticClass:"input-group compact"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.exchangeRate,expression:"formData.exchangeRate",modifiers:{number:!0}}],staticClass:"form-control compact",class:{"is-invalid":t.errors.exchangeRate},attrs:{type:"number",step:"0.0001",min:"0",placeholder:"1.0000"},domProps:{value:t.formData.exchangeRate},on:{input:[function(e){e.target.composing||t.$set(t.formData,"exchangeRate",t._n(e.target.value))},t.calculateEquivalentAmount],blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t._m(14)]),t._v(" "),t.errors.exchangeRate?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.exchangeRate)+"\n              ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group"},[t._m(15),t._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.chartAccountId,expression:"formData.chartAccountId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":t.errors.chartAccountId},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.$set(t.formData,"chartAccountId",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("ເລືອກບັນຊີລວມ (ທາງເລືອກ)")]),t._v(" "),t._l(t.chartAccounts,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.accountNumber)+" -\n                    "+t._s(e.accountName)+"\n                  ")])}))],2),t._v(" "),t._m(16)])]),t._v(" "),n("div",{staticClass:"form-group"},[t._m(17),t._v(" "),n("div",{staticClass:"custom-select-wrapper"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.userId,expression:"formData.userId"}],staticClass:"form-control custom-select compact",class:{"is-invalid":t.errors.userId},attrs:{required:"",disabled:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.$set(t.formData,"userId",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("ເລືອກຜູ້ລົງບັນຊີ")]),t._v(" "),t._l(t.users,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.cus_name||e.name||e.username)+"\n                  ")])}))],2),t._v(" "),t._m(18)]),t._v(" "),t.errors.userId?n("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.userId)+"\n              ")]):t._e()]),t._v(" "),n("div",{staticClass:"form-group full-width compact-advance"},[n("div",{staticClass:"advance-toggle"},[t._m(19),t._v(" "),n("div",{staticClass:"link-advance-options compact"},[n("label",{staticClass:"radio-option"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.linkToAdvance,expression:"formData.linkToAdvance"}],attrs:{type:"radio",value:"false"},domProps:{checked:t._q(t.formData.linkToAdvance,"false")},on:{change:[function(e){return t.$set(t.formData,"linkToAdvance","false")},t.clearAdvanceSelection]}}),t._v(" "),n("span",{staticClass:"radio-label"},[t._v("ບໍ່ເຊື່ອມຕໍ່")])]),t._v(" "),n("label",{staticClass:"radio-option"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.linkToAdvance,expression:"formData.linkToAdvance"}],attrs:{type:"radio",value:"true"},domProps:{checked:t._q(t.formData.linkToAdvance,"true")},on:{change:function(e){return t.$set(t.formData,"linkToAdvance","true")}}}),t._v(" "),n("span",{staticClass:"radio-label"},[t._v("ເຊື່ອມຕໍ່")])])])]),t._v(" "),"true"===t.formData.linkToAdvance?n("div",{staticClass:"advance-selection compact"},[n("div",{staticClass:"advance-selection-container compact"},[n("div",{staticClass:"custom-select-wrapper flex-1"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.moneyAdvanceId,expression:"formData.moneyAdvanceId"}],staticClass:"form-control custom-select compact",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.$set(t.formData,"moneyAdvanceId",e.target.multiple?n:n[0])},t.updateSelectedAdvance]}},[n("option",{attrs:{value:""}},[t._v("ເລືອກລາຍຈ່າຍລ່ວງໜ້າ")]),t._v(" "),t._l(t.availableAdvances,(function(e){var r;return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                        #"+t._s(e.id)+" -\n                        #"+t._s(e.receiveName)+" -\n                        #"+t._s((null===(r=e.ministry)||void 0===r?void 0:r.ministryName)||"")+" -\n                        "+t._s(t.formatCurrency(e.amount,e.currency.code))+"\n                      ")])}))],2),t._v(" "),t._m(20)]),t._v(" "),n("button",{staticClass:"btn btn-outline-primary btn-sm compact",attrs:{type:"button",disabled:t.loadingAdvances},on:{click:function(e){return e.stopPropagation(),t.browseMoneyAdvances.apply(null,arguments)}}},[t.loadingAdvances?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("i",{staticClass:"fas fa-search"})])]),t._v(" "),t.selectedAdvance?n("div",{staticClass:"advance-info compact"},[n("div",{staticClass:"advance-summary"},[n("span",{staticClass:"advance-id"},[t._v("#"+t._s(t.selectedAdvance.id))]),t._v(" "),n("span",{staticClass:"advance-amount"},[t._v(t._s(t.formatCurrency(t.selectedAdvance.amount,t.selectedAdvance.currency.code)))]),t._v(" "),n("span",{staticClass:"advance-purpose"},[t._v(t._s(t.selectedAdvance.purpose||"No purpose"))]),t._v(" "),n("span",{class:["status-badge",t.selectedAdvance.status]},[t._v("\n                      "+t._s(t.formatStatus(t.selectedAdvance.status))+"\n                    ")])])]):t._e()]):t._e()]),t._v(" "),n("div",{staticClass:"form-group full-width"},[t._m(21),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.notes,expression:"formData.notes"}],staticClass:"form-control compact",attrs:{rows:"3",placeholder:"ເນື້ອໃນລາຍຮັບ / ລາຍລະອຽດເພີ່ມເຕີມ...",maxlength:"500"},domProps:{value:t.formData.notes},on:{input:function(e){e.target.composing||t.$set(t.formData,"notes",e.target.value)}}}),t._v(" "),n("div",{staticClass:"field-hint"},[n("span",{staticClass:"text-counter"},[t._v(t._s((null===(e=t.formData.notes)||void 0===e?void 0:e.length)||0)+"/500")])])])]),t._v(" "),t.formErrors.length>0?n("div",{staticClass:"form-errors compact"},[t._m(22),t._v(" "),n("ul",t._l(t.formErrors,(function(e){return n("li",{key:e},[t._v(t._s(e))])})),0)]):t._e()]),t._v(" "),n("div",{staticClass:"modal-footer enhanced-footer compact"},[n("button",{staticClass:"btn btn-secondary compact",attrs:{type:"button",disabled:t.loading},on:{click:t.closeDialog}},[n("i",{staticClass:"fas fa-times"}),t._v("\n            ຍົກເລີກ\n          ")]),t._v(" "),n("button",{staticClass:"btn btn-primary compact",attrs:{type:"submit",disabled:t.loading||!t.isFormValid}},[t.loading?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("i",{staticClass:"fas",class:t.isEditMode?"fa-save":"fa-plus"}),t._v("\n            "+t._s(t.loading?"ກຳລັງບັນທຶກ...":t.isEditMode?"ອັບເດດ":"ບັນທຶກ")+"\n          ")]),t._v(" "),n("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{title:"Print"},on:{click:function(e){return e.preventDefault(),t.printSettlement.apply(null,arguments)}}},[n("i",{staticClass:"fas fa-print"})])])])]),t._v(" "),t.showAdvanceBrowser?n("div",{staticClass:"modal-overlay browser-overlay",on:{click:t.handleAdvanceBrowserOverlayClick}},[n("div",{staticClass:"modal-dialog advance-browser-dialog",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"modal-header"},[t._m(23),t._v(" "),n("button",{staticClass:"close-btn",on:{click:t.closeAdvanceBrowser}},[n("i",{staticClass:"fas fa-times"})])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"advance-filters compact"},[n("div",{staticClass:"filter-row compact"},[n("div",{staticClass:"filter-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.advanceSearch.query,expression:"advanceSearch.query"}],staticClass:"form-control compact",attrs:{type:"text",placeholder:"ຄົ້ນຫາຕາມຈຸດປະສົງ, ໝາຍເຫດ..."},domProps:{value:t.advanceSearch.query},on:{input:[function(e){e.target.composing||t.$set(t.advanceSearch,"query",e.target.value)},t.searchAdvances]}})]),t._v(" "),n("div",{staticClass:"filter-group"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.advanceSearch.status,expression:"advanceSearch.status"}],staticClass:"form-control compact",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));t.$set(t.advanceSearch,"status",e.target.multiple?n:n[0])},t.filterAdvances]}},[n("option",{attrs:{value:""}},[t._v("ທຸກສະຖານະ")]),t._v(" "),n("option",{attrs:{value:"pending"}},[t._v("ລໍຖ້າ")]),t._v(" "),n("option",{attrs:{value:"approved"}},[t._v("ອະນຸມັດ")])])])])]),t._v(" "),n("div",{staticClass:"advances-list compact"},[t.loadingAdvances?n("div",{staticClass:"loading-state"},[n("div",{staticClass:"spinner-small"}),t._v(" "),n("p",[t._v("ກຳລັງໂຫຼດ...")])]):0===t.filteredAdvances.length?n("div",{staticClass:"empty-state"},[n("i",{staticClass:"fas fa-inbox"}),t._v(" "),n("p",[t._v("ບໍ່ພົບລາຍຈ່າຍລ່ວງໜ້າ")])]):n("div",{staticClass:"advance-items compact"},t._l(t.filteredAdvances,(function(e){var r;return n("div",{key:e.id,staticClass:"advance-item compact",class:{selected:(null===(r=t.selectedAdvanceForBrowser)||void 0===r?void 0:r.id)===e.id},on:{click:function(n){return n.stopPropagation(),t.selectAdvanceFromBrowser(e)}}},[n("div",{staticClass:"advance-item-content compact"},[n("div",{staticClass:"advance-item-header compact"},[n("span",{staticClass:"advance-id"},[t._v("#"+t._s(e.id))]),t._v(" "),n("span",{class:["status-badge",e.status]},[t._v("\n                      "+t._s(t.formatStatus(e.status))+"\n                    ")])]),t._v(" "),n("div",{staticClass:"advance-item-body compact"},[n("div",{staticClass:"advance-amount"},[t._v("\n                      "+t._s(t.formatCurrency(e.amount,e.currency.code))+"\n                    ")]),t._v(" "),n("div",{staticClass:"advance-date"},[t._v("\n                      "+t._s(t.formatDate(e.bookingDate))+"\n                    ")]),t._v(" "),e.purpose?n("div",{staticClass:"advance-purpose"},[t._v("\n                      "+t._s(e.purpose)+"\n                    ")]):t._e()])])])})),0)])]),t._v(" "),n("div",{staticClass:"modal-footer compact"},[n("button",{staticClass:"btn btn-secondary compact",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.closeAdvanceBrowser.apply(null,arguments)}}},[n("i",{staticClass:"fas fa-times"}),t._v("\n            ຍົກເລີກ\n          ")]),t._v(" "),n("button",{staticClass:"btn btn-primary compact",attrs:{type:"button",disabled:!t.selectedAdvanceForBrowser},on:{click:function(e){return e.stopPropagation(),t.confirmAdvanceSelection.apply(null,arguments)}}},[n("i",{staticClass:"fas fa-check"}),t._v("\n            ເລືອກ\n          ")])])])]):t._e()]):t._e(),t._v(" "),t.showPrintVoucher&&t.settlementDetail?n("VoucherPrintComponent",{key:t.settlementDetail.id,attrs:{"voucher-data":t.settlementDetail},on:{close:t.closePrintVoucher}}):t._e()],1)}),[function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-calendar"}),this._v("\n                ວັນທີລົງຊຳລະ\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-credit-card"}),this._v("\n                ວິທີການຊຳລະ\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-hashtag"}),this._v("\n                ອີງຕາມ\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-hashtag"}),this._v("\n                ເລກອ້າງອິງພາຍນອກ\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-money-check"}),this._v("\n                ເລກເຊັກ\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-coins"}),this._v("\n                ສະກຸນເງິນ\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-dollar-sign"}),this._v("\n                ຈຳນວນເງິນ\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-building"}),this._v("\n                ສັງກັດຢູ່ (ກະຊວງ)\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-university"}),this._v("\n                ບັນຊີທະນາຄານ\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-exchange-alt"}),this._v("\n                ອັດຕາແລກປ່ຽນ\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text compact"},[e("i",{staticClass:"fas fa-calculator"})])])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-chart-line"}),this._v("\n                ບັນຊີລວມ\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-user"}),this._v("\n                ຜູ້ລົງບັນຊີ (ຜູ້ຮັບ)\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-link"}),this._v("\n                  ອ້າງອິງລາຍຈ່າຍລ່ວງໜ້າ\n                ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-sticky-note"}),this._v("\n                ເນື້ອໃນລາຍຮັບ (ໝາຍເຫດ)\n              ")])},function(){var e=this._self._c;return e("h6",[e("i",{staticClass:"fas fa-exclamation-circle"}),this._v("\n              ກະລຸນາແກ້ໄຂຂໍ້ຜິດພາດ:\n            ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-title-section"},[t("i",{staticClass:"fas fa-search modal-icon"}),e._v(" "),t("h5",{staticClass:"modal-title"},[e._v("ເລືອກລາຍຈ່າຍລ່ວງໜ້າ")])])}],!1,null,"d0e92f5e",null);t.default=component.exports},1192:function(e,t,n){var content=n(1416);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("b6c8da3e",content,!0,{sourceMap:!1})},1415:function(e,t,n){"use strict";n(1192)},1416:function(e,t,n){var r=n(15)((function(i){return i[1]}));r.push([e.i,'.modal-header-right[data-v-d0e92f5e]{align-items:center;display:flex;gap:15px}.voucher-number[data-v-d0e92f5e]{color:#fff;font-size:14px;font-weight:600;opacity:.9}.modal-overlay[data-v-d0e92f5e]{align-items:center;animation:fadeIn-d0e92f5e .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.enhanced-dialog[data-v-d0e92f5e]{animation:slideIn-d0e92f5e .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);display:flex;flex-direction:column;height:95vh;margin:0 auto;max-height:95vh;max-width:95vw;overflow:hidden;width:95%}.modal-header[data-v-d0e92f5e]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;flex-shrink:0;justify-content:space-between;padding:16px 24px}.modal-title-section[data-v-d0e92f5e]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-d0e92f5e]{font-size:18px;opacity:.9}.modal-title[data-v-d0e92f5e]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-d0e92f5e]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;opacity:.8;padding:6px;transition:opacity .2s}.close-btn[data-v-d0e92f5e]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-d0e92f5e]{flex:1;min-height:0;overflow-y:auto;padding:16px 24px}.form-loading[data-v-d0e92f5e]{align-items:center;color:#666;display:flex;justify-content:center;padding:40px}.spinner-small[data-v-d0e92f5e]{animation:spin-d0e92f5e 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:20px;margin-right:10px;width:20px}@keyframes spin-d0e92f5e{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.form-grid.compact[data-v-d0e92f5e]{grid-gap:12px;align-content:start;display:grid;gap:12px;grid-template-columns:repeat(4,1fr);height:100%}.form-group[data-v-d0e92f5e]{margin-bottom:0}.form-group.full-width[data-v-d0e92f5e]{grid-column:1/-1}.form-label[data-v-d0e92f5e]{align-items:center;color:#374151;display:flex;font-size:12px;font-weight:600;gap:6px;margin-bottom:4px}.form-label.required[data-v-d0e92f5e]:after{color:#e74c3c;content:"*";margin-left:2px}.form-label i[data-v-d0e92f5e]{color:#6b7280;font-size:10px}.form-control.compact[data-v-d0e92f5e]{background:#fafafa;border:2px solid #e5e7eb;border-radius:6px;box-sizing:border-box;font-size:13px;padding:8px 12px;transition:all .2s ease;width:100%}.form-control.compact[data-v-d0e92f5e]:focus{background:#fff;border-color:#667eea;box-shadow:0 0 0 2px rgba(102,126,234,.1);outline:none}.form-control.compact[data-v-d0e92f5e]:disabled{background-color:#f3f4f6;border-color:#d1d5db;color:#6b7280;cursor:not-allowed}.form-control.is-invalid[data-v-d0e92f5e]{border-color:#e74c3c}.invalid-feedback[data-v-d0e92f5e]{color:#e74c3c;display:block;font-size:10px;margin-top:2px}.input-group.compact[data-v-d0e92f5e]{border-radius:6px;display:flex;overflow:hidden}.input-group.compact .form-control[data-v-d0e92f5e]{border-radius:0;border-right:none}.input-group-append[data-v-d0e92f5e]{display:flex}.input-group-text.compact[data-v-d0e92f5e]{background:#f8f9fa;border:2px solid #e5e7eb;border-left:none;color:#6b7280;font-size:12px;font-weight:600;padding:8px 12px}.custom-select-wrapper[data-v-d0e92f5e]{position:relative}.custom-select.compact[data-v-d0e92f5e]{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:30px}.select-icon[data-v-d0e92f5e]{color:#6b7280;font-size:10px;pointer-events:none;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.link-advance-options.compact[data-v-d0e92f5e]{display:flex;gap:12px;margin-top:4px}.radio-option[data-v-d0e92f5e]{align-items:center;color:#374151;cursor:pointer;display:flex;font-size:12px;gap:4px}.radio-option input[type=radio][data-v-d0e92f5e]{margin:0;transform:scale(.8)}.radio-label[data-v-d0e92f5e]{font-weight:500}.compact-advance[data-v-d0e92f5e]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:1px solid #e2e8f0;border-radius:8px;margin:8px 0;padding:12px}.advance-toggle[data-v-d0e92f5e]{align-items:center;display:flex;justify-content:space-between;margin-bottom:8px}.advance-selection.compact[data-v-d0e92f5e]{margin-top:8px}.advance-selection-container.compact[data-v-d0e92f5e]{align-items:flex-start;display:flex;gap:8px;margin-bottom:8px}.flex-1[data-v-d0e92f5e]{flex:1}.btn.compact[data-v-d0e92f5e]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:12px;font-weight:600;gap:4px;padding:6px 12px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn-sm.compact[data-v-d0e92f5e]{font-size:11px;padding:4px 8px}.advance-info.compact[data-v-d0e92f5e]{background:#f0f9ff;border:1px solid #bae6fd;border-radius:6px;margin-top:8px;padding:8px}.advance-summary[data-v-d0e92f5e]{align-items:center;display:flex;flex-wrap:wrap;font-size:11px;gap:8px}.advance-id[data-v-d0e92f5e]{background:#e2e8f0;color:#1e293b;font-family:"Courier New",monospace}.advance-amount[data-v-d0e92f5e],.advance-id[data-v-d0e92f5e]{border-radius:4px;font-size:10px;font-weight:700;padding:2px 6px}.advance-amount[data-v-d0e92f5e]{background:#d1fae5;color:#059669}.advance-purpose[data-v-d0e92f5e]{color:#6b7280;font-size:10px;font-style:italic}.status-badge[data-v-d0e92f5e]{border-radius:8px;font-size:9px;font-weight:600;letter-spacing:.3px;padding:2px 6px;text-transform:uppercase}.status-badge.pending[data-v-d0e92f5e]{background:#fef3c7;color:#92400e}.status-badge.approved[data-v-d0e92f5e]{background:#d1fae5;color:#065f46}.status-badge.settled[data-v-d0e92f5e]{background:#dbeafe;color:#1e40af}.field-hint[data-v-d0e92f5e]{align-items:center;display:flex;font-size:10px;gap:4px;justify-content:space-between;margin-top:4px}.field-hint.error[data-v-d0e92f5e]{color:#e74c3c}.field-hint.warning[data-v-d0e92f5e]{color:#f39c12}.field-hint.info[data-v-d0e92f5e]{color:#0ea5e9}.text-counter[data-v-d0e92f5e]{color:#9ca3af;font-size:9px;margin-left:auto}.form-errors.compact[data-v-d0e92f5e]{background:#fef2f2;border:1px solid #fecaca;border-radius:6px;margin-top:12px;padding:12px}.form-errors.compact h6[data-v-d0e92f5e]{align-items:center;color:#dc2626;display:flex;font-size:12px;gap:4px;margin:0 0 6px}.form-errors.compact ul[data-v-d0e92f5e]{color:#dc2626;font-size:11px;margin:0;padding-left:16px}.enhanced-footer.compact[data-v-d0e92f5e],.modal-footer.compact[data-v-d0e92f5e]{background:#f8f9fa;border-top:1px solid #e9ecef;display:flex;flex-shrink:0;gap:8px;justify-content:flex-end;padding:12px 24px}.btn[data-v-d0e92f5e]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:13px;font-weight:600;gap:6px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn[data-v-d0e92f5e]:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-1px)}.btn[data-v-d0e92f5e]:active:not(:disabled){transform:translateY(0)}.btn-primary[data-v-d0e92f5e]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-secondary[data-v-d0e92f5e]{background:#6c757d;color:#fff}.btn-outline-primary[data-v-d0e92f5e]{background:transparent;border:2px solid #667eea;color:#667eea}.btn-outline-primary[data-v-d0e92f5e]:hover{background:#667eea;color:#fff}.btn[data-v-d0e92f5e]:disabled{box-shadow:none!important;cursor:not-allowed;opacity:.6;transform:none!important}.fa-spin[data-v-d0e92f5e]{animation:spin-d0e92f5e 1s linear infinite}.advance-filters.compact[data-v-d0e92f5e]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;margin-bottom:12px;padding:12px}.filter-row.compact[data-v-d0e92f5e]{grid-gap:12px;align-items:center;display:grid;gap:12px;grid-template-columns:1fr auto}.advances-list.compact[data-v-d0e92f5e]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;max-height:300px;overflow-y:auto}.advance-items.compact[data-v-d0e92f5e]{display:flex;flex-direction:column;padding:8px}.advance-item.compact[data-v-d0e92f5e]{background:#fff;border:1px solid #e5e7eb;border-radius:6px;cursor:pointer;margin-bottom:8px;padding:12px;transition:all .2s ease}.advance-item.compact[data-v-d0e92f5e]:hover{background:#f0f9ff;border-color:#60a5fa}.advance-item.compact.selected[data-v-d0e92f5e]{background:#dbeafe;border-color:#3b82f6}.advance-item-content.compact[data-v-d0e92f5e]{display:flex;flex-direction:column;gap:8px}.advance-item-header.compact[data-v-d0e92f5e]{align-items:center;display:flex;justify-content:space-between}.advance-item-body.compact[data-v-d0e92f5e]{grid-gap:8px;display:grid;font-size:11px;gap:8px;grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}@media (max-width:1200px){.form-grid.compact[data-v-d0e92f5e]{grid-template-columns:repeat(3,1fr)}}@media (max-width:768px){.enhanced-dialog[data-v-d0e92f5e]{height:98vh;margin:1vh auto;max-height:98vh;width:98%}.form-grid.compact[data-v-d0e92f5e]{gap:8px;grid-template-columns:repeat(2,1fr)}.modal-body[data-v-d0e92f5e],.modal-header[data-v-d0e92f5e]{padding:12px 16px}.enhanced-footer.compact[data-v-d0e92f5e],.modal-footer.compact[data-v-d0e92f5e]{flex-direction:column-reverse;padding:12px 16px}.enhanced-footer.compact .btn[data-v-d0e92f5e],.modal-footer.compact .btn[data-v-d0e92f5e]{justify-content:center;width:100%}}@media (max-width:480px){.form-grid.compact[data-v-d0e92f5e]{grid-template-columns:1fr}.advance-toggle[data-v-d0e92f5e]{align-items:flex-start;gap:8px}.advance-selection-container.compact[data-v-d0e92f5e],.advance-toggle[data-v-d0e92f5e]{flex-direction:column}}@keyframes fadeIn-d0e92f5e{0%{opacity:0}to{opacity:1}}@keyframes slideIn-d0e92f5e{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}',""]),r.locals={},e.exports=r}}]);