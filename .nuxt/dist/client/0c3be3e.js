(window.webpackJsonp=window.webpackJsonp||[]).push([[233],{1288:function(e,t,n){var content=n(1598);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(15).default)("39105c71",content,!0,{sourceMap:!1})},1597:function(e,t,n){"use strict";n(1288)},1598:function(e,t,n){var r=n(14)((function(i){return i[1]}));r.push([e.i,".table-card[data-v-5c87d8da]{border-left:4px solid transparent;transition:all .3s ease}.table-card--available[data-v-5c87d8da]{border-left-color:#4caf50}.table-card--occupied[data-v-5c87d8da]{border-left-color:#f44336}.table-card--cleaning[data-v-5c87d8da]{border-left-color:#ff9800}.table-card--reserved[data-v-5c87d8da]{border-left-color:#2196f3}.table-card[data-v-5c87d8da]:hover{box-shadow:0 4px 12px rgba(0,0,0,.15)!important;transform:translateY(-2px)}",""]),r.locals={},e.exports=r},1856:function(e,t,n){"use strict";n.r(t);var r=n(799),l=n(321),c=n(318),o=n(19),d=n(322),v=n(797),m=n(792),f=n(771),_=n(317),O=n(798),x=n(168),y=n(311),h=n(198),w=n(29),k=n(323),D=n(310),T=n(251),j=n(796),C=n(1740),I=n(981),S=n(794),R=n(112),$=n(963),F=(n(34),n(130),n(35),n(3)),N=n(17),A=n(32),P=(n(85),n(9),n(5),n(38),n(52),n(68),n(39),n(75),n(250),n(10),n(7),n(12),n(8),n(13),n(4));function U(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function z(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?U(Object(source),!0).forEach((function(t){Object(F.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):U(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var J={__name:"index",setup:function(e){var t=Object(P.ref)([]),dialog=Object(P.ref)(!1),n=Object(P.ref)(!1),r=Object(P.ref)(!1),l=Object(P.ref)(!1),c=Object(P.ref)(!1),o=Object(P.ref)(!1),d=Object(P.ref)(!1),v=Object(P.ref)(""),m=Object(P.ref)(""),f=Object(P.ref)(""),_=Object(P.ref)({show:!1,message:"",color:"success",icon:"mdi-check-circle",timeout:4e3}),O=Object(P.ref)({name:"",number:"",capacity:4,status:"available",currentOrderId:null}),x=Object(P.ref)(null),y=Object(P.ref)(null),h=Object(P.ref)(null),w=Object(P.ref)(""),k=Object(P.ref)(""),D=Object(P.computed)((function(){var e=t.value;if(v.value){var n=v.value.toLowerCase();e=e.filter((function(table){return table.name&&table.name.toLowerCase().includes(n)||table.number.toString().includes(n)}))}if(m.value&&m.value&&(e=e.filter((function(table){return table.status===m.value}))),f.value){var r=f.value.split("-").map((function(e){return e.replace("+","")})),l=Object(A.a)(r,2),c=l[0],o=l[1];e=e.filter((function(table){return"9+"===f.value?table.capacity>=9:table.capacity>=parseInt(c)&&table.capacity<=parseInt(o||c)}))}return e.sort((function(a,b){return parseInt(a.number)-parseInt(b.number)}))})),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mdi-check-circle";_.value={show:!0,message:e,color:t,icon:n,timeout:4e3}},j=function(){var e=Object(N.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.value=!0,e.next=3,$nuxt.$axios.get("api/tables").then((function(e){console.log("=>tables: "+JSON.stringify(e.data));var n=e.data.data;t.value=n.map((function(e){return{id:e.id,name:e.name,number:e.number,capacity:e.capacity,status:e.status,timeOccupied:e.timeOccupied,currentOrderId:e.currentOrderId,createdAt:e.createdAt,updateTimestamp:e.updateTimestamp}}))})).catch((function(e){var n;console.log("error fetching tables: "+(null===(n=e.response)||void 0===n?void 0:n.data)),T("Failed to load tables. Using demo data.","warning","mdi-alert"),t.value=[{id:1,name:"VIP Table",number:"1",capacity:8,status:"occupied",timeOccupied:new Date("2025-06-23T12:00:00"),currentOrderId:123},{id:2,name:null,number:"2",capacity:4,status:"available",timeOccupied:null,currentOrderId:null},{id:3,name:"Corner Table",number:"3",capacity:2,status:"cleaning",timeOccupied:null,currentOrderId:null}]})).finally((function(){l.value=!1}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){dialog.value=!1,x.value=null},I=function(){var e=Object(N.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.value=!0,t=z(z({},O.value),{},{timeOccupied:"occupied"===O.value.status?new Date:null}),!x.value){e.next=7;break}return e.next=5,$nuxt.$axios.put("/api/tables/".concat(x.value.id),t).then((function(e){console.log("=>table updated: "+JSON.stringify(e.data)),j(),C()})).catch((function(e){var t;console.log("error updating table: "+(null===(t=e.response)||void 0===t?void 0:t.data))})).finally((function(){c.value=!1}));case 5:e.next=9;break;case 7:return e.next=9,$nuxt.$axios.post("/api/tables",t).then((function(e){console.log("=>table created: "+JSON.stringify(e.data)),j(),C()})).catch((function(e){var t;console.log("error creating table: "+(null===(t=e.response)||void 0===t?void 0:t.data))})).finally((function(){c.value=!1}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(N.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={status:w.value,timeOccupied:"occupied"===w.value?new Date:null,currentOrderId:"occupied"===w.value?k.value:null},e.next=3,$nuxt.$axios.patch("tables/".concat(h.value.id),t).then((function(e){console.log("=>table status updated: "+JSON.stringify(e.data)),j(),n.value=!1})).catch((function(e){var t;console.log("error updating table status: "+(null===(t=e.response)||void 0===t?void 0:t.data))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(N.a)(regeneratorRuntime.mark((function e(table){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(table.id,"occupied");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(N.a)(regeneratorRuntime.mark((function e(table){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(table.id,"cleaning");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(N.a)(regeneratorRuntime.mark((function e(table){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(table.id,"available");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(N.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={status:n,timeOccupied:"occupied"===n?new Date:null,currentOrderId:null},e.next=3,$nuxt.$axios.patch("tables/".concat(t),r).then((function(e){console.log("=>table status updated quickly: "+JSON.stringify(e.data)),j()})).catch((function(e){var t;console.log("error updating table status quickly: "+(null===(t=e.response)||void 0===t?void 0:t.data))}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(N.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.value=!0,e.next=3,$nuxt.$axios.delete("tables/".concat(y.value.id)).then((function(e){console.log("=>table deleted: "+JSON.stringify(e.data)),j(),r.value=!1,y.value=null})).catch((function(e){var t;console.log("error deleting table: "+(null===(t=e.response)||void 0===t?void 0:t.data))})).finally((function(){o.value=!1}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(P.onMounted)((function(){j()})),{__sfc:!0,tables:t,dialog:dialog,statusDialog:n,deleteDialog:r,loading:l,saving:c,deleting:o,formValid:d,search:v,statusFilter:m,capacityFilter:f,snackbar:_,formData:O,editingTable:x,tableToDelete:y,tableToUpdate:h,newStatus:w,newOrderId:k,numberRules:[function(e){return!!e||"Table number is required"},function(e){return/^\d+$/.test(e)||"Table number must be numeric"}],statusItems:[{title:"Available",value:"available"},{title:"Occupied",value:"occupied"},{title:"Cleaning",value:"cleaning"},{title:"Reserved",value:"reserved"}],statusOptions:[{title:"Available",value:"available"},{title:"Occupied",value:"occupied"},{title:"Cleaning",value:"cleaning"},{title:"Reserved",value:"reserved"}],capacityOptions:[{title:"1-2 people",value:"1-2"},{title:"3-4 people",value:"3-4"},{title:"5-8 people",value:"5-8"},{title:"9+ people",value:"9+"}],filteredTables:D,showMessage:T,fetchTables:j,refreshTables:function(){j()},openDialog:function(){var table=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;table?(x.value=table,O.value={name:table.name||"",number:table.number,capacity:table.capacity,status:table.status,currentOrderId:table.currentOrderId}):(x.value=null,O.value={name:"",number:"",capacity:4,status:"available",currentOrderId:null}),dialog.value=!0},closeDialog:C,saveTable:I,updateTableStatus:function(table){h.value=table,w.value=table.status,k.value=table.currentOrderId||"",n.value=!0},confirmStatusUpdate:S,occupyTable:R,freeTable:$,markAvailable:F,updateTableStatusQuick:U,confirmDelete:function(table){y.value=table,r.value=!0},deleteTable:J,getStatusColor:function(e){return{available:"success",occupied:"error",cleaning:"warning",reserved:"info"}[e]||"grey"},getTableCardClass:function(e){return"table-card--".concat(e)},formatTime:function(e){return e?new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(e)):""}}}},M=J,E=(n(1597),n(31)),component=Object(E.a)(M,(function(){var e,t,n=this,F=n._self._c,N=n._self._setupProxy;return F(m.a,{attrs:{fluid:""}},[F(j.a,[F(v.a,{attrs:{cols:"12"}},[F("div",{staticClass:"d-flex justify-space-between align-center mb-4"},[F("div",[F("h1",{staticClass:"text-h4 font-weight-bold"},[n._v("Table Management")]),n._v(" "),F("p",{staticClass:"text-subtitle-1 text-medium-emphasis"},[n._v("\n            Manage restaurant tables and their status\n          ")])]),n._v(" "),F(l.a,{attrs:{color:"primary","prepend-icon":"mdi-plus"},on:{click:function(e){return N.openDialog()}}},[n._v("\n          Add New Table\n        ")])],1)])],1),n._v(" "),F(j.a,{staticClass:"mb-4"},[F(v.a,{attrs:{cols:"12",md:"4"}},[F(R.a,{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search tables...",variant:"outlined",density:"compact",clearable:""},model:{value:N.search,callback:function(e){N.search=e},expression:"search"}})],1),n._v(" "),F(v.a,{attrs:{cols:"12",md:"3"}},[F(r.a,{attrs:{items:N.statusOptions,"item-text":"title","item-value":"value",label:"Filter by Status",variant:"outlined","prepend-inner-icon":"mdi-table-chair"},model:{value:N.statusFilter,callback:function(e){N.statusFilter=e},expression:"statusFilter"}})],1),n._v(" "),F(v.a,{attrs:{cols:"12",md:"3"}},[F(r.a,{attrs:{items:N.capacityOptions,"item-text":"title","item-value":"value",label:"Filter by Capacity",variant:"outlined","prepend-inner-icon":"mdi-table-chair"},model:{value:N.capacityFilter,callback:function(e){N.capacityFilter=e},expression:"capacityFilter"}})],1),n._v(" "),F(v.a,{attrs:{cols:"12",md:"2"}},[F(l.a,{attrs:{variant:"outlined",loading:N.loading,block:""},on:{click:N.refreshTables}},[F(x.a,[n._v("mdi-refresh")]),n._v("\n        Refresh\n      ")],1)],1)],1),n._v(" "),F(j.a,n._l(N.filteredTables,(function(table){return F(v.a,{key:table.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[F(c.a,{staticClass:"table-card",class:N.getTableCardClass(table.status),attrs:{elevation:"2",hover:""}},[F(o.d,{staticClass:"d-flex justify-space-between align-center"},[F("div",[F("h3",[n._v(n._s(table.name||"Table ".concat(table.number)))]),n._v(" "),F(d.a,{attrs:{color:N.getStatusColor(table.status),size:"small",variant:"flat"}},[n._v("\n              "+n._s(table.status.toUpperCase())+"\n            ")])],1),n._v(" "),F("div",{staticClass:"d-flex"},[F(l.a,{staticClass:"mr-1",attrs:{icon:"",variant:"text",size:"small",color:"primary"},on:{click:function(e){return N.openDialog(table)}}},[F(x.a,[n._v("mdi-pencil")]),n._v(" "),F($.a,{attrs:{activator:"parent",location:"top"}},[n._v("\n                Edit Table Details\n              ")])],1),n._v(" "),F(k.a,{scopedSlots:n._u([{key:"activator",fn:function(e){var t=e.props;return[F(l.a,n._b({attrs:{icon:"",variant:"text",size:"small"}},"v-btn",t,!1),[F(x.a,[n._v("mdi-dots-vertical")])],1)]}}],null,!0)},[n._v(" "),F(y.a,[F(h.a,{on:{click:function(e){return N.updateTableStatus(table)}}},[F(w.c,[F(x.a,{attrs:{start:""}},[n._v("mdi-update")]),n._v("\n                    Update Status Only\n                  ")],1)],1),n._v(" "),F(_.a),n._v(" "),F(h.a,{staticClass:"text-error",on:{click:function(e){return N.confirmDelete(table)}}},[F(w.c,[F(x.a,{attrs:{start:""}},[n._v("mdi-delete")]),n._v("\n                    Delete Table\n                  ")],1)],1)],1)],1)],1)]),n._v(" "),F(o.c,[F("div",{staticClass:"d-flex align-center mb-2"},[F(x.a,{attrs:{start:"",color:"primary"}},[n._v("mdi-account-group")]),n._v(" "),F("span",[n._v("Capacity: "+n._s(table.capacity)+" people")])],1),n._v(" "),F("div",{staticClass:"d-flex align-center mb-2"},[F(x.a,{attrs:{start:"",color:"primary"}},[n._v("mdi-tag")]),n._v(" "),F("span",[n._v("Number: "+n._s(table.number))])],1),n._v(" "),table.timeOccupied?F("div",{staticClass:"d-flex align-center mb-2"},[F(x.a,{attrs:{start:"",color:"warning"}},[n._v("mdi-clock")]),n._v(" "),F("span",[n._v("Since: "+n._s(N.formatTime(table.timeOccupied)))])],1):n._e(),n._v(" "),table.currentOrderId?F("div",{staticClass:"d-flex align-center"},[F(x.a,{attrs:{start:"",color:"success"}},[n._v("mdi-receipt")]),n._v(" "),F("span",[n._v("Order #"+n._s(table.currentOrderId))])],1):n._e()]),n._v(" "),F(o.a,{staticClass:"justify-space-between"},[F("div",["available"===table.status?F(l.a,{attrs:{color:"success",variant:"text",size:"small"},on:{click:function(e){return N.occupyTable(table)}}},[n._v("\n              Mark Occupied\n            ")]):n._e(),n._v(" "),"occupied"===table.status?F(l.a,{attrs:{color:"warning",variant:"text",size:"small"},on:{click:function(e){return N.freeTable(table)}}},[n._v("\n              Free Table\n            ")]):n._e(),n._v(" "),"cleaning"===table.status?F(l.a,{attrs:{color:"primary",variant:"text",size:"small"},on:{click:function(e){return N.markAvailable(table)}}},[n._v("\n              Mark Available\n            ")]):n._e()],1),n._v(" "),F(l.a,{attrs:{color:"primary",variant:"outlined",size:"small","prepend-icon":"mdi-pencil"},on:{click:function(e){return N.openDialog(table)}}},[n._v("\n            Edit\n          ")])],1)],1)],1)})),1),n._v(" "),F(f.a,{attrs:{"max-width":"600px",persistent:""},model:{value:N.dialog,callback:function(e){N.dialog=e},expression:"dialog"}},[F(c.a,[F(o.d,{staticClass:"d-flex align-center"},[F(x.a,{staticClass:"mr-3",attrs:{color:N.editingTable?"warning":"success"}},[n._v("\n          "+n._s(N.editingTable?"mdi-pencil":"mdi-plus")+"\n        ")]),n._v(" "),F("div",[F("span",{staticClass:"text-h5"},[n._v("\n            "+n._s(N.editingTable?"Edit Table":"Add New Table")+"\n          ")]),n._v(" "),N.editingTable?F("div",{staticClass:"text-caption text-medium-emphasis"},[n._v("\n            Editing Table #"+n._s(N.editingTable.number)+"\n          ")]):n._e()])],1),n._v(" "),F(o.c,[F(O.a,{ref:"form",model:{value:N.formValid,callback:function(e){N.formValid=e},expression:"formValid"}},[F(j.a,[F(v.a,{attrs:{cols:"12",md:"6"}},[F(R.a,{attrs:{label:"Table Name (Optional)",variant:"outlined","prepend-inner-icon":"mdi-table-furniture"},model:{value:N.formData.name,callback:function(e){n.$set(N.formData,"name",e)},expression:"formData.name"}})],1),n._v(" "),F(v.a,{attrs:{cols:"12",md:"6"}},[F(R.a,{attrs:{label:"Table Number",variant:"outlined","prepend-inner-icon":"mdi-numeric",rules:N.numberRules,required:""},model:{value:N.formData.number,callback:function(e){n.$set(N.formData,"number",e)},expression:"formData.number"}})],1),n._v(" "),F(v.a,{attrs:{cols:"12",md:"6"}},[F(C.a,{attrs:{label:"Capacity",min:1,max:20,step:1,"thumb-label":"always","prepend-icon":"mdi-account-group"},model:{value:N.formData.capacity,callback:function(e){n.$set(N.formData,"capacity",e)},expression:"formData.capacity"}})],1),n._v(" "),F(v.a,{attrs:{cols:"12",md:"6"}},[F(r.a,{attrs:{items:N.statusItems,"item-text":"title","item-value":"value",label:"Status",variant:"outlined","prepend-inner-icon":"mdi-table-chair"},model:{value:N.formData.status,callback:function(e){n.$set(N.formData,"status",e)},expression:"formData.status"}})],1),n._v(" "),"occupied"===N.formData.status?F(v.a,{attrs:{cols:"12"}},[F(R.a,{attrs:{label:"Current Order ID (Optional)",variant:"outlined",type:"number","prepend-inner-icon":"mdi-receipt"},model:{value:N.formData.currentOrderId,callback:function(e){n.$set(N.formData,"currentOrderId",e)},expression:"formData.currentOrderId"}})],1):n._e()],1)],1)],1),n._v(" "),F(o.a,[F(S.a),n._v(" "),F(l.a,{attrs:{color:"grey-darken-1",variant:"text"},on:{click:N.closeDialog}},[n._v("\n          Cancel\n        ")]),n._v(" "),F(l.a,{attrs:{color:"primary",variant:"flat",loading:N.saving,disabled:!N.formValid},on:{click:N.saveTable}},[n._v("\n          "+n._s(N.editingTable?"Update":"Create")+"\n        ")])],1)],1)],1),n._v(" "),F(f.a,{attrs:{"max-width":"400px"},model:{value:N.statusDialog,callback:function(e){N.statusDialog=e},expression:"statusDialog"}},[F(c.a,[F(o.d,[n._v("Update Table Status")]),n._v(" "),F(o.c,[F(r.a,{attrs:{items:N.statusItems,"item-text":"title","item-value":"value",label:"New Status",variant:"outlined"},model:{value:N.newStatus,callback:function(e){N.newStatus=e},expression:"newStatus"}}),n._v(" "),"occupied"===N.newStatus?F(R.a,{attrs:{label:"Order ID (Optional)",variant:"outlined",type:"number"},model:{value:N.newOrderId,callback:function(e){N.newOrderId=e},expression:"newOrderId"}}):n._e()],1),n._v(" "),F(o.a,[F(S.a),n._v(" "),F(l.a,{attrs:{variant:"text",disabled:N.loading},on:{click:function(e){N.statusDialog=!1}}},[n._v("Cancel")]),n._v(" "),F(l.a,{attrs:{color:"primary",loading:N.loading},on:{click:N.confirmStatusUpdate}},[n._v("\n          Update\n        ")])],1)],1)],1),n._v(" "),F(f.a,{attrs:{"max-width":"400px"},model:{value:N.deleteDialog,callback:function(e){N.deleteDialog=e},expression:"deleteDialog"}},[F(c.a,[F(o.d,{staticClass:"text-error"},[n._v("Confirm Deletion")]),n._v(" "),F(o.c,[n._v('\n        Are you sure you want to delete "'+n._s((null===(e=N.tableToDelete)||void 0===e?void 0:e.name)||"Table ".concat(null===(t=N.tableToDelete)||void 0===t?void 0:t.number))+'"? This action cannot be undone.\n      ')]),n._v(" "),F(o.a,[F(S.a),n._v(" "),F(l.a,{attrs:{variant:"text"},on:{click:function(e){N.deleteDialog=!1}}},[n._v("Cancel")]),n._v(" "),F(l.a,{attrs:{color:"error",loading:N.deleting},on:{click:N.deleteTable}},[n._v("Delete")])],1)],1)],1),n._v(" "),F(D.a,{staticClass:"align-center justify-center",model:{value:N.loading,callback:function(e){N.loading=e},expression:"loading"}},[F(T.a,{attrs:{color:"primary",indeterminate:"",size:"64"}})],1),n._v(" "),F(I.a,{attrs:{color:N.snackbar.color,timeout:N.snackbar.timeout,location:"top right",variant:"elevated"},scopedSlots:n._u([{key:"actions",fn:function(){return[F(l.a,{attrs:{color:"white",variant:"text"},on:{click:function(e){N.snackbar.show=!1}}},[n._v("\n        Close\n      ")])]},proxy:!0}]),model:{value:N.snackbar.show,callback:function(e){n.$set(N.snackbar,"show",e)},expression:"snackbar.show"}},[F("div",{staticClass:"d-flex align-center"},[F(x.a,{staticClass:"mr-2"},[n._v(n._s(N.snackbar.icon))]),n._v("\n      "+n._s(N.snackbar.message)+"\n    ")],1)])],1)}),[],!1,null,"5c87d8da",null);t.default=component.exports}}]);