(window.webpackJsonp=window.webpackJsonp||[]).push([[225,158],{1781:function(t,e,n){"use strict";n.r(e);var r=n(317),o=n(314),c=n(18),l=n(318),d=n(786),f=n(795),m=n(1723),h=n(760),v=n(313),y=n(167),k=n(776),D=n(319),w=n(785),x=n(783),O=n(113),C=(n(35),n(131),n(34),n(66),n(5),n(451),n(10),n(7),n(11),n(8),n(12),n(31)),S=n(20),_=n(3),I=(n(92),n(9),n(53),n(30),n(62),n(75),n(333),n(890)),E=n(891),T=n(40),R=n(36);function j(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function F(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(e){Object(_.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L={components:{OrderForm:I.default,OrderStatusForm:E.default},data:function(){return{timer:null,barcode:"",statusFormDialog:!1,whatsappContactLink:"",guidelineDialog:!1,componentKey:1,orderStatusComponentKey:1,watchingLink:"OEGkC4zNgpY",selectedRiderId:"",formDialog:!1,entries:[],search:"",entrySelectedId:0,isCreate:!1,isloading:!1,dialogKey:1,headers:[{text:"‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫™‡∫±‡ªà‡∫á",align:"left",value:"bookingDate",sortable:!0},{text:"‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫Æ‡∫±‡∫ö‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á",align:"left",value:"updateTimestamp",sortable:!0},{text:"‡∫ä‡∫∑‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤",align:"left",value:"client.name",sortable:!0},{text:"‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤",align:"left",value:"name",sortable:!0},{text:"Tracking",align:"center",value:"trackingNumber"},{text:"Link",align:"center",value:"link"},{text:"‡ªÅ‡∫à‡ªâ‡∫á‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤",align:"end",value:"notify",sortable:!1},{text:"‡∫ù‡∫≤‡∫Å‡∫Ç‡∫ª‡∫ô‡∫™‡∫ª‡ªà‡∫á",align:"center",value:"delivery",sortable:!1},{text:"‡∫Æ‡∫±‡∫ö‡∫ä‡∫≥‡∫•‡∫∞",align:"center",value:"function",sortable:!1},{text:"‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç",align:"end",value:"edit",sortable:!1},{text:"‡∫™‡∫∞‡∫ñ‡∫≤‡∫ô‡∫∞",align:"end",value:"status",sortable:!1}],menu1:!1,menu2:!1,date:Object(R.d)(),date2:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateFormatted:this.formatDate(Object(R.d)()),dateFormatted2:this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10))}},mounted:function(){this.loadData(),window.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown)},computed:F(F({localStatus:function(){return[{name:"‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫≤‡∫á",code:"ORDERED"},{name:"‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫≤‡∫á",code:"RECEIVED"},{name:"‡∫Æ‡∫±‡∫ö‡ªÅ‡∫•‡ªâ‡∫ß",code:"INVOICED"}]},filterOrders:function(){return this.entries.filter((function(t){return"RECEIVED"==t.status}))},user:function(){return this.$auth.user||""},currentTerminal:function(){var t=this;return this.findAllTerminal.find((function(e){return e.id==t.findSelectedTerminal}))}},Object(T.c)(["findAllProduct","findAllClient","findAllPayment","findAllUnit","findAllCurrency","findAllTerminal","findSelectedTerminal"])),{},{orderTemplate:function(){var t=(new Date).toISOString().substr(0,10),e=this.currentTerminal.locationId;return orderTemp={id:null,bookingDate:t,name:"",note:"",trackingNumber:"",link:"",price:0,priceRate:1,shippingFee:0,shippingRate:1,status:"RECEIVED",isActive:!0,riderId:null,locationId:e,userId:this.user.id,currencyId:1,shippingFeeCurrencyId:1,vendorId:null,paymentId:1,client:{id:61,name:"‡ªÅ‡∫ö‡ªâ"}},orderTemp}}),watch:{formDialog:function(t){console.log("STATUS FORM TRIGGER ".concat(t)),t?(console.log("STATUS EQ TRUE TRIGGER ".concat(t)),window.removeEventListener("keydown",this.handleKeyDown)):(console.log("STATUS EQ FALSE TRIGGER ".concat(t)),window.addEventListener("keydown",this.handleKeyDown))},date:function(t){this.dateFormatted=this.formatDate(this.date),this.loadData()},date2:function(t){this.dateFormatted2=this.formatDate(this.date2),this.loadData()}},methods:F(F({addShipping:function(t){},findReceivingDate:function(t){var e=t.updateTimestamp.split("T")[0],n=null;return t.histories.length>0&&null!=(n=t.histories.find((function(t){return"RECEIVED"==t.status})))&&(console.log("ORDER STATUS: ".concat(n.status," ORDER RECEIVING DATE ").concat(n.updateTimestamp)),e=n.updateTimestamp.split("T")[0]),e}},Object(T.b)(["addOrderToConformPaymentList","setSelectedTerminal","setSelectedLocation"])),{},{handleKeyDown:function(t){var e=this;if(console.log("BACORD SCANING...."),this.timer&&clearInterval(this.timer),"Enter"==t.key)return this.barcode&&(console.log("BACORD SCAN RESULT: ".concat(this.barcode)),this.findOrderByTrackingNumber(this.barcode.toUpperCase())),void(this.barcode="");"Shift"!=t.key&&(this.barcode+=t.key),this.timer=setInterval((function(){return e.barcode=""}),20)},findOrderByTrackingNumber:function(t){if(!/^[A-Za-z0-9]*$/.test(t))return Object(R.j)(this.$swal,"Error","‡∫•‡∫∞‡∫ö‡∫ª‡∫ö‡∫ö‡ªç‡ªà‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡ªÉ‡∫à‡∫û‡∫≤‡∫™‡∫≤‡∫•‡∫≤‡∫ß ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫õ‡ªà‡∫á‡∫ô‡∫û‡∫≤‡∫™‡∫≤ ‡ªÄ‡∫õ‡∫±‡∫ô‡∫û‡∫≤‡∫™‡∫≤‡∫≠‡∫±‡∫á‡∫Å‡∫¥‡∫î ‡∫Å‡ªà‡∫≠‡∫ô‡∫™‡∫∞‡ªÅ‡∫Å‡∫ô");var e=this.entries.find((function(e){return e.trackingNumber.toUpperCase()==t.toUpperCase()}));if(null==e)return Object(R.j)(this.$swal,"Error","Tracking number ".concat(t.toUpperCase()," ‡∫ö‡ªç‡ªà‡∫û‡∫ª‡∫ö‡ªÉ‡∫ô‡∫•‡∫∞‡∫ö‡∫ª‡∫ö"));this.orderStatusComponentKey+=1,this.entrySelectedId=e.id,this.statusFormDialog=!0,this.isCreate=!1,this.addOrderToConformPaymentList(e)},findOrderById:function(t){var e=this.entries.find((function(e){return e.id==t}));null!=e&&(this.orderStatusComponentKey+=1,this.entrySelectedId=e.id,this.statusFormDialog=!0,this.isCreate=!1,this.addOrderToConformPaymentList(e))},changeOrderStatusDirect:function(t,e){var n=this;return Object(S.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.isloading=!0,r.prev=1,r.next=4,n.$axios.put("api/order/changeStatus/".concat(e),{status:t});case 4:r.sent,Object(R.k)(n.$swal,"Succeed","Your transaction completed"),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("Cannot change order status with error ".concat(r.t0)),Object(R.j)(n.$swal,"Error","‡ªÄ‡∫Å‡∫µ‡∫î‡∫Ç‡ªç‡ªâ‡∫ú‡∫¥‡∫î‡∫û‡∫≤‡∫î ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫•‡∫≠‡∫á‡ªÉ‡∫´‡∫°‡ªà ‡∫û‡∫≤‡∫ç‡∫´‡∫•‡∫±‡∫á ".concat(r.t0));case 12:n.isloading=!1;case 13:case"end":return r.stop()}}),r,null,[[1,8]])})))()},exportToExcel:function(){var t=this.$xlsx.utils.json_to_sheet(this.entries),e=this.$xlsx.utils.book_new();this.$xlsx.utils.book_append_sheet(e,t,"Sheet1"),this.$xlsx.writeFile(e,"data.xlsx")},formatDate:function(t){if(!t)return null;var e=t.split("-"),n=Object(C.a)(e,3),r=n[0],o=n[1],c=n[2];return"".concat(o,"/").concat(c,"/").concat(r)},countDay:function(t){return Object(R.b)(t)},viewItem:function(t){this.updateViewCount(t.id),this.watchingLink=t.youtubeLink,this.dialogKey+=1,this.guidelineDialog=!0},createRecord:function(){this.componentKey+=1,this.entrySelectedId=0,this.isCreate=!0,this.formDialog=!0},notfoundScanning:function(){null!=order&&(this.orderStatusComponentKey+=1,this.entrySelectedId=order.id,this.statusFormDialog=!0,this.isCreate=!1,this.addOrderToConformPaymentList(order))},handleEvent:function(){this.formDialog=!1},editItem:function(t){this.componentKey+=1,this.entrySelectedId=t.id,this.formDialog=!0,this.isCreate=!1},changeOrderStatus:function(t){this.orderStatusComponentKey+=1,this.entrySelectedId=t.id,this.statusFormDialog=!0,this.isCreate=!1},whatsappLink:function(t){console.log("******** customer tel ".concat(t," *******"));var e=t.client.telephone.trim(),n=e.substring(e.length-8);this.whatsappContactLink="https://api.whatsapp.com/send?phone=+85620".concat(n,"&text=").concat(encodeURIComponent("‡∫™‡∫∞‡∫ö‡∫≤‡∫ç‡∫î‡∫µ ‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤ ".concat(t.client.name," \n ‡∫≠‡ªç‡ªÄ‡∫î‡∫µ üõí : ").concat(t.trackingNumber," \n ‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤: ").concat(t.name," \n ‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫™‡∫±‡ªà‡∫á: ").concat(t.bookingDate," \n ‡∫•‡∫¥‡ªâ‡∫á: ").concat(t.link," \n üîîüîîüîî ‡ªÄ‡∫Ñ‡∫∂‡ªà‡∫≠‡∫á‡∫°‡∫≤‡∫Æ‡∫≠‡∫î‡∫™‡∫≤‡∫á‡ªÅ‡∫•‡ªâ‡∫ß üîîüîîüîî")))},parseDate:function(t){if(!t)return null;var e=t.split("/"),n=Object(C.a)(e,3),r=n[0],o=n[1],c=n[2];return"".concat(c,"-").concat(r.padStart(2,"0"),"-").concat(o.padStart(2,"0"))},loadData:function(){var t=this;return Object(S.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formDialog=!1,n={startDate:t.date,endDate:t.date2,userId:t.userId},t.isloading=!0,e.next=5,t.$axios.get("api/order/findAllByDate",{params:{date:n}}).then((function(e){t.entries=e.data})).catch((function(t){console.log("Error ",t)}));case 5:t.isloading=!1;case 6:case"end":return e.stop()}}),e)})))()}})},A=n(32),component=Object(A.a)(L,(function(){var t=this,e=t._self._c;return e("div",[e(h.a,{attrs:{"max-width":"1024"},model:{value:t.formDialog,callback:function(e){t.formDialog=e},expression:"formDialog"}},[e("order-form",{key:t.componentKey,attrs:{"is-create":t.isCreate,"record-id":t.entrySelectedId},on:{"close-dialog":t.handleEvent,"reload-data":t.loadData}})],1),t._v(" "),e(h.a,{attrs:{"max-width":"‡∫±auto"},model:{value:t.statusFormDialog,callback:function(e){t.statusFormDialog=e},expression:"statusFormDialog"}},[e("order-status-form",{key:t.orderStatusComponentKey,attrs:{"is-create":t.isCreate,"record-id":t.entrySelectedId,"order-status":"INVOICED"},on:{"close-dialog":function(e){t.statusFormDialog=!1},"reload-data":t.loadData}})],1),t._v(" "),e(h.a,{key:t.dialogKey,attrs:{"hide-overlay":"","max-width":"700"},model:{value:t.guidelineDialog,callback:function(e){t.guidelineDialog=e},expression:"guidelineDialog"}},[e("youtube-player",{attrs:{"youtube-link":t.watchingLink},on:{"close-dialog":function(e){t.guidelineDialog=!1}}})],1),t._v(" "),e(l.a,{staticClass:"pa-5",attrs:{color:"primary",label:"","text-color":"white"}},[e(y.a,{attrs:{start:""}},[t._v("mdi mdi-lifebuoy")]),t._v(" "),e("h3",[t._v("‡∫™‡∫≤‡∫ó‡∫¥‡∫î‡∫Å‡∫≤‡∫ô‡∫ô‡∫≥‡ªÉ‡∫ä‡ªâ‡∫•‡∫∞‡∫ö‡∫ª‡∫ö")])],1),t._v(" "),e(h.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(o.a,[e(c.d,[e(k.a,{attrs:{row:"",wrap:""}},[e(d.a,{attrs:{cols:"6"}},[e(D.a,{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(O.a,t._g(t._b({attrs:{label:"‡∫à‡∫≤‡∫Å‡∫ß‡∫±‡∫ô‡∫ó‡∫µ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),e(D.a,{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(O.a,t._g(t._b({attrs:{label:"‡∫´‡∫≤‡∫ß‡∫±‡∫ô‡∫ó‡∫µ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date2=t.parseDate(t.dateFormatted2)}},model:{value:t.dateFormatted2,callback:function(e){t.dateFormatted2=e},expression:"dateFormatted2"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(O.a,{attrs:{"append-icon":"mdi-magnify",label:"‡∫ä‡∫≠‡∫Å‡∫´‡∫≤","single-line":"","hide-detailsx":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),e(w.a,[e(d.a,{attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.createRecord}},[e("span",{staticClass:"mdi mdi-plus"}),t._v("Create\n              ")])],1),t._v(" "),e(x.a),t._v(" "),e(d.a,{staticClass:"text-right",attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.loadData}},[e("span",{staticClass:"mdi mdi-cloud-download"}),t._v("\n                ‡∫î‡∫∂‡∫á‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô\n              ")])],1)],1)],1),t._v(" "),e(d.a,{staticClass:"text-center",attrs:{cols:"4"}},[e(O.a,{attrs:{disabled:""},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticStyle:{color:"black","font-weight":"bolder"}},[t._v(t._s("‡∫≠‡ªç‡ªÄ‡∫î‡∫µ‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î: ".concat(t.filterOrders.length," ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô")))])]},proxy:!0}])})],1)],1)],1),t._v(" "),e(v.a),t._v(" "),e(c.c),t._v(" "),e(f.a,{attrs:{headers:t.headers,search:t.search,items:t.filterOrders},scopedSlots:t._u([{key:"item.bookingDate",fn:function(n){var r=n.item;return[t._v("\n        "+t._s(r.bookingDate)+"\n        "),t._v(" "),e("h6",{style:{color:t.countDay(r.bookingDate)>30?"red":"green"}},[t._v("\n          "+t._s(t.countDay(r.bookingDate))+"\n        ")])]}},{key:"item.updateTimestamp",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(t.findReceivingDate(n))+"\n      ")]}},{key:"item.edit",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){t.editItem(o),t.isedit=!0}}},[e("i",{staticClass:"fa-regular fa-pen-to-square"})])]}},{key:"item.status",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""}},[t._v("\n          "+t._s(t.localStatus.find((function(t){return t.code==o.status})).name)+"\n        ")])]}},{key:"item.delivery",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){t.findOrderByTrackingNumber(o.trackingNumber),t.isedit=!0}}},[e("i",{staticClass:"fa fa-truck-fast"})])]}},{key:"item.function",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){t.findOrderById(o.id),t.isedit=!0}}},[e("i",{staticClass:"fa fa-wallet"})])]}},{key:"item.notify",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.whatsappLink(o)}}},[e("a",{attrs:{href:t.whatsappContactLink,target:"_blank"}},[e("span",{staticClass:"mdi mdi-whatsapp"})])]),t._v("\n        "+t._s(o.client.telephone)+"\n      ")]}},{key:"item.link",fn:function(t){var n=t.item;return[e("a",{attrs:{href:n.link,target:"_blank"}},[e("i",{staticClass:"fa-solid fa-link"})])]}}],null,!0)})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{OrderForm:n(890).default,OrderStatusForm:n(891).default,YoutubePlayer:n(808).default,LoadingIndicator:n(248).default})},808:function(t,e,n){"use strict";n.r(e);var r=n(317),o=n(314),c=n(18),l=n(783),d=(n(36),{props:{youtubeLink:{type:String,require:!0}}}),f=n(32),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(o.a,[e(c.c,{staticClass:"text-center"},[e("youtube",{attrs:{"video-id":t.youtubeLink}})],1),t._v(" "),e(c.a,[e(l.a),t._v(" "),e(r.a,{staticClass:"warning",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:function(e){return t.$emit("close-dialog")}}},[t._v("\n                Close\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);