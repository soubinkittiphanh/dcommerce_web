(window.webpackJsonp=window.webpackJsonp||[]).push([[52,146],{1322:function(e,t,r){"use strict";r.r(t);var n=r(788),o=r(317),c=r(314),d=r(18),l=r(318),m=r(786),f=r(781),h=r(760),v=r(167),y=r(785),x=r(783),k=r(113),w=(r(10),r(7),r(9),r(11),r(12),r(20)),O=r(3),A=(r(92),r(22),r(66),r(5),r(8),r(844)),I=r(40),_=r(337);function $(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(t){Object(O.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var D={props:{receiveHeaderId:{type:Number,default:""},isEdit:{type:Boolean,default:!1}},directives:{commaThousand:A.a},data:function(){return{account:[],drAccount:"",crAccount:"",amount:"",isloading:!1,bookingDate:"",paymentDescription:"",postingReference:"",paymentType:["Cash","Check","Credit Card","Bank transfer"],paymentList:[],form:{header:{bookingDate:"",receiveNumber:"DEFAULT",payee:"ຮ້ານຄ້າທົ່ວໄປ",paymentId:1,currencyId:1,rate:1,totalAmount:"1,000",notes:"",update_user:1,drAccountId:1,crAccountId:13,isActive:!0},line:{}}}},mounted:function(){this.loadAccount(),this.loadPayment();var e=(new Date).toISOString().substr(0,10);this.bookingDate=e,this.form.header.bookingDate=e,this.form.header.currencyId=this.currencyList[0].id,this.isEdit&&(console.log("Load payment header"),this.loadReceiveById())},computed:j(j({},Object(I.c)(["findAllProduct","findAllClient","findAllPayment","findAllUnit","findAllCurrency","findAllTerminal","findSelectedTerminal"])),{},{today:function(){var e=(new Date).toLocaleDateString();return console.log(e),e},currencyList:function(){return this.findAllCurrency}}),methods:{currencyChange:function(){var e=this,t=this.currencyList.find((function(t){return t.id==e.form.header.currencyId}));t&&(this.form.header.rate=t.rate)},loadPayment:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isloading=!0,e.paymentList=[],t.next=4,e.$axios.get("/api/paymentMethod/find").then((function(t){e.paymentList=t.data,e.form.header.paymentId=e.paymentList[0].id})).catch((function(t){Object(_.b)(e.$swal,"Error",t)}));case 4:e.isloading=!1;case 5:case"end":return t.stop()}}),t)})))()},loadAccount:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isloading=!0,t.next=3,e.$axios.get("/api/account/find");case 3:t.sent.data.forEach((function(element){e.account.push({id:element.id,desc:element.accountName+" - "+element.accountNumber})})),e.isloading=!1;case 6:case"end":return t.stop()}}),t)})))()},loadReceiveById:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isloading=!0,t.next=3,e.$axios.get("/api/finanicial/ar/header/find/".concat(e.receiveHeaderId)).then((function(t){e.form.header=t.data,e.form.header.bookingDate=t.data.bookingDate.split("T")[0],e.form.header.totalAmount=e.getFormatNum(e.form.header.totalAmount)})).catch((function(t){Object(_.b)(e.$swal,"Error",t.response.data)}));case 3:case"end":return t.stop()}}),t)})))()},getFormatNum:function(e){return(new Intl.NumberFormat).format(e)},submitData:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isloading){t.next=2;break}return t.abrupt("return");case 2:if(e.isloading=!0,!e.isEdit){t.next=8;break}return t.next=6,e.$axios.put("/api/finanicial/ar/header/update/".concat(e.receiveHeaderId),e.form.header).then((function(t){Object(_.c)(e.$swal,"Succeed","ດຳເນີນການສຳເລັດ"),e.$emit("reload"),e.$emit("close-dialog")})).catch((function(t){Object(_.b)(e.$swal,"Error",t.response.data)}));case 6:t.next=10;break;case 8:return t.next=10,e.$axios.post("/api/finanicial/ar/header/create",e.form.header).then((function(t){Object(_.c)(e.$swal,"Succeed","ດຳເນີນການສຳເລັດ"),e.$emit("reload"),e.$emit("close-dialog")})).catch((function(t){Object(_.b)(e.$swal,"Error",t.response.data.errors[0].msg)}));case 10:e.isloading=!1;case 11:case"end":return t.stop()}}),t)})))()}}},C=r(32),component=Object(C.a)(D,(function(){var e=this,t=e._self._c;return t(y.a,{attrs:{justify:"center"},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.props;return[t(o.a,e._b({attrs:{color:"primary"}},"v-btn",n,!1),[e._v("\n            Open Dialog\n        ")])]}}])},[e._v(" "),t(h.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[t("loading-indicator")],1),e._v(" "),t(c.a,{staticClass:"pa-4"},[t(d.d,[t(l.a,{staticClass:"ma-0",attrs:{color:"primary",label:"","text-color":"white"}},[t(v.a,{attrs:{start:""}},[e._v("mdi-label")]),e._v("\n                ລາຍຮັບ "+e._s(e.today)+"\n            ")],1)],1),e._v(" "),t(d.c,[t(f.a,[t(y.a,[t(m.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(k.a,{attrs:{label:"ເລກເອກະສານອ້າງອີງ*",required:""},model:{value:e.form.header.receiveNumber,callback:function(t){e.$set(e.form.header,"receiveNumber",t)},expression:"form.header.receiveNumber"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(k.a,{attrs:{type:"date",label:"ວັນທີ*",hint:"ເດຶອນ/ວັນ/ປີ 12/31/2023"},model:{value:e.form.header.bookingDate,callback:function(t){e.$set(e.form.header,"bookingDate",t)},expression:"form.header.bookingDate"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(k.a,{attrs:{label:"ຊຶ ບໍ່ລິສັດ ຫລື ຜູ້ຮັບ ການຊຳລະ*",hint:"ຊື່ບຸກຄົນ,ບໍລິສັດ ຫລື ຜູ້ຮັບການຊຳລະ","persistent-hint":"",required:""},model:{value:e.form.header.payee,callback:function(t){e.$set(e.form.header,"payee",t)},expression:"form.header.payee"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12"}},[t(k.a,{attrs:{label:"ເນື້ອໃນລາຍການ*",required:""},model:{value:e.form.header.notes,callback:function(t){e.$set(e.form.header,"notes",t)},expression:"form.header.notes"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(k.a,{directives:[{name:"comma-thousand",rawName:"v-comma-thousand"}],attrs:{label:"ຈຳນວນເງິນ*",required:""},model:{value:e.form.header.totalAmount,callback:function(t){e.$set(e.form.header,"totalAmount",t)},expression:"form.header.totalAmount"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(n.a,{attrs:{items:e.currencyList,label:"ສະກຸນເງິນ*","item-text":"code","item-value":"id"},on:{input:e.currencyChange},model:{value:e.form.header.currencyId,callback:function(t){e.$set(e.form.header,"currencyId",t)},expression:"form.header.currencyId"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(k.a,{directives:[{name:"comma-thousand",rawName:"v-comma-thousand"}],attrs:{label:"ອັດຕາແລກປ່ຽນ*",required:""},model:{value:e.form.header.rate,callback:function(t){e.$set(e.form.header,"rate",t)},expression:"form.header.rate"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12"}},[t(n.a,{attrs:{"item-text":"payment_code","item-value":"id",items:e.paymentList,label:"ປະເພດການຊຳລະ *"},model:{value:e.form.header.paymentId,callback:function(t){e.$set(e.form.header,"paymentId",t)},expression:"form.header.paymentId"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6"}},[t(n.a,{attrs:{"item-text":"desc","item-value":"id",items:e.account,label:"ບັນຊີແຍກປະເພດ DR ACCOUNT*"},model:{value:e.form.header.drAccountId,callback:function(t){e.$set(e.form.header,"drAccountId",t)},expression:"form.header.drAccountId"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6"}},[t(n.a,{attrs:{"item-text":"desc","item-value":"id",items:e.account,label:"ບັນຊີແຍກປະເພດ CR ACCOUNT*"},model:{value:e.form.header.crAccountId,callback:function(t){e.$set(e.form.header,"crAccountId",t)},expression:"form.header.crAccountId"}})],1)],1)],1),e._v(" "),t("small",[e._v("* ສະແດງເຖິງຟິວທີ່ຕ້ອງໃສ່ຂໍ້ມູນ")])],1),e._v(" "),t(d.a,[t(x.a),e._v(" "),t(o.a,{attrs:{color:"warning",rounded:"",variant:"text"},on:{click:function(t){return e.$emit("close-dialog")}}},[e._v("\n                Close\n            ")]),e._v(" "),t(o.a,{attrs:{color:"primary",rounded:"",variant:"text"},on:{click:e.submitData}},[e._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingIndicator:r(248).default})},844:function(e,t,r){"use strict";r(35),r(85);t.a={bind:function(e,t,r){e.addEventListener("input",(function(e){var t=e.target.value.replace(/[^0-9]/g,"");"NaN"===(t=parseInt(t,10).toLocaleString("en-US"))&&(t="0"),r.componentInstance.$emit("input",t)}))}}}}]);