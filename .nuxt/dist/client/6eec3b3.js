(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1243:function(e,t,n){var content=n(1521);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("4cc224b5",content,!0,{sourceMap:!1})},1520:function(e,t,n){"use strict";n(1243)},1521:function(e,t,n){var o=n(15)((function(i){return i[1]}));o.push([e.i,'.modal-overlay[data-v-66d19dee]{align-items:center;background-color:rgba(0,0,0,.7);justify-content:center;left:0;padding:0;position:fixed;top:0;z-index:1050}.enhanced-dialog[data-v-66d19dee],.modal-overlay[data-v-66d19dee]{display:flex;height:100vh;width:100vw}.enhanced-dialog[data-v-66d19dee]{background:#fff;flex-direction:column;overflow:hidden}.modal-header[data-v-66d19dee]{background:linear-gradient(135deg,#01532b,#337555);border-bottom:1px solid #e9ecef;color:#fff;justify-content:space-between;min-height:50px;padding:12px 20px}.modal-header[data-v-66d19dee],.modal-title[data-v-66d19dee]{align-items:center;display:flex}.modal-title[data-v-66d19dee]{font-size:16px;font-weight:600;gap:8px;margin:0}.close-button[data-v-66d19dee]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;padding:4px;transition:background .2s}.close-button[data-v-66d19dee]:hover{background:hsla(0,0%,100%,.2)}.modal-body[data-v-66d19dee]{flex:1;overflow:hidden}.loading-state[data-v-66d19dee],.modal-body[data-v-66d19dee]{display:flex;flex-direction:column}.loading-state[data-v-66d19dee]{align-items:center;color:#666;justify-content:center;padding:30px}.spinner[data-v-66d19dee]{animation:spin-66d19dee 1s linear infinite;border:3px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:30px;margin-bottom:10px;width:30px}@keyframes spin-66d19dee{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.invoice-form[data-v-66d19dee]{display:flex;flex:1;flex-direction:column;overflow:hidden}.tab-navigation[data-v-66d19dee]{background:#f8f9fa;border-bottom:1px solid #e9ecef;display:flex}.tab-btn[data-v-66d19dee]{align-items:center;background:none;border:none;color:#666;cursor:pointer;display:flex;flex:1;font-size:13px;font-weight:500;gap:6px;justify-content:center;min-height:44px;padding:10px 15px;transition:all .2s}.tab-btn[data-v-66d19dee]:hover{background:rgba(102,126,234,.1);color:#667eea}.tab-btn.active[data-v-66d19dee]{background:#fff;border-bottom:2px solid #667eea;color:#667eea}.line-count[data-v-66d19dee]{background:#667eea;border-radius:10px;color:#fff;font-size:11px;min-width:18px;padding:1px 6px;text-align:center}.tab-content[data-v-66d19dee]{flex:1;overflow-y:auto;padding:0}.form-section[data-v-66d19dee]{border-bottom:1px solid #f0f0f0;padding:15px}.section-title[data-v-66d19dee]{align-items:center;border-bottom:1px solid #e9ecef;color:#333;display:flex;font-size:14px;font-weight:600;gap:8px;margin-bottom:12px;padding-bottom:6px}.section-title i[data-v-66d19dee]{color:#667eea;font-size:13px}.form-grid[data-v-66d19dee]{grid-gap:12px;display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.span-2[data-v-66d19dee]{grid-column:span 2}.form-group[data-v-66d19dee]{margin-bottom:0}.form-group label[data-v-66d19dee]{color:#333;display:block;font-size:12px;font-weight:500;margin-bottom:3px}.form-group label.required[data-v-66d19dee]:after{color:#e74c3c;content:" *"}.form-control[data-v-66d19dee]{border:1px solid #ddd;border-radius:4px;font-size:12px;height:32px;padding:6px 8px;transition:border-color .2s,box-shadow .2s;width:100%}.form-control[data-v-66d19dee]:focus{border-color:#667eea;box-shadow:0 0 0 2px rgba(102,126,234,.1);outline:none}.form-control.is-invalid[data-v-66d19dee]{border-color:#e74c3c;box-shadow:0 0 0 2px rgba(231,76,60,.1)}.form-control-xs[data-v-66d19dee]{font-size:11px;height:28px;padding:4px 6px}.invalid-feedback[data-v-66d19dee]{color:#e74c3c;display:block;font-size:10px;margin-top:2px;width:100%}.currency-info[data-v-66d19dee]{color:#666;font-size:10px;font-weight:400}.exchange-display[data-v-66d19dee]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;margin:10px 0;padding:8px}.exchange-amount[data-v-66d19dee]{align-items:center;display:flex;font-size:12px;font-weight:600;gap:8px;justify-content:center}.foreign-amount[data-v-66d19dee]{color:#667eea}.exchange-arrow[data-v-66d19dee]{color:#28a745;font-size:10px}.local-amount[data-v-66d19dee]{color:#28a745}.amount-summary[data-v-66d19dee]{background:#f8f9fa;border-left:3px solid #667eea;border-radius:6px;margin:10px 15px;padding:12px}.totals-grid[data-v-66d19dee]{grid-gap:8px;display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.total-item[data-v-66d19dee]{align-items:center;display:flex;font-size:12px;justify-content:space-between;padding:4px 0}.total-item.grand-total[data-v-66d19dee]{border-top:1px solid #667eea;font-size:13px;font-weight:600;grid-column:1/-1;margin-top:4px;padding-top:6px}.total-item .amount[data-v-66d19dee]{color:#333;font-weight:600}.total-item .amount.discount[data-v-66d19dee]{color:#e67e22}.total-item .amount.local[data-v-66d19dee]{color:#28a745}.audit-trail-compact[data-v-66d19dee]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;margin:10px 0;padding:12px}.audit-header[data-v-66d19dee]{align-items:center;display:flex;justify-content:space-between;margin-bottom:10px}.audit-header h5[data-v-66d19dee]{color:#333;font-size:13px;font-weight:600;margin:0}.btn-view-audit[data-v-66d19dee]{align-items:center;background:#667eea;border:none;border-radius:4px;color:#fff;cursor:pointer;display:flex;font-size:11px;gap:4px;padding:4px 8px}.btn-view-audit[data-v-66d19dee]:hover{background:#5a6fd8}.audit-summary[data-v-66d19dee]{display:flex;flex-direction:column;gap:6px}.audit-item[data-v-66d19dee]{align-items:center;color:#666;display:flex;font-size:11px;gap:6px}.audit-item i[data-v-66d19dee]{color:#667eea;width:12px}.status-badge-container[data-v-66d19dee]{text-align:right}.status-badge[data-v-66d19dee]{border-radius:10px;font-size:10px;font-weight:600;padding:2px 6px;text-transform:uppercase}.status-badge.status-draft[data-v-66d19dee]{background:#e9ecef;color:#6c757d}.status-badge.status-pending[data-v-66d19dee]{background:#fff3cd;color:#856404}.status-badge.status-approved[data-v-66d19dee]{background:#d1ecf1;color:#0c5460}.line-items-section[data-v-66d19dee]{display:flex;flex-direction:column;height:100%;padding:15px}.add-line-header[data-v-66d19dee]{margin-bottom:15px}.add-line-actions[data-v-66d19dee]{align-items:center;display:flex;flex-wrap:wrap;gap:8px}.btn[data-v-66d19dee]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:12px;font-weight:500;gap:4px;padding:6px 12px;transition:all .2s ease}.btn-primary[data-v-66d19dee]{background:#007bff;color:#fff}.btn-secondary[data-v-66d19dee]{background:#6c757d;color:#fff}.btn-danger[data-v-66d19dee]{background:#dc3545;color:#fff}.btn[data-v-66d19dee]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}.btn[data-v-66d19dee]:disabled{cursor:not-allowed;opacity:.6;transform:none}.btn-add-line[data-v-66d19dee]{font-size:13px;padding:8px 16px}.btn-sm[data-v-66d19dee]{font-size:10px;padding:4px 8px}.btn-xs[data-v-66d19dee]{align-items:center;border-radius:50%;display:flex;font-size:10px;height:24px;justify-content:center;padding:0;width:24px}.line-count-info[data-v-66d19dee]{background:#e9ecef;border-radius:12px;color:#666;font-size:10px;font-weight:500;padding:4px 8px}.empty-line-state[data-v-66d19dee]{align-items:center;background:#f8f9fa;border:2px dashed #dee2e6;border-radius:6px;display:flex;flex:1;justify-content:center;padding:40px 20px;text-align:center}.empty-content i[data-v-66d19dee]{color:#dee2e6;font-size:48px;margin-bottom:15px}.empty-content h4[data-v-66d19dee]{color:#666;font-size:16px;margin-bottom:8px}.line-items-table-container[data-v-66d19dee]{border:1px solid #e9ecef;border-radius:6px;flex:1;overflow:hidden;overflow-y:auto}.line-items-table .table[data-v-66d19dee]{border-collapse:collapse;font-size:11px;margin:0;width:100%}.line-items-table .table th[data-v-66d19dee]{background:#f8f9fa;border-bottom:1px solid #dee2e6;font-size:10px;font-weight:600;padding:6px 4px;text-align:center;white-space:nowrap}.line-items-table .table td[data-v-66d19dee]{border-top:1px solid #dee2e6;padding:4px;vertical-align:middle}.line-number[data-v-66d19dee]{color:#666;text-align:center}.line-number[data-v-66d19dee],.line-total[data-v-66d19dee]{font-size:10px;font-weight:600}.line-total[data-v-66d19dee]{color:#333;text-align:right}.line-row[data-v-66d19dee]{transition:background-color .2s}.line-row[data-v-66d19dee]:hover{background-color:rgba(102,126,234,.05)}.line-totals-summary[data-v-66d19dee]{background:#f8f9fa;border-left:3px solid #667eea;border-radius:6px;margin-top:10px;padding:10px}.totals-inline[data-v-66d19dee]{align-items:center;display:flex;flex-wrap:wrap;font-size:11px;gap:15px;justify-content:space-between}.totals-inline .total-item[data-v-66d19dee]{align-items:center;display:flex;gap:4px}.totals-inline .total-item.grand-total[data-v-66d19dee]{color:#333;font-size:12px;font-weight:700}.totals-inline .total-item strong.discount[data-v-66d19dee]{color:#e67e22}.modal-footer[data-v-66d19dee]{background:#f8f9fa;border-top:1px solid #e9ecef;min-height:56px;padding:12px 20px}.footer-actions[data-v-66d19dee]{display:flex;gap:8px;justify-content:flex-end}@media (max-width:768px){.form-grid[data-v-66d19dee]{grid-template-columns:1fr}.span-2[data-v-66d19dee]{grid-column:span 1}.totals-grid[data-v-66d19dee]{grid-template-columns:1fr}.totals-inline[data-v-66d19dee]{gap:8px}.add-line-actions[data-v-66d19dee],.totals-inline[data-v-66d19dee]{align-items:flex-start;flex-direction:column}.line-items-table-container[data-v-66d19dee]{overflow-x:auto}.line-items-table .table[data-v-66d19dee]{min-width:700px}.footer-actions[data-v-66d19dee]{flex-direction:column}.footer-actions .btn[data-v-66d19dee]{justify-content:center;width:100%}}@media (max-width:480px){.modal-header[data-v-66d19dee]{padding:10px 15px}.modal-title[data-v-66d19dee]{font-size:14px}.form-section[data-v-66d19dee],.line-items-section[data-v-66d19dee]{padding:12px}.modal-footer[data-v-66d19dee]{padding:10px 15px}}',""]),o.locals={},e.exports=o},1634:function(e,t,n){"use strict";n.r(t);n(44),n(9),n(5),n(34),n(7),n(67),n(11),n(12);var o=n(3),r=n(20);n(92),n(66),n(8),n(121),n(10),n(100);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var l={name:"APInvoiceDialog",components:{AuditLogDialog:n(1635).default},props:{visible:{type:Boolean,default:!1},invoice:{type:Object,default:null},vendors:{type:Array,default:function(){return[]}},currencies:{type:Array,default:function(){return[]}},glAccounts:{type:Array,default:function(){return[]}},user:{type:Object,default:null}},emits:["close","save"],data:function(){return{activeTab:"header",formLoading:!1,saving:!1,errors:{},lineItems:[],nextTempId:1,selectedVendor:null,selectedCurrency:null,auditDialogVisible:!1,form:{id:null,invoiceNumber:"",vendorInvoiceNumber:"",vendorId:"",invoiceDate:"",dueDate:"",description:"",totalAmount:"",exchangeRate:1,currencyId:"",makerId:"",note:"",reason:""}}},computed:{isEdit:function(){return!!this.invoice},auditTrail:function(){var e,t,n,o;if(!this.invoice)return{makerName:(null===(e=this.user)||void 0===e?void 0:e.cus_name)||(null===(t=this.user)||void 0===t?void 0:t.name)||"ຜູ້ໃຊ້ປະຈຸບັນ",makerPosition:"ພະນັກງານບັນຊີ",makerEmail:(null===(n=this.user)||void 0===n?void 0:n.cus_email)||(null===(o=this.user)||void 0===o?void 0:o.email)||"",createdDate:(new Date).toISOString().split("T")[0],createdTime:(new Date).toLocaleTimeString("en-GB"),isChecked:!1,isApproved:!1,checkerName:null,checkerPosition:null,checkerEmail:null,checkedDate:null,checkedTime:null,checkerComment:null};var r=this.invoice.maker||{},d=this.invoice.checker||null,c=new Date(this.invoice.createdAt),l=this.invoice.approvedAt?new Date(this.invoice.approvedAt):null;return{makerName:r.cus_name||"ບໍ່ມີຂໍ້ມູນ",makerPosition:r.position||"ພະນັກງານບັນຊີ",makerEmail:r.cus_email||"",makerId:r.cus_id||r.id,createdDate:c.toISOString().split("T")[0],createdTime:c.toLocaleTimeString("en-GB"),createdDateTime:this.invoice.createdAt,checkerName:(null==d?void 0:d.cus_name)||null,checkerPosition:(null==d?void 0:d.position)||"ຫົວໜ້າຝ່າຍບັນຊີ",checkerEmail:(null==d?void 0:d.cus_email)||null,checkerId:(null==d?void 0:d.cus_id)||(null==d?void 0:d.id)||null,checkedDate:l?l.toISOString().split("T")[0]:null,checkedTime:l?l.toLocaleTimeString("en-GB"):null,checkedDateTime:this.invoice.approvedAt,isChecked:!!this.invoice.checkerId&&!!this.invoice.approvedAt,isApproved:"approved"===this.invoice.status,checkerComment:this.invoice.checkerComment||null,status:this.invoice.status||"draft",version:this.invoice.version||1}},calculatedSubtotal:function(){return this.lineItems.reduce((function(e,line){return e+(parseFloat(line.quantity)||0)*(parseFloat(line.unitPrice)||0)}),0)},calculatedDiscount:function(){return this.lineItems.reduce((function(e,line){return e+(parseFloat(line.discountAmount)||0)}),0)},calculatedTax:function(){return this.lineItems.reduce((function(e,line){return e+(parseFloat(line.taxAmount)||0)}),0)},calculatedTotal:function(){return this.lineItems.reduce((function(e,line){return e+(parseFloat(line.lineTotal)||0)}),0)},isFormValid:function(){var e=this.form.invoiceNumber&&this.form.vendorInvoiceNumber&&this.form.vendorId&&this.form.invoiceDate&&this.form.dueDate&&this.form.currencyId&&this.form.exchangeRate&&parseFloat(this.form.exchangeRate)>0&&(!this.isEdit||this.form.reason),t=this.lineItems.length>0&&this.lineItems.every((function(line){return line.description&&(parseFloat(line.quantity)||0)>0&&(parseFloat(line.unitPrice)||0)>=0&&line.DRglAccountId&&line.CRglAccountId}));return e&&t}},watch:{visible:{handler:function(e){e?this.initializeDialog():this.resetDialog()},immediate:!0},invoice:{handler:function(){this.visible&&this.initializeDialog()}}},methods:{initializeDialog:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.activeTab="header",e.clearErrors(),!e.invoice){t.next=8;break}return e.form={id:e.invoice.id,invoiceNumber:e.invoice.invoiceNumber,vendorInvoiceNumber:e.invoice.vendorInvoiceNumber,vendorId:e.invoice.vendorId,invoiceDate:e.invoice.invoiceDate?e.invoice.invoiceDate.split("T")[0]:"",dueDate:e.invoice.dueDate?e.invoice.dueDate.split("T")[0]:"",description:e.invoice.description||"",totalAmount:e.invoice.totalAmount,exchangeRate:e.invoice.exchangeRate||1,currencyId:e.invoice.currencyId,makerId:e.invoice.makerId,note:e.invoice.note||"",reason:""},t.next=6,e.loadLineItems(e.invoice.id);case 6:t.next=11;break;case 8:e.resetForm(),e.currencies.length>0&&(n=e.currencies.find((function(e){return"LAK"===e.code}))||e.currencies.find((function(e){return"USD"===e.code}))||e.currencies[0],e.form.currencyId=n.id,e.selectedCurrency=n,e.form.exchangeRate=(n.code,1)),e.lineItems=[e.createEmptyLine()];case 11:e.updateSelectedVendor(),e.updateSelectedCurrency();case 13:case"end":return t.stop()}}),t)})))()},resetDialog:function(){this.resetForm(),this.lineItems=[],this.selectedVendor=null,this.selectedCurrency=null,this.clearErrors(),this.activeTab="header",this.formLoading=!1,this.saving=!1,this.auditDialogVisible=!1},loadLineItems:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.get("/api/ap-invoices-lines/invoice/".concat(e));case 3:o=n.sent,data=o.data,t.lineItems=data.data||[t.createEmptyLine()],t.lineItems.forEach((function(line){line.tempId||(line.tempId=t.nextTempId++),t.calculateLineTotal(line)})),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.error("Error loading line items:",n.t0),t.lineItems=[t.createEmptyLine()];case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},openAuditDialog:function(){this.form.id&&(this.auditDialogVisible=!0)},closeAuditDialog:function(){this.auditDialogVisible=!1},getInvoiceInfo:function(){return this.invoice?{invoiceNumber:this.form.invoiceNumber,vendorInvoiceNumber:this.form.vendorInvoiceNumber,totalAmount:this.calculatedTotal,status:this.invoice.status}:null},createEmptyLine:function(){return{tempId:this.nextTempId++,lineNumber:this.lineItems.length+1,description:"",quantity:1,unitPrice:0,DRglAccountId:"",CRglAccountId:"",discountRate:0,discountAmount:0,taxRate:0,taxAmount:0,lineTotal:0,note:""}},addNewLine:function(){this.lineItems.push(this.createEmptyLine())},addMultipleLines:function(e){for(var i=0;i<e;i++)this.lineItems.push(this.createEmptyLine())},removeLine:function(e){this.lineItems.length>1&&(this.lineItems.splice(e,1),this.updateLineNumbers())},updateLineNumbers:function(){this.lineItems.forEach((function(line,e){line.lineNumber=e+1}))},calculateLineTotal:function(line){var e=parseFloat(line.quantity)||0,t=parseFloat(line.unitPrice)||0,n=parseFloat(line.discountRate)||0,o=parseFloat(line.taxRate)||0,r=e*t,d=r*(n/100);line.discountAmount=d;var c=r-d,l=c*(o/100);line.taxAmount=l,line.lineTotal=c+l,this.calculateExchangeAmounts()},calculateExchangeAmounts:function(){this.clearFieldError("exchangeRate")},updateSelectedVendor:function(){var e=this;this.form.vendorId&&this.vendors.length>0?this.selectedVendor=this.vendors.find((function(t){return t.id===e.form.vendorId})):this.selectedVendor=null},updateSelectedCurrency:function(){var e=this;this.form.currencyId&&this.currencies.length>0?(this.selectedCurrency=this.currencies.find((function(t){return t.id===e.form.currencyId})),this.selectedCurrency&&"LAK"===this.selectedCurrency.code&&(this.form.exchangeRate=1)):this.selectedCurrency=null},onVendorChange:function(){this.updateSelectedVendor(),this.calculateDueDate(),this.clearFieldError("vendorId")},onCurrencyChange:function(){var e=this;this.updateSelectedCurrency(),this.clearFieldError("currencyId"),console.info("Currency structure ".concat(JSON.stringify(this.currencies))),this.form.exchangeRate=this.currencies.find((function(t){return t.id===e.form.currencyId})).rate,this.calculateExchangeAmounts()},calculateDueDate:function(){var e;if(this.form.invoiceDate&&null!==(e=this.selectedVendor)&&void 0!==e&&e.paymentTerms){var t=new Date(this.form.invoiceDate),n=new Date(t);n.setDate(n.getDate()+parseInt(this.selectedVendor.paymentTerms)),this.form.dueDate=n.toISOString().split("T")[0]}},validateForm:function(){if(this.errors={},this.form.invoiceNumber||(this.errors.invoiceNumber="ກະລຸນາໃສ່ເລກທີໃບແຈ້ງໜີ້"),this.form.vendorInvoiceNumber||(this.errors.vendorInvoiceNumber="ກະລຸນາໃສ່ເລກທີໃບແຈ້ງໜີ້ຜູ້ຂາຍ"),this.form.vendorId||(this.errors.vendorId="ກະລຸນາເລືອກຜູ້ຂາຍ"),this.form.currencyId||(this.errors.currencyId="ກະລຸນາເລືອກສະກຸນເງິນ"),this.form.exchangeRate?parseFloat(this.form.exchangeRate)<=0&&(this.errors.exchangeRate="ອັດຕາແລກປ່ຽນຕ້ອງຫຼາຍກວ່າ 0"):this.errors.exchangeRate="ກະລຸນາໃສ່ອັດຕາແລກປ່ຽນ",this.form.invoiceDate||(this.errors.invoiceDate="ກະລຸນາໃສ່ວັນທີໃບແຈ້ງໜີ້"),this.form.dueDate||(this.errors.dueDate="ກະລຸນາໃສ່ວັນທີຄົບກຳນົດ"),this.form.invoiceDate&&this.form.dueDate){var e=new Date(this.form.invoiceDate);new Date(this.form.dueDate)<=e&&(this.errors.dueDate="ວັນທີຄົບກຳນົດຕ້ອງຫຼັງຈາກວັນທີໃບແຈ້ງໜີ້")}if(0===this.lineItems.length)this.errors.lineItems="ກະລຸນາເພີ່ມລາຍການສິນຄ້າຢ່າງໜ້ອຍ 1 ລາຍການ";else for(var i=0;i<this.lineItems.length;i++){var line=this.lineItems[i];line.description||(this.errors["line_".concat(i,"_description")]="ກະລຸນາໃສ່ລາຍລະອຽດສິນຄ້າ"),(!line.quantity||parseFloat(line.quantity)<=0)&&(this.errors["line_".concat(i,"_quantity")]="ຈຳນວນຕ້ອງຫຼາຍກວ່າ 0"),(""===line.unitPrice||parseFloat(line.unitPrice)<0)&&(this.errors["line_".concat(i,"_unitPrice")]="ລາຄາຕ້ອງເປັນຄ່າບວກ"),line.DRglAccountId||(this.errors["line_".concat(i,"_DRglAccountId")]="ກະລຸນາເລືອກ DR Account"),line.CRglAccountId||(this.errors["line_".concat(i,"_CRglAccountId")]="ກະລຸນາເລືອກ CR Account")}return this.isEdit&&!this.form.reason&&(this.errors.reason="ກະລຸນາລະບຸເຫດຜົນຂອງການແກ້ໄຂ"),0===Object.keys(this.errors).length},clearErrors:function(){this.errors={}},clearFieldError:function(e){this.errors[e]&&this.$delete(this.errors,e)},handleSubmit:function(){var e;if(this.validateForm()){this.saving=!0;var t=c(c({},this.form),{},{makerId:this.form.makerId||(null===(e=this.user)||void 0===e?void 0:e.id),totalAmount:this.calculatedTotal,exchangeRate:parseFloat(this.form.exchangeRate)||1,lineItems:this.lineItems.map((function(line,e){return c(c({},line),{},{lineNumber:e+1,quantity:parseFloat(line.quantity)||0,unitPrice:parseFloat(line.unitPrice)||0,discountRate:parseFloat(line.discountRate)||0,taxRate:parseFloat(line.taxRate)||0})}))});this.$emit("save",t)}else Object.keys(this.errors).some((function(e){return e.startsWith("line_")}))?this.activeTab="lines":this.activeTab="header"},handleOverlayClick:function(){this.saving||this.handleClose()},handleClose:function(){this.$emit("close")},resetForm:function(){this.form={id:null,invoiceNumber:"",vendorInvoiceNumber:"",vendorId:"",invoiceDate:"",dueDate:"",description:"",totalAmount:"",exchangeRate:1,currencyId:"",makerId:"",note:"",reason:""}},formatCurrency:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD")||"USD",n=new Intl.NumberFormat("en-US",{style:"currency",currency:"LAK"===t?"USD":t,minimumFractionDigits:"LAK"===t?0:2,maximumFractionDigits:"LAK"===t?0:2});return"LAK"===t?"₭".concat(new Intl.NumberFormat("en-US").format(e||0)):n.format(e||0)},getStatusText:function(e){return{draft:"ຮ່າງ",pending:"ລໍຖ້າການອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",rejected:"ປະຕິເສດ",paid:"ຈ່າຍແລ້ວ",cancelled:"ຍົກເລີກ"}[e]||e}}},v=l,m=(n(1520),n(32)),component=Object(m.a)(v,(function(){var e,t,n,o,r,d,c,l,v,m=this,f=m._self._c;return m.visible?f("div",{staticClass:"modal-overlay",on:{click:m.handleOverlayClick}},[f("div",{staticClass:"enhanced-dialog",on:{click:function(e){e.stopPropagation()}}},[f("div",{staticClass:"modal-header"},[f("h4",{staticClass:"modal-title"},[f("i",{staticClass:"fas fa-file-invoice"}),m._v("\n        "+m._s(m.isEdit?"ແກ້ໄຂໃບແຈ້ງໜີ້":"ເພີ່ມໃບແຈ້ງໜີ້ໃໝ່")+"\n      ")]),m._v(" "),f("button",{staticClass:"close-button",attrs:{type:"button"},on:{click:m.handleClose}},[f("i",{staticClass:"fas fa-times"})])]),m._v(" "),f("div",{staticClass:"modal-body"},[m.formLoading?f("div",{staticClass:"loading-state"},[f("div",{staticClass:"spinner"}),m._v(" "),f("p",[m._v("ກຳລັງໂຫຼດຂໍ້ມູນ...")])]):f("div",{staticClass:"invoice-form"},[f("div",{staticClass:"tab-navigation"},[f("button",{class:["tab-btn",{active:"header"===m.activeTab}],attrs:{type:"button"},on:{click:function(e){m.activeTab="header"}}},[f("i",{staticClass:"fas fa-file-alt"}),m._v("\n            ຂໍ້ມູນໃບແຈ້ງໜີ້\n          ")]),m._v(" "),f("button",{class:["tab-btn",{active:"lines"===m.activeTab}],attrs:{type:"button"},on:{click:function(e){m.activeTab="lines"}}},[f("i",{staticClass:"fas fa-list"}),m._v("\n            ລາຍການສິນຄ້າ\n            "),m.lineItems.length>0?f("span",{staticClass:"line-count"},[m._v(m._s(m.lineItems.length))]):m._e()])]),m._v(" "),f("div",{directives:[{name:"show",rawName:"v-show",value:"header"===m.activeTab,expression:"activeTab === 'header'"}],staticClass:"tab-content"},[f("form",{on:{submit:function(e){return e.preventDefault(),m.handleSubmit.apply(null,arguments)}}},[f("div",{staticClass:"form-section"},[m._m(0),m._v(" "),f("div",{staticClass:"form-grid"},[f("div",{staticClass:"form-group"},[f("label",{staticClass:"required",attrs:{for:"invoiceDate"}},[m._v("ວັນທີໃບແຈ້ງໜີ້")]),m._v(" "),f("input",{directives:[{name:"model",rawName:"v-model",value:m.form.invoiceDate,expression:"form.invoiceDate"}],staticClass:"form-control",class:{"is-invalid":m.errors.invoiceDate},attrs:{id:"invoiceDate",type:"date"},domProps:{value:m.form.invoiceDate},on:{change:m.calculateDueDate,input:function(e){e.target.composing||m.$set(m.form,"invoiceDate",e.target.value)}}}),m._v(" "),m.errors.invoiceDate?f("div",{staticClass:"invalid-feedback"},[m._v("\n                    "+m._s(m.errors.invoiceDate)+"\n                  ")]):m._e()]),m._v(" "),f("div",{staticClass:"form-group"},[f("label",{staticClass:"required",attrs:{for:"dueDate"}},[m._v("ວັນທີຄົບກຳນົດ")]),m._v(" "),f("input",{directives:[{name:"model",rawName:"v-model",value:m.form.dueDate,expression:"form.dueDate"}],staticClass:"form-control",class:{"is-invalid":m.errors.dueDate},attrs:{id:"dueDate",type:"date"},domProps:{value:m.form.dueDate},on:{input:function(e){e.target.composing||m.$set(m.form,"dueDate",e.target.value)}}}),m._v(" "),m.errors.dueDate?f("div",{staticClass:"invalid-feedback"},[m._v("\n                    "+m._s(m.errors.dueDate)+"\n                  ")]):m._e()]),m._v(" "),f("div",{staticClass:"form-group"},[f("label",{staticClass:"required",attrs:{for:"invoiceNumber"}},[m._v("ເລກທີໃບແຈ້ງໜີ້")]),m._v(" "),f("input",{directives:[{name:"model",rawName:"v-model",value:m.form.invoiceNumber,expression:"form.invoiceNumber"}],staticClass:"form-control",class:{"is-invalid":m.errors.invoiceNumber},attrs:{id:"invoiceNumber",type:"text",placeholder:"ເຊັ່ນ: INV-2025-001",readonly:m.isEdit},domProps:{value:m.form.invoiceNumber},on:{input:function(e){e.target.composing||m.$set(m.form,"invoiceNumber",e.target.value)}}}),m._v(" "),m.errors.invoiceNumber?f("div",{staticClass:"invalid-feedback"},[m._v("\n                    "+m._s(m.errors.invoiceNumber)+"\n                  ")]):m._e()]),m._v(" "),f("div",{staticClass:"form-group"},[f("label",{staticClass:"required",attrs:{for:"vendorInvoiceNumber"}},[m._v("ເລກທີໃບແຈ້ງໜີ້ຜູ້ຂາຍ")]),m._v(" "),f("input",{directives:[{name:"model",rawName:"v-model",value:m.form.vendorInvoiceNumber,expression:"form.vendorInvoiceNumber"}],staticClass:"form-control",class:{"is-invalid":m.errors.vendorInvoiceNumber},attrs:{id:"vendorInvoiceNumber",type:"text",placeholder:"ເລກທີໃບແຈ້ງໜີ້ຂອງຜູ້ຂາຍ"},domProps:{value:m.form.vendorInvoiceNumber},on:{input:function(e){e.target.composing||m.$set(m.form,"vendorInvoiceNumber",e.target.value)}}}),m._v(" "),m.errors.vendorInvoiceNumber?f("div",{staticClass:"invalid-feedback"},[m._v("\n                    "+m._s(m.errors.vendorInvoiceNumber)+"\n                  ")]):m._e()]),m._v(" "),f("div",{staticClass:"form-group"},[f("label",{staticClass:"required",attrs:{for:"vendorId"}},[m._v("ຜູ້ຂາຍ")]),m._v(" "),f("select",{directives:[{name:"model",rawName:"v-model",value:m.form.vendorId,expression:"form.vendorId"}],staticClass:"form-control",class:{"is-invalid":m.errors.vendorId},attrs:{id:"vendorId"},on:{change:[function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));m.$set(m.form,"vendorId",e.target.multiple?t:t[0])},m.onVendorChange]}},[f("option",{attrs:{value:""}},[m._v("ເລືອກຜູ້ຂາຍ")]),m._v(" "),m._l(m.vendors,(function(e){return f("option",{key:e.id,domProps:{value:e.id}},[m._v("\n                      "+m._s(e.name)+" ("+m._s(e.vendorCode)+")\n                    ")])}))],2),m._v(" "),m.errors.vendorId?f("div",{staticClass:"invalid-feedback"},[m._v("\n                    "+m._s(m.errors.vendorId)+"\n                  ")]):m._e()]),m._v(" "),f("div",{staticClass:"form-group"},[f("label",{staticClass:"required",attrs:{for:"currencyId"}},[m._v("ສະກຸນເງິນ")]),m._v(" "),f("select",{directives:[{name:"model",rawName:"v-model",value:m.form.currencyId,expression:"form.currencyId"}],staticClass:"form-control",class:{"is-invalid":m.errors.currencyId},attrs:{id:"currencyId"},on:{change:[function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));m.$set(m.form,"currencyId",e.target.multiple?t:t[0])},m.onCurrencyChange]}},[f("option",{attrs:{value:""}},[m._v("ເລືອກສະກຸນເງິນ")]),m._v(" "),m._l(m.currencies,(function(e){return f("option",{key:e.id,domProps:{value:e.id}},[m._v("\n                      "+m._s(e.name)+" ("+m._s(e.code)+")\n                    ")])}))],2),m._v(" "),m.errors.currencyId?f("div",{staticClass:"invalid-feedback"},[m._v("\n                    "+m._s(m.errors.currencyId)+"\n                  ")]):m._e()]),m._v(" "),f("div",{staticClass:"form-group"},[f("label",{staticClass:"required",attrs:{for:"exchangeRate"}},[m._v("\n                    ອັດຕາແລກປ່ຽນ\n                    "),m.selectedCurrency?f("span",{staticClass:"currency-info"},[m._v("\n                      ("+m._s(m.selectedCurrency.code)+" ຕໍ່ LAK)\n                    ")]):m._e()]),m._v(" "),f("input",{directives:[{name:"model",rawName:"v-model",value:m.form.exchangeRate,expression:"form.exchangeRate"}],staticClass:"form-control",class:{"is-invalid":m.errors.exchangeRate},attrs:{id:"exchangeRate",type:"number",step:"0.0001",min:"0",placeholder:"1.0000"},domProps:{value:m.form.exchangeRate},on:{blur:m.calculateExchangeAmounts,input:function(e){e.target.composing||m.$set(m.form,"exchangeRate",e.target.value)}}}),m._v(" "),m.errors.exchangeRate?f("div",{staticClass:"invalid-feedback"},[m._v("\n                    "+m._s(m.errors.exchangeRate)+"\n                  ")]):m._e()]),m._v(" "),f("div",{staticClass:"form-group span-2"},[f("label",{attrs:{for:"description"}},[m._v("ຄຳອະທິບາຍ")]),m._v(" "),f("textarea",{directives:[{name:"model",rawName:"v-model",value:m.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{id:"description",rows:"2",placeholder:"ລາຍລະອຽດກ່ຽວກັບໃບແຈ້ງໜີ້..."},domProps:{value:m.form.description},on:{input:function(e){e.target.composing||m.$set(m.form,"description",e.target.value)}}})])]),m._v(" "),m.selectedCurrency&&m.form.exchangeRate?f("div",{staticClass:"exchange-display"},[f("div",{staticClass:"exchange-amount"},[f("span",{staticClass:"foreign-amount"},[m._v("\n                    "+m._s(m.formatCurrency(m.calculatedTotal,(null===(e=m.selectedCurrency)||void 0===e?void 0:e.code)||"USD"))+"\n                  ")]),m._v(" "),f("i",{staticClass:"fas fa-arrow-right exchange-arrow"}),m._v(" "),f("span",{staticClass:"local-amount"},[m._v("\n                    "+m._s(m.formatCurrency(m.calculatedTotal*parseFloat(m.form.exchangeRate||1),"LAK"))+"\n                  ")])])]):m._e(),m._v(" "),m.isEdit?f("div",{staticClass:"form-group"},[f("label",{staticClass:"required",attrs:{for:"reason"}},[m._v("ເຫດຜົນຂອງການແກ້ໄຂ")]),m._v(" "),f("input",{directives:[{name:"model",rawName:"v-model",value:m.form.reason,expression:"form.reason"}],staticClass:"form-control",class:{"is-invalid":m.errors.reason},attrs:{id:"reason",type:"text",placeholder:"ລະບຸເຫດຜົນຂອງການແກ້ໄຂ..."},domProps:{value:m.form.reason},on:{input:function(e){e.target.composing||m.$set(m.form,"reason",e.target.value)}}}),m._v(" "),m.errors.reason?f("div",{staticClass:"invalid-feedback"},[m._v("\n                  "+m._s(m.errors.reason)+"\n                ")]):m._e()]):m._e()]),m._v(" "),f("div",{staticClass:"amount-summary"},[f("div",{staticClass:"totals-grid"},[f("div",{staticClass:"total-item"},[f("span",[m._v("ລວມຍ່ອຍ:")]),m._v(" "),f("span",{staticClass:"amount"},[m._v(m._s(m.formatCurrency(m.calculatedSubtotal,null===(t=m.selectedCurrency)||void 0===t?void 0:t.code)))])]),m._v(" "),f("div",{staticClass:"total-item"},[f("span",[m._v("ສ່ວນຫຼຸດ:")]),m._v(" "),f("span",{staticClass:"amount discount"},[m._v("-"+m._s(m.formatCurrency(m.calculatedDiscount,null===(n=m.selectedCurrency)||void 0===n?void 0:n.code)))])]),m._v(" "),f("div",{staticClass:"total-item"},[f("span",[m._v("ພາສີ:")]),m._v(" "),f("span",{staticClass:"amount"},[m._v("+"+m._s(m.formatCurrency(m.calculatedTax,null===(o=m.selectedCurrency)||void 0===o?void 0:o.code)))])]),m._v(" "),f("div",{staticClass:"total-item grand-total"},[f("span",[m._v("ລວມທັງໝົດ:")]),m._v(" "),f("span",{staticClass:"amount"},[m._v(m._s(m.formatCurrency(m.calculatedTotal,null===(r=m.selectedCurrency)||void 0===r?void 0:r.code)))])]),m._v(" "),m.selectedCurrency&&"LAK"!==m.selectedCurrency.code&&m.form.exchangeRate?f("div",{staticClass:"total-item local-currency"},[f("span",[m._v("ລວມເປັນ LAK:")]),m._v(" "),f("span",{staticClass:"amount local"},[m._v(m._s(m.formatCurrency(m.calculatedTotal*parseFloat(m.form.exchangeRate||1),"LAK")))])]):m._e()])]),m._v(" "),m.isEdit?f("div",{staticClass:"audit-trail-compact"},[f("div",{staticClass:"audit-header"},[f("h5",[m._v("ປະຫວັດການດຳເນີນງານ")]),m._v(" "),f("button",{staticClass:"btn-view-audit",attrs:{type:"button"},on:{click:m.openAuditDialog}},[f("i",{staticClass:"fas fa-external-link-alt"}),m._v("\n                  ເບິ່ງລະອຽດ\n                ")])]),m._v(" "),f("div",{staticClass:"audit-summary"},[f("div",{staticClass:"audit-item"},[f("i",{staticClass:"fas fa-user-edit"}),m._v(" "),f("span",[m._v("ສ້າງໂດຍ: "+m._s(m.auditTrail.makerName)+" ("+m._s(m.auditTrail.createdDate)+")")])]),m._v(" "),f("div",{staticClass:"audit-item"},[f("i",{staticClass:"fas fa-user-check"}),m._v(" "),f("span",[m._v(m._s(m.auditTrail.isChecked?"ອະນຸມັດໂດຍ: ".concat(m.auditTrail.checkerName):"ລໍຖ້າການອະນຸມັດ"))])]),m._v(" "),f("div",{staticClass:"status-badge-container"},[f("span",{class:["status-badge","status-".concat(m.auditTrail.status)]},[m._v("\n                    "+m._s(m.getStatusText(m.auditTrail.status))+"\n                  ")])])])]):m._e()])]),m._v(" "),f("div",{directives:[{name:"show",rawName:"v-show",value:"lines"===m.activeTab,expression:"activeTab === 'lines'"}],staticClass:"tab-content"},[f("div",{staticClass:"line-items-section"},[f("div",{staticClass:"add-line-header"},[f("div",{staticClass:"add-line-actions"},[f("button",{staticClass:"btn btn-primary btn-add-line",attrs:{type:"button"},on:{click:m.addNewLine}},[f("i",{staticClass:"fas fa-plus"}),m._v("\n                  ເພີ່ມລາຍການ\n                ")]),m._v(" "),f("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return m.addMultipleLines(3)}}},[m._v("\n                  +3\n                ")]),m._v(" "),f("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return m.addMultipleLines(5)}}},[m._v("\n                  +5\n                ")]),m._v(" "),f("span",{staticClass:"line-count-info"},[m._v(m._s(m.lineItems.length)+" ລາຍການ")])])]),m._v(" "),0===m.lineItems.length?f("div",{staticClass:"empty-line-state"},[f("div",{staticClass:"empty-content"},[f("i",{staticClass:"fas fa-shopping-cart"}),m._v(" "),f("h4",[m._v("ຍັງບໍ່ມີລາຍການສິນຄ້າ")]),m._v(" "),f("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:m.addNewLine}},[f("i",{staticClass:"fas fa-plus-circle"}),m._v("\n                  ເພີ່ມລາຍການທຳອິດ\n                ")])])]):f("div",{staticClass:"line-items-table-container"},[f("div",{staticClass:"line-items-table"},[f("table",{staticClass:"table"},[m._m(1),m._v(" "),f("tbody",m._l(m.lineItems,(function(line,e){var t;return f("tr",{key:line.tempId||line.id,staticClass:"line-row"},[f("td",{staticClass:"line-number"},[m._v(m._s(e+1))]),m._v(" "),f("td",[f("input",{directives:[{name:"model",rawName:"v-model",value:line.description,expression:"line.description"}],staticClass:"form-control form-control-xs",class:{"is-invalid":m.errors["line_".concat(e,"_description")]},attrs:{type:"text",placeholder:"ລາຍລະອຽດ..."},domProps:{value:line.description},on:{blur:function(e){return m.calculateLineTotal(line)},input:function(e){e.target.composing||m.$set(line,"description",e.target.value)}}})]),m._v(" "),f("td",[f("input",{directives:[{name:"model",rawName:"v-model",value:line.quantity,expression:"line.quantity"}],staticClass:"form-control form-control-xs",class:{"is-invalid":m.errors["line_".concat(e,"_quantity")]},attrs:{type:"number",step:"0.001",min:"0"},domProps:{value:line.quantity},on:{blur:function(e){return m.calculateLineTotal(line)},input:function(e){e.target.composing||m.$set(line,"quantity",e.target.value)}}})]),m._v(" "),f("td",[f("input",{directives:[{name:"model",rawName:"v-model",value:line.unitPrice,expression:"line.unitPrice"}],staticClass:"form-control form-control-xs",class:{"is-invalid":m.errors["line_".concat(e,"_unitPrice")]},attrs:{type:"number",step:"0.01",min:"0"},domProps:{value:line.unitPrice},on:{blur:function(e){return m.calculateLineTotal(line)},input:function(e){e.target.composing||m.$set(line,"unitPrice",e.target.value)}}})]),m._v(" "),f("td",[f("select",{directives:[{name:"model",rawName:"v-model",value:line.DRglAccountId,expression:"line.DRglAccountId"}],staticClass:"form-control form-control-xs",class:{"is-invalid":m.errors["line_".concat(e,"_DRglAccountId")]},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));m.$set(line,"DRglAccountId",e.target.multiple?t:t[0])}}},[f("option",{attrs:{value:""}},[m._v("DR Account")]),m._v(" "),m._l(m.glAccounts,(function(e){return f("option",{key:e.id,domProps:{value:e.id}},[m._v("\n                            "+m._s(e.accountNumber)+" -\n                            "+m._s(e.accountName)+"\n                          ")])}))],2)]),m._v(" "),f("td",[f("select",{directives:[{name:"model",rawName:"v-model",value:line.CRglAccountId,expression:"line.CRglAccountId"}],staticClass:"form-control form-control-xs",class:{"is-invalid":m.errors["line_".concat(e,"_CRglAccountId")]},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));m.$set(line,"CRglAccountId",e.target.multiple?t:t[0])}}},[f("option",{attrs:{value:""}},[m._v("CR Account")]),m._v(" "),m._l(m.glAccounts,(function(e){return f("option",{key:e.id,domProps:{value:e.id}},[m._v("\n                            "+m._s(e.accountNumber)+" -\n                            "+m._s(e.accountName)+"\n                          ")])}))],2)]),m._v(" "),f("td",[f("input",{directives:[{name:"model",rawName:"v-model",value:line.discountRate,expression:"line.discountRate"}],staticClass:"form-control form-control-xs",attrs:{type:"number",step:"0.01",min:"0",max:"100"},domProps:{value:line.discountRate},on:{blur:function(e){return m.calculateLineTotal(line)},input:function(e){e.target.composing||m.$set(line,"discountRate",e.target.value)}}})]),m._v(" "),f("td",[f("input",{directives:[{name:"model",rawName:"v-model",value:line.taxRate,expression:"line.taxRate"}],staticClass:"form-control form-control-xs",attrs:{type:"number",step:"0.01",min:"0",max:"100"},domProps:{value:line.taxRate},on:{blur:function(e){return m.calculateLineTotal(line)},input:function(e){e.target.composing||m.$set(line,"taxRate",e.target.value)}}})]),m._v(" "),f("td",{staticClass:"line-total"},[m._v("\n                        "+m._s(m.formatCurrency(line.lineTotal||0,null===(t=m.selectedCurrency)||void 0===t?void 0:t.code))+"\n                      ")]),m._v(" "),f("td",[f("button",{staticClass:"btn btn-xs btn-danger",attrs:{type:"button",title:"ລຶບ"},on:{click:function(t){return m.removeLine(e)}}},[f("i",{staticClass:"fas fa-trash"})])])])})),0)])]),m._v(" "),f("div",{staticClass:"line-totals-summary"},[f("div",{staticClass:"totals-inline"},[f("span",{staticClass:"total-item"},[m._v("\n                    ລວມຍ່ອຍ:\n                    "),f("strong",[m._v(m._s(m.formatCurrency(m.calculatedSubtotal,null===(d=m.selectedCurrency)||void 0===d?void 0:d.code)))])]),m._v(" "),f("span",{staticClass:"total-item"},[m._v("\n                    ສ່ວນຫຼຸດ:\n                    "),f("strong",{staticClass:"discount"},[m._v("-"+m._s(m.formatCurrency(m.calculatedDiscount,null===(c=m.selectedCurrency)||void 0===c?void 0:c.code)))])]),m._v(" "),f("span",{staticClass:"total-item"},[m._v("\n                    ພາສີ:\n                    "),f("strong",[m._v("+"+m._s(m.formatCurrency(m.calculatedTax,null===(l=m.selectedCurrency)||void 0===l?void 0:l.code)))])]),m._v(" "),f("span",{staticClass:"total-item grand-total"},[m._v("\n                    ລວມທັງໝົດ:\n                    "),f("strong",[m._v(m._s(m.formatCurrency(m.calculatedTotal,null===(v=m.selectedCurrency)||void 0===v?void 0:v.code)))])]),m._v(" "),m.selectedCurrency&&"LAK"!==m.selectedCurrency.code&&m.form.exchangeRate?f("span",{staticClass:"total-item local-currency"},[m._v("\n                    LAK:\n                    "),f("strong",[m._v(m._s(m.formatCurrency(m.calculatedTotal*parseFloat(m.form.exchangeRate||1),"LAK")))])]):m._e()])])])])])])]),m._v(" "),f("div",{staticClass:"modal-footer"},[f("div",{staticClass:"footer-actions"},[f("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:m.saving},on:{click:m.handleClose}},[f("i",{staticClass:"fas fa-times"}),m._v("\n          ຍົກເລີກ\n        ")]),m._v(" "),f("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:m.saving||!m.isFormValid},on:{click:m.handleSubmit}},[m.saving?f("i",{staticClass:"fas fa-spinner fa-spin"}):f("i",{staticClass:"fas fa-save"}),m._v("\n          "+m._s(m.saving?"ກຳລັງບັນທຶກ...":m.isEdit?"ອັບເດດ":"ບັນທຶກ")+"\n        ")])])])]),m._v(" "),f("audit-log-dialog",{attrs:{visible:m.auditDialogVisible,"invoice-id":m.form.id,"invoice-info":m.getInvoiceInfo()},on:{close:m.closeAuditDialog}})],1):m._e()}),[function(){var e=this._self._c;return e("h5",{staticClass:"section-title"},[e("i",{staticClass:"fas fa-info-circle"}),this._v("\n                ຂໍ້ມູນພື້ນຖານ\n              ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticStyle:{width:"30px"}},[e._v("#")]),e._v(" "),t("th",{staticStyle:{width:"140px"}},[e._v("ລາຍລະອຽດ *")]),e._v(" "),t("th",{staticStyle:{width:"60px"}},[e._v("ຈຳນວນ *")]),e._v(" "),t("th",{staticStyle:{width:"70px"}},[e._v("ລາຄາ *")]),e._v(" "),t("th",{staticStyle:{width:"100px"}},[e._v("DR Account *")]),e._v(" "),t("th",{staticStyle:{width:"100px"}},[e._v("CR Account *")]),e._v(" "),t("th",{staticStyle:{width:"50px"}},[e._v("ຫຼຸດ%")]),e._v(" "),t("th",{staticStyle:{width:"50px"}},[e._v("ພາສີ%")]),e._v(" "),t("th",{staticStyle:{width:"80px"}},[e._v("ລວມ")]),e._v(" "),t("th",{staticStyle:{width:"40px"}},[e._v("ລຶບ")])])])}],!1,null,"66d19dee",null);t.default=component.exports}}]);