(window.webpackJsonp=window.webpackJsonp||[]).push([[196,141],{1696:function(t,e,n){"use strict";n.r(e);var r=n(316),o=n(313),c=n(18),l=n(317),d=n(780),f=n(789),m=n(1648),h=n(754),y=n(312),v=n(167),D=n(770),k=n(318),O=n(779),w=n(113),x=(n(35),n(131),n(5),n(53),n(34),n(66),n(449),n(10),n(7),n(11),n(8),n(12),n(20)),C=n(31),_=n(3),I=(n(92),n(9),n(63),n(30),n(75),n(333),n(877)),E=n(878),S=n(40),j=n(36);function F(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function R(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(Object(source),!0).forEach((function(e){Object(_.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):F(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P={components:{OrderForm:I.default,OrderStatusForm:E.default},middleware:"auths",data:function(){return{timer:null,barcode:"",statusFormDialog:!1,whatsappContactLink:"",guidelineDialog:!1,componentKey:1,orderStatusComponentKey:1,watchingLink:"OEGkC4zNgpY",selectedRiderId:"",formDialog:!1,entries:[],search:"",entrySelectedId:0,isCreate:!1,isloading:!1,dialogKey:1,headers:[{text:"ວັນທີສັ່ງ",align:"left",value:"bookingDate",sortable:!0},{text:"ຊືລູກຄ້າ",align:"left",value:"client.name",sortable:!0},{text:"ລາຍການສິນຄ້າ",align:"left",value:"name",sortable:!0},{text:"ຄຳອະທິບາຍ",align:"center",value:"note"},{text:"Tracking",align:"center",value:"trackingNumber"},{text:"Link",align:"center",value:"link"},{text:"ຮັບເຄື່ອງ",align:"end",value:"function",sortable:!1},{text:"ແຈ້ງລູກຄ້າ",align:"end",value:"notify",sortable:!1},{text:"ແກ້ໄຂ",align:"end",value:"edit",sortable:!1},{text:"ສະຖານະ",align:"end",value:"status",sortable:!1}],menu1:!1,menu2:!1,date:Object(j.d)(),date2:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateFormatted:this.formatDate(Object(j.d)()),dateFormatted2:this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10))}},mounted:function(){this.loadData(),window.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown)},computed:R(R({},Object(S.c)(["findAllPayment","findAllCurrency"])),{},{user:function(){return this.$auth.user||""},findTHBCurrencyId:function(){return this.findAllCurrency.find((function(t){return"THB"==t.code})).id},localStatus:function(){return[{name:"ຍັງບໍ່ເຂົ້າສາງ",code:"ORDERED"},{name:"ເຄື່ອງເຂົ້າສາງ",code:"RECEIVED"},{name:"ຮັບແລ້ວ",code:"INVOICED"}]},orderSummary:function(){var t=this,e=this.orderPriceSummary(this.entries.filter((function(t){return"ORDERED"==t.status})),!0),n=this.orderPriceTHBSummary(this.entries.filter((function(e){return"ORDERED"==e.status&&e.currencyId==t.findTHBCurrencyId})),!0),r=this.orderPriceSummary(this.entries.filter((function(t){return"RECEIVED"==t.status})),!0),o=this.orderPriceTHBSummary(this.entries.filter((function(e){return"RECEIVED"==e.status&&e.currencyId==t.findTHBCurrencyId})),!0),c=this.orderPriceSummary(this.entries.filter((function(t){return"INVOICED"==t.status})),!0),l=this.orderPriceTHBSummary(this.entries.filter((function(e){return"INVOICED"==e.status&&e.currencyId==t.findTHBCurrencyId})),!0),d=this.orderPriceSummary(this.entries.filter((function(t){return"ORDERED"==t.status})),!1),f=this.orderPriceTHBSummary(this.entries.filter((function(e){return"ORDERED"==e.status&&e.shippingFeeCurrencyId==t.findTHBCurrencyId})),!1),m=this.orderPriceSummary(this.entries.filter((function(t){return"RECEIVED"==t.status})),!1),h=this.orderPriceTHBSummary(this.entries.filter((function(e){return"RECEIVED"==e.status&&e.shippingFeeCurrencyId==t.findTHBCurrencyId})),!1),y=this.orderPriceSummary(this.entries.filter((function(t){return"INVOICED"==t.status})),!1),v=this.orderPriceTHBSummary(this.entries.filter((function(e){return"INVOICED"==e.status&&e.shippingFeeCurrencyId==t.findTHBCurrencyId})),!1);return[{name:"ອໍເດີ ",amount:Object(j.e)(e),amountTHB:Object(j.e)(n),value:Object(j.e)(this.entries.filter((function(t){return"ORDERED"==t.status})).length),deliveryFee:Object(j.e)(d),deliveryFeeTHB:Object(j.e)(f)},{name:"ອໍເດີ ຮັບເຂົ້າສາງ",amount:Object(j.e)(r),amountTHB:Object(j.e)(o),value:Object(j.e)(this.entries.filter((function(t){return"RECEIVED"==t.status})).length),deliveryFee:Object(j.e)(m),deliveryFeeTHB:Object(j.e)(h)},{name:"ອໍເດີ ຈັດສົ່ງລູກຄ້າ",amount:Object(j.e)(c),amountTHB:Object(j.e)(l),value:Object(j.e)(this.entries.filter((function(t){return"INVOICED"==t.status})).length),deliveryFee:Object(j.e)(y),deliveryFeeTHB:Object(j.e)(v)}]}}),watch:{date:function(t){this.dateFormatted=this.formatDate(this.date),this.loadData()},date2:function(t){this.dateFormatted2=this.formatDate(this.date2),this.loadData()}},methods:{getFormatNum:function(t){return Object(j.e)(t)},orderPriceSummary:function(t,e){var n=e?"price":"shippingFee",r=e?"priceRate":"shippingRate";return t.reduce((function(t,e){return t+e[n]*e[r]}),0)},orderPriceTHBSummary:function(t,e){var n=e?"price":"shippingFee";return t.reduce((function(t,e){return t+e[n]}),0)},handleKeyDown:function(t){var e=this;if(this.timer&&clearInterval(this.timer),"Enter"==t.key)return this.barcode&&this.findProductFromBarcode(this.barcode),void(this.barcode="");"Shift"!=t.key&&(this.barcode+=t.key),this.timer=setInterval((function(){return e.barcode=""}),20)},exportToExcel:function(){var t=this.$xlsx.utils.json_to_sheet(this.entries),e=this.$xlsx.utils.book_new();this.$xlsx.utils.book_append_sheet(e,t,"Sheet1"),this.$xlsx.writeFile(e,"data.xlsx")},formatDate:function(t){if(!t)return null;var e=t.split("-"),n=Object(C.a)(e,3),r=n[0],o=n[1],c=n[2];return"".concat(o,"/").concat(c,"/").concat(r)},countDay:function(t){return Object(j.b)(t)},viewItem:function(t){this.updateViewCount(t.id),this.watchingLink=t.youtubeLink,this.dialogKey+=1,this.guidelineDialog=!0},createRecord:function(){this.componentKey+=1,this.entrySelectedId=0,this.isCreate=!0,this.formDialog=!0},handleEvent:function(){this.formDialog=!1},editItem:function(t){this.componentKey+=1,this.entrySelectedId=t.id,this.formDialog=!0,this.isCreate=!1},changeOrderStatus:function(t){this.orderStatusComponentKey+=1,this.entrySelectedId=t.id,this.statusFormDialog=!0,this.isCreate=!1},whatsappLink:function(t){console.log("******** customer tel ".concat(t," *******"));var e=t.client.telephone.trim(),n=e.substring(e.length-8);this.whatsappContactLink="https://api.whatsapp.com/send?phone=+85620".concat(n,"&text=").concat(encodeURIComponent("ສະບາຍດີ ລູກຄ້າ ".concat(t.client.name," \n ອໍເດີ 🛒 : ").concat(t.trackingNumber," \n ສິນຄ້າ: ").concat(t.name," \n ວັນທີສັ່ງ: ").concat(t.bookingDate," \n ລິ້ງ: ").concat(t.link," \n 🔔🔔🔔 ເຄຶ່ອງມາຮອດສາງແລ້ວ 🔔🔔🔔")))},parseDate:function(t){if(!t)return null;var e=t.split("/"),n=Object(C.a)(e,3),r=n[0],o=n[1],c=n[2];return"".concat(c,"-").concat(r.padStart(2,"0"),"-").concat(o.padStart(2,"0"))},loadData:function(){var t=this;return Object(x.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.statusFormDialog=!1,t.formDialog=!1,n={startDate:t.date,endDate:t.date2,userId:t.userId},e.next=5,t.$axios.get("api/order/findAllByDate",{params:{date:n}}).then((function(e){t.isloading=!0,t.entries=e.data})).catch((function(t){console.log("Error ",t)}));case 5:t.isloading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},T=n(32),component=Object(T.a)(P,(function(){var t=this,e=t._self._c;return e("div",[e(h.a,{attrs:{"max-width":"1024"},model:{value:t.formDialog,callback:function(e){t.formDialog=e},expression:"formDialog"}},[e("order-form",{key:t.componentKey,attrs:{"is-create":t.isCreate,"record-id":t.entrySelectedId},on:{"close-dialog":t.handleEvent,"reload-data":t.loadData}})],1),t._v(" "),e(h.a,{attrs:{"max-width":"1024"},model:{value:t.statusFormDialog,callback:function(e){t.statusFormDialog=e},expression:"statusFormDialog"}},[e("order-status-form",{key:t.orderStatusComponentKey,attrs:{"is-create":t.isCreate,"record-id":t.entrySelectedId},on:{"close-dialog":function(e){t.statusFormDialog=!1},"reload-data":t.loadData}})],1),t._v(" "),e(h.a,{key:t.dialogKey,attrs:{"hide-overlay":"","max-width":"700"},model:{value:t.guidelineDialog,callback:function(e){t.guidelineDialog=e},expression:"guidelineDialog"}},[e("youtube-player",{attrs:{"youtube-link":t.watchingLink},on:{"close-dialog":function(e){t.guidelineDialog=!1}}})],1),t._v(" "),e(l.a,{staticClass:"pa-5",attrs:{color:"primary",label:"","text-color":"white"}},[e(v.a,{attrs:{start:""}},[t._v("mdi mdi-lifebuoy")]),t._v(" "),e("h3",[t._v("ສາທິດການນຳໃຊ້ລະບົບ")])],1),t._v(" "),e(h.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(o.a,[e(c.d,[e(D.a,{attrs:{row:"",wrap:""}},[e(d.a,{attrs:{cols:"4"}},[e(k.a,{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"1024"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(w.a,t._g(t._b({attrs:{label:"ຈາກວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),e(k.a,{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(w.a,t._g(t._b({attrs:{label:"ຫາວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date2=t.parseDate(t.dateFormatted2)}},model:{value:t.dateFormatted2,callback:function(e){t.dateFormatted2=e},expression:"dateFormatted2"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1),t._v(" "),e(w.a,{attrs:{"append-icon":"mdi-magnify",label:"ຊອກຫາ","single-line":"","hide-detailsx":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),e(O.a,[e(d.a,{staticClass:"text-left",attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.createRecord}},[e("span",{staticClass:"mdi mdi-plus"}),t._v("Create\n              ")])],1),t._v(" "),e(d.a,{staticClass:"text-right",attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.loadData}},[e("span",{staticClass:"mdi mdi-cloud-download"}),t._v("\n                ດຶງລາຍງານ\n              ")])],1)],1)],1),t._v(" "),e(d.a,{attrs:{cols:"8"}},[e("order-sumary-card-v-2",{staticClass:"pa-4",attrs:{orderDetail:t.orderSummary}})],1)],1)],1),t._v(" "),e(y.a),t._v(" "),e(c.c),t._v(" "),t.entries?e(f.a,{attrs:{headers:t.headers,search:t.search,items:t.entries},scopedSlots:t._u([{key:"item.bookingDate",fn:function(n){var r=n.item;return[t._v("\n        "+t._s(r.bookingDate)+"\n        "),t._v(" "),e("h6",{style:{color:t.countDay(r.bookingDate)>30?"red":"green"}},[t._v("\n          "+t._s(t.countDay(r.bookingDate))+"\n        ")])]}},{key:"item.edit",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){t.editItem(o),t.isedit=!0}}},[e("i",{staticClass:"fa-regular fa-pen-to-square"})])]}},{key:"item.function",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){t.changeOrderStatus(o),t.isedit=!0}}},[e("i",{staticClass:"fa fa-cart-flatbed"})])]}},{key:"item.status",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""}},[t._v("\n          "+t._s(t.localStatus.find((function(t){return t.code==o.status})).name)+"\n        ")])]}},{key:"item.notify",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.whatsappLink(o)}}},[e("a",{attrs:{href:t.whatsappContactLink,target:"_blank"}},[e("span",{staticClass:"mdi mdi-whatsapp"})])]),t._v("\n        "+t._s(o.client.telephone)+"\n      ")]}},{key:"item.link",fn:function(t){var n=t.item;return[e("a",{attrs:{href:n.link,target:"_blank"}},[e("i",{staticClass:"fa-solid fa-link"})])]}}],null,!0)}):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{OrderForm:n(877).default,OrderStatusForm:n(878).default,YoutubePlayer:n(802).default,LoadingIndicator:n(248).default})},802:function(t,e,n){"use strict";n.r(e);var r=n(316),o=n(313),c=n(18),l=n(777),d=(n(36),{props:{youtubeLink:{type:String,require:!0}}}),f=n(32),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(o.a,[e(c.c,{staticClass:"text-center"},[e("youtube",{attrs:{"video-id":t.youtubeLink}})],1),t._v(" "),e(c.a,[e(l.a),t._v(" "),e(r.a,{staticClass:"warning",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:function(e){return t.$emit("close-dialog")}}},[t._v("\n                Close\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);