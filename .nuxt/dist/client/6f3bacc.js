(window.webpackJsonp=window.webpackJsonp||[]).push([[220],{1254:function(t,e,n){var content=n(1563);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("6990c58c",content,!0,{sourceMap:!1})},1562:function(t,e,n){"use strict";n(1254)},1563:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".ministry-settlement-report[data-v-a20daef2]{padding:0}.report-header[data-v-a20daef2]{align-items:center;background:#01532b;border-radius:8px;color:#fff;display:flex;justify-content:space-between;margin-bottom:24px;padding:20px}.title-section h1[data-v-a20daef2]{font-size:28px;font-weight:600;margin:0}.title-section p[data-v-a20daef2]{font-size:14px;margin:5px 0 0;opacity:.9}.action-buttons[data-v-a20daef2]{gap:12px}.custom-btn[data-v-a20daef2]{border:1px solid #fff!important;color:#fff!important;font-weight:500!important;text-transform:none!important}.custom-btn[data-v-a20daef2]:hover{background-color:#fff!important;color:#01532b!important}.filter-card[data-v-a20daef2]{background:#fff;border-radius:8px}.filter-title[data-v-a20daef2]{background:#01532b;color:#fff;font-weight:600}.custom-primary-btn[data-v-a20daef2]{background-color:#01532b!important;color:#fff!important;font-weight:500!important;text-transform:none!important}.custom-primary-btn[data-v-a20daef2]:hover{background-color:#014025!important}.custom-secondary-btn[data-v-a20daef2]{background-color:#6c757d!important;color:#fff!important;font-weight:500!important;text-transform:none!important}.custom-secondary-btn[data-v-a20daef2]:hover{background-color:#5a6268!important}.summary-cards[data-v-a20daef2]{margin-bottom:24px}.summary-card[data-v-a20daef2]{border-radius:8px;height:140px;overflow:hidden;position:relative}.summary-card[data-v-a20daef2]:hover{transform:translateY(-2px)}.summary-content[data-v-a20daef2]{align-items:center;display:flex;height:100%}.summary-icon[data-v-a20daef2]{font-size:48px;margin-right:16px;opacity:.8}.summary-details h3[data-v-a20daef2]{color:#fff;font-size:16px;font-weight:600;margin:0}.summary-details p[data-v-a20daef2]{color:hsla(0,0%,100%,.9);font-size:12px;margin:4px 0}.summary-details h2[data-v-a20daef2]{color:#fff;font-size:24px;font-weight:700;margin:8px 0 0}.summary-lcy[data-v-a20daef2]{font-size:11px;margin-top:4px!important;opacity:.8}.amount-card[data-v-a20daef2],.lak-card[data-v-a20daef2],.ministries-card[data-v-a20daef2],.section-header[data-v-a20daef2],.settlement-card[data-v-a20daef2]{background:#01532b;color:#fff}.section-header[data-v-a20daef2]{font-weight:600}.currency-breakdown[data-v-a20daef2]{margin-bottom:24px}.currency-card[data-v-a20daef2]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;height:100%;padding:16px;text-align:center}.currency-header[data-v-a20daef2]{align-items:center;display:flex;justify-content:space-between;margin-bottom:12px}.currency-flag[data-v-a20daef2]{font-size:24px}.currency-stats[data-v-a20daef2]{text-align:center}.original-amount[data-v-a20daef2]{color:#01532b;font-family:monospace;font-size:18px;font-weight:700;margin-bottom:4px}.lak-equivalent[data-v-a20daef2]{color:#f59e0b;font-family:monospace;font-size:14px;font-weight:600;margin-bottom:8px}.settlement-count[data-v-a20daef2]{color:#666;font-size:12px;margin-bottom:4px}.percentage[data-v-a20daef2]{color:#999;font-size:11px}.custom-progress[data-v-a20daef2]{color:#01532b!important}.chart-card[data-v-a20daef2]{border-radius:8px;margin-bottom:24px}.chart-container[data-v-a20daef2]{height:400px;position:relative}.ministries-container[data-v-a20daef2]{border-radius:8px;margin-bottom:24px}.search-field[data-v-a20daef2]{max-width:300px}.search-field[data-v-a20daef2] .v-icon,.search-field[data-v-a20daef2] input{color:#fff!important}.section-subtitle[data-v-a20daef2]{color:#01532b;font-size:18px;font-weight:600;margin:0}.progress-section[data-v-a20daef2]{background:#f8f9fa;border-radius:8px;padding:20px}.progress-item[data-v-a20daef2]{background:#fff;border-radius:8px;margin-bottom:16px;padding:16px}.rank-chip[data-v-a20daef2]{background-color:#01532b!important}.ml-3[data-v-a20daef2]{margin-left:12px}.ministry-name[data-v-a20daef2]{color:#01532b;font-size:16px;font-weight:600;margin:0}.ministry-code[data-v-a20daef2]{color:#666;font-size:12px;margin:4px 0 0}.amount-display[data-v-a20daef2]{color:#01532b;font-family:monospace;font-size:18px;font-weight:700}.count-display[data-v-a20daef2]{color:#666;font-size:12px;margin-top:2px}.progress-percentage[data-v-a20daef2]{color:#666;font-size:11px;margin-top:4px;text-align:right}.ministry-cards-grid[data-v-a20daef2]{background:#f8f9fa;border-radius:8px;padding:20px}.ministry-card[data-v-a20daef2]{border-radius:8px;cursor:pointer;height:100%}.ministry-card[data-v-a20daef2]:hover{transform:translateY(-2px)}.ministry-card.selected[data-v-a20daef2]{border:2px solid #01532b}.ministry-header[data-v-a20daef2]{align-items:flex-start;display:flex;justify-content:space-between}.ministry-info .rank-badge[data-v-a20daef2]{margin-bottom:8px}.ministry-title[data-v-a20daef2]{color:#01532b;font-size:16px;font-weight:600;line-height:1.3;margin:0}.ministry-code-display[data-v-a20daef2]{color:#666;font-family:monospace;font-size:12px;margin:4px 0}.ministry-icon[data-v-a20daef2]{color:#01532b;font-size:24px;opacity:.7}.stat-item[data-v-a20daef2]{align-items:center;display:flex;justify-content:space-between;margin-bottom:8px}.stat-label[data-v-a20daef2]{color:#666;font-size:12px}.stat-value[data-v-a20daef2]{font-size:13px;font-weight:600}.amount-value[data-v-a20daef2],.average-value[data-v-a20daef2],.count-value[data-v-a20daef2],.percentage-value[data-v-a20daef2]{color:#01532b}.view-details-btn[data-v-a20daef2]{background-color:#01532b!important;color:#fff!important;font-weight:500!important;text-transform:none!important}.view-details-btn[data-v-a20daef2]:hover{background-color:#014025!important}.no-data-state[data-v-a20daef2]{padding:48px 24px;text-align:center}.no-data-icon[data-v-a20daef2]{color:#ccc;font-size:64px;margin-bottom:16px}.no-data-title[data-v-a20daef2]{color:#666;font-size:18px;margin:0 0 8px}.no-data-subtitle[data-v-a20daef2]{color:#999;font-size:14px;margin:0}.dialog-header[data-v-a20daef2]{background:#01532b!important;font-weight:600!important}.close-btn[data-v-a20daef2],.dialog-header[data-v-a20daef2]{color:#fff!important}.section-title[data-v-a20daef2]{color:#01532b;font-size:18px;font-weight:600;margin:0}.custom-divider[data-v-a20daef2]{border-color:#01532b!important;opacity:.3!important}.detail-stat[data-v-a20daef2]{align-items:center;background:#f8f9fa;border-left:3px solid #01532b;border-radius:8px;display:flex;height:100%;padding:12px}.stat-icon[data-v-a20daef2]{color:#01532b;font-size:20px;margin-right:12px}.stat-info strong[data-v-a20daef2]{color:#666;display:block;font-size:12px;margin-bottom:4px}.stat-number[data-v-a20daef2]{color:#01532b;font-family:monospace;font-size:14px;font-weight:600;margin:0}.method-card[data-v-a20daef2]{background:#f8f9fa;border-left:3px solid #01532b;border-radius:8px;height:100%;padding:16px;text-align:center}.method-header[data-v-a20daef2]{margin-bottom:12px}.method-count[data-v-a20daef2]{color:#666;font-size:14px;margin-bottom:4px}.method-amount[data-v-a20daef2]{color:#01532b;font-family:monospace;font-size:18px;font-weight:600;margin-bottom:4px}.method-percentage[data-v-a20daef2]{color:#999;font-size:12px}.filter-buttons[data-v-a20daef2]{display:flex;flex-wrap:wrap;gap:8px}.custom-outline-btn[data-v-a20daef2]{background-color:#fff!important;border:1px solid #01532b!important;color:#01532b!important;font-weight:500!important;text-transform:none!important}.custom-outline-btn[data-v-a20daef2]:hover{background-color:#f8f9fa!important}.settlement-table[data-v-a20daef2]{background:#fff}.settlement-table[data-v-a20daef2] thead th{background-color:#01532b!important;color:#fff!important;font-weight:600!important}.settlement-table[data-v-a20daef2] tbody tr:hover{background-color:rgba(1,83,43,.1)!important}.date-cell[data-v-a20daef2]{color:#01532b;font-family:monospace;font-size:13px}.amount-breakdown[data-v-a20daef2]{align-items:center;display:flex;flex-direction:column}.amount-cell[data-v-a20daef2]{color:#01532b;font-family:monospace;font-size:13px;font-weight:600}.exchange-rate-cell[data-v-a20daef2]{text-align:center}.exchange-rate-cell .default-rate[data-v-a20daef2]{color:#999;font-style:italic}.lak-amount-cell[data-v-a20daef2]{text-align:center}.lak-amount[data-v-a20daef2]{color:#f59e0b;font-family:monospace;font-size:13px;font-weight:600}.user-info .user-name[data-v-a20daef2]{color:#01532b;font-weight:500}.chart-account-info[data-v-a20daef2]{display:flex;flex-direction:column}.account-name[data-v-a20daef2]{color:#01532b;font-size:13px;font-weight:500}.account-code[data-v-a20daef2]{font-family:monospace}.account-code[data-v-a20daef2],.advance-info .advance-purpose[data-v-a20daef2]{color:#666;font-size:10px;margin-top:2px}.advance-info .advance-status[data-v-a20daef2]{color:#999;font-size:9px;margin-top:1px}.no-account[data-v-a20daef2],.no-advance[data-v-a20daef2]{color:#999;font-style:italic}.action-buttons[data-v-a20daef2]{display:flex;gap:4px}.custom-action-btn[data-v-a20daef2]{background-color:#01532b!important;color:#fff!important;font-size:11px!important;font-weight:500!important;text-transform:none!important}.custom-action-btn[data-v-a20daef2]:hover{background-color:#014025!important}.custom-notes-btn[data-v-a20daef2]{background-color:#228b22!important;color:#fff!important;font-size:11px!important;font-weight:500!important;text-transform:none!important}.custom-notes-btn[data-v-a20daef2]:hover{background-color:#1e7d1e!important}.no-filtered-data[data-v-a20daef2]{color:#666;padding:24px;text-align:center}.no-filtered-data i[data-v-a20daef2]{color:#ccc;font-size:32px;margin-bottom:8px}.notes-content[data-v-a20daef2]{line-height:1.6;padding:24px;white-space:pre-wrap}@media (max-width:768px){.report-header[data-v-a20daef2]{flex-direction:column;gap:16px;padding:16px;text-align:center}.title-section h1[data-v-a20daef2]{font-size:24px}.action-buttons[data-v-a20daef2]{flex-wrap:wrap;justify-content:center}.summary-content[data-v-a20daef2]{flex-direction:column;text-align:center}.summary-icon[data-v-a20daef2]{margin-bottom:8px;margin-right:0}.chart-container[data-v-a20daef2]{height:300px}.ministry-header[data-v-a20daef2]{flex-direction:column;text-align:center}.ministry-icon[data-v-a20daef2]{margin-top:8px}.detail-stat[data-v-a20daef2]{flex-direction:column;text-align:center}.stat-icon[data-v-a20daef2]{margin-bottom:8px;margin-right:0}.filter-buttons[data-v-a20daef2]{justify-content:center}.progress-item[data-v-a20daef2]{padding:12px}.amount-display[data-v-a20daef2]{font-size:16px}}@media print{.action-buttons[data-v-a20daef2],.filter-card[data-v-a20daef2],.v-btn[data-v-a20daef2]{display:none!important}.chart-card[data-v-a20daef2],.summary-cards[data-v-a20daef2]{page-break-inside:avoid}.report-header[data-v-a20daef2]{background:#01532b!important;color:#fff!important;-webkit-print-color-adjust:exact}}",""]),r.locals={},t.exports=r},1745:function(t,e,n){"use strict";n.r(e);var r=n(316),o=n(313),c=n(18),l=n(317),d=n(780),m=n(789),f=n(1625),v=n(754),h=n(312),y=n(167),C=n(318),_=n(252),x=n(314),k=n(779),w=n(65),D=n(777),M=n(113),A=(n(34),n(131),n(20)),S=n(33),z=(n(92),n(9),n(5),n(35),n(39),n(51),n(30),n(44),n(823),n(54),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(53),n(8),n(69),n(446),n(10),n(62),n(818),n(858)),R={name:"MinistrySettlementReport",head:function(){return{title:"Ministry Settlement Reports"}},data:function(){return{loading:!1,exporting:!1,loadingDetails:!1,search:"",startDateMenu:!1,endDateMenu:!1,settlementDialog:!1,topMinistries:[],selectedMinistry:null,selectedSettlements:[],settlementSummary:{totalAmount:0,settlementCount:0},methodDistribution:[],currencyBreakdown:[],currencies:[],pagination:{currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10},filters:{startDate:null,endDate:null,limit:"10",currencyId:null},selectedMethodFilter:"",showNotesModal:!1,selectedNotes:"",ministryChart:null,limitOptions:[{text:"ອັນດັບ 5 (Top 5)",value:"5"},{text:"ອັນດັບ 10 (Top 10)",value:"10"},{text:"ອັນດັບ 15 (Top 15)",value:"15"},{text:"ອັນດັບ 20 (Top 20)",value:"20"}],settlementHeaders:[{text:"ວັນທີລົງບັນທຶກ",value:"bookingDate",width:"120px"},{text:"ສະກຸນເງິນ",value:"currency",width:"80px"},{text:"ຈຳນວນເງິນຕົ້ນ",value:"amount",width:"130px"},{text:"ອັດຕາແລກປ່ຽນ",value:"exchangeRate",width:"100px"},{text:"ເທົ່າກັບລາວກີບ",value:"lakAmount",width:"130px"},{text:"ວິທີການ",value:"method",width:"100px"},{text:"ຜູ້ດຳເນີນການ",value:"proceeder",width:"130px"},{text:"ບັນຊີຜັງບັນຊີ",value:"chartAccount",width:"150px"},{text:"ເງິນກ່ອນ",value:"moneyAdvance",width:"120px"},{text:"ຈັດການ",value:"actions",sortable:!1,width:"120px"}]}},computed:{filteredMinistries:function(){var t=this;return this.search?this.topMinistries.filter((function(e){var n,r,o,c;return(null===(n=e.ministry)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.toLowerCase().includes(t.search.toLowerCase()))||(null===(o=e.ministry)||void 0===o||null===(c=o.code)||void 0===c?void 0:c.toLowerCase().includes(t.search.toLowerCase()))})):this.topMinistries},maxAmount:function(){return Math.max.apply(Math,Object(S.a)(this.topMinistries.map((function(t){return t.totalAmount}))).concat([0]))},totalAmount:function(){return this.topMinistries.reduce((function(t,e){return t+parseFloat(e.totalAmount)}),0)},totalSettlements:function(){return this.topMinistries.reduce((function(t,e){return t+parseInt(e.settlementCount)}),0)},averageAmount:function(){return this.totalSettlements>0?this.totalAmount/this.totalSettlements:0},availableMethods:function(){var t=new Set;return this.selectedSettlements.forEach((function(e){t.add(e.method)})),Array.from(t)},filteredSettlements:function(){var t=this;return this.selectedMethodFilter?this.selectedSettlements.filter((function(e){return e.method===t.selectedMethodFilter})):this.selectedSettlements},currencyOptions:function(){var t=[{text:"ທັງໝົດສະກຸນເງິນ (All Currencies)",value:null}];return this.currencies.forEach((function(e){e.isActive&&t.push({text:"".concat(e.name," (").concat(e.code,")"),value:e.id})})),t},uniqueCurrencies:function(){return this.currencyBreakdown.length||0},totalLakAmount:function(){return this.currencyBreakdown.reduce((function(t,e){return t+(e.lakEquivalent||0)}),0)}},mounted:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadCurrencies();case 2:t.setDefaultDates(),t.loadMinistryData(),t.$nextTick((function(){t.initializeChart()}));case 5:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.ministryChart&&this.ministryChart.destroy()},methods:{loadCurrencies:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/currency/find");case 3:(n=e.sent).data.success&&(t.currencies=n.data.data||[]),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error loading currencies:",e.t0),t.currencies=[{id:1,code:"LAK",name:"Lao Kip",isActive:!0,isLocalCCY:!0,rate:1},{id:2,code:"USD",name:"US Dollar",isActive:!0,isLocalCCY:!1,rate:21e3},{id:3,code:"THB",name:"Thai Baht",isActive:!0,isLocalCCY:!1,rate:650}];case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},setDefaultDates:function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1);this.filters.startDate=e.toISOString().substr(0,10),this.filters.endDate=t.toISOString().substr(0,10)},loadMinistryData:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=new URLSearchParams,t.filters.startDate&&n.append("startDate",t.filters.startDate),t.filters.endDate&&n.append("endDate",t.filters.endDate),t.filters.limit&&n.append("limit",t.filters.limit),t.filters.currencyId&&n.append("currencyId",t.filters.currencyId),e.next=9,t.$axios.get("/api/settlements/analytics/top-ministries?".concat(n));case 9:if(!(r=e.sent).data.success){e.next=15;break}return t.topMinistries=r.data.data.topMinistries||[],e.next=14,t.calculateCurrencyBreakdown();case 14:t.updateChart();case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error loading ministry data:",e.t0),t.$toast.error("Failed to load ministry reports");case 21:return e.prev=21,t.loading=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,17,21,24]])})))()},calculateCurrencyBreakdown:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URLSearchParams,t.filters.startDate&&n.append("startDate",t.filters.startDate),t.filters.endDate&&n.append("endDate",t.filters.endDate),t.filters.limit&&n.append("limit",t.filters.limit),t.filters.currencyId&&n.append("currencyId",t.filters.currencyId),e.next=8,t.$axios.get("/api/settlements/currency-breakdown?".concat(n));case 8:(r=e.sent).data.success&&(t.currencyBreakdown=r.data.data.currencies||[]),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error calculating currency breakdown:",e.t0),t.currencyBreakdown=[];case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},selectMinistry:function(t,e){var n=this;return Object(A.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.loadingDetails=!0,n.settlementDialog=!0,r.prev=2,r.next=5,n.$axios.get("/api/settlements/by-ministry/".concat(t));case 5:(o=r.sent).data.success&&(n.selectedSettlements=o.data.data.settlements,n.settlementSummary=o.data.data.summary,n.pagination=o.data.data.pagination||n.pagination,n.selectedMinistry=e,n.selectedMethodFilter="",n.calculateMethodDistribution()),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(2),console.error("Error loading ministry settlements:",r.t0),n.$toast.error("Failed to load settlement details");case 13:return r.prev=13,n.loadingDetails=!1,r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[2,9,13,16]])})))()},calculateMethodDistribution:function(){var t={};this.selectedSettlements.forEach((function(e){t[e.method]||(t[e.method]={count:0,total:0}),t[e.method].count++,t[e.method].total+=parseFloat(e.amount)})),this.methodDistribution=Object.keys(t).map((function(e){return{method:e,count:t[e].count,total:t[e].total}}))},filterByMethod:function(t){this.selectedMethodFilter=t},getMethodDistribution:function(){if(0===this.methodDistribution.length)return"N/A";var t=this.methodDistribution.reduce((function(t,e){return t.count>e.count?t:e}));return this.formatMethod(t.method)},getAdvancePercentage:function(){if(0===this.selectedSettlements.length)return 0;var t=this.selectedSettlements.filter((function(s){return s.moneyAdvanceId})).length;return Math.round(t/this.selectedSettlements.length*100)},resetFilters:function(){this.filters={startDate:null,endDate:null,limit:"10",currencyId:null},this.setDefaultDates(),this.loadMinistryData()},initializeChart:function(){if(this.$refs.ministryChart){var t=this.$refs.ministryChart.getContext("2d");this.ministryChart=new z.default(t,{type:"horizontalBar",data:{labels:[],datasets:[{label:"ຈຳນວນເງິນ (Amount)",data:[],backgroundColor:"#01532B",borderColor:"#01532B",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{ticks:{beginAtZero:!0,callback:function(t){return"$"+new Intl.NumberFormat("en-US").format(t)}}}]},legend:{display:!1},tooltips:{callbacks:{label:function(t,data){return"$"+new Intl.NumberFormat("en-US").format(t.xLabel)}}}}})}},updateChart:function(){if(this.ministryChart&&0!==this.topMinistries.length){var t=this.topMinistries.map((function(t){return t.ministry.ministryName.length>20?t.ministry.ministryName.substring(0,20)+"...":t.ministry.ministryName})).slice(0,8),e=this.topMinistries.map((function(t){return parseFloat(t.totalAmount)})).slice(0,8);this.ministryChart.data.labels=t,this.ministryChart.data.datasets[0].data=e,this.ministryChart.update()}},closeDialog:function(){this.settlementDialog=!1,this.selectedMinistry=null,this.selectedSettlements=[],this.methodDistribution=[]},exportToExcel:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,r,o,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.exporting=!0,e.prev=1,n=new URLSearchParams,Object.keys(t.filters).forEach((function(e){t.filters[e]&&n.append(e,t.filters[e])})),e.next=6,t.$axios.get("/api/settlements/analytics/top-ministries/export?".concat(n),{responseType:"blob"});case 6:r=e.sent,o=new Blob([r.data]),(link=document.createElement("a")).href=window.URL.createObjectURL(o),link.download="ministry-settlement-report-".concat(t.filters.startDate,"-").concat(t.filters.endDate,".xlsx"),link.click(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error exporting report:",e.t0),t.$toast.error("Error exporting report");case 18:return e.prev=18,t.exporting=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})))()},printReport:function(){window.print()},viewSettlement:function(t){this.$router.push("/settlements/".concat(t))},showNotes:function(t){this.selectedNotes=t,this.showNotesModal=!0},getMethodColor:function(t){return{cash:"#01532B",bank_transfer:"#228B22",deduction:"#FF8C00"}[t]||"#01532B"},getCurrencyColor:function(t){return{LAK:"#01532B",USD:"#01532B",THB:"#01532B",CNY:"#666",EUR:"#666",JPY:"#666",GBP:"#666",KRW:"#666"}[t]||"#01532B"},getCurrencyFlag:function(t){return{LAK:"🇱🇦",USD:"🇺🇸",THB:"🇹🇭",CNY:"🇨🇳",EUR:"🇪🇺",JPY:"🇯🇵",GBP:"🇬🇧",KRW:"🇰🇷"}[t]||"🏳️"},calculateLakAmount:function(t,e){return t?t*(e||1):0},formatCurrency:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";if(!t)return"0.00";var n=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return"LAK"===e?n+" ₭":"USD"===e?"$"+n:"THB"===e?n+" ฿":"CNY"===e?"¥"+n:"EUR"===e?"€"+n:n+" "+e},formatExchangeRate:function(t){return t?new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}).format(t):"1.0000"},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""},formatMethod:function(t){return{cash:"ເງິນສົດ (Cash)",bank_transfer:"ໂອນເງິນ (Transfer)",deduction:"ຫັກລົບ (Deduction)"}[t]||t}}},B=R,L=(n(1562),n(32)),component=Object(L.a)(B,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ministry-settlement-report"},[e("div",{staticClass:"report-header"},[t._m(0),t._v(" "),e("div",{staticClass:"action-buttons"},[e(r.a,{staticClass:"custom-btn",attrs:{loading:t.exporting},on:{click:t.exportToExcel}},[e("i",{staticClass:"fas fa-file-excel"}),t._v("\n        Export Excel\n      ")]),t._v(" "),e(r.a,{staticClass:"custom-btn",on:{click:t.printReport}},[e("i",{staticClass:"fas fa-print"}),t._v("\n        Print\n      ")])],1)]),t._v(" "),e(o.a,{staticClass:"filter-card mb-4",attrs:{elevation:"2"}},[e(c.d,{staticClass:"filter-title d-flex align-center"},[e(y.a,{staticClass:"mr-2"},[t._v("mdi-filter")]),t._v("\n      ຕົວກອງ (Filters)\n    ")],1),t._v(" "),e(c.c,{staticClass:"pt-4 pb-4 px-4"},[e(k.a,{attrs:{dense:""}},[e(d.a,{attrs:{cols:"12",md:"2"}},[e(C.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(M.a,t._g(t._b({attrs:{label:"ວັນທີເລີ່ມຕົ້ນ (Start Date)","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:""},model:{value:t.filters.startDate,callback:function(e){t.$set(t.filters,"startDate",e)},expression:"filters.startDate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.startDateMenu,callback:function(e){t.startDateMenu=e},expression:"startDateMenu"}},[t._v(" "),e(f.a,{attrs:{color:"#01532B"},on:{input:function(e){t.startDateMenu=!1}},model:{value:t.filters.startDate,callback:function(e){t.$set(t.filters,"startDate",e)},expression:"filters.startDate"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(C.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(M.a,t._g(t._b({attrs:{label:"ວັນທີສິ້ນສຸດ (End Date)","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:""},model:{value:t.filters.endDate,callback:function(e){t.$set(t.filters,"endDate",e)},expression:"filters.endDate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.endDateMenu,callback:function(e){t.endDateMenu=e},expression:"endDateMenu"}},[t._v(" "),e(f.a,{attrs:{color:"#01532B"},on:{input:function(e){t.endDateMenu=!1}},model:{value:t.filters.endDate,callback:function(e){t.$set(t.filters,"endDate",e)},expression:"filters.endDate"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(w.a,{attrs:{items:t.limitOptions,"item-text":"text","item-value":"value",label:"ຈຳນວນກະຊວງ (Top Ministries)","prepend-icon":"mdi-office-building",outlined:"",dense:""},model:{value:t.filters.limit,callback:function(e){t.$set(t.filters,"limit",e)},expression:"filters.limit"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(w.a,{attrs:{items:t.currencyOptions,"item-text":"text","item-value":"value",label:"ສະກຸນເງິນ (Currency)","prepend-icon":"mdi-currency-usd",clearable:"",outlined:"",dense:""},model:{value:t.filters.currencyId,callback:function(e){t.$set(t.filters,"currencyId",e)},expression:"filters.currencyId"}})],1),t._v(" "),e(d.a,{staticClass:"d-flex align-center",attrs:{cols:"12",md:"2"}},[e(r.a,{staticClass:"custom-primary-btn mr-2",attrs:{loading:t.loading,color:"primary",depressed:"",block:"",small:""},on:{click:t.loadMinistryData}},[e(y.a,{attrs:{left:"",small:""}},[t._v("mdi-magnify")]),t._v("\n            ຄົ້ນຫາ\n          ")],1)],1),t._v(" "),e(d.a,{staticClass:"d-flex align-center",attrs:{cols:"12",md:"2"}},[e(r.a,{staticClass:"custom-secondary-btn",attrs:{color:"grey lighten-1",depressed:"",block:"",small:""},on:{click:t.resetFilters}},[e(y.a,{attrs:{left:"",small:""}},[t._v("mdi-restore")]),t._v("\n            ຣີເຊັດ\n          ")],1)],1)],1)],1)],1),t._v(" "),t.loading?t._e():e(k.a,{staticClass:"summary-cards mb-4"},[e(d.a,{attrs:{cols:"12",md:"3"}},[e(o.a,{staticClass:"summary-card ministries-card",attrs:{elevation:"3"}},[e(c.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-university"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ກະຊວງທີ່ໃຊ້ງານ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Active Ministries")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v(t._s(t.topMinistries.length))]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("Ministry Count")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"3"}},[e(o.a,{staticClass:"summary-card amount-card",attrs:{elevation:"3"}},[e(c.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-dollar-sign"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ລວມຈຳນວນເງິນ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total Settlement Amount")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                $"+t._s(t.formatCurrency(t.totalAmount))+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("USD Amount")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"3"}},[e(o.a,{staticClass:"summary-card settlement-card",attrs:{elevation:"3"}},[e(c.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-coins"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ລວມທຸກສະກຸນ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Multi-Currency Total")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v(t._s(t.uniqueCurrencies))]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v(t._s(t.uniqueCurrencies)+" Currencies")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"3"}},[e(o.a,{staticClass:"summary-card lak-card",attrs:{elevation:"3"}},[e(c.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-calculator"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ລາວກີບ (LAK)")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total LAK Equivalent")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.formatCurrency(t.totalLakAmount,"LAK"))+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("Local Currency")])])])])],1)],1)],1),t._v(" "),!t.loading&&t.currencyBreakdown.length>0?e(k.a,{staticClass:"currency-breakdown mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(o.a,{attrs:{elevation:"2"}},[e(c.d,{staticClass:"section-header"},[e("i",{staticClass:"fas fa-coins"}),t._v("\n          ການແຈກຢາຍຕາມສະກຸນເງິນ (Currency Breakdown)\n        ")]),t._v(" "),e(c.c,[e(k.a,t._l(t.currencyBreakdown,(function(n){return e(d.a,{key:n.currencyCode||n.currencyId,attrs:{cols:"12",md:"4",lg:"3"}},[e("div",{staticClass:"currency-card"},[e("div",{staticClass:"currency-header"},[e(l.a,{attrs:{color:t.getCurrencyColor(n.currencyCode),"text-color":"white",small:""}},[t._v("\n                    "+t._s(n.currencyCode||"LAK")+"\n                  ")]),t._v(" "),e("div",{staticClass:"currency-flag"},[t._v("\n                    "+t._s(t.getCurrencyFlag(n.currencyCode))+"\n                  ")])],1),t._v(" "),e("div",{staticClass:"currency-stats"},[e("div",{staticClass:"original-amount"},[t._v("\n                    "+t._s(t.formatCurrency(n.totalAmount,n.currencyCode))+"\n                  ")]),t._v(" "),e("div",{staticClass:"lak-equivalent"},[t._v("\n                    ≈ "+t._s(t.formatCurrency(n.lakEquivalent,"LAK"))+"\n                  ")]),t._v(" "),e("div",{staticClass:"settlement-count"},[t._v("\n                    "+t._s(n.count)+" ການຊຳລະ\n                  ")]),t._v(" "),e("div",{staticClass:"percentage"},[t._v("\n                    "+t._s(Math.round(n.lakEquivalent/t.totalLakAmount*100))+"% ຂອງທັງໝົດ\n                  ")])])])])})),1)],1)],1)],1)],1):t._e(),t._v(" "),t.loading?e("div",{staticClass:"text-center py-8"},[e(_.a,{staticClass:"custom-progress",attrs:{indeterminate:"",size:"64"}}),t._v(" "),e("p",{staticClass:"mt-4 text-gray-600"},[t._v("\n      ກຳລັງໂຫລດຂໍ້ມູນ... Loading ministry reports...\n    ")])],1):t._e(),t._v(" "),!t.loading&&t.topMinistries.length>0?e(o.a,{staticClass:"chart-card mb-4",attrs:{elevation:"2"}},[e(c.d,{staticClass:"section-header"},[e("i",{staticClass:"fas fa-chart-bar"}),t._v("\n      ກາຟສະຫຼຸບກະຊວງທີ່ນິຍົມ (Top Ministries Settlement Chart)\n    ")]),t._v(" "),e(c.c,[e("div",{staticClass:"chart-container"},[e("canvas",{ref:"ministryChart",attrs:{width:"400",height:"200"}})])])],1):t._e(),t._v(" "),t.loading?t._e():e(o.a,{staticClass:"ministries-container",attrs:{elevation:"2"}},[e(c.d,{staticClass:"section-header"},[e("i",{staticClass:"fas fa-university"}),t._v("\n      ກະຊວງທີ່ນິຍົມໃຊ້ງານ (Top Ministries by Settlement Amount)\n      "),e(D.a),t._v(" "),e(M.a,{staticClass:"search-field",attrs:{"append-icon":"mdi-magnify",label:"ຄົ້ນຫາກະຊວງ...","single-line":"","hide-details":"",outlined:"",dense:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),t.topMinistries.length>0?e(c.c,[e("div",{staticClass:"progress-section mb-6"},[e("h3",{staticClass:"section-subtitle mb-4"},[t._v("\n          ສັດສ່ວນການຊຳລະ (Settlement Distribution)\n        ")]),t._v(" "),e("div",{staticClass:"space-y-4"},t._l(t.filteredMinistries,(function(n,r){return e("div",{key:n.ministryId,staticClass:"progress-item"},[e("div",{staticClass:"flex justify-between items-center mb-2"},[e("div",{staticClass:"flex items-center"},[e(l.a,{staticClass:"rank-chip",attrs:{"text-color":"white",small:""}},[t._v("\n                  "+t._s(r+1)+"\n                ")]),t._v(" "),e("div",{staticClass:"ml-3"},[e("h4",{staticClass:"ministry-name"},[t._v("\n                    "+t._s(n.ministry.ministryName)+"\n                  ")]),t._v(" "),e("p",{staticClass:"ministry-code"},[t._v("\n                    Code: "+t._s(n.ministry.ministryCode)+"\n                  ")])])],1),t._v(" "),e("div",{staticClass:"text-right"},[e("div",{staticClass:"amount-display"},[t._v("\n                  $"+t._s(t.formatCurrency(n.totalAmount))+"\n                ")]),t._v(" "),e("div",{staticClass:"count-display"},[t._v("\n                  "+t._s(n.settlementCount)+" ການຊຳລະ\n                ")])])]),t._v(" "),e(x.a,{attrs:{value:n.totalAmount/t.maxAmount*100,color:"#01532B",height:"12",rounded:""}}),t._v(" "),e("div",{staticClass:"progress-percentage"},[t._v("\n              "+t._s(Math.round(n.totalAmount/t.totalAmount*100))+"%\n              ຂອງທັງໝົດ\n            ")])],1)})),0)]),t._v(" "),e("div",{staticClass:"ministry-cards-grid"},[e("h3",{staticClass:"section-subtitle mb-4"},[t._v("\n          ລາຍລະອຽດກະຊວງ (Ministry Details)\n        ")]),t._v(" "),e(k.a,t._l(t.filteredMinistries,(function(n,m){var f;return e(d.a,{key:n.ministryId,attrs:{cols:"12",md:"6",lg:"4"}},[e(o.a,{staticClass:"ministry-card",class:{selected:(null===(f=t.selectedMinistry)||void 0===f?void 0:f.id)==n.ministryId},attrs:{elevation:"2"},on:{click:function(e){return t.selectMinistry(n.ministryId,n.ministry)}}},[e(c.c,[e("div",{staticClass:"ministry-header"},[e("div",{staticClass:"ministry-info"},[e("div",{staticClass:"rank-badge"},[e(l.a,{staticClass:"rank-chip",attrs:{"text-color":"white",small:""}},[t._v("\n                        #"+t._s(m+1)+"\n                      ")])],1),t._v(" "),e("h3",{staticClass:"ministry-title"},[t._v("\n                      "+t._s(n.ministry.ministryName)+"\n                    ")]),t._v(" "),e("p",{staticClass:"ministry-code-display"},[t._v("\n                      "+t._s(n.ministry.ministryCode)+"\n                    ")])]),t._v(" "),e("div",{staticClass:"ministry-icon"},[e("i",{staticClass:"fas fa-university"})])]),t._v(" "),e(h.a,{staticClass:"my-3"}),t._v(" "),e("div",{staticClass:"ministry-stats"},[e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("ລວມຈຳນວນເງິນ:")]),t._v(" "),e("span",{staticClass:"stat-value amount-value"},[t._v("\n                      $"+t._s(t.formatCurrency(n.totalAmount))+"\n                    ")])]),t._v(" "),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("ຈຳນວນການຊຳລະ:")]),t._v(" "),e("span",{staticClass:"stat-value count-value"},[t._v("\n                      "+t._s(n.settlementCount)+"\n                    ")])]),t._v(" "),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("ຄ່າສະເລ່ຍ:")]),t._v(" "),e("span",{staticClass:"stat-value average-value"},[t._v("\n                      $"+t._s(t.formatCurrency(n.totalAmount/n.settlementCount))+"\n                    ")])]),t._v(" "),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("ສັດສ່ວນ:")]),t._v(" "),e("span",{staticClass:"stat-value percentage-value"},[t._v("\n                      "+t._s(Math.round(n.totalAmount/t.totalAmount*100))+"%\n                    ")])])]),t._v(" "),e("div",{staticClass:"card-actions mt-3"},[e(r.a,{staticClass:"view-details-btn",attrs:{small:"",block:""}},[e("i",{staticClass:"fas fa-eye"}),t._v("\n                    ເບິ່ງລາຍລະອຽດ\n                  ")])],1)],1)],1)],1)})),1)],1)]):e(c.c,[e("div",{staticClass:"no-data-state"},[e("div",{staticClass:"no-data-icon"},[e("i",{staticClass:"fas fa-university"})]),t._v(" "),e("h3",{staticClass:"no-data-title"},[t._v("ບໍ່ມີຂໍ້ມູນກະຊວງ")]),t._v(" "),e("p",{staticClass:"no-data-subtitle"},[t._v("\n          No ministry settlement data found for the selected period.\n        ")])])])],1),t._v(" "),e(v.a,{attrs:{"max-width":"1400px",scrollable:""},model:{value:t.settlementDialog,callback:function(e){t.settlementDialog=e},expression:"settlementDialog"}},[t.selectedMinistry?e(o.a,[e(c.d,{staticClass:"dialog-header"},[e("i",{staticClass:"fas fa-university"}),t._v("\n        ລາຍລະອຽດການຊຳລະ - "+t._s(t.selectedMinistry.ministryName)+"\n        "),e(D.a),t._v(" "),e(r.a,{staticClass:"close-btn",attrs:{icon:""},on:{click:t.closeDialog}},[e(y.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(c.c,[e(k.a,{staticClass:"summary-section mb-4"},[e(d.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("ສະຫຼຸບກະຊວງ (Ministry Summary)")]),t._v(" "),e(h.a,{staticClass:"custom-divider mb-3"})],1),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-code"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ລະຫັດກະຊວງ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v(t._s(t.selectedMinistry.ministryCode))])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-list-ol"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ຈຳນວນການຊຳລະ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  "+t._s(t.settlementSummary.settlementCount)+"\n                ")])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-dollar-sign"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ລວມຈຳນວນເງິນ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  $"+t._s(t.formatCurrency(t.settlementSummary.totalAmount))+"\n                ")])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-calculator"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ຄ່າສະເລ່ຍ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  $"+t._s(t.formatCurrency(t.settlementSummary.totalAmount/t.settlementSummary.settlementCount))+"\n                ")])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-credit-card"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ວິທີການນິຍົມ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v(t._s(t.getMethodDistribution()))])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-percentage"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ມີເງິນກ່ອນ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v(t._s(t.getAdvancePercentage())+"%")])])])])],1),t._v(" "),t.methodDistribution.length>0?e(k.a,{staticClass:"method-distribution mb-4"},[e(d.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("\n              ການແຈກຢາຍຕາມວິທີການຊຳລະ (Settlement Method Distribution)\n            ")]),t._v(" "),e(h.a,{staticClass:"custom-divider mb-3"})],1),t._v(" "),t._l(t.methodDistribution,(function(n){return e(d.a,{key:n.method,attrs:{cols:"12",md:"4"}},[e("div",{staticClass:"method-card"},[e("div",{staticClass:"method-header"},[e(l.a,{attrs:{color:t.getMethodColor(n.method),"text-color":"white",small:""}},[t._v("\n                  "+t._s(t.formatMethod(n.method))+"\n                ")])],1),t._v(" "),e("div",{staticClass:"method-stats"},[e("div",{staticClass:"method-count"},[t._v(t._s(n.count)+" ການຊຳລະ")]),t._v(" "),e("div",{staticClass:"method-amount"},[t._v("\n                  $"+t._s(t.formatCurrency(n.total))+"\n                ")]),t._v(" "),e("div",{staticClass:"method-percentage"},[t._v("\n                  "+t._s(Math.round(n.count/t.settlementSummary.settlementCount*100))+"% ຂອງທັງໝົດ\n                ")])])])])}))],2):t._e(),t._v(" "),e(k.a,{staticClass:"method-filters mb-4"},[e(d.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("ກອງຕາມວິທີການ (Filter by Method)")]),t._v(" "),e(h.a,{staticClass:"custom-divider mb-3"}),t._v(" "),e("div",{staticClass:"filter-buttons"},[e(r.a,{staticClass:"mr-2 mb-2",class:""===t.selectedMethodFilter?"custom-primary-btn":"custom-outline-btn",attrs:{small:""},on:{click:function(e){return t.filterByMethod("")}}},[t._v("\n                ທັງໝົດ (All Methods)\n              ")]),t._v(" "),t._l(t.availableMethods,(function(n){return e(r.a,{key:n,staticClass:"mr-2 mb-2",class:t.selectedMethodFilter===n?"custom-primary-btn":"custom-outline-btn",attrs:{small:""},on:{click:function(e){return t.filterByMethod(n)}}},[t._v("\n                "+t._s(t.formatMethod(n))+"\n              ")])}))],2)],1)],1),t._v(" "),e(k.a,[e(d.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("\n              ລາຍການການຊຳລະ (Settlement Transactions)\n            ")]),t._v(" "),e(h.a,{staticClass:"custom-divider mb-3"}),t._v(" "),e(m.a,{staticClass:"settlement-table",attrs:{headers:t.settlementHeaders,items:t.filteredSettlements,loading:t.loadingDetails,"items-per-page":10,"footer-props":{itemsPerPageOptions:[5,10,25,50],itemsPerPageText:"ແຖວຕໍ່ໜ້າ:"}},scopedSlots:t._u([{key:"item.bookingDate",fn:function(n){var r=n.item;return[e("span",{staticClass:"date-cell"},[t._v(t._s(t.formatDate(r.bookingDate)))])]}},{key:"item.currency",fn:function(n){var r,o,c=n.item;return[e(l.a,{attrs:{color:t.getCurrencyColor(null===(r=c.currency)||void 0===r?void 0:r.code),"text-color":"white",small:""}},[t._v("\n                  "+t._s((null===(o=c.currency)||void 0===o?void 0:o.code)||"LAK")+"\n                ")])]}},{key:"item.amount",fn:function(n){var r,o=n.item;return[e("div",{staticClass:"amount-breakdown"},[e("span",{staticClass:"amount-cell"},[t._v(t._s(t.formatCurrency(o.amount,null===(r=o.currency)||void 0===r?void 0:r.code)))])])]}},{key:"item.exchangeRate",fn:function(n){var r=n.item;return[e("div",{staticClass:"exchange-rate-cell"},[r.exchangeRate&&1!==r.exchangeRate?e("span",[t._v("\n                    "+t._s(t.formatExchangeRate(r.exchangeRate))+"\n                  ")]):e("span",{staticClass:"default-rate"},[t._v("1.0000")])])]}},{key:"item.lakAmount",fn:function(n){var r=n.item;return[e("div",{staticClass:"lak-amount-cell"},[e("span",{staticClass:"lak-amount"},[t._v(t._s(t.formatCurrency(t.calculateLakAmount(r.amount,r.exchangeRate),"LAK")))])])]}},{key:"item.method",fn:function(n){var r=n.item;return[e(l.a,{attrs:{color:t.getMethodColor(r.method),"text-color":"white",small:""}},[t._v("\n                  "+t._s(t.formatMethod(r.method))+"\n                ")])]}},{key:"item.proceeder",fn:function(n){var r,o=n.item;return[e("div",{staticClass:"user-info"},[e("span",{staticClass:"user-name"},[t._v(t._s((null===(r=o.proceeder)||void 0===r?void 0:r.cus_name)||"N/A"))])])]}},{key:"item.chartAccount",fn:function(n){var r=n.item;return[r.chartAccount?e("div",{staticClass:"chart-account-info"},[e("span",{staticClass:"account-name"},[t._v(t._s(r.chartAccount.accountName))]),t._v(" "),e("div",{staticClass:"account-code"},[t._v("\n                    "+t._s(r.chartAccount.accountCode)+"\n                  ")])]):e("span",{staticClass:"no-account"},[t._v("N/A")])]}},{key:"item.moneyAdvance",fn:function(n){var r,o=n.item;return[o.moneyAdvance?e("div",{staticClass:"advance-info"},[e(l.a,{attrs:{color:"#01532B","text-color":"white",small:""}},[t._v("\n                    #"+t._s(o.moneyAdvance.id)+"\n                  ")]),t._v(" "),e("div",{staticClass:"advance-purpose"},[t._v("\n                    "+t._s(null===(r=o.moneyAdvance.purpose)||void 0===r?void 0:r.substring(0,20))+"...\n                  ")]),t._v(" "),e("div",{staticClass:"advance-status"},[t._v("\n                    "+t._s(o.moneyAdvance.status)+"\n                  ")])],1):e("span",{staticClass:"no-advance"},[t._v("Standalone")])]}},{key:"item.actions",fn:function(n){var o=n.item;return[e("div",{staticClass:"action-buttons"},[e(r.a,{staticClass:"custom-action-btn",attrs:{small:""},on:{click:function(e){return t.viewSettlement(o.id)}}},[e("i",{staticClass:"fas fa-eye"}),t._v("\n                    ເບິ່ງ\n                  ")]),t._v(" "),o.notes?e(r.a,{staticClass:"custom-notes-btn ml-1",attrs:{small:""},on:{click:function(e){return t.showNotes(o.notes)}}},[e("i",{staticClass:"fas fa-sticky-note"}),t._v("\n                    ໝາຍເຫດ\n                  ")]):t._e()],1)]}},{key:"no-data",fn:function(){return[e("div",{staticClass:"no-filtered-data"},[e("i",{staticClass:"fas fa-search"}),t._v(" "),e("p",[t._v("ບໍ່ມີການຊຳລະທີ່ກົງກັບການກອງທີ່ເລືອກ")]),t._v(" "),e("p",[t._v("No settlements found for the selected filter.")])])]},proxy:!0}],null,!1,1078639288)})],1)],1)],1)],1):t._e()],1),t._v(" "),e(v.a,{attrs:{"max-width":"600px"},model:{value:t.showNotesModal,callback:function(e){t.showNotesModal=e},expression:"showNotesModal"}},[e(o.a,[e(c.d,{staticClass:"dialog-header"},[e("i",{staticClass:"fas fa-sticky-note"}),t._v("\n        ໝາຍເຫດການຊຳລະ (Settlement Notes)\n        "),e(D.a),t._v(" "),e(r.a,{staticClass:"close-btn",attrs:{icon:""},on:{click:function(e){t.showNotesModal=!1}}},[e(y.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(c.c,{staticClass:"notes-content"},[e("p",[t._v(t._s(t.selectedNotes))])])],1)],1)],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title-section"},[e("h1",{staticClass:"page-title"},[e("i",{staticClass:"fas fa-university"}),t._v("\n        ລາຍງານຊຳລະຕາມກະຊວງ\n      ")]),t._v(" "),e("p",{staticClass:"page-subtitle"},[t._v("Ministry Settlement Report")])])}],!1,null,"a20daef2",null);e.default=component.exports}}]);