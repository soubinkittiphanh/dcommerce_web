(window.webpackJsonp=window.webpackJsonp||[]).push([[151,146],{1023:function(t,e,n){"use strict";n.r(e);var r=n(788),o=n(317),c=n(314),l=n(18),d=n(318),h=n(786),v=n(760),m=n(313),f=n(785),_=n(783),w=n(870),x=n(113),y=(n(34),n(7),n(67),n(10),n(9),n(11),n(8),n(12),n(3)),O=n(20),k=(n(92),n(22),n(121),n(66),n(5),n(35),n(844)),j=n(40),S=n(36);function E(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var $={props:{recordId:{type:Number,default:0},reserveUserId:{type:Number,default:0},isUpdate:{type:Boolean,default:!1}},directives:{commaThousand:k.a},created:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadTerminal();case 2:return e.next=4,t.loadGroup();case 4:if(!t.isUpdate){e.next=12;break}return console.log("View old record"),t.isloading=!0,e.next=9,t.loadTransaction();case 9:t.isloading=!1,e.next=18;break;case 12:n=(new Date).toISOString().substr(0,10),t.record.bookingDate=n,t.record.srcLocationId=1,t.record.desLocationId=1,t.record.terminals=[],t.record.cus_id=t.reserveUserId;case 18:case"end":return e.stop()}}),e)})))()},methods:{removeTerminal:function(t){var e=this.record.terminals.indexOf(t);this.record.terminals.splice(e,1)},addTerminal:function(){var t=this,e=this.terminalList.find((function(e){return e.id==t.terminalSelected}));if(console.log("terminal ".concat(e)),0==this.record.terminals.length)console.log("TEHERE IS NO TERMINAL"),this.record.terminals.push(e);else if("undefined"==this.record.terminals)this.record.terminals.push(e);else{var n=this.record.terminals.find((function(e){return e.id==t.terminalSelected}));console.log("ADD TERMINAL ".concat(n)),n||this.record.terminals.push(e)}},loadTransaction:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("api/user/find/".concat(t.recordId)).then((function(e){t.record=e.data,console.log("User ===> ",e.data)})).catch((function(e){Object(S.j)(t.$swal,"Error","Could no load data "+e.Error)}));case 2:case"end":return e.stop()}}),e)})))()},loadTerminal:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("api/terminal/find").then((function(e){t.terminalList=e.data,console.log("TERMINAL => ",e.data)})).catch((function(e){Object(S.j)(t.$swal,"Error","Could no load data "+e.Error)}));case 2:case"end":return e.stop()}}),e)})))()},loadGroup:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("api/group/find").then((function(e){t.groupList=e.data,console.log("Group count => ",e.data.length)})).catch((function(e){Object(S.j)(t.$swal,"Error","Could no load data "+e.Error)}));case 2:case"end":return e.stop()}}),e)})))()},toggleDialog:function(){this.$emit("close-dialog")},commitRecord:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isloading){e.next=2;break}return e.abrupt("return");case 2:if(t.isloading=!0,!t.isUpdate){e.next=8;break}return e.next=6,t.$axios.put("api/user/update/".concat(t.recordId),t.record).then((function(e){t.$emit("reload"),Object(S.k)(t.$swal,"Succeed","ດຳເນີນການສຳເລັດ")})).catch((function(e){console.error(e),Object(S.j)(t.$swal,"Error",e.response.data)}));case 6:e.next=10;break;case 8:return e.next=10,t.$axios.post("api/user/create",t.record).then((function(e){t.$emit("reload"),Object(S.k)(t.$swal,"Succeed","ດຳເນີນການສຳເລັດ")})).catch((function(e){console.error(e),Object(S.j)(t.$swal,"Error",e.response.data)}));case 10:t.isloading=!1;case 11:case"end":return e.stop()}}),e)})))()}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(e){Object(y.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(j.c)(["findAllCurrency"])),data:function(){return{search:"",numberCommaRule:function(t){return/^[0-9,]*$/.test(t)||"Only numbers and commas are allowed"},terminalList:[],groupList:[],isloading:!1,record:{id:null,cus_id:100,cus_pass:"1111",cus_name:"USER NAME",cus_tel:"TELEPHONE",cus_email:"EMAIL",cus_active:!0,terminals:[],groupId:1},terminalSelected:1}}},C=$,I=n(32),component=Object(I.a)(C,(function(){var t=this,e=t._self._c;return e("div",[e(v.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(c.a,[e(l.b),t._v(" "),e(m.a),t._v(" "),e(l.c,[e(c.a,[e(l.c,[e("div",[e(f.a,[e(h.a,{attrs:{cols:"4"}},[e(f.a,[e(h.a,{attrs:{cols:"12"}},[e(x.a,{attrs:{disabled:"",label:"Login ID*"},model:{value:t.record.cus_id,callback:function(e){t.$set(t.record,"cus_id",e)},expression:"record.cus_id"}})],1),t._v(" "),e(h.a,{attrs:{cols:"12"}},[t.isUpdate?t._e():e(x.a,{attrs:{label:"ລະຫັດຜ່ານ*"},model:{value:t.record.cus_pass,callback:function(e){t.$set(t.record,"cus_pass",e)},expression:"record.cus_pass"}}),t._v(" "),e(x.a,{attrs:{label:"ຊື່ຜູ້ໃຊ້"},model:{value:t.record.cus_name,callback:function(e){t.$set(t.record,"cus_name",e)},expression:"record.cus_name"}})],1),t._v(" "),e(h.a,{attrs:{cols:"12"}},[e(w.a,{attrs:{label:"Active","true-value":!0,"false-value":!1},model:{value:t.record.cus_active,callback:function(e){t.$set(t.record,"cus_active",e)},expression:"record.cus_active"}})],1)],1)],1),t._v(" "),e(h.a,{attrs:{cols:"4"}},[e(f.a,[e(h.a,{attrs:{cols:"12"}},[e(x.a,{attrs:{label:"ອີເມວ"},model:{value:t.record.cus_email,callback:function(e){t.$set(t.record,"cus_email",e)},expression:"record.cus_email"}})],1),t._v(" "),e(h.a,{attrs:{cols:"12"}},[e(r.a,{attrs:{"item-text":"code","item-value":"id",items:t.groupList,label:"ກຸ່ມຜູ້ໃຊ້*"},model:{value:t.record.groupId,callback:function(e){t.$set(t.record,"groupId",e)},expression:"record.groupId"}})],1),t._v(" "),e(h.a,{attrs:{cols:"12"}})],1)],1),t._v(" "),e(h.a,{staticStyle:{"text-align":"end"},attrs:{cols:"4"}},[e(f.a,[e(h.a,{attrs:{cols:"12"}},[e(x.a,{attrs:{label:"ເບີໂທ"},model:{value:t.record.cus_tel,callback:function(e){t.$set(t.record,"cus_tel",e)},expression:"record.cus_tel"}})],1),t._v(" "),e(h.a,{attrs:{cols:"12"}},[e(r.a,{attrs:{"item-text":"name","item-value":"id",items:t.terminalList,label:"Terminal*"},model:{value:t.terminalSelected,callback:function(e){t.terminalSelected=e},expression:"terminalSelected"}})],1),t._v(" "),e(h.a,{attrs:{cols:"12"}},[e(o.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.addTerminal}},[e("span",{staticClass:"mdi mdi-note-plus-outline"}),t._v("\n                                            ເພີ່ມ Terminal\n                                        ")])],1)],1)],1)],1)],1),t._v(" "),e("div",[e(f.a,{attrs:{"no-gutters":""}},t._l(t.record.terminals,(function(n){return e(d.a,{key:n.id,staticClass:"ma-2",attrs:{color:"warning",variant:"outlined"},on:{click:function(e){return t.removeTerminal(n)}}},[t._v("\n                                "+t._s(n.name)+" - "+t._s(n.description)+"\n                            ")])})),1)],1)])],1),t._v(" "),e(m.a)],1),t._v(" "),e(l.a,[e(_.a),t._v(" "),e(o.a,{attrs:{color:"warning",rounded:"",variant:"text"},on:{click:t.toggleDialog}},[t._v("\n                Close\n            ")]),t._v(" "),e(o.a,{attrs:{color:"primary",rounded:"",variant:"text"},on:{click:t.commitRecord}},[t._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LoadingIndicator:n(248).default})},844:function(t,e,n){"use strict";n(35),n(85);e.a={bind:function(t,e,n){t.addEventListener("input",(function(t){var e=t.target.value.replace(/[^0-9]/g,"");"NaN"===(e=parseInt(e,10).toLocaleString("en-US"))&&(e="0"),n.componentInstance.$emit("input",e)}))}}},856:function(t,e,n){var content=n(857);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("59f225a8",content,!0,{sourceMap:!1})},857:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".theme--light.v-input--switch .v-input--switch__thumb{color:#fff}.theme--light.v-input--switch .v-input--switch__track{color:rgba(0,0,0,.38)}.theme--light.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__thumb{color:#fafafa!important}.theme--light.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__track{color:rgba(0,0,0,.12)!important}.theme--dark.v-input--switch .v-input--switch__thumb{color:#bdbdbd}.theme--dark.v-input--switch .v-input--switch__track{color:hsla(0,0%,100%,.3)}.theme--dark.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__thumb{color:#424242!important}.theme--dark.v-input--switch.v-input--is-disabled:not(.v-input--is-dirty) .v-input--switch__track{color:hsla(0,0%,100%,.1)!important}.v-input--switch__thumb,.v-input--switch__track{background-color:currentColor;pointer-events:none;transition:inherit}.v-input--switch__track{border-radius:8px;height:14px;left:2px;opacity:.6;position:absolute;right:2px;top:calc(50% - 7px);width:36px}.v-input--switch__thumb{align-items:center;border-radius:50%;display:flex;height:20px;justify-content:center;position:relative;top:calc(50% - 10px);transition:.3s cubic-bezier(.25,.8,.5,1);width:20px}.v-input--switch .v-input--selection-controls__input{transition:opacity .3s cubic-bezier(.25,.8,.5,1);width:38px}.v-input--switch .v-input--selection-controls__ripple{top:calc(50% - 24px)}.v-input--switch.v-input--dense .v-input--switch__thumb{height:18px;width:18px}.v-input--switch.v-input--dense .v-input--switch__track{height:12px;width:32px}.v-input--switch.v-input--dense.v-input--switch--inset .v-input--switch__track{height:22px;left:-3px;top:calc(50% - 12px);width:44px}.v-input--switch.v-input--dense .v-input--selection-controls__ripple{top:calc(50% - 22px)}.v-input--switch.v-input--is-dirty.v-input--is-disabled .v-input--selection-controls__input{opacity:.6}.v-application--is-ltr .v-input--switch .v-input--selection-controls__ripple{left:-14px}.v-application--is-ltr .v-input--switch.v-input--dense .v-input--selection-controls__ripple{left:-12px}.v-application--is-ltr .v-input--switch.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch.v-input--is-dirty .v-input--switch__thumb{transform:translate(20px)}.v-application--is-rtl .v-input--switch .v-input--selection-controls__ripple{right:-14px}.v-application--is-rtl .v-input--switch.v-input--dense .v-input--selection-controls__ripple{right:-12px}.v-application--is-rtl .v-input--switch.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch.v-input--is-dirty .v-input--switch__thumb{transform:translate(-20px)}.v-input--switch:not(.v-input--switch--flat):not(.v-input--switch--inset) .v-input--switch__thumb{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.v-input--switch--inset .v-input--selection-controls__input,.v-input--switch--inset .v-input--switch__track{width:48px}.v-input--switch--inset .v-input--switch__track{border-radius:14px;height:28px;left:-4px;opacity:.32;top:calc(50% - 14px)}.v-application--is-ltr .v-input--switch--inset .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch--inset .v-input--switch__thumb{transform:translate(0)!important}.v-application--is-rtl .v-input--switch--inset .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch--inset .v-input--switch__thumb{transform:translate(-6px)!important}.v-application--is-ltr .v-input--switch--inset.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-ltr .v-input--switch--inset.v-input--is-dirty .v-input--switch__thumb{transform:translate(20px)!important}.v-application--is-rtl .v-input--switch--inset.v-input--is-dirty .v-input--selection-controls__ripple,.v-application--is-rtl .v-input--switch--inset.v-input--is-dirty .v-input--switch__thumb{transform:translate(-26px)!important}",""]),r.locals={},t.exports=r},870:function(t,e,n){"use strict";n(10),n(7),n(9),n(5),n(11),n(8),n(12);var r=n(99),o=n(3),c=(n(178),n(179),n(446),n(856),n(175)),l=n(49),d=n(336),h=n(86),v=n(251),m=n(1),f=["title"];function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=c.a.extend({name:"v-switch",directives:{Touch:d.a},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return w(w({},l.a.options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){var t=this.attrs$,e=(t.title,Object(r.a)(t,f));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",w(w({},this.attrs),e)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",w({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",w({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(h.c,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(v.a,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===m.y.left&&this.isActive||t.keyCode===m.y.right&&!this.isActive)&&this.onChange()}}})}}]);