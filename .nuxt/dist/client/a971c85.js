(window.webpackJsonp=window.webpackJsonp||[]).push([[259,77],{1853:function(t,e,n){"use strict";n.r(e);var o=n(317),r=n(314),c=n(18),l=n(786),d=n(795),m=n(1723),f=n(760),h=n(313),_=n(319),v=n(785),x=n(783),D=n(113),w=n(91),k=n(334),O=(n(34),n(131),n(31)),S=n(20),I=(n(92),n(30),n(44),n(333),n(36)),y={middleware:"auths",validate:function(data){return console.log("MIXIN ID: "+data.params.id),console.log("PRO DEFUALT ID: "+this.pro_id),/^\d+$/.test(data.params.id)},watch:{message:function(t){this.dialogMessage=null!=t},date:function(t){this.dateFormatted=this.formatDate(this.date),this.fetchData()},date2:function(t){this.dateFormatted2=this.formatDate(this.date2),this.fetchData()}},data:function(){return{showlist:!1,isstock:!1,isloading:!1,dialogMessage:!1,dialog:!1,message:"",userId:"",selectedStockProductId:"",loaddata:[],carddata:[],cardType:[],content:null,selectedCardType:"",search:"",menu1:!1,menu2:!1,headers:[{text:"id",align:"center",value:"card_id"},{text:"ລະຫັດສິນຄ້າ",align:"center",value:"pro_id"},{text:"ຕົ້ນທຶນ",align:"center",value:"cost"},{text:"ວັນທີ",align:"center",value:"input_date_time"},{text:"Admin",align:"center",value:"inputter"},{text:"ສະຖານະ",align:"center",value:"status"},{text:"ຜູ້ລົບ",align:"center",value:"updater"},{text:"ເລລາລົບ",align:"center",value:"update_time"},{text:"ລົບ",align:"end",value:"function",sortable:!1}],date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),date2:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateFormatted:this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)),dateFormatted2:this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10))}},mounted:function(){this.fetchData()},computed:{computedDateFormatted:function(){return this.formatDate(this.date)}},methods:{formatNumber:function(t){return Object(I.e)(t)},fetchData:function(){var t=this;return Object(S.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isloading=!0,n=t.$route.params.id,console.log("product_id: "+n),e.next=5,t.$axios.get("card_f/?pro_id=".concat(n,"&fDate=\n            ").concat(t.date," \n            &tDate=").concat(t.date2,"&userId=").concat(t.userId)).then((function(e){t.loaddata=e.data.map((function(t){return console.log(t.id),{card_id:t.id,pro_id:t.product_id,card_number:t.card_number,cost:t.cost,inputter:t.inputter+" "+t.cus_name,status:1===t.card_isused?"ໃຊ້ງານແລ້ວ":2===t.card_isused?"ຖືກລົບ":"ພ້ອມໃຊ້",input_date_time:t.card_input_date,updater:t.update_user,update_time:t.update_time,function:t.id}}))})).catch((function(e){t.message=e,console.log("Error: "+e)}));case 5:t.isloading=!1;case 6:case"end":return e.stop()}}),e)})))()},formatDate:function(t){if(!t)return null;console.log("DATE FORMAT METHOD1: "+t);var e=this.formatDateToISO(t).split("-"),n=Object(O.a)(e,3),o=n[0],r=n[1],c=n[2];return"".concat(r,"/").concat(c,"/").concat(o)},parseDate:function(t){if(console.log("DATE PARSE METHOD1: "+t),!t)return null;var e=t.split("/"),n=Object(O.a)(e,3),o=n[0],r=n[1],c=n[2];return"".concat(c,"-").concat(o.padStart(2,"0"),"-").concat(r.padStart(2,"0"))},exportToExcel:function(){var t=this.$xlsx.utils.json_to_sheet(this.activeOrderHeaderList),e=this.$xlsx.utils.book_new();this.$xlsx.utils.book_append_sheet(e,t,"Sheet1"),this.$xlsx.writeFile(e,"data.xlsx")},formatDateToISO:function(t){t instanceof Date||(t=new Date(t));var e=t.getFullYear(),n="".concat(t.getMonth()+1).padStart(2,"0"),o="".concat(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(o)},delCard:function(t){var e=this;return Object(S.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isloading=!0,o=e.$route.params.id,r=e.$store.getters.loggedInUser.id,console.log("product_id: "+o+r),n.next=6,e.$axios.post("card_x",{card_id:t.card_id,user_id:r}).then((function(t){e.message=t.data,console.log(e.message),e.fetchData()})).catch((function(t){e.message=t,console.log("Error: "+t)}));case 6:e.isloading=!1;case 7:case"end":return n.stop()}}),n)})))()}}},F=n(32),component=Object(F.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e("h1",[t._v("STOCK MANAGEMENT")]),t._v(" "),e(f.a,{attrs:{"max-width":"300px"},model:{value:t.dialogMessage,callback:function(e){t.dialogMessage=e},expression:"dialogMessage"}},[e("dialog-classic-message",{attrs:{message:t.message},on:{closedialog:function(e){t.message=null}}})],1),t._v(" "),e(f.a,{attrs:{"max-width":"300px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("dialog-classic-message",{attrs:{message:t.message},on:{closedialog:function(e){t.message=null}}})],1),t._v(" "),e(f.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(r.a,[e(c.d,[e(v.a,[e(l.a,{attrs:{cols:"12",lg:"5"}},[e(_.a,{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(D.a,t._g(t._b({attrs:{label:"ຈາກວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},"v-text-field",r,!1),o))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),e(_.a,{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(D.a,t._g(t._b({attrs:{label:"ຫາວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date2=t.parseDate(t.dateFormatted2)}},model:{value:t.dateFormatted2,callback:function(e){t.dateFormatted2=e},expression:"dateFormatted2"}},"v-text-field",r,!1),o))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1),t._v(" "),e(l.a,{attrs:{cols:"12",lg:"5"}},[e(D.a,{attrs:{"append-icon":"mdi-magnify",label:"ຊອກຫາ","single-line":"","hide-detailsx":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),e(D.a,{attrs:{"append-icon":"mdi-magnify",label:"ລະຫັດແອັດມິນ","single-line":"","hide-detailsx":""},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),t._v(" "),e(o.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.fetchData}},[t._v("\n            ດຶງລາຍງານ\n          ")])],1)],1)],1),t._v(" "),t.loaddata?e(d.a,{attrs:{headers:t.headers,search:t.search,items:t.loaddata},scopedSlots:t._u([{key:"item.cost",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(t.formatNumber(n.cost))+"\n      ")]}},{key:"top",fn:function(){return[e(w.a,{attrs:{flat:""}},[e(k.a,[t._v("ສິນຄ້າທັງຫມົດ: "+t._s(t.loaddata.length))]),t._v(" "),e(h.a,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),e(x.a)],1)]},proxy:!0},{key:"item.function",fn:function(n){var r=n.item;return["ພ້ອມໃຊ້"===r.status?e(o.a,{on:{click:function(e){return t.delCard(r)}}},[e("i",{staticClass:"fas fa-trash"})]):t._e()]}}],null,!0)}):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{DialogClassicMessage:n(815).default,LoadingIndicator:n(248).default})},815:function(t,e,n){"use strict";n.r(e);var o=n(317),r=n(314),c=n(18),l=n(313),d=n(783),m={props:{message:{type:String,default:""}},methods:{toggleDialog:function(){this.$emit("closedialog")}}},f=n(32),component=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e(r.a,[e(c.d,{staticClass:"text-h5 grey lighten-2"},[t._v(" ຂໍ້ຄວາມ ")]),t._v(" "),e(c.c,[t._v("\n    "+t._s(t.message)+"\n  ")]),t._v(" "),e(l.a),t._v(" "),e(c.a,[e(d.a),t._v(" "),e(o.a,{attrs:{color:"primary",text:""},on:{click:t.toggleDialog}},[t._v(" ຕົກລົງ ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);