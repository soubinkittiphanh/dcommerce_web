(window.webpackJsonp=window.webpackJsonp||[]).push([[199,85],{1267:function(t,e,n){var content=n(1571);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("7f9d69dc",content,!0,{sourceMap:!1})},1341:function(t,e,n){"use strict";n.r(e);var r=n(317),c=n(314),o=n(18),l=n(785),d=n(780),v=n(1722),m=n(759),f=n(786),_=n(167),y=n(319),h=n(784),x=n(65),C=n(782),D=n(113),k=n(816),w=n(31),E=n(20),A=(n(92),n(34),n(5),n(8),n(10),n(459),n(9),n(342),{name:"AgencyDialog",props:{visible:{type:Boolean,default:!1},agency:{type:Object,default:null}},data:function(){return{valid:!1,loading:!1,registrationDateMenu:!1,licenseExpiryMenu:!1,formData:{agencyName:"",agencyCode:"",registrationNumber:"",phone:"",email:"",address:"",city:"",district:"",licenseNumber:"",registrationDate:"",licenseExpiryDate:"",contactPersonName:"",contactPersonPosition:"",contactPersonPhone:"",status:"active",notes:""},statusOptions:[{text:"ດຳເນີນງານ",value:"active"},{text:"ບໍ່ດຳເນີນງານ",value:"inactive"},{text:"ຖືກຢຸດ",value:"suspended"}],nameRules:[function(t){return!!t||"ຈຳເປັນ"},function(t){return(null==t?void 0:t.length)>=2||"ສັ້ນເກີນໄປ"}],phoneRules:[function(t){return!!t||"ຈຳເປັນ"},function(t){return(null==t?void 0:t.length)>=8||"ບໍ່ຖືກຕ້ອງ"}],emailRules:[function(t){return!t||/.+@.+\..+/.test(t)||"ບໍ່ຖືກຕ້ອງ"}],statusRules:[function(t){return!!t||"ຈຳເປັນ"}]}},computed:{isEditMode:function(){var t;return null===(t=this.agency)||void 0===t?void 0:t.id},isLicenseExpired:function(){return this.formData.licenseExpiryDate&&new Date(this.formData.licenseExpiryDate)<=new Date}},watch:{visible:function(t){t?this.initializeForm():this.resetForm()},agency:{handler:function(){var t=this;this.visible&&this.$nextTick((function(){return t.initializeForm()}))},deep:!0}},methods:{initializeForm:function(){var t,e=this;null!==(t=this.agency)&&void 0!==t&&t.id?(Object.keys(this.formData).forEach((function(t){e.formData[t]=e.agency[t]||""})),this.agency.registrationDate&&(this.formData.registrationDate=this.agency.registrationDate.split("T")[0]),this.agency.licenseExpiryDate&&(this.formData.licenseExpiryDate=this.agency.licenseExpiryDate.split("T")[0])):this.resetFormData(),this.$nextTick((function(){var t;return null===(t=e.$refs.form)||void 0===t?void 0:t.resetValidation()}))},resetFormData:function(){var t=this;Object.keys(this.formData).forEach((function(e){t.formData[e]="status"===e?"active":""}))},resetForm:function(){this.resetFormData(),this.valid=!1,this.loading=!1,this.registrationDateMenu=!1,this.licenseExpiryMenu=!1},saveAgency:function(){var t=this;return Object(E.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.form.validate()){t.loading=!0;try{n=Object.fromEntries(Object.entries(t.formData).filter((function(t){var e=Object(w.a)(t,2),n=(e[0],e[1]);return""!==n&&null!==n}))),t.$emit("save",n)}catch(t){console.error("Form submission error:",t)}finally{t.loading=!1}}case 1:case"end":return e.stop()}}),e)})))()},closeDialog:function(){this.$emit("close")}}}),P=(n(995),n(32)),component=Object(P.a)(A,(function(){var t=this,e=t._self._c;return e(m.a,{attrs:{persistent:"",transition:"dialog-bottom-transition"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e(c.a,[e(o.d,{staticClass:"primary white--text py-3"},[e(_.a,{staticClass:"mr-2",attrs:{color:"white"}},[t._v("mdi-office-building")]),t._v("\n      "+t._s(t.isEditMode?"ແກ້ໄຂບໍລິສັດ":"ເພີ່ມບໍລິສັດ")+"\n      "),e(C.a),t._v(" "),e(r.a,{attrs:{icon:"",dark:""},on:{click:t.closeDialog}},[e(_.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(f.a,{ref:"form",on:{submit:function(e){return e.preventDefault(),t.saveAgency.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(o.c,{staticClass:"py-4"},[e(d.a,{staticClass:"py-0"},[e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"8"}},[e(D.a,{attrs:{label:"ຊື່ບໍລິສັດ *",rules:t.nameRules,outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.agencyName,callback:function(e){t.$set(t.formData,"agencyName",e)},expression:"formData.agencyName"}})],1),t._v(" "),e(l.a,{attrs:{cols:"4"}},[e(D.a,{attrs:{label:"ລະຫັດ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.agencyCode,callback:function(e){t.$set(t.formData,"agencyCode",e)},expression:"formData.agencyCode"}})],1)],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ເລກທະບຽນ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.registrationNumber,callback:function(e){t.$set(t.formData,"registrationNumber",e)},expression:"formData.registrationNumber"}})],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(y.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,c=n.attrs;return[e(D.a,t._g(t._b({attrs:{label:"ວັນທີລົງທະບຽນ",readonly:"",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.registrationDate,callback:function(e){t.$set(t.formData,"registrationDate",e)},expression:"formData.registrationDate"}},"v-text-field",c,!1),r))]}}]),model:{value:t.registrationDateMenu,callback:function(e){t.registrationDateMenu=e},expression:"registrationDateMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.registrationDateMenu=!1}},model:{value:t.formData.registrationDate,callback:function(e){t.$set(t.formData,"registrationDate",e)},expression:"formData.registrationDate"}})],1)],1)],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ເບີໂທ *",rules:t.phoneRules,outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ອີເມວ",rules:t.emailRules,outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1)],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ເມືອງ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.city,callback:function(e){t.$set(t.formData,"city",e)},expression:"formData.city"}})],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ແຂວງ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.district,callback:function(e){t.$set(t.formData,"district",e)},expression:"formData.district"}})],1)],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"12"}},[e(D.a,{attrs:{label:"ທີ່ຢູ່",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})],1)],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ເລກໃບອະນຸຍາດ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.licenseNumber,callback:function(e){t.$set(t.formData,"licenseNumber",e)},expression:"formData.licenseNumber"}})],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(y.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,c=n.attrs;return[e(D.a,t._g(t._b({attrs:{label:"ໝົດອາຍຸ",readonly:"",outlined:"",dense:"","hide-details":"auto",color:t.isLicenseExpired?"error":"primary"},scopedSlots:t._u([t.formData.licenseExpiryDate?{key:"append",fn:function(){return[e(_.a,{attrs:{small:"",color:t.isLicenseExpired?"error":"success"}},[t._v("\n                        "+t._s(t.isLicenseExpired?"mdi-alert-circle":"mdi-check-circle")+"\n                      ")])]},proxy:!0}:null],null,!0),model:{value:t.formData.licenseExpiryDate,callback:function(e){t.$set(t.formData,"licenseExpiryDate",e)},expression:"formData.licenseExpiryDate"}},"v-text-field",c,!1),r))]}}]),model:{value:t.licenseExpiryMenu,callback:function(e){t.licenseExpiryMenu=e},expression:"licenseExpiryMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.licenseExpiryMenu=!1}},model:{value:t.formData.licenseExpiryDate,callback:function(e){t.$set(t.formData,"licenseExpiryDate",e)},expression:"formData.licenseExpiryDate"}})],1)],1)],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ຜູ້ຕິດຕໍ່",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.contactPersonName,callback:function(e){t.$set(t.formData,"contactPersonName",e)},expression:"formData.contactPersonName"}})],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ຕຳແໜ່ງ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.contactPersonPosition,callback:function(e){t.$set(t.formData,"contactPersonPosition",e)},expression:"formData.contactPersonPosition"}})],1)],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"6"}},[e(D.a,{attrs:{label:"ເບີຜູ້ຕິດຕໍ່",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.contactPersonPhone,callback:function(e){t.$set(t.formData,"contactPersonPhone",e)},expression:"formData.contactPersonPhone"}})],1),t._v(" "),e(l.a,{attrs:{cols:"6"}},[e(x.a,{attrs:{items:t.statusOptions,label:"ສະຖານະ *",rules:t.statusRules,outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}})],1)],1),t._v(" "),e(h.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"12"}},[e(k.a,{attrs:{label:"ໝາຍເຫດ",outlined:"",rows:"2","hide-details":"auto",counter:"200",maxlength:"200"},model:{value:t.formData.notes,callback:function(e){t.$set(t.formData,"notes",e)},expression:"formData.notes"}})],1)],1)],1)],1),t._v(" "),e(o.a,{staticClass:"px-6 py-3"},[e(C.a),t._v(" "),e(r.a,{attrs:{text:"",disabled:t.loading},on:{click:t.closeDialog}},[t._v("\n          ຍົກເລີກ\n        ")]),t._v(" "),e(r.a,{attrs:{color:"primary",type:"submit",loading:t.loading,disabled:!t.valid||t.loading}},[t._v("\n          "+t._s(t.isEditMode?"ອັບເດດ":"ບັນທຶກ")+"\n        ")])],1)],1)],1)],1)}),[],!1,null,"739e41c6",null);e.default=component.exports},1342:function(t,e,n){"use strict";n.r(e);var r=n(317),c=n(314),o=n(18),l=n(318),d=n(785),v=n(780),m=n(759),f=n(313),_=n(167),y=n(784),h=n(782),x=(n(35),{name:"AgencyViewDialog",props:{visible:{type:Boolean,default:!1},agency:{type:Object,default:null}},computed:{isLicenseExpired:function(){return!(!this.agency||!this.agency.licenseExpiryDate)&&new Date(this.agency.licenseExpiryDate)<=new Date}},methods:{closeDialog:function(){this.$emit("close")},editAgency:function(){this.$emit("edit",this.agency),this.closeDialog()},formatDate:function(t){return t?new Date(t).toLocaleDateString("lo-LA",{year:"numeric",month:"long",day:"numeric"}):"-"},formatDateTime:function(t){return t?new Date(t).toLocaleString("lo-LA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},formatStatus:function(t){return{active:"ກຳລັງດຳເນີນງານ",inactive:"ບໍ່ດຳເນີນງານ",suspended:"ຖືກຢຸດ"}[t]||t},getStatusColor:function(t){return{active:"success",inactive:"grey",suspended:"error"}[t]||"grey"},getStatusIcon:function(t){return{active:"mdi-check-circle",inactive:"mdi-pause-circle",suspended:"mdi-alert-circle"}[t]||"mdi-help-circle"}}}),C=(n(997),n(32)),component=Object(C.a)(x,(function(){var t,e,n=this,x=n._self._c;return x(m.a,{attrs:{"max-width":"700px"},model:{value:n.visible,callback:function(t){n.visible=t},expression:"visible"}},[x(c.a,[x(o.d,{staticClass:"primary white--text"},[x(_.a,{staticClass:"mr-2",attrs:{color:"white"}},[n._v("mdi-eye")]),n._v(" "),x("span",[n._v("ລາຍລະອຽດບໍລິສັດ")]),n._v(" "),x(h.a),n._v(" "),x(r.a,{attrs:{icon:"",dark:""},on:{click:n.closeDialog}},[x(_.a,[n._v("mdi-close")])],1)],1),n._v(" "),n.agency?x(o.c,{staticClass:"pt-6"},[x(v.a,[x(y.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header"},[x(_.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-information")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ຂໍ້ມູນພື້ນຖານ")])],1),n._v(" "),x(f.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"8"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-office-building")]),n._v("\n                ຊື່ບໍລິສັດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value primary--text font-weight-bold"},[n._v("\n                "+n._s(n.agency.agencyName)+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"4"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-identifier")]),n._v("\n                ລະຫັດບໍລິສັດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.agencyCode?x(l.a,{attrs:{small:"",color:"primary",outlined:""}},[n._v("\n                  "+n._s(n.agency.agencyCode)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])],1)])])],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-file-document")]),n._v("\n                ເລກທະບຽນບໍລິສັດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n._v("\n                "+n._s(n.agency.registrationNumber||"-")+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-calendar")]),n._v("\n                ວັນທີລົງທະບຽນ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n._v("\n                "+n._s(n.agency.registrationDate?n.formatDate(n.agency.registrationDate):"-")+"\n              ")])])])],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(_.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-phone")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ຂໍ້ມູນຕິດຕໍ່")])],1),n._v(" "),x(f.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-phone")]),n._v("\n                ເບີໂທລະສັບ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[x("a",{staticClass:"text-decoration-none",attrs:{href:"tel:".concat(n.agency.phone)}},[n._v("\n                  "+n._s(n.agency.phone)+"\n                ")])])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-email")]),n._v("\n                ອີເມວ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.email?x("a",{staticClass:"text-decoration-none",attrs:{href:"mailto:".concat(n.agency.email)}},[n._v("\n                  "+n._s(n.agency.email)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])])])])],1),n._v(" "),n.agency.address?x(y.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-map-marker")]),n._v("\n                ທີ່ຢູ່\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n._v("\n                "+n._s(n.agency.address)+"\n              ")])])])],1):n._e(),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-city")]),n._v("\n                ເມືອງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.city?x(l.a,{attrs:{small:"",color:"info",outlined:""}},[n._v("\n                  "+n._s(n.agency.city)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])],1)])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-map")]),n._v("\n                ແຂວງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.district?x(l.a,{attrs:{small:"",color:"secondary",outlined:""}},[n._v("\n                  "+n._s(n.agency.district)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])],1)])])],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(_.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-certificate")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ຂໍ້ມູນທຸລະກິດ")])],1),n._v(" "),x(f.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-certificate")]),n._v("\n                ເລກໃບອະນຸຍາດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.licenseNumber?x(l.a,{attrs:{small:"",color:"success",outlined:""}},[n._v("\n                  "+n._s(n.agency.licenseNumber)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("ບໍ່ມີ")])],1)])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-calendar-clock")]),n._v("\n                ວັນໝົດອາຍຸໃບອະນຸຍາດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.licenseExpiryDate?x("div",[x("div",{staticClass:"mb-1"},[n._v(n._s(n.formatDate(n.agency.licenseExpiryDate)))]),n._v(" "),x(l.a,{attrs:{small:"",color:n.isLicenseExpired?"error":"success",dark:""}},[x(_.a,{attrs:{small:"",left:""}},[n._v(n._s(n.isLicenseExpired?"mdi-alert-circle":"mdi-check-circle"))]),n._v("\n                    "+n._s(n.isLicenseExpired?"ໝົດອາຍຸແລ້ວ":"ຍັງໃຊ້ໄດ້")+"\n                  ")],1)],1):x("span",{staticClass:"text--disabled"},[n._v("-")])])])])],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(_.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-account-tie")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ຜູ້ຕິດຕໍ່")])],1),n._v(" "),x(f.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-account")]),n._v("\n                ຊື່ຜູ້ຕິດຕໍ່\n              ")],1),n._v(" "),x("div",{staticClass:"info-value font-weight-medium"},[n._v("\n                "+n._s(n.agency.contactPersonName||"-")+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-briefcase")]),n._v("\n                ຕຳແໜ່ງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n._v("\n                "+n._s(n.agency.contactPersonPosition||"-")+"\n              ")])])])],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-phone")]),n._v("\n                ເບີໂທຜູ້ຕິດຕໍ່\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.contactPersonPhone?x("a",{staticClass:"text-decoration-none",attrs:{href:"tel:".concat(n.agency.contactPersonPhone)}},[n._v("\n                  "+n._s(n.agency.contactPersonPhone)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-check-circle")]),n._v("\n                ສະຖານະ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[x(l.a,{attrs:{small:"",color:n.getStatusColor(n.agency.status),dark:""}},[x(_.a,{attrs:{small:"",left:""}},[n._v(n._s(n.getStatusIcon(n.agency.status)))]),n._v("\n                  "+n._s(n.formatStatus(n.agency.status))+"\n                ")],1)],1)])])],1),n._v(" "),n.agency.notes?x(y.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(_.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-note-text")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ໝາຍເຫດ")])],1),n._v(" "),x(f.a,{staticClass:"mb-4"})],1)],1):n._e(),n._v(" "),n.agency.notes?x(y.a,[x(d.a,{attrs:{cols:"12"}},[x(c.a,{attrs:{color:"grey lighten-5",flat:""}},[x(o.c,[x("div",{staticClass:"info-value"},[n._v("\n                  "+n._s(n.agency.notes)+"\n                ")])])],1)],1)],1):n._e(),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(_.a,{staticClass:"mr-2",attrs:{color:"grey"}},[n._v("mdi-information-outline")]),n._v(" "),x("span",{staticClass:"text-h6 grey--text"},[n._v("ຂໍ້ມູນລະບົບ")])],1),n._v(" "),x(f.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-calendar-plus")]),n._v("\n                ວັນທີສ້າງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value caption"},[n._v("\n                "+n._s(n.formatDateTime(n.agency.createdAt))+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-calendar-edit")]),n._v("\n                ວັນທີອັບເດດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value caption"},[n._v("\n                "+n._s(n.formatDateTime(n.agency.updateTimestamp))+"\n              ")])])])],1),n._v(" "),x(y.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-account-plus")]),n._v("\n                ຜູ້ສ້າງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value caption"},[n._v("\n                "+n._s((null===(t=n.agency.maker)||void 0===t?void 0:t.name)||"-")+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(_.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-account-edit")]),n._v("\n                ຜູ້ອັບເດດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value caption"},[n._v("\n                "+n._s((null===(e=n.agency.updateUser)||void 0===e?void 0:e.name)||"-")+"\n              ")])])])],1)],1)],1):n._e(),n._v(" "),x(o.a,{staticClass:"pa-4"},[x(h.a),n._v(" "),x(r.a,{attrs:{color:"primary",text:""},on:{click:n.editAgency}},[x(_.a,{attrs:{left:""}},[n._v("mdi-pencil")]),n._v("\n        ແກ້ໄຂ\n      ")],1),n._v(" "),x(r.a,{attrs:{text:""},on:{click:n.closeDialog}},[x(_.a,{attrs:{left:""}},[n._v("mdi-close")]),n._v("\n        ປິດ\n      ")],1)],1)],1)],1)}),[],!1,null,"0e5f56fb",null);e.default=component.exports},1570:function(t,e,n){"use strict";n(1267)},1571:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".v-card-title[data-v-d69b57a2]{background:linear-gradient(45deg,#1976d2,#1565c0);color:#fff}.caption[data-v-d69b57a2]{font-size:12px!important}.text-h3[data-v-d69b57a2]{font-size:2rem!important}.v-chip[data-v-d69b57a2]{margin:1px}.text--secondary[data-v-d69b57a2]{color:rgba(0,0,0,.6)!important}.text--disabled[data-v-d69b57a2]{color:rgba(0,0,0,.38)!important}",""]),r.locals={},t.exports=r},1831:function(t,e,n){"use strict";n.r(e);var r=n(317),c=n(314),o=n(18),l=n(318),d=n(785),v=n(780),m=n(794),f=n(759),_=n(167),y=n(306),h=n(251),x=n(784),C=n(65),D=n(782),k=n(113),w=n(987),E=(n(34),n(131),n(20)),A=n(33),P=(n(92),n(5),n(824),n(54),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(840),n(53),n(9),n(44),n(250),n(30),n(39),n(51),n(102),n(821),n(447),n(1341)),view=n(1342),S={name:"AgencySummary",components:{AgencyDialog:P.default,AgencyViewDialog:view.default},middleware:"auth",data:function(){return{loading:!1,agencies:[],filteredAgencies:[],showDialog:!1,showViewDialog:!1,selectedAgency:null,currentPage:1,itemsPerPage:10,filters:{search:"",status:"",city:"",district:""},summaryStats:{total:0,active:0,expiringSoon:0,withLicense:0},confirmDialog:{show:!1,title:"",message:"",color:"primary",confirmText:"ຢືນຢັນ",action:null},headers:[{text:"ຊື່ບໍລິສັດ",value:"agencyName",sortable:!0},{text:"ຕິດຕໍ່",value:"contact",sortable:!1},{text:"ທີ່ຢູ່",value:"location",sortable:!1},{text:"ຜູ້ຕິດຕໍ່",value:"contactPerson",sortable:!1},{text:"ໃບອະນຸຍາດ",value:"license",sortable:!1},{text:"ສະຖານະ",value:"status",sortable:!0},{text:"ວັນທີສ້າງ",value:"createdAt",sortable:!0},{text:"ຟັງຊັ່ນ",value:"actions",sortable:!1}],statusOptions:[{text:"ກຳລັງດຳເນີນງານ",value:"active"},{text:"ບໍ່ດຳເນີນງານ",value:"inactive"},{text:"ຖືກຢຸດ",value:"suspended"}]}},computed:{user:function(){return this.$auth.user||{}},availableCities:function(){return Object(A.a)(new Set(this.agencies.map((function(a){return a.city})).filter(Boolean))).sort().map((function(t){return{text:t,value:t}}))},availableDistricts:function(){return Object(A.a)(new Set(this.agencies.map((function(a){return a.district})).filter(Boolean))).sort().map((function(t){return{text:t,value:t}}))}},mounted:function(){var t=this;return Object(E.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchAgencies();case 2:case"end":return e.stop()}}),e)})))()},methods:{fetchAgencies:function(){var t=this;return Object(E.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n={page:1,limit:1e3,isActive:!0},e.next=5,t.$axios.get("/api/agency",{params:n});case 5:if(r=e.sent,!(data=r.data)||!data.success){e.next=13;break}return t.agencies=data.data.agencies||[],e.next=11,t.fetchStats();case 11:e.next=14;break;case 13:t.agencies=[];case 14:t.applyFilters(),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error fetching agencies:",e.t0),t.$toast.error("ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ"),t.agencies=[];case 22:return e.prev=22,t.loading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,17,22,25]])})))()},fetchStats:function(){var t=this;return Object(E.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/agency/dashboard-stats");case 3:n=e.sent,(data=n.data)&&data.success&&(t.summaryStats={total:data.data.totalAgencies||0,active:data.data.activeAgencies||0,expiringSoon:data.data.agenciesExpiringSoon||0,withLicense:data.data.agenciesWithLicense||0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching stats:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},openCreateDialog:function(){this.selectedAgency=null,this.showDialog=!0},editAgency:function(t){this.selectedAgency=t,this.showDialog=!0},viewAgency:function(t){this.selectedAgency=t,this.showViewDialog=!0},closeDialog:function(){this.showDialog=!1,this.selectedAgency=null},closeViewDialog:function(){this.showViewDialog=!1,this.selectedAgency=null},onAgencySave:function(t){var e=this;return Object(E.a)(regeneratorRuntime.mark((function n(){var r,c,o,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e.loading=!0,!e.selectedAgency||!e.selectedAgency.id){n.next=8;break}return n.next=5,e.$axios.put("/api/agency/".concat(e.selectedAgency.id),t);case 5:r=n.sent,n.next=11;break;case 8:return n.next=10,e.$axios.post("/api/agency",t);case 10:r=n.sent;case 11:if(!r.data||!r.data.success){n.next=18;break}return e.$toast.success("ການບັນທຶກສຳເລັດແລ້ວ"),e.closeDialog(),n.next=16,e.fetchAgencies();case 16:n.next=19;break;case 18:throw new Error((null===(c=r.data)||void 0===c?void 0:c.message)||"Save failed");case 19:n.next=26;break;case 21:n.prev=21,n.t0=n.catch(0),console.error("Error saving agency:",n.t0),d=(null===(o=n.t0.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)||n.t0.message||"ການບັນທຶກບໍ່ສຳເລັດ",e.$toast.error(d);case 26:return n.prev=26,e.loading=!1,n.finish(26);case 29:case"end":return n.stop()}}),n,null,[[0,21,26,29]])})))()},toggleStatus:function(t){var e=this,n="active"===t.status?"inactive":"active",r="active"===n?"ເປີດການດຳເນີນງານ":"ຢຸດການດຳເນີນງານ";this.confirmDialog={show:!0,title:"ຢືນຢັນການເປີດ/ປິດ",message:"ທ່ານຕ້ອງການ".concat(r,'ບໍລິສັດ "').concat(t.agencyName,'" ແມ່ນບໍ?'),color:"active"===n?"success":"warning",confirmText:"ຢືນຢັນ",action:function(){return e.updateStatus(t,n)}}},updateStatus:function(t,e){var n=this;return Object(E.a)(regeneratorRuntime.mark((function r(){var c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n.loading=!0,r.next=4,n.$axios.patch("/api/agency/".concat(t.id,"/status"),{status:e});case 4:if(!(c=r.sent).data||!c.data.success){r.next=9;break}return n.$toast.success("ອັບເດດສະຖານະສຳເລັດແລ້ວ"),r.next=9,n.fetchAgencies();case 9:r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),console.error("Error updating status:",r.t0),n.$toast.error("ອັບເດດສະຖານະບໍ່ສຳເລັດ");case 15:return r.prev=15,n.loading=!1,n.confirmDialog.show=!1,r.finish(15);case 19:case"end":return r.stop()}}),r,null,[[0,11,15,19]])})))()},deleteAgency:function(t){var e=this;this.confirmDialog={show:!0,title:"ຢືນຢັນການລົບ",message:'ທ່ານຕ້ອງການລົບບໍລິສັດ "'.concat(t.agencyName,'" ແມ່ນບໍ? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້.'),color:"error",confirmText:"ລົບ",action:function(){return e.performDelete(t)}}},performDelete:function(t){var e=this;return Object(E.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,n.next=4,e.$axios.delete("/api/agency/".concat(t.id));case 4:if(!(r=n.sent).data||!r.data.success){n.next=9;break}return e.$toast.success("ລົບສຳເລັດແລ້ວ"),n.next=9,e.fetchAgencies();case 9:n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("Error deleting agency:",n.t0),e.$toast.error("ການລົບບໍ່ສຳເລັດ");case 15:return n.prev=15,e.loading=!1,e.confirmDialog.show=!1,n.finish(15);case 19:case"end":return n.stop()}}),n,null,[[0,11,15,19]])})))()},applyFilters:function(){var t=this,e=Object(A.a)(this.agencies);if(this.filters.search){var n=this.filters.search.toLowerCase();e=e.filter((function(t){var e,r,c;return t.agencyName.toLowerCase().includes(n)||(null===(e=t.agencyCode)||void 0===e?void 0:e.toLowerCase().includes(n))||t.phone.includes(n)||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(n))||(null===(c=t.contactPersonName)||void 0===c?void 0:c.toLowerCase().includes(n))}))}this.filters.status&&(e=e.filter((function(e){return e.status===t.filters.status}))),this.filters.city&&(e=e.filter((function(e){return e.city===t.filters.city}))),this.filters.district&&(e=e.filter((function(e){return e.district===t.filters.district}))),this.filteredAgencies=e},resetFilters:function(){this.filters={search:"",status:"",city:"",district:""},this.applyFilters()},exportData:function(){var t=this.convertToCSV(this.filteredAgencies);this.downloadCSV(t,"agencies-export.csv")},convertToCSV:function(data){var t=this;return[["ຊື່ບໍລິສັດ","ລະຫັດບໍລິສັດ","ເລກທະບຽນ","ເບີໂທ","ອີເມວ","ທີ່ຢູ່","ເມືອງ","ແຂວງ","ເລກໃບອະນຸຍາດ","ວັນທີລົງທະບຽນ","ວັນໝົດອາຍຸໃບອະນຸຍາດ","ຊື່ຜູ້ຕິດຕໍ່","ຕຳແໜ່ງຜູ້ຕິດຕໍ່","ເບີໂທຜູ້ຕິດຕໍ່","ສະຖານະ","ຫມາຍເຫດ"].join(",")].concat(Object(A.a)(data.map((function(e){return[e.agencyName,e.agencyCode||"",e.registrationNumber||"",e.phone,e.email||"",e.address||"",e.city||"",e.district||"",e.licenseNumber||"",e.registrationDate||"",e.licenseExpiryDate||"",e.contactPersonName||"",e.contactPersonPosition||"",e.contactPersonPhone||"",t.formatStatus(e.status),e.notes||""].join(",")})))).join("\n")},downloadCSV:function(t,e){var n=new Blob([t],{type:"text/csv;charset=utf-8;"}),link=document.createElement("a"),r=URL.createObjectURL(n);link.setAttribute("href",r),link.setAttribute("download",e),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link)},formatDate:function(t){return t?new Date(t).toLocaleDateString("lo-LA",{year:"numeric",month:"short",day:"numeric"}):"-"},formatStatus:function(t){return{active:"ກຳລັງດຳເນີນງານ",inactive:"ບໍ່ດຳເນີນງານ",suspended:"ຖືກຢຸດ"}[t]||t},getStatusColor:function(t){return{active:"success",inactive:"grey",suspended:"error"}[t]||"grey"},getStatusIcon:function(t){return{active:"mdi-check-circle",inactive:"mdi-pause-circle",suspended:"mdi-alert-circle"}[t]||"mdi-help-circle"},isLicenseExpired:function(t){return!!t&&new Date(t)<=new Date},truncateText:function(text,t){return text?text.length>t?text.substring(0,t)+"...":text:""}}},$=(n(1570),n(32)),component=Object($.a)(S,(function(){var t=this,e=t._self._c;return e(v.a,{attrs:{fluid:""}},[e(x.a,[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"mb-4"},[e(o.d,{staticClass:"d-flex justify-space-between align-center"},[e("div",[e(_.a,{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[t._v("mdi-office-building")]),t._v(" "),e("span",{staticClass:"text-h4"},[t._v("ລະບົບຈັດການບໍລິສັດແນະນຳແຮງງານ")])],1),t._v(" "),e("div",[e(r.a,{staticClass:"mr-2",attrs:{color:"primary"},on:{click:t.openCreateDialog}},[e(_.a,{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n              ເພີ່ມບໍລິສັດໃໝ່\n            ")],1),t._v(" "),e(r.a,{attrs:{color:"success",outlined:""},on:{click:t.exportData}},[e(_.a,{attrs:{left:""}},[t._v("mdi-download")]),t._v("\n              Export\n            ")],1)],1)])],1),t._v(" "),e(c.a,{staticClass:"mb-4"},[e(o.d,[e(_.a,{staticClass:"mr-2"},[t._v("mdi-filter")]),t._v("\n          ຄົ້ນຫາ ແລະ ກັ່ນຕອງ\n        ")],1),t._v(" "),e(o.c,[e(x.a,[e(d.a,{attrs:{cols:"12",md:"3"}},[e(k.a,{attrs:{label:"ຄົ້ນຫາ",placeholder:"ຊື່ບໍລິສັດ, ເບີໂທ, ອີເມວ...","prepend-icon":"mdi-magnify",clearable:""},on:{input:t.applyFilters},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(C.a,{attrs:{items:t.statusOptions,label:"ສະຖານະ","prepend-icon":"mdi-check-circle",clearable:""},on:{change:t.applyFilters},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(C.a,{attrs:{items:t.availableCities,label:"ເມືອງ","prepend-icon":"mdi-city",clearable:""},on:{change:t.applyFilters},model:{value:t.filters.city,callback:function(e){t.$set(t.filters,"city",e)},expression:"filters.city"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(C.a,{attrs:{items:t.availableDistricts,label:"ແຂວງ","prepend-icon":"mdi-map",clearable:""},on:{change:t.applyFilters},model:{value:t.filters.district,callback:function(e){t.$set(t.filters,"district",e)},expression:"filters.district"}})],1),t._v(" "),e(d.a,{staticClass:"d-flex align-center",attrs:{cols:"12",md:"3"}},[e(r.a,{staticClass:"mr-2",attrs:{color:"primary"},on:{click:t.applyFilters}},[e(_.a,{attrs:{left:""}},[t._v("mdi-magnify")]),t._v("\n                ຄົ້ນຫາ\n              ")],1),t._v(" "),e(r.a,{attrs:{outlined:""},on:{click:t.resetFilters}},[e(_.a,{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n                Reset\n              ")],1)],1)],1)],1)],1),t._v(" "),e(x.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12",sm:"6",md:"3"}},[e(c.a,{attrs:{color:"primary",dark:""}},[e(o.c,[e("div",{staticClass:"d-flex justify-space-between"},[e("div",[e("div",{staticClass:"text-h3 font-weight-bold"},[t._v(t._s(t.summaryStats.total))]),t._v(" "),e("div",[t._v("ລວມທັງໝົດ")])]),t._v(" "),e(_.a,{attrs:{size:"48"}},[t._v("mdi-office-building")])],1)])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",sm:"6",md:"3"}},[e(c.a,{attrs:{color:"success",dark:""}},[e(o.c,[e("div",{staticClass:"d-flex justify-space-between"},[e("div",[e("div",{staticClass:"text-h3 font-weight-bold"},[t._v(t._s(t.summaryStats.active))]),t._v(" "),e("div",[t._v("ກຳລັງດຳເນີນງານ")])]),t._v(" "),e(_.a,{attrs:{size:"48"}},[t._v("mdi-check-circle")])],1)])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",sm:"6",md:"3"}},[e(c.a,{attrs:{color:"warning",dark:""}},[e(o.c,[e("div",{staticClass:"d-flex justify-space-between"},[e("div",[e("div",{staticClass:"text-h3 font-weight-bold"},[t._v(t._s(t.summaryStats.expiringSoon))]),t._v(" "),e("div",[t._v("ໃກ້ໝົດອາຍຸ")])]),t._v(" "),e(_.a,{attrs:{size:"48"}},[t._v("mdi-alert-circle")])],1)])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",sm:"6",md:"3"}},[e(c.a,{attrs:{color:"info",dark:""}},[e(o.c,[e("div",{staticClass:"d-flex justify-space-between"},[e("div",[e("div",{staticClass:"text-h3 font-weight-bold"},[t._v(t._s(t.summaryStats.withLicense))]),t._v(" "),e("div",[t._v("ມີໃບອະນຸຍາດ")])]),t._v(" "),e(_.a,{attrs:{size:"48"}},[t._v("mdi-certificate")])],1)])],1)],1)],1),t._v(" "),e(c.a,[e(o.d,[e(_.a,{staticClass:"mr-2"},[t._v("mdi-table")]),t._v("\n          ລາຍຊື່ບໍລິສັດ\n          "),e(D.a),t._v(" "),e("span",{staticClass:"caption"},[t._v(t._s(t.filteredAgencies.length)+" ລາຍການ")])],1),t._v(" "),e(m.a,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.filteredAgencies,"items-per-page":t.itemsPerPage,page:t.currentPage,loading:t.loading,"loading-text":"ກຳລັງໂຫຼດຂໍ້ມູນ...","no-data-text":"ບໍ່ມີຂໍ້ມູນ"},scopedSlots:t._u([{key:"item.agencyName",fn:function(n){var r=n.item;return[e("div",[e("div",{staticClass:"font-weight-bold"},[t._v(t._s(r.agencyName))]),t._v(" "),e("div",{staticClass:"caption text--secondary"},[t._v(t._s(r.agencyCode))])])]}},{key:"item.contact",fn:function(n){var r=n.item;return[e("div",[e("div",{staticClass:"d-flex align-center mb-1"},[e(_.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-phone")]),t._v(" "),e("span",[t._v(t._s(r.phone))])],1),t._v(" "),r.email?e("div",{staticClass:"d-flex align-center"},[e(_.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-email")]),t._v(" "),e("span",{staticClass:"caption"},[t._v(t._s(r.email))])],1):t._e()])]}},{key:"item.location",fn:function(n){var r=n.item;return[e("div",[r.city||r.district?e("div",[r.city?e(l.a,{staticClass:"ma-1",attrs:{small:"",color:"primary",outlined:""}},[t._v("\n                  "+t._s(r.city)+"\n                ")]):t._e(),t._v(" "),r.district?e(l.a,{staticClass:"ma-1",attrs:{small:"",color:"secondary",outlined:""}},[t._v("\n                  "+t._s(r.district)+"\n                ")]):t._e()],1):t._e(),t._v(" "),r.address?e("div",{staticClass:"caption text--secondary mt-1"},[t._v("\n                "+t._s(t.truncateText(r.address,50))+"\n              ")]):t._e()])]}},{key:"item.contactPerson",fn:function(n){var r=n.item;return[r.contactPersonName?e("div",[e("div",{staticClass:"font-weight-medium"},[t._v(t._s(r.contactPersonName))]),t._v(" "),e("div",{staticClass:"caption text--secondary"},[t._v(t._s(r.contactPersonPosition))]),t._v(" "),r.contactPersonPhone?e("div",{staticClass:"caption"},[e(_.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-phone")]),t._v("\n                "+t._s(r.contactPersonPhone)+"\n              ")],1):t._e()]):e("span",{staticClass:"text--disabled"},[t._v("-")])]}},{key:"item.license",fn:function(n){var r=n.item;return[r.licenseNumber?e("div",[e("div",{staticClass:"font-weight-medium"},[t._v(t._s(r.licenseNumber))]),t._v(" "),r.licenseExpiryDate?e("div",{staticClass:"caption",class:t.isLicenseExpired(r.licenseExpiryDate)?"error--text":"success--text"},[e(_.a,{staticClass:"mr-1",attrs:{small:"",color:t.isLicenseExpired(r.licenseExpiryDate)?"error":"success"}},[t._v("\n                  "+t._s(t.isLicenseExpired(r.licenseExpiryDate)?"mdi-alert-circle":"mdi-check-circle")+"\n                ")]),t._v("\n                "+t._s(t.formatDate(r.licenseExpiryDate))+"\n              ")],1):t._e()]):e(l.a,{attrs:{small:"",color:"grey",outlined:""}},[t._v("ບໍ່ມີ")])]}},{key:"item.status",fn:function(n){var r=n.item;return[e(l.a,{attrs:{small:"",color:t.getStatusColor(r.status),dark:""}},[e(_.a,{attrs:{small:"",left:""}},[t._v(t._s(t.getStatusIcon(r.status)))]),t._v("\n              "+t._s(t.formatStatus(r.status))+"\n            ")],1)]}},{key:"item.createdAt",fn:function(n){var r=n.item;return[e("div",{staticClass:"caption"},[t._v(t._s(t.formatDate(r.createdAt)))])]}},{key:"item.actions",fn:function(n){var c=n.item;return[e(w.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[e(r.a,t._g(t._b({attrs:{icon:"",small:"",color:"primary"},on:{click:function(e){return t.viewAgency(c)}}},"v-btn",l,!1),o),[e(_.a,{attrs:{small:""}},[t._v("mdi-eye")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("ເບິ່ງລາຍລະອຽດ")])]),t._v(" "),e(w.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[e(r.a,t._g(t._b({attrs:{icon:"",small:"",color:"info"},on:{click:function(e){return t.editAgency(c)}}},"v-btn",l,!1),o),[e(_.a,{attrs:{small:""}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("ແກ້ໄຂ")])]),t._v(" "),e(w.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[e(r.a,t._g(t._b({attrs:{icon:"",small:"",color:"active"===c.status?"warning":"success"},on:{click:function(e){return t.toggleStatus(c)}}},"v-btn",l,!1),o),[e(_.a,{attrs:{small:""}},[t._v("\n                    "+t._s("active"===c.status?"mdi-pause":"mdi-play")+"\n                  ")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s("active"===c.status?"ຢຸດການດຳເນີນງານ":"ເລີ່ມການດຳເນີນງານ"))])]),t._v(" "),e(w.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[e(r.a,t._g(t._b({attrs:{icon:"",small:"",color:"error"},on:{click:function(e){return t.deleteAgency(c)}}},"v-btn",l,!1),o),[e(_.a,{attrs:{small:""}},[t._v("mdi-delete")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("ລົບ")])])]}}])})],1)],1)],1),t._v(" "),e("AgencyDialog",{attrs:{visible:t.showDialog,agency:t.selectedAgency},on:{close:t.closeDialog,save:t.onAgencySave}}),t._v(" "),e("AgencyViewDialog",{attrs:{visible:t.showViewDialog,agency:t.selectedAgency},on:{close:t.closeViewDialog}}),t._v(" "),e(f.a,{attrs:{"max-width":"400"},model:{value:t.confirmDialog.show,callback:function(e){t.$set(t.confirmDialog,"show",e)},expression:"confirmDialog.show"}},[e(c.a,[e(o.d,{staticClass:"headline"},[t._v(t._s(t.confirmDialog.title))]),t._v(" "),e(o.c,[t._v(t._s(t.confirmDialog.message))]),t._v(" "),e(o.a,[e(D.a),t._v(" "),e(r.a,{attrs:{text:""},on:{click:function(e){t.confirmDialog.show=!1}}},[t._v("ຍົກເລີກ")]),t._v(" "),e(r.a,{attrs:{color:t.confirmDialog.color,text:""},on:{click:t.confirmDialog.action}},[t._v("\n          "+t._s(t.confirmDialog.confirmText)+"\n        ")])],1)],1)],1),t._v(" "),e(y.a,{attrs:{value:t.loading}},[e(h.a,{attrs:{indeterminate:"",size:"64"}})],1)],1)}),[],!1,null,"d69b57a2",null);e.default=component.exports},931:function(t,e,n){var content=n(996);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("af762898",content,!0,{sourceMap:!1})},932:function(t,e,n){var content=n(998);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("6d88f5ba",content,!0,{sourceMap:!1})},995:function(t,e,n){"use strict";n(931)},996:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".v-row.dense[data-v-739e41c6]{margin-bottom:8px}.v-card-title.primary[data-v-739e41c6]{background:linear-gradient(45deg,#1976d2,#1565c0)}",""]),r.locals={},t.exports=r},997:function(t,e,n){"use strict";n(932)},998:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".section-header[data-v-0e5f56fb]{align-items:center;display:flex;margin-bottom:8px}.section-header .text-h6[data-v-0e5f56fb]{color:#1976d2;font-weight:600}.v-card-title.primary[data-v-0e5f56fb]{background:linear-gradient(45deg,#1976d2,#1565c0)}.info-item[data-v-0e5f56fb]{margin-bottom:16px}.info-label[data-v-0e5f56fb]{align-items:center;color:rgba(0,0,0,.6);display:flex;font-size:14px;font-weight:500;margin-bottom:4px}.info-value[data-v-0e5f56fb]{color:rgba(0,0,0,.87);font-size:16px;line-height:1.4}.info-value.caption[data-v-0e5f56fb]{color:rgba(0,0,0,.6);font-size:12px}.info-value a[data-v-0e5f56fb]{color:#1976d2}.info-value a[data-v-0e5f56fb]:hover{-webkit-text-decoration:underline!important;text-decoration:underline!important}.text--disabled[data-v-0e5f56fb]{color:rgba(0,0,0,.38)!important}.grey--text[data-v-0e5f56fb]{color:rgba(0,0,0,.6)!important}.v-chip[data-v-0e5f56fb]{margin:2px}.v-card.grey.lighten-5[data-v-0e5f56fb]{border-left:4px solid #1976d2}",""]),r.locals={},t.exports=r}}]);