(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{1297:function(e,t,o){"use strict";o.r(t);o(44),o(9),o(5),o(10),o(7),o(11),o(8),o(12);var r=o(20),n=o(3),l=o(27);o(92),o(66),o(209),o(30),o(333),o(68),o(63),o(35);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={name:"MoneyAdvanceDialog",components:{VoucherPrintComponent:o(999).default},props:{show:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},formData:{type:Object,default:function(){return{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",exchangeRate:"",method:"cash",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""}}},users:{type:Array,default:function(){return[]}},currencies:{type:Array,default:function(){return[]}},bankAccounts:{type:Array,default:function(){return[]}},ministries:{type:Array,default:function(){return[]}},formLoading:{type:Boolean,default:!1},saving:{type:Boolean,default:!1}},data:function(){return{advanceDetails:null,showPrintVoucher:!1,localForm:{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",exchangeRate:"",method:"cash",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""},formErrors:[]}},computed:{user:function(){return this.$auth.user||""},selectedCurrencyCode:function(){var e=this;if(!this.localForm.currencyId)return"USD";var t=this.currencies.find((function(t){return t.id==e.localForm.currencyId}));return t?t.code:"USD"},selectedBankAccount:function(){var e=this;return this.localForm.bankAccountId?this.bankAccounts.find((function(t){return t.id==e.localForm.bankAccountId})):null},selectedMinistry:function(){var e=this;return this.localForm.ministryId?this.ministries.find((function(t){return t.id==e.localForm.ministryId})):null},selectedCurrency:function(){var e=this;return this.localForm.currencyId?this.currencies.find((function(t){return t.id==e.localForm.currencyId})):null},filteredBankAccounts:function(){if(!this.selectedCurrency||!this.bankAccounts.length)return this.bankAccounts;var e=this.selectedCurrency.code,t=this.bankAccounts.filter((function(t){return t.currency===e||!t.currency}));return t.length>0?t:this.bankAccounts},today:function(){return(new Date).toISOString().split("T")[0]},isFormValid:function(){var e={"amount exists":!!this.localForm.amount,"amount > 0":this.localForm.amount&&parseFloat(this.localForm.amount)>0,"makerId exists":!!this.localForm.makerId,"currencyId exists":!!this.localForm.currencyId,"bookingDate exists":!!this.localForm.bookingDate,"method exists":!!this.localForm.method,"users available":this.users.length>0,"currencies available":this.currencies.length>0,"exchange rate valid":!this.localForm.exchangeRate||this.localForm.exchangeRate&&!isNaN(parseFloat(this.localForm.exchangeRate))&&parseFloat(this.localForm.exchangeRate)>0,"externalRef valid":!this.localForm.externalRef||this.localForm.externalRef.length<=100,"externalRefNo valid":!this.localForm.externalRefNo||this.localForm.externalRefNo.length<=50,"chequeNo valid":!this.localForm.chequeNo||this.localForm.chequeNo.length<=50,"receiveName valid":!this.localForm.receiveName||this.localForm.receiveName.length<=100,"receiveIDNO valid":!this.localForm.receiveIDNO||this.localForm.receiveIDNO.length<=20,"cheque number required":"cheque"!==this.localForm.method||"cheque"===this.localForm.method&&!!this.localForm.chequeNo,"bank account required":"bank_transfer"!==this.localForm.method||"bank_transfer"===this.localForm.method&&!!this.localForm.bankAccountId};return Object.values(e).every(Boolean)}},watch:{show:function(e){e&&this.initForm()},formData:{handler:function(e){console.info("Form data is changing...",e),e&&"object"===Object(l.a)(e)&&(this.localForm=d(d({},this.getDefaultForm()),e),this.localForm.method&&""!==this.localForm.method||(this.localForm.method="cash",console.info("üîß Setting method to default: cash")),this.isEdit||this.localForm.bookingDate||(this.localForm.bookingDate=this.today))},deep:!0,immediate:!0},"localForm.method":function(e,t){console.info('Method changed from "'.concat(t,'" to "').concat(e,'"')),t&&e!==t&&this.handleMethodChange()}},mounted:function(){console.info("üîß Component mounted, initializing form..."),this.initForm()},methods:{getDefaultForm:function(){return{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:this.today,exchangeRate:"",method:"cash",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""}},formatDisplayDate:function(e){if(!e)return"";try{var t=new Date(e),o=t.getDate().toString().padStart(2,"0"),r=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear();return"".concat(o,"/").concat(r,"/").concat(n)}catch(t){return e}},formatVoucherNumber:function(e){return String(e).padStart(6,"0")},fetchAdvanceByid:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.localForm.id){t.next=2;break}return t.abrupt("return",e.showToast("‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫Å‡ªà‡∫≠‡∫ô","error"));case 2:return e.loading=!0,t.prev=3,t.next=6,e.$axios.get("/api/money-advances/".concat(e.localForm.id));case 6:o=t.sent,data=o.data,e.advanceDetails=data.data,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),e.showToast("Error fetching money advances","error"),console.error(t.t0);case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},printAdvanceDetails:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAdvanceByid();case 2:e.showPrintVoucher=!0;case 3:case"end":return t.stop()}}),t)})))()},closePrintVoucher:function(){var e=this;this.showPrintVoucher=!1,setTimeout((function(){e.advanceDetails=null}),100)},initForm:function(){if(this.formErrors=[],console.info("üîß initForm called with formData:",this.formData),this.isEdit&&this.formData&&this.formData.id)console.info("üîß Edit mode - copying formData with defaults preserved"),this.localForm=d(d({},this.getDefaultForm()),this.formData),this.localForm.method&&""!==this.localForm.method||(this.localForm.method="cash",console.info("üîß Edit mode: Setting method to default cash"));else{if(console.info("üîß New mode - using defaults"),this.localForm=this.getDefaultForm(),this.currencies.length>0){var e=this.currencies.find((function(e){return"LAK"===e.code}))||this.currencies[0];this.localForm.currencyId=e.id}this.user&&this.user.id&&(this.localForm.makerId=this.user.id)}this.localForm.method||(this.localForm.method="cash",console.info("üîß Final fallback: Setting method to cash")),console.info("üîß Final localForm:",this.localForm)},resetForm:function(){console.info("üîß resetForm called"),this.localForm=this.getDefaultForm()},validateForm:function(){return this.formErrors=[],(!this.localForm.amount||parseFloat(this.localForm.amount)<=0)&&this.formErrors.push("Amount is required and must be greater than 0"),this.localForm.makerId||this.formErrors.push("User selection is required"),this.localForm.currencyId||this.formErrors.push("Currency selection is required"),this.localForm.bookingDate||this.formErrors.push("Booking date is required"),this.localForm.method||this.formErrors.push("Payment method is required"),"cheque"!==this.localForm.method||this.localForm.chequeNo||this.formErrors.push("Cheque number is required when payment method is cheque"),"bank_transfer"!==this.localForm.method||this.localForm.bankAccountId||this.formErrors.push("Bank account is required when payment method is bank transfer"),this.localForm.purpose&&this.localForm.purpose.length>255&&this.formErrors.push("Purpose must not exceed 255 characters"),this.localForm.note&&this.localForm.note.length>500&&this.formErrors.push("Note must not exceed 500 characters"),this.localForm.exchangeRate&&parseFloat(this.localForm.exchangeRate)<=0&&this.formErrors.push("Exchange rate must be greater than 0 if provided"),this.localForm.externalRef&&this.localForm.externalRef.length>100&&this.formErrors.push("External reference must not exceed 100 characters"),this.localForm.externalRefNo&&this.localForm.externalRefNo.length>50&&this.formErrors.push("External reference number must not exceed 50 characters"),this.localForm.chequeNo&&this.localForm.chequeNo.length>50&&this.formErrors.push("Cheque number must not exceed 50 characters"),this.localForm.receiveName&&this.localForm.receiveName.length>100&&this.formErrors.push("Receiver name must not exceed 100 characters"),this.localForm.receiveIDNO&&this.localForm.receiveIDNO.length>20&&this.formErrors.push("Receiver ID number must not exceed 20 characters"),this.localForm.chequeNo&&!/^[a-zA-Z0-9\-\/]*$/.test(this.localForm.chequeNo)&&this.formErrors.push("Cheque number can only contain letters, numbers, hyphens, and forward slashes"),this.localForm.receiveIDNO&&!/^[a-zA-Z0-9]*$/.test(this.localForm.receiveIDNO)&&this.formErrors.push("Receiver ID number can only contain letters and numbers"),0===this.users.length&&this.formErrors.push("No users available. Please contact administrator."),0===this.currencies.length&&this.formErrors.push("No currencies available. Please contact administrator."),0===this.formErrors.length},updateSelectedCurrency:function(){var e=this;if(console.info("select currency: ".concat(this.selectedCurrency.code," currency list ").concat(JSON.stringify(this.currencies))),this.localForm.exchangeRate=this.currencies.find((function(t){return t.code===e.selectedCurrency.code})).rate||1,this.selectedBankAccount&&this.selectedCurrency){var t=this.selectedBankAccount.currency,o=this.selectedCurrency.code;t&&t!==o&&(this.localForm.bankAccountId="")}this.$emit("currency-changed",this.localForm.currencyId)},updateSelectedBankAccount:function(){this.$emit("bank-account-changed",this.localForm.bankAccountId)},updateSelectedMinistry:function(){this.$emit("ministry-changed",this.localForm.ministryId)},handleMethodChange:function(){var e=this.localForm.method;console.info("üîß handleMethodChange: ".concat(e)),"cheque"!==e&&(this.localForm.chequeNo=""),"bank_transfer"!==e&&(this.localForm.bankAccountId=""),this.$emit("method-changed",e)},closeDialog:function(){this.$emit("close")},showToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[t](e):this.$notify?this.$notify({title:"error"===t?"Error":"Success",message:e,type:"error"===t?"error":"success"}):alert("".concat(t.toUpperCase(),": ").concat(e))},saveAdvance:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validateForm()){t.next=3;break}return e.$emit("validation-error","Please fix the form errors"),t.abrupt("return");case 3:if(console.info("FORM DATA ".concat(JSON.stringify(e.localForm))),(o=d({},e.localForm)).ministryId||delete o.ministryId,o.bankAccountId||delete o.bankAccountId,o.dueDate||delete o.dueDate,o.purpose||delete o.purpose,o.note||delete o.note,o.exchangeRate||delete o.exchangeRate,o.externalRef||delete o.externalRef,o.externalRefNo||delete o.externalRefNo,o.chequeNo||delete o.chequeNo,o.receiveName||delete o.receiveName,o.receiveIDNO||delete o.receiveIDNO,console.info("FORM DATA ".concat(JSON.stringify(o))),e.localForm.id){t.next=25;break}return t.next=20,e.$axios.post("/api/money-advances",d({},o));case 20:return r=t.sent,console.info("REPONSE DATA ".concat(JSON.stringify(r.data))),e.localForm.id=r.data.data.id,e.showToast("Money advance created successfully","success"),t.abrupt("return");case 25:e.$emit("save",o);case 26:case"end":return t.stop()}}),t)})))()}}},f=m,h=(o(961),o(32)),component=Object(h.a)(f,(function(){var e=this,t=e._self._c;return t("div",[e.show?t("div",{staticClass:"modal-overlay",on:{click:e.closeDialog}},[t("div",{staticClass:"modal-dialog enhanced-dialog",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"modal-header"},[t("div",{staticClass:"modal-title-section"},[t("i",{staticClass:"fas fa-money-bill-wave modal-icon"}),e._v(" "),t("h5",{staticClass:"modal-title"},[e._v("\n            "+e._s(e.isEdit?"‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç":"‡∫•‡∫ª‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç")+"\n          ")])]),e._v(" "),t("div",{staticClass:"modal-header-right"},[t("span",{staticClass:"voucher-number"},[e._v("\n            ‡ªÄ‡∫•‡∫Å‡∫ó‡∫µ:\n            "+e._s(e.formData.id?e.formatVoucherNumber(e.localForm.id):"000000")+"\n          ")]),e._v(" "),t("button",{staticClass:"close-btn",on:{click:e.closeDialog}},[t("i",{staticClass:"fas fa-times"})])])]),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.saveAdvance.apply(null,arguments)}}},[t("div",{staticClass:"modal-body"},[e.formLoading?t("div",{staticClass:"form-loading"},[t("div",{staticClass:"spinner-small"}),e._v(" "),t("p",[e._v("Loading form data...")])]):t("div",{staticClass:"form-grid"},[t("div",{staticClass:"form-group"},[e._m(0),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.bookingDate,expression:"localForm.bookingDate"}],staticClass:"form-control",attrs:{type:"date",max:e.today,required:"",title:"‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ß‡∫±‡∫ô‡∫ó‡∫µ (Select Date)"},domProps:{value:e.localForm.bookingDate},on:{input:function(t){t.target.composing||e.$set(e.localForm,"bookingDate",t.target.value)}}}),e._v(" "),t("small",{staticClass:"text-muted",staticStyle:{"font-size":"10px",color:"#6b7280","margin-top":"2px",display:"block"}},[e._v("\n                ‡∫Æ‡∫π‡∫ö‡ªÅ‡∫ö‡∫ö‡∫à‡∫∞‡∫™‡∫∞‡ªÅ‡∫î‡∫á‡∫ï‡∫≤‡∫°‡∫Å‡∫≤‡∫ô‡∫ï‡∫±‡ªâ‡∫á‡∫Ñ‡ªà‡∫≤‡∫Ç‡∫≠‡∫á Browser\n              ")])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(1),e._v(" "),t("div",{staticClass:"custom-select-wrapper"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.localForm.method,expression:"localForm.method"}],staticClass:"form-control custom-select",attrs:{required:""},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.localForm,"method",t.target.multiple?o:o[0])},e.handleMethodChange]}},[t("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞")]),e._v(" "),t("option",{attrs:{value:"cash"}},[e._v("‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫ª‡∫î (Cash)")]),e._v(" "),t("option",{attrs:{value:"cheque"}},[e._v("‡ªÄ‡∫ä‡∫±‡∫Å (Cheque)")]),e._v(" "),t("option",{attrs:{value:"bank_transfer"}},[e._v("\n                    ‡ªÇ‡∫≠‡∫ô‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô (Bank Transfer)\n                  ")]),e._v(" "),t("option",{attrs:{value:"deduction"}},[e._v("‡∫´‡∫±‡∫Å‡∫•‡∫ª‡∫ö (Deduction)")])]),e._v(" "),e._m(2)]),e._v(" "),t("small",{staticClass:"debug-info",staticStyle:{"font-size":"10px",color:"#666","margin-top":"2px",display:"block"}},[e._v('\n                Current method: "'+e._s(e.localForm.method||"empty")+'"\n              ')])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(3),e._v(" "),t("div",{staticClass:"custom-select-wrapper"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.localForm.currencyId,expression:"localForm.currencyId"}],staticClass:"form-control custom-select",attrs:{required:""},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.localForm,"currencyId",t.target.multiple?o:o[0])},e.updateSelectedCurrency]}},[t("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô")]),e._v(" "),e._l(e.currencies,(function(o){return t("option",{key:o.id,domProps:{value:o.id}},[e._v("\n                    "+e._s(o.code)+"\n                  ")])}))],2),e._v(" "),e._m(4)])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(5),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.exchangeRate,expression:"localForm.exchangeRate"}],staticClass:"form-control",attrs:{type:"number",step:"0.000001",min:"0",placeholder:"‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡ªÅ‡∫•‡∫Å‡∫õ‡ªà‡∫Ω‡∫ô"},domProps:{value:e.localForm.exchangeRate},on:{input:function(t){t.target.composing||e.$set(e.localForm,"exchangeRate",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(6),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.amount,expression:"localForm.amount"}],staticClass:"form-control",attrs:{type:"number",step:"0.01",min:"0",placeholder:"Enter amount",required:""},domProps:{value:e.localForm.amount},on:{input:function(t){t.target.composing||e.$set(e.localForm,"amount",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(7),e._v(" "),t("div",{staticClass:"custom-select-wrapper"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.localForm.makerId,expression:"localForm.makerId"}],staticClass:"form-control custom-select",attrs:{required:"",disabled:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.localForm,"makerId",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ú‡∫π‡ªâ‡∫•‡∫ª‡∫á")]),e._v(" "),e._l(e.users,(function(o){return t("option",{key:o.id,domProps:{value:o.id}},[e._v("\n                    "+e._s(o.cus_name)+"\n                  ")])}))],2),e._v(" "),e._m(8)])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(9),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.externalRef,expression:"localForm.externalRef"}],staticClass:"form-control",attrs:{type:"text",placeholder:"‡∫≠‡∫µ‡∫á‡ªÉ‡∫™‡ªà‡ªÉ‡∫ö‡∫™‡∫∞‡ªÄ‡ªú‡∫µ / ‡∫ñ‡∫≠‡∫ô",maxlength:"100"},domProps:{value:e.localForm.externalRef},on:{input:function(t){t.target.composing||e.$set(e.localForm,"externalRef",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(10),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.externalRefNo,expression:"localForm.externalRefNo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"‡ªÄ‡∫•‡∫Å‡∫ó‡∫µ‡ªà‡ªÉ‡∫ö‡∫™‡∫±‡ªà‡∫á‡∫à‡ªà‡∫≤‡∫ç",maxlength:"50"},domProps:{value:e.localForm.externalRefNo},on:{input:function(t){t.target.composing||e.$set(e.localForm,"externalRefNo",t.target.value)}}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"cheque"===e.localForm.method,expression:"localForm.method === 'cheque'"}],staticClass:"form-group"},[t("label",{staticClass:"form-label",class:{required:"cheque"===e.localForm.method}},[t("i",{staticClass:"fas fa-money-check"}),e._v("\n                ‡ªÄ‡∫•‡∫Å‡ªÄ‡∫ä‡∫±‡∫Å\n              ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.chequeNo,expression:"localForm.chequeNo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"‡ªÄ‡∫•‡∫Å‡ªÄ‡∫ä‡∫±‡∫Å",maxlength:"50",required:"cheque"===e.localForm.method},domProps:{value:e.localForm.chequeNo},on:{input:function(t){t.target.composing||e.$set(e.localForm,"chequeNo",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(11),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.receiveName,expression:"localForm.receiveName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"‡∫ä‡∫∑‡ªà‡∫ú‡∫π‡ªâ‡∫Æ‡∫±‡∫ö‡ªÄ‡∫á‡∫¥‡∫ô",maxlength:"100"},domProps:{value:e.localForm.receiveName},on:{input:function(t){t.target.composing||e.$set(e.localForm,"receiveName",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(12),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.receiveIDNO,expression:"localForm.receiveIDNO"}],staticClass:"form-control",attrs:{type:"text",placeholder:"‡ªÄ‡∫•‡∫Å‡∫ö‡∫±‡∫î‡∫õ‡∫∞‡∫à‡∫≥‡∫ï‡∫ª‡∫ß",maxlength:"20"},domProps:{value:e.localForm.receiveIDNO},on:{input:function(t){t.target.composing||e.$set(e.localForm,"receiveIDNO",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(13),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.dueDate,expression:"localForm.dueDate"}],staticClass:"form-control",attrs:{type:"date",min:e.today},domProps:{value:e.localForm.dueDate},on:{input:function(t){t.target.composing||e.$set(e.localForm,"dueDate",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group span-2"},[e._m(14),e._v(" "),t("div",{staticClass:"custom-select-wrapper"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.localForm.ministryId,expression:"localForm.ministryId"}],staticClass:"form-control custom-select",on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.localForm,"ministryId",t.target.multiple?o:o[0])},e.updateSelectedMinistry]}},[t("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫Å‡∫ª‡∫° (‡∫ó‡∫≤‡∫á‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å)")]),e._v(" "),e._l(e.ministries,(function(o){return t("option",{key:o.id,domProps:{value:o.id}},[e._v("\n                    "+e._s(o.ministryCode+" "+o.ministryName)+"\n                  ")])}))],2),e._v(" "),e._m(15)]),e._v(" "),e.selectedMinistry?t("div",{staticClass:"ministry-info"},[t("div",{staticClass:"ministry-details"},[t("div",{staticClass:"ministry-detail-item"},[t("i",{staticClass:"fas fa-building"}),e._v(" "),t("span",{staticClass:"ministry-name"},[e._v(e._s(e.selectedMinistry.ministryName))])]),e._v(" "),e.selectedMinistry.ministryCode?t("div",{staticClass:"ministry-detail-item"},[t("i",{staticClass:"fas fa-tag"}),e._v(" "),t("span",{staticClass:"ministry-code"},[e._v(e._s(e.selectedMinistry.ministryCode))])]):e._e()])]):e._e()]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"bank_transfer"===e.localForm.method,expression:"localForm.method === 'bank_transfer'"}],staticClass:"form-group"},[t("label",{staticClass:"form-label",class:{required:"bank_transfer"===e.localForm.method}},[t("i",{staticClass:"fas fa-university"}),e._v("\n                ‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô\n              ")]),e._v(" "),t("div",{staticClass:"custom-select-wrapper"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.localForm.bankAccountId,expression:"localForm.bankAccountId"}],staticClass:"form-control custom-select",attrs:{required:"bank_transfer"===e.localForm.method},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.localForm,"bankAccountId",t.target.multiple?o:o[0])},e.updateSelectedBankAccount]}},[t("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ö‡∫±‡∫ô‡∫ä‡∫µ")]),e._v(" "),e._l(e.filteredBankAccounts,(function(o){return t("option",{key:o.id,domProps:{value:o.id}},[e._v("\n                    "+e._s(o.bankName)+" - "+e._s(o.accountNumber)+"\n                  ")])}))],2),e._v(" "),e._m(16)]),e._v(" "),e.selectedBankAccount?t("div",{staticClass:"bank-account-info"},[t("div",{staticClass:"bank-details"},[t("div",{staticClass:"bank-detail-item"},[t("i",{staticClass:"fas fa-building"}),e._v(" "),t("span",[e._v(e._s(e.selectedBankAccount.bankName))])]),e._v(" "),t("div",{staticClass:"bank-detail-item"},[t("i",{staticClass:"fas fa-credit-card"}),e._v(" "),t("span",[e._v(e._s(e.selectedBankAccount.accountNumber))])])])]):e._e()]),e._v(" "),t("div",{staticClass:"form-group full-width"},[e._m(17),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.localForm.purpose,expression:"localForm.purpose"}],staticClass:"form-control",attrs:{type:"text",placeholder:"‡ªÄ‡∫ô‡∫∑‡ªâ‡∫≠‡ªÉ‡∫ô ‡∫Å‡∫≤‡∫ô‡∫≠‡∫≠‡∫Å‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç",maxlength:"255"},domProps:{value:e.localForm.purpose},on:{input:function(t){t.target.composing||e.$set(e.localForm,"purpose",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group full-width"},[e._m(18),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.localForm.note,expression:"localForm.note"}],staticClass:"form-control",attrs:{rows:"2",placeholder:"‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÄ‡∫ï‡∫µ‡∫°...",maxlength:"500"},domProps:{value:e.localForm.note},on:{input:function(t){t.target.composing||e.$set(e.localForm,"note",t.target.value)}}})])]),e._v(" "),e.formErrors.length>0?t("div",{staticClass:"form-errors"},[e._m(19),e._v(" "),t("ul",e._l(e.formErrors,(function(o){return t("li",{key:o},[e._v(e._s(o))])})),0)]):e._e()]),e._v(" "),t("div",{staticClass:"modal-footer enhanced-footer"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:e.saving},on:{click:e.closeDialog}},[t("i",{staticClass:"fas fa-times"}),e._v("\n            ‡∫≠‡∫≠‡∫Å\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.saving||e.formLoading||!e.isFormValid}},[e.saving?t("i",{staticClass:"fas fa-spinner fa-spin"}):t("i",{staticClass:"fas",class:e.isEdit?"fa-save":"fa-plus"}),e._v("\n            "+e._s(e.saving?"Saving...":e.isEdit?"‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å ‡∫Å‡∫≤‡∫ô‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç":"‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å")+"\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-danger",attrs:{title:"Print"},on:{click:function(t){return t.preventDefault(),e.printAdvanceDetails.apply(null,arguments)}}},[t("i",{staticClass:"fas fa-print"})])])])])]):e._e(),e._v(" "),e.showPrintVoucher&&e.advanceDetails?t("VoucherPrintComponent",{key:e.advanceDetails.id,attrs:{"voucher-data":e.advanceDetails},on:{close:e.closePrintVoucher}}):e._e()],1)}),[function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-calendar"}),this._v("\n                ‡∫ß‡∫±‡∫ô‡∫ó‡∫µ\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-credit-card"}),this._v("\n                ‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-coins"}),this._v("\n                ‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-exchange-alt"}),this._v("\n                ‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡ªÅ‡∫•‡∫Å‡∫õ‡ªà‡∫Ω‡∫ô\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-dollar-sign"}),this._v("\n                ‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label required"},[e("i",{staticClass:"fas fa-user"}),this._v("\n                ‡∫ú‡∫π‡ªâ‡ªÉ‡∫ä‡ªâ\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-external-link-alt"}),this._v("\n                ‡∫≠‡∫µ‡∫á‡ªÉ‡∫™‡ªà‡ªÉ‡∫ö‡∫™‡∫∞‡ªÄ‡ªú‡∫µ / ‡∫ñ‡∫≠‡∫ô\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-hashtag"}),this._v("\n                ‡ªÄ‡∫•‡∫Å‡∫ó‡∫µ‡ªà‡ªÉ‡∫ö‡∫™‡∫±‡ªà‡∫á‡∫à‡ªà‡∫≤‡∫ç\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-user-circle"}),this._v("\n                ‡∫ä‡∫∑‡ªà‡∫ú‡∫π‡ªâ‡∫Æ‡∫±‡∫ö\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-id-card"}),this._v("\n                ‡ªÄ‡∫•‡∫Å‡∫ö‡∫±‡∫î‡∫õ‡∫∞‡∫à‡∫≥‡∫ï‡∫ª‡∫ß‡∫ú‡∫π‡ªâ‡∫Æ‡∫±‡∫ö\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-calendar-alt"}),this._v("\n                ‡∫ß‡∫±‡∫ô‡∫Ñ‡∫ª‡∫ö‡∫Æ‡∫≠‡∫ö‡∫Ñ‡∫ß‡∫ô‡∫ä‡∫≥‡∫•‡∫∞\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-building"}),this._v("\n                ‡∫Å‡∫ª‡∫°\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("div",{staticClass:"select-icon"},[e("i",{staticClass:"fas fa-chevron-down"})])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-tag"}),this._v("\n                ‡∫à‡∫∏‡∫î‡∫õ‡∫∞‡∫™‡∫ª‡∫á\n              ")])},function(){var e=this._self._c;return e("label",{staticClass:"form-label"},[e("i",{staticClass:"fas fa-sticky-note"}),this._v("\n                ‡ªÇ‡∫ô‡ªä‡∫î\n              ")])},function(){var e=this._self._c;return e("h6",[e("i",{staticClass:"fas fa-exclamation-circle"}),this._v("\n              Please fix the following errors:\n            ")])}],!1,null,"8a92950e",null);t.default=component.exports},910:function(e,t,o){var content=o(962);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(16).default)("f8dbd576",content,!0,{sourceMap:!1})},961:function(e,t,o){"use strict";o(910)},962:function(e,t,o){var r=o(15)((function(i){return i[1]}));r.push([e.i,'.modal-header-right[data-v-8a92950e]{align-items:center;display:flex;gap:15px}.voucher-number[data-v-8a92950e]{color:#fff;font-size:14px;font-weight:600;opacity:.9}.modal-overlay[data-v-8a92950e]{align-items:center;animation:fadeIn-8a92950e .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}@keyframes fadeIn-8a92950e{0%{opacity:0}to{opacity:1}}.enhanced-dialog[data-v-8a92950e]{animation:slideIn-8a92950e .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:98vh;max-width:95vw;overflow:hidden;width:95%}@keyframes slideIn-8a92950e{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[data-v-8a92950e]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:16px 18px}.modal-title-section[data-v-8a92950e]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-8a92950e]{font-size:18px;opacity:.9}.modal-title[data-v-8a92950e]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-8a92950e]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;opacity:.8;padding:6px;transition:opacity .2s}.close-btn[data-v-8a92950e]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-8a92950e]{max-height:calc(98vh - 120px);overflow-y:auto;padding:16px 18px}.form-loading[data-v-8a92950e]{align-items:center;color:#666;display:flex;justify-content:center;padding:40px}.spinner-small[data-v-8a92950e]{animation:spin-8a92950e 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:20px;margin-right:10px;width:20px}@keyframes spin-8a92950e{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.form-grid[data-v-8a92950e]{grid-gap:12px;display:grid;gap:12px;grid-template-columns:repeat(3,1fr)}.form-group[data-v-8a92950e]{margin-bottom:0}.form-group.full-width[data-v-8a92950e]{grid-column:1/-1}.form-group.span-2[data-v-8a92950e]{grid-column:span 2}.form-group.span-3[data-v-8a92950e]{grid-column:span 3}.form-label[data-v-8a92950e]{align-items:center;color:#374151;display:flex;font-size:11px;font-weight:600;gap:6px;margin-bottom:4px}.form-label.required[data-v-8a92950e]:after{color:#e74c3c;content:"*";margin-left:4px}.form-label i[data-v-8a92950e]{color:#6b7280;font-size:11px}.form-control[data-v-8a92950e]{background:#fafafa;border:1px solid #e5e7eb;border-radius:4px;box-sizing:border-box;font-size:12px;height:32px;padding:6px 8px;transition:all .2s ease;width:100%}.form-control[data-v-8a92950e]:focus{background:#fff;border-color:#667eea;box-shadow:0 0 0 2px rgba(102,126,234,.1);outline:none}textarea.form-control[data-v-8a92950e]{height:auto;min-height:60px;resize:vertical}.custom-select-wrapper[data-v-8a92950e]{position:relative}.custom-select[data-v-8a92950e]{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:32px}.select-icon[data-v-8a92950e]{color:#6b7280;font-size:12px;pointer-events:none;position:absolute;right:8px;top:50%;transform:translateY(-50%)}.debug-info[data-v-8a92950e]{background:#f9f9f9;border-radius:2px;color:#666!important;font-family:monospace;font-style:italic;padding:2px 4px}.ministry-info[data-v-8a92950e]{background:#f0f9ff;border:1px solid #bae6fd;border-radius:4px;margin-top:6px;padding:6px}.ministry-details[data-v-8a92950e]{grid-gap:3px;display:grid;gap:3px;grid-template-columns:1fr}.ministry-detail-item[data-v-8a92950e]{align-items:center;color:#075985;display:flex;font-size:10px;gap:4px}.ministry-detail-item i[data-v-8a92950e]{color:#0ea5e9;flex-shrink:0;width:12px}.ministry-name[data-v-8a92950e]{font-weight:600}.ministry-code[data-v-8a92950e]{background:#e0f2fe;border-radius:2px;font-family:monospace;padding:1px 4px}.bank-account-info[data-v-8a92950e]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;margin-top:6px;padding:6px}.bank-details[data-v-8a92950e]{grid-gap:3px;display:grid;gap:3px;grid-template-columns:1fr}.bank-detail-item[data-v-8a92950e]{align-items:center;color:#6b7280;display:flex;font-size:10px;gap:4px}.bank-detail-item i[data-v-8a92950e]{color:#667eea;width:12px}.form-errors[data-v-8a92950e]{background:#fef2f2;border:1px solid #fecaca;border-radius:6px;margin-top:16px;padding:12px}.form-errors h6[data-v-8a92950e]{align-items:center;color:#dc2626;display:flex;font-size:12px;gap:6px;margin:0 0 8px}.form-errors ul[data-v-8a92950e]{color:#dc2626;font-size:11px;margin:0;padding-left:16px}.enhanced-footer[data-v-8a92950e]{background:#f8f9fa;border-top:1px solid #e9ecef;display:flex;gap:10px;justify-content:flex-end;padding:12px 18px}.btn[data-v-8a92950e]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:12px;font-weight:600;gap:6px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn[data-v-8a92950e]:hover:not(:disabled){box-shadow:0 3px 8px rgba(0,0,0,.15);transform:translateY(-1px)}.btn[data-v-8a92950e]:active:not(:disabled){transform:translateY(0)}.btn-primary[data-v-8a92950e]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-secondary[data-v-8a92950e]{background:#6c757d;color:#fff}.btn[data-v-8a92950e]:disabled{box-shadow:none!important;cursor:not-allowed;opacity:.6;transform:none!important}.fa-spin[data-v-8a92950e]{animation:spin-8a92950e 1s linear infinite}@media (max-width:1024px){.form-grid[data-v-8a92950e]{grid-template-columns:repeat(2,1fr)}.form-group.span-2[data-v-8a92950e],.form-group.span-3[data-v-8a92950e]{grid-column:1/-1}}@media (max-width:768px){.enhanced-dialog[data-v-8a92950e]{margin:10px;width:98%}.form-grid[data-v-8a92950e]{grid-template-columns:1fr}.form-group.span-2[data-v-8a92950e],.form-group.span-3[data-v-8a92950e]{grid-column:1}.enhanced-footer[data-v-8a92950e],.modal-body[data-v-8a92950e],.modal-header[data-v-8a92950e]{padding:14px 16px}.enhanced-footer[data-v-8a92950e]{flex-direction:column-reverse}.enhanced-footer .btn[data-v-8a92950e]{justify-content:center;width:100%}}',""]),r.locals={},e.exports=r}}]);