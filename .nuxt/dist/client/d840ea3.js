(window.webpackJsonp=window.webpackJsonp||[]).push([[166,53],{1009:function(t,e,o){"use strict";o(942)},1010:function(t,e,o){var n=o(14)((function(i){return i[1]}));n.push([t.i,".modal-overlay[data-v-3e6a6f1c]{align-items:center;background-color:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;padding:20px;position:fixed;right:0;top:0;z-index:1000}.modal-container[data-v-3e6a6f1c]{background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.3);display:flex;flex-direction:column;max-height:90vh;max-width:1000px;overflow:hidden;width:100%}.modal-header[data-v-3e6a6f1c]{align-items:center;background:linear-gradient(135deg,#01532b,#337555);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-header h2[data-v-3e6a6f1c]{color:#fff;font-size:24px;font-weight:600;margin:0}.close-btn[data-v-3e6a6f1c]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:24px;padding:4px;transition:all .2s}.close-btn[data-v-3e6a6f1c]:hover{background-color:hsla(0,0%,100%,.2)}.modal-body[data-v-3e6a6f1c]{flex:1;overflow-y:auto;padding:24px}.modal-footer[data-v-3e6a6f1c]{background-color:#f8f9fa;border-top:1px solid #e9ecef;display:flex;gap:12px;justify-content:flex-end;padding:20px 24px}.info-section[data-v-3e6a6f1c]{border:1px solid #e9ecef;border-radius:8px;margin-bottom:32px;overflow:hidden}.info-section[data-v-3e6a6f1c]:last-child{margin-bottom:0}.section-header[data-v-3e6a6f1c]{align-items:center;background-color:#f8f9fa;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:16px 20px}.section-header h3[data-v-3e6a6f1c]{align-items:center;color:#333;display:flex;font-size:16px;font-weight:600;gap:8px;margin:0}.section-header h3 i[data-v-3e6a6f1c]{color:#28a745}.item-count[data-v-3e6a6f1c]{background-color:#e9ecef;border-radius:12px;color:#666;font-size:12px;padding:4px 8px}.info-grid[data-v-3e6a6f1c]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));padding:20px}.info-item[data-v-3e6a6f1c]{display:flex;flex-direction:column;gap:4px}.info-item label[data-v-3e6a6f1c]{color:#666;font-size:12px;font-weight:500;letter-spacing:.5px;text-transform:uppercase}.info-item span[data-v-3e6a6f1c]{color:#333;font-size:14px;font-weight:500}.receipt-number[data-v-3e6a6f1c]{color:#28a745!important;font-family:monospace;font-size:16px!important;font-weight:600!important}.invoice-number[data-v-3e6a6f1c]{color:#007bff!important;font-family:monospace;font-size:15px!important;font-weight:600!important}.customer-name[data-v-3e6a6f1c]{color:#495057!important;font-weight:600!important}.amount-received[data-v-3e6a6f1c]{color:#28a745!important;font-size:18px!important;font-weight:700!important}.invoice-amount[data-v-3e6a6f1c]{color:#495057!important;font-size:16px!important;font-weight:600!important}.reference-number[data-v-3e6a6f1c]{color:#495057!important;font-family:monospace;font-size:14px!important}.payment-method-badge[data-v-3e6a6f1c]{border-radius:12px;font-size:12px;font-weight:600;padding:6px 12px;text-transform:uppercase}.payment-method-badge.cash[data-v-3e6a6f1c]{background-color:#d4edda;color:#155724}.payment-method-badge.bank_transfer[data-v-3e6a6f1c]{background-color:#cce5ff;color:#004085}.payment-method-badge.check[data-v-3e6a6f1c]{background-color:#fff3cd;color:#856404}.payment-method-badge.credit_card[data-v-3e6a6f1c]{background-color:#f8d7da;color:#721c24}.payment-method-badge.other[data-v-3e6a6f1c]{background-color:#e2e3e5;color:#383d41}.status-badge[data-v-3e6a6f1c]{border-radius:12px;font-size:12px;font-weight:600;padding:4px 12px;text-transform:uppercase}.status-badge.draft[data-v-3e6a6f1c]{background-color:#f8f9fa;color:#6c757d}.status-badge.sent[data-v-3e6a6f1c]{background-color:#d1ecf1;color:#0c5460}.status-badge.paid[data-v-3e6a6f1c]{background-color:#d4edda;color:#155724}.status-badge.overdue[data-v-3e6a6f1c]{background-color:#f8d7da;color:#721c24}.status-badge.cancelled[data-v-3e6a6f1c]{background-color:#e2e3e5;color:#383d41}.payment-summary[data-v-3e6a6f1c]{padding:20px}.summary-row[data-v-3e6a6f1c]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:12px 0}.summary-row[data-v-3e6a6f1c]:last-child{border-bottom:none}.summary-row.subtotal[data-v-3e6a6f1c]{border-top:2px solid #28a745;font-weight:600;margin-top:8px;padding-top:16px}.summary-row label[data-v-3e6a6f1c]{color:#495057;font-size:14px;font-weight:500}.summary-row .amount[data-v-3e6a6f1c]{font-family:monospace;font-size:16px;font-weight:600}.amount.invoice-total[data-v-3e6a6f1c]{color:#495057}.amount.current-payment[data-v-3e6a6f1c]{color:#28a745}.amount.total-received[data-v-3e6a6f1c]{color:#007bff}.amount.remaining[data-v-3e6a6f1c]{color:#dc3545;font-size:18px}.amount.remaining.fully-paid[data-v-3e6a6f1c]{color:#28a745}.paid-status[data-v-3e6a6f1c]{align-items:center;background:#d4edda;border-radius:6px;color:#155724;display:flex;font-weight:600;gap:8px;margin-top:16px;padding:12px 16px}.paid-status i[data-v-3e6a6f1c]{font-size:18px}.notes-content[data-v-3e6a6f1c]{background-color:#f8f9fa;border-radius:4px;color:#495057;font-size:14px;line-height:1.6;margin:20px;padding:20px}.table-container[data-v-3e6a6f1c]{overflow-x:auto}.data-table[data-v-3e6a6f1c]{border-collapse:collapse;width:100%}.data-table td[data-v-3e6a6f1c],.data-table th[data-v-3e6a6f1c]{border-bottom:1px solid #e9ecef;padding:12px;text-align:left}.data-table th[data-v-3e6a6f1c]{background-color:#f8f9fa;color:#495057;font-size:12px;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.data-table td[data-v-3e6a6f1c]{color:#333;font-size:14px}.data-table tbody tr[data-v-3e6a6f1c]:hover{background-color:#f8f9fa}.line-number[data-v-3e6a6f1c]{color:#666;font-weight:600;text-align:center}.invoice-line-info .line-description[data-v-3e6a6f1c]{color:#333;font-weight:600;margin-bottom:4px}.invoice-line-info .line-details[data-v-3e6a6f1c]{color:#666;font-size:12px}.allocated-amount[data-v-3e6a6f1c]{color:#28a745;font-weight:600;text-align:right}.line-notes[data-v-3e6a6f1c]{color:#666;font-style:italic}.allocation-status[data-v-3e6a6f1c]{border-radius:8px;font-size:11px;font-weight:600;padding:3px 8px;text-transform:uppercase}.allocation-status.fully-allocated[data-v-3e6a6f1c]{background-color:#d4edda;color:#155724}.allocation-status.partially-allocated[data-v-3e6a6f1c]{background-color:#fff3cd;color:#856404}.allocation-status.not-allocated[data-v-3e6a6f1c]{background-color:#f8d7da;color:#721c24}.allocation-status.unknown[data-v-3e6a6f1c]{background-color:#e2e3e5;color:#383d41}.data-table tfoot td[data-v-3e6a6f1c]{background-color:#f8f9fa;border-bottom:none;border-top:2px solid #dee2e6;font-weight:600}.allocated-total[data-v-3e6a6f1c]{color:#28a745;text-align:right}.btn[data-v-3e6a6f1c]{align-items:center;border:1px solid transparent;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;justify-content:center;min-width:120px;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s}.btn-primary[data-v-3e6a6f1c]{background-color:#007bff;border-color:#007bff;color:#fff}.btn-primary[data-v-3e6a6f1c]:hover{background-color:#0056b3;border-color:#0056b3}.btn-secondary[data-v-3e6a6f1c]{background-color:#6c757d;border-color:#6c757d;color:#fff}.btn-secondary[data-v-3e6a6f1c]:hover{background-color:#5a6268;border-color:#5a6268}.btn-success[data-v-3e6a6f1c]{background-color:#28a745;border-color:#28a745;color:#fff}.btn-success[data-v-3e6a6f1c]:hover{background-color:#218838;border-color:#218838}@media (max-width:768px){.modal-overlay[data-v-3e6a6f1c]{padding:10px}.modal-container[data-v-3e6a6f1c]{max-height:95vh;max-width:100%}.modal-header[data-v-3e6a6f1c]{padding:20px}.modal-header h2[data-v-3e6a6f1c]{font-size:20px}.modal-body[data-v-3e6a6f1c]{padding:20px}.modal-footer[data-v-3e6a6f1c]{flex-direction:column;padding:16px 20px}.info-grid[data-v-3e6a6f1c]{gap:12px;grid-template-columns:1fr;padding:16px}.section-header[data-v-3e6a6f1c]{align-items:flex-start;flex-direction:column;gap:8px;padding:12px 16px}.payment-summary[data-v-3e6a6f1c]{padding:16px}.notes-content[data-v-3e6a6f1c]{margin:16px;padding:16px}.data-table[data-v-3e6a6f1c]{font-size:12px}.data-table td[data-v-3e6a6f1c],.data-table th[data-v-3e6a6f1c]{padding:8px}.btn[data-v-3e6a6f1c]{width:100%}}@media (max-width:576px){.modal-header[data-v-3e6a6f1c]{align-items:flex-start;flex-direction:column;gap:12px}.close-btn[data-v-3e6a6f1c]{position:absolute;right:16px;top:16px}.data-table td[data-v-3e6a6f1c],.data-table th[data-v-3e6a6f1c]{font-size:11px;padding:6px}.invoice-line-info .line-description[data-v-3e6a6f1c]{font-size:12px}.invoice-line-info .line-details[data-v-3e6a6f1c]{font-size:10px}}",""]),n.locals={},t.exports=n},1287:function(t,e,o){var content=o(1606);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(15).default)("163a60ac",content,!0,{sourceMap:!1})},1354:function(t,e,o){"use strict";o.r(e);o(35),o(7),o(67),o(5);var n={name:"ReceiveHeaderView",props:{visible:{type:Boolean,default:!1},receipt:{type:Object,default:null}},methods:{closeDialog:function(){this.$emit("close")},editReceipt:function(){this.$emit("edit",this.receipt)},printReceipt:function(){window.print()},calculateTotalAllocations:function(){return this.receipt.receiveLines?this.receipt.receiveLines.reduce((function(t,line){return t+parseFloat(line.allocatedAmount||0)}),0):0},calculateTotalReceived:function(){return parseFloat(this.receipt.totalReceivedAmount||0)},getRemainingBalance:function(){var t;return parseFloat((null===(t=this.receipt.invoiceHeader)||void 0===t?void 0:t.totalAmount)||0)-this.calculateTotalReceived()},getAllocationStatusClass:function(line){var t=line.invoiceLine;if(!t)return"unknown";var e=parseFloat(t.lineTotal||0),o=parseFloat(line.allocatedAmount||0);return o>=e?"fully-allocated":o>0?"partially-allocated":"not-allocated"},getAllocationStatusText:function(line){var t=this.getAllocationStatusClass(line);return{"fully-allocated":"ແບ່ງປັນຄົບ","partially-allocated":"ແບ່ງປັນບາງສ່ວນ","not-allocated":"ຍັງບໍ່ແບ່ງປັນ",unknown:"ບໍ່ຮູ້ສະຖານະ"}[t]||t},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"},formatDateTime:function(t){return t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},formatCurrency:function(t){return t?parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatNumber:function(t){return t?parseFloat(t).toLocaleString("en-US"):"0"},formatPaymentMethod:function(t){return{cash:"ເງິນສົດ",check:"ເຊັກ",bank_transfer:"ໂອນເງິນທະນາຄານ",credit_card:"ບັດເຄຣດິດ",other:"ອື່ນໆ"}[t]||t},formatInvoiceStatus:function(t){return{draft:"ແບບຮ່າງ",sent:"ສົ່ງແລ້ວ",paid:"ຈ່າຍແລ້ວ",overdue:"ເກີນກຳນົດ",cancelled:"ຍົກເລີກ"}[t]||t}}},r=(o(1009),o(30)),component=Object(r.a)(n,(function(){var t,e=this,o=e._self._c;return e.visible?o("div",{staticClass:"modal-overlay",on:{click:e.closeDialog}},[o("div",{staticClass:"modal-container",on:{click:function(t){t.stopPropagation()}}},[o("div",{staticClass:"modal-header"},[o("h2",[e._v("ລາຍລະອຽດການຮັບຊຳລະ")]),e._v(" "),o("button",{staticClass:"close-btn",on:{click:e.closeDialog}},[o("i",{staticClass:"fas fa-times"})])]),e._v(" "),e.receipt?o("div",{staticClass:"modal-body"},[o("div",{staticClass:"info-section"},[o("div",{staticClass:"section-header"},[e._m(0),e._v(" "),o("span",{class:["payment-method-badge",e.receipt.paymentMethod]},[e._v("\n            "+e._s(e.formatPaymentMethod(e.receipt.paymentMethod))+"\n          ")])]),e._v(" "),o("div",{staticClass:"info-grid"},[o("div",{staticClass:"info-item"},[o("label",[e._v("ເລກທີໃບຮັບ:")]),e._v(" "),o("span",{staticClass:"receipt-number"},[e._v(e._s(e.receipt.receiptNumber))])]),e._v(" "),o("div",{staticClass:"info-item"},[o("label",[e._v("ວັນທີບັນທຶກ:")]),e._v(" "),o("span",[e._v(e._s(e.formatDate(e.receipt.bookingDate)))])]),e._v(" "),o("div",{staticClass:"info-item"},[o("label",[e._v("ວັນທີຮັບເງິນ:")]),e._v(" "),o("span",[e._v(e._s(e.formatDate(e.receipt.receivedDate)))])]),e._v(" "),o("div",{staticClass:"info-item"},[o("label",[e._v("ຍອດເງິນທີ່ຮັບ:")]),e._v(" "),o("span",{staticClass:"amount-received"},[e._v(e._s(e.formatCurrency(e.receipt.totalReceivedAmount)))])]),e._v(" "),e.receipt.referenceNumber?o("div",{staticClass:"info-item"},[o("label",[e._v("ເລກອ້າງອີງ:")]),e._v(" "),o("span",{staticClass:"reference-number"},[e._v(e._s(e.receipt.referenceNumber))])]):e._e()])]),e._v(" "),e.receipt.invoiceHeader?o("div",{staticClass:"info-section"},[e._m(1),e._v(" "),o("div",{staticClass:"info-grid"},[o("div",{staticClass:"info-item"},[o("label",[e._v("ເລກທີໃບແຈ້ງໜີ້:")]),e._v(" "),o("span",{staticClass:"invoice-number"},[e._v(e._s(e.receipt.invoiceHeader.invoiceNumber))])]),e._v(" "),o("div",{staticClass:"info-item"},[o("label",[e._v("ວັນທີໃບແຈ້ງໜີ້:")]),e._v(" "),o("span",[e._v(e._s(e.formatDate(e.receipt.invoiceHeader.invoiceDate)))])]),e._v(" "),e.receipt.invoiceHeader.dueDate?o("div",{staticClass:"info-item"},[o("label",[e._v("ວັນທີຄົບກຳນົດ:")]),e._v(" "),o("span",[e._v(e._s(e.formatDate(e.receipt.invoiceHeader.dueDate)))])]):e._e(),e._v(" "),o("div",{staticClass:"info-item"},[o("label",[e._v("ຍອດໃບແຈ້ງໜີ້:")]),e._v(" "),o("span",{staticClass:"invoice-amount"},[e._v(e._s(e.formatCurrency(e.receipt.invoiceHeader.totalAmount)))])]),e._v(" "),e.receipt.invoiceHeader.customer?o("div",{staticClass:"info-item"},[o("label",[e._v("ລູກຄ້າ:")]),e._v(" "),o("span",{staticClass:"customer-name"},[e._v(e._s(e.receipt.invoiceHeader.customer.name))])]):e._e(),e._v(" "),o("div",{staticClass:"info-item"},[o("label",[e._v("ສະຖານະໃບແຈ້ງໜີ້:")]),e._v(" "),o("span",{class:["status-badge",e.receipt.invoiceHeader.status]},[e._v("\n              "+e._s(e.formatInvoiceStatus(e.receipt.invoiceHeader.status))+"\n            ")])])])]):e._e(),e._v(" "),o("div",{staticClass:"info-section"},[e._m(2),e._v(" "),o("div",{staticClass:"payment-summary"},[o("div",{staticClass:"summary-row"},[o("label",[e._v("ຍອດໃບແຈ້ງໜີ້:")]),e._v(" "),o("span",{staticClass:"amount invoice-total"},[e._v(e._s(e.formatCurrency((null===(t=e.receipt.invoiceHeader)||void 0===t?void 0:t.totalAmount)||0)))])]),e._v(" "),o("div",{staticClass:"summary-row"},[o("label",[e._v("ຍອດທີ່ຮັບຄັ້ງນີ້:")]),e._v(" "),o("span",{staticClass:"amount current-payment"},[e._v(e._s(e.formatCurrency(e.receipt.totalReceivedAmount)))])]),e._v(" "),o("div",{staticClass:"summary-row"},[o("label",[e._v("ລວມທີ່ຮັບແລ້ວທັງໝົດ:")]),e._v(" "),o("span",{staticClass:"amount total-received"},[e._v(e._s(e.formatCurrency(e.calculateTotalReceived())))])]),e._v(" "),o("div",{staticClass:"summary-row subtotal"},[o("label",[e._v("ຍອດຄົງເຫຼືອ:")]),e._v(" "),o("span",{staticClass:"amount remaining",class:{"fully-paid":e.getRemainingBalance()<=0}},[e._v("\n              "+e._s(e.formatCurrency(e.getRemainingBalance()))+"\n            ")])]),e._v(" "),e.getRemainingBalance()<=0?o("div",{staticClass:"paid-status"},[o("i",{staticClass:"fas fa-check-circle"}),e._v(" "),o("span",[e._v("ຈ່າຍຄົບແລ້ວ")])]):e._e()])]),e._v(" "),e.receipt.receiveLines&&e.receipt.receiveLines.length>0?o("div",{staticClass:"info-section"},[o("div",{staticClass:"section-header"},[e._m(3),e._v(" "),o("span",{staticClass:"item-count"},[e._v(e._s(e.receipt.receiveLines.length)+" ລາຍການ")])]),e._v(" "),o("div",{staticClass:"table-container"},[o("table",{staticClass:"data-table"},[e._m(4),e._v(" "),o("tbody",e._l(e.receipt.receiveLines,(function(line){return o("tr",{key:line.id},[o("td",{staticClass:"line-number"},[e._v(e._s(line.lineNumber))]),e._v(" "),o("td",[o("div",{staticClass:"invoice-line-info"},[o("div",{staticClass:"line-description"},[o("strong",[e._v(e._s(line.invoiceLine?line.invoiceLine.description:"N/A"))])]),e._v(" "),line.invoiceLine?o("div",{staticClass:"line-details"},[e._v("\n                      ຈຳນວນ: "+e._s(e.formatNumber(line.invoiceLine.quantity))+" × \n                      "+e._s(e.formatCurrency(line.invoiceLine.unitPrice))+" = \n                      "+e._s(e.formatCurrency(line.invoiceLine.lineTotal))+"\n                    ")]):e._e()])]),e._v(" "),o("td",{staticClass:"allocated-amount"},[e._v("\n                  "+e._s(e.formatCurrency(line.allocatedAmount))+"\n                ")]),e._v(" "),o("td",[e._v(e._s(e.formatDate(line.allocationDate)))]),e._v(" "),o("td",[o("span",{staticClass:"line-notes"},[e._v(e._s(line.notes||"-"))])]),e._v(" "),o("td",[o("span",{staticClass:"allocation-status",class:e.getAllocationStatusClass(line)},[e._v("\n                    "+e._s(e.getAllocationStatusText(line))+"\n                  ")])])])})),0),e._v(" "),o("tfoot",[o("tr",{staticClass:"summary-row"},[e._m(5),e._v(" "),o("td",{staticClass:"allocated-total"},[o("strong",[e._v(e._s(e.formatCurrency(e.calculateTotalAllocations())))])]),e._v(" "),o("td",{attrs:{colspan:"3"}})])])])])]):e._e(),e._v(" "),e.receipt.notes?o("div",{staticClass:"info-section"},[e._m(6),e._v(" "),o("div",{staticClass:"notes-content"},[e._v("\n          "+e._s(e.receipt.notes)+"\n        ")])]):e._e(),e._v(" "),o("div",{staticClass:"info-section"},[e._m(7),e._v(" "),o("div",{staticClass:"info-grid"},[e.receipt.inputter?o("div",{staticClass:"info-item"},[o("label",[e._v("ຜູ້ບັນທຶກ:")]),e._v(" "),o("span",[e._v(e._s(e.receipt.inputter.username))])]):e._e(),e._v(" "),e.receipt.maker?o("div",{staticClass:"info-item"},[o("label",[e._v("ຜູ້ສ້າງ:")]),e._v(" "),o("span",[e._v(e._s(e.receipt.maker.username))])]):e._e(),e._v(" "),o("div",{staticClass:"info-item"},[o("label",[e._v("ວັນທີສ້າງ:")]),e._v(" "),o("span",[e._v(e._s(e.formatDateTime(e.receipt.createdAt)))])]),e._v(" "),e.receipt.updateUser?o("div",{staticClass:"info-item"},[o("label",[e._v("ຜູ້ແກ້ໄຂຫຼ້າສຸດ:")]),e._v(" "),o("span",[e._v(e._s(e.receipt.updateUser.username))])]):e._e(),e._v(" "),e.receipt.updateTimestamp?o("div",{staticClass:"info-item"},[o("label",[e._v("ວັນທີແກ້ໄຂຫຼ້າສຸດ:")]),e._v(" "),o("span",[e._v(e._s(e.formatDateTime(e.receipt.updateTimestamp)))])]):e._e()])])]):e._e(),e._v(" "),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.closeDialog}},[o("i",{staticClass:"fas fa-times"}),e._v("\n        ປິດ\n      ")]),e._v(" "),o("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.printReceipt}},[o("i",{staticClass:"fas fa-print"}),e._v("\n        ພິມໃບຮັບ\n      ")]),e._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.editReceipt}},[o("i",{staticClass:"fas fa-edit"}),e._v("\n        ແກ້ໄຂ\n      ")])])])]):e._e()}),[function(){var t=this._self._c;return t("h3",[t("i",{staticClass:"fas fa-receipt"}),this._v("\n            ຂໍ້ມູນການຮັບຊຳລະ\n          ")])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-file-invoice"}),this._v("\n            ຂໍ້ມູນໃບແຈ້ງໜີ້\n          ")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-calculator"}),this._v("\n            ສະຫຼຸບການຮັບຊຳລະ\n          ")])])},function(){var t=this._self._c;return t("h3",[t("i",{staticClass:"fas fa-list"}),this._v("\n            ລາຍລະອຽດການແບ່ງປັນ\n          ")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ລຳດັບ")]),t._v(" "),e("th",[t._v("ລາຍການໃບແຈ້ງໜີ້")]),t._v(" "),e("th",[t._v("ຍອດແບ່ງປັນ")]),t._v(" "),e("th",[t._v("ວັນທີແບ່ງປັນ")]),t._v(" "),e("th",[t._v("ໝາຍເຫດ")]),t._v(" "),e("th",[t._v("ສະຖານະ")])])])},function(){var t=this._self._c;return t("td",{attrs:{colspan:"2"}},[t("strong",[this._v("ລວມການແບ່ງປັນ:")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-comment-alt"}),this._v("\n            ໝາຍເຫດ\n          ")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-info-circle"}),this._v("\n            ຂໍ້ມູນລະບົບ\n          ")])])}],!1,null,"3e6a6f1c",null);e.default=component.exports},1605:function(t,e,o){"use strict";o(1287)},1606:function(t,e,o){var n=o(14)((function(i){return i[1]}));n.push([t.i,".receive-header-summary-container[data-v-461f6740]{background-color:#f5f5f5;min-height:100vh;padding:20px}.page-header[data-v-461f6740]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px;padding:20px}.header-content[data-v-461f6740]{align-items:center;display:flex;justify-content:space-between}.page-title[data-v-461f6740]{color:#333;font-size:28px;font-weight:600;margin:0}.header-actions[data-v-461f6740]{display:flex;gap:12px}.filter-section[data-v-461f6740]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px;padding:20px}.filter-row[data-v-461f6740]{align-items:flex-end;display:flex;flex-wrap:wrap;gap:20px}.filter-group[data-v-461f6740]{display:flex;flex-direction:column;gap:8px;min-width:150px}.filter-group label[data-v-461f6740]{color:#555;font-size:14px;font-weight:500}.filter-actions[data-v-461f6740]{align-self:flex-end;display:flex;gap:8px}.summary-cards[data-v-461f6740]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));margin-bottom:20px}.summary-card[data-v-461f6740]{align-items:flex-start;background:#fff;border:1px solid #e9ecef;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,.1);display:flex;padding:24px;transition:all .3s ease}.summary-card[data-v-461f6740]:hover{box-shadow:0 8px 16px rgba(0,0,0,.15);transform:translateY(-4px)}.summary-card.total-receipts[data-v-461f6740]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff}.summary-card.total-receipts .card-icon[data-v-461f6740]{background:hsla(0,0%,100%,.2);color:#fff}.summary-card.payment-cash[data-v-461f6740]{border-left:4px solid #28a745}.summary-card.payment-transfer[data-v-461f6740]{border-left:4px solid #007bff}.summary-card.payment-check[data-v-461f6740]{border-left:4px solid #ffc107}.summary-card.payment-card[data-v-461f6740]{border-left:4px solid #dc3545}.summary-card.amount-stats[data-v-461f6740]{border-left:4px solid #6f42c1}.card-icon[data-v-461f6740]{align-items:center;border-radius:50%;display:flex;flex-shrink:0;font-size:24px;height:60px;justify-content:center;margin-right:20px;width:60px}.card-icon.total[data-v-461f6740]{background:hsla(0,0%,100%,.2);color:#fff}.card-icon.cash[data-v-461f6740]{background:#d4edda;color:#28a745}.card-icon.transfer[data-v-461f6740]{background:#cce5ff;color:#007bff}.card-icon.check[data-v-461f6740]{background:#fff3cd;color:#ffc107}.card-icon.card[data-v-461f6740]{background:#f8d7da;color:#dc3545}.card-icon.amount[data-v-461f6740]{background:#e2d9ff;color:#6f42c1}.card-content[data-v-461f6740]{flex:1;min-width:0}.card-content h3[data-v-461f6740]{font-size:24px;font-weight:700;margin:0 0 8px;word-break:break-word}.card-content p[data-v-461f6740]{font-size:14px;margin:0}.amount-info[data-v-461f6740]{display:block;font-size:12px;margin-top:4px;opacity:.8}.table-section[data-v-461f6740]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);overflow:hidden}.table-header[data-v-461f6740]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px}.table-title h3[data-v-461f6740]{color:#333;margin:0}.record-count[data-v-461f6740]{color:#666;font-size:14px;margin-left:8px}.per-page-selector[data-v-461f6740]{align-items:center;display:flex;font-size:14px;gap:8px}.table-container[data-v-461f6740]{overflow-x:auto}.data-table[data-v-461f6740]{border-collapse:collapse;width:100%}.data-table td[data-v-461f6740],.data-table th[data-v-461f6740]{border-bottom:1px solid #e9ecef;padding:12px 16px;text-align:left}.data-table th[data-v-461f6740]{background-color:#f8f9fa;color:#495057;font-weight:600}.data-table th.sortable[data-v-461f6740]{cursor:pointer;transition:background-color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none}.data-table th.sortable[data-v-461f6740]:hover{background-color:#e9ecef}.data-table th i[data-v-461f6740]{margin-left:8px;opacity:.5}.receipt-number strong[data-v-461f6740]{color:#333;display:block;font-size:14px;margin-bottom:4px}.receipt-notes[data-v-461f6740]{color:#666;font-size:12px}.invoice-info .invoice-number[data-v-461f6740]{align-items:center;color:#495057;display:flex;font-weight:600;gap:4px;margin-bottom:2px}.invoice-info .customer-name[data-v-461f6740]{color:#666;font-size:12px;margin-left:16px}.amount-details .received-amount[data-v-461f6740]{color:#495057;font-weight:600;margin-bottom:2px}.allocation-info[data-v-461f6740]{color:#666;font-size:11px}.payment-method-badge[data-v-461f6740]{border-radius:12px;font-size:12px;font-weight:600;padding:4px 12px;text-transform:uppercase}.payment-method-badge.cash[data-v-461f6740]{background-color:#d4edda;color:#155724}.payment-method-badge.bank_transfer[data-v-461f6740]{background-color:#cce5ff;color:#004085}.payment-method-badge.check[data-v-461f6740]{background-color:#fff3cd;color:#856404}.payment-method-badge.credit_card[data-v-461f6740]{background-color:#f8d7da;color:#721c24}.payment-method-badge.other[data-v-461f6740]{background-color:#e2e3e5;color:#383d41}.reference-number[data-v-461f6740]{color:#495057;font-family:monospace;font-size:13px}.inputter-info[data-v-461f6740]{color:#495057;font-size:14px}.inputter-info small[data-v-461f6740]{color:#666;display:block;font-size:12px;margin-top:2px}.actions-cell[data-v-461f6740]{display:flex;flex-wrap:wrap;gap:4px}.btn[data-v-461f6740]{align-items:center;border:1px solid transparent;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s}.btn[data-v-461f6740]:disabled{cursor:not-allowed;opacity:.5}.btn-primary[data-v-461f6740]{background-color:#007bff;border-color:#007bff;color:#fff}.btn-primary[data-v-461f6740]:hover:not(:disabled){background-color:#0056b3;border-color:#0056b3}.btn-secondary[data-v-461f6740]{background-color:#6c757d;border-color:#6c757d;color:#fff}.btn-secondary[data-v-461f6740]:hover:not(:disabled){background-color:#5a6268;border-color:#5a6268}.btn-outline-primary[data-v-461f6740]{background-color:transparent;border-color:#007bff;color:#007bff}.btn-outline-primary[data-v-461f6740]:hover{background-color:#007bff;color:#fff}.btn-outline-secondary[data-v-461f6740]{background-color:transparent;border-color:#6c757d;color:#6c757d}.btn-outline-secondary[data-v-461f6740]:hover{background-color:#6c757d;color:#fff}.btn-outline-info[data-v-461f6740]{background-color:transparent;border-color:#17a2b8;color:#17a2b8}.btn-outline-info[data-v-461f6740]:hover{background-color:#17a2b8;color:#fff}.btn-outline-success[data-v-461f6740]{background-color:transparent;border-color:#28a745;color:#28a745}.btn-outline-success[data-v-461f6740]:hover{background-color:#28a745;color:#fff}.btn-outline-danger[data-v-461f6740]{background-color:transparent;border-color:#dc3545;color:#dc3545}.btn-outline-danger[data-v-461f6740]:hover{background-color:#dc3545;color:#fff}.btn-sm[data-v-461f6740]{font-size:12px;padding:4px 8px}.form-control[data-v-461f6740]{border:1px solid #ced4da;border-radius:4px;font-size:14px;padding:8px 12px;transition:border-color .2s}.form-control[data-v-461f6740]:focus{border-color:#007bff;box-shadow:0 0 0 2px rgba(0,123,255,.25);outline:none}.pagination-container[data-v-461f6740]{align-items:center;border-top:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px}.pagination-info[data-v-461f6740]{color:#666;font-size:14px}.pagination-controls[data-v-461f6740]{align-items:center;display:flex;gap:8px}.pagination-ellipsis[data-v-461f6740]{color:#666;padding:6px 12px}.loading-overlay[data-v-461f6740]{align-items:center;background-color:rgba(0,0,0,.5);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.loading-spinner[data-v-461f6740]{background:#fff;border-radius:8px;padding:40px;text-align:center}.loading-spinner i[data-v-461f6740]{color:#007bff;font-size:32px;margin-bottom:16px}@media (max-width:768px){.receive-header-summary-container[data-v-461f6740]{padding:10px}.header-content[data-v-461f6740]{align-items:flex-start}.filter-row[data-v-461f6740],.header-content[data-v-461f6740]{flex-direction:column;gap:16px}.filter-group[data-v-461f6740]{min-width:auto;width:100%}.filter-actions[data-v-461f6740]{flex-direction:row;width:100%}.summary-cards[data-v-461f6740]{gap:16px;grid-template-columns:1fr}.summary-card[data-v-461f6740]{padding:20px}.card-icon[data-v-461f6740]{height:50px;margin-right:16px;width:50px}.card-content h3[data-v-461f6740],.card-icon[data-v-461f6740]{font-size:20px}.pagination-container[data-v-461f6740],.table-header[data-v-461f6740]{align-items:flex-start;flex-direction:column;gap:16px}.pagination-controls[data-v-461f6740]{flex-wrap:wrap}.actions-cell[data-v-461f6740]{flex-direction:column;gap:4px}}@media (max-width:576px){.summary-card[data-v-461f6740]{flex-direction:column;text-align:center}.card-icon[data-v-461f6740]{margin:0 auto 16px}}",""]),n.locals={},t.exports=n},1853:function(t,e,o){"use strict";o.r(e);o(34),o(131),o(44),o(9),o(5),o(35),o(10),o(7),o(11),o(8),o(12);var n=o(33),r=o(3),c=o(20),l=(o(91),o(63),o(39),o(51),o(251),o(102),o(31),o(84),o(54),o(53),o(829),o(449),o(1726)),view=o(1354);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"ReceiveHeaderSummary",components:{ReceiveHeaderMaintain:l.default,ReceiveHeaderView:view.default},data:function(){return{showEditDialog:!1,showViewDialog:!1,selectedReceipt:null,receipts:[],filteredReceipts:[],invoices:[],users:[],loading:!1,filters:{search:"",paymentMethod:"",invoiceHeaderId:"",bookingDateFrom:"",bookingDateTo:""},sort:{field:"bookingDate",direction:"desc"},pagination:{currentPage:1,perPage:25},summaryStats:{total:{count:0},cash:{count:0,percentage:0,amount:0},bankTransfer:{count:0,percentage:0,amount:0},check:{count:0,percentage:0,amount:0},creditCard:{count:0,percentage:0,amount:0},other:{count:0,percentage:0,amount:0},totalAmount:0,averageAmount:0}}},computed:{user:function(){return this.$auth.user||""},paginatedReceipts:function(){var t=(this.pagination.currentPage-1)*this.pagination.perPage,e=t+this.pagination.perPage;return this.filteredReceipts.slice(t,e)},totalPages:function(){return Math.ceil(this.filteredReceipts.length/this.pagination.perPage)},paginationInfo:function(){var t=(this.pagination.currentPage-1)*this.pagination.perPage+1;return{start:t,end:Math.min(t+this.pagination.perPage-1,this.filteredReceipts.length),total:this.filteredReceipts.length}},visiblePages:function(){var t=[],e=this.pagination.currentPage,o=this.totalPages;if(o<=7)for(var i=1;i<=o;i++)t.push(i);else if(e<=4){for(var n=1;n<=5;n++)t.push(n);t.push("..."),t.push(o)}else if(e>=o-3){t.push(1),t.push("...");for(var r=o-4;r<=o;r++)t.push(r)}else{t.push(1),t.push("...");for(var c=e-1;c<=e+1;c++)t.push(c);t.push("..."),t.push(o)}return t}},mounted:function(){this.fetchReceipts(),this.fetchInvoices(),this.fetchUsers()},methods:{fetchUsers:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/user/find");case 3:o=e.sent,(data=o.data)&&data.data?t.users=Array.isArray(data)?data:[]:Array.isArray(data)?t.users=data:t.users=[],console.log("Fetched users:",t.users.length),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching users:",e.t0),t.users=[],t.showToast("Failed to load users","error");case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))()},fetchReceipts:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var o,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,o=f({page:1,limit:1e3},t.filters),e.next=5,t.$axios.get("/api/ar-receive-headers",{params:o});case 5:n=e.sent,(data=n.data)&&data.success?t.receipts=data.data.receiveHeaders||[]:t.receipts=[],t.applyFilters(),t.calculateSummaryStats(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Error fetching receipts:",e.t0),t.showToast("Error loading receipt data","error"),t.receipts=[];case 17:return e.prev=17,t.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,12,17,20]])})))()},fetchInvoices:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/ar-invoices");case 3:o=e.sent,(data=o.data)&&data.success&&(t.invoices=data.data.invoices||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching invoices:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},openCreateDialog:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.selectedReceipt=null,t.showEditDialog=!0;case 2:case"end":return e.stop()}}),e)})))()},editReceipt:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.selectedReceipt=t,e.showEditDialog=!0;case 2:case"end":return o.stop()}}),o)})))()},viewReceipt:function(t){this.selectedReceipt=t,this.showViewDialog=!0},printReceipt:function(t){this.showToast("ພິມໃບຮັບ: "+t.receiptNumber,"info")},deleteReceipt:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var n,data,r,c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!confirm("ທ່ານຕ້ອງການລຶບໃບຮັບເງິນ ".concat(t.receiptNumber," ແມ່ນບໍ?"))){o.next=24;break}return o.prev=1,e.loading=!0,o.next=5,e.$axios.delete("/api/ar-receive-headers/".concat(t.id));case 5:if(n=o.sent,!(data=n.data)||!data.success){o.next=13;break}return e.showToast("ລຶບໃບຮັບເງິນສຳເລັດແລ້ວ","success"),o.next=11,e.fetchReceipts();case 11:o.next=14;break;case 13:throw new Error((null==data?void 0:data.message)||"Delete failed");case 14:o.next=21;break;case 16:o.prev=16,o.t0=o.catch(1),console.error("Error deleting receipt:",o.t0),l=(null===(r=o.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)||o.t0.message||"ລຶບບໍ່ສຳເລັດ",e.showToast(l,"error");case 21:return o.prev=21,e.loading=!1,o.finish(21);case 24:case"end":return o.stop()}}),o,null,[[1,16,21,24]])})))()},closeEditDialog:function(){this.showEditDialog=!1,this.selectedReceipt=null},closeViewDialog:function(){this.showViewDialog=!1,this.selectedReceipt=null},onReceiptSave:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var n,r,c,l,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.info("DATA  MAIN ".concat(JSON.stringify(t))),o.prev=1,e.loading=!0,!e.selectedReceipt||!e.selectedReceipt.id){o.next=9;break}return o.next=6,e.$axios.put("/api/ar-receive-headers/".concat(e.selectedReceipt.id),t);case 6:n=o.sent,o.next=12;break;case 9:return o.next=11,e.$axios.post("/api/ar-receive-headers",t);case 11:n=o.sent;case 12:if(!n.data||!n.data.success){o.next=19;break}return e.showToast("ການບັນທຶກສຳເລັດແລ້ວ","success"),e.closeEditDialog(),o.next=17,e.fetchReceipts();case 17:o.next=20;break;case 19:throw new Error((null===(r=n.data)||void 0===r?void 0:r.message)||"Save failed");case 20:o.next=27;break;case 22:o.prev=22,o.t0=o.catch(1),console.error("Error saving receipt:",o.t0),d=(null===(c=o.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)||o.t0.message||"ການບັນທຶກບໍ່ສຳເລັດ",e.showToast(d,"error");case 27:return o.prev=27,e.loading=!1,o.finish(27);case 30:case"end":return o.stop()}}),o,null,[[1,22,27,30]])})))()},applyFilters:function(){var t=this,e=Object(n.a)(this.receipts);if(this.filters.search){var o=this.filters.search.toLowerCase();e=e.filter((function(t){return t.receiptNumber.toLowerCase().includes(o)||t.referenceNumber&&t.referenceNumber.toLowerCase().includes(o)||t.notes&&t.notes.toLowerCase().includes(o)}))}this.filters.paymentMethod&&(e=e.filter((function(e){return e.paymentMethod===t.filters.paymentMethod}))),this.filters.invoiceHeaderId&&(e=e.filter((function(e){return e.invoiceHeaderId==t.filters.invoiceHeaderId}))),(this.filters.bookingDateFrom||this.filters.bookingDateTo)&&(e=e.filter((function(e){var o=new Date(e.bookingDate),n=t.filters.bookingDateFrom?new Date(t.filters.bookingDateFrom):null,r=t.filters.bookingDateTo?new Date(t.filters.bookingDateTo):null;return!(n&&o<n)&&!(r&&o>r)}))),this.filteredReceipts=e,this.sortData(),this.pagination.currentPage=1,this.calculateSummaryStats()},resetFilters:function(){this.filters={search:"",paymentMethod:"",invoiceHeaderId:"",bookingDateFrom:"",bookingDateTo:""},this.applyFilters()},sortBy:function(t){this.sort.field===t?this.sort.direction="asc"===this.sort.direction?"desc":"asc":(this.sort.field=t,this.sort.direction="asc"),this.sortData()},sortData:function(){var t=this;this.filteredReceipts.sort((function(a,b){var e=a[t.sort.field],o=b[t.sort.field];return"string"==typeof e&&(e=e.toLowerCase(),o=o.toLowerCase()),e<o?"asc"===t.sort.direction?-1:1:e>o?"asc"===t.sort.direction?1:-1:0}))},getSortIcon:function(t){return this.sort.field!==t?"fas fa-sort":"asc"===this.sort.direction?"fas fa-sort-up":"fas fa-sort-down"},calculateSummaryStats:function(){var t=this.filteredReceipts.length,e=this.filteredReceipts.filter((function(t){return"cash"===t.paymentMethod})).length,o=this.filteredReceipts.filter((function(t){return"bank_transfer"===t.paymentMethod})).length,n=this.filteredReceipts.filter((function(t){return"check"===t.paymentMethod})).length,r=this.filteredReceipts.filter((function(t){return"credit_card"===t.paymentMethod})).length,c=this.filteredReceipts.filter((function(t){return"other"===t.paymentMethod})).length,l=this.filteredReceipts.reduce((function(t,e){return t+parseFloat(e.totalReceivedAmount||0)}),0),d=this.filteredReceipts.filter((function(t){return"cash"===t.paymentMethod})).reduce((function(t,e){return t+parseFloat(e.totalReceivedAmount||0)}),0),f=this.filteredReceipts.filter((function(t){return"bank_transfer"===t.paymentMethod})).reduce((function(t,e){return t+parseFloat(e.totalReceivedAmount||0)}),0),v=this.filteredReceipts.filter((function(t){return"check"===t.paymentMethod})).reduce((function(t,e){return t+parseFloat(e.totalReceivedAmount||0)}),0),m=this.filteredReceipts.filter((function(t){return"credit_card"===t.paymentMethod})).reduce((function(t,e){return t+parseFloat(e.totalReceivedAmount||0)}),0);this.summaryStats={total:{count:t},cash:{count:e,percentage:t>0?Math.round(e/t*100):0,amount:d},bankTransfer:{count:o,percentage:t>0?Math.round(o/t*100):0,amount:f},check:{count:n,percentage:t>0?Math.round(n/t*100):0,amount:v},creditCard:{count:r,percentage:t>0?Math.round(r/t*100):0,amount:m},other:{count:c,percentage:t>0?Math.round(c/t*100):0,amount:0},totalAmount:l,averageAmount:t>0?l/t:0}},updatePagination:function(){this.pagination.currentPage=1},previousPage:function(){this.pagination.currentPage>1&&this.pagination.currentPage--},nextPage:function(){this.pagination.currentPage<this.totalPages&&this.pagination.currentPage++},goToPage:function(t){this.pagination.currentPage=t},exportData:function(){var t=this.convertToCSV(this.filteredReceipts);this.downloadCSV(t,"receipts-summary.csv")},convertToCSV:function(data){var t=this;return[["Receipt Number","Booking Date","Received Date","Invoice Number","Total Amount","Payment Method","Reference Number","Notes","Created Date"].join(",")].concat(Object(n.a)(data.map((function(e){return['"'.concat(e.receiptNumber,'"'),e.bookingDate,e.receivedDate,'"'.concat(e.invoiceHeader?e.invoiceHeader.invoiceNumber:"",'"'),e.totalReceivedAmount,e.paymentMethod,'"'.concat(e.referenceNumber||"",'"'),'"'.concat((e.notes||"").replace(/"/g,'""'),'"'),t.formatDate(e.createdAt)].join(",")})))).join("\n")},downloadCSV:function(t,e){var o=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download=e,a.click(),window.URL.revokeObjectURL(n)},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"},formatCurrency:function(t){return t?parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatPaymentMethod:function(t){return{cash:"ເງິນສົດ",check:"ເຊັກ",bank_transfer:"ໂອນເງິນທະນາຄານ",credit_card:"ບັດເຄຣດິດ",other:"ອື່ນໆ"}[t]||t},truncateText:function(text,t){return text?text.length>t?text.substring(0,t)+"...":text:""},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("".concat(e,": ").concat(t)),this.$toast?this.$toast[e](t):"error"===e?alert("Error: ".concat(t)):"success"===e&&console.log("✅ ".concat(t))}}},m=v,h=(o(1605),o(30)),component=Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"receive-header-summary-container"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"header-content"},[e("h1",{staticClass:"page-title"},[t._v("ລະບົບຈັດການການຮັບຊຳລະ")]),t._v(" "),e("div",{staticClass:"header-actions"},[e("button",{staticClass:"btn btn-primary",on:{click:t.openCreateDialog}},[e("i",{staticClass:"fas fa-plus"}),t._v("\n          ເພີ່ມການຮັບຊຳລະໃໝ່\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-secondary",on:{click:t.exportData}},[e("i",{staticClass:"fas fa-download"}),t._v("\n          Export\n        ")])])])]),t._v(" "),e("div",{staticClass:"filter-section"},[e("div",{staticClass:"filter-row"},[e("div",{staticClass:"filter-group"},[e("label",[t._v("ຄົ້ນຫາ:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.search,expression:"filters.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເລກທີໃບຮັບ, ເລກອ້າງອີງ..."},domProps:{value:t.filters.search},on:{input:[function(e){e.target.composing||t.$set(t.filters,"search",e.target.value)},t.applyFilters]}})]),t._v(" "),e("div",{staticClass:"filter-group"},[e("label",[t._v("ວິທີຈ່າຍ:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.paymentMethod,expression:"filters.paymentMethod"}],staticClass:"form-control",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"paymentMethod",e.target.multiple?o:o[0])},t.applyFilters]}},[e("option",{attrs:{value:""}},[t._v("ທັງໝົດ")]),t._v(" "),e("option",{attrs:{value:"cash"}},[t._v("ເງິນສົດ")]),t._v(" "),e("option",{attrs:{value:"check"}},[t._v("ເຊັກ")]),t._v(" "),e("option",{attrs:{value:"bank_transfer"}},[t._v("ໂອນເງິນທະນາຄານ")]),t._v(" "),e("option",{attrs:{value:"credit_card"}},[t._v("ບັດເຄຣດິດ")]),t._v(" "),e("option",{attrs:{value:"other"}},[t._v("ອື່ນໆ")])])]),t._v(" "),e("div",{staticClass:"filter-group"},[e("label",[t._v("ໃບແຈ້ງໜີ້:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.invoiceHeaderId,expression:"filters.invoiceHeaderId"}],staticClass:"form-control",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"invoiceHeaderId",e.target.multiple?o:o[0])},t.applyFilters]}},[e("option",{attrs:{value:""}},[t._v("ທັງໝົດ")]),t._v(" "),t._l(t.invoices,(function(o){return e("option",{key:o.id,domProps:{value:o.id}},[t._v("\n            "+t._s(o.invoiceNumber)+"\n          ")])}))],2)]),t._v(" "),e("div",{staticClass:"filter-group"},[e("label",[t._v("ວັນທີບັນທຶກຈາກ:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.bookingDateFrom,expression:"filters.bookingDateFrom"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.filters.bookingDateFrom},on:{change:t.applyFilters,input:function(e){e.target.composing||t.$set(t.filters,"bookingDateFrom",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"filter-group"},[e("label",[t._v("ວັນທີບັນທຶກເຖິງ:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.bookingDateTo,expression:"filters.bookingDateTo"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.filters.bookingDateTo},on:{change:t.applyFilters,input:function(e){e.target.composing||t.$set(t.filters,"bookingDateTo",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"filter-actions"},[e("button",{staticClass:"btn btn-outline-primary",on:{click:t.applyFilters}},[e("i",{staticClass:"fas fa-search"}),t._v("\n          ຄົ້ນຫາ\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",on:{click:t.resetFilters}},[e("i",{staticClass:"fas fa-undo"}),t._v("\n          Reset\n        ")])])])]),t._v(" "),e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"summary-card total-receipts"},[t._m(0),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.total.count))]),t._v(" "),e("p",[t._v("ລວມການຮັບຊຳລະທັງໝົດ")])])]),t._v(" "),e("div",{staticClass:"summary-card payment-cash"},[t._m(1),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.cash.count))]),t._v(" "),e("p",[t._v("ເງິນສົດ ("+t._s(t.summaryStats.cash.percentage)+"%)")]),t._v(" "),e("small",{staticClass:"amount-info"},[t._v(t._s(t.formatCurrency(t.summaryStats.cash.amount)))])])]),t._v(" "),e("div",{staticClass:"summary-card payment-transfer"},[t._m(2),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.bankTransfer.count))]),t._v(" "),e("p",[t._v("ໂອນເງິນທະນາຄານ ("+t._s(t.summaryStats.bankTransfer.percentage)+"%)")]),t._v(" "),e("small",{staticClass:"amount-info"},[t._v(t._s(t.formatCurrency(t.summaryStats.bankTransfer.amount)))])])]),t._v(" "),e("div",{staticClass:"summary-card payment-check"},[t._m(3),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.check.count))]),t._v(" "),e("p",[t._v("ເຊັກ ("+t._s(t.summaryStats.check.percentage)+"%)")]),t._v(" "),e("small",{staticClass:"amount-info"},[t._v(t._s(t.formatCurrency(t.summaryStats.check.amount)))])])]),t._v(" "),e("div",{staticClass:"summary-card amount-stats"},[t._m(4),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.formatCurrency(t.summaryStats.totalAmount)))]),t._v(" "),e("p",[t._v("ຍອດຮັບຊຳລະລວມ")]),t._v(" "),e("small",{staticClass:"amount-info"},[t._v("ສະເລ່ຍ: "+t._s(t.formatCurrency(t.summaryStats.averageAmount)))])])])]),t._v(" "),e("div",{staticClass:"table-section"},[e("div",{staticClass:"table-header"},[e("div",{staticClass:"table-title"},[e("h3",[t._v("ລາຍການການຮັບຊຳລະ")]),t._v(" "),e("span",{staticClass:"record-count"},[t._v(t._s(t.filteredReceipts.length)+" ລາຍການ")])]),t._v(" "),e("div",{staticClass:"table-actions"},[e("div",{staticClass:"per-page-selector"},[e("label",[t._v("Show:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.pagination.perPage,expression:"pagination.perPage"}],on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.pagination,"perPage",e.target.multiple?o:o[0])},t.updatePagination]}},[e("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),e("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),e("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),e("option",{attrs:{value:"100"}},[t._v("100")])]),t._v(" "),e("span",[t._v("per page")])])])]),t._v(" "),e("div",{staticClass:"table-container"},[e("table",{staticClass:"data-table"},[e("thead",[e("tr",[e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("receiptNumber")}}},[t._v("\n              ເລກທີໃບຮັບ\n              "),e("i",{class:t.getSortIcon("receiptNumber")})]),t._v(" "),e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("bookingDate")}}},[t._v("\n              ວັນທີບັນທຶກ\n              "),e("i",{class:t.getSortIcon("bookingDate")})]),t._v(" "),e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("receivedDate")}}},[t._v("\n              ວັນທີຮັບເງິນ\n              "),e("i",{class:t.getSortIcon("receivedDate")})]),t._v(" "),e("th",[t._v("ໃບແຈ້ງໜີ້")]),t._v(" "),e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("totalReceivedAmount")}}},[t._v("\n              ຍອດເງິນ\n              "),e("i",{class:t.getSortIcon("totalReceivedAmount")})]),t._v(" "),e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("paymentMethod")}}},[t._v("\n              ວິທີຈ່າຍ\n              "),e("i",{class:t.getSortIcon("paymentMethod")})]),t._v(" "),e("th",[t._v("ເລກອ້າງອີງ")]),t._v(" "),e("th",[t._v("ຜູ້ບັນທຶກ")]),t._v(" "),e("th",[t._v("ຟັງຊັ່ນ")])])]),t._v(" "),e("tbody",t._l(t.paginatedReceipts,(function(o){return e("tr",{key:o.id},[e("td",[e("div",{staticClass:"receipt-number"},[e("strong",[t._v(t._s(o.receiptNumber))]),t._v(" "),o.notes?e("div",{staticClass:"receipt-notes"},[t._v("\n                  "+t._s(t.truncateText(o.notes,50))+"\n                ")]):t._e()])]),t._v(" "),e("td",[t._v(t._s(t.formatDate(o.bookingDate)))]),t._v(" "),e("td",[t._v(t._s(t.formatDate(o.receivedDate)))]),t._v(" "),e("td",[e("div",{staticClass:"invoice-info"},[e("div",{staticClass:"invoice-number"},[e("i",{staticClass:"fas fa-file-invoice"}),t._v("\n                  "+t._s(o.invoiceHeader?o.invoiceHeader.invoiceNumber:"N/A")+"\n                ")]),t._v(" "),o.invoiceHeader&&o.invoiceHeader.customer?e("div",{staticClass:"customer-name"},[t._v("\n                  "+t._s(o.invoiceHeader.customer.name)+"\n                ")]):t._e()])]),t._v(" "),e("td",[e("div",{staticClass:"amount-details"},[e("div",{staticClass:"received-amount"},[t._v("\n                  "+t._s(t.formatCurrency(o.totalReceivedAmount))+"\n                ")]),t._v(" "),o.receiveLines&&o.receiveLines.length>0?e("div",{staticClass:"allocation-info"},[e("small",[t._v(t._s(o.receiveLines.length)+" ການແບ່ງປັນ")])]):t._e()])]),t._v(" "),e("td",[e("span",{class:["payment-method-badge",o.paymentMethod]},[t._v("\n                "+t._s(t.formatPaymentMethod(o.paymentMethod))+"\n              ")])]),t._v(" "),e("td",[e("span",{staticClass:"reference-number"},[t._v("\n                "+t._s(o.referenceNumber||"-")+"\n              ")])]),t._v(" "),e("td",[e("div",{staticClass:"inputter-info"},[t._v("\n                "+t._s(o.inputter?o.inputter.username:o.maker?o.maker.username:"N/A")+"\n                "),o.createdAt?e("small",[t._v(t._s(t.formatDate(o.createdAt)))]):t._e()])]),t._v(" "),e("td",{staticClass:"actions-cell"},[e("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{title:"ເບິ່ງລາຍລະອຽດ"},on:{click:function(e){return t.viewReceipt(o)}}},[e("i",{staticClass:"fas fa-eye"})]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-outline-info",attrs:{title:"ແກ້ໄຂ"},on:{click:function(e){return t.editReceipt(o)}}},[e("i",{staticClass:"fas fa-edit"})]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{title:"ພິມໃບຮັບ"},on:{click:function(e){return t.printReceipt(o)}}},[e("i",{staticClass:"fas fa-print"})])])])})),0)])]),t._v(" "),e("div",{staticClass:"pagination-container"},[e("div",{staticClass:"pagination-info"},[t._v("\n        Showing "+t._s(t.paginationInfo.start)+" to "+t._s(t.paginationInfo.end)+" of\n        "+t._s(t.paginationInfo.total)+" entries\n      ")]),t._v(" "),e("div",{staticClass:"pagination-controls"},[e("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{disabled:1===t.pagination.currentPage},on:{click:t.previousPage}},[t._v("\n          Previous\n        ")]),t._v(" "),t._l(t.visiblePages,(function(o){return e("span",{key:o},["..."!==o?e("button",{staticClass:"btn btn-sm",class:o===t.pagination.currentPage?"btn-primary":"btn-outline-secondary",on:{click:function(e){return t.goToPage(o)}}},[t._v("\n            "+t._s(o)+"\n          ")]):e("span",{staticClass:"pagination-ellipsis"},[t._v("...")])])})),t._v(" "),e("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{disabled:t.pagination.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v("\n          Next\n        ")])],2)])]),t._v(" "),e("client-only",[e("ReceiveHeaderMaintain",{attrs:{visible:t.showEditDialog,receipt:t.selectedReceipt,invoices:t.invoices,users:t.users},on:{close:t.closeEditDialog,save:t.onReceiptSave}})],1),t._v(" "),e("client-only",[e("ReceiveHeaderView",{attrs:{visible:t.showViewDialog,receipt:t.selectedReceipt},on:{close:t.closeViewDialog}})],1),t._v(" "),t.loading?e("div",{staticClass:"loading-overlay"},[t._m(5)]):t._e()],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"card-icon total"},[t("i",{staticClass:"fas fa-receipt"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon cash"},[t("i",{staticClass:"fas fa-money-bill-wave"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon transfer"},[t("i",{staticClass:"fas fa-university"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon check"},[t("i",{staticClass:"fas fa-money-check"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon amount"},[t("i",{staticClass:"fas fa-dollar-sign"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-spinner"},[e("i",{staticClass:"fas fa-spinner fa-spin"}),t._v(" "),e("p",[t._v("Loading...")])])}],!1,null,"461f6740",null);e.default=component.exports},942:function(t,e,o){var content=o(1010);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(15).default)("66df850a",content,!0,{sourceMap:!1})}}]);