(window.webpackJsonp=window.webpackJsonp||[]).push([[142,47],{1242:function(e,t,o){var content=o(1525);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(16).default)("3cbc3d4a",content,!0,{sourceMap:!1})},1296:function(e,t,o){"use strict";o.r(t);o(35),o(7),o(67),o(5);var n={name:"ReceiveHeaderView",props:{visible:{type:Boolean,default:!1},receipt:{type:Object,default:null}},methods:{closeDialog:function(){this.$emit("close")},editReceipt:function(){this.$emit("edit",this.receipt)},printReceipt:function(){window.print()},calculateTotalAllocations:function(){return this.receipt.receiveLines?this.receipt.receiveLines.reduce((function(e,line){return e+parseFloat(line.allocatedAmount||0)}),0):0},calculateTotalReceived:function(){return parseFloat(this.receipt.totalReceivedAmount||0)},getRemainingBalance:function(){var e;return parseFloat((null===(e=this.receipt.invoiceHeader)||void 0===e?void 0:e.totalAmount)||0)-this.calculateTotalReceived()},getAllocationStatusClass:function(line){var e=line.invoiceLine;if(!e)return"unknown";var t=parseFloat(e.lineTotal||0),o=parseFloat(line.allocatedAmount||0);return o>=t?"fully-allocated":o>0?"partially-allocated":"not-allocated"},getAllocationStatusText:function(line){var e=this.getAllocationStatusClass(line);return{"fully-allocated":"ແບ່ງປັນຄົບ","partially-allocated":"ແບ່ງປັນບາງສ່ວນ","not-allocated":"ຍັງບໍ່ແບ່ງປັນ",unknown:"ບໍ່ຮູ້ສະຖານະ"}[e]||e},formatDate:function(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"},formatDateTime:function(e){return e?new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},formatCurrency:function(e){return e?parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatNumber:function(e){return e?parseFloat(e).toLocaleString("en-US"):"0"},formatPaymentMethod:function(e){return{cash:"ເງິນສົດ",check:"ເຊັກ",bank_transfer:"ໂອນເງິນທະນາຄານ",credit_card:"ບັດເຄຣດິດ",other:"ອື່ນໆ"}[e]||e},formatInvoiceStatus:function(e){return{draft:"ແບບຮ່າງ",sent:"ສົ່ງແລ້ວ",paid:"ຈ່າຍແລ້ວ",overdue:"ເກີນກຳນົດ",cancelled:"ຍົກເລີກ"}[e]||e}}},r=(o(976),o(32)),component=Object(r.a)(n,(function(){var e,t=this,o=t._self._c;return t.visible?o("div",{staticClass:"modal-overlay",on:{click:t.closeDialog}},[o("div",{staticClass:"modal-container",on:{click:function(e){e.stopPropagation()}}},[o("div",{staticClass:"modal-header"},[o("h2",[t._v("ລາຍລະອຽດການຮັບຊຳລະ")]),t._v(" "),o("button",{staticClass:"close-btn",on:{click:t.closeDialog}},[o("i",{staticClass:"fas fa-times"})])]),t._v(" "),t.receipt?o("div",{staticClass:"modal-body"},[o("div",{staticClass:"info-section"},[o("div",{staticClass:"section-header"},[t._m(0),t._v(" "),o("span",{class:["payment-method-badge",t.receipt.paymentMethod]},[t._v("\n            "+t._s(t.formatPaymentMethod(t.receipt.paymentMethod))+"\n          ")])]),t._v(" "),o("div",{staticClass:"info-grid"},[o("div",{staticClass:"info-item"},[o("label",[t._v("ເລກທີໃບຮັບ:")]),t._v(" "),o("span",{staticClass:"receipt-number"},[t._v(t._s(t.receipt.receiptNumber))])]),t._v(" "),o("div",{staticClass:"info-item"},[o("label",[t._v("ວັນທີບັນທຶກ:")]),t._v(" "),o("span",[t._v(t._s(t.formatDate(t.receipt.bookingDate)))])]),t._v(" "),o("div",{staticClass:"info-item"},[o("label",[t._v("ວັນທີຮັບເງິນ:")]),t._v(" "),o("span",[t._v(t._s(t.formatDate(t.receipt.receivedDate)))])]),t._v(" "),o("div",{staticClass:"info-item"},[o("label",[t._v("ຍອດເງິນທີ່ຮັບ:")]),t._v(" "),o("span",{staticClass:"amount-received"},[t._v(t._s(t.formatCurrency(t.receipt.totalReceivedAmount)))])]),t._v(" "),t.receipt.referenceNumber?o("div",{staticClass:"info-item"},[o("label",[t._v("ເລກອ້າງອີງ:")]),t._v(" "),o("span",{staticClass:"reference-number"},[t._v(t._s(t.receipt.referenceNumber))])]):t._e()])]),t._v(" "),t.receipt.invoiceHeader?o("div",{staticClass:"info-section"},[t._m(1),t._v(" "),o("div",{staticClass:"info-grid"},[o("div",{staticClass:"info-item"},[o("label",[t._v("ເລກທີໃບແຈ້ງໜີ້:")]),t._v(" "),o("span",{staticClass:"invoice-number"},[t._v(t._s(t.receipt.invoiceHeader.invoiceNumber))])]),t._v(" "),o("div",{staticClass:"info-item"},[o("label",[t._v("ວັນທີໃບແຈ້ງໜີ້:")]),t._v(" "),o("span",[t._v(t._s(t.formatDate(t.receipt.invoiceHeader.invoiceDate)))])]),t._v(" "),t.receipt.invoiceHeader.dueDate?o("div",{staticClass:"info-item"},[o("label",[t._v("ວັນທີຄົບກຳນົດ:")]),t._v(" "),o("span",[t._v(t._s(t.formatDate(t.receipt.invoiceHeader.dueDate)))])]):t._e(),t._v(" "),o("div",{staticClass:"info-item"},[o("label",[t._v("ຍອດໃບແຈ້ງໜີ້:")]),t._v(" "),o("span",{staticClass:"invoice-amount"},[t._v(t._s(t.formatCurrency(t.receipt.invoiceHeader.totalAmount)))])]),t._v(" "),t.receipt.invoiceHeader.customer?o("div",{staticClass:"info-item"},[o("label",[t._v("ລູກຄ້າ:")]),t._v(" "),o("span",{staticClass:"customer-name"},[t._v(t._s(t.receipt.invoiceHeader.customer.name))])]):t._e(),t._v(" "),o("div",{staticClass:"info-item"},[o("label",[t._v("ສະຖານະໃບແຈ້ງໜີ້:")]),t._v(" "),o("span",{class:["status-badge",t.receipt.invoiceHeader.status]},[t._v("\n              "+t._s(t.formatInvoiceStatus(t.receipt.invoiceHeader.status))+"\n            ")])])])]):t._e(),t._v(" "),o("div",{staticClass:"info-section"},[t._m(2),t._v(" "),o("div",{staticClass:"payment-summary"},[o("div",{staticClass:"summary-row"},[o("label",[t._v("ຍອດໃບແຈ້ງໜີ້:")]),t._v(" "),o("span",{staticClass:"amount invoice-total"},[t._v(t._s(t.formatCurrency((null===(e=t.receipt.invoiceHeader)||void 0===e?void 0:e.totalAmount)||0)))])]),t._v(" "),o("div",{staticClass:"summary-row"},[o("label",[t._v("ຍອດທີ່ຮັບຄັ້ງນີ້:")]),t._v(" "),o("span",{staticClass:"amount current-payment"},[t._v(t._s(t.formatCurrency(t.receipt.totalReceivedAmount)))])]),t._v(" "),o("div",{staticClass:"summary-row"},[o("label",[t._v("ລວມທີ່ຮັບແລ້ວທັງໝົດ:")]),t._v(" "),o("span",{staticClass:"amount total-received"},[t._v(t._s(t.formatCurrency(t.calculateTotalReceived())))])]),t._v(" "),o("div",{staticClass:"summary-row subtotal"},[o("label",[t._v("ຍອດຄົງເຫຼືອ:")]),t._v(" "),o("span",{staticClass:"amount remaining",class:{"fully-paid":t.getRemainingBalance()<=0}},[t._v("\n              "+t._s(t.formatCurrency(t.getRemainingBalance()))+"\n            ")])]),t._v(" "),t.getRemainingBalance()<=0?o("div",{staticClass:"paid-status"},[o("i",{staticClass:"fas fa-check-circle"}),t._v(" "),o("span",[t._v("ຈ່າຍຄົບແລ້ວ")])]):t._e()])]),t._v(" "),t.receipt.receiveLines&&t.receipt.receiveLines.length>0?o("div",{staticClass:"info-section"},[o("div",{staticClass:"section-header"},[t._m(3),t._v(" "),o("span",{staticClass:"item-count"},[t._v(t._s(t.receipt.receiveLines.length)+" ລາຍການ")])]),t._v(" "),o("div",{staticClass:"table-container"},[o("table",{staticClass:"data-table"},[t._m(4),t._v(" "),o("tbody",t._l(t.receipt.receiveLines,(function(line){return o("tr",{key:line.id},[o("td",{staticClass:"line-number"},[t._v(t._s(line.lineNumber))]),t._v(" "),o("td",[o("div",{staticClass:"invoice-line-info"},[o("div",{staticClass:"line-description"},[o("strong",[t._v(t._s(line.invoiceLine?line.invoiceLine.description:"N/A"))])]),t._v(" "),line.invoiceLine?o("div",{staticClass:"line-details"},[t._v("\n                      ຈຳນວນ: "+t._s(t.formatNumber(line.invoiceLine.quantity))+" × \n                      "+t._s(t.formatCurrency(line.invoiceLine.unitPrice))+" = \n                      "+t._s(t.formatCurrency(line.invoiceLine.lineTotal))+"\n                    ")]):t._e()])]),t._v(" "),o("td",{staticClass:"allocated-amount"},[t._v("\n                  "+t._s(t.formatCurrency(line.allocatedAmount))+"\n                ")]),t._v(" "),o("td",[t._v(t._s(t.formatDate(line.allocationDate)))]),t._v(" "),o("td",[o("span",{staticClass:"line-notes"},[t._v(t._s(line.notes||"-"))])]),t._v(" "),o("td",[o("span",{staticClass:"allocation-status",class:t.getAllocationStatusClass(line)},[t._v("\n                    "+t._s(t.getAllocationStatusText(line))+"\n                  ")])])])})),0),t._v(" "),o("tfoot",[o("tr",{staticClass:"summary-row"},[t._m(5),t._v(" "),o("td",{staticClass:"allocated-total"},[o("strong",[t._v(t._s(t.formatCurrency(t.calculateTotalAllocations())))])]),t._v(" "),o("td",{attrs:{colspan:"3"}})])])])])]):t._e(),t._v(" "),t.receipt.notes?o("div",{staticClass:"info-section"},[t._m(6),t._v(" "),o("div",{staticClass:"notes-content"},[t._v("\n          "+t._s(t.receipt.notes)+"\n        ")])]):t._e(),t._v(" "),o("div",{staticClass:"info-section"},[t._m(7),t._v(" "),o("div",{staticClass:"info-grid"},[t.receipt.inputter?o("div",{staticClass:"info-item"},[o("label",[t._v("ຜູ້ບັນທຶກ:")]),t._v(" "),o("span",[t._v(t._s(t.receipt.inputter.username))])]):t._e(),t._v(" "),t.receipt.maker?o("div",{staticClass:"info-item"},[o("label",[t._v("ຜູ້ສ້າງ:")]),t._v(" "),o("span",[t._v(t._s(t.receipt.maker.username))])]):t._e(),t._v(" "),o("div",{staticClass:"info-item"},[o("label",[t._v("ວັນທີສ້າງ:")]),t._v(" "),o("span",[t._v(t._s(t.formatDateTime(t.receipt.createdAt)))])]),t._v(" "),t.receipt.updateUser?o("div",{staticClass:"info-item"},[o("label",[t._v("ຜູ້ແກ້ໄຂຫຼ້າສຸດ:")]),t._v(" "),o("span",[t._v(t._s(t.receipt.updateUser.username))])]):t._e(),t._v(" "),t.receipt.updateTimestamp?o("div",{staticClass:"info-item"},[o("label",[t._v("ວັນທີແກ້ໄຂຫຼ້າສຸດ:")]),t._v(" "),o("span",[t._v(t._s(t.formatDateTime(t.receipt.updateTimestamp)))])]):t._e()])])]):t._e(),t._v(" "),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.closeDialog}},[o("i",{staticClass:"fas fa-times"}),t._v("\n        ປິດ\n      ")]),t._v(" "),o("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.printReceipt}},[o("i",{staticClass:"fas fa-print"}),t._v("\n        ພິມໃບຮັບ\n      ")]),t._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.editReceipt}},[o("i",{staticClass:"fas fa-edit"}),t._v("\n        ແກ້ໄຂ\n      ")])])])]):t._e()}),[function(){var e=this._self._c;return e("h3",[e("i",{staticClass:"fas fa-receipt"}),this._v("\n            ຂໍ້ມູນການຮັບຊຳລະ\n          ")])},function(){var e=this._self._c;return e("div",{staticClass:"section-header"},[e("h3",[e("i",{staticClass:"fas fa-file-invoice"}),this._v("\n            ຂໍ້ມູນໃບແຈ້ງໜີ້\n          ")])])},function(){var e=this._self._c;return e("div",{staticClass:"section-header"},[e("h3",[e("i",{staticClass:"fas fa-calculator"}),this._v("\n            ສະຫຼຸບການຮັບຊຳລະ\n          ")])])},function(){var e=this._self._c;return e("h3",[e("i",{staticClass:"fas fa-list"}),this._v("\n            ລາຍລະອຽດການແບ່ງປັນ\n          ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("ລຳດັບ")]),e._v(" "),t("th",[e._v("ລາຍການໃບແຈ້ງໜີ້")]),e._v(" "),t("th",[e._v("ຍອດແບ່ງປັນ")]),e._v(" "),t("th",[e._v("ວັນທີແບ່ງປັນ")]),e._v(" "),t("th",[e._v("ໝາຍເຫດ")]),e._v(" "),t("th",[e._v("ສະຖານະ")])])])},function(){var e=this._self._c;return e("td",{attrs:{colspan:"2"}},[e("strong",[this._v("ລວມການແບ່ງປັນ:")])])},function(){var e=this._self._c;return e("div",{staticClass:"section-header"},[e("h3",[e("i",{staticClass:"fas fa-comment-alt"}),this._v("\n            ໝາຍເຫດ\n          ")])])},function(){var e=this._self._c;return e("div",{staticClass:"section-header"},[e("h3",[e("i",{staticClass:"fas fa-info-circle"}),this._v("\n            ຂໍ້ມູນລະບົບ\n          ")])])}],!1,null,"635eee10",null);t.default=component.exports},1524:function(e,t,o){"use strict";o(1242)},1525:function(e,t,o){var n=o(15)((function(i){return i[1]}));n.push([e.i,".receive-header-summary-container[data-v-62505c1b]{background-color:#f5f5f5;min-height:100vh;padding:20px}.page-header[data-v-62505c1b]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px;padding:20px}.header-content[data-v-62505c1b]{align-items:center;display:flex;justify-content:space-between}.page-title[data-v-62505c1b]{color:#333;font-size:28px;font-weight:600;margin:0}.header-actions[data-v-62505c1b]{display:flex;gap:12px}.filter-section[data-v-62505c1b]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px;padding:20px}.filter-row[data-v-62505c1b]{align-items:flex-end;display:flex;flex-wrap:wrap;gap:20px}.filter-group[data-v-62505c1b]{display:flex;flex-direction:column;gap:8px;min-width:150px}.filter-group label[data-v-62505c1b]{color:#555;font-size:14px;font-weight:500}.filter-actions[data-v-62505c1b]{align-self:flex-end;display:flex;gap:8px}.summary-cards[data-v-62505c1b]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));margin-bottom:20px}.summary-card[data-v-62505c1b]{align-items:flex-start;background:#fff;border:1px solid #e9ecef;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,.1);display:flex;padding:24px;transition:all .3s ease}.summary-card[data-v-62505c1b]:hover{box-shadow:0 8px 16px rgba(0,0,0,.15);transform:translateY(-4px)}.summary-card.total-receipts[data-v-62505c1b]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff}.summary-card.total-receipts .card-icon[data-v-62505c1b]{background:hsla(0,0%,100%,.2);color:#fff}.summary-card.payment-cash[data-v-62505c1b]{border-left:4px solid #28a745}.summary-card.payment-transfer[data-v-62505c1b]{border-left:4px solid #007bff}.summary-card.payment-check[data-v-62505c1b]{border-left:4px solid #ffc107}.summary-card.payment-card[data-v-62505c1b]{border-left:4px solid #dc3545}.summary-card.amount-stats[data-v-62505c1b]{border-left:4px solid #6f42c1}.card-icon[data-v-62505c1b]{align-items:center;border-radius:50%;display:flex;flex-shrink:0;font-size:24px;height:60px;justify-content:center;margin-right:20px;width:60px}.card-icon.total[data-v-62505c1b]{background:hsla(0,0%,100%,.2);color:#fff}.card-icon.cash[data-v-62505c1b]{background:#d4edda;color:#28a745}.card-icon.transfer[data-v-62505c1b]{background:#cce5ff;color:#007bff}.card-icon.check[data-v-62505c1b]{background:#fff3cd;color:#ffc107}.card-icon.card[data-v-62505c1b]{background:#f8d7da;color:#dc3545}.card-icon.amount[data-v-62505c1b]{background:#e2d9ff;color:#6f42c1}.card-content[data-v-62505c1b]{flex:1;min-width:0}.card-content h3[data-v-62505c1b]{font-size:24px;font-weight:700;margin:0 0 8px;word-break:break-word}.card-content p[data-v-62505c1b]{font-size:14px;margin:0}.amount-info[data-v-62505c1b]{display:block;font-size:12px;margin-top:4px;opacity:.8}.table-section[data-v-62505c1b]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);overflow:hidden}.table-header[data-v-62505c1b]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px}.table-title h3[data-v-62505c1b]{color:#333;margin:0}.record-count[data-v-62505c1b]{color:#666;font-size:14px;margin-left:8px}.per-page-selector[data-v-62505c1b]{align-items:center;display:flex;font-size:14px;gap:8px}.table-container[data-v-62505c1b]{overflow-x:auto}.data-table[data-v-62505c1b]{border-collapse:collapse;width:100%}.data-table td[data-v-62505c1b],.data-table th[data-v-62505c1b]{border-bottom:1px solid #e9ecef;padding:12px 16px;text-align:left}.data-table th[data-v-62505c1b]{background-color:#f8f9fa;color:#495057;font-weight:600}.data-table th.sortable[data-v-62505c1b]{cursor:pointer;transition:background-color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none}.data-table th.sortable[data-v-62505c1b]:hover{background-color:#e9ecef}.data-table th i[data-v-62505c1b]{margin-left:8px;opacity:.5}.receipt-number strong[data-v-62505c1b]{color:#333;display:block;font-size:14px;margin-bottom:4px}.receipt-notes[data-v-62505c1b]{color:#666;font-size:12px}.invoice-info .invoice-number[data-v-62505c1b]{align-items:center;color:#495057;display:flex;font-weight:600;gap:4px;margin-bottom:2px}.invoice-info .customer-name[data-v-62505c1b]{color:#666;font-size:12px;margin-left:16px}.amount-details .received-amount[data-v-62505c1b]{color:#495057;font-weight:600;margin-bottom:2px}.allocation-info[data-v-62505c1b]{color:#666;font-size:11px}.payment-method-badge[data-v-62505c1b]{border-radius:12px;font-size:12px;font-weight:600;padding:4px 12px;text-transform:uppercase}.payment-method-badge.cash[data-v-62505c1b]{background-color:#d4edda;color:#155724}.payment-method-badge.bank_transfer[data-v-62505c1b]{background-color:#cce5ff;color:#004085}.payment-method-badge.check[data-v-62505c1b]{background-color:#fff3cd;color:#856404}.payment-method-badge.credit_card[data-v-62505c1b]{background-color:#f8d7da;color:#721c24}.payment-method-badge.other[data-v-62505c1b]{background-color:#e2e3e5;color:#383d41}.reference-number[data-v-62505c1b]{color:#495057;font-family:monospace;font-size:13px}.inputter-info[data-v-62505c1b]{color:#495057;font-size:14px}.inputter-info small[data-v-62505c1b]{color:#666;display:block;font-size:12px;margin-top:2px}.actions-cell[data-v-62505c1b]{display:flex;flex-wrap:wrap;gap:4px}.btn[data-v-62505c1b]{align-items:center;border:1px solid transparent;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s}.btn[data-v-62505c1b]:disabled{cursor:not-allowed;opacity:.5}.btn-primary[data-v-62505c1b]{background-color:#007bff;border-color:#007bff;color:#fff}.btn-primary[data-v-62505c1b]:hover:not(:disabled){background-color:#0056b3;border-color:#0056b3}.btn-secondary[data-v-62505c1b]{background-color:#6c757d;border-color:#6c757d;color:#fff}.btn-secondary[data-v-62505c1b]:hover:not(:disabled){background-color:#5a6268;border-color:#5a6268}.btn-outline-primary[data-v-62505c1b]{background-color:transparent;border-color:#007bff;color:#007bff}.btn-outline-primary[data-v-62505c1b]:hover{background-color:#007bff;color:#fff}.btn-outline-secondary[data-v-62505c1b]{background-color:transparent;border-color:#6c757d;color:#6c757d}.btn-outline-secondary[data-v-62505c1b]:hover{background-color:#6c757d;color:#fff}.btn-outline-info[data-v-62505c1b]{background-color:transparent;border-color:#17a2b8;color:#17a2b8}.btn-outline-info[data-v-62505c1b]:hover{background-color:#17a2b8;color:#fff}.btn-outline-success[data-v-62505c1b]{background-color:transparent;border-color:#28a745;color:#28a745}.btn-outline-success[data-v-62505c1b]:hover{background-color:#28a745;color:#fff}.btn-outline-danger[data-v-62505c1b]{background-color:transparent;border-color:#dc3545;color:#dc3545}.btn-outline-danger[data-v-62505c1b]:hover{background-color:#dc3545;color:#fff}.btn-sm[data-v-62505c1b]{font-size:12px;padding:4px 8px}.form-control[data-v-62505c1b]{border:1px solid #ced4da;border-radius:4px;font-size:14px;padding:8px 12px;transition:border-color .2s}.form-control[data-v-62505c1b]:focus{border-color:#007bff;box-shadow:0 0 0 2px rgba(0,123,255,.25);outline:none}.pagination-container[data-v-62505c1b]{align-items:center;border-top:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px}.pagination-info[data-v-62505c1b]{color:#666;font-size:14px}.pagination-controls[data-v-62505c1b]{align-items:center;display:flex;gap:8px}.pagination-ellipsis[data-v-62505c1b]{color:#666;padding:6px 12px}.loading-overlay[data-v-62505c1b]{align-items:center;background-color:rgba(0,0,0,.5);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.loading-spinner[data-v-62505c1b]{background:#fff;border-radius:8px;padding:40px;text-align:center}.loading-spinner i[data-v-62505c1b]{color:#007bff;font-size:32px;margin-bottom:16px}@media (max-width:768px){.receive-header-summary-container[data-v-62505c1b]{padding:10px}.header-content[data-v-62505c1b]{align-items:flex-start}.filter-row[data-v-62505c1b],.header-content[data-v-62505c1b]{flex-direction:column;gap:16px}.filter-group[data-v-62505c1b]{min-width:auto;width:100%}.filter-actions[data-v-62505c1b]{flex-direction:row;width:100%}.summary-cards[data-v-62505c1b]{gap:16px;grid-template-columns:1fr}.summary-card[data-v-62505c1b]{padding:20px}.card-icon[data-v-62505c1b]{height:50px;margin-right:16px;width:50px}.card-content h3[data-v-62505c1b],.card-icon[data-v-62505c1b]{font-size:20px}.pagination-container[data-v-62505c1b],.table-header[data-v-62505c1b]{align-items:flex-start;flex-direction:column;gap:16px}.pagination-controls[data-v-62505c1b]{flex-wrap:wrap}.actions-cell[data-v-62505c1b]{flex-direction:column;gap:4px}}@media (max-width:576px){.summary-card[data-v-62505c1b]{flex-direction:column;text-align:center}.card-icon[data-v-62505c1b]{margin:0 auto 16px}}",""]),n.locals={},e.exports=n},1736:function(e,t,o){"use strict";o.r(t);o(34),o(131),o(44),o(9),o(5),o(35),o(10),o(7),o(11),o(8),o(12);var n=o(33),r=o(3),c=o(20),l=(o(92),o(62),o(39),o(51),o(250),o(102),o(30),o(85),o(54),o(53),o(818),o(446),o(1616)),view=o(1296);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"ReceiveHeaderSummary",components:{ReceiveHeaderMaintain:l.default,ReceiveHeaderView:view.default},data:function(){return{showEditDialog:!1,showViewDialog:!1,selectedReceipt:null,receipts:[],filteredReceipts:[],invoices:[],users:[],loading:!1,filters:{search:"",paymentMethod:"",invoiceHeaderId:"",bookingDateFrom:"",bookingDateTo:""},sort:{field:"bookingDate",direction:"desc"},pagination:{currentPage:1,perPage:25},summaryStats:{total:{count:0},cash:{count:0,percentage:0,amount:0},bankTransfer:{count:0,percentage:0,amount:0},check:{count:0,percentage:0,amount:0},creditCard:{count:0,percentage:0,amount:0},other:{count:0,percentage:0,amount:0},totalAmount:0,averageAmount:0}}},computed:{user:function(){return this.$auth.user||""},paginatedReceipts:function(){var e=(this.pagination.currentPage-1)*this.pagination.perPage,t=e+this.pagination.perPage;return this.filteredReceipts.slice(e,t)},totalPages:function(){return Math.ceil(this.filteredReceipts.length/this.pagination.perPage)},paginationInfo:function(){var e=(this.pagination.currentPage-1)*this.pagination.perPage+1;return{start:e,end:Math.min(e+this.pagination.perPage-1,this.filteredReceipts.length),total:this.filteredReceipts.length}},visiblePages:function(){var e=[],t=this.pagination.currentPage,o=this.totalPages;if(o<=7)for(var i=1;i<=o;i++)e.push(i);else if(t<=4){for(var n=1;n<=5;n++)e.push(n);e.push("..."),e.push(o)}else if(t>=o-3){e.push(1),e.push("...");for(var r=o-4;r<=o;r++)e.push(r)}else{e.push(1),e.push("...");for(var c=t-1;c<=t+1;c++)e.push(c);e.push("..."),e.push(o)}return e}},mounted:function(){this.fetchReceipts(),this.fetchInvoices(),this.fetchUsers()},methods:{fetchUsers:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/api/user/find");case 3:o=t.sent,(data=o.data)&&data.data?e.users=Array.isArray(data)?data:[]:Array.isArray(data)?e.users=data:e.users=[],console.log("Fetched users:",e.users.length),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Error fetching users:",t.t0),e.users=[],e.showToast("Failed to load users","error");case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))()},fetchReceipts:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var o,n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,o=v({page:1,limit:1e3},e.filters),t.next=5,e.$axios.get("/api/ar-receive-headers",{params:o});case 5:n=t.sent,(data=n.data)&&data.success?e.receipts=data.data.receiveHeaders||[]:e.receipts=[],e.applyFilters(),e.calculateSummaryStats(),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),console.error("Error fetching receipts:",t.t0),e.showToast("Error loading receipt data","error"),e.receipts=[];case 17:return t.prev=17,e.loading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,12,17,20]])})))()},fetchInvoices:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/api/ar-invoices");case 3:o=t.sent,(data=o.data)&&data.success&&(e.invoices=data.data.invoices||[]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error fetching invoices:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},openCreateDialog:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.selectedReceipt=null,e.showEditDialog=!0;case 2:case"end":return t.stop()}}),t)})))()},editReceipt:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t.selectedReceipt=e,t.showEditDialog=!0;case 2:case"end":return o.stop()}}),o)})))()},viewReceipt:function(e){this.selectedReceipt=e,this.showViewDialog=!0},printReceipt:function(e){this.showToast("ພິມໃບຮັບ: "+e.receiptNumber,"info")},deleteReceipt:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var n,data,r,c,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!confirm("ທ່ານຕ້ອງການລຶບໃບຮັບເງິນ ".concat(e.receiptNumber," ແມ່ນບໍ?"))){o.next=24;break}return o.prev=1,t.loading=!0,o.next=5,t.$axios.delete("/api/ar-receive-headers/".concat(e.id));case 5:if(n=o.sent,!(data=n.data)||!data.success){o.next=13;break}return t.showToast("ລຶບໃບຮັບເງິນສຳເລັດແລ້ວ","success"),o.next=11,t.fetchReceipts();case 11:o.next=14;break;case 13:throw new Error((null==data?void 0:data.message)||"Delete failed");case 14:o.next=21;break;case 16:o.prev=16,o.t0=o.catch(1),console.error("Error deleting receipt:",o.t0),l=(null===(r=o.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)||o.t0.message||"ລຶບບໍ່ສຳເລັດ",t.showToast(l,"error");case 21:return o.prev=21,t.loading=!1,o.finish(21);case 24:case"end":return o.stop()}}),o,null,[[1,16,21,24]])})))()},closeEditDialog:function(){this.showEditDialog=!1,this.selectedReceipt=null},closeViewDialog:function(){this.showViewDialog=!1,this.selectedReceipt=null},onReceiptSave:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var n,r,c,l,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.info("DATA  MAIN ".concat(JSON.stringify(e))),o.prev=1,t.loading=!0,!t.selectedReceipt||!t.selectedReceipt.id){o.next=9;break}return o.next=6,t.$axios.put("/api/ar-receive-headers/".concat(t.selectedReceipt.id),e);case 6:n=o.sent,o.next=12;break;case 9:return o.next=11,t.$axios.post("/api/ar-receive-headers",e);case 11:n=o.sent;case 12:if(!n.data||!n.data.success){o.next=19;break}return t.showToast("ການບັນທຶກສຳເລັດແລ້ວ","success"),t.closeEditDialog(),o.next=17,t.fetchReceipts();case 17:o.next=20;break;case 19:throw new Error((null===(r=n.data)||void 0===r?void 0:r.message)||"Save failed");case 20:o.next=27;break;case 22:o.prev=22,o.t0=o.catch(1),console.error("Error saving receipt:",o.t0),d=(null===(c=o.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)||o.t0.message||"ການບັນທຶກບໍ່ສຳເລັດ",t.showToast(d,"error");case 27:return o.prev=27,t.loading=!1,o.finish(27);case 30:case"end":return o.stop()}}),o,null,[[1,22,27,30]])})))()},applyFilters:function(){var e=this,t=Object(n.a)(this.receipts);if(this.filters.search){var o=this.filters.search.toLowerCase();t=t.filter((function(e){return e.receiptNumber.toLowerCase().includes(o)||e.referenceNumber&&e.referenceNumber.toLowerCase().includes(o)||e.notes&&e.notes.toLowerCase().includes(o)}))}this.filters.paymentMethod&&(t=t.filter((function(t){return t.paymentMethod===e.filters.paymentMethod}))),this.filters.invoiceHeaderId&&(t=t.filter((function(t){return t.invoiceHeaderId==e.filters.invoiceHeaderId}))),(this.filters.bookingDateFrom||this.filters.bookingDateTo)&&(t=t.filter((function(t){var o=new Date(t.bookingDate),n=e.filters.bookingDateFrom?new Date(e.filters.bookingDateFrom):null,r=e.filters.bookingDateTo?new Date(e.filters.bookingDateTo):null;return!(n&&o<n)&&!(r&&o>r)}))),this.filteredReceipts=t,this.sortData(),this.pagination.currentPage=1,this.calculateSummaryStats()},resetFilters:function(){this.filters={search:"",paymentMethod:"",invoiceHeaderId:"",bookingDateFrom:"",bookingDateTo:""},this.applyFilters()},sortBy:function(e){this.sort.field===e?this.sort.direction="asc"===this.sort.direction?"desc":"asc":(this.sort.field=e,this.sort.direction="asc"),this.sortData()},sortData:function(){var e=this;this.filteredReceipts.sort((function(a,b){var t=a[e.sort.field],o=b[e.sort.field];return"string"==typeof t&&(t=t.toLowerCase(),o=o.toLowerCase()),t<o?"asc"===e.sort.direction?-1:1:t>o?"asc"===e.sort.direction?1:-1:0}))},getSortIcon:function(e){return this.sort.field!==e?"fas fa-sort":"asc"===this.sort.direction?"fas fa-sort-up":"fas fa-sort-down"},calculateSummaryStats:function(){var e=this.filteredReceipts.length,t=this.filteredReceipts.filter((function(e){return"cash"===e.paymentMethod})).length,o=this.filteredReceipts.filter((function(e){return"bank_transfer"===e.paymentMethod})).length,n=this.filteredReceipts.filter((function(e){return"check"===e.paymentMethod})).length,r=this.filteredReceipts.filter((function(e){return"credit_card"===e.paymentMethod})).length,c=this.filteredReceipts.filter((function(e){return"other"===e.paymentMethod})).length,l=this.filteredReceipts.reduce((function(e,t){return e+parseFloat(t.totalReceivedAmount||0)}),0),d=this.filteredReceipts.filter((function(e){return"cash"===e.paymentMethod})).reduce((function(e,t){return e+parseFloat(t.totalReceivedAmount||0)}),0),v=this.filteredReceipts.filter((function(e){return"bank_transfer"===e.paymentMethod})).reduce((function(e,t){return e+parseFloat(t.totalReceivedAmount||0)}),0),f=this.filteredReceipts.filter((function(e){return"check"===e.paymentMethod})).reduce((function(e,t){return e+parseFloat(t.totalReceivedAmount||0)}),0),m=this.filteredReceipts.filter((function(e){return"credit_card"===e.paymentMethod})).reduce((function(e,t){return e+parseFloat(t.totalReceivedAmount||0)}),0);this.summaryStats={total:{count:e},cash:{count:t,percentage:e>0?Math.round(t/e*100):0,amount:d},bankTransfer:{count:o,percentage:e>0?Math.round(o/e*100):0,amount:v},check:{count:n,percentage:e>0?Math.round(n/e*100):0,amount:f},creditCard:{count:r,percentage:e>0?Math.round(r/e*100):0,amount:m},other:{count:c,percentage:e>0?Math.round(c/e*100):0,amount:0},totalAmount:l,averageAmount:e>0?l/e:0}},updatePagination:function(){this.pagination.currentPage=1},previousPage:function(){this.pagination.currentPage>1&&this.pagination.currentPage--},nextPage:function(){this.pagination.currentPage<this.totalPages&&this.pagination.currentPage++},goToPage:function(e){this.pagination.currentPage=e},exportData:function(){var e=this.convertToCSV(this.filteredReceipts);this.downloadCSV(e,"receipts-summary.csv")},convertToCSV:function(data){var e=this;return[["Receipt Number","Booking Date","Received Date","Invoice Number","Total Amount","Payment Method","Reference Number","Notes","Created Date"].join(",")].concat(Object(n.a)(data.map((function(t){return['"'.concat(t.receiptNumber,'"'),t.bookingDate,t.receivedDate,'"'.concat(t.invoiceHeader?t.invoiceHeader.invoiceNumber:"",'"'),t.totalReceivedAmount,t.paymentMethod,'"'.concat(t.referenceNumber||"",'"'),'"'.concat((t.notes||"").replace(/"/g,'""'),'"'),e.formatDate(t.createdAt)].join(",")})))).join("\n")},downloadCSV:function(e,t){var o=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download=t,a.click(),window.URL.revokeObjectURL(n)},formatDate:function(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"},formatCurrency:function(e){return e?parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatPaymentMethod:function(e){return{cash:"ເງິນສົດ",check:"ເຊັກ",bank_transfer:"ໂອນເງິນທະນາຄານ",credit_card:"ບັດເຄຣດິດ",other:"ອື່ນໆ"}[e]||e},truncateText:function(text,e){return text?text.length>e?text.substring(0,e)+"...":text:""},showToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("".concat(t,": ").concat(e)),this.$toast?this.$toast[t](e):"error"===t?alert("Error: ".concat(e)):"success"===t&&console.log("✅ ".concat(e))}}},m=f,h=(o(1524),o(32)),component=Object(h.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"receive-header-summary-container"},[t("div",{staticClass:"page-header"},[t("div",{staticClass:"header-content"},[t("h1",{staticClass:"page-title"},[e._v("ລະບົບຈັດການການຮັບຊຳລະ")]),e._v(" "),t("div",{staticClass:"header-actions"},[t("button",{staticClass:"btn btn-primary",on:{click:e.openCreateDialog}},[t("i",{staticClass:"fas fa-plus"}),e._v("\n          ເພີ່ມການຮັບຊຳລະໃໝ່\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-secondary",on:{click:e.exportData}},[t("i",{staticClass:"fas fa-download"}),e._v("\n          Export\n        ")])])])]),e._v(" "),t("div",{staticClass:"filter-section"},[t("div",{staticClass:"filter-row"},[t("div",{staticClass:"filter-group"},[t("label",[e._v("ຄົ້ນຫາ:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.search,expression:"filters.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເລກທີໃບຮັບ, ເລກອ້າງອີງ..."},domProps:{value:e.filters.search},on:{input:[function(t){t.target.composing||e.$set(e.filters,"search",t.target.value)},e.applyFilters]}})]),e._v(" "),t("div",{staticClass:"filter-group"},[t("label",[e._v("ວິທີຈ່າຍ:")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.paymentMethod,expression:"filters.paymentMethod"}],staticClass:"form-control",on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filters,"paymentMethod",t.target.multiple?o:o[0])},e.applyFilters]}},[t("option",{attrs:{value:""}},[e._v("ທັງໝົດ")]),e._v(" "),t("option",{attrs:{value:"cash"}},[e._v("ເງິນສົດ")]),e._v(" "),t("option",{attrs:{value:"check"}},[e._v("ເຊັກ")]),e._v(" "),t("option",{attrs:{value:"bank_transfer"}},[e._v("ໂອນເງິນທະນາຄານ")]),e._v(" "),t("option",{attrs:{value:"credit_card"}},[e._v("ບັດເຄຣດິດ")]),e._v(" "),t("option",{attrs:{value:"other"}},[e._v("ອື່ນໆ")])])]),e._v(" "),t("div",{staticClass:"filter-group"},[t("label",[e._v("ໃບແຈ້ງໜີ້:")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.invoiceHeaderId,expression:"filters.invoiceHeaderId"}],staticClass:"form-control",on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filters,"invoiceHeaderId",t.target.multiple?o:o[0])},e.applyFilters]}},[t("option",{attrs:{value:""}},[e._v("ທັງໝົດ")]),e._v(" "),e._l(e.invoices,(function(o){return t("option",{key:o.id,domProps:{value:o.id}},[e._v("\n            "+e._s(o.invoiceNumber)+"\n          ")])}))],2)]),e._v(" "),t("div",{staticClass:"filter-group"},[t("label",[e._v("ວັນທີບັນທຶກຈາກ:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.bookingDateFrom,expression:"filters.bookingDateFrom"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.filters.bookingDateFrom},on:{change:e.applyFilters,input:function(t){t.target.composing||e.$set(e.filters,"bookingDateFrom",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"filter-group"},[t("label",[e._v("ວັນທີບັນທຶກເຖິງ:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.bookingDateTo,expression:"filters.bookingDateTo"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.filters.bookingDateTo},on:{change:e.applyFilters,input:function(t){t.target.composing||e.$set(e.filters,"bookingDateTo",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"filter-actions"},[t("button",{staticClass:"btn btn-outline-primary",on:{click:e.applyFilters}},[t("i",{staticClass:"fas fa-search"}),e._v("\n          ຄົ້ນຫາ\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-outline-secondary",on:{click:e.resetFilters}},[t("i",{staticClass:"fas fa-undo"}),e._v("\n          Reset\n        ")])])])]),e._v(" "),t("div",{staticClass:"summary-cards"},[t("div",{staticClass:"summary-card total-receipts"},[e._m(0),e._v(" "),t("div",{staticClass:"card-content"},[t("h3",[e._v(e._s(e.summaryStats.total.count))]),e._v(" "),t("p",[e._v("ລວມການຮັບຊຳລະທັງໝົດ")])])]),e._v(" "),t("div",{staticClass:"summary-card payment-cash"},[e._m(1),e._v(" "),t("div",{staticClass:"card-content"},[t("h3",[e._v(e._s(e.summaryStats.cash.count))]),e._v(" "),t("p",[e._v("ເງິນສົດ ("+e._s(e.summaryStats.cash.percentage)+"%)")]),e._v(" "),t("small",{staticClass:"amount-info"},[e._v(e._s(e.formatCurrency(e.summaryStats.cash.amount)))])])]),e._v(" "),t("div",{staticClass:"summary-card payment-transfer"},[e._m(2),e._v(" "),t("div",{staticClass:"card-content"},[t("h3",[e._v(e._s(e.summaryStats.bankTransfer.count))]),e._v(" "),t("p",[e._v("ໂອນເງິນທະນາຄານ ("+e._s(e.summaryStats.bankTransfer.percentage)+"%)")]),e._v(" "),t("small",{staticClass:"amount-info"},[e._v(e._s(e.formatCurrency(e.summaryStats.bankTransfer.amount)))])])]),e._v(" "),t("div",{staticClass:"summary-card payment-check"},[e._m(3),e._v(" "),t("div",{staticClass:"card-content"},[t("h3",[e._v(e._s(e.summaryStats.check.count))]),e._v(" "),t("p",[e._v("ເຊັກ ("+e._s(e.summaryStats.check.percentage)+"%)")]),e._v(" "),t("small",{staticClass:"amount-info"},[e._v(e._s(e.formatCurrency(e.summaryStats.check.amount)))])])]),e._v(" "),t("div",{staticClass:"summary-card amount-stats"},[e._m(4),e._v(" "),t("div",{staticClass:"card-content"},[t("h3",[e._v(e._s(e.formatCurrency(e.summaryStats.totalAmount)))]),e._v(" "),t("p",[e._v("ຍອດຮັບຊຳລະລວມ")]),e._v(" "),t("small",{staticClass:"amount-info"},[e._v("ສະເລ່ຍ: "+e._s(e.formatCurrency(e.summaryStats.averageAmount)))])])])]),e._v(" "),t("div",{staticClass:"table-section"},[t("div",{staticClass:"table-header"},[t("div",{staticClass:"table-title"},[t("h3",[e._v("ລາຍການການຮັບຊຳລະ")]),e._v(" "),t("span",{staticClass:"record-count"},[e._v(e._s(e.filteredReceipts.length)+" ລາຍການ")])]),e._v(" "),t("div",{staticClass:"table-actions"},[t("div",{staticClass:"per-page-selector"},[t("label",[e._v("Show:")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pagination.perPage,expression:"pagination.perPage"}],on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.pagination,"perPage",t.target.multiple?o:o[0])},e.updatePagination]}},[t("option",{attrs:{value:"10"}},[e._v("10")]),e._v(" "),t("option",{attrs:{value:"25"}},[e._v("25")]),e._v(" "),t("option",{attrs:{value:"50"}},[e._v("50")]),e._v(" "),t("option",{attrs:{value:"100"}},[e._v("100")])]),e._v(" "),t("span",[e._v("per page")])])])]),e._v(" "),t("div",{staticClass:"table-container"},[t("table",{staticClass:"data-table"},[t("thead",[t("tr",[t("th",{staticClass:"sortable",on:{click:function(t){return e.sortBy("receiptNumber")}}},[e._v("\n              ເລກທີໃບຮັບ\n              "),t("i",{class:e.getSortIcon("receiptNumber")})]),e._v(" "),t("th",{staticClass:"sortable",on:{click:function(t){return e.sortBy("bookingDate")}}},[e._v("\n              ວັນທີບັນທຶກ\n              "),t("i",{class:e.getSortIcon("bookingDate")})]),e._v(" "),t("th",{staticClass:"sortable",on:{click:function(t){return e.sortBy("receivedDate")}}},[e._v("\n              ວັນທີຮັບເງິນ\n              "),t("i",{class:e.getSortIcon("receivedDate")})]),e._v(" "),t("th",[e._v("ໃບແຈ້ງໜີ້")]),e._v(" "),t("th",{staticClass:"sortable",on:{click:function(t){return e.sortBy("totalReceivedAmount")}}},[e._v("\n              ຍອດເງິນ\n              "),t("i",{class:e.getSortIcon("totalReceivedAmount")})]),e._v(" "),t("th",{staticClass:"sortable",on:{click:function(t){return e.sortBy("paymentMethod")}}},[e._v("\n              ວິທີຈ່າຍ\n              "),t("i",{class:e.getSortIcon("paymentMethod")})]),e._v(" "),t("th",[e._v("ເລກອ້າງອີງ")]),e._v(" "),t("th",[e._v("ຜູ້ບັນທຶກ")]),e._v(" "),t("th",[e._v("ຟັງຊັ່ນ")])])]),e._v(" "),t("tbody",e._l(e.paginatedReceipts,(function(o){return t("tr",{key:o.id},[t("td",[t("div",{staticClass:"receipt-number"},[t("strong",[e._v(e._s(o.receiptNumber))]),e._v(" "),o.notes?t("div",{staticClass:"receipt-notes"},[e._v("\n                  "+e._s(e.truncateText(o.notes,50))+"\n                ")]):e._e()])]),e._v(" "),t("td",[e._v(e._s(e.formatDate(o.bookingDate)))]),e._v(" "),t("td",[e._v(e._s(e.formatDate(o.receivedDate)))]),e._v(" "),t("td",[t("div",{staticClass:"invoice-info"},[t("div",{staticClass:"invoice-number"},[t("i",{staticClass:"fas fa-file-invoice"}),e._v("\n                  "+e._s(o.invoiceHeader?o.invoiceHeader.invoiceNumber:"N/A")+"\n                ")]),e._v(" "),o.invoiceHeader&&o.invoiceHeader.customer?t("div",{staticClass:"customer-name"},[e._v("\n                  "+e._s(o.invoiceHeader.customer.name)+"\n                ")]):e._e()])]),e._v(" "),t("td",[t("div",{staticClass:"amount-details"},[t("div",{staticClass:"received-amount"},[e._v("\n                  "+e._s(e.formatCurrency(o.totalReceivedAmount))+"\n                ")]),e._v(" "),o.receiveLines&&o.receiveLines.length>0?t("div",{staticClass:"allocation-info"},[t("small",[e._v(e._s(o.receiveLines.length)+" ການແບ່ງປັນ")])]):e._e()])]),e._v(" "),t("td",[t("span",{class:["payment-method-badge",o.paymentMethod]},[e._v("\n                "+e._s(e.formatPaymentMethod(o.paymentMethod))+"\n              ")])]),e._v(" "),t("td",[t("span",{staticClass:"reference-number"},[e._v("\n                "+e._s(o.referenceNumber||"-")+"\n              ")])]),e._v(" "),t("td",[t("div",{staticClass:"inputter-info"},[e._v("\n                "+e._s(o.inputter?o.inputter.username:o.maker?o.maker.username:"N/A")+"\n                "),o.createdAt?t("small",[e._v(e._s(e.formatDate(o.createdAt)))]):e._e()])]),e._v(" "),t("td",{staticClass:"actions-cell"},[t("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{title:"ເບິ່ງລາຍລະອຽດ"},on:{click:function(t){return e.viewReceipt(o)}}},[t("i",{staticClass:"fas fa-eye"})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-outline-info",attrs:{title:"ແກ້ໄຂ"},on:{click:function(t){return e.editReceipt(o)}}},[t("i",{staticClass:"fas fa-edit"})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{title:"ພິມໃບຮັບ"},on:{click:function(t){return e.printReceipt(o)}}},[t("i",{staticClass:"fas fa-print"})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{title:"ລຶບ"},on:{click:function(t){return e.deleteReceipt(o)}}},[t("i",{staticClass:"fas fa-trash"})])])])})),0)])]),e._v(" "),t("div",{staticClass:"pagination-container"},[t("div",{staticClass:"pagination-info"},[e._v("\n        Showing "+e._s(e.paginationInfo.start)+" to "+e._s(e.paginationInfo.end)+" of\n        "+e._s(e.paginationInfo.total)+" entries\n      ")]),e._v(" "),t("div",{staticClass:"pagination-controls"},[t("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{disabled:1===e.pagination.currentPage},on:{click:e.previousPage}},[e._v("\n          Previous\n        ")]),e._v(" "),e._l(e.visiblePages,(function(o){return t("span",{key:o},["..."!==o?t("button",{staticClass:"btn btn-sm",class:o===e.pagination.currentPage?"btn-primary":"btn-outline-secondary",on:{click:function(t){return e.goToPage(o)}}},[e._v("\n            "+e._s(o)+"\n          ")]):t("span",{staticClass:"pagination-ellipsis"},[e._v("...")])])})),e._v(" "),t("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{disabled:e.pagination.currentPage===e.totalPages},on:{click:e.nextPage}},[e._v("\n          Next\n        ")])],2)])]),e._v(" "),t("client-only",[t("ReceiveHeaderMaintain",{attrs:{visible:e.showEditDialog,receipt:e.selectedReceipt,invoices:e.invoices,users:e.users},on:{close:e.closeEditDialog,save:e.onReceiptSave}})],1),e._v(" "),t("client-only",[t("ReceiveHeaderView",{attrs:{visible:e.showViewDialog,receipt:e.selectedReceipt},on:{close:e.closeViewDialog}})],1),e._v(" "),e.loading?t("div",{staticClass:"loading-overlay"},[e._m(5)]):e._e()],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"card-icon total"},[e("i",{staticClass:"fas fa-receipt"})])},function(){var e=this._self._c;return e("div",{staticClass:"card-icon cash"},[e("i",{staticClass:"fas fa-money-bill-wave"})])},function(){var e=this._self._c;return e("div",{staticClass:"card-icon transfer"},[e("i",{staticClass:"fas fa-university"})])},function(){var e=this._self._c;return e("div",{staticClass:"card-icon check"},[e("i",{staticClass:"fas fa-money-check"})])},function(){var e=this._self._c;return e("div",{staticClass:"card-icon amount"},[e("i",{staticClass:"fas fa-dollar-sign"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"loading-spinner"},[t("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" "),t("p",[e._v("Loading...")])])}],!1,null,"62505c1b",null);t.default=component.exports},921:function(e,t,o){var content=o(977);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(16).default)("28eba64e",content,!0,{sourceMap:!1})},976:function(e,t,o){"use strict";o(921)},977:function(e,t,o){var n=o(15)((function(i){return i[1]}));n.push([e.i,".modal-overlay[data-v-635eee10]{align-items:center;background-color:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;padding:20px;position:fixed;right:0;top:0;z-index:1000}.modal-container[data-v-635eee10]{background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.3);display:flex;flex-direction:column;max-height:90vh;max-width:1000px;overflow:hidden;width:100%}.modal-header[data-v-635eee10]{align-items:center;background:linear-gradient(135deg,#28a745,#20c997);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-header h2[data-v-635eee10]{color:#fff;font-size:24px;font-weight:600;margin:0}.close-btn[data-v-635eee10]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:24px;padding:4px;transition:all .2s}.close-btn[data-v-635eee10]:hover{background-color:hsla(0,0%,100%,.2)}.modal-body[data-v-635eee10]{flex:1;overflow-y:auto;padding:24px}.modal-footer[data-v-635eee10]{background-color:#f8f9fa;border-top:1px solid #e9ecef;display:flex;gap:12px;justify-content:flex-end;padding:20px 24px}.info-section[data-v-635eee10]{border:1px solid #e9ecef;border-radius:8px;margin-bottom:32px;overflow:hidden}.info-section[data-v-635eee10]:last-child{margin-bottom:0}.section-header[data-v-635eee10]{align-items:center;background-color:#f8f9fa;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:16px 20px}.section-header h3[data-v-635eee10]{align-items:center;color:#333;display:flex;font-size:16px;font-weight:600;gap:8px;margin:0}.section-header h3 i[data-v-635eee10]{color:#28a745}.item-count[data-v-635eee10]{background-color:#e9ecef;border-radius:12px;color:#666;font-size:12px;padding:4px 8px}.info-grid[data-v-635eee10]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));padding:20px}.info-item[data-v-635eee10]{display:flex;flex-direction:column;gap:4px}.info-item label[data-v-635eee10]{color:#666;font-size:12px;font-weight:500;letter-spacing:.5px;text-transform:uppercase}.info-item span[data-v-635eee10]{color:#333;font-size:14px;font-weight:500}.receipt-number[data-v-635eee10]{color:#28a745!important;font-family:monospace;font-size:16px!important;font-weight:600!important}.invoice-number[data-v-635eee10]{color:#007bff!important;font-family:monospace;font-size:15px!important;font-weight:600!important}.customer-name[data-v-635eee10]{color:#495057!important;font-weight:600!important}.amount-received[data-v-635eee10]{color:#28a745!important;font-size:18px!important;font-weight:700!important}.invoice-amount[data-v-635eee10]{color:#495057!important;font-size:16px!important;font-weight:600!important}.reference-number[data-v-635eee10]{color:#495057!important;font-family:monospace;font-size:14px!important}.payment-method-badge[data-v-635eee10]{border-radius:12px;font-size:12px;font-weight:600;padding:6px 12px;text-transform:uppercase}.payment-method-badge.cash[data-v-635eee10]{background-color:#d4edda;color:#155724}.payment-method-badge.bank_transfer[data-v-635eee10]{background-color:#cce5ff;color:#004085}.payment-method-badge.check[data-v-635eee10]{background-color:#fff3cd;color:#856404}.payment-method-badge.credit_card[data-v-635eee10]{background-color:#f8d7da;color:#721c24}.payment-method-badge.other[data-v-635eee10]{background-color:#e2e3e5;color:#383d41}.status-badge[data-v-635eee10]{border-radius:12px;font-size:12px;font-weight:600;padding:4px 12px;text-transform:uppercase}.status-badge.draft[data-v-635eee10]{background-color:#f8f9fa;color:#6c757d}.status-badge.sent[data-v-635eee10]{background-color:#d1ecf1;color:#0c5460}.status-badge.paid[data-v-635eee10]{background-color:#d4edda;color:#155724}.status-badge.overdue[data-v-635eee10]{background-color:#f8d7da;color:#721c24}.status-badge.cancelled[data-v-635eee10]{background-color:#e2e3e5;color:#383d41}.payment-summary[data-v-635eee10]{padding:20px}.summary-row[data-v-635eee10]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:12px 0}.summary-row[data-v-635eee10]:last-child{border-bottom:none}.summary-row.subtotal[data-v-635eee10]{border-top:2px solid #28a745;font-weight:600;margin-top:8px;padding-top:16px}.summary-row label[data-v-635eee10]{color:#495057;font-size:14px;font-weight:500}.summary-row .amount[data-v-635eee10]{font-family:monospace;font-size:16px;font-weight:600}.amount.invoice-total[data-v-635eee10]{color:#495057}.amount.current-payment[data-v-635eee10]{color:#28a745}.amount.total-received[data-v-635eee10]{color:#007bff}.amount.remaining[data-v-635eee10]{color:#dc3545;font-size:18px}.amount.remaining.fully-paid[data-v-635eee10]{color:#28a745}.paid-status[data-v-635eee10]{align-items:center;background:#d4edda;border-radius:6px;color:#155724;display:flex;font-weight:600;gap:8px;margin-top:16px;padding:12px 16px}.paid-status i[data-v-635eee10]{font-size:18px}.notes-content[data-v-635eee10]{background-color:#f8f9fa;border-radius:4px;color:#495057;font-size:14px;line-height:1.6;margin:20px;padding:20px}.table-container[data-v-635eee10]{overflow-x:auto}.data-table[data-v-635eee10]{border-collapse:collapse;width:100%}.data-table td[data-v-635eee10],.data-table th[data-v-635eee10]{border-bottom:1px solid #e9ecef;padding:12px;text-align:left}.data-table th[data-v-635eee10]{background-color:#f8f9fa;color:#495057;font-size:12px;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.data-table td[data-v-635eee10]{color:#333;font-size:14px}.data-table tbody tr[data-v-635eee10]:hover{background-color:#f8f9fa}.line-number[data-v-635eee10]{color:#666;font-weight:600;text-align:center}.invoice-line-info .line-description[data-v-635eee10]{color:#333;font-weight:600;margin-bottom:4px}.invoice-line-info .line-details[data-v-635eee10]{color:#666;font-size:12px}.allocated-amount[data-v-635eee10]{color:#28a745;font-weight:600;text-align:right}.line-notes[data-v-635eee10]{color:#666;font-style:italic}.allocation-status[data-v-635eee10]{border-radius:8px;font-size:11px;font-weight:600;padding:3px 8px;text-transform:uppercase}.allocation-status.fully-allocated[data-v-635eee10]{background-color:#d4edda;color:#155724}.allocation-status.partially-allocated[data-v-635eee10]{background-color:#fff3cd;color:#856404}.allocation-status.not-allocated[data-v-635eee10]{background-color:#f8d7da;color:#721c24}.allocation-status.unknown[data-v-635eee10]{background-color:#e2e3e5;color:#383d41}.data-table tfoot td[data-v-635eee10]{background-color:#f8f9fa;border-bottom:none;border-top:2px solid #dee2e6;font-weight:600}.allocated-total[data-v-635eee10]{color:#28a745;text-align:right}.btn[data-v-635eee10]{align-items:center;border:1px solid transparent;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;justify-content:center;min-width:120px;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s}.btn-primary[data-v-635eee10]{background-color:#007bff;border-color:#007bff;color:#fff}.btn-primary[data-v-635eee10]:hover{background-color:#0056b3;border-color:#0056b3}.btn-secondary[data-v-635eee10]{background-color:#6c757d;border-color:#6c757d;color:#fff}.btn-secondary[data-v-635eee10]:hover{background-color:#5a6268;border-color:#5a6268}.btn-success[data-v-635eee10]{background-color:#28a745;border-color:#28a745;color:#fff}.btn-success[data-v-635eee10]:hover{background-color:#218838;border-color:#218838}@media (max-width:768px){.modal-overlay[data-v-635eee10]{padding:10px}.modal-container[data-v-635eee10]{max-height:95vh;max-width:100%}.modal-header[data-v-635eee10]{padding:20px}.modal-header h2[data-v-635eee10]{font-size:20px}.modal-body[data-v-635eee10]{padding:20px}.modal-footer[data-v-635eee10]{flex-direction:column;padding:16px 20px}.info-grid[data-v-635eee10]{gap:12px;grid-template-columns:1fr;padding:16px}.section-header[data-v-635eee10]{align-items:flex-start;flex-direction:column;gap:8px;padding:12px 16px}.payment-summary[data-v-635eee10]{padding:16px}.notes-content[data-v-635eee10]{margin:16px;padding:16px}.data-table[data-v-635eee10]{font-size:12px}.data-table td[data-v-635eee10],.data-table th[data-v-635eee10]{padding:8px}.btn[data-v-635eee10]{width:100%}}@media (max-width:576px){.modal-header[data-v-635eee10]{align-items:flex-start;flex-direction:column;gap:12px}.close-btn[data-v-635eee10]{position:absolute;right:16px;top:16px}.data-table td[data-v-635eee10],.data-table th[data-v-635eee10]{font-size:11px;padding:6px}.invoice-line-info .line-description[data-v-635eee10]{font-size:12px}.invoice-line-info .line-details[data-v-635eee10]{font-size:10px}}",""]),n.locals={},e.exports=n}}]);