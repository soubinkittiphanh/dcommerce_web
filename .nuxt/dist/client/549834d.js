(window.webpackJsonp=window.webpackJsonp||[]).push([[202,85,86],{1012:function(t,e,n){"use strict";n(946)},1013:function(t,e,n){var r=n(14)((function(i){return i[1]}));r.push([t.i,".v-row.dense[data-v-d6315b58]{margin-bottom:8px}.v-card-title.primary[data-v-d6315b58]{background:linear-gradient(45deg,#1976d2,#1565c0)}",""]),r.locals={},t.exports=r},1014:function(t,e,n){"use strict";n(947)},1015:function(t,e,n){var r=n(14)((function(i){return i[1]}));r.push([t.i,".section-header[data-v-0e5f56fb]{align-items:center;display:flex;margin-bottom:8px}.section-header .text-h6[data-v-0e5f56fb]{color:#1976d2;font-weight:600}.v-card-title.primary[data-v-0e5f56fb]{background:linear-gradient(45deg,#1976d2,#1565c0)}.info-item[data-v-0e5f56fb]{margin-bottom:16px}.info-label[data-v-0e5f56fb]{align-items:center;color:rgba(0,0,0,.6);display:flex;font-size:14px;font-weight:500;margin-bottom:4px}.info-value[data-v-0e5f56fb]{color:rgba(0,0,0,.87);font-size:16px;line-height:1.4}.info-value.caption[data-v-0e5f56fb]{color:rgba(0,0,0,.6);font-size:12px}.info-value a[data-v-0e5f56fb]{color:#1976d2}.info-value a[data-v-0e5f56fb]:hover{-webkit-text-decoration:underline!important;text-decoration:underline!important}.text--disabled[data-v-0e5f56fb]{color:rgba(0,0,0,.38)!important}.grey--text[data-v-0e5f56fb]{color:rgba(0,0,0,.6)!important}.v-chip[data-v-0e5f56fb]{margin:2px}.v-card.grey.lighten-5[data-v-0e5f56fb]{border-left:4px solid #1976d2}",""]),r.locals={},t.exports=r},1285:function(t,e,n){var content=n(1590);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("e01967fe",content,!0,{sourceMap:!1})},1360:function(t,e,n){"use strict";n.r(e);var r=n(321),o=n(318),c=n(19),l=n(797),d=n(792),v=n(1748),f=n(771),m=n(798),h=n(168),_=n(323),y=n(796),x=n(794),C=n(112),D=n(32),w=n(17),k=(n(85),n(34),n(5),n(8),n(10),n(460),n(9),n(347),{name:"AgencyDialog",props:{visible:{type:Boolean,default:!1},agency:{type:Object,default:null}},data:function(){return{valid:!1,loading:!1,registrationDateMenu:!1,licenseExpiryMenu:!1,formData:{agencyName:"",agencyCode:"",phone:"",email:"",village:"",city:"",district:"",address:"",registrationNumber:"",registrationDate:"",licenseNumber:"",licenseExpiryDate:"",contactPersonName:"",contactPersonPosition:"",contactPersonPhone:"",status:"active",notes:""},statusOptions:[{text:"ດຳເນີນງານ",value:"active"},{text:"ບໍ່ດຳເນີນງານ",value:"inactive"},{text:"ຖືກຢຸດ",value:"suspended"}],nameRules:[function(t){return!!t||"ຈຳເປັນ"},function(t){return(null==t?void 0:t.length)>=2||"ສັ້ນເກີນໄປ"}],phoneRules:[function(t){return!!t||"ຈຳເປັນ"},function(t){return(null==t?void 0:t.length)>=8||"ບໍ່ຖືກຕ້ອງ"}],emailRules:[function(t){return!t||/.+@.+\..+/.test(t)||"ບໍ່ຖືກຕ້ອງ"}],statusRules:[function(t){return!!t||"ຈຳເປັນ"}]}},computed:{isEditMode:function(){var t;return null===(t=this.agency)||void 0===t?void 0:t.id},isLicenseExpired:function(){return this.formData.licenseExpiryDate&&new Date(this.formData.licenseExpiryDate)<=new Date},isContractExpired:function(){return this.formData.contractEndDate&&new Date(this.formData.contractEndDate)<=new Date}},watch:{visible:function(t){t?this.initializeForm():this.resetForm()},agency:{handler:function(){var t=this;this.visible&&this.$nextTick((function(){return t.initializeForm()}))},deep:!0}},methods:{initializeForm:function(){var t,e=this;if(null!==(t=this.agency)&&void 0!==t&&t.id){Object.keys(this.formData).forEach((function(t){e.formData[t]=e.agency[t]||""}));["registrationDate","licenseExpiryDate"].forEach((function(t){e.agency[t]&&(e.formData[t]=e.agency[t].split("T")[0])}))}else this.resetFormData();this.$nextTick((function(){var t;return null===(t=e.$refs.form)||void 0===t?void 0:t.resetValidation()}))},resetFormData:function(){var t=this;Object.keys(this.formData).forEach((function(e){t.formData[e]="status"===e?"active":""}))},resetForm:function(){this.resetFormData(),this.valid=!1,this.loading=!1,this.registrationDateMenu=!1,this.licenseExpiryMenu=!1},saveAgency:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.form.validate()){t.loading=!0;try{n=Object.fromEntries(Object.entries(t.formData).filter((function(t){var e=Object(D.a)(t,2),n=(e[0],e[1]);return""!==n&&null!==n}))),t.$emit("save",n)}catch(t){console.error("Form submission error:",t)}finally{t.loading=!1}}case 1:case"end":return e.stop()}}),e)})))()},closeDialog:function(){this.$emit("close")}}}),S=(n(1012),n(31)),component=Object(S.a)(k,(function(){var t=this,e=t._self._c;return e(f.a,{attrs:{persistent:"",transition:"dialog-bottom-transition"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e(o.a,[e(c.d,{staticClass:"primary white--text py-3"},[e(h.a,{staticClass:"mr-2",attrs:{color:"white"}},[t._v("mdi-office-building")]),t._v("\n      "+t._s(t.isEditMode?"ແກ້ໄຂບໍລິສັດ":"ເພີ່ມບໍລິສັດ")+"\n      "),e(x.a),t._v(" "),e(r.a,{attrs:{icon:"",dark:""},on:{click:t.closeDialog}},[e(h.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(m.a,{ref:"form",on:{submit:function(e){return e.preventDefault(),t.saveAgency.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(c.c,{staticClass:"py-4"},[e(d.a,{staticClass:"py-0"},[e(y.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"12",md:"8"}},[e(C.a,{attrs:{label:"ຊື່ບໍລິສັດ *",rules:t.nameRules,outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.agencyName,callback:function(e){t.$set(t.formData,"agencyName",e)},expression:"formData.agencyName"}})],1),t._v(" "),e(l.a,{attrs:{cols:"12",md:"4"}},[e(C.a,{attrs:{label:"ລະຫັດ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.agencyCode,callback:function(e){t.$set(t.formData,"agencyCode",e)},expression:"formData.agencyCode"}})],1)],1),t._v(" "),e(y.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"12",md:"6"}},[e(C.a,{attrs:{label:"ເບີໂທ *",rules:t.phoneRules,outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1),t._v(" "),t._e()],1),t._v(" "),e(y.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"12",md:"4"}},[e(C.a,{attrs:{label:"ບ້ານ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.village,callback:function(e){t.$set(t.formData,"village",e)},expression:"formData.village"}})],1),t._v(" "),e(l.a,{attrs:{cols:"12",md:"4"}},[e(C.a,{attrs:{label:"ເມືອງ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.city,callback:function(e){t.$set(t.formData,"city",e)},expression:"formData.city"}})],1),t._v(" "),e(l.a,{attrs:{cols:"12",md:"4"}},[e(C.a,{attrs:{label:"ແຂວງ",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.district,callback:function(e){t.$set(t.formData,"district",e)},expression:"formData.district"}})],1)],1),t._v(" "),e(y.a,{attrs:{dense:""}},[e(l.a,{attrs:{cols:"12"}},[e(C.a,{attrs:{label:"ທີ່ຢູ່",outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.address,callback:function(e){t.$set(t.formData,"address",e)},expression:"formData.address"}})],1)],1),t._v(" "),e(y.a,{attrs:{dense:""}},[t._e(),t._v(" "),e(l.a,{attrs:{cols:"12",md:"6"}},[e(_.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(C.a,t._g(t._b({attrs:{label:"ວັນທີເລີ່ມຕົ້ນສັນຍາ",readonly:"",outlined:"",dense:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar"},model:{value:t.formData.registrationDate,callback:function(e){t.$set(t.formData,"registrationDate",e)},expression:"formData.registrationDate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.registrationDateMenu,callback:function(e){t.registrationDateMenu=e},expression:"registrationDateMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.registrationDateMenu=!1}},model:{value:t.formData.registrationDate,callback:function(e){t.$set(t.formData,"registrationDate",e)},expression:"formData.registrationDate"}})],1)],1),t._v(" "),e(l.a,{attrs:{cols:"12",md:"6"}},[e(_.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(C.a,t._g(t._b({attrs:{label:"ວັນທີສິ້ນສຸດສັນຍາ",readonly:"",outlined:"",dense:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar",color:t.isLicenseExpired?"error":"primary"},scopedSlots:t._u([t.formData.licenseExpiryDate?{key:"append",fn:function(){return[e(h.a,{attrs:{small:"",color:t.isLicenseExpired?"error":"success"}},[t._v("\n                        "+t._s(t.isLicenseExpired?"mdi-alert-circle":"mdi-check-circle")+"\n                      ")])]},proxy:!0}:null],null,!0),model:{value:t.formData.licenseExpiryDate,callback:function(e){t.$set(t.formData,"licenseExpiryDate",e)},expression:"formData.licenseExpiryDate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.licenseExpiryMenu,callback:function(e){t.licenseExpiryMenu=e},expression:"licenseExpiryMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.licenseExpiryMenu=!1}},model:{value:t.formData.licenseExpiryDate,callback:function(e){t.$set(t.formData,"licenseExpiryDate",e)},expression:"formData.licenseExpiryDate"}})],1)],1)],1),t._v(" "),t._e(),t._v(" "),e(y.a,{attrs:{dense:""}},[t._e(),t._v(" "),t._e()],1),t._v(" "),e(y.a,{attrs:{dense:""}},[t._e(),t._v(" "),t._e()],1),t._v(" "),e(y.a,{attrs:{dense:""}},[t._e()],1)],1)],1),t._v(" "),e(c.a,{staticClass:"px-6 py-3"},[e(x.a),t._v(" "),e(r.a,{attrs:{text:"",disabled:t.loading},on:{click:t.closeDialog}},[t._v("\n          ຍົກເລີກ\n        ")]),t._v(" "),e(r.a,{attrs:{color:"primary",type:"submit",loading:t.loading,disabled:!t.valid||t.loading}},[t._v("\n          "+t._s(t.isEditMode?"ອັບເດດ":"ບັນທຶກ")+"\n        ")])],1)],1)],1)],1)}),[],!1,null,"d6315b58",null);e.default=component.exports},1361:function(t,e,n){"use strict";n.r(e);var r=n(321),o=n(318),c=n(19),l=n(322),d=n(797),v=n(792),f=n(771),m=n(317),h=n(168),_=n(796),y=n(794),x=(n(35),{name:"AgencyViewDialog",props:{visible:{type:Boolean,default:!1},agency:{type:Object,default:null}},computed:{isLicenseExpired:function(){return!(!this.agency||!this.agency.licenseExpiryDate)&&new Date(this.agency.licenseExpiryDate)<=new Date}},methods:{closeDialog:function(){this.$emit("close")},editAgency:function(){this.$emit("edit",this.agency),this.closeDialog()},formatDate:function(t){return t?new Date(t).toLocaleDateString("lo-LA",{year:"numeric",month:"long",day:"numeric"}):"-"},formatDateTime:function(t){return t?new Date(t).toLocaleString("lo-LA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},formatStatus:function(t){return{active:"ກຳລັງດຳເນີນງານ",inactive:"ບໍ່ດຳເນີນງານ",suspended:"ຖືກຢຸດ"}[t]||t},getStatusColor:function(t){return{active:"success",inactive:"grey",suspended:"error"}[t]||"grey"},getStatusIcon:function(t){return{active:"mdi-check-circle",inactive:"mdi-pause-circle",suspended:"mdi-alert-circle"}[t]||"mdi-help-circle"}}}),C=(n(1014),n(31)),component=Object(C.a)(x,(function(){var t,e,n=this,x=n._self._c;return x(f.a,{attrs:{"max-width":"700px"},model:{value:n.visible,callback:function(t){n.visible=t},expression:"visible"}},[x(o.a,[x(c.d,{staticClass:"primary white--text"},[x(h.a,{staticClass:"mr-2",attrs:{color:"white"}},[n._v("mdi-eye")]),n._v(" "),x("span",[n._v("ລາຍລະອຽດບໍລິສັດ")]),n._v(" "),x(y.a),n._v(" "),x(r.a,{attrs:{icon:"",dark:""},on:{click:n.closeDialog}},[x(h.a,[n._v("mdi-close")])],1)],1),n._v(" "),n.agency?x(c.c,{staticClass:"pt-6"},[x(v.a,[x(_.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header"},[x(h.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-information")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ຂໍ້ມູນພື້ນຖານ")])],1),n._v(" "),x(m.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"8"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-office-building")]),n._v("\n                ຊື່ບໍລິສັດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value primary--text font-weight-bold"},[n._v("\n                "+n._s(n.agency.agencyName)+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"4"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-identifier")]),n._v("\n                ລະຫັດບໍລິສັດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.agencyCode?x(l.a,{attrs:{small:"",color:"primary",outlined:""}},[n._v("\n                  "+n._s(n.agency.agencyCode)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])],1)])])],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-file-document")]),n._v("\n                ເລກທະບຽນບໍລິສັດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n._v("\n                "+n._s(n.agency.registrationNumber||"-")+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-calendar")]),n._v("\n                ວັນທີລົງທະບຽນ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n._v("\n                "+n._s(n.agency.registrationDate?n.formatDate(n.agency.registrationDate):"-")+"\n              ")])])])],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(h.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-phone")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ຂໍ້ມູນຕິດຕໍ່")])],1),n._v(" "),x(m.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-phone")]),n._v("\n                ເບີໂທລະສັບ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[x("a",{staticClass:"text-decoration-none",attrs:{href:"tel:".concat(n.agency.phone)}},[n._v("\n                  "+n._s(n.agency.phone)+"\n                ")])])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-email")]),n._v("\n                ອີເມວ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.email?x("a",{staticClass:"text-decoration-none",attrs:{href:"mailto:".concat(n.agency.email)}},[n._v("\n                  "+n._s(n.agency.email)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])])])])],1),n._v(" "),n.agency.address?x(_.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-map-marker")]),n._v("\n                ທີ່ຢູ່\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n._v("\n                "+n._s(n.agency.address)+"\n              ")])])])],1):n._e(),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-city")]),n._v("\n                ເມືອງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.city?x(l.a,{attrs:{small:"",color:"info",outlined:""}},[n._v("\n                  "+n._s(n.agency.city)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])],1)])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-map")]),n._v("\n                ແຂວງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.district?x(l.a,{attrs:{small:"",color:"secondary",outlined:""}},[n._v("\n                  "+n._s(n.agency.district)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])],1)])])],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(h.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-certificate")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ຂໍ້ມູນທຸລະກິດ")])],1),n._v(" "),x(m.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-certificate")]),n._v("\n                ເລກໃບອະນຸຍາດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.licenseNumber?x(l.a,{attrs:{small:"",color:"success",outlined:""}},[n._v("\n                  "+n._s(n.agency.licenseNumber)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("ບໍ່ມີ")])],1)])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-calendar-clock")]),n._v("\n                ວັນໝົດອາຍຸໃບອະນຸຍາດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.licenseExpiryDate?x("div",[x("div",{staticClass:"mb-1"},[n._v(n._s(n.formatDate(n.agency.licenseExpiryDate)))]),n._v(" "),x(l.a,{attrs:{small:"",color:n.isLicenseExpired?"error":"success",dark:""}},[x(h.a,{attrs:{small:"",left:""}},[n._v(n._s(n.isLicenseExpired?"mdi-alert-circle":"mdi-check-circle"))]),n._v("\n                    "+n._s(n.isLicenseExpired?"ໝົດອາຍຸແລ້ວ":"ຍັງໃຊ້ໄດ້")+"\n                  ")],1)],1):x("span",{staticClass:"text--disabled"},[n._v("-")])])])])],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(h.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-account-tie")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ຜູ້ຕິດຕໍ່")])],1),n._v(" "),x(m.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-account")]),n._v("\n                ຊື່ຜູ້ຕິດຕໍ່\n              ")],1),n._v(" "),x("div",{staticClass:"info-value font-weight-medium"},[n._v("\n                "+n._s(n.agency.contactPersonName||"-")+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-briefcase")]),n._v("\n                ຕຳແໜ່ງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n._v("\n                "+n._s(n.agency.contactPersonPosition||"-")+"\n              ")])])])],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-phone")]),n._v("\n                ເບີໂທຜູ້ຕິດຕໍ່\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[n.agency.contactPersonPhone?x("a",{staticClass:"text-decoration-none",attrs:{href:"tel:".concat(n.agency.contactPersonPhone)}},[n._v("\n                  "+n._s(n.agency.contactPersonPhone)+"\n                ")]):x("span",{staticClass:"text--disabled"},[n._v("-")])])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-check-circle")]),n._v("\n                ສະຖານະ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value"},[x(l.a,{attrs:{small:"",color:n.getStatusColor(n.agency.status),dark:""}},[x(h.a,{attrs:{small:"",left:""}},[n._v(n._s(n.getStatusIcon(n.agency.status)))]),n._v("\n                  "+n._s(n.formatStatus(n.agency.status))+"\n                ")],1)],1)])])],1),n._v(" "),n.agency.notes?x(_.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(h.a,{staticClass:"mr-2",attrs:{color:"primary"}},[n._v("mdi-note-text")]),n._v(" "),x("span",{staticClass:"text-h6"},[n._v("ໝາຍເຫດ")])],1),n._v(" "),x(m.a,{staticClass:"mb-4"})],1)],1):n._e(),n._v(" "),n.agency.notes?x(_.a,[x(d.a,{attrs:{cols:"12"}},[x(o.a,{attrs:{color:"grey lighten-5",flat:""}},[x(c.c,[x("div",{staticClass:"info-value"},[n._v("\n                  "+n._s(n.agency.notes)+"\n                ")])])],1)],1)],1):n._e(),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12"}},[x("div",{staticClass:"section-header mt-6"},[x(h.a,{staticClass:"mr-2",attrs:{color:"grey"}},[n._v("mdi-information-outline")]),n._v(" "),x("span",{staticClass:"text-h6 grey--text"},[n._v("ຂໍ້ມູນລະບົບ")])],1),n._v(" "),x(m.a,{staticClass:"mb-4"})],1)],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-calendar-plus")]),n._v("\n                ວັນທີສ້າງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value caption"},[n._v("\n                "+n._s(n.formatDateTime(n.agency.createdAt))+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-calendar-edit")]),n._v("\n                ວັນທີອັບເດດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value caption"},[n._v("\n                "+n._s(n.formatDateTime(n.agency.updateTimestamp))+"\n              ")])])])],1),n._v(" "),x(_.a,[x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-account-plus")]),n._v("\n                ຜູ້ສ້າງ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value caption"},[n._v("\n                "+n._s((null===(t=n.agency.maker)||void 0===t?void 0:t.name)||"-")+"\n              ")])])]),n._v(" "),x(d.a,{attrs:{cols:"12",md:"6"}},[x("div",{staticClass:"info-item"},[x("div",{staticClass:"info-label"},[x(h.a,{staticClass:"mr-2",attrs:{small:""}},[n._v("mdi-account-edit")]),n._v("\n                ຜູ້ອັບເດດ\n              ")],1),n._v(" "),x("div",{staticClass:"info-value caption"},[n._v("\n                "+n._s((null===(e=n.agency.updateUser)||void 0===e?void 0:e.name)||"-")+"\n              ")])])])],1)],1)],1):n._e(),n._v(" "),x(c.a,{staticClass:"pa-4"},[x(y.a),n._v(" "),x(r.a,{attrs:{color:"primary",text:""},on:{click:n.editAgency}},[x(h.a,{attrs:{left:""}},[n._v("mdi-pencil")]),n._v("\n        ແກ້ໄຂ\n      ")],1),n._v(" "),x(r.a,{attrs:{text:""},on:{click:n.closeDialog}},[x(h.a,{attrs:{left:""}},[n._v("mdi-close")]),n._v("\n        ປິດ\n      ")],1)],1)],1)],1)}),[],!1,null,"0e5f56fb",null);e.default=component.exports},1589:function(t,e,n){"use strict";n(1285)},1590:function(t,e,n){var r=n(14)((function(i){return i[1]}));r.push([t.i,".v-card-title[data-v-9e472a8c]{background:linear-gradient(45deg,#1976d2,#1565c0);color:#fff}.caption[data-v-9e472a8c]{font-size:12px!important}.text-h3[data-v-9e472a8c]{font-size:2rem!important}.v-chip[data-v-9e472a8c]{margin:1px}.text--secondary[data-v-9e472a8c]{color:rgba(0,0,0,.6)!important}.text--disabled[data-v-9e472a8c]{color:rgba(0,0,0,.38)!important}",""]),r.locals={},t.exports=r},1858:function(t,e,n){"use strict";n.r(e);var r=n(321),o=n(318),c=n(19),l=n(322),d=n(797),v=n(792),f=n(806),m=n(771),h=n(168),_=n(310),y=n(251),x=n(796),C=n(66),D=n(794),w=n(112),k=n(963),S=(n(34),n(130),n(17)),A=n(36),E=(n(85),n(5),n(836),n(54),n(837),n(838),n(839),n(840),n(841),n(842),n(843),n(844),n(845),n(846),n(847),n(848),n(849),n(850),n(851),n(852),n(53),n(9),n(39),n(250),n(30),n(38),n(52),n(103),n(833),n(448),n(1360)),view=n(1361),O={name:"AgencySummary",components:{AgencyDialog:E.default,AgencyViewDialog:view.default},middleware:"auth",data:function(){return{loading:!1,agencies:[],filteredAgencies:[],showDialog:!1,showViewDialog:!1,selectedAgency:null,currentPage:1,itemsPerPage:10,filters:{search:"",status:"",city:"",district:""},summaryStats:{total:0,active:0,expiringSoon:0,withLicense:0},confirmDialog:{show:!1,title:"",message:"",color:"primary",confirmText:"ຢືນຢັນ",action:null},headers:[{text:"ຊື່ບໍລິສັດ",value:"agencyName",sortable:!0},{text:"ຕິດຕໍ່",value:"contact",sortable:!1},{text:"ທີ່ຢູ່",value:"location",sortable:!1},{text:"ຜູ້ຕິດຕໍ່",value:"contactPerson",sortable:!1},{text:"ໃບອະນຸຍາດ",value:"license",sortable:!1},{text:"ສະຖານະ",value:"status",sortable:!0},{text:"ວັນທີສ້າງ",value:"createdAt",sortable:!0},{text:"ຟັງຊັ່ນ",value:"actions",sortable:!1}],statusOptions:[{text:"ກຳລັງດຳເນີນງານ",value:"active"},{text:"ບໍ່ດຳເນີນງານ",value:"inactive"},{text:"ຖືກຢຸດ",value:"suspended"}]}},computed:{user:function(){return this.$auth.user||{}},availableCities:function(){return Object(A.a)(new Set(this.agencies.map((function(a){return a.city})).filter(Boolean))).sort().map((function(t){return{text:t,value:t}}))},availableDistricts:function(){return Object(A.a)(new Set(this.agencies.map((function(a){return a.district})).filter(Boolean))).sort().map((function(t){return{text:t,value:t}}))}},mounted:function(){var t=this;return Object(S.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchAgencies();case 2:case"end":return e.stop()}}),e)})))()},methods:{fetchAgencies:function(){var t=this;return Object(S.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n={page:1,limit:1e3,isActive:!0},e.next=5,t.$axios.get("/api/agency",{params:n});case 5:if(r=e.sent,!(data=r.data)||!data.success){e.next=13;break}return t.agencies=data.data.agencies||[],e.next=11,t.fetchStats();case 11:e.next=14;break;case 13:t.agencies=[];case 14:t.applyFilters(),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error fetching agencies:",e.t0),t.$toast.error("ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ"),t.agencies=[];case 22:return e.prev=22,t.loading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,17,22,25]])})))()},fetchStats:function(){var t=this;return Object(S.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/agency/dashboard-stats");case 3:n=e.sent,(data=n.data)&&data.success&&(t.summaryStats={total:data.data.totalAgencies||0,active:data.data.activeAgencies||0,expiringSoon:data.data.agenciesExpiringSoon||0,withLicense:data.data.agenciesWithLicense||0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching stats:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},openCreateDialog:function(){this.selectedAgency=null,this.showDialog=!0},editAgency:function(t){this.selectedAgency=t,this.showDialog=!0},viewAgency:function(t){this.selectedAgency=t,this.showViewDialog=!0},closeDialog:function(){this.showDialog=!1,this.selectedAgency=null},closeViewDialog:function(){this.showViewDialog=!1,this.selectedAgency=null},onAgencySave:function(t){var e=this;return Object(S.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e.loading=!0,!e.selectedAgency||!e.selectedAgency.id){n.next=8;break}return n.next=5,e.$axios.put("/api/agency/".concat(e.selectedAgency.id),t);case 5:r=n.sent,n.next=11;break;case 8:return n.next=10,e.$axios.post("/api/agency",t);case 10:r=n.sent;case 11:if(!r.data||!r.data.success){n.next=18;break}return e.$toast.success("ການບັນທຶກສຳເລັດແລ້ວ"),e.closeDialog(),n.next=16,e.fetchAgencies();case 16:n.next=19;break;case 18:throw new Error((null===(o=r.data)||void 0===o?void 0:o.message)||"Save failed");case 19:n.next=26;break;case 21:n.prev=21,n.t0=n.catch(0),console.error("Error saving agency:",n.t0),d=(null===(c=n.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)||n.t0.message||"ການບັນທຶກບໍ່ສຳເລັດ",e.$toast.error(d);case 26:return n.prev=26,e.loading=!1,n.finish(26);case 29:case"end":return n.stop()}}),n,null,[[0,21,26,29]])})))()},toggleStatus:function(t){var e=this,n="active"===t.status?"inactive":"active",r="active"===n?"ເປີດການດຳເນີນງານ":"ຢຸດການດຳເນີນງານ";this.confirmDialog={show:!0,title:"ຢືນຢັນການເປີດ/ປິດ",message:"ທ່ານຕ້ອງການ".concat(r,'ບໍລິສັດ "').concat(t.agencyName,'" ແມ່ນບໍ?'),color:"active"===n?"success":"warning",confirmText:"ຢືນຢັນ",action:function(){return e.updateStatus(t,n)}}},updateStatus:function(t,e){var n=this;return Object(S.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n.loading=!0,r.next=4,n.$axios.patch("/api/agency/".concat(t.id,"/status"),{status:e});case 4:if(!(o=r.sent).data||!o.data.success){r.next=9;break}return n.$toast.success("ອັບເດດສະຖານະສຳເລັດແລ້ວ"),r.next=9,n.fetchAgencies();case 9:r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),console.error("Error updating status:",r.t0),n.$toast.error("ອັບເດດສະຖານະບໍ່ສຳເລັດ");case 15:return r.prev=15,n.loading=!1,n.confirmDialog.show=!1,r.finish(15);case 19:case"end":return r.stop()}}),r,null,[[0,11,15,19]])})))()},deleteAgency:function(t){var e=this;this.confirmDialog={show:!0,title:"ຢືນຢັນການລົບ",message:'ທ່ານຕ້ອງການລົບບໍລິສັດ "'.concat(t.agencyName,'" ແມ່ນບໍ? ການກະທຳນີ້ບໍ່ສາມາດຍົກເລີກໄດ້.'),color:"error",confirmText:"ລົບ",action:function(){return e.performDelete(t)}}},performDelete:function(t){var e=this;return Object(S.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,n.next=4,e.$axios.delete("/api/agency/".concat(t.id));case 4:if(!(r=n.sent).data||!r.data.success){n.next=9;break}return e.$toast.success("ລົບສຳເລັດແລ້ວ"),n.next=9,e.fetchAgencies();case 9:n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("Error deleting agency:",n.t0),e.$toast.error("ການລົບບໍ່ສຳເລັດ");case 15:return n.prev=15,e.loading=!1,e.confirmDialog.show=!1,n.finish(15);case 19:case"end":return n.stop()}}),n,null,[[0,11,15,19]])})))()},applyFilters:function(){var t=this,e=Object(A.a)(this.agencies);if(this.filters.search){var n=this.filters.search.toLowerCase();e=e.filter((function(t){var e,r,o;return t.agencyName.toLowerCase().includes(n)||(null===(e=t.agencyCode)||void 0===e?void 0:e.toLowerCase().includes(n))||t.phone.includes(n)||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(n))||(null===(o=t.contactPersonName)||void 0===o?void 0:o.toLowerCase().includes(n))}))}this.filters.status&&(e=e.filter((function(e){return e.status===t.filters.status}))),this.filters.city&&(e=e.filter((function(e){return e.city===t.filters.city}))),this.filters.district&&(e=e.filter((function(e){return e.district===t.filters.district}))),this.filteredAgencies=e},resetFilters:function(){this.filters={search:"",status:"",city:"",district:""},this.applyFilters()},exportData:function(){var t=this.convertToCSV(this.filteredAgencies);this.downloadCSV(t,"agencies-export.csv")},convertToCSV:function(data){var t=this;return[["ຊື່ບໍລິສັດ","ລະຫັດບໍລິສັດ","ເລກທະບຽນ","ເບີໂທ","ອີເມວ","ທີ່ຢູ່","ເມືອງ","ແຂວງ","ເລກໃບອະນຸຍາດ","ວັນທີລົງທະບຽນ","ວັນໝົດອາຍຸໃບອະນຸຍາດ","ຊື່ຜູ້ຕິດຕໍ່","ຕຳແໜ່ງຜູ້ຕິດຕໍ່","ເບີໂທຜູ້ຕິດຕໍ່","ສະຖານະ","ຫມາຍເຫດ"].join(",")].concat(Object(A.a)(data.map((function(e){return[e.agencyName,e.agencyCode||"",e.registrationNumber||"",e.phone,e.email||"",e.address||"",e.city||"",e.district||"",e.licenseNumber||"",e.registrationDate||"",e.licenseExpiryDate||"",e.contactPersonName||"",e.contactPersonPosition||"",e.contactPersonPhone||"",t.formatStatus(e.status),e.notes||""].join(",")})))).join("\n")},downloadCSV:function(t,e){var n=new Blob([t],{type:"text/csv;charset=utf-8;"}),link=document.createElement("a"),r=URL.createObjectURL(n);link.setAttribute("href",r),link.setAttribute("download",e),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link)},formatDate:function(t){return t?new Date(t).toLocaleDateString("lo-LA",{year:"numeric",month:"short",day:"numeric"}):"-"},formatStatus:function(t){return{active:"ກຳລັງດຳເນີນງານ",inactive:"ບໍ່ດຳເນີນງານ",suspended:"ຖືກຢຸດ"}[t]||t},getStatusColor:function(t){return{active:"success",inactive:"grey",suspended:"error"}[t]||"grey"},getStatusIcon:function(t){return{active:"mdi-check-circle",inactive:"mdi-pause-circle",suspended:"mdi-alert-circle"}[t]||"mdi-help-circle"},isLicenseExpired:function(t){return!!t&&new Date(t)<=new Date},truncateText:function(text,t){return text?text.length>t?text.substring(0,t)+"...":text:""}}},$=(n(1589),n(31)),component=Object($.a)(O,(function(){var t=this,e=t._self._c;return e(v.a,{attrs:{fluid:""}},[e(x.a,[e(d.a,{attrs:{cols:"12"}},[e(o.a,{staticClass:"mb-4"},[e(c.d,{staticClass:"d-flex justify-space-between align-center"},[e("div",[e(h.a,{staticClass:"mr-2",attrs:{large:"",color:"primary"}},[t._v("mdi-office-building")]),t._v(" "),e("span",{staticClass:"text-h4"},[t._v("ລະບົບຈັດການບໍລິສັດແນະນຳແຮງງານ")])],1),t._v(" "),e("div",[e(r.a,{staticClass:"mr-2",attrs:{color:"primary"},on:{click:t.openCreateDialog}},[e(h.a,{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n              ເພີ່ມບໍລິສັດໃໝ່\n            ")],1),t._v(" "),e(r.a,{attrs:{color:"success",outlined:""},on:{click:t.exportData}},[e(h.a,{attrs:{left:""}},[t._v("mdi-download")]),t._v("\n              Export\n            ")],1)],1)])],1),t._v(" "),e(o.a,{staticClass:"mb-4"},[e(c.d,[e(h.a,{staticClass:"mr-2"},[t._v("mdi-filter")]),t._v("\n          ຄົ້ນຫາ ແລະ ກັ່ນຕອງ\n        ")],1),t._v(" "),e(c.c,[e(x.a,[e(d.a,{attrs:{cols:"12",md:"3"}},[e(w.a,{attrs:{label:"ຄົ້ນຫາ",placeholder:"ຊື່ບໍລິສັດ, ເບີໂທ, ອີເມວ...","prepend-icon":"mdi-magnify",clearable:""},on:{input:t.applyFilters},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(C.a,{attrs:{items:t.statusOptions,label:"ສະຖານະ","prepend-icon":"mdi-check-circle",clearable:""},on:{change:t.applyFilters},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(C.a,{attrs:{items:t.availableCities,label:"ເມືອງ","prepend-icon":"mdi-city",clearable:""},on:{change:t.applyFilters},model:{value:t.filters.city,callback:function(e){t.$set(t.filters,"city",e)},expression:"filters.city"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(C.a,{attrs:{items:t.availableDistricts,label:"ແຂວງ","prepend-icon":"mdi-map",clearable:""},on:{change:t.applyFilters},model:{value:t.filters.district,callback:function(e){t.$set(t.filters,"district",e)},expression:"filters.district"}})],1),t._v(" "),e(d.a,{staticClass:"d-flex align-center",attrs:{cols:"12",md:"3"}},[e(r.a,{staticClass:"mr-2",attrs:{color:"primary"},on:{click:t.applyFilters}},[e(h.a,{attrs:{left:""}},[t._v("mdi-magnify")]),t._v("\n                ຄົ້ນຫາ\n              ")],1),t._v(" "),e(r.a,{attrs:{outlined:""},on:{click:t.resetFilters}},[e(h.a,{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n                Reset\n              ")],1)],1)],1)],1)],1),t._v(" "),e(o.a,[e(c.d,[e(h.a,{staticClass:"mr-2"},[t._v("mdi-table")]),t._v("\n          ລາຍຊື່ບໍລິສັດ\n          "),e(D.a),t._v(" "),e("span",{staticClass:"caption"},[t._v(t._s(t.filteredAgencies.length)+" ລາຍການ")])],1),t._v(" "),e(f.a,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.filteredAgencies,"items-per-page":t.itemsPerPage,page:t.currentPage,loading:t.loading,"loading-text":"ກຳລັງໂຫຼດຂໍ້ມູນ...","no-data-text":"ບໍ່ມີຂໍ້ມູນ"},scopedSlots:t._u([{key:"item.agencyName",fn:function(n){var r=n.item;return[e("div",[e("div",{staticClass:"font-weight-bold"},[t._v(t._s(r.agencyName))]),t._v(" "),e("div",{staticClass:"caption text--secondary"},[t._v(t._s(r.agencyCode))])])]}},{key:"item.contact",fn:function(n){var r=n.item;return[e("div",[e("div",{staticClass:"d-flex align-center mb-1"},[e(h.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-phone")]),t._v(" "),e("span",[t._v(t._s(r.phone))])],1),t._v(" "),r.email?e("div",{staticClass:"d-flex align-center"},[e(h.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-email")]),t._v(" "),e("span",{staticClass:"caption"},[t._v(t._s(r.email))])],1):t._e()])]}},{key:"item.location",fn:function(n){var r=n.item;return[e("div",[r.city||r.district?e("div",[r.city?e(l.a,{staticClass:"ma-1",attrs:{small:"",color:"primary",outlined:""}},[t._v("\n                  "+t._s(r.city)+"\n                ")]):t._e(),t._v(" "),r.district?e(l.a,{staticClass:"ma-1",attrs:{small:"",color:"secondary",outlined:""}},[t._v("\n                  "+t._s(r.district)+"\n                ")]):t._e()],1):t._e(),t._v(" "),r.address?e("div",{staticClass:"caption text--secondary mt-1"},[t._v("\n                "+t._s(t.truncateText(r.address,50))+"\n              ")]):t._e()])]}},{key:"item.contactPerson",fn:function(n){var r=n.item;return[r.contactPersonName?e("div",[e("div",{staticClass:"font-weight-medium"},[t._v(t._s(r.contactPersonName))]),t._v(" "),e("div",{staticClass:"caption text--secondary"},[t._v(t._s(r.contactPersonPosition))]),t._v(" "),r.contactPersonPhone?e("div",{staticClass:"caption"},[e(h.a,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-phone")]),t._v("\n                "+t._s(r.contactPersonPhone)+"\n              ")],1):t._e()]):e("span",{staticClass:"text--disabled"},[t._v("-")])]}},{key:"item.license",fn:function(n){var r=n.item;return[r.licenseNumber?e("div",[e("div",{staticClass:"font-weight-medium"},[t._v(t._s(r.licenseNumber))]),t._v(" "),r.licenseExpiryDate?e("div",{staticClass:"caption",class:t.isLicenseExpired(r.licenseExpiryDate)?"error--text":"success--text"},[e(h.a,{staticClass:"mr-1",attrs:{small:"",color:t.isLicenseExpired(r.licenseExpiryDate)?"error":"success"}},[t._v("\n                  "+t._s(t.isLicenseExpired(r.licenseExpiryDate)?"mdi-alert-circle":"mdi-check-circle")+"\n                ")]),t._v("\n                "+t._s(t.formatDate(r.licenseExpiryDate))+"\n              ")],1):t._e()]):e(l.a,{attrs:{small:"",color:"grey",outlined:""}},[t._v("ບໍ່ມີ")])]}},{key:"item.status",fn:function(n){var r=n.item;return[e(l.a,{attrs:{small:"",color:t.getStatusColor(r.status),dark:""}},[e(h.a,{attrs:{small:"",left:""}},[t._v(t._s(t.getStatusIcon(r.status)))]),t._v("\n              "+t._s(t.formatStatus(r.status))+"\n            ")],1)]}},{key:"item.createdAt",fn:function(n){var r=n.item;return[e("div",{staticClass:"caption"},[t._v(t._s(t.formatDate(r.createdAt)))])]}},{key:"item.actions",fn:function(n){var o=n.item;return[e(k.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var c=n.on,l=n.attrs;return[e(r.a,t._g(t._b({attrs:{icon:"",small:"",color:"primary"},on:{click:function(e){return t.viewAgency(o)}}},"v-btn",l,!1),c),[e(h.a,{attrs:{small:""}},[t._v("mdi-eye")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("ເບິ່ງລາຍລະອຽດ")])]),t._v(" "),e(k.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var c=n.on,l=n.attrs;return[e(r.a,t._g(t._b({attrs:{icon:"",small:"",color:"info"},on:{click:function(e){return t.editAgency(o)}}},"v-btn",l,!1),c),[e(h.a,{attrs:{small:""}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("ແກ້ໄຂ")])]),t._v(" "),e(k.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var c=n.on,l=n.attrs;return[e(r.a,t._g(t._b({attrs:{icon:"",small:"",color:"active"===o.status?"warning":"success"},on:{click:function(e){return t.toggleStatus(o)}}},"v-btn",l,!1),c),[e(h.a,{attrs:{small:""}},[t._v("\n                    "+t._s("active"===o.status?"mdi-pause":"mdi-play")+"\n                  ")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s("active"===o.status?"ຢຸດການດຳເນີນງານ":"ເລີ່ມການດຳເນີນງານ"))])]),t._v(" "),e(k.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var c=n.on,l=n.attrs;return[e(r.a,t._g(t._b({attrs:{icon:"",small:"",color:"error"},on:{click:function(e){return t.deleteAgency(o)}}},"v-btn",l,!1),c),[e(h.a,{attrs:{small:""}},[t._v("mdi-delete")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("ລົບ")])])]}}])})],1)],1)],1),t._v(" "),e("AgencyDialog",{attrs:{visible:t.showDialog,agency:t.selectedAgency},on:{close:t.closeDialog,save:t.onAgencySave}}),t._v(" "),e("AgencyViewDialog",{attrs:{visible:t.showViewDialog,agency:t.selectedAgency},on:{close:t.closeViewDialog}}),t._v(" "),e(m.a,{attrs:{"max-width":"400"},model:{value:t.confirmDialog.show,callback:function(e){t.$set(t.confirmDialog,"show",e)},expression:"confirmDialog.show"}},[e(o.a,[e(c.d,{staticClass:"headline"},[t._v(t._s(t.confirmDialog.title))]),t._v(" "),e(c.c,[t._v(t._s(t.confirmDialog.message))]),t._v(" "),e(c.a,[e(D.a),t._v(" "),e(r.a,{attrs:{text:""},on:{click:function(e){t.confirmDialog.show=!1}}},[t._v("ຍົກເລີກ")]),t._v(" "),e(r.a,{attrs:{color:t.confirmDialog.color,text:""},on:{click:t.confirmDialog.action}},[t._v("\n          "+t._s(t.confirmDialog.confirmText)+"\n        ")])],1)],1)],1),t._v(" "),e(_.a,{attrs:{value:t.loading}},[e(y.a,{attrs:{indeterminate:"",size:"64"}})],1)],1)}),[],!1,null,"9e472a8c",null);e.default=component.exports},808:function(t,e,n){"use strict";var r=n(809).has;t.exports=function(t){return r(t),t}},809:function(t,e,n){"use strict";var r=n(25),o=Set.prototype;t.exports={Set:Set,add:r(o.add),has:r(o.has),remove:r(o.delete),proto:o}},810:function(t,e,n){"use strict";var r=n(25),o=n(445),c=n(809),l=c.Set,d=c.proto,v=r(d.forEach),f=r(d.keys),m=f(new l).next;t.exports=function(t,e,n){return n?o({iterator:f(t),next:m},e):v(t,e)}},812:function(t,e,n){"use strict";var r=n(87),o=n(40),c=n(857),l=n(49),d=r("Set");t.exports=function(t){return function(t){return l(t)&&"number"==typeof t.size&&o(t.has)&&o(t.keys)}(t)?t:c(t)?new d(t):t}},813:function(t,e,n){"use strict";var r=n(86),o=n(59),c=n(48),l=n(121),d=n(859),v="Invalid size",f=RangeError,m=TypeError,h=Math.max,_=function(t,e){this.set=t,this.size=h(e,0),this.has=r(t.has),this.keys=r(t.keys)};_.prototype={getIterator:function(){return d(o(c(this.keys,this.set)))},includes:function(t){return c(this.has,this.set,t)}},t.exports=function(t){o(t);var e=+t.size;if(e!=e)throw new m(v);var n=l(e);if(n<0)throw new f(v);return new _(t,n)}},816:function(t,e,n){"use strict";var r=n(450),o=n(809);t.exports=r(o.proto,"size","get")||function(t){return t.size}},824:function(t,e,n){"use strict";var r=n(809),o=n(810),c=r.Set,l=r.add;t.exports=function(t){var e=new c;return o(t,(function(t){l(e,t)})),e}},836:function(t,e,n){"use strict";n(856)},837:function(t,e,n){"use strict";var r=n(11),o=n(808),c=n(809).add;r({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=o(this),e=0,n=arguments.length;e<n;e++)c(t,arguments[e]);return t}})},838:function(t,e,n){"use strict";var r=n(11),o=n(808),c=n(809).remove;r({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t,e=o(this),n=!0,r=0,l=arguments.length;r<l;r++)t=c(e,arguments[r]),n=n&&t;return!!n}})},839:function(t,e,n){"use strict";var r=n(11),o=n(48),c=n(812),l=n(858);r({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return o(l,this,c(t))}})},840:function(t,e,n){"use strict";var r=n(11),o=n(71),c=n(808),l=n(810);r({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var e=c(this),n=o(t,arguments.length>1?arguments[1]:void 0);return!1!==l(e,(function(t){if(!n(t,t,e))return!1}),!0)}})},841:function(t,e,n){"use strict";var r=n(11),o=n(71),c=n(808),l=n(809),d=n(810),v=l.Set,f=l.add;r({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var e=c(this),n=o(t,arguments.length>1?arguments[1]:void 0),r=new v;return d(e,(function(t){n(t,t,e)&&f(r,t)})),r}})},842:function(t,e,n){"use strict";var r=n(11),o=n(71),c=n(808),l=n(810);r({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var e=c(this),n=o(t,arguments.length>1?arguments[1]:void 0),r=l(e,(function(t){if(n(t,t,e))return{value:t}}),!0);return r&&r.value}})},843:function(t,e,n){"use strict";var r=n(11),o=n(48),c=n(812),l=n(860);r({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return o(l,this,c(t))}})},844:function(t,e,n){"use strict";var r=n(11),o=n(48),c=n(812),l=n(861);r({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return o(l,this,c(t))}})},845:function(t,e,n){"use strict";var r=n(11),o=n(48),c=n(812),l=n(862);r({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return o(l,this,c(t))}})},846:function(t,e,n){"use strict";var r=n(11),o=n(48),c=n(812),l=n(863);r({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return o(l,this,c(t))}})},847:function(t,e,n){"use strict";var r=n(11),o=n(25),c=n(808),l=n(810),d=n(55),v=o([].join),f=o([].push);r({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var e=c(this),n=void 0===t?",":d(t),r=[];return l(e,(function(t){f(r,t)})),v(r,n)}})},848:function(t,e,n){"use strict";var r=n(11),o=n(71),c=n(808),l=n(809),d=n(810),v=l.Set,f=l.add;r({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var e=c(this),n=o(t,arguments.length>1?arguments[1]:void 0),r=new v;return d(e,(function(t){f(r,n(t,t,e))})),r}})},849:function(t,e,n){"use strict";var r=n(11),o=n(86),c=n(808),l=n(810),d=TypeError;r({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var e=c(this),n=arguments.length<2,r=n?void 0:arguments[1];if(o(t),l(e,(function(o){n?(n=!1,r=o):r=t(r,o,o,e)})),n)throw new d("Reduce of empty set with no initial value");return r}})},850:function(t,e,n){"use strict";var r=n(11),o=n(71),c=n(808),l=n(810);r({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var e=c(this),n=o(t,arguments.length>1?arguments[1]:void 0);return!0===l(e,(function(t){if(n(t,t,e))return!0}),!0)}})},851:function(t,e,n){"use strict";var r=n(11),o=n(48),c=n(812),l=n(864);r({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return o(l,this,c(t))}})},852:function(t,e,n){"use strict";var r=n(11),o=n(48),c=n(812),l=n(865);r({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return o(l,this,c(t))}})},856:function(t,e,n){"use strict";n(449)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(451))},857:function(t,e,n){"use strict";var r=n(177),o=n(56),c=n(145),l=n(45),d=n(178),v=l("iterator"),f=Object;t.exports=function(t){if(c(t))return!1;var e=f(t);return void 0!==e[v]||"@@iterator"in e||o(d,r(e))}},858:function(t,e,n){"use strict";var r=n(808),o=n(809),c=n(824),l=n(816),d=n(813),v=n(810),f=n(445),m=o.has,h=o.remove;t.exports=function(t){var e=r(this),n=d(t),o=c(e);return l(e)<=n.size?v(e,(function(t){n.includes(t)&&h(o,t)})):f(n.getIterator(),(function(t){m(o,t)&&h(o,t)})),o}},859:function(t,e,n){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},860:function(t,e,n){"use strict";var r=n(808),o=n(809),c=n(816),l=n(813),d=n(810),v=n(445),f=o.Set,m=o.add,h=o.has;t.exports=function(t){var e=r(this),n=l(t),o=new f;return c(e)>n.size?v(n.getIterator(),(function(t){h(e,t)&&m(o,t)})):d(e,(function(t){n.includes(t)&&m(o,t)})),o}},861:function(t,e,n){"use strict";var r=n(808),o=n(809).has,c=n(816),l=n(813),d=n(810),v=n(445),f=n(340);t.exports=function(t){var e=r(this),n=l(t);if(c(e)<=n.size)return!1!==d(e,(function(t){if(n.includes(t))return!1}),!0);var m=n.getIterator();return!1!==v(m,(function(t){if(o(e,t))return f(m,"normal",!1)}))}},862:function(t,e,n){"use strict";var r=n(808),o=n(816),c=n(810),l=n(813);t.exports=function(t){var e=r(this),n=l(t);return!(o(e)>n.size)&&!1!==c(e,(function(t){if(!n.includes(t))return!1}),!0)}},863:function(t,e,n){"use strict";var r=n(808),o=n(809).has,c=n(816),l=n(813),d=n(445),v=n(340);t.exports=function(t){var e=r(this),n=l(t);if(c(e)<n.size)return!1;var f=n.getIterator();return!1!==d(f,(function(t){if(!o(e,t))return v(f,"normal",!1)}))}},864:function(t,e,n){"use strict";var r=n(808),o=n(809),c=n(824),l=n(813),d=n(445),v=o.add,f=o.has,m=o.remove;t.exports=function(t){var e=r(this),n=l(t).getIterator(),o=c(e);return d(n,(function(t){f(e,t)?m(o,t):v(o,t)})),o}},865:function(t,e,n){"use strict";var r=n(808),o=n(809).add,c=n(824),l=n(813),d=n(445);t.exports=function(t){var e=r(this),n=l(t).getIterator(),v=c(e);return d(n,(function(t){o(v,t)})),v}},896:function(t,e,n){var content=n(897);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("53887fd2",content,!0,{sourceMap:!1})},897:function(t,e,n){var r=n(14)((function(i){return i[1]}));r.push([t.i,".v-tooltip{display:none}.v-tooltip--attached{display:inline}.v-tooltip__content{background:rgba(97,97,97,.9);border-radius:4px;color:#fff;display:inline-block;font-size:14px;line-height:22px;opacity:0;padding:5px 16px;pointer-events:none;position:absolute;text-transform:none;width:auto}.v-tooltip__content.menuable__content__active{opacity:.9}.v-tooltip__content--fixed{position:fixed}.v-tooltip__content[class*=-active]{transition-timing-function:cubic-bezier(0,0,.2,1)}.v-tooltip__content[class*=enter-active]{transition-duration:.15s}.v-tooltip__content[class*=leave-active]{transition-duration:75ms}",""]),r.locals={},t.exports=r},946:function(t,e,n){var content=n(1013);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("15f0fe28",content,!0,{sourceMap:!1})},947:function(t,e,n){var content=n(1015);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("6d88f5ba",content,!0,{sourceMap:!1})},963:function(t,e,n){"use strict";var r=n(3),o=(n(24),n(896),n(138)),c=n(26),l=n(147),d=n(123),v=n(272),f=n(1),m=n(16),h=n(6);e.a=Object(h.a)(c.a,l.a,d.a,v.a).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!(this.bottom||this.left||this.top||this.right),r=!1!==this.attach?e.offsetLeft:e.left,o=0;return this.top||this.bottom||n?o=r+e.width/2-content.width/2:(this.left||this.right)&&(o=r+(this.right?e.width:-content.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(o,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,content=t.content,n=!1!==this.attach?e.offsetTop:e.top,r=0;return this.top||this.bottom?r=n+(this.bottom?e.height:-content.height)+(this.bottom?10:-10):(this.left||this.right)&&(r=n+e.height/2-content.height/2),this.nudgeTop&&(r-=parseInt(this.nudgeTop)),this.nudgeBottom&&(r+=parseInt(this.nudgeBottom)),!1===this.attach&&(r+=this.pageYOffset),"".concat(this.calcYOverflow(r),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(f.h)(this.maxWidth),minWidth:Object(f.h)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(f.t)(this,"activator",!0)&&Object(m.b)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=o.a.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")}),e.keydown=function(e){e.keyCode===f.y.esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var content=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[content]):content},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(r.a)(t,this.contentClass,!0),Object(r.a)(t,"menuable__content__active",this.isActive),Object(r.a)(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}})}}]);