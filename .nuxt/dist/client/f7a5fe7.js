(window.webpackJsonp=window.webpackJsonp||[]).push([[189,135],{1672:function(t,e,n){"use strict";n.r(e);var r=n(316),o=n(313),l=n(18),c=n(317),d=n(780),f=n(789),m=n(1625),h=n(754),v=n(312),y=n(167),k=n(770),D=n(318),w=n(779),O=n(777),x=n(113),C=(n(34),n(131),n(450),n(35),n(66),n(5),n(10),n(7),n(11),n(8),n(12),n(20)),_=n(31),S=n(3),I=(n(92),n(9),n(53),n(63),n(75),n(30),n(333),n(878)),E=n(879),T=n(40),F=n(36);function R(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(e){Object(S.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L={components:{OrderForm:I.default,OrderStatusForm:E.default},data:function(){return{localLanguage:"",timer:null,barcode:"",statusFormDialog:!1,whatsappContactLink:"",guidelineDialog:!1,componentKey:1,orderStatusComponentKey:1,watchingLink:"OEGkC4zNgpY",selectedRiderId:"",formDialog:!1,entries:[],search:"",entrySelectedId:0,isCreate:!1,isloading:!1,dialogKey:1,headers:[{text:"ວັນທີສັ່ງ",align:"left",value:"bookingDate",sortable:!0},{text:"ຊືລູກຄ້າ",align:"left",value:"client.name",sortable:!0},{text:"ລາຍການສິນຄ້າ",align:"left",value:"name",sortable:!0},{text:"ຄຳອະທິບາຍ",align:"center",value:"note"},{text:"Tracking",align:"center",value:"trackingNumber"},{text:"Link",align:"center",value:"link"},{text:"ຮັບເຄື່ອງ",align:"end",value:"function",sortable:!1},{text:"ແຈ້ງລູກຄ້າ",align:"end",value:"notify",sortable:!1},{text:"ແກ້ໄຂ",align:"end",value:"edit",sortable:!1},{text:"ສະຖານະ",align:"end",value:"status",sortable:!1}],menu1:!1,menu2:!1,date:Object(F.d)(),date2:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateFormatted:this.formatDate(Object(F.d)()),dateFormatted2:this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10))}},mounted:function(){this.loadData(),window.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeyDown)},computed:j(j({localStatus:function(){return[{name:"ຍັງບໍ່ເຂົ້າສາງ",code:"ORDERED"},{name:"ເຄື່ອງເຂົ້າສາງ",code:"RECEIVED"},{name:"ຮັບແລ້ວ",code:"INVOICED"}]},filterOrders:function(){return this.entries.filter((function(t){return"ORDERED"==t.status}))},user:function(){return this.$auth.user||""},currentTerminal:function(){var t=this;return this.findAllTerminal.find((function(e){return e.id==t.findSelectedTerminal}))}},Object(T.c)(["findAllProduct","findAllClient","findAllPayment","findAllUnit","findAllCurrency","findAllTerminal","findSelectedTerminal"])),{},{orderTemplate:function(){var t=(new Date).toISOString().substr(0,10),e=this.currentTerminal.locationId;return{id:null,bookingDate:t,name:"",note:"",trackingNumber:this.barcode.toUpperCase(),link:"",price:0,priceRate:1,shippingFee:0,shippingRate:1,status:"RECEIVED",isActive:!0,riderId:null,locationId:e,userId:this.user.id,currencyId:1,shippingFeeCurrencyId:1,vendorId:null,paymentId:1,client:{id:null,name:"",telephone:""}}}}),watch:{formDialog:function(t){console.log("STATUS FORM TRIGGER ".concat(t)),t?(console.log("STATUS EQ TRUE TRIGGER ".concat(t)),window.removeEventListener("keydown",this.handleKeyDown)):(console.log("STATUS EQ FALSE TRIGGER ".concat(t)),window.addEventListener("keydown",this.handleKeyDown))},date:function(t){this.dateFormatted=this.formatDate(this.date),this.loadData()},date2:function(t){this.dateFormatted2=this.formatDate(this.date2),this.loadData()}},methods:j(j({},Object(T.b)(["addOrderToConfirmStockInList","setSelectedTerminal","setSelectedLocation"])),{},{handleKeyDown:function(t){var e=this;if(this.timer&&clearInterval(this.timer),"Enter"==t.key)return this.barcode&&(console.log("BACORD SCAN RESULT: ".concat(this.barcode)),this.findOrderByTrackingNumber(this.barcode)),void(this.barcode="");"Shift"!=t.key&&(this.barcode+=t.key),this.timer=setInterval((function(){return e.barcode=""}),20)},findOrderByTrackingNumber:function(t){if(!/^[A-Za-z0-9]*$/.test(t))return Object(F.j)(this.$swal,"Error","ລະບົບບໍ່ເຂົ້າໃຈພາສາລາວ ກະລຸນາປ່ງນພາສາ ເປັນພາສາອັງກິດ ກ່ອນສະແກນ");console.log("ENGLISH ACCEPT"),console.log("FIND TRACKING NUMBER BY BARCODE SCAN RESULT: ".concat(t));var e=this.entries.find((function(e){return e.trackingNumber.toUpperCase()==t}));null!=e?(this.orderStatusComponentKey+=1,this.statusFormDialog=!0,this.isCreate=!1,this.addOrderToConfirmStockInList(e)):(console.log("Add order from null barcode"),this.orderStatusComponentKey+=1,this.statusFormDialog=!0,this.isCreate=!1,this.addOrderToConfirmStockInList(this.orderTemplate))},findOrderById:function(t){var e=this.entries.find((function(e){return e.id==t}));null!=e&&(this.orderStatusComponentKey+=1,this.statusFormDialog=!0,this.isCreate=!1,this.addOrderToConfirmStockInList(e))},converseHandleInput:function(t){var input=t.trim(),e=/^[A-Za-z0-9]*$/.test(input);return console.log("VALIDATING INPUTT...".concat(e)),e?Object(F.j)(this.$swal,"Error","CONVERT TO UPPER CASE ".concat(input," TO ").concat(input.toUpperCase())):Object(F.j)(this.$swal,"Error","ລະບົບບໍ່ເຂົ້າໃຈພາສາລາວ ກະລຸນາປ່ງນພາສາ ເປັນພາສາອັງກິດ ກ່ອນສະແກນ")},exportToExcel:function(){var t=this.$xlsx.utils.json_to_sheet(this.entries),e=this.$xlsx.utils.book_new();this.$xlsx.utils.book_append_sheet(e,t,"Sheet1"),this.$xlsx.writeFile(e,"data.xlsx")},formatDate:function(t){if(!t)return null;var e=t.split("-"),n=Object(_.a)(e,3),r=n[0],o=n[1],l=n[2];return"".concat(o,"/").concat(l,"/").concat(r)},countDay:function(t){return Object(F.b)(t)},viewItem:function(t){this.updateViewCount(t.id),this.watchingLink=t.youtubeLink,this.dialogKey+=1,this.guidelineDialog=!0},createRecord:function(){this.componentKey+=1,this.entrySelectedId=0,this.isCreate=!0,this.formDialog=!0},handleEvent:function(){this.formDialog=!1},editItem:function(t){this.componentKey+=1,this.entrySelectedId=t.id,this.formDialog=!0,this.isCreate=!1},whatsappLink:function(t){console.log("******** customer tel ".concat(t," *******"));var e=t.client.telephone.trim(),n=e.substring(e.length-8);this.whatsappContactLink="https://api.whatsapp.com/send?phone=+85620".concat(n,"&text=").concat(encodeURIComponent("ສະບາຍດີ ລູກຄ້າ ".concat(t.client.name," \n ອໍເດີ 🛒 : ").concat(t.trackingNumber," \n ສິນຄ້າ: ").concat(t.name," \n ວັນທີສັ່ງ: ").concat(t.bookingDate," \n ລິ້ງ: ").concat(t.link," \n 🔔🔔🔔 ເຄຶ່ອງມາຮອດສາງແລ້ວ 🔔🔔🔔")))},parseDate:function(t){if(!t)return null;var e=t.split("/"),n=Object(_.a)(e,3),r=n[0],o=n[1],l=n[2];return"".concat(l,"-").concat(r.padStart(2,"0"),"-").concat(o.padStart(2,"0"))},loadData:function(){var t=this;return Object(C.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formDialog=!1,n={startDate:t.date,endDate:t.date2,userId:t.userId},e.next=4,t.$axios.get("api/order/findAllByDate",{params:{date:n}}).then((function(e){t.isloading=!0,t.entries=e.data})).catch((function(t){console.log("Error ",t)}));case 4:t.isloading=!1;case 5:case"end":return e.stop()}}),e)})))()}})},A=n(32),component=Object(A.a)(L,(function(){var t=this,e=t._self._c;return e("div",[e(h.a,{attrs:{"max-width":"1024"},model:{value:t.formDialog,callback:function(e){t.formDialog=e},expression:"formDialog"}},[e("order-form",{key:t.componentKey,attrs:{"is-create":t.isCreate,"record-id":t.entrySelectedId},on:{"close-dialog":t.handleEvent,"reload-data":t.loadData}})],1),t._v(" "),e(h.a,{attrs:{"max-width":"auto"},model:{value:t.statusFormDialog,callback:function(e){t.statusFormDialog=e},expression:"statusFormDialog"}},[e("order-status-form",{key:t.orderStatusComponentKey,attrs:{"is-create":t.isCreate},on:{"close-dialog":function(e){t.statusFormDialog=!1},"reload-data":t.loadData}})],1),t._v(" "),e(h.a,{key:t.dialogKey,attrs:{"hide-overlay":"","max-width":"700"},model:{value:t.guidelineDialog,callback:function(e){t.guidelineDialog=e},expression:"guidelineDialog"}},[e("youtube-player",{attrs:{"youtube-link":t.watchingLink},on:{"close-dialog":function(e){t.guidelineDialog=!1}}})],1),t._v(" "),e(c.a,{staticClass:"pa-5",attrs:{color:"primary",label:"","text-color":"white"}},[e(y.a,{attrs:{start:""}},[t._v("mdi mdi-lifebuoy")]),t._v(" "),e("h3",[t._v("ສາທິດການນຳໃຊ້ລະບົບ")])],1),t._v(" "),e(h.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(o.a,[e(l.d,[e(k.a,{attrs:{row:"",wrap:""}},[e(d.a,{attrs:{cols:"6"}},[e(D.a,{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(x.a,t._g(t._b({attrs:{label:"ຈາກວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),e(D.a,{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(x.a,t._g(t._b({attrs:{label:"ຫາວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date2=t.parseDate(t.dateFormatted2)}},model:{value:t.dateFormatted2,callback:function(e){t.dateFormatted2=e},expression:"dateFormatted2"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(x.a,{attrs:{"append-icon":"mdi-magnify",label:"ຊອກຫາ","single-line":"","hide-detailsx":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),e(w.a,[e(d.a,{attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.createRecord}},[e("span",{staticClass:"mdi mdi-plus"}),t._v("Create\n              ")])],1),t._v(" "),e(O.a),t._v(" "),e(d.a,{staticClass:"text-right",attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.loadData}},[e("span",{staticClass:"mdi mdi-cloud-download"}),t._v("\n                ດຶງລາຍງານ\n              ")])],1)],1)],1),t._v(" "),e(d.a,{staticClass:"text-center",attrs:{cols:"4"}},[e(x.a,{attrs:{disabled:""},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticStyle:{color:"black","font-weight":"bolder"}},[t._v(t._s("ອໍເດີທັງໝົດ: ".concat(t.filterOrders.length," ລາຍການ")))])]},proxy:!0}])})],1)],1)],1),t._v(" "),e(v.a),t._v(" "),e(l.c),t._v(" "),e(f.a,{attrs:{headers:t.headers,search:t.search,items:t.filterOrders},scopedSlots:t._u([{key:"item.bookingDate",fn:function(n){var r=n.item;return[t._v("\n        "+t._s(r.bookingDate)+"\n        "),t._v(" "),e("h6",{style:{color:t.countDay(r.bookingDate)>30?"red":"green"}},[t._v("\n          "+t._s(t.countDay(r.bookingDate))+"\n        ")])]}},{key:"item.edit",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){t.editItem(o),t.isedit=!0}}},[e("i",{staticClass:"fa-regular fa-pen-to-square"})])]}},{key:"item.function",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){t.findOrderById(o.id),t.isedit=!0}}},[e("i",{staticClass:"fa fa-cart-flatbed"})])]}},{key:"item.notify",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.whatsappLink(o)}}},[e("a",{attrs:{href:t.whatsappContactLink,target:"_blank"}},[e("span",{staticClass:"mdi mdi-whatsapp"})])]),t._v("\n        "+t._s(o.client.telephone)+"\n      ")]}},{key:"item.link",fn:function(t){var n=t.item;return[e("a",{attrs:{href:n.link,target:"_blank"}},[e("i",{staticClass:"fa-solid fa-link"})])]}},{key:"item.status",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""}},[t._v("\n          "+t._s(t.localStatus.find((function(t){return t.code==o.status})).name)+"\n        ")])]}}],null,!0)})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{OrderForm:n(878).default,OrderStatusForm:n(879).default,YoutubePlayer:n(801).default,LoadingIndicator:n(248).default})},801:function(t,e,n){"use strict";n.r(e);var r=n(316),o=n(313),l=n(18),c=n(777),d=(n(36),{props:{youtubeLink:{type:String,require:!0}}}),f=n(32),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(o.a,[e(l.c,{staticClass:"text-center"},[e("youtube",{attrs:{"video-id":t.youtubeLink}})],1),t._v(" "),e(l.a,[e(c.a),t._v(" "),e(r.a,{staticClass:"warning",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:function(e){return t.$emit("close-dialog")}}},[t._v("\n                Close\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},813:function(t,e,n){n(13)({target:"Math",stat:!0},{sign:n(445)})}}]);