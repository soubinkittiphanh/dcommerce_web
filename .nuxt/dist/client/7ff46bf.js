(window.webpackJsonp=window.webpackJsonp||[]).push([[226,222],{1263:function(t,e,n){"use strict";n.r(e);var r=n(33),o=n(20),c=(n(30),n(44),n(5),n(8),n(333),n(92),n(347));e.default={data:function(){return{sharedMessage:"Hello from mixin!"}},methods:{exportMinistryReportToExcel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.ministrySummaryReport.length){e.next=4;break}return t.$toast.warning("No ministry data to export"),e.abrupt("return");case 4:n=t.createExcelWorkbook(),r=t.createMinistryWorksheet(),c.utils.book_append_sheet(n,r,"Ministry Report"),o="Ministry_Report_".concat(t.formatDateForFilename(),".xlsx"),c.writeFile(n,o),t.$toast.success("Ministry report exported successfully"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$toast.error("Failed to export ministry report");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},exportBankAccountReportToExcel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.bankAccountSummaryReport.length){e.next=4;break}return t.$toast.warning("No bank account data to export"),e.abrupt("return");case 4:n=t.createExcelWorkbook(),r=t.createBankAccountWorksheet(),c.utils.book_append_sheet(n,r,"Bank Account Report"),o="Bank_Account_Report_".concat(t.formatDateForFilename(),".xlsx"),c.writeFile(n,o),t.$toast.success("Bank account report exported successfully"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$toast.error("Failed to export bank account report");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},exportChartAccountReportToExcel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.chartAccountSummaryReport.length){e.next=4;break}return t.$toast.warning("No chart account data to export"),e.abrupt("return");case 4:n=t.createExcelWorkbook(),r=t.createChartAccountWorksheet(),c.utils.book_append_sheet(n,r,"Chart Account Report"),o="Chart_Account_Report_".concat(t.formatDateForFilename(),".xlsx"),c.writeFile(n,o),t.$toast.success("Chart account report exported successfully"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$toast.error("Failed to export chart account report");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},exportAllReportsToExcel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,d,m,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.ministrySummaryReport&&t.ministrySummaryReport.length>0,r=t.bankAccountSummaryReport&&t.bankAccountSummaryReport.length>0,o=t.chartAccountSummaryReport&&t.chartAccountSummaryReport.length>0,n||r||o){e.next=7;break}return t.$toast.warning("No data available to export"),e.abrupt("return");case 7:l=t.createExcelWorkbook(),n&&(d=t.createMinistryWorksheet(),c.utils.book_append_sheet(l,d,"Ministry Report")),r&&(m=t.createBankAccountWorksheet(),c.utils.book_append_sheet(l,m,"Bank Account Report")),o&&(v=t.createChartAccountWorksheet(),c.utils.book_append_sheet(l,v,"Chart Account Report")),h="Financial_Reports_".concat(t.formatDateForFilename(),".xlsx"),c.writeFile(l,h),t.$toast.success("All reports exported successfully"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$toast.error("Failed to export reports");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))()},createExcelWorkbook:function(){return c.utils.book_new()},createMinistryWorksheet:function(){var t,e=this,n=["#","Ministry Code","Ministry Name","Settlement Count"].concat(Object(r.a)(this.currencyList),["Total (LAK)"]),data=this.ministrySummaryReport.map((function(t,n){var r=[n+1,t.ministryCode,t.ministryName,t.settlementCount];return e.currencyList.forEach((function(e){var n;r.push((null===(n=t.amounts)||void 0===n?void 0:n[e])||0)})),r.push(t.totalLakEquivalent||0),r})),o=["","","TOTAL",this.ministrySummaryReport.reduce((function(t,e){return t+e.settlementCount}),0)];this.currencyList.forEach((function(t){var n,r;o.push((null===(n=e.ministryTotals)||void 0===n||null===(r=n.currencyTotals)||void 0===r?void 0:r[t])||0)})),o.push((null===(t=this.ministryTotals)||void 0===t?void 0:t.totalLakEquivalent)||0);var l=[n].concat(Object(r.a)(data),[o]),d=c.utils.aoa_to_sheet(l);return this.addWorksheetMetadata(d,"Ministry Financial Report"),d},createBankAccountWorksheet:function(){var t,e=this,n=["#","Account Number","Account Name","Bank Name","Account Type","Settlement Count"].concat(Object(r.a)(this.currencyList),["Total (LAK)"]),data=this.bankAccountSummaryReport.map((function(t,n){var r=[n+1,t.accountNumber,t.accountName,t.bankName,t.accountType,t.settlementCount];return e.currencyList.forEach((function(e){var n;r.push((null===(n=t.amounts)||void 0===n?void 0:n[e])||0)})),r.push(t.totalLakEquivalent||0),r})),o=["","","","","TOTAL",this.bankAccountSummaryReport.reduce((function(t,b){return t+b.settlementCount}),0)];this.currencyList.forEach((function(t){var n,r;o.push((null===(n=e.bankAccountTotals)||void 0===n||null===(r=n.currencyTotals)||void 0===r?void 0:r[t])||0)})),o.push((null===(t=this.bankAccountTotals)||void 0===t?void 0:t.totalLakEquivalent)||0);var l=[n].concat(Object(r.a)(data),[o]),d=c.utils.aoa_to_sheet(l);return this.addWorksheetMetadata(d,"Bank Account Financial Report"),d},createChartAccountWorksheet:function(){var t,e=this,n=["#","Account Number","Account Name","Settlement Count"].concat(Object(r.a)(this.currencyList),["Total (LAK)"]),data=this.chartAccountSummaryReport.map((function(t,n){var r=[n+1,t.accountNumber,t.accountName,t.settlementCount];return e.currencyList.forEach((function(e){var n;r.push((null===(n=t.amounts)||void 0===n?void 0:n[e])||0)})),r.push(t.totalLakEquivalent||0),r})),o=["","","TOTAL",this.chartAccountSummaryReport.reduce((function(t,e){return t+e.settlementCount}),0)];this.currencyList.forEach((function(t){var n,r;o.push((null===(n=e.chartAccountTotals)||void 0===n||null===(r=n.currencyTotals)||void 0===r?void 0:r[t])||0)})),o.push((null===(t=this.chartAccountTotals)||void 0===t?void 0:t.totalLakEquivalent)||0);var l=[n].concat(Object(r.a)(data),[o]),d=c.utils.aoa_to_sheet(l);return this.addWorksheetMetadata(d,"Chart Account Financial Report"),d},addWorksheetMetadata:function(t,title){var e,n,r=[[title],["Report Period: ".concat((null===(e=this.dateRange)||void 0===e?void 0:e.start)||"N/A"," to ").concat((null===(n=this.dateRange)||void 0===n?void 0:n.end)||"N/A")],["Generated: ".concat((new Date).toLocaleString())],[""]];c.utils.sheet_add_aoa(t,r,{origin:"A1"});var o=c.utils.decode_range(t["!ref"]);o.e.r+=r.length,t["!ref"]=c.utils.encode_range(o)},formatDateForFilename:function(){var t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0");return"".concat(e).concat(n).concat(r,"_").concat(o).concat(c)}}}},1264:function(t,e,n){var content=n(1579);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("003e32c6",content,!0,{sourceMap:!1})},1578:function(t,e,n){"use strict";n(1264)},1579:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,'.banking-primary--text[data-v-2116f6e9]{color:#01532b!important}.banking-success--text[data-v-2116f6e9]{color:#059669!important}.summary-card[data-v-2116f6e9]{border-left:4px solid transparent;transition:all .3s ease}.summary-card[data-v-2116f6e9]:hover{box-shadow:0 8px 25px rgba(1,83,43,.15);transform:translateY(-4px)}.report-card[data-v-2116f6e9]{border-left:4px solid #01532b}.report-header[data-v-2116f6e9]{background:linear-gradient(90deg,#f8f9fa,#e9ecef);font-weight:600}.banking-table[data-v-2116f6e9]{font-family:"Roboto",sans-serif}.banking-table-header[data-v-2116f6e9]{background:linear-gradient(135deg,#01532b,#0d4f3c)!important}.banking-table-header th[data-v-2116f6e9]{background:transparent!important;border-right:1px solid hsla(0,0%,100%,.2)!important;color:#fff!important;font-size:.875rem!important;font-weight:700!important;padding:12px 8px!important}.banking-table tbody td[data-v-2116f6e9]{border-bottom:1px solid #e0e0e0!important;border-right:1px solid #f5f5f5!important;font-size:.8rem!important;padding:8px!important}.banking-table tbody tr[data-v-2116f6e9]:hover{background-color:rgba(1,83,43,.05)!important}.banking-row-even[data-v-2116f6e9]{background-color:#f8f9fa!important}.banking-row-special[data-v-2116f6e9]{background-color:#fef3c7!important}.banking-table-footer[data-v-2116f6e9]{background:linear-gradient(90deg,rgba(1,83,43,.1),rgba(1,83,43,.15))!important;border-top:2px solid #01532b!important}.banking-table-footer td[data-v-2116f6e9]{background:transparent!important;border-top:2px solid #01532b!important;font-weight:700!important}.data-table-card[data-v-2116f6e9]{border-left:4px solid #01532b}.data-table-header[data-v-2116f6e9]{background:linear-gradient(90deg,#f8f9fa,#e9ecef);font-weight:600}.banking-data-table[data-v-2116f6e9]{background:#fff}.date-chip[data-v-2116f6e9]{font-family:"Roboto Mono",monospace;font-size:.75rem}.banking-divider[data-v-2116f6e9]{border-color:#01532b!important;border-width:2px!important}.dialog-header[data-v-2116f6e9]{background:linear-gradient(135deg,#01532b,#0d4f3c)!important;color:#fff!important;font-weight:600}.sortable[data-v-2116f6e9]{cursor:pointer;transition:background-color .2s ease;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sortable[data-v-2116f6e9]:hover{background-color:hsla(0,0%,100%,.1)!important}.v-text-field[data-v-2116f6e9] .v-input__control .v-input__slot:before{border-color:#01532b!important}.v-text-field[data-v-2116f6e9] .v-label{color:#01532b!important}.v-select[data-v-2116f6e9] .v-input__control .v-input__slot:before{border-color:#01532b!important}.v-select[data-v-2116f6e9] .v-label{color:#01532b!important}.v-textarea[data-v-2116f6e9] .v-input__control .v-input__slot:before{border-color:#01532b!important}.v-textarea[data-v-2116f6e9] .v-label{color:#01532b!important}@media (max-width:768px){.banking-table[data-v-2116f6e9]{font-size:.75rem}.banking-table tbody td[data-v-2116f6e9],.banking-table-header th[data-v-2116f6e9]{font-size:.7rem!important;padding:6px 4px!important}.report-card[data-v-2116f6e9],.summary-card[data-v-2116f6e9]{margin-bottom:16px}}',""]),r.locals={},t.exports=r},1769:function(t,e,n){"use strict";n.r(e);var r=n(310),o=n(316),c=n(313),l=n(18),d=n(317),m=n(781),v=n(776),h=n(790),f=n(755),_=n(312),x=n(782),y=n(167),k=n(199),C=n(28),A=n(168),w=n(251),R=n(780),S=n(65),N=n(433),T=n(778),O=n(113),E=n(812),L=n(1222),M=(n(5),n(20)),B=(n(54),n(53),n(30),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(822),n(823),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(8),n(250),n(69),n(62),n(102),n(44),n(92),{name:"SettlementDashboard",mixins:[n(1263).default],data:function(){return{loading:!1,saving:!1,loadingMinistryReport:!1,loadingBankAccountReport:!1,loadingChartAccountReport:!1,dialog:!1,formValid:!1,dialogMode:"create",currentSettlement:{},settlements:[],stats:{totalCount:0,totalAmount:0,thisMonth:0,pending:0},ministrySummaryReport:[],ministryTotals:{},bankAccountSummaryReport:[],bankAccountTotals:{totalLakEquivalent:0,currencyTotals:{}},chartAccountSummaryReport:[],chartAccountTotals:{totalLakEquivalent:0,currencyTotals:{}},currencyList:[],settlementForm:{bookingDate:"",amount:"",method:"",exchangeRate:1,notes:"",userId:null},rules:{required:function(t){return!!t||"This field is required"},positiveNumber:function(t){return t&&t>0||"Must be greater than 0"}},tableOptions:{page:1,itemsPerPage:10,sortBy:["id"],sortDesc:[!0]},pagination:{totalItems:0},tableHeaders:[{text:"ID",value:"id",sortable:!0,width:"80px"},{text:"Date",value:"bookingDate",sortable:!0,width:"120px"},{text:"Amount",value:"amount",sortable:!0,width:"150px"},{text:"Method",value:"method",sortable:!1,width:"140px"},{text:"Proceeder",value:"proceeder",sortable:!1,width:"180px"},{text:"Money Advance",value:"moneyAdvance",sortable:!1,width:"140px"},{text:"Status",value:"status",sortable:!1,width:"120px"},{text:"Actions",value:"actions",sortable:!1,width:"120px"}],methodSelectOptions:[{text:"Cash Payment",value:"cash"},{text:"Bank Transfer",value:"bank_transfer"},{text:"Salary Deduction",value:"deduction"}]}},computed:{dialogTitle:function(){return{create:"Create New Settlement",edit:"Edit Settlement",view:"Settlement Details"}[this.dialogMode]||"Settlement"}},mounted:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:case"end":return e.stop()}}),e)})))()},methods:{loadInitialData:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.fetchSettlements(),t.fetchStats(),t.fetchChartAccountReport(),t.fetchMinistryReport(),t.fetchBankAccountReport()]);case 2:case"end":return e.stop()}}),e)})))()},refreshData:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:t.$toast.success("Data refreshed successfully");case 3:case"end":return e.stop()}}),e)})))()},fetchSettlements:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,c={page:t.tableOptions.page||1,limit:t.tableOptions.itemsPerPage||10,sortBy:(null===(n=t.tableOptions.sortBy)||void 0===n?void 0:n[0])||"id",sortOrder:null!==(r=t.tableOptions.sortDesc)&&void 0!==r&&r[0]?"desc":"asc"},e.next=5,t.$axios.get("/api/settlements",{params:c});case 5:l=e.sent,t.settlements=l.data.data.settlements||[],t.pagination.totalItems=(null===(o=l.data.data.pagination)||void 0===o?void 0:o.totalItems)||0,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Error fetching settlements:",e.t0),t.$toast.error("Failed to load settlements");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})))()},fetchStats:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/settlements/stats");case 3:n=e.sent,t.stats=n.data.data||{},e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching stats:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},fetchChartAccountReport:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,v,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.loadingChartAccountReport=!0,n=[],r=1,o=1;case 5:return e.next=7,t.$axios.get("/api/settlements",{params:{isPosted:!0,include:["chartAccount","currency"],page:r,limit:50}});case 7:d=e.sent,m=(null===(c=d.data.data)||void 0===c?void 0:c.settlements)||[],n=n.concat(m),(v=null===(l=d.data.data)||void 0===l?void 0:l.pagination)&&(o=v.totalPages),r++;case 13:if(r<=o){e.next=5;break}case 14:h=new Map,f=new Set,n.forEach((function(t){var e,n,r,o,c=t.chartAccount;c?(n=c.id,r=c.accountNumber,o=c.accountName||c.accountLLName):(n="NO_CHART_ACCOUNT",r="N/A",o="No Chart Account Assigned");var l=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",d=parseFloat(t.exchangeRate)||1,m=parseFloat(t.amount)||0,v=m*d;f.add(l),h.has(n)||h.set(n,{chartAccountId:n,accountNumber:r,accountName:o,settlementCount:0,totalLakEquivalent:0,amounts:{}});var _=h.get(n);_.settlementCount+=1,_.totalLakEquivalent+=v,_.amounts[l]=(_.amounts[l]||0)+m})),t.currencyList=Array.from(f).sort(),t.chartAccountSummaryReport=Array.from(h.values()).sort((function(a,b){return"NO_CHART_ACCOUNT"===a.chartAccountId?1:"NO_CHART_ACCOUNT"===b.chartAccountId?-1:a.accountNumber&&b.accountNumber?String(a.accountNumber).localeCompare(String(b.accountNumber)):a.accountName.localeCompare(b.accountName)})),t.chartAccountTotals={totalLakEquivalent:t.chartAccountSummaryReport.reduce((function(t,e){return t+e.totalLakEquivalent}),0),currencyTotals:{}},t.currencyList.forEach((function(e){t.chartAccountTotals.currencyTotals[e]=t.chartAccountSummaryReport.reduce((function(t,n){return t+(n.amounts[e]||0)}),0)})),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),console.error("Error fetching chart account report:",e.t0),t.$toast.error("Failed to fetch chart account report.");case 27:return e.prev=27,t.loadingChartAccountReport=!1,e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,23,27,30]])})))()},fetchMinistryReport:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,v,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.loadingMinistryReport=!0,n=[],r=1,o=1;case 5:return e.next=7,t.$axios.get("/api/settlements",{params:{isPosted:!0,include:["ministry","currency"],page:r,limit:50}});case 7:d=e.sent,m=(null===(c=d.data.data)||void 0===c?void 0:c.settlements)||[],n=n.concat(m),(v=null===(l=d.data.data)||void 0===l?void 0:l.pagination)&&(o=v.totalPages),r++;case 13:if(r<=o){e.next=5;break}case 14:h=new Map,f=new Set,n.forEach((function(t){var e,n,r,o,c=t.ministry;c?(n=c.id,r=c.ministryName,o=c.ministryCode):(n="NO_MINISTRY",r="No Ministry Assigned",o="N/A");var l=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",d=parseFloat(t.exchangeRate)||1,m=parseFloat(t.amount)||0,v=m*d;f.add(l),h.has(n)||h.set(n,{ministryId:n,ministryName:r,ministryCode:o,settlementCount:0,totalLakEquivalent:0,amounts:{}});var _=h.get(n);_.settlementCount+=1,_.totalLakEquivalent+=v,_.amounts[l]=(_.amounts[l]||0)+m})),t.currencyList=Array.from(f).sort(),t.ministrySummaryReport=Array.from(h.values()).sort((function(a,b){return"NO_MINISTRY"===a.ministryId?1:"NO_MINISTRY"===b.ministryId?-1:a.ministryName.localeCompare(b.ministryName)})),t.ministryTotals={totalLakEquivalent:t.ministrySummaryReport.reduce((function(t,e){return t+e.totalLakEquivalent}),0),currencyTotals:{}},t.currencyList.forEach((function(e){t.ministryTotals.currencyTotals[e]=t.ministrySummaryReport.reduce((function(t,n){return t+(n.amounts[e]||0)}),0)})),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),console.error("Error fetching ministry report:",e.t0),t.$toast.error("Failed to fetch ministry report.");case 27:return e.prev=27,t.loadingMinistryReport=!1,e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,23,27,30]])})))()},fetchBankAccountReport:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,v,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.loadingBankAccountReport=!0,n=[],r=1,o=1;case 5:return e.next=7,t.$axios.get("/api/settlements",{params:{isPosted:!0,include:["bankAccount","currency"],page:r,limit:50}});case 7:d=e.sent,m=(null===(c=d.data.data)||void 0===c?void 0:c.settlements)||[],n=n.concat(m),(v=null===(l=d.data.data)||void 0===l?void 0:l.pagination)&&(o=v.totalPages),r++;case 13:if(r<=o){e.next=5;break}case 14:h=new Map,f=new Set,n.forEach((function(t){var e,n,r,o,c,l,d=t.bankAccount;d?(n=d.id,r=d.accountNumber,o=d.accountName,c=d.bankName,l=d.accountType):(n="NO_BANK_ACCOUNT",r="N/A",o="Cash Transaction",c="No Bank",l="Cash");var m=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",v=parseFloat(t.exchangeRate)||1,_=parseFloat(t.amount)||0,x=_*v;f.add(m),h.has(n)||h.set(n,{bankAccountId:n,accountNumber:r,accountName:o,bankName:c,accountType:l,settlementCount:0,totalLakEquivalent:0,amounts:{}});var y=h.get(n);y.settlementCount+=1,y.totalLakEquivalent+=x,y.amounts[m]=(y.amounts[m]||0)+_})),t.currencyList=Array.from(f).sort(),t.bankAccountSummaryReport=Array.from(h.values()).sort((function(a,b){if("NO_BANK_ACCOUNT"===a.bankAccountId)return 1;if("NO_BANK_ACCOUNT"===b.bankAccountId)return-1;var t=a.bankName.localeCompare(b.bankName);return 0!==t?t:a.accountName.localeCompare(b.accountName)})),t.bankAccountTotals={totalLakEquivalent:t.bankAccountSummaryReport.reduce((function(t,b){return t+b.totalLakEquivalent}),0),currencyTotals:{}},t.currencyList.forEach((function(e){t.bankAccountTotals.currencyTotals[e]=t.bankAccountSummaryReport.reduce((function(t,b){return t+(b.amounts[e]||0)}),0)})),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),console.error("Error fetching bank account report:",e.t0),t.$toast.error("Failed to fetch bank account report.");case 27:return e.prev=27,t.loadingBankAccountReport=!1,e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,23,27,30]])})))()},onTableOptionsUpdate:function(t){this.tableOptions=t,this.fetchSettlements()},changeSort:function(t){this.tableOptions.sortBy[0]===t?this.tableOptions.sortDesc[0]=!this.tableOptions.sortDesc[0]:(this.tableOptions.sortBy=[t],this.tableOptions.sortDesc=[!1]),this.fetchSettlements()},getSortIcon:function(t){return this.tableOptions.sortBy[0]!==t?"mdi-sort":this.tableOptions.sortDesc[0]?"mdi-sort-descending":"mdi-sort-ascending"},viewSettlement:function(t){this.dialogMode="view",this.currentSettlement=t,this.dialog=!0},closeDialog:function(){this.dialog=!1,this.dialogMode="create",this.currentSettlement={},this.$refs.form&&this.$refs.form.reset()},saveSettlement:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.form.validate()){e.next=2;break}return e.abrupt("return");case 2:if(t.saving=!0,e.prev=3,"create"!==t.dialogMode){e.next=10;break}return e.next=7,t.$axios.post("/api/settlements",t.settlementForm);case 7:t.$toast.success("Settlement created successfully"),e.next=13;break;case 10:return e.next=12,t.$axios.put("/api/settlements/".concat(t.settlementForm.id),t.settlementForm);case 12:t.$toast.success("Settlement updated successfully");case 13:return t.closeDialog(),e.next=16,t.loadInitialData();case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error saving settlement:",e.t0),t.$toast.error((null===(n=e.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to save settlement");case 22:return e.prev=22,t.saving=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[3,18,22,25]])})))()},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"},formatAmount:function(t){return t?parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatMethod:function(t){return{cash:"Cash Payment",bank_transfer:"Bank Transfer",deduction:"Salary Deduction"}[t]||t},getMethodColor:function(t){return{cash:"#01532B",bank_transfer:"#059669",deduction:"#F59E0B"}[t]||"grey"},getMethodIcon:function(t){return{cash:"mdi-cash",bank_transfer:"mdi-bank",deduction:"mdi-minus-circle"}[t]||"mdi-help-circle"},getStatusColor:function(t){return{approved:"#059669",settled:"#01532B",pending:"#F59E0B",rejected:"#DC2626"}[t]||"grey"},getStatusIcon:function(t){return{approved:"mdi-check-circle",settled:"mdi-check-all",pending:"mdi-clock-outline",rejected:"mdi-close-circle"}[t]||"mdi-help-circle"},getInitials:function(t){return t?t.split(" ").map((function(t){return t[0]})).join("").toUpperCase().slice(0,2):"?"},getCurrencySymbol:function(t){return{USD:"$",LAK:"₭",THB:"฿",BTH:"฿",EUR:"€",CNY:"¥",VND:"₫"}[t]||"₭"}}}),F=B,I=(n(1578),n(32)),component=Object(I.a)(F,(function(){var t,e=this,n=e._self._c;return n(v.a,{staticClass:"pa-4",attrs:{fluid:""}},[n(R.a,{staticClass:"mb-4"},[n(m.a,{attrs:{cols:"12",md:"8"}},[n("h1",{staticClass:"text-h4 font-weight-bold banking-primary--text"},[e._v("\n        ກະດານ ລາຍຮັບ\n      ")]),e._v(" "),n("p",{staticClass:"text-subtitle-1 grey--text"},[e._v("\n        Manage and monitor all settlement transactions\n      ")])]),e._v(" "),n(m.a,{staticClass:"text-right",attrs:{cols:"12",md:"4"}},[n(o.a,{attrs:{color:"#01532B",large:"",outlined:"",loading:e.loading},on:{click:e.refreshData}},[n(y.a,{attrs:{left:""}},[e._v("mdi-refresh")]),e._v("\n        Refresh\n      ")],1)],1)],1),e._v(" "),n(R.a,{staticClass:"mb-6"},[n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(c.a,{staticClass:"text-center summary-card",attrs:{color:"#01532B",dark:"",elevation:"3"}},[n(l.c,{staticClass:"pb-2"},[n(y.a,{staticClass:"mb-2",attrs:{size:"40"}},[e._v("mdi-file-document-multiple")]),e._v(" "),n("div",{staticClass:"text-h4 font-weight-bold"},[e._v("\n            "+e._s(e.stats.totalCount||0)+"\n          ")]),e._v(" "),n("div",{staticClass:"text-subtitle-1"},[e._v("Total Settlements")])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(c.a,{staticClass:"text-center summary-card",attrs:{color:"#059669",dark:"",elevation:"3"}},[n(l.c,{staticClass:"pb-2"},[n(y.a,{staticClass:"mb-2",attrs:{size:"40"}},[e._v("mdi-currency-usd")]),e._v(" "),n("div",{staticClass:"text-h5 font-weight-bold"},[e._v("\n            ₭"+e._s(e.formatAmount(e.stats.totalAmount)||"0.00")+"\n          ")]),e._v(" "),n("div",{staticClass:"text-subtitle-1"},[e._v("Total Amount")])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(c.a,{staticClass:"text-center summary-card",attrs:{color:"#0D7C66",dark:"",elevation:"3"}},[n(l.c,{staticClass:"pb-2"},[n(y.a,{staticClass:"mb-2",attrs:{size:"40"}},[e._v("mdi-calendar-month")]),e._v(" "),n("div",{staticClass:"text-h4 font-weight-bold"},[e._v("\n            "+e._s(e.stats.thisMonth||0)+"\n          ")]),e._v(" "),n("div",{staticClass:"text-subtitle-1"},[e._v("This Month")])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(c.a,{staticClass:"text-center summary-card",attrs:{color:"#F59E0B",dark:"",elevation:"3"}},[n(l.c,{staticClass:"pb-2"},[n(y.a,{staticClass:"mb-2",attrs:{size:"40"}},[e._v("mdi-clock-outline")]),e._v(" "),n("div",{staticClass:"text-h4 font-weight-bold"},[e._v(e._s(e.stats.pending||0))]),e._v(" "),n("div",{staticClass:"text-subtitle-1"},[e._v("Pending")])],1)],1)],1)],1),e._v(" "),n(R.a,{staticClass:"mb-4"},[n(m.a,{attrs:{cols:"12"}},[n(c.a,{staticClass:"rounded-xl report-card",attrs:{elevation:"2"}},[n(l.d,{staticClass:"banking-primary--text py-2 px-4 d-flex align-center report-header"},[n(y.a,{staticClass:"mr-2",attrs:{color:"#01532B"}},[e._v("mdi-office-building")]),e._v(" "),n("span",{staticClass:"text-subtitle-1 font-weight-medium"},[e._v("\n            ລາຍງານ ຕາມກົມ\n          ")]),e._v(" "),n(T.a),e._v(" "),n(o.a,{staticClass:"mr-2",attrs:{color:"#059669",small:"",outlined:"",disabled:!e.ministrySummaryReport.length},on:{click:e.exportMinistryReportToExcel}},[n(y.a,{attrs:{small:"",left:""}},[e._v("mdi-file-excel")]),e._v("\n            Export Excel\n          ")],1),e._v(" "),n(o.a,{attrs:{icon:"",small:"",loading:e.loadingMinistryReport,color:"#01532B"},on:{click:e.fetchMinistryReport}},[n(y.a,{attrs:{small:""}},[e._v("mdi-refresh")])],1)],1),e._v(" "),n(_.a,{staticClass:"banking-divider"}),e._v(" "),n(l.c,{staticClass:"pa-0"},[e.loadingMinistryReport?n("div",{staticClass:"text-center py-6"},[n(w.a,{attrs:{indeterminate:"",color:"#01532B"}}),e._v(" "),n("div",{staticClass:"mt-2 text-caption"},[e._v("Loading ministry report...")])],1):e.ministrySummaryReport.length?n(N.a,{staticClass:"banking-table",attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){var t;return[n("thead",[n("tr",{staticClass:"banking-table-header"},[n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("#")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Ministry Code\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Ministry Name\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Count\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){return n("th",{key:"head-"+t,staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    "+e._s(t)+"\n                  ")])})),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Total (LAK)\n                  ")])],2)]),e._v(" "),n("tbody",[e._l(e.ministrySummaryReport,(function(t,r){return n("tr",{key:t.ministryId,class:{"banking-row-even":r%2==0,"banking-row-special":"NO_MINISTRY"===t.ministryId}},[n("td",{staticClass:"text-caption text-center"},[e._v(e._s(r+1))]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text":"NO_MINISTRY"===t.ministryId}},[e._v("\n                    "+e._s(t.ministryCode)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text font-italic":"NO_MINISTRY"===t.ministryId}},[e._v("\n                    "+e._s(t.ministryName)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(t.settlementCount)+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(r){var o;return n("td",{key:"amt-"+r,staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(e.formatAmount((null===(o=t.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold banking-success--text"},[e._v("\n                    "+e._s(e.formatAmount(t.totalLakEquivalent||0))+"\n                  ")])],2)})),e._v(" "),n("tr",{staticClass:"banking-table-footer"},[n("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"3"}},[e._v("\n                    ລວມ\n                  ")]),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.ministrySummaryReport.reduce((function(t,e){return t+e.settlementCount}),0))+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){var r,o;return n("td",{key:"sum-"+t,staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.formatAmount((null===(r=e.ministryTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[t])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2 banking-primary--text"},[e._v("\n                    "+e._s(e.formatAmount((null===(t=e.ministryTotals)||void 0===t?void 0:t.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):n("div",{staticClass:"text-center py-6"},[n(y.a,{attrs:{size:"48",color:"grey lighten-2"}},[e._v("mdi-information-outline")]),e._v(" "),n("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[e._v("\n              No ministry data available\n            ")])],1)],1)],1)],1)],1),e._v(" "),n(R.a,{staticClass:"mb-4"},[n(m.a,{attrs:{cols:"12"}},[n(c.a,{staticClass:"rounded-xl report-card",attrs:{elevation:"2"}},[n(l.d,{staticClass:"banking-primary--text py-2 px-4 d-flex align-center report-header"},[n(y.a,{staticClass:"mr-2",attrs:{color:"#01532B"}},[e._v("mdi-bank")]),e._v(" "),n("span",{staticClass:"text-subtitle-1 font-weight-medium"},[e._v("\n            ລາຍງານ ຕາມບັນຊີທະນາຄານ\n          ")]),e._v(" "),n(T.a),e._v(" "),n(o.a,{staticClass:"mr-2",attrs:{color:"#059669",small:"",outlined:"",disabled:!e.bankAccountSummaryReport.length},on:{click:e.exportBankAccountReportToExcel}},[n(y.a,{attrs:{small:"",left:""}},[e._v("mdi-file-excel")]),e._v("\n            Export Excel\n          ")],1),e._v(" "),n(o.a,{attrs:{icon:"",small:"",loading:e.loadingBankAccountReport,color:"#01532B"},on:{click:e.fetchBankAccountReport}},[n(y.a,{attrs:{small:""}},[e._v("mdi-refresh")])],1)],1),e._v(" "),n(_.a,{staticClass:"banking-divider"}),e._v(" "),n(l.c,{staticClass:"pa-0"},[e.loadingBankAccountReport?n("div",{staticClass:"text-center py-6"},[n(w.a,{attrs:{indeterminate:"",color:"#01532B"}}),e._v(" "),n("div",{staticClass:"mt-2 text-caption"},[e._v("\n              Loading bank account report...\n            ")])],1):e.bankAccountSummaryReport.length?n(N.a,{staticClass:"banking-table",attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){var t;return[n("thead",[n("tr",{staticClass:"banking-table-header"},[n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("#")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Account Number\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Account Name\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Bank Name\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Type\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Count\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){return n("th",{key:"head-"+t,staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    "+e._s(t)+"\n                  ")])})),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Total (LAK)\n                  ")])],2)]),e._v(" "),n("tbody",[e._l(e.bankAccountSummaryReport,(function(t,r){return n("tr",{key:t.bankAccountId,class:{"banking-row-even":r%2==0,"banking-row-special":"NO_BANK_ACCOUNT"===t.bankAccountId}},[n("td",{staticClass:"text-caption text-center"},[e._v(e._s(r+1))]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text":"NO_BANK_ACCOUNT"===t.bankAccountId}},[e._v("\n                    "+e._s(t.accountNumber)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text font-italic":"NO_BANK_ACCOUNT"===t.bankAccountId}},[e._v("\n                    "+e._s(t.accountName)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text font-italic":"NO_BANK_ACCOUNT"===t.bankAccountId}},[e._v("\n                    "+e._s(t.bankName)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2"},[n(d.a,{attrs:{"x-small":"",color:"Cash"===t.accountType?"#F59E0B":"#01532B","text-color":"white"}},[e._v("\n                      "+e._s(t.accountType)+"\n                    ")])],1),e._v(" "),n("td",{staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(t.settlementCount)+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(r){var o;return n("td",{key:"amt-"+r,staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(e.formatAmount((null===(o=t.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold banking-success--text"},[e._v("\n                    "+e._s(e.formatAmount(t.totalLakEquivalent||0))+"\n                  ")])],2)})),e._v(" "),n("tr",{staticClass:"banking-table-footer"},[n("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"5"}},[e._v("\n                    ລວມ\n                  ")]),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.bankAccountSummaryReport.reduce((function(t,b){return t+b.settlementCount}),0))+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){var r,o;return n("td",{key:"sum-"+t,staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.formatAmount((null===(r=e.bankAccountTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[t])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2 banking-primary--text"},[e._v("\n                    "+e._s(e.formatAmount((null===(t=e.bankAccountTotals)||void 0===t?void 0:t.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):n("div",{staticClass:"text-center py-6"},[n(y.a,{attrs:{size:"48",color:"grey lighten-2"}},[e._v("mdi-information-outline")]),e._v(" "),n("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[e._v("\n              No bank account data available\n            ")])],1)],1)],1)],1)],1),e._v(" "),n(R.a,{staticClass:"mb-4"},[n(m.a,{attrs:{cols:"12"}},[n(c.a,{staticClass:"rounded-xl report-card",attrs:{elevation:"2"}},[n(l.d,{staticClass:"banking-primary--text py-2 px-4 d-flex align-center report-header"},[n(y.a,{staticClass:"mr-2",attrs:{color:"#01532B"}},[e._v("mdi-account-multiple")]),e._v(" "),n("span",{staticClass:"text-subtitle-1 font-weight-medium"},[e._v("\n            ລາຍງານ ຕາມຫົວບັນຊີ\n          ")]),e._v(" "),n(T.a),e._v(" "),n(o.a,{staticClass:"mr-2",attrs:{color:"#059669",small:"",outlined:"",disabled:!e.chartAccountSummaryReport.length},on:{click:e.exportChartAccountReportToExcel}},[n(y.a,{attrs:{small:"",left:""}},[e._v("mdi-file-excel")]),e._v("\n            Export Excel\n          ")],1),e._v(" "),n(o.a,{attrs:{icon:"",small:"",loading:e.loadingChartAccountReport,color:"#01532B"},on:{click:e.fetchChartAccountReport}},[n(y.a,{attrs:{small:""}},[e._v("mdi-refresh")])],1)],1),e._v(" "),n(_.a,{staticClass:"banking-divider"}),e._v(" "),n(l.c,{staticClass:"pa-0"},[e.loadingChartAccountReport?n("div",{staticClass:"text-center py-6"},[n(w.a,{attrs:{indeterminate:"",color:"#01532B"}}),e._v(" "),n("div",{staticClass:"mt-2 text-caption"},[e._v("\n              Loading chart account report...\n            ")])],1):e.chartAccountSummaryReport.length?n(N.a,{staticClass:"banking-table",attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){var t;return[n("thead",[n("tr",{staticClass:"banking-table-header"},[n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("#")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Account Number\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Account Name\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Count\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){return n("th",{key:"head-"+t,staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    "+e._s(t)+"\n                  ")])})),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Total (LAK)\n                  ")])],2)]),e._v(" "),n("tbody",[e._l(e.chartAccountSummaryReport,(function(t,r){return n("tr",{key:t.chartAccountId,class:{"banking-row-even":r%2==0,"banking-row-special":"NO_CHART_ACCOUNT"===t.chartAccountId}},[n("td",{staticClass:"text-caption text-center"},[e._v(e._s(r+1))]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text":"NO_CHART_ACCOUNT"===t.chartAccountId}},[e._v("\n                    "+e._s(t.accountNumber)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text font-italic":"NO_CHART_ACCOUNT"===t.chartAccountId}},[e._v("\n                    "+e._s(t.accountName)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(t.settlementCount)+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(r){var o;return n("td",{key:"amt-"+r,staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(e.formatAmount((null===(o=t.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold banking-success--text"},[e._v("\n                    "+e._s(e.formatAmount(t.totalLakEquivalent||0))+"\n                  ")])],2)})),e._v(" "),n("tr",{staticClass:"banking-table-footer"},[n("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"3"}},[e._v("\n                    ລວມ\n                  ")]),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.chartAccountSummaryReport.reduce((function(t,e){return t+e.settlementCount}),0))+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){var r,o;return n("td",{key:"sum-"+t,staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.formatAmount((null===(r=e.chartAccountTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[t])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2 banking-primary--text"},[e._v("\n                    "+e._s(e.formatAmount((null===(t=e.chartAccountTotals)||void 0===t?void 0:t.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):n("div",{staticClass:"text-center py-6"},[n(y.a,{attrs:{size:"48",color:"grey lighten-2"}},[e._v("mdi-information-outline")]),e._v(" "),n("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[e._v("\n              No chart account data available\n            ")])],1)],1)],1)],1)],1),e._v(" "),n(c.a,{staticClass:"data-table-card",attrs:{elevation:"2"}},[n(l.d,{staticClass:"banking-primary--text data-table-header"},[n(y.a,{staticClass:"mr-2",attrs:{color:"#01532B"}},[e._v("mdi-table")]),e._v("\n      ລາຍຮັບ\n      "),n(T.a),e._v(" "),n(d.a,{attrs:{color:"#01532B",outlined:""}},[e._v("\n        "+e._s(e.pagination.totalItems)+" Total Records\n      ")])],1),e._v(" "),n(_.a,{staticClass:"banking-divider"}),e._v(" "),n(h.a,{staticClass:"elevation-0 banking-data-table",attrs:{headers:e.tableHeaders,items:e.settlements,loading:e.loading,"server-items-length":e.pagination.totalItems,options:e.tableOptions,"footer-props":{"items-per-page-options":[10,25,50,100],"show-current-page":!0,"show-first-last-page":!0},"loading-text":"Loading settlements...","no-data-text":"No settlements found"},on:{"update:options":[function(t){e.tableOptions=t},e.onTableOptionsUpdate]},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.props;return[n("thead",{staticClass:"banking-table-header"},[n("tr",e._l(r.headers,(function(header){return n("th",{key:header.text,staticClass:"white--text font-weight-bold",class:[!1!==header.sortable?"sortable":""],on:{click:function(t){!1!==header.sortable&&e.changeSort(header.value)}}},[e._v("\n              "+e._s(header.text)+"\n              "),!1!==header.sortable?n(y.a,{staticClass:"ml-1",attrs:{color:"white",small:""}},[e._v("\n                "+e._s(e.getSortIcon(header.value))+"\n              ")]):e._e()],1)})),0)])]}},{key:"item.bookingDate",fn:function(t){var r=t.item;return[n(d.a,{staticClass:"date-chip",attrs:{small:"",color:"#F3F4F6"}},[n(y.a,{attrs:{left:"",small:"",color:"#01532B"}},[e._v("mdi-calendar")]),e._v("\n          "+e._s(e.formatDate(r.bookingDate))+"\n        ")],1)]}},{key:"item.amount",fn:function(t){var r,o=t.item;return[n("div",[n("span",{staticClass:"font-weight-bold text-h6 banking-success--text"},[e._v("\n            "+e._s(e.getCurrencySymbol(null===(r=o.currency)||void 0===r?void 0:r.code))+e._s(e.formatAmount(o.amount))+"\n          ")]),e._v(" "),o.currency&&"LAK"!==o.currency.code?n("div",{staticClass:"text-caption grey--text"},[e._v("\n            "+e._s(o.currency.code)+" @ "+e._s(o.exchangeRate||1)+"\n          ")]):e._e()])]}},{key:"item.method",fn:function(t){var r=t.item;return[n(d.a,{attrs:{color:e.getMethodColor(r.method),small:"",dark:""}},[n(y.a,{attrs:{left:"","x-small":""}},[e._v(e._s(e.getMethodIcon(r.method)))]),e._v("\n          "+e._s(e.formatMethod(r.method))+"\n        ")],1)]}},{key:"item.proceeder",fn:function(t){var o=t.item;return[o.proceeder?n("div",{staticClass:"d-flex align-center"},[n(r.a,{staticClass:"mr-2",attrs:{size:"24",color:"#01532B"}},[n("span",{staticClass:"white--text text-caption"},[e._v("\n              "+e._s(e.getInitials(o.proceeder.cus_name||o.proceeder.cus_email))+"\n            ")])]),e._v(" "),n("div",[n("div",{staticClass:"font-weight-medium"},[e._v("\n              "+e._s(o.proceeder.cus_name||o.proceeder.cus_email)+"\n            ")]),e._v(" "),n("div",{staticClass:"text-caption grey--text"},[e._v("\n              "+e._s(o.proceeder.cus_email)+"\n            ")])])],1):n("span",{staticClass:"grey--text"},[e._v("N/A")])]}},{key:"item.moneyAdvance",fn:function(t){var r=t.item;return[r.moneyAdvance?n("div",[n(d.a,{staticClass:"mb-1",attrs:{"x-small":"",color:"#01532B",dark:""}},[e._v("\n            #"+e._s(r.moneyAdvance.id)+"\n          ")]),e._v(" "),n("br"),e._v(" "),n(d.a,{attrs:{"x-small":"",color:e.getStatusColor(r.moneyAdvance.status),dark:""}},[e._v("\n            "+e._s(r.moneyAdvance.status)+"\n          ")])],1):n(d.a,{attrs:{"x-small":"",color:"grey",dark:""}},[e._v(" Independent ")])]}},{key:"item.status",fn:function(t){var r=t.item;return[r.moneyAdvance?n(d.a,{attrs:{color:e.getStatusColor(r.moneyAdvance.status),small:"",dark:""}},[n(y.a,{attrs:{left:"","x-small":""}},[e._v(e._s(e.getStatusIcon(r.moneyAdvance.status)))]),e._v("\n          "+e._s(r.moneyAdvance.status)+"\n        ")],1):n(d.a,{attrs:{color:"grey",small:"",dark:""}},[n(y.a,{attrs:{left:"","x-small":""}},[e._v("mdi-check-circle")]),e._v("\n          Independent\n        ")],1)]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("div",{staticClass:"d-flex"},[n(L.a,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var c=t.on,l=t.attrs;return[n(o.a,e._g(e._b({attrs:{icon:"","x-small":"",color:"#01532B"},on:{click:function(t){return e.viewSettlement(r)}}},"v-btn",l,!1),c),[n(y.a,{attrs:{small:""}},[e._v("mdi-eye")])],1)]}}],null,!0)},[e._v(" "),n("span",[e._v("View Details")])])],1)]}}])})],1),e._v(" "),n(f.a,{attrs:{"max-width":"900px",persistent:"",scrollable:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n(c.a,[n(l.d,{staticClass:"dialog-header white--text"},[n(y.a,{staticClass:"mr-2",attrs:{color:"white"}},[e._v("\n          "+e._s("create"===e.dialogMode?"mdi-plus":"edit"===e.dialogMode?"mdi-pencil":"mdi-eye")+"\n        ")]),e._v("\n        "+e._s(e.dialogTitle)+"\n        "),n(T.a),e._v(" "),n(o.a,{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[n(y.a,[e._v("mdi-close")])],1)],1),e._v(" "),n(l.c,{staticClass:"pt-6"},["view"!==e.dialogMode?n(x.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[n(R.a,[n(m.a,{attrs:{cols:"12",md:"6"}},[n(O.a,{attrs:{type:"date",label:"Booking Date","prepend-icon":"mdi-calendar",rules:[e.rules.required],outlined:"",required:"",color:"#01532B"},model:{value:e.settlementForm.bookingDate,callback:function(t){e.$set(e.settlementForm,"bookingDate",t)},expression:"settlementForm.bookingDate"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(O.a,{attrs:{type:"number",step:"0.01",label:"Amount","prepend-icon":"mdi-currency-usd",rules:[e.rules.required,e.rules.positiveNumber],outlined:"",required:"",color:"#01532B"},model:{value:e.settlementForm.amount,callback:function(t){e.$set(e.settlementForm,"amount",t)},expression:"settlementForm.amount"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(S.a,{attrs:{items:e.methodSelectOptions,label:"Payment Method","prepend-icon":"mdi-credit-card",rules:[e.rules.required],outlined:"",required:"",color:"#01532B"},model:{value:e.settlementForm.method,callback:function(t){e.$set(e.settlementForm,"method",t)},expression:"settlementForm.method"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(O.a,{attrs:{type:"number",step:"0.0001",label:"Exchange Rate","prepend-icon":"mdi-swap-horizontal",placeholder:"1.0000",outlined:"",color:"#01532B"},model:{value:e.settlementForm.exchangeRate,callback:function(t){e.$set(e.settlementForm,"exchangeRate",t)},expression:"settlementForm.exchangeRate"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12"}},[n(E.a,{attrs:{label:"Notes","prepend-icon":"mdi-note-text",rows:"3",outlined:"","no-resize":"",color:"#01532B"},model:{value:e.settlementForm.notes,callback:function(t){e.$set(e.settlementForm,"notes",t)},expression:"settlementForm.notes"}})],1)],1)],1):n("div",[n(R.a,[n(m.a,{attrs:{cols:"12",md:"6"}},[n(k.a,[n(A.a,[n(y.a,{attrs:{color:"#01532B"}},[e._v("mdi-calendar")])],1),e._v(" "),n(C.a,[n(C.c,{staticClass:"font-weight-bold"},[e._v("Booking Date")]),e._v(" "),n(C.b,{staticClass:"text-h6"},[e._v(e._s(e.formatDate(e.currentSettlement.bookingDate)))])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(k.a,[n(A.a,[n(y.a,{attrs:{color:"#059669"}},[e._v("mdi-currency-usd")])],1),e._v(" "),n(C.a,[n(C.c,{staticClass:"font-weight-bold"},[e._v("Amount")]),e._v(" "),n(C.b,{staticClass:"text-h5 font-weight-bold banking-success--text"},[e._v("\n                    "+e._s(e.getCurrencySymbol(null===(t=e.currentSettlement.currency)||void 0===t?void 0:t.code))+e._s(e.formatAmount(e.currentSettlement.amount))+"\n                  ")])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(k.a,[n(A.a,[n(y.a,{attrs:{color:e.getMethodColor(e.currentSettlement.method)}},[e._v(e._s(e.getMethodIcon(e.currentSettlement.method)))])],1),e._v(" "),n(C.a,[n(C.c,{staticClass:"font-weight-bold"},[e._v("Payment Method")]),e._v(" "),n(C.b,[n(d.a,{attrs:{color:e.getMethodColor(e.currentSettlement.method),small:"",dark:""}},[e._v("\n                      "+e._s(e.formatMethod(e.currentSettlement.method))+"\n                    ")])],1)],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(k.a,[n(A.a,[n(y.a,{attrs:{color:"#01532B"}},[e._v("mdi-swap-horizontal")])],1),e._v(" "),n(C.a,[n(C.c,{staticClass:"font-weight-bold"},[e._v("Exchange Rate")]),e._v(" "),n(C.b,{staticClass:"text-h6"},[e._v(e._s(e.currentSettlement.exchangeRate||"1.0000"))])],1)],1)],1),e._v(" "),e.currentSettlement.notes?n(m.a,{attrs:{cols:"12"}},[n(k.a,[n(A.a,[n(y.a,{attrs:{color:"grey"}},[e._v("mdi-note-text")])],1),e._v(" "),n(C.a,[n(C.c,{staticClass:"font-weight-bold"},[e._v("Notes")]),e._v(" "),n(C.b,[e._v(e._s(e.currentSettlement.notes))])],1)],1)],1):e._e()],1)],1)],1),e._v(" "),n(_.a),e._v(" "),n(l.a,{staticClass:"pa-4"},[n(T.a),e._v(" "),n(o.a,{attrs:{outlined:""},on:{click:e.closeDialog}},[e._v("\n          "+e._s("view"===e.dialogMode?"Close":"Cancel")+"\n        ")]),e._v(" "),"view"!==e.dialogMode?n(o.a,{staticClass:"ml-2",attrs:{color:"#01532B",loading:e.saving,disabled:!e.formValid,dark:""},on:{click:e.saveSettlement}},[n(y.a,{attrs:{left:""}},[e._v(e._s("create"===e.dialogMode?"mdi-plus":"mdi-content-save"))]),e._v("\n          "+e._s("create"===e.dialogMode?"Create":"Update")+"\n        ")],1):e._e()],1)],1)],1)],1)}),[],!1,null,"2116f6e9",null);e.default=component.exports}}]);