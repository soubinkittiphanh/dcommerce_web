(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{958:function(t,e,r){"use strict";r.r(e);var o=r(795),n=r(318),c=r(315),l=r(18),d=r(319),f=r(793),m=r(767),v=r(314),h=r(794),w=r(167),P=r(792),_=r(790),y=(r(31),r(35),r(20)),x=(r(66),r(5),r(121),r(91),r(36)),C={props:{product:{type:Object,require:!0}},data:function(){return{categoryList:[],selectCategoryId:null,localProduct:this.product,isloading:!1,nameRules:[function(t){return!!t||"Name is required"},function(t){return t&&t.length<=150||"Name must be less than 20 characters"}]}},created:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadEntry();case 1:case"end":return e.stop()}}),e)})))()},methods:{commitRecord:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()||t.isloading){e.next=13;break}if(t.isloading=!0,r=t.isCreate?"api/webproductgroup/create":"api/webproductgroup/product_set_groups/".concat(t.product.id),console.log("API => ",r),!t.isCreate){e.next=9;break}return e.next=7,t.$axios.post(r,t.localProduct).then((function(e){return t.refreshData(),t.$emit("close-dialog"),Object(x.k)(t.$swal,"Succeed","Your transaction completed")})).catch((function(e){return console.log("Error: ",e),Object(x.j)(t.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ")}));case 7:e.next=12;break;case 9:return t.localProduct.groupList=t.localProduct.webProductGroups,e.next=12,t.$axios.put(r,t.localProduct).then((function(e){return t.refreshData(),t.$emit("close-dialog"),Object(x.k)(t.$swal,"Succeed","Your transaction completed")})).catch((function(e){return console.log("Error: ",e),Object(x.j)(t.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ")}));case 12:t.isloading=!1;case 13:case"end":return e.stop()}}),e)})))()},formatNumber:function(t){return Object(x.e)(t)},addProductToGroup:function(){var t=this;if(console.log("Add product to group handler"),this.selectCategoryId){var e=this.categoryList.find((function(e){return e.id==t.selectCategoryId}));if(console.log("Authority ".concat(e.id)),0==this.localProduct.webProductGroups.length)console.log("TEHERE IS NO TERMINAL"),this.localProduct.webProductGroups.push(e);else if("undefined"==this.localProduct.webProductGroups)this.localProduct.webProductGroups.push(e);else{var r=this.localProduct.webProductGroups.find((function(e){return e.id==t.selectCategoryId}));console.log("ADD TERMINAL ".concat(r)),r||this.localProduct.webProductGroups.push(e)}}},removeProductFromGroup:function(t){console.log("Remove product to group handler");var e=this.localProduct.webProductGroups.indexOf(t);this.localProduct.webProductGroups.splice(e,1)},loadEntry:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("===> Update form record load"),e.next=3,t.$axios.get("api/webproductgroup/find").then((function(e){t.categoryList=e.data,t.selectCategoryId=t.categoryList[0].id})).catch((function(t){console.log("Cannot fetch data "+t)}));case 3:case"end":return e.stop()}}),e)})))()},refreshData:function(){this.$emit("reload-data")}},computed:{}},k=r(30),component=Object(k.a)(C,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(m.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(c.a,{staticClass:"pa-4"},[e(l.d,[e(d.a,{staticClass:"ma-0",attrs:{color:"primary",label:"","text-color":"white"}},[e(w.a,{attrs:{start:""}},[t._v("mdi-label")]),t._v("\n                "+t._s("ສິນຄ້າ: ".concat(t.product.pro_name," ລາຄາ: ").concat(t.formatNumber(t.product.pro_price)))+"\n            ")],1)],1),t._v(" "),e(l.c,[e(h.a,{ref:"form"},[e(o.a,{attrs:{"item-text":"name","item-value":"id",items:t.categoryList,label:"ໝວດສິນຄ້າຫນ້າເວັບ*"},model:{value:t.selectCategoryId,callback:function(e){t.selectCategoryId=e},expression:"selectCategoryId"}})],1),t._v(" "),e("div",[e(P.a,{attrs:{justify:"center",align:"center"}},[e(f.a,{attrs:{cols:"12"}},[e(n.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.addProductToGroup}},[e("span",{staticClass:"mdi mdi-note-plus-outline"}),t._v("\n                            ເພີ່ມກຸ່ມ\n                        ")])],1),t._v(" "),e(f.a,{attrs:{cols:"12"}},[e(v.a),t._v(" "),e("div",{staticClass:"mx-2"},[t._v("ກຸ່ມສິນຄ້າຫນ້າເວັບ ທີ່ເລືອກ")]),t._v(" "),e(v.a)],1)],1),t._v(" "),e(P.a,{attrs:{"no-gutters":""}},t._l(t.localProduct.webProductGroups,(function(r){return e(d.a,{key:r.id,staticClass:"ma-2",attrs:{color:"warning",variant:"outlined"},on:{click:function(e){return t.removeProductFromGroup(r)}}},[t._v("\n                        "+t._s(r.id)+" - "+t._s(r.name)+"\n                    ")])})),1)],1)],1),t._v(" "),e(l.a,[e(_.a),t._v(" "),e(n.a,{attrs:{color:"warning",rounded:"",variant:"text"},on:{click:function(e){return t.$emit("close-dialog")}}},[t._v("\n                Close\n            ")]),t._v(" "),e(n.a,{attrs:{color:"primary",rounded:"",variant:"text"},on:{click:t.commitRecord}},[t._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LoadingIndicator:r(249).default})}}]);