(window.webpackJsonp=window.webpackJsonp||[]).push([[5,27],{563:function(e,t,n){"use strict";n.r(t);var r=n(248),o=n(139),l=n(245),c=n(65),component=Object(c.a)({},(function(){var e=this._self._c;return e(r.a,{attrs:{color:"#01532B",dark:""}},[e(o.c,[this._v("\n    ກະລຸນາລໍຖ້າ...\n    "),e(l.a,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports},570:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return c}));n(26),n(209);var r=function(e,t,n){e({icon:t,title:"ທ່ານແນ່ໃຈທີ່ຈະລົບບໍ່ ?",text:"ລາຍການນີ້ຈະຖືກລົບ ອອກຈາກຖານຂໍ້ມູນ!",confirmButtonText:"ຢືນຢັນ",confirmButtonColor:"#d33",showCancelButton:!0,cancelButtonText:"ອອກ",cancelButtonColor:"#3085d6"}).then((function(e){e.isConfirmed&&n()}))},o=function(e,title,t){e({icon:"error",title:title,text:t,showConfirmButton:!0,allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})},l=function(e,title,text){e({icon:"success",title:title,text:text,showConfirmButton:!0,allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})},c=function(e){return(new Intl.NumberFormat).format(e)}},572:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d}));n(22),n(26),n(574),n(4),n(66),n(209);var r=function(e,title,t){e({icon:"error",title:title,text:t,showConfirmButton:!0,allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})},o=function(e,title,text){e({icon:"success",title:title,text:text,showConfirmButton:!0,allowEscapeKey:!1,allowOutsideClick:!1,allowEnterKey:!1})},l=function(e){return(new Intl.NumberFormat).format(e)},c=(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1);console.log("Date found => ",t);var n=t.getFullYear(),r=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(o)}),d=function(){return"https://nodejsclusters-130797-0.cloudclusters.net"}},663:function(e,t,n){"use strict";n.r(t);var r=n(559),o=n(546),l=n(248),c=n(139),d=n(580),m=n(556),f=n(744),h=n(575),v=n(246),w=n(578),y=n(579),x=n(558),R=n(706),_=n(86),k=(n(41),n(30),n(60),n(44),n(10),n(72),n(81),n(38)),C=(n(140),n(21),n(29),n(40),n(57),n(167),n(628),n(630),n(4),n(58),n(47),n(570));n(572);function $(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var D={props:{isEdit:{type:Boolean,default:!1},campaignId:{type:Number,default:null}},data:function(){return{productList:[],showAddRowDialog:!1,dialog:!1,title:"ສ້າງ Campaign",valid:!1,isLoading:!1,form:{header:{title:"Summer Sale",start:"",end:"",product:"T-shirts",productId:1e3,budget:5e3,isActive:!0}},bookingDate:"",rules:{required:function(e){return!!e||"This field is required"},dateAfter:function(e){return function(t){return!e||(new Date(t)>=new Date(e)||"Date must be after start date")}},dateAfterToday:function(e){return new Date(e)>=new Date||"Date must be after today"},number:function(e){return!isNaN(parseFloat(e))&&isFinite(e)||"Value must be a number"}},headers:[{text:"Date",value:"date"},{text:"Reach",value:"reach"},{text:"Comments",value:"comments"},{text:"Results",value:"results"},{text:"Purchase Qty",value:"purchaseQty"},{text:"Cost Per Customer",value:"costPerCustomer"},{text:"Budget Spend",value:"budgetSpend"}],campaignEntry:[],newRow:{date:"",reach:.01,comments:0,results:0,purchaseQty:7,costPerCustomer:0,budgetSpend:0}}},mounted:function(){var e=(new Date).toISOString().substr(0,10);this.form.header.start=e,this.form.header.end=e,this.newRow.date=e,this.loadCampaign(),this.loadProduct()},computed:{dateRules:function(){return[function(e){return!!e||"Field is required"},function(e){return/^(\d{4})-(\d{2})-(\d{2})$/.test(e)||"Invalid date format (YYYY-MM-DD)"}]},numberRule:function(){return[function(e){return null!=e&&""!==e||"Field is required"},function(e){return/^(\d+(\.\d{1,2})?)|(0(\.\d{1,2})?)$/.test(e)||"Rate must be a number with up to 2 decimal places"}]}},methods:{deleteItem:function(e){var t=this,n=this.campaignEntry.indexOf(e);n>-1&&(this.isEdit&&e.id?Object(C.a)(this.$swal,"warning",Object(k.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Delete record function"),t.isLoading=!0,r.next=4,t.$axios.delete("/api/campaignEntry/delete/".concat(e.id)).then((function(e){console.log("response=>",e.data),e.data.includes("successfully")&&t.campaignEntry.splice(n,1)})).catch((function(e){Object(C.c)(t.$swal,"ເກີດຂໍ້ຜິດພາດ",e.response.data)}));case 4:t.isLoading=!1;case 5:case"end":return r.stop()}}),r)})))):this.campaignEntry.splice(n,1))},open:function(){this.dialog=!0},close:function(){this.dialog=!1},validateObject:function(e){e.date;var t=e.reach,n=e.comments,r=e.results,o=e.purchaseQty,l=e.costPerCustomer,c=e.budgetSpend;return console.log("Result ===> ",r," ",Number.isInteger(Number("0"))," val ",!!r),!Number.isFinite(t)||Number(t)<0?(console.log("Reach",t," IS NUMBER FINITE ",Number.isFinite(t)),!1):!Number.isFinite(n)||Number(n)<0?(console.log("Comments"),!1):!Number.isFinite(r)||Number(r)<0?(console.log("Results"),!1):!Number.isFinite(o)||Number(o)<0?(console.log("Purchase"),!1):!Number.isFinite(l)||Number(l)<0?(console.log("CostCustomer"),!1):!(!Number.isFinite(c)||Number(c)<0)||(console.log("Budgets"),!1)},validateCampaignEntry:function(){var e,t=$(this.campaignEntry);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!this.validateObject(n))return!1}}catch(e){t.e(e)}finally{t.f()}return!0},loadCampaign:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLoading=!0,!e.isEdit){t.next=4;break}return t.next=4,e.$axios.get("/api/campaign/find/".concat(e.campaignId)).then((function(t){e.form.header=t.data,e.form.header.start=t.data.start.split("T")[0],e.form.header.end=t.data.end.split("T")[0],e.campaignEntry.length=0;var n,r=$(t.data.entries);try{for(r.s();!(n=r.n()).done;){var o=n.value,l=o;l.date=o.date.split("T")[0],e.campaignEntry.push(l)}}catch(e){r.e(e)}finally{r.f()}})).catch((function(e){console.log("Load cammpaign error",e)}));case 4:e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLoading){t.next=18;break}if(e.isLoading=!0,0!=e.campaignEntry.length){t.next=5;break}return e.isLoading=!1,t.abrupt("return",Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ","ບໍ່ມີລາຍການກະລຸນາເພີ່ມຢ່າງນ້ອຍ 1 ລາຍການ"));case 5:if(e.validateCampaignEntry()){t.next=8;break}return e.isLoading=!1,t.abrupt("return",Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ","ກະລຸນາກວດຂໍ້ມູນຄືນໃຫ້ຖືກຕ້ອງ"));case 8:if(e.form.header.entry=e.campaignEntry,!e.isEdit||!e.campaignId){t.next=15;break}return console.log("====> update campaign"),t.next=13,e.$axios.put("/api/campaign/update/".concat(e.campaignId),e.form.header).then((function(t){200==t.status?Object(C.d)(e.$swal,"Succeed","ດຳເນີນການສຳເລັດ"):Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ",t.data)})).catch((function(t){Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ",t.response.data)}));case 13:t.next=17;break;case 15:return t.next=17,e.$axios.post("/api/campaign/create",e.form.header).then((function(t){200==t.status?Object(C.d)(e.$swal,"Succeed","ດຳເນີນການສຳເລັດ"):Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ",t.data)})).catch((function(t){Object(C.c)(e.$swal,"ເກີດຂໍ້ຜິດພາດ",t.response.data.errors[0].msg)}));case 17:e.isLoading=!1;case 18:e.close();case 19:case"end":return t.stop()}}),t)})))()},addRow:function(){this.$refs.addRowForm.validate()&&(this.campaignEntry.push(this.newRow),this.newRow={date:"",reach:0,comments:0,results:0,purchaseQty:0,costPerCustomer:0,budgetSpend:0},this.showAddRowDialog=!1)},loadProduct:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$axios.get("product_mobile_f").then((function(t){e.productList=t.data.map((function(e){return e})),console.log("all data1: ",e.productList[0].img_path)})).catch((function(e){console.log("Data: "+e)}));case 3:e.isLoading=!1;case 4:case"end":return t.stop()}}),t)})))()}}},E=n(65),component=Object(E.a)(D,(function(){var e=this,t=e._self._c;return t("div",[t(h.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[t("loading-indicator")],1),e._v(" "),t(h.a,{attrs:{"max-width":"800"},model:{value:e.showAddRowDialog,callback:function(t){e.showAddRowDialog=t},expression:"showAddRowDialog"}},[t(l.a,[t(c.d,[e._v("ເພີ່ມລາຍການໃຫມ່")]),e._v(" "),t(c.c,[t(w.a,{ref:"addRowForm"},[t(_.a,{attrs:{type:"date",label:"ວັນທີ*",required:"",hint:"date"},model:{value:e.newRow.date,callback:function(t){e.$set(e.newRow,"date",t)},expression:"newRow.date"}}),e._v(" "),t(_.a,{attrs:{label:"Reach",required:"",rules:e.numberRule},model:{value:e.newRow.reach,callback:function(t){e.$set(e.newRow,"reach",e._n(t))},expression:"newRow.reach"}}),e._v(" "),t(_.a,{attrs:{label:"Comments",required:"",rules:e.numberRule},model:{value:e.newRow.comments,callback:function(t){e.$set(e.newRow,"comments",e._n(t))},expression:"newRow.comments"}}),e._v(" "),t(_.a,{attrs:{label:"Results",required:"",rules:e.numberRule},model:{value:e.newRow.results,callback:function(t){e.$set(e.newRow,"results",e._n(t))},expression:"newRow.results"}}),e._v(" "),t(_.a,{directives:[{name:"mode",rawName:"v-mode.number",value:e.newRow.purchaseQty,expression:"newRow.purchaseQty",modifiers:{number:!0}}],attrs:{label:"Purchase Qty",rules:e.numberRule,required:""}}),e._v(" "),t(_.a,{attrs:{label:"Cost Per Customer",rules:e.numberRule,required:""},model:{value:e.newRow.costPerCustomer,callback:function(t){e.$set(e.newRow,"costPerCustomer",e._n(t))},expression:"newRow.costPerCustomer"}}),e._v(" "),t(_.a,{attrs:{label:"Budget Spend",rules:e.numberRule,required:""},model:{value:e.newRow.budgetSpend,callback:function(t){e.$set(e.newRow,"budgetSpend",e._n(t))},expression:"newRow.budgetSpend"}})],1)],1),e._v(" "),t(c.a,[t(o.a,{attrs:{color:"primary"},on:{click:e.addRow}},[e._v("ເພີ່ມ")]),e._v(" "),t(o.a,{attrs:{color:"secondary"},on:{click:function(t){e.showAddRowDialog=!1}}},[e._v("ປິດ")])],1)],1)],1),e._v(" "),t(l.a,[t(c.d,[t("span",{staticClass:"headline"},[e._v(e._s(e.title))])]),e._v(" "),t(c.c,[t(m.a,[t(y.a,[t(d.a,{attrs:{cols:"12",sm:"4",md:"4"}},[t(w.a,{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(_.a,{attrs:{label:"Title",rules:[e.rules.required],required:""},model:{value:e.form.header.title,callback:function(t){e.$set(e.form.header,"title",t)},expression:"form.header.title"}}),e._v(" "),t(_.a,{attrs:{label:"Remark",rules:[e.rules.required],required:""},model:{value:e.form.header.product,callback:function(t){e.$set(e.form.header,"product",t)},expression:"form.header.product"}}),e._v(" "),t(r.a,{attrs:{"item-text":"pro_name","item-value":"pro_id",items:e.productList,label:"ເລືອກສິນຄ້າ *"},model:{value:e.form.header.productId,callback:function(t){e.$set(e.form.header,"productId",t)},expression:"form.header.productId"}})],1)],1),e._v(" "),t(d.a,{attrs:{cols:"12",sm:"4",md:"4"}},[t(w.a,{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(_.a,{attrs:{type:"date",label:"ວັນທີເລີ່ມ*",hint:"example of helper text only on focus"},model:{value:e.form.header.start,callback:function(t){e.$set(e.form.header,"start",t)},expression:"form.header.start"}}),e._v(" "),t(_.a,{attrs:{label:"Budget",type:"number",rules:e.numberRule,required:""},model:{value:e.form.header.budget,callback:function(t){e.$set(e.form.header,"budget",t)},expression:"form.header.budget"}})],1)],1),e._v(" "),t(d.a,{attrs:{cols:"12",sm:"4",md:"4"}},[t(w.a,{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[t(_.a,{attrs:{type:"date",label:"ວັນທີສິ້ນສຸດ*",hint:"example of helper text only on focus"},model:{value:e.form.header.end,callback:function(t){e.$set(e.form.header,"end",t)},expression:"form.header.end"}}),e._v(" "),t(R.a,{attrs:{label:"Active","true-value":!0,"false-value":!1},model:{value:e.form.header.isActive,callback:function(t){e.$set(e.form.header,"isActive",t)},expression:"form.header.isActive"}})],1)],1)],1),e._v(" "),t(v.a),e._v(" "),t(o.a,{attrs:{color:"primary"},on:{click:function(t){e.showAddRowDialog=!0}}},[e._v("ເພີ່ມລາຍການ")]),e._v(" "),t(f.a,{attrs:{headers:e.headers,items:e.campaignEntry},scopedSlots:e._u([{key:"item",fn:function(n){var r=n.item;return[t("tr",[t("td",[t(_.a,{attrs:{type:"date",label:"ວັນທີ*",hint:"example of helper text only on focus"},model:{value:r.date,callback:function(t){e.$set(r,"date",t)},expression:"item.date"}})],1),e._v(" "),t("td",[t(_.a,{attrs:{label:"Reach",rules:e.numberRule},model:{value:r.reach,callback:function(t){e.$set(r,"reach",e._n(t))},expression:"item.reach"}})],1),e._v(" "),t("td",[t(_.a,{attrs:{label:"Comments",rules:e.numberRule},model:{value:r.comments,callback:function(t){e.$set(r,"comments",e._n(t))},expression:"item.comments"}})],1),e._v(" "),t("td",[t(_.a,{attrs:{label:"Results",rules:e.numberRule},model:{value:r.results,callback:function(t){e.$set(r,"results",e._n(t))},expression:"item.results"}})],1),e._v(" "),t("td",[t(_.a,{attrs:{label:"Purchase Quantity",rules:e.numberRule},model:{value:r.purchaseQty,callback:function(t){e.$set(r,"purchaseQty",e._n(t))},expression:"item.purchaseQty"}})],1),e._v(" "),t("td",[t(_.a,{attrs:{label:"Cost Per Customer",rules:e.numberRule},model:{value:r.costPerCustomer,callback:function(t){e.$set(r,"costPerCustomer",e._n(t))},expression:"item.costPerCustomer"}})],1),e._v(" "),t("td",[t(_.a,{attrs:{label:"Budget Spend",rules:e.numberRule},model:{value:r.budgetSpend,callback:function(t){e.$set(r,"budgetSpend",e._n(t))},expression:"item.budgetSpend"}})],1),e._v(" "),t("td",[t(o.a,{attrs:{color:"blue-darken-1",variant:"text"},on:{click:function(t){return e.deleteItem(r)}}},[e._v("\n                                    ລົບ\n                                ")])],1)])]}}])})],1),e._v(" "),t("small",[e._v("* ສະແດງເຖິງຟິວທີ່ຕ້ອງໃສ່ຂໍ້ມູນ")])],1),e._v(" "),t(c.a,[t(x.a),e._v(" "),t(o.a,{attrs:{color:"blue-darken-1",variant:"text"},on:{click:function(t){return e.$emit("close-dialog")}}},[e._v("\n                Close\n            ")]),e._v(" "),t(o.a,{attrs:{color:"blue-darken-1",variant:"text"},on:{click:e.submit}},[e._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingIndicator:n(563).default})}}]);