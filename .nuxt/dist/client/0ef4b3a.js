(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1262:function(t,e,n){var content=n(1561);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("355eff84",content,!0,{sourceMap:!1})},1560:function(t,e,n){"use strict";n(1262)},1561:function(t,e,n){var o=n(15)((function(i){return i[1]}));o.push([t.i,'.settlement-audit-viewer[data-v-749b7dea]{background:#fafafa;display:flex;flex-direction:column;height:100%}.filters[data-v-749b7dea]{background:#fff;border-bottom:1px solid #e5e5e5;padding:16px}.filter-group[data-v-749b7dea]{align-items:center;display:flex;gap:8px}.filter-input[data-v-749b7dea]{background:#fff;border:1px solid #ddd;border-radius:6px;font-size:14px;min-width:120px;padding:8px 12px}.filter-input[data-v-749b7dea]:focus{border-color:#007bff;outline:none}.btn-clear[data-v-749b7dea],.btn-search[data-v-749b7dea]{border:none;border-radius:6px;cursor:pointer;font-size:14px;padding:8px 12px}.btn-search[data-v-749b7dea]{background:#007bff;color:#fff}.btn-clear[data-v-749b7dea]{background:#6c757d;color:#fff}.loading[data-v-749b7dea]{align-items:center;color:#666;display:flex;font-size:16px;gap:12px;justify-content:center;padding:48px}.timeline[data-v-749b7dea]{flex:1;overflow-y:auto;padding:20px;position:relative}.timeline-item[data-v-749b7dea]{align-items:flex-start;display:flex;gap:16px;margin-bottom:20px;position:relative}.timeline-item[data-v-749b7dea]:not(:last-child):before{background:#e5e5e5;bottom:-20px;content:"";left:19px;position:absolute;top:40px;width:2px}.timeline-dot[data-v-749b7dea]{align-items:center;border-radius:50%;color:#fff;display:flex;flex-shrink:0;font-size:14px;height:38px;justify-content:center;position:relative;width:38px;z-index:1}.dot-create[data-v-749b7dea]{background:#28a745}.dot-update[data-v-749b7dea]{background:#007bff}.dot-delete[data-v-749b7dea]{background:#dc3545}.dot-approve[data-v-749b7dea]{background:#28a745}.dot-reject[data-v-749b7dea]{background:#dc3545}.dot-submit[data-v-749b7dea]{background:#17a2b8}.dot-cancel[data-v-749b7dea]{background:#ffc107}.timeline-content[data-v-749b7dea]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);cursor:pointer;flex:1;padding:16px;position:relative;transition:all .2s ease}.timeline-content[data-v-749b7dea]:hover{box-shadow:0 4px 8px rgba(0,0,0,.15);transform:translateY(-1px)}.timeline-item.expanded .timeline-content[data-v-749b7dea]{border-bottom-left-radius:0;border-bottom-right-radius:0}.content-header[data-v-749b7dea]{justify-content:space-between;margin-bottom:12px}.action-info[data-v-749b7dea],.content-header[data-v-749b7dea]{align-items:center;display:flex}.action-info[data-v-749b7dea]{gap:12px}.action-badge[data-v-749b7dea]{border-radius:4px;font-size:12px;font-weight:600;padding:4px 8px}.badge-create[data-v-749b7dea]{background:#d4edda;color:#155724}.badge-update[data-v-749b7dea]{background:#cce7ff;color:#004085}.badge-delete[data-v-749b7dea]{background:#f8d7da;color:#721c24}.badge-approve[data-v-749b7dea]{background:#d4edda;color:#155724}.badge-reject[data-v-749b7dea]{background:#f8d7da;color:#721c24}.badge-submit[data-v-749b7dea]{background:#d1ecf1;color:#0c5460}.amount-change[data-v-749b7dea],.badge-cancel[data-v-749b7dea]{background:#fff3cd;color:#856404}.amount-change[data-v-749b7dea]{border-radius:4px;font-size:12px;font-weight:600;padding:2px 6px}.timestamp[data-v-749b7dea]{color:#666;font-size:12px;font-weight:500}.content-main[data-v-749b7dea]{justify-content:space-between;margin-bottom:8px}.content-main[data-v-749b7dea],.user-info[data-v-749b7dea]{align-items:center;display:flex}.user-info[data-v-749b7dea]{color:#333;font-size:14px;font-weight:500;gap:6px}.user-info i[data-v-749b7dea]{color:#666;font-size:12px}.settlement-info[data-v-749b7dea]{align-items:center;display:flex;font-size:14px;gap:12px}.settlement-amount[data-v-749b7dea]{font-size:15px}.settlement-date[data-v-749b7dea]{color:#666;font-size:13px}.content-status[data-v-749b7dea]{justify-content:space-between;margin-bottom:8px}.content-status[data-v-749b7dea],.status-badge[data-v-749b7dea]{align-items:center;display:flex}.status-badge[data-v-749b7dea]{border-radius:4px;font-size:12px;font-weight:500;gap:4px;padding:3px 8px}.status-badge i[data-v-749b7dea]{font-size:8px}.status-draft[data-v-749b7dea]{background:#e9ecef;color:#495057}.status-pending[data-v-749b7dea]{background:#fff3cd;color:#856404}.status-approved[data-v-749b7dea]{background:#d4edda;color:#155724}.status-rejected[data-v-749b7dea]{background:#f8d7da;color:#721c24}.status-paid[data-v-749b7dea]{background:#cce7ff;color:#004085}.status-active[data-v-749b7dea]{background:#d1ecf1;color:#0c5460}.settlements-count[data-v-749b7dea]{background:#f8f9fa;border-radius:3px;color:#666;font-size:12px;padding:2px 6px}.content-preview[data-v-749b7dea]{display:flex;font-size:13px;gap:12px;margin-bottom:8px}.reference[data-v-749b7dea]{color:#007bff;font-weight:500}.description[data-v-749b7dea]{color:#666}.content-reason[data-v-749b7dea]{align-items:center;color:#666;display:flex;font-size:13px;font-style:italic;gap:6px;margin-bottom:8px}.content-reason i[data-v-749b7dea]{font-size:11px}.expand-indicator[data-v-749b7dea]{color:#666;font-size:12px;position:absolute;right:16px;top:16px}.expanded-details[data-v-749b7dea]{background:#fff;border:1px solid #e5e5e5;border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-top:none;margin-left:54px;padding:16px}.details-grid[data-v-749b7dea]{grid-gap:12px;display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));margin-bottom:16px}.detail-item[data-v-749b7dea]{align-items:center;border-bottom:1px solid #f5f5f5;display:flex;justify-content:space-between;padding:8px 0}.detail-item label[data-v-749b7dea]{color:#666;font-size:12px;font-weight:500}.detail-item span[data-v-749b7dea]{color:#333;font-size:13px}.amount[data-v-749b7dea]{color:#28a745;font-weight:600}.status[data-v-749b7dea]{border-radius:4px;font-size:11px;font-weight:500;padding:2px 6px}.description-section[data-v-749b7dea],.note-section[data-v-749b7dea]{margin-bottom:16px}.description-section h4[data-v-749b7dea],.note-section h4[data-v-749b7dea]{border-bottom:1px solid #e5e5e5;color:#333;font-size:14px;margin:0 0 8px;padding-bottom:4px}.description-section p[data-v-749b7dea],.note-section p[data-v-749b7dea]{color:#666;font-size:13px;line-height:1.4;margin:0}.settlements-section h4[data-v-749b7dea]{align-items:center;border-bottom:1px solid #e5e5e5;color:#333;display:flex;font-size:14px;justify-content:space-between;margin:0 0 12px;padding-bottom:4px}.total-amount[data-v-749b7dea]{color:#28a745;font-size:13px;font-weight:600}.settlements-list[data-v-749b7dea]{display:flex;flex-direction:column;gap:8px}.settlement-item[data-v-749b7dea]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:6px;padding:12px}.settlement-header[data-v-749b7dea]{align-items:center;display:flex;justify-content:space-between;margin-bottom:6px}.settlement-id[data-v-749b7dea]{color:#333;font-size:13px;font-weight:600}.settlement-amount[data-v-749b7dea]{color:#28a745;font-size:14px;font-weight:600}.settlement-details[data-v-749b7dea]{align-items:center;display:flex;font-size:12px;gap:12px}.line-item[data-v-749b7dea]{color:#666}.settlement-status[data-v-749b7dea]{border-radius:3px;font-weight:500;padding:2px 6px}.settlement-date[data-v-749b7dea]{color:#999}.approval-section h4[data-v-749b7dea]{border-bottom:1px solid #e5e5e5;color:#333;font-size:14px;margin:0 0 8px;padding-bottom:4px}.approval-grid[data-v-749b7dea]{grid-gap:12px;display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.approval-item[data-v-749b7dea]{align-items:center;border-bottom:1px solid #f5f5f5;display:flex;justify-content:space-between;padding:8px 0}.approval-item label[data-v-749b7dea]{color:#666;font-size:12px;font-weight:500}.approval-item span[data-v-749b7dea]{color:#333;font-size:13px}.empty-state[data-v-749b7dea]{align-items:center;color:#666;display:flex;flex-direction:column;justify-content:center;padding:48px 20px;text-align:center}.empty-state i[data-v-749b7dea]{color:#ddd;font-size:48px;margin-bottom:16px}.empty-state h3[data-v-749b7dea]{font-size:18px;margin:0 0 8px}.empty-state p[data-v-749b7dea]{font-size:14px;margin:0}.pagination[data-v-749b7dea]{border-top:1px solid #e5e5e5;gap:16px;padding:16px}.page-btn[data-v-749b7dea],.pagination[data-v-749b7dea]{align-items:center;background:#fff;display:flex;justify-content:center}.page-btn[data-v-749b7dea]{border:1px solid #ddd;border-radius:6px;cursor:pointer;height:32px;transition:all .2s;width:32px}.page-btn[data-v-749b7dea]:hover:not(:disabled){background:#f8f9fa;border-color:#007bff}.page-btn[data-v-749b7dea]:disabled{cursor:not-allowed;opacity:.5}.page-info[data-v-749b7dea]{color:#666;font-size:14px;font-weight:500}@media (max-width:768px){.timeline[data-v-749b7dea]{padding:16px}.content-main[data-v-749b7dea]{gap:8px}.content-main[data-v-749b7dea],.content-status[data-v-749b7dea]{align-items:flex-start;flex-direction:column}.content-status[data-v-749b7dea]{gap:6px}.approval-grid[data-v-749b7dea],.details-grid[data-v-749b7dea]{grid-template-columns:1fr}.expanded-details[data-v-749b7dea]{margin-left:0}.timeline-item[data-v-749b7dea]:not(:last-child):before{display:none}.filter-group[data-v-749b7dea]{flex-wrap:wrap}.settlement-header[data-v-749b7dea],.settlements-section h4[data-v-749b7dea]{align-items:flex-start;flex-direction:column;gap:4px}.settlement-details[data-v-749b7dea]{flex-wrap:wrap}}@media (max-width:480px){.settlement-info[data-v-749b7dea]{align-items:flex-start}.content-preview[data-v-749b7dea],.settlement-info[data-v-749b7dea]{flex-direction:column;gap:4px}.filter-input[data-v-749b7dea]{min-width:100px}}',""]),o.locals={},t.exports=o},1702:function(t,e,n){"use strict";n.r(e);n(44),n(9),n(5),n(7),n(67),n(35),n(10),n(12),n(8),n(13);var o=n(3),d=n(20);n(92),n(22),n(250);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var c={name:"SettlementAuditViewer",props:{settlementId:{type:[Number,String],default:null},autoLoad:{type:Boolean,default:!0},showFilters:{type:Boolean,default:!0}},emits:["logs-loaded"],data:function(){return{loading:!1,auditLogs:[],expandedId:null,filters:{dateFrom:"",dateTo:"",action:"",status:""},pagination:{page:1,limit:10,total:0,pages:0}}},mounted:function(){this.autoLoad&&this.loadAuditLogs()},watch:{settlementId:function(){this.autoLoad&&this.loadAuditLogs()}},methods:{loadAuditLogs:function(){var t=arguments,e=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var o,d,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.length>0&&void 0!==t[0]?t[0]:1,e.loading=!0,n.prev=2,n.next=5,e.$axios.get("/api/ap-invoices-settlement/audit/".concat(e.settlementId),{params:l({page:o,limit:e.pagination.limit},e.filters)});case 5:(d=n.sent).data.success&&(e.auditLogs=e.processAuditLogs(d.data.data),e.pagination=d.data.pagination||{page:1,limit:10,total:e.auditLogs.length,pages:Math.ceil(e.auditLogs.length/10)},e.$emit("logs-loaded",e.auditLogs)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),console.error("Error loading settlement audit logs:",n.t0),null===(r=e.$toast)||void 0===r||r.error("Failed to load settlement audit logs");case 13:return n.prev=13,e.loading=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[2,9,13,16]])})))()},processAuditLogs:function(t){return t.map((function(t){if("string"==typeof t.recordData)try{t.recordData=JSON.parse(t.recordData)}catch(t){console.warn("Failed to parse recordData:",t)}return t})).sort((function(a,b){return new Date(b.auditDate)-new Date(a.auditDate)}))},toggleExpand:function(t){this.expandedId=this.expandedId===t?null:t},changePage:function(t){t>=1&&t<=this.pagination.pages&&this.loadAuditLogs(t)},clearFilters:function(){this.filters={dateFrom:"",dateTo:"",action:"",status:""},this.loadAuditLogs()},showAmountChange:function(t,e){var n,o;if("UPDATE"!==t.action||e===this.auditLogs.length-1)return!1;var d=this.auditLogs[e+1];return!!(d&&null!==(n=d.recordData)&&void 0!==n&&n.paymentAmount&&null!==(o=t.recordData)&&void 0!==o&&o.paymentAmount)&&d.recordData.paymentAmount!==t.recordData.paymentAmount},getAmountChange:function(t,e){var n,o,d=this.auditLogs[e+1],r=((null===(n=t.recordData)||void 0===n?void 0:n.paymentAmount)||0)-((null==d||null===(o=d.recordData)||void 0===o?void 0:o.paymentAmount)||0);return r>0?"+".concat(this.formatCurrency(r)):r<0?"-".concat(this.formatCurrency(Math.abs(r))):""},getTotalSettlementAmount:function(t){return t.reduce((function(t,e){return t+(e.amount||0)}),0)},truncateText:function(text,t){return text?text.length>t?text.substring(0,t)+"...":text:""},getActionIcon:function(t){return{CREATE:"fas fa-plus",UPDATE:"fas fa-edit",DELETE:"fas fa-trash",APPROVE:"fas fa-check",REJECT:"fas fa-times",SUBMIT:"fas fa-paper-plane",CANCEL:"fas fa-ban"}[t]||"fas fa-circle"},getActionText:function(t){return{CREATE:"Created",UPDATE:"Updated",DELETE:"Deleted",APPROVE:"Approved",REJECT:"Rejected",SUBMIT:"Submitted",CANCEL:"Cancelled"}[t]||t},getStatusText:function(t){return{draft:"Draft",pending:"Pending Approval",approved:"Approved",rejected:"Rejected",paid:"Paid",cancelled:"Cancelled",active:"Active",inactive:"Inactive"}[t]||t},getUserName:function(t){var e,n,o,d,r;return(null===(e=t.recordData)||void 0===e||null===(n=e.maker)||void 0===n?void 0:n.cus_name)||(null===(o=t.recordData)||void 0===o||null===(d=o.checker)||void 0===d?void 0:d.cus_name)||(null===(r=t.user)||void 0===r?void 0:r.name)||"Unknown User"},formatTime:function(t){if(!t)return"-";var e=new Date,n=new Date(t);return Math.abs(e-n)/36e5<24?n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):n.toLocaleDateString("en-US",{month:"short",day:"numeric"})},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"},formatDateTime:function(t){return t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},formatCurrency:function(t){return t?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(t):"-"}}},v=c,f=(n(1560),n(32)),component=Object(f.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"settlement-audit-viewer"},[t.showFilters?e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.dateFrom,expression:"filters.dateFrom"}],staticClass:"filter-input",attrs:{type:"date",placeholder:"From date"},domProps:{value:t.filters.dateFrom},on:{input:function(e){e.target.composing||t.$set(t.filters,"dateFrom",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.dateTo,expression:"filters.dateTo"}],staticClass:"filter-input",attrs:{type:"date",placeholder:"To date"},domProps:{value:t.filters.dateTo},on:{input:function(e){e.target.composing||t.$set(t.filters,"dateTo",e.target.value)}}}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.action,expression:"filters.action"}],staticClass:"filter-input",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"action",e.target.multiple?n:n[0])}}},[e("option",{attrs:{value:""}},[t._v("All Actions")]),t._v(" "),e("option",{attrs:{value:"CREATE"}},[t._v("Created")]),t._v(" "),e("option",{attrs:{value:"UPDATE"}},[t._v("Updated")]),t._v(" "),e("option",{attrs:{value:"DELETE"}},[t._v("Deleted")]),t._v(" "),e("option",{attrs:{value:"APPROVE"}},[t._v("Approved")]),t._v(" "),e("option",{attrs:{value:"REJECT"}},[t._v("Rejected")]),t._v(" "),e("option",{attrs:{value:"SUBMIT"}},[t._v("Submitted")]),t._v(" "),e("option",{attrs:{value:"CANCEL"}},[t._v("Cancelled")])]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.status,expression:"filters.status"}],staticClass:"filter-input",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"status",e.target.multiple?n:n[0])}}},[e("option",{attrs:{value:""}},[t._v("All Status")]),t._v(" "),e("option",{attrs:{value:"draft"}},[t._v("Draft")]),t._v(" "),e("option",{attrs:{value:"pending"}},[t._v("Pending")]),t._v(" "),e("option",{attrs:{value:"approved"}},[t._v("Approved")]),t._v(" "),e("option",{attrs:{value:"rejected"}},[t._v("Rejected")]),t._v(" "),e("option",{attrs:{value:"paid"}},[t._v("Paid")]),t._v(" "),e("option",{attrs:{value:"cancelled"}},[t._v("Cancelled")])]),t._v(" "),e("button",{staticClass:"btn-search",on:{click:t.loadAuditLogs}},[e("i",{staticClass:"fas fa-search"})]),t._v(" "),e("button",{staticClass:"btn-clear",on:{click:t.clearFilters}},[e("i",{staticClass:"fas fa-times"})])])]):t._e(),t._v(" "),t.loading?e("div",{staticClass:"loading"},[e("i",{staticClass:"fas fa-spinner fa-spin"}),t._v("\n    Loading settlement history...\n  ")]):t.auditLogs.length>0?e("div",{staticClass:"timeline"},t._l(t.auditLogs,(function(n,o){var d,r,l,c,v,f,m,x,_,h,C,y,D,w,k,A,T,S,z,L,E,j,P,O,I,U;return e("div",{key:n.id,staticClass:"timeline-item",class:{expanded:t.expandedId===n.id}},[e("div",{staticClass:"timeline-dot",class:"dot-".concat(n.action.toLowerCase())},[e("i",{class:t.getActionIcon(n.action)})]),t._v(" "),e("div",{staticClass:"timeline-content",on:{click:function(e){return t.toggleExpand(n.id)}}},[e("div",{staticClass:"content-header"},[e("div",{staticClass:"action-info"},[e("span",{staticClass:"action-badge",class:"badge-".concat(n.action.toLowerCase())},[t._v("\n              "+t._s(t.getActionText(n.action))+"\n            ")]),t._v(" "),t.showAmountChange(n,o)?e("span",{staticClass:"amount-change"},[t._v("\n              "+t._s(t.getAmountChange(n,o))+"\n            ")]):t._e()]),t._v(" "),e("span",{staticClass:"timestamp"},[t._v(t._s(t.formatTime(n.auditDate)))])]),t._v(" "),e("div",{staticClass:"content-main"},[e("div",{staticClass:"user-info"},[e("i",{staticClass:"fas fa-user"}),t._v(" "),e("span",[t._v(t._s(t.getUserName(n)))])]),t._v(" "),e("div",{staticClass:"settlement-info"},[e("span",{staticClass:"settlement-amount"},[t._v(t._s(t.formatCurrency(null===(d=n.recordData)||void 0===d?void 0:d.paymentAmount)))]),t._v(" "),e("span",{staticClass:"settlement-date"},[t._v(t._s(t.formatDate(null===(r=n.recordData)||void 0===r?void 0:r.settlementDate)))])])]),t._v(" "),e("div",{staticClass:"content-status"},[e("span",{staticClass:"status-badge",class:"status-".concat(null===(l=n.recordData)||void 0===l?void 0:l.status)},[e("i",{staticClass:"fas fa-circle"}),t._v("\n            "+t._s(t.getStatusText(null===(c=n.recordData)||void 0===c?void 0:c.status))+"\n          ")]),t._v(" "),null!==(v=n.recordData)&&void 0!==v&&null!==(f=v.invoiceSettlements)&&void 0!==f&&f.length?e("span",{staticClass:"settlements-count"},[t._v("\n            "+t._s(n.recordData.invoiceSettlements.length)+" invoice"+t._s(n.recordData.invoiceSettlements.length>1?"s":"")+"\n          ")]):t._e()]),t._v(" "),n.reason?e("div",{staticClass:"content-reason"},[e("i",{staticClass:"fas fa-comment-alt"}),t._v("\n          "+t._s(n.reason)+"\n        ")]):t._e(),t._v(" "),null!==(m=n.recordData)&&void 0!==m&&m.reference||null!==(x=n.recordData)&&void 0!==x&&x.description?e("div",{staticClass:"content-preview"},[n.recordData.reference?e("span",{staticClass:"reference"},[t._v("\n            Ref: "+t._s(n.recordData.reference)+"\n          ")]):t._e(),t._v(" "),n.recordData.description?e("span",{staticClass:"description"},[t._v("\n            "+t._s(t.truncateText(n.recordData.description,50))+"\n          ")]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"expand-indicator"},[e("i",{staticClass:"fas",class:t.expandedId===n.id?"fa-chevron-up":"fa-chevron-down"})])]),t._v(" "),t.expandedId===n.id?e("div",{staticClass:"expanded-details"},[e("div",{staticClass:"details-grid"},[e("div",{staticClass:"detail-item"},[e("label",[t._v("Settlement ID:")]),t._v(" "),e("span",[t._v(t._s(n.settlementId||"-"))])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Settlement Date:")]),t._v(" "),e("span",[t._v(t._s(t.formatDate(null===(_=n.recordData)||void 0===_?void 0:_.settlementDate)))])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Payment Amount:")]),t._v(" "),e("span",{staticClass:"amount"},[t._v(t._s(t.formatCurrency(null===(h=n.recordData)||void 0===h?void 0:h.paymentAmount)))])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Base Amount:")]),t._v(" "),e("span",{staticClass:"amount"},[t._v(t._s(t.formatCurrency(null===(C=n.recordData)||void 0===C?void 0:C.baseAmount)))])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Status:")]),t._v(" "),e("span",{staticClass:"status",class:"status-".concat(null===(y=n.recordData)||void 0===y?void 0:y.status)},[t._v("\n              "+t._s(t.getStatusText(null===(D=n.recordData)||void 0===D?void 0:D.status))+"\n            ")])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Reference:")]),t._v(" "),e("span",[t._v(t._s((null===(w=n.recordData)||void 0===w?void 0:w.reference)||"-"))])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Payment Method:")]),t._v(" "),e("span",[t._v(t._s((null===(k=n.recordData)||void 0===k||null===(A=k.paymentMethod)||void 0===A?void 0:A.name)||"-"))])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Bank Account:")]),t._v(" "),e("span",[t._v(t._s((null===(T=n.recordData)||void 0===T||null===(S=T.bankAccount)||void 0===S?void 0:S.accountName)||"-"))])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Created:")]),t._v(" "),e("span",[t._v(t._s(t.formatDateTime(null===(z=n.recordData)||void 0===z?void 0:z.createdAt)))])]),t._v(" "),e("div",{staticClass:"detail-item"},[e("label",[t._v("Last Updated:")]),t._v(" "),e("span",[t._v(t._s(t.formatDateTime(null===(L=n.recordData)||void 0===L?void 0:L.updateTimestamp)))])])]),t._v(" "),null!==(E=n.recordData)&&void 0!==E&&E.description?e("div",{staticClass:"description-section"},[e("h4",[t._v("Description")]),t._v(" "),e("p",[t._v(t._s(n.recordData.description))])]):t._e(),t._v(" "),null!==(j=n.recordData)&&void 0!==j&&j.note?e("div",{staticClass:"note-section"},[e("h4",[t._v("Note")]),t._v(" "),e("p",[t._v(t._s(n.recordData.note))])]):t._e(),t._v(" "),null!==(P=n.recordData)&&void 0!==P&&null!==(O=P.invoiceSettlements)&&void 0!==O&&O.length?e("div",{staticClass:"settlements-section"},[e("h4",[t._v("\n            Invoice Settlements ("+t._s(n.recordData.invoiceSettlements.length)+")\n            "),e("span",{staticClass:"total-amount"},[t._v("\n              Total: "+t._s(t.formatCurrency(t.getTotalSettlementAmount(n.recordData.invoiceSettlements)))+"\n            ")])]),t._v(" "),e("div",{staticClass:"settlements-list"},t._l(n.recordData.invoiceSettlements,(function(n){return e("div",{key:n.id,staticClass:"settlement-item"},[e("div",{staticClass:"settlement-header"},[e("span",{staticClass:"settlement-id"},[t._v("Settlement #"+t._s(n.id))]),t._v(" "),e("span",{staticClass:"settlement-amount"},[t._v(t._s(t.formatCurrency(n.amount)))])]),t._v(" "),e("div",{staticClass:"settlement-details"},[e("span",{staticClass:"line-item"},[t._v("Line Item #"+t._s(n.invoiceLineItemId))]),t._v(" "),e("span",{staticClass:"settlement-status",class:"status-".concat(n.status)},[t._v("\n                  "+t._s(t.getStatusText(n.status))+"\n                ")]),t._v(" "),e("span",{staticClass:"settlement-date"},[t._v(t._s(t.formatDateTime(n.createdAt)))])])])})),0)]):t._e(),t._v(" "),null!==(I=n.recordData)&&void 0!==I&&I.maker||null!==(U=n.recordData)&&void 0!==U&&U.checker?e("div",{staticClass:"approval-section"},[e("h4",[t._v("Approval Information")]),t._v(" "),e("div",{staticClass:"approval-grid"},[n.recordData.maker?e("div",{staticClass:"approval-item"},[e("label",[t._v("Maker:")]),t._v(" "),e("span",[t._v(t._s(n.recordData.maker.cus_name||n.recordData.maker.name||"-"))])]):t._e(),t._v(" "),n.recordData.checker?e("div",{staticClass:"approval-item"},[e("label",[t._v("Checker:")]),t._v(" "),e("span",[t._v(t._s(n.recordData.checker.cus_name||n.recordData.checker.name||"-"))])]):t._e()])]):t._e()]):t._e()])})),0):e("div",{staticClass:"empty-state"},[e("i",{staticClass:"fas fa-history"}),t._v(" "),e("h3",[t._v("No settlement audit records found")]),t._v(" "),e("p",[t._v("No changes have been recorded for this settlement yet")])]),t._v(" "),t.pagination.pages>1?e("div",{staticClass:"pagination"},[e("button",{staticClass:"page-btn",attrs:{disabled:t.pagination.page<=1},on:{click:function(e){return t.changePage(t.pagination.page-1)}}},[e("i",{staticClass:"fas fa-chevron-left"})]),t._v(" "),e("span",{staticClass:"page-info"},[t._v("\n      "+t._s(t.pagination.page)+" / "+t._s(t.pagination.pages)+"\n    ")]),t._v(" "),e("button",{staticClass:"page-btn",attrs:{disabled:t.pagination.page>=t.pagination.pages},on:{click:function(e){return t.changePage(t.pagination.page+1)}}},[e("i",{staticClass:"fas fa-chevron-right"})])]):t._e()])}),[],!1,null,"749b7dea",null);e.default=component.exports}}]);