(window.webpackJsonp=window.webpackJsonp||[]).push([[217],{1252:function(t,e,n){var content=n(1559);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("3b3c767c",content,!0,{sourceMap:!1})},1558:function(t,e,n){"use strict";n(1252)},1559:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".bank-account-settlement-report[data-v-061f3d6a]{padding:0}.report-header[data-v-061f3d6a]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:8px;color:#fff;display:flex;justify-content:space-between;margin-bottom:24px;padding:20px}.title-section h1[data-v-061f3d6a]{font-size:28px;font-weight:600;margin:0}.title-section p[data-v-061f3d6a]{font-size:14px;margin:5px 0 0;opacity:.9}.action-buttons[data-v-061f3d6a]{display:flex;gap:12px}.filter-card[data-v-061f3d6a]{background:#fff}.filter-title[data-v-061f3d6a]{background:#f8f9fa;color:#495057;font-weight:600}.filter-actions[data-v-061f3d6a]{align-items:center;display:flex;gap:12px;margin-top:20px}.summary-cards[data-v-061f3d6a]{margin-bottom:24px}.summary-card[data-v-061f3d6a]{height:140px;overflow:hidden;position:relative}.summary-content[data-v-061f3d6a]{align-items:center;display:flex;height:100%}.summary-icon[data-v-061f3d6a]{font-size:48px;margin-right:16px;opacity:.8}.summary-details h3[data-v-061f3d6a]{color:#333;font-size:16px;font-weight:600;margin:0}.summary-details p[data-v-061f3d6a]{color:#666;font-size:12px;margin:4px 0}.summary-details h2[data-v-061f3d6a]{font-size:24px;font-weight:700;margin:8px 0 0}.summary-lcy[data-v-061f3d6a]{font-size:11px;margin-top:4px!important;opacity:.8}.total-accounts-card[data-v-061f3d6a]{background:linear-gradient(135deg,#a8edea,#fed6e3);color:#333}.settlement-card[data-v-061f3d6a]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.amount-card[data-v-061f3d6a]{background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff}.lak-card[data-v-061f3d6a]{background:linear-gradient(135deg,#fbbf24,#f59e0b);color:#fff}.currency-breakdown[data-v-061f3d6a]{margin-bottom:24px}.currency-card[data-v-061f3d6a]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;height:100%;padding:16px;text-align:center}.currency-header[data-v-061f3d6a]{align-items:center;display:flex;justify-content:space-between;margin-bottom:12px}.currency-flag[data-v-061f3d6a]{font-size:24px}.currency-stats[data-v-061f3d6a]{text-align:center}.original-amount[data-v-061f3d6a]{color:#333;font-family:monospace;font-size:18px;font-weight:700;margin-bottom:4px}.lak-equivalent[data-v-061f3d6a]{color:#f59e0b;font-family:monospace;font-size:14px;font-weight:600;margin-bottom:8px}.settlement-count[data-v-061f3d6a]{color:#666;font-size:12px;margin-bottom:4px}.percentage[data-v-061f3d6a]{color:#999;font-size:11px}.exchange-rate-cell[data-v-061f3d6a]{text-align:center}.exchange-rate-cell .default-rate[data-v-061f3d6a]{color:#999;font-style:italic}.lak-amount-cell[data-v-061f3d6a]{text-align:center}.lak-amount[data-v-061f3d6a]{color:#f59e0b;font-family:monospace;font-size:13px;font-weight:600}.chart-card[data-v-061f3d6a]{margin-bottom:24px}.chart-container[data-v-061f3d6a]{height:400px;position:relative}.table-card[data-v-061f3d6a]{margin-bottom:24px}.table-title[data-v-061f3d6a]{background:#f8f9fa;color:#495057;font-weight:600}.search-field[data-v-061f3d6a]{max-width:300px}.bank-account-card[data-v-061f3d6a]{cursor:pointer;height:100%;transition:all .3s ease}.bank-account-card[data-v-061f3d6a]:hover{box-shadow:0 8px 25px rgba(0,0,0,.15)!important;transform:translateY(-4px)}.bank-account-card.selected[data-v-061f3d6a]{border:2px solid #1976d2}.bank-account-header[data-v-061f3d6a]{align-items:flex-start;display:flex;justify-content:space-between}.bank-info h3[data-v-061f3d6a]{color:#333;font-size:16px;font-weight:600;margin:0}.bank-account-number[data-v-061f3d6a]{color:#666;font-family:monospace;font-size:12px;margin:4px 0}.bank-name[data-v-061f3d6a]{color:#999;font-size:11px;font-style:italic;margin:0}.bank-icon[data-v-061f3d6a]{color:#1976d2;font-size:24px;opacity:.7}.bank-stats[data-v-061f3d6a]{margin-top:12px}.stat-item[data-v-061f3d6a]{align-items:center;display:flex;justify-content:space-between;margin-bottom:8px}.stat-label[data-v-061f3d6a]{color:#666;font-size:12px}.stat-value[data-v-061f3d6a]{font-size:13px;font-weight:600}.amount-value[data-v-061f3d6a]{color:#4caf50}.count-value[data-v-061f3d6a]{color:#2196f3}.average-value[data-v-061f3d6a]{color:#ff9800}.progress-section[data-v-061f3d6a]{margin-top:12px}.progress-label[data-v-061f3d6a]{color:#666;font-size:11px;margin-bottom:4px}.no-data-state[data-v-061f3d6a]{padding:48px 24px;text-align:center}.no-data-icon[data-v-061f3d6a]{color:#ccc;font-size:64px;margin-bottom:16px}.no-data-title[data-v-061f3d6a]{color:#666;font-size:18px;margin:0 0 8px}.no-data-subtitle[data-v-061f3d6a]{color:#999;font-size:14px;margin:0}.dialog-header[data-v-061f3d6a]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.section-title[data-v-061f3d6a]{color:#333;font-size:18px;font-weight:600;margin:0}.detail-stat[data-v-061f3d6a]{align-items:center;background:#f8f9fa;border-radius:8px;display:flex;height:100%;padding:16px}.stat-icon[data-v-061f3d6a]{color:#1976d2;font-size:24px;margin-right:12px}.stat-info strong[data-v-061f3d6a]{color:#666;display:block;font-size:12px;margin-bottom:4px}.stat-number[data-v-061f3d6a]{font-family:monospace;font-size:16px;font-weight:600;margin:0}.method-card[data-v-061f3d6a]{background:#f8f9fa;border-radius:8px;padding:16px;text-align:center}.method-header[data-v-061f3d6a]{margin-bottom:12px}.method-count[data-v-061f3d6a]{color:#666;font-size:14px;margin-bottom:4px}.method-amount[data-v-061f3d6a]{font-family:monospace;font-size:18px;font-weight:600}.settlement-table[data-v-061f3d6a]{background:#fff}.date-cell[data-v-061f3d6a]{font-family:monospace;font-size:13px}.amount-breakdown[data-v-061f3d6a]{align-items:center;display:flex;flex-direction:column}.amount-cell[data-v-061f3d6a]{font-family:monospace;font-size:13px;font-weight:600}.exchange-rate[data-v-061f3d6a]{color:#666;font-size:10px;margin-top:2px}.user-info .user-name[data-v-061f3d6a]{font-weight:500}.advance-info .advance-status[data-v-061f3d6a]{color:#666;font-size:10px;margin-top:2px}.no-advance[data-v-061f3d6a]{color:#999;font-style:italic}@media print{.action-buttons[data-v-061f3d6a],.filter-card[data-v-061f3d6a],.v-btn[data-v-061f3d6a]{display:none!important}.chart-card[data-v-061f3d6a],.summary-cards[data-v-061f3d6a]{page-break-inside:avoid}}@media (max-width:768px){.report-header[data-v-061f3d6a]{gap:16px}.report-header[data-v-061f3d6a],.summary-content[data-v-061f3d6a]{flex-direction:column;text-align:center}.summary-icon[data-v-061f3d6a]{margin-bottom:8px;margin-right:0}.chart-container[data-v-061f3d6a]{height:300px}.filter-actions[data-v-061f3d6a]{flex-direction:column;width:100%}.bank-account-header[data-v-061f3d6a]{flex-direction:column;text-align:center}.bank-icon[data-v-061f3d6a]{margin-top:8px}}",""]),r.locals={},t.exports=r},1743:function(t,e,n){"use strict";n.r(e);var r,o=n(316),c=n(313),l=n(18),d=n(317),m=n(780),f=n(789),v=n(1625),h=n(754),x=n(312),C=n(167),y=n(318),_=n(252),k=n(314),A=n(779),D=n(65),w=n(777),S=n(113),z=(n(34),n(131),n(35),n(3)),B=n(20),R=n(33),M=(n(92),n(5),n(9),n(39),n(51),n(30),n(44),n(54),n(53),n(446),n(66),n(8),n(10),n(62),n(818),n(858)),L={name:"BankAccountSettlementReport",head:function(){return{title:"Bank Account Settlement Reports"}},data:function(){return{loading:!1,exporting:!1,loadingDetails:!1,search:"",startDateMenu:!1,endDateMenu:!1,settlementDialog:!1,bankAccountStats:[],selectedBankAccount:null,selectedSettlements:[],settlementSummary:{totalAmount:0,settlementCount:0,averageAmount:0},methodDistribution:[],pagination:{currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10},filters:{startDate:null,endDate:null,method:"",currencyId:null},settlementMethods:[{text:"ທັງໝົດ (All Methods)",value:""},{text:"ເງິນສົດ (Cash)",value:"cash"},{text:"ໂອນເງິນຜ່ານທະນາຄານ (Bank Transfer)",value:"bank_transfer"},{text:"ຫັກລົບ (Deduction)",value:"deduction"}],currencyOptions:[{text:"ທັງໝົດສະກຸນເງິນ (All Currencies)",value:null},{text:"ລາວກີບ (LAK)",value:1},{text:"ໂດລາອາເມລິກັນ (USD)",value:2},{text:"ບາດໄທ (THB)",value:3},{text:"ຢວນຈີນ (CNY)",value:4},{text:"ເອີໂຣ (EUR)",value:5}],currencyBreakdown:[],bankAccountChart:null,settlementHeaders:[{text:"ວັນທີ",value:"bookingDate",width:"120px"},{text:"ສະກຸນເງິນ",value:"currency",width:"80px"},{text:"ຈຳນວນເງິນຕົ້ນ",value:"amount",width:"130px"},{text:"ອັດຕາແລກປ່ຽນ",value:"exchangeRate",width:"100px"},{text:"ເທົ່າກັບລາວກີບ",value:"lakAmount",width:"130px"},{text:"ວິທີການ",value:"method",width:"120px"},{text:"ຜູ້ດຳເນີນການ",value:"proceeder",width:"150px"},{text:"ເງິນກ່ອນ",value:"moneyAdvance",width:"120px"},{text:"ຈັດການ",value:"actions",sortable:!1,width:"100px"}]}},computed:{uniqueCurrencies:function(){return this.currencyBreakdown.length||0},totalLakAmount:function(){return this.currencyBreakdown.reduce((function(t,e){return t+(e.lakEquivalent||0)}),0)},filteredBankAccounts:function(){var t=this;return this.search?this.bankAccountStats.filter((function(e){var n,r,o,c;return(null===(n=e.bankAccount)||void 0===n||null===(r=n.accountName)||void 0===r?void 0:r.toLowerCase().includes(t.search.toLowerCase()))||(null===(o=e.bankAccount)||void 0===o||null===(c=o.accountNumber)||void 0===c?void 0:c.includes(t.search))})):this.bankAccountStats},totalSettlementsCount:function(){return this.bankAccountStats.reduce((function(t,e){return t+parseInt(e.count)}),0)},totalAmount:function(){return this.bankAccountStats.reduce((function(t,e){return t+parseFloat(e.total)}),0)},averageAmount:function(){return this.totalSettlementsCount>0?this.totalAmount/this.totalSettlementsCount:0},maxAmount:function(){return Math.max.apply(Math,Object(R.a)(this.bankAccountStats.map((function(t){return parseFloat(t.total)}))).concat([0]))}},mounted:function(){var t=this;this.setDefaultDates(),this.loadDashboardData(),this.$nextTick((function(){t.initializeChart()}))},beforeDestroy:function(){this.bankAccountChart&&this.bankAccountChart.destroy()},methods:(r={getCurrencyColor:function(t){return{LAK:"orange",USD:"green",THB:"blue",CNY:"red",EUR:"purple",JPY:"pink",GBP:"indigo",KRW:"teal"}[t]||"grey"},getCurrencyFlag:function(t){return{LAK:"🇱🇦",USD:"🇺🇸",THB:"🇹🇭",CNY:"🇨🇳",EUR:"🇪🇺",JPY:"🇯🇵",GBP:"🇬🇧",KRW:"🇰🇷"}[t]||"🏳️"},calculateLakAmount:function(t,e){return t?t*(e||1):0},formatCurrency:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";if(!t)return"0.00";var n=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return"LAK"===e?n+" ₭":"USD"===e?"$"+n:"THB"===e?n+" ฿":"CNY"===e?"¥"+n:"EUR"===e?"€"+n:n+" "+e},setDefaultDates:function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1);this.filters.startDate=e.toISOString().substr(0,10),this.filters.endDate=t.toISOString().substr(0,10)},loadDashboardData:function(){var t=this;return Object(B.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=new URLSearchParams,t.filters.startDate&&n.append("startDate",t.filters.startDate),t.filters.endDate&&n.append("endDate",t.filters.endDate),t.filters.method&&n.append("method",t.filters.method),t.filters.currencyId&&n.append("currencyId",t.filters.currencyId),e.next=9,t.$axios.get("/api/settlements/dashboard?".concat(n));case 9:if(!(r=e.sent).data.success){e.next=15;break}return t.bankAccountStats=r.data.data.byBankAccount||[],e.next=14,t.calculateCurrencyBreakdown();case 14:t.updateChart();case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error loading dashboard data:",e.t0),t.$toast.error("Failed to load bank account reports");case 21:return e.prev=21,t.loading=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,17,21,24]])})))()},calculateCurrencyBreakdown:function(){var t=this;return Object(B.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URLSearchParams,t.filters.startDate&&n.append("startDate",t.filters.startDate),t.filters.endDate&&n.append("endDate",t.filters.endDate),t.filters.method&&n.append("method",t.filters.method),t.filters.currencyId&&n.append("currencyId",t.filters.currencyId),e.next=8,t.$axios.get("/api/settlements/currency-breakdown?".concat(n));case 8:(r=e.sent).data.success&&(t.currencyBreakdown=r.data.data.currencies||[]),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error calculating currency breakdown:",e.t0),t.currencyBreakdown=[];case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},selectBankAccount:function(t){var e=this;return Object(B.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loadingDetails=!0,e.settlementDialog=!0,n.prev=2,n.next=5,e.$axios.get("/api/settlements/by-bank-account/".concat(t));case 5:(r=n.sent).data.success&&(e.selectedSettlements=r.data.data.settlements,e.settlementSummary=r.data.data.summary,e.pagination=r.data.data.pagination||e.pagination,o=e.bankAccountStats.find((function(s){return s.bankAccountId==t})),e.selectedBankAccount=o?o.bankAccount:null,e.calculateMethodDistribution()),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),console.error("Error loading bank account settlements:",n.t0),e.$toast.error("Failed to load settlement details");case 13:return n.prev=13,e.loadingDetails=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[2,9,13,16]])})))()},calculateMethodDistribution:function(){var t={};this.selectedSettlements.forEach((function(e){t[e.method]||(t[e.method]={count:0,total:0}),t[e.method].count++,t[e.method].total+=parseFloat(e.amount)})),this.methodDistribution=Object.keys(t).map((function(e){return{method:e,count:t[e].count,total:t[e].total}}))},resetFilters:function(){this.filters={startDate:null,endDate:null,method:""},this.setDefaultDates(),this.loadDashboardData()},initializeChart:function(){if(this.$refs.bankAccountChart){var t=this.$refs.bankAccountChart.getContext("2d");this.bankAccountChart=new M.default(t,{type:"bar",data:{labels:[],datasets:[{label:"ຈຳນວນເງິນ (Amount)",data:[],backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"ຈຳນວນການຊຳລະ (Count)",data:[],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y-axis-2"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1",ticks:{beginAtZero:!0,callback:function(t){return"$"+new Intl.NumberFormat("en-US").format(t)}}},{type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0}}]},legend:{position:"bottom"}}})}},updateChart:function(){if(this.bankAccountChart&&0!==this.bankAccountStats.length){var t=this.bankAccountStats.map((function(t){var e;return"".concat((null===(e=t.bankAccount)||void 0===e?void 0:e.accountName)||"Unknown")})).slice(0,10),e=this.bankAccountStats.map((function(t){return parseFloat(t.total)})).slice(0,10),n=this.bankAccountStats.map((function(t){return parseInt(t.count)})).slice(0,10);this.bankAccountChart.data.labels=t,this.bankAccountChart.data.datasets[0].data=e,this.bankAccountChart.data.datasets[1].data=n,this.bankAccountChart.update()}},closeDialog:function(){this.settlementDialog=!1,this.selectedBankAccount=null,this.selectedSettlements=[],this.methodDistribution=[]},exportToExcel:function(){var t=this;return Object(B.a)(regeneratorRuntime.mark((function e(){var n,r,o,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.exporting=!0,e.prev=1,n=new URLSearchParams,Object.keys(t.filters).forEach((function(e){t.filters[e]&&n.append(e,t.filters[e])})),e.next=6,t.$axios.get("/api/settlements/dashboard/export?".concat(n),{responseType:"blob"});case 6:r=e.sent,o=new Blob([r.data]),(link=document.createElement("a")).href=window.URL.createObjectURL(o),link.download="bank-account-settlement-report-".concat(t.filters.startDate,"-").concat(t.filters.endDate,".xlsx"),link.click(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error exporting report:",e.t0),t.$toast.error("Error exporting report");case 18:return e.prev=18,t.exporting=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})))()},printReport:function(){window.print()},viewSettlement:function(t){this.$router.push("/settlements/".concat(t))}},Object(z.a)(r,"formatCurrency",(function(t){return t?new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t):"0.00"})),Object(z.a)(r,"formatExchangeRate",(function(t){return t?new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}).format(t):"1.0000"})),Object(z.a)(r,"formatDate",(function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})),Object(z.a)(r,"formatMethod",(function(t){return{cash:"ເງິນສົດ (Cash)",bank_transfer:"ໂອນເງິນ (Transfer)",deduction:"ຫັກລົບ (Deduction)"}[t]||t})),Object(z.a)(r,"getMethodColor",(function(t){return{cash:"green",bank_transfer:"blue",deduction:"orange"}[t]||"grey"})),r)},I=L,$=(n(1558),n(32)),component=Object($.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bank-account-settlement-report"},[e("div",{staticClass:"report-header"},[t._m(0),t._v(" "),e("div",{staticClass:"action-buttons"},[e(o.a,{attrs:{color:"success",loading:t.exporting},on:{click:t.exportToExcel}},[e("i",{staticClass:"fas fa-file-excel"}),t._v("\n        Export Excel\n      ")]),t._v(" "),e(o.a,{attrs:{color:"primary"},on:{click:t.printReport}},[e("i",{staticClass:"fas fa-print"}),t._v("\n        Print\n      ")])],1)]),t._v(" "),e(c.a,{staticClass:"filter-card mb-4",attrs:{elevation:"2"}},[e(l.d,{staticClass:"filter-title"},[e("i",{staticClass:"fas fa-filter"}),t._v("\n      ຕົວກອງ (Filters)\n    ")]),t._v(" "),e(l.c,[e(A.a,[e(m.a,{attrs:{cols:"12",md:"2"}},[e(y.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(S.a,t._g(t._b({attrs:{label:"ວັນທີເລີ່ມຕົ້ນ (Start Date)","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.filters.startDate,callback:function(e){t.$set(t.filters,"startDate",e)},expression:"filters.startDate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.startDateMenu,callback:function(e){t.startDateMenu=e},expression:"startDateMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.startDateMenu=!1}},model:{value:t.filters.startDate,callback:function(e){t.$set(t.filters,"startDate",e)},expression:"filters.startDate"}})],1)],1),t._v(" "),e(m.a,{attrs:{cols:"12",md:"2"}},[e(y.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(S.a,t._g(t._b({attrs:{label:"ວັນທີສິ້ນສຸດ (End Date)","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.filters.endDate,callback:function(e){t.$set(t.filters,"endDate",e)},expression:"filters.endDate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.endDateMenu,callback:function(e){t.endDateMenu=e},expression:"endDateMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.endDateMenu=!1}},model:{value:t.filters.endDate,callback:function(e){t.$set(t.filters,"endDate",e)},expression:"filters.endDate"}})],1)],1),t._v(" "),e(m.a,{attrs:{cols:"12",md:"2"}},[e(D.a,{attrs:{items:t.settlementMethods,"item-text":"text","item-value":"value",label:"ວິທີການຊຳລະ (Settlement Method)","prepend-icon":"mdi-credit-card",clearable:""},model:{value:t.filters.method,callback:function(e){t.$set(t.filters,"method",e)},expression:"filters.method"}})],1),t._v(" "),e(m.a,{attrs:{cols:"12",md:"2"}},[e(D.a,{attrs:{items:t.currencyOptions,"item-text":"text","item-value":"value",label:"ສະກຸນເງິນ (Currency)","prepend-icon":"mdi-currency-usd",clearable:""},model:{value:t.filters.currencyId,callback:function(e){t.$set(t.filters,"currencyId",e)},expression:"filters.currencyId"}})],1),t._v(" "),e(m.a,{attrs:{cols:"12",md:"2"}},[e(o.a,{attrs:{color:"primary",loading:t.loading,block:""},on:{click:t.loadDashboardData}},[e("i",{staticClass:"fas fa-search"}),t._v("\n            ຄົ້ນຫາ\n          ")])],1),t._v(" "),e(m.a,{attrs:{cols:"12",md:"2"}},[e(o.a,{attrs:{color:"secondary",block:""},on:{click:t.resetFilters}},[e("i",{staticClass:"fas fa-undo"}),t._v("\n            ຣີເຊັດ\n          ")])],1)],1)],1)],1),t._v(" "),t.loading?t._e():e(A.a,{staticClass:"summary-cards mb-4"},[e(m.a,{attrs:{cols:"12",md:"3"}},[e(c.a,{staticClass:"summary-card total-accounts-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-university"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ທັງໝົດບັນຊີ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total Accounts")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v(t._s(t.bankAccountStats.length))]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("Active Bank Accounts")])])])])],1)],1),t._v(" "),e(m.a,{attrs:{cols:"12",md:"3"}},[e(c.a,{staticClass:"summary-card settlement-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-money-bill-wave"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ຈຳນວນການຊຳລະ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total Settlements")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v(t._s(t.totalSettlementsCount))]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("Settlement Count")])])])])],1)],1),t._v(" "),e(m.a,{attrs:{cols:"12",md:"3"}},[e(c.a,{staticClass:"summary-card amount-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-coins"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ລວມທຸກສະກຸນ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Multi-Currency Total")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v(t._s(t.uniqueCurrencies))]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v(t._s(t.uniqueCurrencies)+" Currencies")])])])])],1)],1),t._v(" "),e(m.a,{attrs:{cols:"12",md:"3"}},[e(c.a,{staticClass:"summary-card lak-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-calculator"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ລາວກີບ (LAK)")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total LAK Equivalent")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.formatCurrency(t.totalLakAmount,"LAK"))+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("Local Currency")])])])])],1)],1)],1),t._v(" "),!t.loading&&t.currencyBreakdown.length>0?e(A.a,{staticClass:"currency-breakdown mb-4"},[e(m.a,{attrs:{cols:"12"}},[e(c.a,{attrs:{elevation:"2"}},[e(l.d,[e("i",{staticClass:"fas fa-coins"}),t._v("\n          ການແຈກຢາຍຕາມສະກຸນເງິນ (Currency Breakdown)\n        ")]),t._v(" "),e(l.c,[e(A.a,t._l(t.currencyBreakdown,(function(n){return e(m.a,{key:n.currencyCode||n.currencyId,attrs:{cols:"12",md:"4",lg:"3"}},[e("div",{staticClass:"currency-card"},[e("div",{staticClass:"currency-header"},[e(d.a,{attrs:{color:t.getCurrencyColor(n.currencyCode),"text-color":"white",large:""}},[t._v("\n                    "+t._s(n.currencyCode||"LAK")+"\n                  ")]),t._v(" "),e("div",{staticClass:"currency-flag"},[t._v("\n                    "+t._s(t.getCurrencyFlag(n.currencyCode))+"\n                  ")])],1),t._v(" "),e("div",{staticClass:"currency-stats"},[e("div",{staticClass:"original-amount"},[t._v("\n                    "+t._s(t.formatCurrency(n.totalAmount,n.currencyCode))+"\n                  ")]),t._v(" "),e("div",{staticClass:"lak-equivalent"},[t._v("\n                    ≈ "+t._s(t.formatCurrency(n.lakEquivalent,"LAK"))+"\n                  ")]),t._v(" "),e("div",{staticClass:"settlement-count"},[t._v("\n                    "+t._s(n.count)+" ການຊຳລະ\n                  ")]),t._v(" "),e("div",{staticClass:"percentage"},[t._v("\n                    "+t._s(Math.round(n.lakEquivalent/t.totalLakAmount*100))+"% ຂອງທັງໝົດ\n                  ")])])])])})),1)],1)],1)],1)],1):t._e(),t._v(" "),t.loading?e("div",{staticClass:"text-center py-8"},[e(_.a,{attrs:{indeterminate:"",color:"primary",size:"64"}}),t._v(" "),e("p",{staticClass:"mt-4 text-gray-600"},[t._v("\n      ກຳລັງໂຫລດຂໍ້ມູນ... Loading bank account reports...\n    ")])],1):t._e(),t._v(" "),!t.loading&&t.bankAccountStats.length>0?e(c.a,{staticClass:"chart-card mb-4",attrs:{elevation:"2"}},[e(l.d,[e("i",{staticClass:"fas fa-chart-bar"}),t._v("\n      ກາຟສະຫຼຸບຕາມບັນຊີທະນາຄານ (Bank Account Settlement Chart)\n    ")]),t._v(" "),e(l.c,[e("div",{staticClass:"chart-container"},[e("canvas",{ref:"bankAccountChart",attrs:{width:"400",height:"200"}})])])],1):t._e(),t._v(" "),t.loading?t._e():e(c.a,{staticClass:"table-card",attrs:{elevation:"2"}},[e(l.d,{staticClass:"table-title"},[e("i",{staticClass:"fas fa-university"}),t._v("\n      ລາຍລະອຽດບັນຊີທະນາຄານ (Bank Account Details)\n      "),e(w.a),t._v(" "),e(S.a,{staticClass:"search-field",attrs:{"append-icon":"mdi-magnify",label:"ຄົ້ນຫາບັນຊີ...","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),t.bankAccountStats.length>0?e(l.c,[e(A.a,t._l(t.filteredBankAccounts,(function(n){var r,d,f,v;return e(m.a,{key:n.bankAccountId,attrs:{cols:"12",md:"6",lg:"4"}},[e(c.a,{staticClass:"bank-account-card",class:{selected:(null===(r=t.selectedBankAccount)||void 0===r?void 0:r.id)==n.bankAccountId},attrs:{elevation:"2"},on:{click:function(e){return t.selectBankAccount(n.bankAccountId)}}},[e(l.c,[e("div",{staticClass:"bank-account-header"},[e("div",{staticClass:"bank-info"},[e("h3",{staticClass:"bank-account-name"},[t._v("\n                    "+t._s((null===(d=n.bankAccount)||void 0===d?void 0:d.accountName)||"Unknown Account")+"\n                  ")]),t._v(" "),e("p",{staticClass:"bank-account-number"},[t._v("\n                    "+t._s(null===(f=n.bankAccount)||void 0===f?void 0:f.accountNumber)+"\n                  ")]),t._v(" "),e("p",{staticClass:"bank-name"},[t._v("\n                    "+t._s((null===(v=n.bankAccount)||void 0===v?void 0:v.bankName)||"N/A")+"\n                  ")])]),t._v(" "),e("div",{staticClass:"bank-icon"},[e("i",{staticClass:"fas fa-university"})])]),t._v(" "),e(x.a,{staticClass:"my-3"}),t._v(" "),e("div",{staticClass:"bank-stats"},[e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("ລວມຈຳນວນເງິນ:")]),t._v(" "),e("span",{staticClass:"stat-value amount-value"},[t._v("\n                    $"+t._s(t.formatCurrency(n.total))+"\n                  ")])]),t._v(" "),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("ຈຳນວນການຊຳລະ:")]),t._v(" "),e("span",{staticClass:"stat-value count-value"},[t._v("\n                    "+t._s(n.count)+"\n                  ")])]),t._v(" "),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("ຄ່າສະເລ່ຍ:")]),t._v(" "),e("span",{staticClass:"stat-value average-value"},[t._v("\n                    $"+t._s(t.formatCurrency(n.total/n.count))+"\n                  ")])])]),t._v(" "),e("div",{staticClass:"progress-section mt-3"},[e("div",{staticClass:"progress-label"},[t._v("Settlement Volume")]),t._v(" "),e(k.a,{attrs:{value:n.total/t.maxAmount*100,color:"primary",height:"8",rounded:""}})],1),t._v(" "),e("div",{staticClass:"card-actions mt-3"},[e(o.a,{attrs:{small:"",color:"primary",block:""}},[e("i",{staticClass:"fas fa-eye"}),t._v("\n                  ເບິ່ງລາຍລະອຽດ\n                ")])],1)],1)],1)],1)})),1)],1):e(l.c,[e("div",{staticClass:"no-data-state"},[e("div",{staticClass:"no-data-icon"},[e("i",{staticClass:"fas fa-university"})]),t._v(" "),e("h3",{staticClass:"no-data-title"},[t._v("ບໍ່ມີຂໍ້ມູນບັນຊີທະນາຄານ")]),t._v(" "),e("p",{staticClass:"no-data-subtitle"},[t._v("\n          No bank account settlement data found for the selected filters.\n        ")])])])],1),t._v(" "),e(h.a,{attrs:{"max-width":"1200px",scrollable:""},model:{value:t.settlementDialog,callback:function(e){t.settlementDialog=e},expression:"settlementDialog"}},[t.selectedBankAccount?e(c.a,[e(l.d,{staticClass:"dialog-header"},[e("i",{staticClass:"fas fa-university"}),t._v("\n        ລາຍລະອຽດການຊຳລະ - "+t._s(t.selectedBankAccount.accountName)+"\n        "),e(w.a),t._v(" "),e(o.a,{attrs:{icon:""},on:{click:t.closeDialog}},[e(C.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(l.c,[e(A.a,{staticClass:"summary-section mb-4"},[e(m.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("\n              ສະຫຼຸບບັນຊີທະນາຄານ (Account Summary)\n            ")]),t._v(" "),e(x.a,{staticClass:"mb-3"})],1),t._v(" "),e(m.a,{attrs:{cols:"6",md:"3"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-list-ol"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ຈຳນວນການຊຳລະ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  "+t._s(t.settlementSummary.settlementCount)+"\n                ")])])])]),t._v(" "),e(m.a,{attrs:{cols:"6",md:"3"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-dollar-sign"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ລວມຈຳນວນເງິນ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  $"+t._s(t.formatCurrency(t.settlementSummary.totalAmount))+"\n                ")])])])]),t._v(" "),e(m.a,{attrs:{cols:"6",md:"3"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-calculator"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ຄ່າສະເລ່ຍ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  $"+t._s(t.formatCurrency(t.settlementSummary.totalAmount/t.settlementSummary.settlementCount))+"\n                ")])])])]),t._v(" "),e(m.a,{attrs:{cols:"6",md:"3"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-university"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("ເລກບັນຊີ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  "+t._s(t.selectedBankAccount.accountNumber)+"\n                ")])])])])],1),t._v(" "),t.methodDistribution.length>0?e(A.a,{staticClass:"method-distribution mb-4"},[e(m.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("\n              ການແຈກຢາຍຕາມວິທີການ (Method Distribution)\n            ")]),t._v(" "),e(x.a,{staticClass:"mb-3"})],1),t._v(" "),t._l(t.methodDistribution,(function(n){return e(m.a,{key:n.method,attrs:{cols:"12",md:"4"}},[e("div",{staticClass:"method-card"},[e("div",{staticClass:"method-header"},[e(d.a,{attrs:{color:t.getMethodColor(n.method),"text-color":"white",small:""}},[t._v("\n                  "+t._s(t.formatMethod(n.method))+"\n                ")])],1),t._v(" "),e("div",{staticClass:"method-stats"},[e("div",{staticClass:"method-count"},[t._v(t._s(n.count)+" ການຊຳລະ")]),t._v(" "),e("div",{staticClass:"method-amount"},[t._v("\n                  $"+t._s(t.formatCurrency(n.total))+"\n                ")])])])])}))],2):t._e(),t._v(" "),e(A.a,[e(m.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("\n              ລາຍການການຊຳລະ (Settlement Transactions)\n            ")]),t._v(" "),e(x.a,{staticClass:"mb-3"}),t._v(" "),e(f.a,{staticClass:"settlement-table",attrs:{headers:t.settlementHeaders,items:t.selectedSettlements,loading:t.loadingDetails,"items-per-page":10,"footer-props":{itemsPerPageOptions:[5,10,25,50],itemsPerPageText:"ແຖວຕໍ່ໜ້າ:"}},scopedSlots:t._u([{key:"item.bookingDate",fn:function(n){var r=n.item;return[e("span",{staticClass:"date-cell"},[t._v(t._s(t.formatDate(r.bookingDate)))])]}},{key:"item.currency",fn:function(n){var r,o,c=n.item;return[e(d.a,{attrs:{color:t.getCurrencyColor(null===(r=c.currency)||void 0===r?void 0:r.code),"text-color":"white",small:""}},[t._v("\n                  "+t._s((null===(o=c.currency)||void 0===o?void 0:o.code)||"LAK")+"\n                ")])]}},{key:"item.amount",fn:function(n){var r,o=n.item;return[e("div",{staticClass:"amount-breakdown"},[e("span",{staticClass:"amount-cell"},[t._v(t._s(t.formatCurrency(o.amount,null===(r=o.currency)||void 0===r?void 0:r.code)))])])]}},{key:"item.exchangeRate",fn:function(n){var r=n.item;return[e("div",{staticClass:"exchange-rate-cell"},[r.exchangeRate&&1!==r.exchangeRate?e("span",[t._v("\n                    "+t._s(t.formatExchangeRate(r.exchangeRate))+"\n                  ")]):e("span",{staticClass:"default-rate"},[t._v("1.0000")])])]}},{key:"item.lakAmount",fn:function(n){var r=n.item;return[e("div",{staticClass:"lak-amount-cell"},[e("span",{staticClass:"lak-amount"},[t._v(t._s(t.formatCurrency(t.calculateLakAmount(r.amount,r.exchangeRate),"LAK")))])])]}},{key:"item.method",fn:function(n){var r=n.item;return[e(d.a,{attrs:{color:t.getMethodColor(r.method),"text-color":"white",small:""}},[t._v("\n                  "+t._s(t.formatMethod(r.method))+"\n                ")])]}},{key:"item.proceeder",fn:function(n){var r,o=n.item;return[e("div",{staticClass:"user-info"},[e("span",{staticClass:"user-name"},[t._v(t._s((null===(r=o.proceeder)||void 0===r?void 0:r.name)||"N/A"))])])]}},{key:"item.moneyAdvance",fn:function(n){var r=n.item;return[r.moneyAdvance?e("div",{staticClass:"advance-info"},[e(d.a,{attrs:{color:"blue","text-color":"white",small:""}},[t._v("\n                    #"+t._s(r.moneyAdvance.id)+"\n                  ")]),t._v(" "),e("div",{staticClass:"advance-status"},[t._v("\n                    "+t._s(r.moneyAdvance.status)+"\n                  ")])],1):e("span",{staticClass:"no-advance"},[t._v("Standalone")])]}},{key:"item.actions",fn:function(n){var r=n.item;return[e(o.a,{attrs:{small:"",color:"primary"},on:{click:function(e){return t.viewSettlement(r.id)}}},[e("i",{staticClass:"fas fa-eye"}),t._v("\n                  ເບິ່ງ\n                ")])]}}],null,!1,1833622732)})],1)],1)],1)],1):t._e()],1)],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title-section"},[e("h1",{staticClass:"page-title"},[e("i",{staticClass:"fas fa-university"}),t._v("\n        ລາຍງານຊຳລະຕາມບັນຊີທະນາຄານ\n      ")]),t._v(" "),e("p",{staticClass:"page-subtitle"},[t._v("Bank Account Settlement Report")])])}],!1,null,"061f3d6a",null);e.default=component.exports}}]);