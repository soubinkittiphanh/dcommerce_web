(window.webpackJsonp=window.webpackJsonp||[]).push([[190,85,86,87,88,89],{1193:function(t,e,r){var content=r(1418);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("1b09a39a",content,!0,{sourceMap:!1})},1297:function(t,e,r){"use strict";r.r(e);r(44),r(9),r(5),r(10),r(7),r(11),r(8),r(12);var n=r(20),o=r(3),c=r(27);r(92),r(66),r(209),r(30),r(333),r(68),r(63),r(35);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"MoneyAdvanceDialog",components:{VoucherPrintComponent:r(999).default},props:{show:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},formData:{type:Object,default:function(){return{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",exchangeRate:"",method:"cash",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""}}},users:{type:Array,default:function(){return[]}},currencies:{type:Array,default:function(){return[]}},bankAccounts:{type:Array,default:function(){return[]}},ministries:{type:Array,default:function(){return[]}},formLoading:{type:Boolean,default:!1},saving:{type:Boolean,default:!1}},data:function(){return{advanceDetails:null,showPrintVoucher:!1,localForm:{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",exchangeRate:"",method:"cash",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""},formErrors:[]}},computed:{user:function(){return this.$auth.user||""},selectedCurrencyCode:function(){var t=this;if(!this.localForm.currencyId)return"USD";var e=this.currencies.find((function(e){return e.id==t.localForm.currencyId}));return e?e.code:"USD"},selectedBankAccount:function(){var t=this;return this.localForm.bankAccountId?this.bankAccounts.find((function(e){return e.id==t.localForm.bankAccountId})):null},selectedMinistry:function(){var t=this;return this.localForm.ministryId?this.ministries.find((function(e){return e.id==t.localForm.ministryId})):null},selectedCurrency:function(){var t=this;return this.localForm.currencyId?this.currencies.find((function(e){return e.id==t.localForm.currencyId})):null},filteredBankAccounts:function(){if(!this.selectedCurrency||!this.bankAccounts.length)return this.bankAccounts;var t=this.selectedCurrency.code,e=this.bankAccounts.filter((function(e){return e.currency===t||!e.currency}));return e.length>0?e:this.bankAccounts},today:function(){return(new Date).toISOString().split("T")[0]},isFormValid:function(){var t={"amount exists":!!this.localForm.amount,"amount > 0":this.localForm.amount&&parseFloat(this.localForm.amount)>0,"makerId exists":!!this.localForm.makerId,"currencyId exists":!!this.localForm.currencyId,"bookingDate exists":!!this.localForm.bookingDate,"method exists":!!this.localForm.method,"users available":this.users.length>0,"currencies available":this.currencies.length>0,"exchange rate valid":!this.localForm.exchangeRate||this.localForm.exchangeRate&&!isNaN(parseFloat(this.localForm.exchangeRate))&&parseFloat(this.localForm.exchangeRate)>0,"externalRef valid":!this.localForm.externalRef||this.localForm.externalRef.length<=100,"externalRefNo valid":!this.localForm.externalRefNo||this.localForm.externalRefNo.length<=50,"chequeNo valid":!this.localForm.chequeNo||this.localForm.chequeNo.length<=50,"receiveName valid":!this.localForm.receiveName||this.localForm.receiveName.length<=100,"receiveIDNO valid":!this.localForm.receiveIDNO||this.localForm.receiveIDNO.length<=20,"cheque number required":"cheque"!==this.localForm.method||"cheque"===this.localForm.method&&!!this.localForm.chequeNo,"bank account required":"bank_transfer"!==this.localForm.method||"bank_transfer"===this.localForm.method&&!!this.localForm.bankAccountId};return Object.values(t).every(Boolean)}},watch:{show:function(t){t&&this.initForm()},formData:{handler:function(t){console.info("Form data is changing...",t),t&&"object"===Object(c.a)(t)&&(this.localForm=d(d({},this.getDefaultForm()),t),this.localForm.method&&""!==this.localForm.method||(this.localForm.method="cash",console.info("🔧 Setting method to default: cash")),this.isEdit||this.localForm.bookingDate||(this.localForm.bookingDate=this.today))},deep:!0,immediate:!0},"localForm.method":function(t,e){console.info('Method changed from "'.concat(e,'" to "').concat(t,'"')),e&&t!==e&&this.handleMethodChange()}},mounted:function(){console.info("🔧 Component mounted, initializing form..."),this.initForm()},methods:{getDefaultForm:function(){return{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:this.today,exchangeRate:"",method:"cash",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""}},formatDisplayDate:function(t){if(!t)return"";try{var e=new Date(t),r=e.getDate().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();return"".concat(r,"/").concat(n,"/").concat(o)}catch(e){return t}},formatVoucherNumber:function(t){return String(t).padStart(6,"0")},fetchAdvanceByid:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.localForm.id){e.next=2;break}return e.abrupt("return",t.showToast("ກະລຸນາບັນທຶກຂໍ້ມູນກ່ອນ","error"));case 2:return t.loading=!0,e.prev=3,e.next=6,t.$axios.get("/api/money-advances/".concat(t.localForm.id));case 6:r=e.sent,data=r.data,t.advanceDetails=data.data,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t.showToast("Error fetching money advances","error"),console.error(e.t0);case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})))()},printAdvanceDetails:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchAdvanceByid();case 2:t.showPrintVoucher=!0;case 3:case"end":return e.stop()}}),e)})))()},closePrintVoucher:function(){var t=this;this.showPrintVoucher=!1,setTimeout((function(){t.advanceDetails=null}),100)},initForm:function(){if(this.formErrors=[],console.info("🔧 initForm called with formData:",this.formData),this.isEdit&&this.formData&&this.formData.id)console.info("🔧 Edit mode - copying formData with defaults preserved"),this.localForm=d(d({},this.getDefaultForm()),this.formData),this.localForm.method&&""!==this.localForm.method||(this.localForm.method="cash",console.info("🔧 Edit mode: Setting method to default cash"));else{if(console.info("🔧 New mode - using defaults"),this.localForm=this.getDefaultForm(),this.currencies.length>0){var t=this.currencies.find((function(t){return"LAK"===t.code}))||this.currencies[0];this.localForm.currencyId=t.id}this.user&&this.user.id&&(this.localForm.makerId=this.user.id)}this.localForm.method||(this.localForm.method="cash",console.info("🔧 Final fallback: Setting method to cash")),console.info("🔧 Final localForm:",this.localForm)},resetForm:function(){console.info("🔧 resetForm called"),this.localForm=this.getDefaultForm()},validateForm:function(){return this.formErrors=[],(!this.localForm.amount||parseFloat(this.localForm.amount)<=0)&&this.formErrors.push("Amount is required and must be greater than 0"),this.localForm.makerId||this.formErrors.push("User selection is required"),this.localForm.currencyId||this.formErrors.push("Currency selection is required"),this.localForm.bookingDate||this.formErrors.push("Booking date is required"),this.localForm.method||this.formErrors.push("Payment method is required"),"cheque"!==this.localForm.method||this.localForm.chequeNo||this.formErrors.push("Cheque number is required when payment method is cheque"),"bank_transfer"!==this.localForm.method||this.localForm.bankAccountId||this.formErrors.push("Bank account is required when payment method is bank transfer"),this.localForm.purpose&&this.localForm.purpose.length>255&&this.formErrors.push("Purpose must not exceed 255 characters"),this.localForm.note&&this.localForm.note.length>500&&this.formErrors.push("Note must not exceed 500 characters"),this.localForm.exchangeRate&&parseFloat(this.localForm.exchangeRate)<=0&&this.formErrors.push("Exchange rate must be greater than 0 if provided"),this.localForm.externalRef&&this.localForm.externalRef.length>100&&this.formErrors.push("External reference must not exceed 100 characters"),this.localForm.externalRefNo&&this.localForm.externalRefNo.length>50&&this.formErrors.push("External reference number must not exceed 50 characters"),this.localForm.chequeNo&&this.localForm.chequeNo.length>50&&this.formErrors.push("Cheque number must not exceed 50 characters"),this.localForm.receiveName&&this.localForm.receiveName.length>100&&this.formErrors.push("Receiver name must not exceed 100 characters"),this.localForm.receiveIDNO&&this.localForm.receiveIDNO.length>20&&this.formErrors.push("Receiver ID number must not exceed 20 characters"),this.localForm.chequeNo&&!/^[a-zA-Z0-9\-\/]*$/.test(this.localForm.chequeNo)&&this.formErrors.push("Cheque number can only contain letters, numbers, hyphens, and forward slashes"),this.localForm.receiveIDNO&&!/^[a-zA-Z0-9]*$/.test(this.localForm.receiveIDNO)&&this.formErrors.push("Receiver ID number can only contain letters and numbers"),0===this.users.length&&this.formErrors.push("No users available. Please contact administrator."),0===this.currencies.length&&this.formErrors.push("No currencies available. Please contact administrator."),0===this.formErrors.length},updateSelectedCurrency:function(){var t=this;if(console.info("select currency: ".concat(this.selectedCurrency.code," currency list ").concat(JSON.stringify(this.currencies))),this.localForm.exchangeRate=this.currencies.find((function(e){return e.code===t.selectedCurrency.code})).rate||1,this.selectedBankAccount&&this.selectedCurrency){var e=this.selectedBankAccount.currency,r=this.selectedCurrency.code;e&&e!==r&&(this.localForm.bankAccountId="")}this.$emit("currency-changed",this.localForm.currencyId)},updateSelectedBankAccount:function(){this.$emit("bank-account-changed",this.localForm.bankAccountId)},updateSelectedMinistry:function(){this.$emit("ministry-changed",this.localForm.ministryId)},handleMethodChange:function(){var t=this.localForm.method;console.info("🔧 handleMethodChange: ".concat(t)),"cheque"!==t&&(this.localForm.chequeNo=""),"bank_transfer"!==t&&(this.localForm.bankAccountId=""),this.$emit("method-changed",t)},closeDialog:function(){this.$emit("close")},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[e](t):this.$notify?this.$notify({title:"error"===e?"Error":"Success",message:t,type:"error"===e?"error":"success"}):alert("".concat(e.toUpperCase(),": ").concat(t))},saveAdvance:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateForm()){e.next=3;break}return t.$emit("validation-error","Please fix the form errors"),e.abrupt("return");case 3:if(console.info("FORM DATA ".concat(JSON.stringify(t.localForm))),(r=d({},t.localForm)).ministryId||delete r.ministryId,r.bankAccountId||delete r.bankAccountId,r.dueDate||delete r.dueDate,r.purpose||delete r.purpose,r.note||delete r.note,r.exchangeRate||delete r.exchangeRate,r.externalRef||delete r.externalRef,r.externalRefNo||delete r.externalRefNo,r.chequeNo||delete r.chequeNo,r.receiveName||delete r.receiveName,r.receiveIDNO||delete r.receiveIDNO,console.info("FORM DATA ".concat(JSON.stringify(r))),t.localForm.id){e.next=25;break}return e.next=20,t.$axios.post("/api/money-advances",d({},r));case 20:return n=e.sent,console.info("REPONSE DATA ".concat(JSON.stringify(n.data))),t.localForm.id=n.data.data.id,t.showToast("Money advance created successfully","success"),e.abrupt("return");case 25:t.$emit("save",r);case 26:case"end":return e.stop()}}),e)})))()}}},v=f,m=(r(961),r(32)),component=Object(m.a)(v,(function(){var t=this,e=t._self._c;return e("div",[t.show?e("div",{staticClass:"modal-overlay",on:{click:t.closeDialog}},[e("div",{staticClass:"modal-dialog enhanced-dialog",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"modal-header"},[e("div",{staticClass:"modal-title-section"},[e("i",{staticClass:"fas fa-money-bill-wave modal-icon"}),t._v(" "),e("h5",{staticClass:"modal-title"},[t._v("\n            "+t._s(t.isEdit?"ແກ້ໄຂລາຍຈ່າຍ":"ລົງບັນຊີລາຍຈ່າຍ")+"\n          ")])]),t._v(" "),e("div",{staticClass:"modal-header-right"},[e("span",{staticClass:"voucher-number"},[t._v("\n            ເລກທີ:\n            "+t._s(t.formData.id?t.formatVoucherNumber(t.localForm.id):"000000")+"\n          ")]),t._v(" "),e("button",{staticClass:"close-btn",on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"})])])]),t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.saveAdvance.apply(null,arguments)}}},[e("div",{staticClass:"modal-body"},[t.formLoading?e("div",{staticClass:"form-loading"},[e("div",{staticClass:"spinner-small"}),t._v(" "),e("p",[t._v("Loading form data...")])]):e("div",{staticClass:"form-grid"},[e("div",{staticClass:"form-group"},[t._m(0),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.bookingDate,expression:"localForm.bookingDate"}],staticClass:"form-control",attrs:{type:"date",max:t.today,required:"",title:"ເລືອກວັນທີ (Select Date)"},domProps:{value:t.localForm.bookingDate},on:{input:function(e){e.target.composing||t.$set(t.localForm,"bookingDate",e.target.value)}}}),t._v(" "),e("small",{staticClass:"text-muted",staticStyle:{"font-size":"10px",color:"#6b7280","margin-top":"2px",display:"block"}},[t._v("\n                ຮູບແບບຈະສະແດງຕາມການຕັ້ງຄ່າຂອງ Browser\n              ")])]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(1),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.method,expression:"localForm.method"}],staticClass:"form-control custom-select",attrs:{required:""},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"method",e.target.multiple?r:r[0])},t.handleMethodChange]}},[e("option",{attrs:{value:""}},[t._v("ເລືອກວິທີການຊຳລະ")]),t._v(" "),e("option",{attrs:{value:"cash"}},[t._v("ເງິນສົດ (Cash)")]),t._v(" "),e("option",{attrs:{value:"cheque"}},[t._v("ເຊັກ (Cheque)")]),t._v(" "),e("option",{attrs:{value:"bank_transfer"}},[t._v("\n                    ໂອນທະນາຄານ (Bank Transfer)\n                  ")]),t._v(" "),e("option",{attrs:{value:"deduction"}},[t._v("ຫັກລົບ (Deduction)")])]),t._v(" "),t._m(2)]),t._v(" "),e("small",{staticClass:"debug-info",staticStyle:{"font-size":"10px",color:"#666","margin-top":"2px",display:"block"}},[t._v('\n                Current method: "'+t._s(t.localForm.method||"empty")+'"\n              ')])]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(3),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.currencyId,expression:"localForm.currencyId"}],staticClass:"form-control custom-select",attrs:{required:""},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"currencyId",e.target.multiple?r:r[0])},t.updateSelectedCurrency]}},[e("option",{attrs:{value:""}},[t._v("ເລືອກສະກຸນເງິນ")]),t._v(" "),t._l(t.currencies,(function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n                    "+t._s(r.code)+"\n                  ")])}))],2),t._v(" "),t._m(4)])]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(5),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.exchangeRate,expression:"localForm.exchangeRate"}],staticClass:"form-control",attrs:{type:"number",step:"0.000001",min:"0",placeholder:"ອັດຕາແລກປ່ຽນ"},domProps:{value:t.localForm.exchangeRate},on:{input:function(e){e.target.composing||t.$set(t.localForm,"exchangeRate",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(6),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.amount,expression:"localForm.amount"}],staticClass:"form-control",attrs:{type:"number",step:"0.01",min:"0",placeholder:"Enter amount",required:""},domProps:{value:t.localForm.amount},on:{input:function(e){e.target.composing||t.$set(t.localForm,"amount",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(7),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.makerId,expression:"localForm.makerId"}],staticClass:"form-control custom-select",attrs:{required:"",disabled:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"makerId",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:""}},[t._v("ເລືອກຜູ້ລົງ")]),t._v(" "),t._l(t.users,(function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n                    "+t._s(r.cus_name)+"\n                  ")])}))],2),t._v(" "),t._m(8)])]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(9),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.externalRef,expression:"localForm.externalRef"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ອີງໃສ່ໃບສະເໜີ / ຖອນ",maxlength:"100"},domProps:{value:t.localForm.externalRef},on:{input:function(e){e.target.composing||t.$set(t.localForm,"externalRef",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(10),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.externalRefNo,expression:"localForm.externalRefNo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເລກທີ່ໃບສັ່ງຈ່າຍ",maxlength:"50"},domProps:{value:t.localForm.externalRefNo},on:{input:function(e){e.target.composing||t.$set(t.localForm,"externalRefNo",e.target.value)}}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"cheque"===t.localForm.method,expression:"localForm.method === 'cheque'"}],staticClass:"form-group"},[e("label",{staticClass:"form-label",class:{required:"cheque"===t.localForm.method}},[e("i",{staticClass:"fas fa-money-check"}),t._v("\n                ເລກເຊັກ\n              ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.chequeNo,expression:"localForm.chequeNo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເລກເຊັກ",maxlength:"50",required:"cheque"===t.localForm.method},domProps:{value:t.localForm.chequeNo},on:{input:function(e){e.target.composing||t.$set(t.localForm,"chequeNo",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(11),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.receiveName,expression:"localForm.receiveName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ຊື່ຜູ້ຮັບເງິນ",maxlength:"100"},domProps:{value:t.localForm.receiveName},on:{input:function(e){e.target.composing||t.$set(t.localForm,"receiveName",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(12),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.receiveIDNO,expression:"localForm.receiveIDNO"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເລກບັດປະຈຳຕົວ",maxlength:"20"},domProps:{value:t.localForm.receiveIDNO},on:{input:function(e){e.target.composing||t.$set(t.localForm,"receiveIDNO",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(13),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.dueDate,expression:"localForm.dueDate"}],staticClass:"form-control",attrs:{type:"date",min:t.today},domProps:{value:t.localForm.dueDate},on:{input:function(e){e.target.composing||t.$set(t.localForm,"dueDate",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group span-2"},[t._m(14),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.ministryId,expression:"localForm.ministryId"}],staticClass:"form-control custom-select",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"ministryId",e.target.multiple?r:r[0])},t.updateSelectedMinistry]}},[e("option",{attrs:{value:""}},[t._v("ເລືອກກົມ (ທາງເລືອກ)")]),t._v(" "),t._l(t.ministries,(function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n                    "+t._s(r.ministryCode+" "+r.ministryName)+"\n                  ")])}))],2),t._v(" "),t._m(15)]),t._v(" "),t.selectedMinistry?e("div",{staticClass:"ministry-info"},[e("div",{staticClass:"ministry-details"},[e("div",{staticClass:"ministry-detail-item"},[e("i",{staticClass:"fas fa-building"}),t._v(" "),e("span",{staticClass:"ministry-name"},[t._v(t._s(t.selectedMinistry.ministryName))])]),t._v(" "),t.selectedMinistry.ministryCode?e("div",{staticClass:"ministry-detail-item"},[e("i",{staticClass:"fas fa-tag"}),t._v(" "),e("span",{staticClass:"ministry-code"},[t._v(t._s(t.selectedMinistry.ministryCode))])]):t._e()])]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"bank_transfer"===t.localForm.method,expression:"localForm.method === 'bank_transfer'"}],staticClass:"form-group"},[e("label",{staticClass:"form-label",class:{required:"bank_transfer"===t.localForm.method}},[e("i",{staticClass:"fas fa-university"}),t._v("\n                ບັນຊີທະນາຄານ\n              ")]),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.bankAccountId,expression:"localForm.bankAccountId"}],staticClass:"form-control custom-select",attrs:{required:"bank_transfer"===t.localForm.method},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"bankAccountId",e.target.multiple?r:r[0])},t.updateSelectedBankAccount]}},[e("option",{attrs:{value:""}},[t._v("ເລືອກບັນຊີ")]),t._v(" "),t._l(t.filteredBankAccounts,(function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n                    "+t._s(r.bankName)+" - "+t._s(r.accountNumber)+"\n                  ")])}))],2),t._v(" "),t._m(16)]),t._v(" "),t.selectedBankAccount?e("div",{staticClass:"bank-account-info"},[e("div",{staticClass:"bank-details"},[e("div",{staticClass:"bank-detail-item"},[e("i",{staticClass:"fas fa-building"}),t._v(" "),e("span",[t._v(t._s(t.selectedBankAccount.bankName))])]),t._v(" "),e("div",{staticClass:"bank-detail-item"},[e("i",{staticClass:"fas fa-credit-card"}),t._v(" "),e("span",[t._v(t._s(t.selectedBankAccount.accountNumber))])])])]):t._e()]),t._v(" "),e("div",{staticClass:"form-group full-width"},[t._m(17),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.purpose,expression:"localForm.purpose"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເນື້ອໃນ ການອອກລາຍຈ່າຍ",maxlength:"255"},domProps:{value:t.localForm.purpose},on:{input:function(e){e.target.composing||t.$set(t.localForm,"purpose",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group full-width"},[t._m(18),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.localForm.note,expression:"localForm.note"}],staticClass:"form-control",attrs:{rows:"2",placeholder:"ລາຍລະອຽດເພີ່ມເຕີມ...",maxlength:"500"},domProps:{value:t.localForm.note},on:{input:function(e){e.target.composing||t.$set(t.localForm,"note",e.target.value)}}})])]),t._v(" "),t.formErrors.length>0?e("div",{staticClass:"form-errors"},[t._m(19),t._v(" "),e("ul",t._l(t.formErrors,(function(r){return e("li",{key:r},[t._v(t._s(r))])})),0)]):t._e()]),t._v(" "),e("div",{staticClass:"modal-footer enhanced-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:t.saving},on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"}),t._v("\n            ອອກ\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.saving||t.formLoading||!t.isFormValid}},[t.saving?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas",class:t.isEdit?"fa-save":"fa-plus"}),t._v("\n            "+t._s(t.saving?"Saving...":t.isEdit?"ບັນທຶກ ການແກ້ໄຂ":"ບັນທຶກ")+"\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-danger",attrs:{title:"Print"},on:{click:function(e){return e.preventDefault(),t.printAdvanceDetails.apply(null,arguments)}}},[e("i",{staticClass:"fas fa-print"})])])])])]):t._e(),t._v(" "),t.showPrintVoucher&&t.advanceDetails?e("VoucherPrintComponent",{key:t.advanceDetails.id,attrs:{"voucher-data":t.advanceDetails},on:{close:t.closePrintVoucher}}):t._e()],1)}),[function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-calendar"}),this._v("\n                ວັນທີ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-credit-card"}),this._v("\n                ວິທີການຈ່າຍເງິນ\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-coins"}),this._v("\n                ສະກຸນເງິນ\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-exchange-alt"}),this._v("\n                ອັດຕາແລກປ່ຽນ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-dollar-sign"}),this._v("\n                ຈຳນວນເງິນ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-user"}),this._v("\n                ຜູ້ໃຊ້\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-external-link-alt"}),this._v("\n                ອີງໃສ່ໃບສະເໜີ / ຖອນ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-hashtag"}),this._v("\n                ເລກທີ່ໃບສັ່ງຈ່າຍ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-user-circle"}),this._v("\n                ຊື່ຜູ້ຮັບ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-id-card"}),this._v("\n                ເລກບັດປະຈຳຕົວຜູ້ຮັບ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-calendar-alt"}),this._v("\n                ວັນຄົບຮອບຄວນຊຳລະ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-building"}),this._v("\n                ກົມ\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-tag"}),this._v("\n                ຈຸດປະສົງ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-sticky-note"}),this._v("\n                ໂນ໊ດ\n              ")])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-exclamation-circle"}),this._v("\n              Please fix the following errors:\n            ")])}],!1,null,"8a92950e",null);e.default=component.exports},1298:function(t,e,r){"use strict";r.r(e);var n={name:"MoneyAdvanceDetailDialog",props:{show:{type:Boolean,default:!1},details:{type:Object,default:null},loading:{type:Boolean,default:!1},statusLabels:{type:Object,default:function(){return{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ",rejected:"ປະຕິເສດ",cancelled:"ຍົກເລີກ"}}}},methods:{closeDialog:function(){this.$emit("close")},printDetails:function(){this.$emit("print")},downloadDetails:function(){this.$emit("download")},retryLoad:function(){this.$emit("retry-load")},editAdvance:function(){this.$emit("edit",this.details)},approveAdvance:function(){this.$emit("approve",this.details)},createSettlement:function(){this.$emit("create-settlement",this.details)},getStatusInLao:function(t){return this.statusLabels[t]||t.toUpperCase()},getStatusIcon:function(t){return{pending:"fa-clock",approved:"fa-check-circle",settled:"fa-money-bill-wave",rejected:"fa-times-circle",cancelled:"fa-ban"}[t]||"fa-question-circle"},getHistoryIcon:function(t){return{created:"fa-plus",updated:"fa-edit",approved:"fa-check",settled:"fa-money-bill",deleted:"fa-trash",rejected:"fa-times",cancelled:"fa-ban"}[t]||"fa-history"},formatCurrency:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)},formatExchangeRate:function(t){return t?new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:6}).format(t):"N/A"},formatDateTime:function(t){return t?new Date(t).toLocaleString():"N/A"},isOverdue:function(t){return!!t&&new Date(t)<new Date}}},o=(r(963),r(32)),component=Object(o.a)(n,(function(){var t,e,r,n=this,o=n._self._c;return n.show?o("div",{staticClass:"modal-overlay",on:{click:n.closeDialog}},[o("div",{staticClass:"modal-dialog detail-dialog",on:{click:function(t){t.stopPropagation()}}},[o("div",{staticClass:"modal-header"},[n._m(0),n._v(" "),o("div",{staticClass:"header-actions"},[o("button",{staticClass:"btn-icon",attrs:{title:"Print"},on:{click:n.printDetails}},[o("i",{staticClass:"fas fa-print"})]),n._v(" "),o("button",{staticClass:"btn-icon",attrs:{title:"Download"},on:{click:n.downloadDetails}},[o("i",{staticClass:"fas fa-download"})]),n._v(" "),o("button",{staticClass:"close-btn",on:{click:n.closeDialog}},[o("i",{staticClass:"fas fa-times"})])])]),n._v(" "),o("div",{staticClass:"modal-body detail-body"},[n.loading?o("div",{staticClass:"detail-loading"},[o("div",{staticClass:"spinner-small"}),n._v(" "),o("p",[n._v("Loading details...")])]):n.details?o("div",{staticClass:"detail-content"},[o("div",{staticClass:"detail-status"},[o("span",{class:["status-badge","status-"+n.details.status]},[o("i",{staticClass:"fas",class:n.getStatusIcon(n.details.status)}),n._v("\n            "+n._s(n.getStatusInLao(n.details.status))+"\n          ")])]),n._v(" "),o("div",{staticClass:"detail-section"},[n._m(1),n._v(" "),o("div",{staticClass:"detail-grid"},[o("div",{staticClass:"detail-item"},[o("label",[n._v("ID")]),n._v(" "),o("span",{staticClass:"detail-value"},[n._v("#"+n._s(n.details.id))])]),n._v(" "),o("div",{staticClass:"detail-item"},[o("label",[n._v("ຈຳນວນເງິນ")]),n._v(" "),o("span",{staticClass:"detail-value amount-display"},[n._v("\n                "+n._s(n.formatCurrency(n.details.amount))+"\n                "),o("small",[n._v(n._s(null===(t=n.details.currency)||void 0===t?void 0:t.code))])])]),n._v(" "),n.details.exchangeRate?o("div",{staticClass:"detail-item"},[o("label",[n._v("ອັດຕາແລກປ່ຽນ")]),n._v(" "),o("span",{staticClass:"detail-value exchange-rate-display"},[o("i",{staticClass:"fas fa-exchange-alt"}),n._v("\n                "+n._s(n.formatExchangeRate(n.details.exchangeRate))+"\n              ")])]):n._e(),n._v(" "),o("div",{staticClass:"detail-item full-width"},[o("label",[n._v("ຈຸດປະສົງ")]),n._v(" "),o("span",{staticClass:"detail-value"},[n._v(n._s(n.details.purpose||"No purpose specified"))])])])]),n._v(" "),o("div",{staticClass:"detail-section"},[n._m(2),n._v(" "),o("div",{staticClass:"detail-grid"},[o("div",{staticClass:"detail-item"},[o("label",[n._v("ຜູ້ລົງບັນຊີ")]),n._v(" "),o("span",{staticClass:"detail-value user-info"},[o("i",{staticClass:"fas fa-user"}),n._v("\n                "+n._s((null===(e=n.details.maker)||void 0===e?void 0:e.cus_name)||"N/A")+"\n              ")])]),n._v(" "),o("div",{staticClass:"detail-item"},[o("label",[n._v("ຜູ້ອະນຸມັດ")]),n._v(" "),o("span",{staticClass:"detail-value user-info"},[o("i",{staticClass:"fas fa-user-check"}),n._v("\n                "+n._s((null===(r=n.details.checker)||void 0===r?void 0:r.cus_name)||"Not yet approved")+"\n              ")])])])]),n._v(" "),o("div",{staticClass:"detail-section"},[n._m(3),n._v(" "),o("div",{staticClass:"timeline"},[o("div",{staticClass:"timeline-item"},[n._m(4),n._v(" "),o("div",{staticClass:"timeline-content"},[o("label",[n._v("ລົງບັນຊີລາຍຈ່າຍ")]),n._v(" "),o("span",{staticClass:"timeline-date"},[n._v(n._s(n.formatDateTime(n.details.createdAt)))])])]),n._v(" "),n.details.approvedAt?o("div",{staticClass:"timeline-item"},[n._m(5),n._v(" "),o("div",{staticClass:"timeline-content"},[o("label",[n._v("ອະນຸມັດແລ້ວ")]),n._v(" "),o("span",{staticClass:"timeline-date"},[n._v(n._s(n.formatDateTime(n.details.approvedAt)))])])]):n._e(),n._v(" "),n.details.dueDate?o("div",{staticClass:"timeline-item"},[o("div",{staticClass:"timeline-icon due",class:{overdue:n.isOverdue(n.details.dueDate)}},[o("i",{staticClass:"fas fa-clock"})]),n._v(" "),o("div",{staticClass:"timeline-content"},[o("label",[n._v("ວັນຄົບຮອບຄວນຊຳລະ")]),n._v(" "),o("span",{staticClass:"timeline-date",class:{overdue:n.isOverdue(n.details.dueDate)}},[n._v("\n                  "+n._s(n.formatDateTime(n.details.dueDate))+"\n                  "),n.isOverdue(n.details.dueDate)?o("span",{staticClass:"overdue-badge"},[o("i",{staticClass:"fas fa-exclamation-triangle"}),n._v(" Overdue\n                  ")]):n._e()])])]):n._e(),n._v(" "),n.details.settledAt?o("div",{staticClass:"timeline-item"},[n._m(6),n._v(" "),o("div",{staticClass:"timeline-content"},[o("label",[n._v("ຮັບຊຳລະ")]),n._v(" "),o("span",{staticClass:"timeline-date"},[n._v(n._s(n.formatDateTime(n.details.settledAt)))])])]):n._e()])]),n._v(" "),n.details.note?o("div",{staticClass:"detail-section"},[n._m(7),n._v(" "),o("div",{staticClass:"notes-content"},[n._v("\n            "+n._s(n.details.note)+"\n          ")])]):n._e(),n._v(" "),n.details.history&&n.details.history.length>0?o("div",{staticClass:"detail-section"},[n._m(8),n._v(" "),o("div",{staticClass:"history-list"},n._l(n.details.history,(function(t,e){return o("div",{key:e,staticClass:"history-item"},[o("div",{staticClass:"history-icon"},[o("i",{staticClass:"fas",class:n.getHistoryIcon(t.action)})]),n._v(" "),o("div",{staticClass:"history-content"},[o("span",{staticClass:"history-action"},[n._v(n._s(t.action))]),n._v(" "),o("span",{staticClass:"history-user"},[n._v("by "+n._s(t.user))]),n._v(" "),o("span",{staticClass:"history-date"},[n._v(n._s(n.formatDateTime(t.createdAt)))])])])})),0)]):n._e()]):o("div",{staticClass:"detail-error"},[o("i",{staticClass:"fas fa-exclamation-triangle"}),n._v(" "),o("p",[n._v("Failed to load advance details")]),n._v(" "),o("button",{staticClass:"btn btn-primary btn-sm",on:{click:n.retryLoad}},[o("i",{staticClass:"fas fa-redo"}),n._v(" Try Again\n        ")])])]),n._v(" "),o("div",{staticClass:"modal-footer detail-footer"},[o("button",{staticClass:"btn btn-secondary close-detail-btn",on:{click:n.closeDialog}},[o("i",{staticClass:"fas fa-times"}),n._v("\n        Close\n      ")]),n._v(" "),o("div",{staticClass:"detail-actions"},[n.details&&"pending"===n.details.status?o("button",{staticClass:"btn btn-warning action-btn",attrs:{title:"Edit"},on:{click:n.editAdvance}},[o("i",{staticClass:"fas fa-edit"})]):n._e(),n._v(" "),n.details&&"pending"===n.details.status?o("button",{staticClass:"btn btn-success action-btn",attrs:{title:"Approve"},on:{click:n.approveAdvance}},[o("i",{staticClass:"fas fa-check"})]):n._e(),n._v(" "),n.details&&"approved"===n.details.status?o("button",{staticClass:"btn btn-success action-btn",attrs:{title:"Create Settlement"},on:{click:n.createSettlement}},[o("i",{staticClass:"fas fa-file-invoice-dollar"})]):n._e()])])])]):n._e()}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-title-section"},[e("i",{staticClass:"fas fa-file-invoice-dollar modal-icon"}),t._v(" "),e("h5",{staticClass:"modal-title"},[t._v("ລາຍລະອຽດການອອກລາຍຈ່າຍ")])])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-info-circle"}),this._v("\n            ຂໍ້ມູນເບື້ອງຕົ້ນ\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-users"}),this._v("\n            ຜູ້ໃຊ້ ທີ່ກ່ຽວຂ້ອງ\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-calendar"}),this._v("\n            ການເຄື່ອນໄຫວລາຍການ\n          ")])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon created"},[t("i",{staticClass:"fas fa-plus"})])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon approved"},[t("i",{staticClass:"fas fa-check"})])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon settled"},[t("i",{staticClass:"fas fa-money-bill"})])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-sticky-note"}),this._v("\n            Notes\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-history"}),this._v("\n            Action History\n          ")])}],!1,null,"0bf00b78",null);e.default=component.exports},1299:function(t,e,r){"use strict";r.r(e);r(44),r(9),r(5),r(10),r(7),r(11),r(8),r(12);var n=r(33),o=r(3),c=r(20);r(92),r(22),r(39),r(51),r(68),r(54),r(53),r(816),r(445),r(30);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"MoneyAdvanceAuditDialog",props:{show:{type:Boolean,default:!1},recordId:{type:[Number,String],required:!0},recordTitle:{type:String,default:""}},data:function(){return{auditTrail:[],filteredAuditTrail:[],loading:!1,loadingMore:!1,error:null,actionFilter:"",currentPage:1,hasMoreData:!1,actionLabels:{CREATE:"ສ້າງ",UPDATE:"ແກ້ໄຂ",APPROVE:"ອະນຸມັດ",SETTLE:"ຊຳລະ",DELETE:"ລົບ"},fieldLabels:{amount:"ຈຳນວນເງິນ",purpose:"ຈຸດປະສົງ",status:"ສະຖານະ",note:"ໂນ໊ດ",dueDate:"ວັນຄົບຮອບ",bookingDate:"ວັນທີບັນຊີ",makerId:"ຜູ້ລົງບັນຊີ",checkerId:"ຜູ້ກວດ",currencyId:"ສະກຸນເງິນ",bankAccountId:"ບັນຊີທະນາຄານ",ministryId:"ກະຊວງ",exchangeRate:"ອັດຕາແລກປ່ຽນ",approvedAt:"ວັນທີອະນຸມັດ"}}},watch:{show:function(t){t&&this.recordId&&this.loadAuditTrail()},recordId:function(t){t&&this.show&&this.loadAuditTrail()}},methods:{loadAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,t.currentPage=1,e.prev=3,e.next=6,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:20,offset:0}});case 6:r=e.sent,t.auditTrail=r.data.data.map((function(t){return d(d({},t),{},{expanded:!1})})),t.hasMoreData=20===r.data.data.length,t.filterAuditTrail(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("Error loading audit trail:",e.t0),t.error=(null===(n=e.t0.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ";case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})))()},loadMoreAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingMore=!0,t.currentPage++,e.prev=2,e.next=5,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:20,offset:20*(t.currentPage-1)}});case 5:o=e.sent,c=o.data.data.map((function(t){return d(d({},t),{},{expanded:!1})})),(r=t.auditTrail).push.apply(r,Object(n.a)(c)),t.hasMoreData=20===c.length,t.filterAuditTrail(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Error loading more audit trail:",e.t0),t.currentPage--;case 16:return e.prev=16,t.loadingMore=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,12,16,19]])})))()},filterAuditTrail:function(){var t=this;this.actionFilter?this.filteredAuditTrail=this.auditTrail.filter((function(e){return e.action===t.actionFilter})):this.filteredAuditTrail=Object(n.a)(this.auditTrail)},toggleExpand:function(t){t.totalChanges>0&&this.$set(t,"expanded",!t.expanded)},getActionInLao:function(t){return this.actionLabels[t]||t},getFieldNameInLao:function(t){return this.fieldLabels[t]||t},getActionIcon:function(t){return{CREATE:"fas fa-plus text-success",UPDATE:"fas fa-edit text-warning",APPROVE:"fas fa-check text-success",SETTLE:"fas fa-money-bill text-info",DELETE:"fas fa-trash text-danger"}[t]||"fas fa-circle"},getFieldIcon:function(t){return{amount:"fas fa-dollar-sign",purpose:"fas fa-tag",status:"fas fa-flag",note:"fas fa-sticky-note",dueDate:"fas fa-calendar",bookingDate:"fas fa-calendar-alt",makerId:"fas fa-user",checkerId:"fas fa-user-check",currencyId:"fas fa-coins",bankAccountId:"fas fa-university",ministryId:"fas fa-building",exchangeRate:"fas fa-exchange-alt",approvedAt:"fas fa-check-circle"}[t]||"fas fa-info-circle"},formatValue:function(t,e){if(null==e)return"ບໍ່ມີ";if("amount"===t)return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);if(t.includes("Date")||t.includes("At"))return this.formatDate(e);if("status"===t){return{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ"}[e]||e}return e.toString()},formatDateTime:function(t){return t?new Date(t).toLocaleString("lo-LA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},formatDate:function(t){return t?new Date(t).toLocaleDateString("lo-LA"):"N/A"},exportAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:1e3,offset:0,format:"csv"},responseType:"blob"});case 3:r=e.sent,n=new Blob([r.data],{type:"text/csv"}),o=window.URL.createObjectURL(n),(a=document.createElement("a")).href=o,a.download="audit-trail-".concat(t.recordId,"-").concat(Date.now(),".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(o),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$emit("show-toast","ເກີດຂໍ້ຜິດພາດໃນການສົ່ງອອກຂໍ້ມູນ","error");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))()},compareVersions:function(){this.$emit("compare-versions",this.recordId)},viewFullDetails:function(t){this.$emit("view-full-details",t)},closeDialog:function(){this.$emit("close")}}},v=(r(965),r(32)),component=Object(v.a)(f,(function(){var t,e,r=this,n=r._self._c;return r.show?n("div",{staticClass:"modal-overlay",on:{click:r.closeDialog}},[n("div",{staticClass:"modal-dialog audit-dialog",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"modal-header audit-header"},[n("div",{staticClass:"modal-title-section"},[n("i",{staticClass:"fas fa-history modal-icon"}),r._v(" "),n("h5",{staticClass:"modal-title"},[r._v("\n          ປະຫວັດການປ່ຽນແປງ - "+r._s(r.recordTitle)+"\n        ")])]),r._v(" "),n("button",{staticClass:"close-btn",on:{click:r.closeDialog}},[n("i",{staticClass:"fas fa-times"})])]),r._v(" "),n("div",{staticClass:"modal-body"},[r.loading?n("div",{staticClass:"loading-container"},[n("div",{staticClass:"spinner"}),r._v(" "),n("p",[r._v("ກຳລັງໂຫຼດປະຫວັດການປ່ຽນແປງ...")])]):r.error?n("div",{staticClass:"error-container"},[r._m(0),r._v(" "),n("h4",[r._v("ເກີດຂໍ້ຜິດພາດ")]),r._v(" "),n("p",[r._v(r._s(r.error))]),r._v(" "),n("button",{staticClass:"btn btn-primary btn-sm",on:{click:r.loadAuditTrail}},[n("i",{staticClass:"fas fa-redo"}),r._v("\n          ລອງໃໝ່\n        ")])]):0===r.auditTrail.length?n("div",{staticClass:"no-data-container"},[r._m(1),r._v(" "),n("h4",[r._v("ບໍ່ມີປະຫວັດການປ່ຽນແປງ")]),r._v(" "),n("p",[r._v("ບໍ່ພົບປະຫວັດການປ່ຽນແປງສຳລັບບັນຊີນີ້")])]):n("div",{staticClass:"audit-content"},[n("div",{staticClass:"audit-summary"},[n("div",{staticClass:"summary-card"},[r._m(2),r._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-label"},[r._v("ລວມການປ່ຽນແປງ")]),r._v(" "),n("div",{staticClass:"summary-value"},[r._v(r._s(r.auditTrail.length))])])]),r._v(" "),n("div",{staticClass:"summary-card"},[r._m(3),r._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-label"},[r._v("ການປ່ຽນແປງລ່າສຸດ")]),r._v(" "),n("div",{staticClass:"summary-value"},[r._v(r._s(r.formatDateTime(null===(t=r.auditTrail[0])||void 0===t?void 0:t.changedAt)))])])]),r._v(" "),n("div",{staticClass:"summary-card"},[r._m(4),r._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-label"},[r._v("ຜູ້ປ່ຽນແປງລ່າສຸດ")]),r._v(" "),n("div",{staticClass:"summary-value"},[r._v(r._s((null===(e=r.auditTrail[0])||void 0===e?void 0:e.changedBy)||"ລະບົບ"))])])])]),r._v(" "),n("div",{staticClass:"audit-controls"},[n("div",{staticClass:"filter-controls"},[n("select",{directives:[{name:"model",rawName:"v-model",value:r.actionFilter,expression:"actionFilter"}],staticClass:"form-control filter-select",on:{change:[function(t){var e=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));r.actionFilter=t.target.multiple?e:e[0]},r.filterAuditTrail]}},[n("option",{attrs:{value:""}},[r._v("ທຸກການດຳເນີນການ")]),r._v(" "),n("option",{attrs:{value:"CREATE"}},[r._v("ສ້າງ")]),r._v(" "),n("option",{attrs:{value:"UPDATE"}},[r._v("ແກ້ໄຂ")]),r._v(" "),n("option",{attrs:{value:"APPROVE"}},[r._v("ອະນຸມັດ")]),r._v(" "),n("option",{attrs:{value:"SETTLE"}},[r._v("ຊຳລະ")]),r._v(" "),n("option",{attrs:{value:"DELETE"}},[r._v("ລົບ")])]),r._v(" "),n("button",{staticClass:"btn btn-secondary btn-sm",on:{click:r.exportAuditTrail}},[n("i",{staticClass:"fas fa-download"}),r._v("\n              ສົ່ງອອກ\n            ")])])]),r._v(" "),n("div",{staticClass:"audit-timeline"},r._l(r.filteredAuditTrail,(function(t,e){return n("div",{key:t.id,staticClass:"timeline-item",class:{expandable:t.totalChanges>0}},[n("div",{staticClass:"timeline-marker"},[n("i",{class:r.getActionIcon(t.action)})]),r._v(" "),n("div",{staticClass:"timeline-content"},[n("div",{staticClass:"timeline-header",on:{click:function(e){return r.toggleExpand(t)}}},[n("div",{staticClass:"timeline-main-info"},[n("div",{staticClass:"timeline-action"},[n("span",{class:["action-badge",t.action.toLowerCase()]},[r._v("\n                      "+r._s(r.getActionInLao(t.action))+"\n                    ")]),r._v(" "),n("span",{staticClass:"timeline-time"},[r._v(r._s(r.formatDateTime(t.changedAt)))])]),r._v(" "),n("div",{staticClass:"timeline-user"},[n("i",{staticClass:"fas fa-user-circle"}),r._v("\n                    "+r._s(t.changedBy||"ລະບົບ")+"\n                  ")])]),r._v(" "),t.totalChanges>0?n("div",{staticClass:"timeline-toggle"},[n("span",{staticClass:"changes-count"},[r._v(r._s(t.totalChanges)+" ການປ່ຽນແປງ")]),r._v(" "),n("i",{staticClass:"toggle-icon",class:["fas",t.expanded?"fa-chevron-up":"fa-chevron-down"]})]):r._e()]),r._v(" "),t.reason?n("div",{staticClass:"timeline-reason"},[n("i",{staticClass:"fas fa-comment"}),r._v(" "),n("span",[r._v(r._s(t.reason))])]):r._e(),r._v(" "),t.expanded&&t.keyChanges&&t.keyChanges.length>0?n("div",{staticClass:"timeline-details"},[n("div",{staticClass:"changes-list"},[n("h6",[r._v("ລາຍລະອຽດການປ່ຽນແປງ:")]),r._v(" "),r._l(t.keyChanges,(function(t){return n("div",{key:t.field,staticClass:"change-item"},[n("div",{staticClass:"change-field"},[n("i",{class:r.getFieldIcon(t.field)}),r._v("\n                      "+r._s(r.getFieldNameInLao(t.field))+"\n                    ")]),r._v(" "),n("div",{staticClass:"change-values"},[n("div",{staticClass:"old-value"},[n("span",{staticClass:"value-label"},[r._v("ເກົ່າ:")]),r._v(" "),n("span",{staticClass:"value"},[r._v(r._s(r.formatValue(t.field,t.oldValue)))])]),r._v(" "),r._m(5,!0),r._v(" "),n("div",{staticClass:"new-value"},[n("span",{staticClass:"value-label"},[r._v("ໃໝ່:")]),r._v(" "),n("span",{staticClass:"value"},[r._v(r._s(r.formatValue(t.field,t.newValue)))])])])])}))],2)]):r._e(),r._v(" "),t.totalChanges>3&&t.expanded?n("div",{staticClass:"view-full-details"},[n("button",{staticClass:"btn btn-link btn-sm",on:{click:function(e){return r.viewFullDetails(t)}}},[n("i",{staticClass:"fas fa-eye"}),r._v("\n                  ເບິ່ງລາຍລະອຽດທັງໝົດ ("+r._s(t.totalChanges)+" ການປ່ຽນແປງ)\n                ")])]):r._e()])])})),0),r._v(" "),r.hasMoreData?n("div",{staticClass:"load-more-container"},[n("button",{staticClass:"btn btn-secondary",attrs:{disabled:r.loadingMore},on:{click:r.loadMoreAuditTrail}},[r.loadingMore?n("i",{staticClass:"fas fa-spinner fa-spin"}):n("i",{staticClass:"fas fa-plus"}),r._v("\n            "+r._s(r.loadingMore?"ກຳລັງໂຫຼດ...":"ໂຫຼດເພີ່ມ")+"\n          ")])]):r._e()])]),r._v(" "),n("div",{staticClass:"modal-footer audit-footer"},[n("button",{staticClass:"btn btn-info",attrs:{disabled:r.auditTrail.length<2},on:{click:r.compareVersions}},[n("i",{staticClass:"fas fa-balance-scale"}),r._v("\n        ປຽບທຽບເວີຊັ່ນ\n      ")]),r._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:r.closeDialog}},[n("i",{staticClass:"fas fa-times"}),r._v("\n        ປິດ\n      ")])])])]):r._e()}),[function(){var t=this._self._c;return t("div",{staticClass:"error-icon"},[t("i",{staticClass:"fas fa-exclamation-triangle"})])},function(){var t=this._self._c;return t("div",{staticClass:"no-data-icon"},[t("i",{staticClass:"fas fa-history"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-list"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-clock"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-user"})])},function(){var t=this._self._c;return t("div",{staticClass:"arrow"},[t("i",{staticClass:"fas fa-arrow-right"})])}],!1,null,"5c476a8a",null);e.default=component.exports},1300:function(t,e,r){"use strict";r.r(e);r(44),r(9),r(5),r(10);var n=r(31),o=r(20),c=(r(92),r(22),r(8),r(66),r(30),r(39),r(51),r(54),r(53),r(816),r(445),r(344),r(102),r(35),r(85),{name:"VersionComparisonDialog",props:{show:{type:Boolean,default:!1},recordId:{type:[Number,String],required:!0},recordData:{type:Object,default:null},initialComparison:{type:Object,default:null},canRestore:{type:Boolean,default:!1}},data:function(){return{loading:!1,error:null,availableVersions:[],selectedVersion1:null,selectedVersion2:null,comparisonData:null,fieldLabels:{amount:"ຈຳນວນເງິນ",purpose:"ຈຸດປະສົງ",status:"ສະຖານະ",dueDate:"ວັນຄົບກຳນົດ",note:"ໝາຍເຫດ",ministryId:"ກະຊວງ",bankAccountId:"ບັນຊີທະນາຄານ",currencyId:"ສະກຸນເງິນ",bookingDate:"ວັນທີ່ລົງບັນຊີ",exchangeRate:"ອັດຕາແລກປ່ຽນ",makerId:"ຜູ້ລົງບັນຊີ",checkerId:"ຜູ້ອະນຸມັດ",approvedAt:"ວັນທີ່ອະນຸມັດ"}}},watch:{show:function(t){t&&this.initializeDialog()},initialComparison:{handler:function(t){t&&this.show&&this.setupInitialComparison()},immediate:!0}},methods:{initializeDialog:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.initialComparison){e.next=4;break}t.setupInitialComparison(),e.next=6;break;case 4:return e.next=6,t.fetchAvailableVersions();case 6:case"end":return e.stop()}}),e)})))()},setupInitialComparison:function(){this.initialComparison.current&&this.initialComparison.previous&&(this.selectedVersion1=this.initialComparison.previous.id,this.selectedVersion2=this.initialComparison.current.id,this.comparisonData={currentVersion:this.initialComparison.current.version||1,compareVersion:this.initialComparison.previous.version||1,differences:this.calculateDifferences(this.initialComparison.previous,this.initialComparison.current)})},calculateDifferences:function(t,e){var r={};return Object.keys(this.fieldLabels).forEach((function(n){var o,c,l=(null===(o=t.data)||void 0===o?void 0:o[n])||t[n],d=(null===(c=e.data)||void 0===c?void 0:c[n])||e[n];l!==d&&(r[n]={current:d,version:l})})),r},fetchAvailableVersions:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.recordId){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,t.error=null,e.prev=4,e.next=7,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"));case 7:if(r=e.sent,!(data=r.data).success){e.next=13;break}t.availableVersions=data.data.map((function(t){return{id:t.id,version:t.version||1,action:t.action,changedAt:t.changedAt,changedBy:t.changedBy,data:t.newData||t.oldData||{}}})),e.next=14;break;case 13:throw new Error(data.message||"Failed to fetch versions");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),console.error("Error fetching versions:",e.t0),t.error=(null===(n=e.t0.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||e.t0.message;case 20:return e.prev=20,t.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,16,20,23]])})))()},loadComparison:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedVersion1&&t.selectedVersion2){e.next=3;break}return t.comparisonData=null,e.abrupt("return");case 3:try{r=t.availableVersions.find((function(e){return e.id===t.selectedVersion1})),n=t.availableVersions.find((function(e){return e.id===t.selectedVersion2})),r&&n&&(t.comparisonData={currentVersion:n.version,compareVersion:r.version,differences:t.calculateDifferences(r,n)})}catch(e){console.error("Error loading comparison:",e),t.error="ເກີດຂໍ້ຜິດພາດໃນການປຽບທຽບ"}case 4:case"end":return e.stop()}}),e)})))()},getVersionLabel:function(t){var e=new Date(t.changedAt).toLocaleDateString("lo-LA"),r={CREATE:"ສ້າງ",UPDATE:"ແກ້ໄຂ",APPROVE:"ອະນຸມັດ",SETTLE:"ຊຳລະ",DELETE:"ລົບ"}[t.action]||t.action;return"v".concat(t.version," - ").concat(r," (").concat(e,")")},getVersionNumber:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));return(null==e?void 0:e.version)||"?"},getVersionDate:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));return e?new Date(e.changedAt).toLocaleDateString("lo-LA"):""},getTimeDifference:function(){var t=this;if(!this.selectedVersion1||!this.selectedVersion2)return 0;var e=this.availableVersions.find((function(e){return e.id===t.selectedVersion1})),r=this.availableVersions.find((function(e){return e.id===t.selectedVersion2}));if(e&&r){var n=new Date(e.changedAt),o=new Date(r.changedAt),c=Math.abs(o-n);return Math.ceil(c/864e5)}return 0},getDifferentUsers:function(){var t=this;if(!this.selectedVersion1||!this.selectedVersion2)return"N/A";var e=this.availableVersions.find((function(e){return e.id===t.selectedVersion1})),r=this.availableVersions.find((function(e){return e.id===t.selectedVersion2}));return e&&r?e.changedBy===r.changedBy?e.changedBy||"ບໍ່ຮູ້":"".concat(e.changedBy||"ບໍ່ຮູ້"," → ").concat(r.changedBy||"ບໍ່ຮູ້"):"N/A"},getFieldIcon:function(t){return{amount:"fas fa-dollar-sign",purpose:"fas fa-tag",status:"fas fa-flag",dueDate:"fas fa-calendar",note:"fas fa-sticky-note",ministryId:"fas fa-building",bankAccountId:"fas fa-university",currencyId:"fas fa-coins",bookingDate:"fas fa-calendar-day",exchangeRate:"fas fa-exchange-alt",makerId:"fas fa-user",checkerId:"fas fa-user-check",approvedAt:"fas fa-calendar-check"}[t]||"fas fa-info-circle"},getFieldLabel:function(t){return this.fieldLabels[t]||t},formatValue:function(t){if(null==t)return"N/A";if("boolean"==typeof t)return t?"ແມ່ນ":"ບໍ່";if("number"==typeof t)return t.toLocaleString();if("string"==typeof t&&t.includes("T"))try{return new Date(t).toLocaleDateString("lo-LA")}catch(e){return t}return String(t)},swapVersions:function(){var t=this.selectedVersion1;this.selectedVersion1=this.selectedVersion2,this.selectedVersion2=t,this.loadComparison()},restoreToVersion:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));e&&this.$emit("restore",e)},exportComparison:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.comparisonData){e.next=2;break}return e.abrupt("return");case 2:try{r=t.generateComparisonCSV(),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(n),(link=document.createElement("a")).href=o,link.download="comparison-".concat(t.recordId,"-v").concat(t.getVersionNumber(t.selectedVersion1),"-v").concat(t.getVersionNumber(t.selectedVersion2),".csv"),document.body.appendChild(link),link.click(),document.body.removeChild(link),window.URL.revokeObjectURL(o),t.$emit("success","ສົ່ງອອກການປຽບທຽບສຳເລັດ")}catch(e){console.error("Export error:",e),t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສົ່ງອອກ")}case 3:case"end":return e.stop()}}),e)})))()},generateComparisonCSV:function(){var t=this,e=[["Field","Version 1 Value","Version 2 Value"]];return Object.entries(this.comparisonData.differences).forEach((function(r){var o=Object(n.a)(r,2),c=o[0],l=o[1];e.push([t.getFieldLabel(c),t.formatValue(l.version),t.formatValue(l.current)])})),e.map((function(t){return t.map((function(t){return'"'.concat(String(t).replace(/"/g,'""'),'"')})).join(",")})).join("\n")},closeDialog:function(){this.selectedVersion1=null,this.selectedVersion2=null,this.comparisonData=null,this.$emit("close")}}}),l=(r(967),r(32)),component=Object(l.a)(c,(function(){var t,e=this,r=e._self._c;return e.show?r("div",{staticClass:"modal-overlay",on:{click:e.closeDialog}},[r("div",{staticClass:"modal-dialog comparison-dialog",on:{click:function(t){t.stopPropagation()}}},[r("div",{staticClass:"modal-header"},[r("div",{staticClass:"modal-title-section"},[r("i",{staticClass:"fas fa-code-compare modal-icon"}),e._v(" "),r("h5",{staticClass:"modal-title"},[e._v("\n          ປຽບທຽບເວີຊັ່ນ - "+e._s((null===(t=e.recordData)||void 0===t?void 0:t.purpose)||"Record #".concat(e.recordId))+"\n        ")])]),e._v(" "),r("button",{staticClass:"close-btn",on:{click:e.closeDialog}},[r("i",{staticClass:"fas fa-times"})])]),e._v(" "),r("div",{staticClass:"modal-body"},[e.loading?r("div",{staticClass:"loading-state"},[r("div",{staticClass:"spinner"}),e._v(" "),r("p",[e._v("ກຳລັງໂຫຼດຂໍ້ມູນສຳລັບປຽບທຽບ...")])]):e.error?r("div",{staticClass:"error-state"},[e._m(0),e._v(" "),r("h6",[e._v("ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ")]),e._v(" "),r("p",[e._v(e._s(e.error))]),e._v(" "),r("button",{staticClass:"btn btn-primary btn-sm",on:{click:e.fetchComparisonData}},[r("i",{staticClass:"fas fa-redo"}),e._v("\n          ລອງໃໝ່\n        ")])]):r("div",{staticClass:"comparison-content"},[r("div",{staticClass:"version-selector"},[r("div",{staticClass:"selector-group"},[r("label",[e._v("ເວີຊັ່ນທີ່ 1 (ເກົ່າ):")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedVersion1,expression:"selectedVersion1"}],staticClass:"form-control",on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.selectedVersion1=t.target.multiple?r:r[0]},e.loadComparison]}},[r("option",{attrs:{value:""}},[e._v("ເລືອກເວີຊັ່ນ...")]),e._v(" "),e._l(e.availableVersions,(function(t){return r("option",{key:t.id,attrs:{disabled:t.id===e.selectedVersion2},domProps:{value:t.id}},[e._v("\n                "+e._s(e.getVersionLabel(t))+"\n              ")])}))],2)]),e._v(" "),e._m(1),e._v(" "),r("div",{staticClass:"selector-group"},[r("label",[e._v("ເວີຊັ່ນທີ່ 2 (ໃໝ່):")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedVersion2,expression:"selectedVersion2"}],staticClass:"form-control",on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.selectedVersion2=t.target.multiple?r:r[0]},e.loadComparison]}},[r("option",{attrs:{value:""}},[e._v("ເລືອກເວີຊັ່ນ...")]),e._v(" "),e._l(e.availableVersions,(function(t){return r("option",{key:t.id,attrs:{disabled:t.id===e.selectedVersion1},domProps:{value:t.id}},[e._v("\n                "+e._s(e.getVersionLabel(t))+"\n              ")])}))],2)])]),e._v(" "),e.comparisonData?r("div",{staticClass:"comparison-results"},[r("div",{staticClass:"comparison-summary"},[r("div",{staticClass:"summary-card"},[e._m(2),e._v(" "),r("div",{staticClass:"summary-info"},[r("div",{staticClass:"summary-number"},[e._v(e._s(Object.keys(e.comparisonData.differences||{}).length))]),e._v(" "),r("div",{staticClass:"summary-label"},[e._v("ການປ່ຽນແປງ")])])]),e._v(" "),r("div",{staticClass:"summary-card"},[e._m(3),e._v(" "),r("div",{staticClass:"summary-info"},[r("div",{staticClass:"summary-number"},[e._v(e._s(e.getTimeDifference()))]),e._v(" "),r("div",{staticClass:"summary-label"},[e._v("ວັນຫ່າງກັນ")])])]),e._v(" "),r("div",{staticClass:"summary-card"},[e._m(4),e._v(" "),r("div",{staticClass:"summary-info"},[r("div",{staticClass:"summary-text"},[e._v(e._s(e.getDifferentUsers()))]),e._v(" "),r("div",{staticClass:"summary-label"},[e._v("ຜູ້ປ່ຽນແປງ")])])])]),e._v(" "),0===Object.keys(e.comparisonData.differences||{}).length?r("div",{staticClass:"no-differences"},[e._m(5),e._v(" "),r("h6",[e._v("ບໍ່ມີການປ່ຽນແປງ")]),e._v(" "),r("p",[e._v("ເວີຊັ່ນທັງສອງມີຂໍ້ມູນຄືກັນ")])]):r("div",{staticClass:"differences-table"},[e._m(6),e._v(" "),r("div",{staticClass:"table-container"},[r("table",{staticClass:"comparison-table"},[r("thead",[r("tr",[r("th",{staticClass:"field-header"},[e._v("ຟິວ")]),e._v(" "),r("th",{staticClass:"version-header version1"},[r("div",{staticClass:"version-info"},[r("div",{staticClass:"version-label"},[e._v("ເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion1)))]),e._v(" "),r("div",{staticClass:"version-date"},[e._v(e._s(e.getVersionDate(e.selectedVersion1)))])])]),e._v(" "),r("th",{staticClass:"version-header version2"},[r("div",{staticClass:"version-info"},[r("div",{staticClass:"version-label"},[e._v("ເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion2)))]),e._v(" "),r("div",{staticClass:"version-date"},[e._v(e._s(e.getVersionDate(e.selectedVersion2)))])])])])]),e._v(" "),r("tbody",e._l(e.comparisonData.differences,(function(t,n){return r("tr",{key:n,staticClass:"diff-row"},[r("td",{staticClass:"field-cell"},[r("div",{staticClass:"field-info"},[r("i",{class:e.getFieldIcon(n)}),e._v(" "),r("span",{staticClass:"field-name"},[e._v(e._s(e.getFieldLabel(n)))])])]),e._v(" "),r("td",{staticClass:"value-cell version1"},[r("div",{staticClass:"value-content old-value"},[r("div",{staticClass:"value-text"},[e._v(e._s(e.formatValue(t.current)))])])]),e._v(" "),r("td",{staticClass:"value-cell version2"},[r("div",{staticClass:"value-content new-value"},[r("div",{staticClass:"value-text"},[e._v(e._s(e.formatValue(t.version)))]),e._v(" "),e._m(7,!0)])])])})),0)])])]),e._v(" "),Object.keys(e.comparisonData.differences||{}).length>0?r("div",{staticClass:"comparison-actions"},[e.canRestore?r("button",{staticClass:"btn btn-warning",on:{click:function(t){return e.restoreToVersion(e.selectedVersion1)}}},[r("i",{staticClass:"fas fa-undo"}),e._v("\n              ກັບຄືນໄປເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion1))+"\n            ")]):e._e(),e._v(" "),r("button",{staticClass:"btn btn-secondary",on:{click:e.exportComparison}},[r("i",{staticClass:"fas fa-download"}),e._v("\n              ສົ່ງອອກການປຽບທຽບ\n            ")])]):e._e()]):r("div",{staticClass:"select-versions-prompt"},[e._m(8),e._v(" "),r("h6",[e._v("ເລືອກເວີຊັ່ນເພື່ອປຽບທຽບ")]),e._v(" "),r("p",[e._v("ກະລຸນາເລືອກສອງເວີຊັ່ນທີ່ທ່ານຕ້ອງການປຽບທຽບ")])])])]),e._v(" "),r("div",{staticClass:"modal-footer"},[r("button",{staticClass:"btn btn-outline",attrs:{disabled:!e.selectedVersion1||!e.selectedVersion2},on:{click:e.swapVersions}},[r("i",{staticClass:"fas fa-exchange-alt"}),e._v("\n        ສະຫຼັບເວີຊັ່ນ\n      ")]),e._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:e.closeDialog}},[r("i",{staticClass:"fas fa-times"}),e._v("\n        ປິດ\n      ")])])])]):e._e()}),[function(){var t=this._self._c;return t("div",{staticClass:"error-icon"},[t("i",{staticClass:"fas fa-exclamation-triangle"})])},function(){var t=this._self._c;return t("div",{staticClass:"comparison-arrow"},[t("i",{staticClass:"fas fa-exchange-alt"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-edit"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-calendar"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-user"})])},function(){var t=this._self._c;return t("div",{staticClass:"no-diff-icon"},[t("i",{staticClass:"fas fa-equals"})])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-list"}),this._v("\n              ລາຍລະອຽດການປ່ຽນແປງ\n            ")])},function(){var t=this._self._c;return t("div",{staticClass:"change-indicator"},[t("i",{staticClass:"fas fa-arrow-left"})])},function(){var t=this._self._c;return t("div",{staticClass:"prompt-icon"},[t("i",{staticClass:"fas fa-hand-pointer"})])}],!1,null,"e6a23e30",null);e.default=component.exports},1301:function(t,e,r){"use strict";r.r(e);r(44),r(9),r(5),r(30);var n=r(31),o=r(20),c=r(33),l=(r(92),r(8),r(250),r(209),r(344),r(339),r(62),r(54),r(53),r(816),r(445),{name:"AuditReportsDialog",props:{show:{type:Boolean,default:!1}},data:function(){return{activeTab:"user-activity",reportTabs:[{id:"user-activity",label:"ກິດຈະກຳຜູ້ໃຊ້",icon:"fas fa-users"},{id:"system-activity",label:"ກິດຈະກຳລະບົບ",icon:"fas fa-server"},{id:"export",label:"ສົ່ງອອກ",icon:"fas fa-download"}],userActivityLoading:!1,userActivityData:[],userActivityFilter:{startDate:this.getDateDaysAgo(30),endDate:this.getTodayDate()},systemActivityLoading:!1,systemActivityData:null,systemActivityFilter:{period:"30"},exportLoading:!1,exportFilter:{startDate:this.getDateDaysAgo(30),endDate:this.getTodayDate(),reportType:"summary"},actionLabels:{CREATE:"ສ້າງ",UPDATE:"ແກ້ໄຂ",APPROVE:"ອະນຸມັດ",SETTLE:"ຊຳລະ",DELETE:"ລົບ"}}},computed:{isLoading:function(){return this.userActivityLoading||this.systemActivityLoading||this.exportLoading},uniqueActiveUsers:function(){return this.userActivityData.length},totalActivities:function(){return this.userActivityData.reduce((function(t,e){return t+e.totalActivities}),0)},mostActiveUser:function(){return 0===this.userActivityData.length?"N/A":this.userActivityData.reduce((function(t,e){return e.totalActivities>t.totalActivities?e:t})).userName},maxDailyActivity:function(){var t;return null!==(t=this.systemActivityData)&&void 0!==t&&t.dailyStats?Math.max.apply(Math,Object(c.a)(this.systemActivityData.dailyStats.map((function(t){return t.count})))):1}},watch:{show:function(t){t&&this.initializeReports()}},methods:{initializeReports:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchUserActivity();case 2:return e.next=4,t.fetchSystemActivity();case 4:case"end":return e.stop()}}),e)})))()},fetchUserActivity:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,data,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.userActivityLoading=!0,e.prev=1,r={startDate:t.userActivityFilter.startDate,endDate:t.userActivityFilter.endDate},e.next=5,t.$axios.get("/api/money-advances/audit/date-range",{params:r});case 5:n=e.sent,data=n.data,o={},data.data.forEach((function(t){var e,r=t.changedBy,n=(null===(e=t.changedByUser)||void 0===e?void 0:e.cus_name)||"Unknown User";o[r]||(o[r]={userId:r,userName:n,activities:{},totalActivities:0,lastActivity:t.changedAt}),o[r].activities[t.action]||(o[r].activities[t.action]=0),o[r].activities[t.action]++,o[r].totalActivities++,new Date(t.changedAt)>new Date(o[r].lastActivity)&&(o[r].lastActivity=t.changedAt)})),t.userActivityData=Object.values(o).sort((function(a,b){return b.totalActivities-a.totalActivities})),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Error fetching user activity:",e.t0),t.userActivityData=[],t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນກິດຈະກຳຜູ້ໃຊ້");case 17:return e.prev=17,t.userActivityLoading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,12,17,20]])})))()},fetchSystemActivity:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,c,l,d,data,f,v,m,i,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.systemActivityLoading=!0,e.prev=1,r=parseInt(t.systemActivityFilter.period),o=new Date,(c=new Date).setDate(c.getDate()-r),l={startDate:c.toISOString().split("T")[0],endDate:o.toISOString().split("T")[0],limit:500},e.next=9,t.$axios.get("/api/money-advances/audit/date-range",{params:l});case 9:for(d=e.sent,data=d.data,f={},v={},m=0,data.data.forEach((function(t){var e=t.changedAt.split("T")[0];f[e]||(f[e]={date:e,count:0}),f[e].count++,v[t.action]||(v[t.action]=0),v[t.action]++,m++})),i=0;i<r;i++)(h=new Date).setDate(h.getDate()-i),x=h.toISOString().split("T")[0],f[x]||(f[x]={date:x,count:0});t.systemActivityData={dailyStats:Object.values(f).sort((function(a,b){return new Date(a.date)-new Date(b.date)})),activityBreakdown:Object.entries(v).map((function(t){var e=Object(n.a)(t,2),r=e[0],o=e[1];return{action:r,count:o,percentage:(o/m*100).toFixed(1)}})).sort((function(a,b){return b.count-a.count})),recentChanges:data.data.sort((function(a,b){return new Date(b.changedAt)-new Date(a.changedAt)})).slice(0,10).map((function(t){var e,r;return{id:t.id,action:t.action,user:(null===(e=t.changedByUser)||void 0===e?void 0:e.cus_name)||"Unknown",recordId:t.recordId,recordPurpose:null===(r=t.record)||void 0===r?void 0:r.purpose,changedAt:t.changedAt}}))},e.next=24;break;case 19:e.prev=19,e.t0=e.catch(1),console.error("Error fetching system activity:",e.t0),t.systemActivityData=null,t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນກິດຈະກຳລະບົບ");case 24:return e.prev=24,t.systemActivityLoading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,19,24,27]])})))()},exportCSV:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.exportLoading=!0,e.prev=1,r={startDate:t.exportFilter.startDate,endDate:t.exportFilter.endDate,format:"csv"},e.next=5,t.$axios.get("/api/money-advances/audit/export",{params:r,responseType:"blob"});case 5:n=e.sent,o=new Blob([n.data],{type:"text/csv"}),c=window.URL.createObjectURL(o),(link=document.createElement("a")).href=c,link.download="audit-report-".concat(r.startDate,"-to-").concat(r.endDate,".csv"),document.body.appendChild(link),link.click(),document.body.removeChild(link),window.URL.revokeObjectURL(c),t.$emit("success","ສົ່ງອອກ CSV ສຳເລັດ"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.error("Export error:",e.t0),t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສົ່ງອອກ CSV");case 22:return e.prev=22,t.exportLoading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,18,22,25]])})))()},generateReport:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.exportLoading=!0;try{t.$emit("success","ຟັງຊັ່ນນີ້ຈະຖືກພັດທະນາໃນອະນາຄົດ")}catch(e){t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສ້າງລາຍງານ")}finally{t.exportLoading=!1}case 2:case"end":return e.stop()}}),e)})))()},backupData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.exportLoading=!0;try{t.$emit("success","ຟັງຊັ່ນນີ້ຈະຖືກພັດທະນາໃນອະນາຄົດ")}catch(e){t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສໍາລອງຂໍ້ມູນ")}finally{t.exportLoading=!1}case 2:case"end":return e.stop()}}),e)})))()},refreshCurrentReport:function(){"user-activity"===this.activeTab?this.fetchUserActivity():"system-activity"===this.activeTab&&this.fetchSystemActivity()},getActivityIcon:function(t){return{CREATE:"fas fa-plus-circle",UPDATE:"fas fa-edit",APPROVE:"fas fa-check-circle",SETTLE:"fas fa-money-bill-wave",DELETE:"fas fa-trash-alt"}[t]||"fas fa-question-circle"},getActivityLabel:function(t){return this.actionLabels[t]||t},formatDateTime:function(t){return t?new Date(t).toLocaleString("lo-LA"):"N/A"},formatShortDate:function(t){return new Date(t).toLocaleDateString("lo-LA",{month:"short",day:"numeric"})},formatRelativeTime:function(t){var e=new Date-new Date(t),r=Math.floor(e/6e4),n=Math.floor(e/36e5),o=Math.floor(e/864e5);return r<1?"ຫຼ້າສຸດ":r<60?"".concat(r," ນາທີຜ່ານມາ"):n<24?"".concat(n," ຊົ່ວໂມງຜ່ານມາ"):"".concat(o," ມື້ຜ່ານມາ")},getDateDaysAgo:function(t){var e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]},getTodayDate:function(){return(new Date).toISOString().split("T")[0]},closeDialog:function(){this.$emit("close")}}}),d=(r(969),r(32)),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"modal-overlay",on:{click:t.closeDialog}},[e("div",{staticClass:"modal-dialog reports-dialog",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),e("button",{staticClass:"close-btn",on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"})])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"tabs-container"},[e("div",{staticClass:"tabs"},t._l(t.reportTabs,(function(r){return e("button",{key:r.id,class:["tab-btn",{active:t.activeTab===r.id}],on:{click:function(e){t.activeTab=r.id}}},[e("i",{class:r.icon}),t._v("\n            "+t._s(r.label)+"\n          ")])})),0)]),t._v(" "),"user-activity"===t.activeTab?e("div",{staticClass:"report-content"},[e("div",{staticClass:"report-header"},[t._m(1),t._v(" "),e("div",{staticClass:"date-filter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.userActivityFilter.startDate,expression:"userActivityFilter.startDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.userActivityFilter.startDate},on:{change:t.fetchUserActivity,input:function(e){e.target.composing||t.$set(t.userActivityFilter,"startDate",e.target.value)}}}),t._v(" "),e("span",[t._v("ຫາ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userActivityFilter.endDate,expression:"userActivityFilter.endDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.userActivityFilter.endDate},on:{change:t.fetchUserActivity,input:function(e){e.target.composing||t.$set(t.userActivityFilter,"endDate",e.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.fetchUserActivity}},[e("i",{staticClass:"fas fa-search"}),t._v("\n              ຄົ້ນຫາ\n            ")])])]),t._v(" "),t.userActivityLoading?e("div",{staticClass:"loading-state"},[e("div",{staticClass:"spinner-sm"}),t._v(" "),e("span",[t._v("ກຳລັງໂຫຼດຂໍ້ມູນ...")])]):t.userActivityData.length>0?e("div",{staticClass:"user-activity-content"},[e("div",{staticClass:"activity-summary"},[e("div",{staticClass:"summary-card"},[t._m(2),t._v(" "),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-number"},[t._v(t._s(t.uniqueActiveUsers))]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ຜູ້ໃຊ້ທີ່ມີກິດຈະກຳ")])])]),t._v(" "),e("div",{staticClass:"summary-card"},[t._m(3),t._v(" "),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-number"},[t._v(t._s(t.totalActivities))]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ລວມກິດຈະກຳ")])])]),t._v(" "),e("div",{staticClass:"summary-card"},[t._m(4),t._v(" "),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-text"},[t._v(t._s(t.mostActiveUser))]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ຜູ້ໃຊ້ທີ່ມີກິດຈະກຳສູງສຸດ")])])])]),t._v(" "),e("div",{staticClass:"activity-table"},[e("table",{staticClass:"table"},[t._m(5),t._v(" "),e("tbody",t._l(t.userActivityData,(function(r){return e("tr",{key:r.userId},[e("td",[e("div",{staticClass:"user-info"},[e("div",{staticClass:"user-name"},[t._v(t._s(r.userName))]),t._v(" "),e("div",{staticClass:"user-id"},[t._v("ID: "+t._s(r.userId))])])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count create"},[t._v(t._s(r.activities.CREATE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count update"},[t._v(t._s(r.activities.UPDATE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count approve"},[t._v(t._s(r.activities.APPROVE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count settle"},[t._v(t._s(r.activities.SETTLE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count delete"},[t._v(t._s(r.activities.DELETE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"total-count"},[t._v(t._s(r.totalActivities))])]),t._v(" "),e("td",[t._v(t._s(t.formatDateTime(r.lastActivity)))])])})),0)])])]):e("div",{staticClass:"no-data"},[e("i",{staticClass:"fas fa-chart-bar"}),t._v(" "),e("p",[t._v("ບໍ່ມີຂໍ້ມູນກິດຈະກຳໃນຊ່ວງເວລານີ້")])])]):t._e(),t._v(" "),"system-activity"===t.activeTab?e("div",{staticClass:"report-content"},[e("div",{staticClass:"report-header"},[t._m(6),t._v(" "),e("div",{staticClass:"date-filter"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.systemActivityFilter.period,expression:"systemActivityFilter.period"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.systemActivityFilter,"period",e.target.multiple?r:r[0])},t.fetchSystemActivity]}},[e("option",{attrs:{value:"7"}},[t._v("7 ວັນຜ່ານມາ")]),t._v(" "),e("option",{attrs:{value:"30"}},[t._v("30 ວັນຜ່ານມາ")]),t._v(" "),e("option",{attrs:{value:"90"}},[t._v("90 ວັນຜ່ານມາ")]),t._v(" "),e("option",{attrs:{value:"365"}},[t._v("1 ປີຜ່ານມາ")])]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.fetchSystemActivity}},[e("i",{staticClass:"fas fa-sync"}),t._v("\n              ອັບເດດ\n            ")])])]),t._v(" "),t.systemActivityLoading?e("div",{staticClass:"loading-state"},[e("div",{staticClass:"spinner-sm"}),t._v(" "),e("span",[t._v("ກຳລັງໂຫຼດຂໍ້ມູນ...")])]):t.systemActivityData?e("div",{staticClass:"system-activity-content"},[e("div",{staticClass:"chart-container"},[e("h6",[t._v("ກິດຈະກຳລາຍວັນ")]),t._v(" "),e("div",{staticClass:"chart-placeholder"},[e("div",{staticClass:"chart-bars"},t._l(t.systemActivityData.dailyStats,(function(r,n){return e("div",{key:n,staticClass:"chart-bar",style:{height:r.count/t.maxDailyActivity*100+"%"},attrs:{title:"".concat(r.date,": ").concat(r.count," ກິດຈະກຳ")}},[e("div",{staticClass:"bar-value"},[t._v(t._s(r.count))])])})),0),t._v(" "),e("div",{staticClass:"chart-labels"},t._l(t.systemActivityData.dailyStats,(function(r,n){return e("span",{key:n,staticClass:"chart-label"},[t._v("\n                  "+t._s(t.formatShortDate(r.date))+"\n                ")])})),0)])]),t._v(" "),e("div",{staticClass:"activity-breakdown"},[e("h6",[t._v("ການແບ່ງປະເພດກິດຈະກຳ")]),t._v(" "),e("div",{staticClass:"breakdown-grid"},t._l(t.systemActivityData.activityBreakdown,(function(r){return e("div",{key:r.action,staticClass:"breakdown-item"},[e("div",{staticClass:"breakdown-icon",class:r.action.toLowerCase()},[e("i",{class:t.getActivityIcon(r.action)})]),t._v(" "),e("div",{staticClass:"breakdown-info"},[e("div",{staticClass:"breakdown-label"},[t._v(t._s(t.getActivityLabel(r.action)))]),t._v(" "),e("div",{staticClass:"breakdown-count"},[t._v(t._s(r.count))]),t._v(" "),e("div",{staticClass:"breakdown-percentage"},[t._v(t._s(r.percentage)+"%")])])])})),0)]),t._v(" "),e("div",{staticClass:"recent-changes"},[e("h6",[t._v("ການປ່ຽນແປງຫຼ້າສຸດ")]),t._v(" "),e("div",{staticClass:"changes-timeline"},t._l(t.systemActivityData.recentChanges,(function(r){return e("div",{key:r.id,staticClass:"change-item"},[e("div",{staticClass:"change-icon",class:r.action.toLowerCase()},[e("i",{class:t.getActivityIcon(r.action)})]),t._v(" "),e("div",{staticClass:"change-content"},[e("div",{staticClass:"change-text"},[e("strong",[t._v(t._s(r.user))]),t._v(" \n                    "+t._s(t.getActivityLabel(r.action))+" \n                    "),e("em",[t._v(t._s(r.recordPurpose||"Record #".concat(r.recordId)))])]),t._v(" "),e("div",{staticClass:"change-time"},[t._v(t._s(t.formatRelativeTime(r.changedAt)))])])])})),0)])]):e("div",{staticClass:"no-data"},[e("i",{staticClass:"fas fa-server"}),t._v(" "),e("p",[t._v("ບໍ່ມີຂໍ້ມູນກິດຈະກຳລະບົບ")])])]):t._e(),t._v(" "),"export"===t.activeTab?e("div",{staticClass:"report-content"},[e("div",{staticClass:"export-content"},[t._m(7),t._v(" "),e("div",{staticClass:"export-options"},[e("div",{staticClass:"export-option"},[t._m(8),t._v(" "),e("p",[t._v("ສົ່ງອອກຂໍ້ມູນປະຫວັດການປ່ຽນແປງໃນຮູບແບບ CSV ສຳລັບການວິເຄາະ")]),t._v(" "),e("div",{staticClass:"export-controls"},[e("div",{staticClass:"date-range"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.exportFilter.startDate,expression:"exportFilter.startDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.exportFilter.startDate},on:{input:function(e){e.target.composing||t.$set(t.exportFilter,"startDate",e.target.value)}}}),t._v(" "),e("span",[t._v("ຫາ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.exportFilter.endDate,expression:"exportFilter.endDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.exportFilter.endDate},on:{input:function(e){e.target.composing||t.$set(t.exportFilter,"endDate",e.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn btn-secondary",attrs:{disabled:t.exportLoading},on:{click:t.exportCSV}},[t.exportLoading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-download"}),t._v("\n                  ສົ່ງອອກ CSV\n                ")])])]),t._v(" "),e("div",{staticClass:"export-option"},[t._m(9),t._v(" "),e("p",[t._v("ສົ່ງອອກລາຍງານສະຫຼຸບດ້ວຍກາຟິກແລະການວິເຄາະ")]),t._v(" "),e("div",{staticClass:"export-controls"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.exportFilter.reportType,expression:"exportFilter.reportType"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.exportFilter,"reportType",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:"summary"}},[t._v("ສະຫຼຸບທົ່ວໄປ")]),t._v(" "),e("option",{attrs:{value:"user-activity"}},[t._v("ກິດຈະກຳຜູ້ໃຊ້")]),t._v(" "),e("option",{attrs:{value:"trend-analysis"}},[t._v("ການວິເຄາະແນວໂນ້ມ")])]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.exportLoading},on:{click:t.generateReport}},[t.exportLoading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-file-pdf"}),t._v("\n                  ສ້າງລາຍງານ\n                ")])])]),t._v(" "),e("div",{staticClass:"export-option"},[t._m(10),t._v(" "),e("p",[t._v("ສໍາລອງຂໍ້ມູນປະຫວັດການປ່ຽນແປງທັງໝົດ")]),t._v(" "),e("div",{staticClass:"export-controls"},[t._m(11),t._v(" "),e("button",{staticClass:"btn btn-warning",attrs:{disabled:t.exportLoading},on:{click:t.backupData}},[t.exportLoading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-archive"}),t._v("\n                  ສໍາລອງຂໍ້ມູນ\n                ")])])])])])]):t._e()]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline",attrs:{disabled:t.isLoading},on:{click:t.refreshCurrentReport}},[e("i",{staticClass:"fas fa-sync"}),t._v("\n        ອັບເດດ\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"}),t._v("\n        ປິດ\n      ")])])])]):t._e()}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-title-section"},[e("i",{staticClass:"fas fa-chart-line modal-icon"}),t._v(" "),e("h5",{staticClass:"modal-title"},[t._v("ລາຍງານປະຫວັດການປ່ຽນແປງ")])])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-users"}),this._v("\n            ລາຍງານກິດຈະກຳຜູ້ໃຊ້\n          ")])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-user-friends"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-edit"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-crown"})])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ຜູ້ໃຊ້")]),t._v(" "),e("th",[t._v("ສ້າງ")]),t._v(" "),e("th",[t._v("ແກ້ໄຂ")]),t._v(" "),e("th",[t._v("ອະນຸມັດ")]),t._v(" "),e("th",[t._v("ຊຳລະ")]),t._v(" "),e("th",[t._v("ລົບ")]),t._v(" "),e("th",[t._v("ລວມ")]),t._v(" "),e("th",[t._v("ກິດຈະກຳຫຼ້າສຸດ")])])])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-server"}),this._v("\n            ລາຍງານກິດຈະກຳລະບົບ\n          ")])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-download"}),this._v("\n            ສົ່ງອອກລາຍງານ\n          ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-header"},[e("i",{staticClass:"fas fa-file-csv"}),t._v(" "),e("h6",[t._v("ສົ່ງອອກຂໍ້ມູນ CSV")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-header"},[e("i",{staticClass:"fas fa-chart-pie"}),t._v(" "),e("h6",[t._v("ລາຍງານສະຫຼຸບ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-header"},[e("i",{staticClass:"fas fa-database"}),t._v(" "),e("h6",[t._v("ສໍາລອງຂໍ້ມູນ")])])},function(){var t=this._self._c;return t("div",{staticClass:"backup-info"},[t("small",[this._v("ຂໍ້ມູນທັງໝົດຈະຖືກສໍາລອງໃນຮູບແບບ JSON")])])}],!1,null,"7e1ed358",null);e.default=component.exports},1417:function(t,e,r){"use strict";r(1193)},1418:function(t,e,r){var n=r(15)((function(i){return i[1]}));n.push([t.i,".btn-outline[data-v-4a28acf4]{background:#fff;border:2px solid #667eea;color:#667eea}.btn-outline[data-v-4a28acf4]:hover{background:#667eea;color:#fff}.btn-audit[data-v-4a28acf4]{background:#9b59b6;color:#fff}.btn-audit[data-v-4a28acf4]:hover{background:#8e44ad;box-shadow:0 4px 8px rgba(155,89,182,.3);transform:translateY(-2px)}.money-advance-container[data-v-4a28acf4]{margin:0 auto;max-width:1400px;padding:20px}.header-section[data-v-4a28acf4]{align-items:center;display:flex;justify-content:space-between;margin-bottom:30px}.header-actions[data-v-4a28acf4]{align-items:center;display:flex;gap:12px}.page-title[data-v-4a28acf4]{color:#333;font-size:28px;font-weight:600;margin:0}.summary-cards[data-v-4a28acf4]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:30px}.summary-card[data-v-4a28acf4]{border:1px solid #e3e6f0;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1)}.card-body[data-v-4a28acf4]{padding:20px;text-align:center}.card-title[data-v-4a28acf4]{color:#666;font-size:14px;font-weight:600;margin-bottom:10px;text-transform:uppercase}.card-value[data-v-4a28acf4]{color:#333;font-size:24px;font-weight:700;margin:0}.card-value.pending[data-v-4a28acf4]{color:#f39c12}.card-value.approved[data-v-4a28acf4]{color:#27ae60}.card-value.settled[data-v-4a28acf4]{color:#3498db}.filters-section[data-v-4a28acf4]{background:#f8f9fa;border-radius:8px;margin-bottom:20px;padding:20px}.row[data-v-4a28acf4]{display:flex;flex-wrap:wrap;margin:-10px}.col-md-2[data-v-4a28acf4]{flex:0 0 16.666%;max-width:16.666%;padding:10px}.col-md-3[data-v-4a28acf4]{flex:0 0 25%;max-width:25%;padding:10px}.form-control[data-v-4a28acf4]{border:1px solid #ddd;border-radius:4px;font-size:14px;padding:8px 12px;width:100%}.btn[data-v-4a28acf4]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:8px;padding:8px 16px;transition:all .2s ease}.btn-primary[data-v-4a28acf4]{background:#007bff;color:#fff}.btn-secondary[data-v-4a28acf4]{background:#6c757d;color:#fff}.btn-block[data-v-4a28acf4]{justify-content:center;width:100%}.btn[data-v-4a28acf4]:hover{opacity:.9;transform:translateY(-1px)}.table-container[data-v-4a28acf4]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);overflow:hidden;position:relative}.loading-overlay[data-v-4a28acf4]{align-items:center;background:hsla(0,0%,100%,.8);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:10}.spinner[data-v-4a28acf4]{animation:spin-4a28acf4 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:40px;width:40px}@keyframes spin-4a28acf4{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.table[data-v-4a28acf4]{border-collapse:collapse;margin:0;width:100%}.table th[data-v-4a28acf4]{background:#f8f9fa;border-bottom:2px solid #dee2e6;font-weight:600;white-space:nowrap}.table td[data-v-4a28acf4],.table th[data-v-4a28acf4]{font-size:13px;padding:15px 10px}.table td[data-v-4a28acf4]{border-top:1px solid #dee2e6;vertical-align:middle}.table-striped tbody tr[data-v-4a28acf4]:nth-of-type(odd){background-color:rgba(0,0,0,.05)}.amount[data-v-4a28acf4]{color:#27ae60;font-weight:600}.ministry-info[data-v-4a28acf4]{font-size:12px}.ministry-name[data-v-4a28acf4]{color:#333;font-weight:600;margin-bottom:2px}.ministry-code[data-v-4a28acf4]{background:#e3f2fd;border-radius:3px;color:#666;font-family:monospace;font-size:10px;padding:1px 4px}.no-ministry[data-v-4a28acf4]{color:#999;font-size:11px;font-style:italic}.bank-account-info[data-v-4a28acf4]{font-size:12px}.bank-name[data-v-4a28acf4]{color:#333;font-weight:600}.account-number[data-v-4a28acf4]{color:#666;font-family:monospace}.no-bank-account[data-v-4a28acf4]{color:#999;font-size:12px;font-style:italic}.status-badge[data-v-4a28acf4]{align-items:center;border:1px solid transparent;border-radius:20px;display:inline-flex;font-size:12px;font-weight:600;gap:6px;padding:6px 12px;text-transform:uppercase}.status-badge.pending[data-v-4a28acf4]{background:#fff3cd;border-color:#ffeaa7;color:#856404}.status-badge.approved[data-v-4a28acf4]{background:#d4edda;border-color:#c3e6cb;color:#155724}.status-badge.settled[data-v-4a28acf4]{background:#cce5ff;border-color:#b3d7ff;color:#004085}.action-buttons[data-v-4a28acf4]{flex-wrap:wrap;gap:4px}.action-buttons[data-v-4a28acf4],.btn-sm[data-v-4a28acf4]{display:flex;justify-content:center}.btn-sm[data-v-4a28acf4]{align-items:center;border:none;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);cursor:pointer;font-size:11px;height:28px;padding:0;transition:all .2s ease;width:28px}.btn-sm[data-v-4a28acf4]:hover{box-shadow:0 4px 8px rgba(0,0,0,.15);transform:translateY(-2px)}.btn-sm.btn-info[data-v-4a28acf4]{background:#17a2b8;color:#fff}.btn-sm.btn-warning[data-v-4a28acf4]{background:#ffc107;color:#212529}.btn-sm.btn-success[data-v-4a28acf4]{background:#28a745;color:#fff}.btn-sm.btn-danger[data-v-4a28acf4]{background:#dc3545;color:#fff}.no-data[data-v-4a28acf4]{color:#666;padding:60px 20px;text-align:center}.no-data i[data-v-4a28acf4]{font-size:48px;margin-bottom:15px;opacity:.5}.pagination-nav[data-v-4a28acf4]{display:flex;justify-content:center;margin-top:20px}.pagination[data-v-4a28acf4]{display:flex;list-style:none;margin:0;padding:0}.page-item[data-v-4a28acf4]{margin:0 2px}.page-link[data-v-4a28acf4]{background:#fff;border:1px solid #dee2e6;color:#007bff;cursor:pointer;padding:8px 12px;-webkit-text-decoration:none;text-decoration:none}.page-link[data-v-4a28acf4]:hover{background:#e9ecef}.page-item.active .page-link[data-v-4a28acf4]{background:#007bff;border-color:#007bff;color:#fff}.page-item.disabled .page-link[data-v-4a28acf4]{background:#fff;color:#6c757d;cursor:not-allowed}@media (max-width:1200px){.table td[data-v-4a28acf4],.table th[data-v-4a28acf4]{font-size:12px;padding:10px 6px}.btn-sm[data-v-4a28acf4]{font-size:10px;height:24px;width:24px}}@media (max-width:768px){.summary-cards[data-v-4a28acf4]{grid-template-columns:repeat(2,1fr)}.table-container[data-v-4a28acf4]{overflow-x:auto}.table[data-v-4a28acf4]{min-width:800px}.action-buttons[data-v-4a28acf4]{flex-direction:row;gap:3px}.row[data-v-4a28acf4]{flex-direction:column}.col-md-2[data-v-4a28acf4],.col-md-3[data-v-4a28acf4]{flex:1;margin-bottom:10px;max-width:100%}}@media (max-width:480px){.summary-cards[data-v-4a28acf4]{grid-template-columns:1fr}.header-section[data-v-4a28acf4]{flex-direction:column;gap:15px;text-align:center}.action-buttons[data-v-4a28acf4]{justify-content:center}}",""]),n.locals={},t.exports=n},1695:function(t,e,r){"use strict";r.r(e);r(44),r(9),r(5),r(34),r(66),r(10),r(7),r(11),r(8),r(12);var n=r(3),o=r(20),c=(r(39),r(51),r(54),r(53),r(35),r(131),r(63),r(30),r(816),r(445),r(75),r(92),r(1297)),l=r(1298),d=r(999),f=r(1299),v=r(1300),m=r(1301),h=r(1e3),x=r(36);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C={name:"MoneyAdvanceManagement",components:{MoneyAdvanceDialog:c.default,MoneyAdvanceDetailDialog:l.default,VoucherPrintComponent:d.default,AuditTrailDialog:f.default,VersionComparisonDialog:v.default,AuditReportsDialog:m.default,SettlementDialog:h.default},middleware:"auths",data:function(){return{statusFilter:"",statusLabels:{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ",rejected:"ປະຕິເສດ",cancelled:"ຍົກເລີກ"},advances:[],dashboard:{counts:{total:0,pending:0,approved:0,settled:0},amounts:{total:0,pending:0}},users:[],currencies:[],ministries:[],bankAccounts:[],chartAccounts:[],pagination:{currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10},filters:{status:"",makerId:"",ministryId:""},searchTerm:"",loading:!1,saving:!1,formLoading:!1,showDialog:!1,radnomKeyMaintenanceDialog:1,showDetailDialog:!1,showPrintVoucher:!1,showSettlementDialog:!1,settlementData:null,selectedAdvanceForSettlement:null,showAuditDialog:!1,showComparisonDialog:!1,showAuditReportsDialog:!1,selectedRecordForAudit:null,selectedRecordForComparison:null,comparisonData:null,canRestoreRecord:!1,isEdit:!1,selectedAdvance:null,advanceDetails:null,detailLoading:!1,form:{id:null,amount:"",method:"cash",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",reason:"",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""},searchTimeout:null}},computed:{user:function(){return this.$auth.user||""},paginationPages:function(){for(var t=[],e=Math.max(1,this.pagination.currentPage-2),r=Math.min(this.pagination.totalPages,this.pagination.currentPage+2),i=e;i<=r;i++)t.push(i);return t}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:t.canRestoreRecord=t.checkRestorePermissions();case 3:case"end":return e.stop()}}),e)})))()},methods:{checkRestorePermissions:function(){var t,e,r;return"admin"===(null===(t=this.user)||void 0===t?void 0:t.role)||(null===(e=this.user)||void 0===e||null===(r=e.permissions)||void 0===r?void 0:r.includes("restore_records"))},getStatusInLao:function(t){return this.statusLabels[t]||t.toUpperCase()},getStatusOptions:function(){return[{value:"",label:"ທຸກສະຖານະ"},{value:"pending",label:"ຄ້າງອະນຸມັດ"},{value:"approved",label:"ອະນຸມັດແລ້ວ"},{value:"settled",label:"ຊຳລະແລ້ວ"}]},loadInitialData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.fetchData(),t.fetchDashboard(),t.fetchUsers(),t.fetchCurrencies(),t.fetchMinistry(),t.fetchBankAccounts(),t.fetchChartAccounts()]);case 2:case"end":return e.stop()}}),e)})))()},fetchData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,r=_({page:t.pagination.currentPage,limit:t.pagination.itemsPerPage},t.filters),t.statusFilter&&(r.status=t.statusFilter),t.searchTerm&&(r.search=t.searchTerm),e.next=7,t.$axios.get("/api/money-advances",{params:r});case 7:n=e.sent,data=n.data,t.advances=data.data.advances,t.pagination=data.data.pagination,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),t.showToast("Error fetching money advances","error"),console.error(e.t0);case 17:return e.prev=17,t.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))()},fetchDashboard:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},t.filters.makerId&&(r.makerId=t.filters.makerId),t.filters.ministryId&&(r.ministryId=t.filters.ministryId),e.next=6,t.$axios.get("/api/money-advances/dashboard",{params:r});case 6:n=e.sent,data=n.data,t.dashboard=data.data,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching dashboard:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},fetchUsers:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/user/find");case 3:r=e.sent,(data=r.data)&&data.data?t.users=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.users=data:t.users=[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching users:",e.t0),t.users=[],t.showToast("Failed to load users","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchCurrencies:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/currency/find");case 3:r=e.sent,(data=r.data)&&data.data?t.currencies=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.currencies=data:t.currencies=[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching currencies:",e.t0),t.currencies=[],t.showToast("Failed to load currencies","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchMinistry:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/ministries");case 3:(r=e.sent).data&&r.data.success?t.ministries=r.data.data||[]:t.ministries=[],e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching ministries:",e.t0),t.ministries=[],t.showToast("Failed to load ministries","error");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))()},fetchBankAccounts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/bank_account/find");case 3:r=e.sent,(data=r.data)&&data.data?t.bankAccounts=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.bankAccounts=data:t.bankAccounts=[],t.bankAccounts=t.bankAccounts.filter((function(t){return t.isActive})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching bank accounts:",e.t0),t.bankAccounts=[];case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},fetchChartAccounts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/accountChart/find");case 3:r=e.sent,(data=r.data)&&data.data?t.chartAccounts=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.chartAccounts=data:t.chartAccounts=[],e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching chart accounts:",e.t0),t.chartAccounts=[];case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},viewAuditTrail:function(t){this.selectedRecordForAudit=t,this.showAuditDialog=!0,console.warn("DATA ".concat(JSON.stringify(this.selectedRecordForAudit)," ")),console.info("DATA ".concat(JSON.stringify(this.showAuditDialog)," "))},closeAuditDialog:function(){var t=this;this.showAuditDialog=!1,setTimeout((function(){t.selectedRecordForAudit=null}),300)},handleVersionComparison:function(t){this.selectedRecordForComparison=this.selectedRecordForAudit,this.comparisonData=t,this.showAuditDialog=!1,this.showComparisonDialog=!0},closeComparisonDialog:function(){var t=this;this.showComparisonDialog=!1,setTimeout((function(){t.selectedRecordForComparison=null,t.comparisonData=null}),300)},handleVersionRestore:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(x.i)(e.$swal,"ຢືນຢັນການກັບຄືນ","ທ່ານແນ່ໃຈທີ່ຈະກັບຄືນໄປຫາເວີຊັ່ນນີ້ບໍ່?","question","ຍົກເລີກ","ກັບຄືນ");case 3:if(!r.sent.isConfirmed){r.next=19;break}return c=(null===(n=e.selectedRecordForAudit)||void 0===n?void 0:n.id)||(null===(o=e.selectedRecordForComparison)||void 0===o?void 0:o.id),r.next=8,e.$axios.post("/api/money-advances/".concat(c,"/restore"),{targetVersion:t.version,reason:"Restored via audit trail"});case 8:if(l=r.sent,!(data=l.data).success){r.next=18;break}return e.showToast("ກັບຄືນເວີຊັ່ນສຳເລັດ","success"),e.closeAuditDialog(),e.closeComparisonDialog(),r.next=16,e.fetchData();case 16:r.next=19;break;case 18:throw new Error(data.message||"Restore failed");case 19:r.next=25;break;case 21:r.prev=21,r.t0=r.catch(0),console.error("Error restoring version:",r.t0),e.showToast("ເກີດຂໍ້ຜິດພາດໃນການກັບຄືນ","error");case 25:case"end":return r.stop()}}),r,null,[[0,21]])})))()},handleViewFullChanges:function(t){console.log("View full changes for:",t),this.showToast("ຟັງຊັ່ນນີ້ຈະຖືກພັດທະນາໃນອະນາຄົດ","info")},openAuditReports:function(){this.showAuditReportsDialog=!0},closeAuditReportsDialog:function(){this.showAuditReportsDialog=!1},createSettlement:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{e.selectedAdvanceForSettlement=t,n=(new Date).toISOString().split("T")[0],e.settlementData={id:null,amount:t.amount,currencyId:t.currencyId,userId:t.makerId,ministryId:t.ministryId||"",bankAccountId:t.bankAccountId||"",chartAccountId:"",method:"",settlementDate:n,bookingDate:n,notes:"ຊຳລະຄືນ ຈາກ ລາຍຈ່າຍເລກທີ #".concat(t.id," - ").concat(t.purpose||"ບໍ່ໄດ້ລະບຸເນື້ອໃນ"),moneyAdvanceId:t.id,linkToAdvance:"true"},console.log("🔗 Creating settlement with money advance link:",{advanceId:t.id,linkToAdvance:e.settlementData.linkToAdvance,moneyAdvanceId:e.settlementData.moneyAdvanceId,settlementDate:e.settlementData.settlementDate,bookingDate:e.settlementData.bookingDate}),e.showSettlementDialog=!0}catch(t){console.error("Error preparing settlement:",t),e.showToast("Error preparing settlement","error")}case 1:case"end":return r.stop()}}),r)})))()},closeSettlementDialog:function(){this.showSettlementDialog=!1,this.settlementData=null,this.selectedAdvanceForSettlement=null},saveSettlement:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d,f,v,m,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c={reason:"Settlement created for Money Advance #".concat(null===(n=e.selectedAdvanceForSettlement)||void 0===n?void 0:n.id),userId:null===(o=e.user)||void 0===o?void 0:o.id},l=_(_({},t),{},{bookingDate:t.bookingDate||t.settlementDate},c),console.log("📤 Sending settlement to API:",l),r.next=6,e.$axios.post("/api/settlements",l);case 6:if(!(d=r.sent).data||!d.data.success){r.next=16;break}return e.showToast("Settlement created successfully","success"),e.closeSettlementDialog(),r.next=12,e.fetchData();case 12:return r.next=14,e.fetchDashboard();case 14:r.next=17;break;case 16:throw new Error((null===(f=d.data)||void 0===f?void 0:f.message)||"Failed to create settlement");case 17:r.next=24;break;case 19:r.prev=19,r.t0=r.catch(0),console.error("Error saving settlement:",r.t0),h=(null===(v=r.t0.response)||void 0===v||null===(m=v.data)||void 0===m?void 0:m.message)||"Error creating settlement",e.showToast(h,"error");case 24:case"end":return r.stop()}}),r,null,[[0,19]])})))()},saveAdvance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.saving=!0,r.prev=1,o={reason:t.reason||(e.isEdit?"Updated record":"Created new record"),userId:null===(n=e.user)||void 0===n?void 0:n.id},!e.isEdit){r.next=10;break}return t.updateUserId=e.user.id,r.next=7,e.$axios.put("/api/money-advances/".concat(t.id),_(_({},t),o));case 7:e.showToast("Money advance updated successfully","success"),r.next=14;break;case 10:return r.next=12,e.$axios.post("/api/money-advances",_(_({},t),o));case 12:r.sent,e.showToast("Money advance created successfully","success");case 14:return r.next=16,e.fetchData();case 16:return r.next=18,e.fetchDashboard();case 18:r.next=25;break;case 20:r.prev=20,r.t0=r.catch(1),d=(null===(c=r.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)||"Error saving money advance",e.showToast(d,"error"),console.error("Save error:",r.t0);case 25:return r.prev=25,e.saving=!1,r.finish(25);case 28:case"end":return r.stop()}}),r,null,[[1,20,25,28]])})))()},approveAdvance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(x.i)(e.$swal,"ຢືນຢັນ ການອະນຸມັດ","ທ່ານແນ່ໃຈທີ່ຈະອະນຸມັດລາຍການນີ້ແມ່ນບໍ່ ".concat(e.formatCurrency(t.amount),"?"),"question","ບໍ່","ຕົກລົງ");case 3:if(!r.sent.isConfirmed){r.next=12;break}return r.next=7,e.$axios.put("/api/money-advances/".concat(t.id,"/approve"),{checkerId:e.user.id,reason:"Approved by manager"});case 7:return e.showToast("Money advance approved successfully","success"),r.next=10,e.fetchData();case 10:return r.next=12,e.fetchDashboard();case 12:r.next=18;break;case 14:r.prev=14,r.t0=r.catch(0),console.error("Error approving:",r.t0),e.showToast("Error approving money advance","error");case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},openDialog:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.length>0&&void 0!==t[0]?t[0]:null,e.isEdit=!!n,e.showDialog=!0,e.randomKeyMaintenanceDialog="dialog-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random())),0!==e.users.length&&0!==e.currencies.length&&0!==e.ministries.length){r.next=9;break}return e.formLoading=!0,r.next=8,Promise.all([0===e.users.length?e.fetchUsers():Promise.resolve(),0===e.currencies.length?e.fetchCurrencies():Promise.resolve(),0===e.ministries.length?e.fetchMinistry():Promise.resolve(),0===e.bankAccounts.length?e.fetchBankAccounts():Promise.resolve()]);case 8:e.formLoading=!1;case 9:n?e.form={id:n.id,amount:n.amount,method:n.method,purpose:n.purpose||"",note:n.note||"",makerId:n.makerId,currencyId:n.currencyId,dueDate:n.dueDate?n.dueDate.split("T")[0]:"",bankAccountId:n.bankAccountId||"",ministryId:n.ministryId||"",bookingDate:n.bookingDate||"",exchangeRate:n.exchangeRate||"",reason:"",externalRef:n.externalRef||"",externalRefNo:n.externalRefNo||"",chequeNo:n.chequeNo||"",receiveName:n.receiveName||"",receiveIDNO:n.receiveIDNO||""}:(e.resetForm(),Object.assign(e.form,{externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""}),e.currencies.length>0&&(o=e.currencies.find((function(t){return"USD"===t.code}))||e.currencies[0],e.form.currencyId=o.id));case 10:case"end":return r.stop()}}),r)})))()},closeDialog:function(){this.showDialog=!1,this.resetForm()},resetForm:function(){var t=(new Date).toISOString().split("T")[0];this.form={id:null,amount:"",purpose:"",note:"",makerId:this.user.id,currencyId:"",dueDate:"",bankAccountId:"",exchangeRate:1,ministryId:"",bookingDate:t,reason:""}},updateSelectedCurrency:function(t){console.log("Currency changed to:",t)},updateSelectedBankAccount:function(t){console.log("Bank account changed to:",t)},updateSelectedMinistry:function(t){console.log("Ministry changed to:",t)},onFilterChange:function(){this.filters.status=this.statusFilter,this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},settleAdvance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!confirm("Mark money advance as settled?")){r.next=14;break}return r.prev=1,r.next=4,e.$axios.put("/api/money-advances/".concat(t.id,"/settle"),{reason:"Marked as settled"});case 4:return e.showToast("Money advance settled successfully","success"),r.next=7,e.fetchData();case 7:return r.next=9,e.fetchDashboard();case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),e.showToast("Error settling money advance","error");case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))()},deleteAdvance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!confirm("Delete money advance for ".concat(e.formatCurrency(t.amount),"?"))){r.next=14;break}return r.prev=1,r.next=4,e.$axios.delete("/api/money-advances/".concat(t.id),{data:{reason:"Deleted by user"}});case 4:return e.showToast("Money advance deleted successfully","success"),r.next=7,e.fetchData();case 7:return r.next=9,e.fetchDashboard();case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),e.showToast("Error deleting money advance","error");case 14:case"end":return r.stop()}}),r,null,[[1,11]])})))()},viewDetails:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.selectedAdvance=t,e.showDetailDialog=!0,r.prev=2,e.detailLoading=!0,r.next=6,e.$axios.get("/api/money-advances/".concat(t.id));case 6:n=r.sent,data=n.data,e.advanceDetails=data.data,r.next=15;break;case 11:r.prev=11,r.t0=r.catch(2),console.error("Error fetching advance details:",r.t0),e.showToast("Error loading advance details","error");case 15:return r.prev=15,e.detailLoading=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[2,11,15,18]])})))()},closeDetailDialog:function(){this.showDetailDialog=!1,this.selectedAdvance=null,this.advanceDetails=null},closePrintVoucher:function(){var t=this;this.showPrintVoucher=!1,setTimeout((function(){t.advanceDetails=null}),100)},printAdvanceDetails:function(t){var e=this;this.showPrintVoucher=!1,this.$nextTick((function(){e.advanceDetails=t,e.showPrintVoucher=!0}))},downloadAdvanceDetails:function(){var details=this.formatAdvanceForDownload(),t=new Blob([details],{type:"text/plain"}),e=window.URL.createObjectURL(t),a=document.createElement("a");a.href=e,a.download="money-advance-".concat(this.advanceDetails.id,".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(e)},retryLoadDetails:function(){this.selectedAdvance&&this.viewDetails(this.selectedAdvance)},handleEditFromDetail:function(t){this.closeDetailDialog(),this.openDialog(t)},handleApproveFromDetail:function(t){this.closeDetailDialog(),this.approveAdvance(t)},handleCreateSettlement:function(t){this.closeDetailDialog(),this.createSettlement(t)},formatAdvanceForDownload:function(){var t,e,r,n=this.advanceDetails;return"\nMONEY ADVANCE DETAILS\n=====================\n\nID: ".concat(n.id,"\nMaker: ").concat((null===(t=n.maker)||void 0===t?void 0:t.cus_name)||"N/A","\nMinistry: ").concat((null===(e=n.ministry)||void 0===e?void 0:e.name)||"N/A","\nAmount: ").concat(this.formatCurrency(n.amount)," ").concat((null===(r=n.currency)||void 0===r?void 0:r.code)||"","\nPurpose: ").concat(n.purpose||"N/A","\nStatus: ").concat(n.status.toUpperCase(),"\nDue Date: ").concat(this.formatDate(n.dueDate),"\nCreated Date: ").concat(this.formatDate(n.createdAt),"\nUpdated Date: ").concat(this.formatDate(n.updatedAt),"\n\n").concat(n.bankAccount?"Bank Account: ".concat(n.bankAccount.bankName," - ").concat(n.bankAccount.accountNumber):"No Bank Account","\n\nNotes: ").concat(n.note||"No notes provided","\n\n").concat(n.checker?"Checker: ".concat(n.checker.cus_name):"","\n").concat(n.approvedAt?"Approved At: ".concat(this.formatDate(n.approvedAt)):"","\n").concat(n.settledAt?"Settled At: ".concat(this.formatDate(n.settledAt)):"","\n\nGenerated on: ").concat((new Date).toLocaleString(),"\n      ").trim()},changePage:function(t){t>=1&&t<=this.pagination.totalPages&&(this.pagination.currentPage=t,this.fetchData())},resetFilters:function(){this.filters={status:"",makerId:"",ministryId:""},this.searchTerm="",this.statusFilter="",this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},debounceSearch:function(){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.pagination.currentPage=1,t.fetchData()}),500)},formatCurrency:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)},formatDate:function(t){return t?new Date(t).toLocaleDateString():"N/A"},getStatusClass:function(t){return{pending:"warning",approved:"success",settled:"primary"}[t]||"secondary"},getStatusIcon:function(t){return{pending:"fa-clock",approved:"fa-check-circle",settled:"fa-money-bill-wave"}[t]||"fa-question-circle"},getHistoryIcon:function(t){return{created:"fa-plus",updated:"fa-edit",approved:"fa-check",settled:"fa-money-bill",deleted:"fa-trash"}[t]||"fa-history"},formatDateTime:function(t){return t?new Date(t).toLocaleString():"N/A"},isOverdue:function(t){return!!t&&new Date(t)<new Date},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[e](t):this.$notify?this.$notify({title:"error"===e?"Error":"Success",message:t,type:"error"===e?"error":"success"}):alert("".concat(e.toUpperCase(),": ").concat(t))}}},k=C,w=(r(1417),r(32)),component=Object(w.a)(k,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"money-advance-container"},[e("div",{staticClass:"header-section"},[e("h1",{staticClass:"page-title"},[t._v("ອອກລາຍຈ່າຍ")]),t._v(" "),e("div",{staticClass:"header-actions"},[e("button",{staticClass:"btn btn-outline",on:{click:t.openAuditReports}},[e("i",{staticClass:"fas fa-chart-line"}),t._v(" ລາຍງານປະຫວັດ\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openDialog()}}},[e("i",{staticClass:"fas fa-plus"}),t._v(" ລົງບັນຊີລາຍຈ່າຍ\n      ")])])]),t._v(" "),e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ຈນ ລາຍຈ່າຍ")]),t._v(" "),e("p",{staticClass:"card-value"},[t._v(t._s(t.dashboard.counts.total))])])]),t._v(" "),e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ຄ້າງອະນຸມັດ")]),t._v(" "),e("p",{staticClass:"card-value pending"},[t._v(t._s(t.dashboard.counts.pending))])])]),t._v(" "),e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ອະນຸມັດແລ້ວ")]),t._v(" "),e("p",{staticClass:"card-value approved"},[t._v(t._s(t.dashboard.counts.approved))])])]),t._v(" "),e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ຊຳລະແລ້ວ")]),t._v(" "),e("p",{staticClass:"card-value settled"},[t._v(t._s(t.dashboard.counts.settled))])])]),t._v(" "),e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ລວມຍອດທັງໝົດ")]),t._v(" "),e("p",{staticClass:"card-value"},[t._v("\n          "+t._s(t.formatCurrency(t.dashboard.amounts.total))+"\n        ")])])])]),t._v(" "),e("div",{staticClass:"filters-section"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.statusFilter,expression:"statusFilter"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.statusFilter=e.target.multiple?r:r[0]},t.onFilterChange]}},[e("option",{attrs:{value:""}},[t._v("ທຸກສະຖານະ")]),t._v(" "),e("option",{attrs:{value:"pending"}},[t._v("ຄ້າງອະນຸມັດ")]),t._v(" "),e("option",{attrs:{value:"approved"}},[t._v("ອະນຸມັດແລ້ວ")]),t._v(" "),e("option",{attrs:{value:"settled"}},[t._v("ຊຳລະແລ້ວ")])])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.makerId,expression:"filters.makerId"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"makerId",e.target.multiple?r:r[0])},t.fetchData]}},[e("option",{attrs:{value:""}},[t._v("ຈາກຜູ້ໃຊ້ງານທັງໝົດ")]),t._v(" "),t._l(t.users,(function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n            "+t._s(r.cus_name)+"\n          ")])}))],2)]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.ministryId,expression:"filters.ministryId"}],staticClass:"form-control",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"ministryId",e.target.multiple?r:r[0])},t.fetchData]}},[e("option",{attrs:{value:""}},[t._v("ຈາກກະຊວງທັງໝົດ")]),t._v(" "),t._l(t.ministries,(function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v("\n            "+t._s(r.name)+"\n          ")])}))],2)]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ຄົ້ນຫາ ດ້ວຍຈຸດປະສົງ..."},domProps:{value:t.searchTerm},on:{input:[function(e){e.target.composing||(t.searchTerm=e.target.value)},t.debounceSearch]}})]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("button",{staticClass:"btn btn-secondary btn-block",on:{click:t.resetFilters}},[e("i",{staticClass:"fas fa-undo"}),t._v(" ຄ່າເລີ່ມຕົ້ນ\n        ")])])])]),t._v(" "),e("div",{staticClass:"table-container"},[t.loading?e("div",{staticClass:"loading-overlay"},[e("div",{staticClass:"spinner"})]):t._e(),t._v(" "),e("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),e("tbody",t._l(t.advances,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.id))]),t._v(" "),e("td",[t._v(t._s(r.maker?r.maker.cus_name:"N/A"))]),t._v(" "),e("td",[r.ministry?e("div",{staticClass:"ministry-info"},[e("div",{staticClass:"ministry-name"},[t._v(t._s(r.ministry.name))]),t._v(" "),r.ministry.ministryCode?e("div",{staticClass:"ministry-code"},[t._v("\n                "+t._s(r.ministry.ministryCode+" "+r.ministry.ministryName)+"\n              ")]):t._e()]):e("span",{staticClass:"no-ministry"},[t._v("ບໍ່ໄດ້ລະບຸກະຊວງ")])]),t._v(" "),e("td",[e("span",{staticClass:"amount"},[t._v("\n              "+t._s(t.formatCurrency(r.amount))+"\n              "),r.currency?e("small",[t._v(t._s(r.currency.code))]):t._e()])]),t._v(" "),e("td",[t._v(t._s(r.purpose||"N/A"))]),t._v(" "),e("td",[r.bankAccount?e("div",{staticClass:"bank-account-info"},[e("div",{staticClass:"bank-name"},[t._v(t._s(r.bankAccount.bankName))]),t._v(" "),e("div",{staticClass:"account-number"},[t._v("\n                "+t._s(r.bankAccount.accountNumber)+"\n              ")])]):e("span",{staticClass:"no-bank-account"},[t._v("No Bank Account")])]),t._v(" "),e("td",[e("span",{class:["status-badge",r.status]},[t._v("\n              "+t._s(t.getStatusInLao(r.status))+"\n            ")])]),t._v(" "),e("td",[t._v(t._s(t.formatDate(r.dueDate)))]),t._v(" "),e("td",[t._v(t._s(t.formatDate(r.bookingDate)))]),t._v(" "),e("td",[e("div",{staticClass:"action-buttons"},[e("button",{staticClass:"btn btn-sm btn-info",attrs:{title:"View Details"},on:{click:function(e){return t.viewDetails(r)}}},[e("i",{staticClass:"fas fa-eye"})]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-warning",attrs:{title:"Edit"},on:{click:function(e){return t.openDialog(r)}}},[e("i",{staticClass:"fas fa-edit"})]),t._v(" "),"pending"===r.status?e("button",{staticClass:"btn btn-sm btn-success",attrs:{title:"Approve"},on:{click:function(e){return t.approveAdvance(r)}}},[e("i",{staticClass:"fas fa-check"})]):t._e(),t._v(" "),"approved"===r.status?e("button",{staticClass:"btn btn-sm btn-success",attrs:{title:"Create Settlement"},on:{click:function(e){return t.createSettlement(r)}}},[e("i",{staticClass:"fas fa-file-invoice-dollar"})]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-sm btn-danger",attrs:{title:"Print"},on:{click:function(e){return t.printAdvanceDetails(r)}}},[e("i",{staticClass:"fas fa-print"})])])])])})),0)]),t._v(" "),t.loading||0!==t.advances.length?t._e():e("div",{staticClass:"no-data"},[e("i",{staticClass:"fas fa-inbox"}),t._v(" "),e("p",[t._v("No money advances found")])])]),t._v(" "),t.pagination.totalPages>1?e("nav",{staticClass:"pagination-nav"},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:1===t.pagination.currentPage}},[e("button",{staticClass:"page-link",on:{click:function(e){return t.changePage(t.pagination.currentPage-1)}}},[t._v("\n          Previous\n        ")])]),t._v(" "),t._l(t.paginationPages,(function(r){return e("li",{key:r,staticClass:"page-item",class:{active:r===t.pagination.currentPage}},[e("button",{staticClass:"page-link",on:{click:function(e){return t.changePage(r)}}},[t._v("\n          "+t._s(r)+"\n        ")])])})),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:t.pagination.currentPage===t.pagination.totalPages}},[e("button",{staticClass:"page-link",on:{click:function(e){return t.changePage(t.pagination.currentPage+1)}}},[t._v("\n          Next\n        ")])])],2)]):t._e(),t._v(" "),e("money-advance-dialog",{key:t.radnomKeyMaintenanceDialog,attrs:{show:t.showDialog,"is-edit":t.isEdit,"form-data":t.form,users:t.users,currencies:t.currencies,"bank-accounts":t.bankAccounts,ministries:t.ministries,"form-loading":t.formLoading,saving:t.saving},on:{close:t.closeDialog,print:function(e){t.printAdvanceDetails(t.advances.find((function(e){return e.id==t.form.id})))},save:t.saveAdvance,"currency-changed":t.updateSelectedCurrency,"bank-account-changed":t.updateSelectedBankAccount,"ministry-changed":t.updateSelectedMinistry,"validation-error":t.showToast}}),t._v(" "),e("money-advance-detail-dialog",{attrs:{show:t.showDetailDialog,details:t.advanceDetails,loading:t.detailLoading,"status-labels":t.statusLabels},on:{close:t.closeDetailDialog,print:t.printAdvanceDetails,download:t.downloadAdvanceDetails,"retry-load":t.retryLoadDetails,edit:t.handleEditFromDetail,approve:t.handleApproveFromDetail,"create-settlement":t.handleCreateSettlement}}),t._v(" "),t.selectedRecordForAudit&&t.selectedRecordForAudit.id?e("audit-trail-dialog",{attrs:{show:t.showAuditDialog,"record-id":t.selectedRecordForAudit.id,"record-data":t.selectedRecordForAudit,"can-restore":t.canRestoreRecord},on:{close:t.closeAuditDialog,compare:t.handleVersionComparison,restore:t.handleVersionRestore,"view-full-changes":t.handleViewFullChanges,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}):t._e(),t._v(" "),t.selectedRecordForComparison&&t.selectedRecordForComparison.id?e("version-comparison-dialog",{attrs:{show:t.showComparisonDialog,"record-id":t.selectedRecordForComparison.id,"record-data":t.selectedRecordForComparison,"initial-comparison":t.comparisonData,"can-restore":t.canRestoreRecord},on:{close:t.closeComparisonDialog,restore:t.handleVersionRestore,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}):t._e(),t._v(" "),e("audit-reports-dialog",{attrs:{show:t.showAuditReportsDialog},on:{close:t.closeAuditReportsDialog,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}),t._v(" "),t.showPrintVoucher&&t.advanceDetails?e("VoucherPrintComponent",{key:t.advanceDetails.id,attrs:{"voucher-data":t.advanceDetails},on:{close:t.closePrintVoucher}}):t._e(),t._v(" "),e("SettlementDialog",{attrs:{visible:t.showSettlementDialog,settlement:t.settlementData,"outstanding-invoices":[],currencies:t.currencies,"bank-accounts":t.bankAccounts,ministries:t.ministries,"chart-accounts":t.chartAccounts,users:t.users},on:{close:t.closeSettlementDialog,save:t.saveSettlement}})],1)}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),t._v(" "),e("th",[t._v("ຜູ້ລົງບັນຊີ")]),t._v(" "),e("th",[t._v("ກະຊວງ")]),t._v(" "),e("th",[t._v("ຈຳນວນເງິນ")]),t._v(" "),e("th",[t._v("ຈຸດປະສົງ")]),t._v(" "),e("th",[t._v("ບັນຊີທະນາຄານ")]),t._v(" "),e("th",[t._v("ສະຖານະ")]),t._v(" "),e("th",[t._v("ວັນຄົບຮອບຄວນຊຳລະ")]),t._v(" "),e("th",[t._v("ວັນທີລົງຊຳລະ")]),t._v(" "),e("th",[t._v("ຟັງຊັ່ນ")])])])}],!1,null,"4a28acf4",null);e.default=component.exports},910:function(t,e,r){var content=r(962);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("f8dbd576",content,!0,{sourceMap:!1})},911:function(t,e,r){var content=r(964);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("5422c78c",content,!0,{sourceMap:!1})},912:function(t,e,r){var content=r(966);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("683701e4",content,!0,{sourceMap:!1})},913:function(t,e,r){var content=r(968);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("3bcd7bf8",content,!0,{sourceMap:!1})},914:function(t,e,r){var content=r(970);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("9673ac5e",content,!0,{sourceMap:!1})},961:function(t,e,r){"use strict";r(910)},962:function(t,e,r){var n=r(15)((function(i){return i[1]}));n.push([t.i,'.modal-header-right[data-v-8a92950e]{align-items:center;display:flex;gap:15px}.voucher-number[data-v-8a92950e]{color:#fff;font-size:14px;font-weight:600;opacity:.9}.modal-overlay[data-v-8a92950e]{align-items:center;animation:fadeIn-8a92950e .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}@keyframes fadeIn-8a92950e{0%{opacity:0}to{opacity:1}}.enhanced-dialog[data-v-8a92950e]{animation:slideIn-8a92950e .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:98vh;max-width:95vw;overflow:hidden;width:95%}@keyframes slideIn-8a92950e{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[data-v-8a92950e]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:16px 18px}.modal-title-section[data-v-8a92950e]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-8a92950e]{font-size:18px;opacity:.9}.modal-title[data-v-8a92950e]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-8a92950e]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;opacity:.8;padding:6px;transition:opacity .2s}.close-btn[data-v-8a92950e]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-8a92950e]{max-height:calc(98vh - 120px);overflow-y:auto;padding:16px 18px}.form-loading[data-v-8a92950e]{align-items:center;color:#666;display:flex;justify-content:center;padding:40px}.spinner-small[data-v-8a92950e]{animation:spin-8a92950e 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:20px;margin-right:10px;width:20px}@keyframes spin-8a92950e{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.form-grid[data-v-8a92950e]{grid-gap:12px;display:grid;gap:12px;grid-template-columns:repeat(3,1fr)}.form-group[data-v-8a92950e]{margin-bottom:0}.form-group.full-width[data-v-8a92950e]{grid-column:1/-1}.form-group.span-2[data-v-8a92950e]{grid-column:span 2}.form-group.span-3[data-v-8a92950e]{grid-column:span 3}.form-label[data-v-8a92950e]{align-items:center;color:#374151;display:flex;font-size:11px;font-weight:600;gap:6px;margin-bottom:4px}.form-label.required[data-v-8a92950e]:after{color:#e74c3c;content:"*";margin-left:4px}.form-label i[data-v-8a92950e]{color:#6b7280;font-size:11px}.form-control[data-v-8a92950e]{background:#fafafa;border:1px solid #e5e7eb;border-radius:4px;box-sizing:border-box;font-size:12px;height:32px;padding:6px 8px;transition:all .2s ease;width:100%}.form-control[data-v-8a92950e]:focus{background:#fff;border-color:#667eea;box-shadow:0 0 0 2px rgba(102,126,234,.1);outline:none}textarea.form-control[data-v-8a92950e]{height:auto;min-height:60px;resize:vertical}.custom-select-wrapper[data-v-8a92950e]{position:relative}.custom-select[data-v-8a92950e]{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:32px}.select-icon[data-v-8a92950e]{color:#6b7280;font-size:12px;pointer-events:none;position:absolute;right:8px;top:50%;transform:translateY(-50%)}.debug-info[data-v-8a92950e]{background:#f9f9f9;border-radius:2px;color:#666!important;font-family:monospace;font-style:italic;padding:2px 4px}.ministry-info[data-v-8a92950e]{background:#f0f9ff;border:1px solid #bae6fd;border-radius:4px;margin-top:6px;padding:6px}.ministry-details[data-v-8a92950e]{grid-gap:3px;display:grid;gap:3px;grid-template-columns:1fr}.ministry-detail-item[data-v-8a92950e]{align-items:center;color:#075985;display:flex;font-size:10px;gap:4px}.ministry-detail-item i[data-v-8a92950e]{color:#0ea5e9;flex-shrink:0;width:12px}.ministry-name[data-v-8a92950e]{font-weight:600}.ministry-code[data-v-8a92950e]{background:#e0f2fe;border-radius:2px;font-family:monospace;padding:1px 4px}.bank-account-info[data-v-8a92950e]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;margin-top:6px;padding:6px}.bank-details[data-v-8a92950e]{grid-gap:3px;display:grid;gap:3px;grid-template-columns:1fr}.bank-detail-item[data-v-8a92950e]{align-items:center;color:#6b7280;display:flex;font-size:10px;gap:4px}.bank-detail-item i[data-v-8a92950e]{color:#667eea;width:12px}.form-errors[data-v-8a92950e]{background:#fef2f2;border:1px solid #fecaca;border-radius:6px;margin-top:16px;padding:12px}.form-errors h6[data-v-8a92950e]{align-items:center;color:#dc2626;display:flex;font-size:12px;gap:6px;margin:0 0 8px}.form-errors ul[data-v-8a92950e]{color:#dc2626;font-size:11px;margin:0;padding-left:16px}.enhanced-footer[data-v-8a92950e]{background:#f8f9fa;border-top:1px solid #e9ecef;display:flex;gap:10px;justify-content:flex-end;padding:12px 18px}.btn[data-v-8a92950e]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:12px;font-weight:600;gap:6px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn[data-v-8a92950e]:hover:not(:disabled){box-shadow:0 3px 8px rgba(0,0,0,.15);transform:translateY(-1px)}.btn[data-v-8a92950e]:active:not(:disabled){transform:translateY(0)}.btn-primary[data-v-8a92950e]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-secondary[data-v-8a92950e]{background:#6c757d;color:#fff}.btn[data-v-8a92950e]:disabled{box-shadow:none!important;cursor:not-allowed;opacity:.6;transform:none!important}.fa-spin[data-v-8a92950e]{animation:spin-8a92950e 1s linear infinite}@media (max-width:1024px){.form-grid[data-v-8a92950e]{grid-template-columns:repeat(2,1fr)}.form-group.span-2[data-v-8a92950e],.form-group.span-3[data-v-8a92950e]{grid-column:1/-1}}@media (max-width:768px){.enhanced-dialog[data-v-8a92950e]{margin:10px;width:98%}.form-grid[data-v-8a92950e]{grid-template-columns:1fr}.form-group.span-2[data-v-8a92950e],.form-group.span-3[data-v-8a92950e]{grid-column:1}.enhanced-footer[data-v-8a92950e],.modal-body[data-v-8a92950e],.modal-header[data-v-8a92950e]{padding:14px 16px}.enhanced-footer[data-v-8a92950e]{flex-direction:column-reverse}.enhanced-footer .btn[data-v-8a92950e]{justify-content:center;width:100%}}',""]),n.locals={},t.exports=n},963:function(t,e,r){"use strict";r(911)},964:function(t,e,r){var n=r(15)((function(i){return i[1]}));n.push([t.i,'.modal-overlay[data-v-0bf00b78]{align-items:center;animation:fadeIn-0bf00b78 .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}@keyframes fadeIn-0bf00b78{0%{opacity:0}to{opacity:1}}.detail-dialog[data-v-0bf00b78]{animation:slideIn-0bf00b78 .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:850px;overflow:hidden;width:95%}@keyframes slideIn-0bf00b78{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-title-section[data-v-0bf00b78]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-0bf00b78]{font-size:20px;opacity:.9}.modal-title[data-v-0bf00b78]{font-size:20px;font-weight:600;margin:0}.header-actions[data-v-0bf00b78]{align-items:center;display:flex;gap:8px}.btn-icon[data-v-0bf00b78]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;opacity:.8;padding:8px;transition:all .2s}.btn-icon[data-v-0bf00b78]:hover{background:hsla(0,0%,100%,.1);opacity:1}.close-btn[data-v-0bf00b78]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;opacity:.8;padding:8px;transition:opacity .2s}.close-btn[data-v-0bf00b78]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-0bf00b78]{max-height:70vh;overflow-y:auto;padding:0}.detail-body[data-v-0bf00b78]{background:#f8f9fa}.detail-loading[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #e9ecef;border-radius:8px;color:#666;display:flex;justify-content:center;margin:20px;padding:60px}.spinner-small[data-v-0bf00b78]{animation:spin-0bf00b78 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:20px;margin-right:10px;width:20px}@keyframes spin-0bf00b78{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.detail-content[data-v-0bf00b78]{display:flex;flex-direction:column;gap:20px;padding:24px}.detail-status[data-v-0bf00b78]{background:#fff;border:2px solid #e9ecef;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:0;padding:20px;text-align:center}.status-badge[data-v-0bf00b78]{align-items:center;border:2px solid transparent;border-radius:25px;display:inline-flex;font-size:16px;font-weight:600;gap:8px;letter-spacing:.5px;padding:12px 24px;text-transform:uppercase}.status-badge.status-pending[data-v-0bf00b78]{background:linear-gradient(135deg,#f39c12,#e67e22);border-color:#d68910;color:#fff}.status-badge.status-approved[data-v-0bf00b78]{background:linear-gradient(135deg,#27ae60,#229954);border-color:#1e8449;color:#fff}.status-badge.status-settled[data-v-0bf00b78]{background:linear-gradient(135deg,#3498db,#2980b9);border-color:#2471a3;color:#fff}.status-badge.status-rejected[data-v-0bf00b78]{background:linear-gradient(135deg,#e74c3c,#c0392b);border-color:#a93226;color:#fff}.status-badge.status-cancelled[data-v-0bf00b78]{background:linear-gradient(135deg,#95a5a6,#7f8c8d);border-color:#6c7b7d;color:#fff}.detail-section[data-v-0bf00b78]{background:#fff;border:2px solid #e9ecef;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:20px;padding:24px;transition:all .2s ease}.detail-section[data-v-0bf00b78]:hover{border-color:#dee2e6;box-shadow:0 4px 12px rgba(0,0,0,.12)}.detail-section[data-v-0bf00b78]:last-child{margin-bottom:0}.section-title[data-v-0bf00b78]{align-items:center;border-bottom:3px solid #ecf0f1;color:#2c3e50;display:flex;font-size:18px;font-weight:700;gap:12px;margin-bottom:20px;padding-bottom:12px}.section-title i[data-v-0bf00b78]{color:#3498db;font-size:16px}.detail-grid[data-v-0bf00b78]{grid-gap:24px;display:grid;gap:24px;grid-template-columns:1fr 1fr}.detail-item[data-v-0bf00b78]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;display:flex;flex-direction:column;gap:8px;padding:16px;transition:all .2s ease}.detail-item[data-v-0bf00b78]:hover{background:#e8f4fd;border-color:#3498db}.detail-item.full-width[data-v-0bf00b78]{grid-column:1/-1}.detail-item label[data-v-0bf00b78]{color:#6c757d;font-size:12px;font-weight:700;letter-spacing:.8px;margin-bottom:4px;text-transform:uppercase}.detail-value[data-v-0bf00b78]{color:#2c3e50;font-size:16px;font-weight:600;word-break:break-word}.amount-display[data-v-0bf00b78]{background:linear-gradient(135deg,#d5f4e6,#fafafa);border:2px solid #a9dfbf;border-radius:8px;color:#27ae60;font-size:28px;font-weight:800;padding:8px;text-align:center}.amount-display small[data-v-0bf00b78]{color:#6c757d;font-size:16px;font-weight:500;margin-left:8px}.exchange-rate-display[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#f4ecf7,#fafafa);border:2px solid #d7bde2;border-radius:8px;color:#8e44ad;display:flex;font-size:18px;font-weight:700;gap:8px;justify-content:center;padding:12px;text-align:center}.exchange-rate-display i[data-v-0bf00b78]{color:#9b59b6;font-size:16px}.user-info[data-v-0bf00b78]{align-items:center;background:#e8f4fd;border:1px solid #85c1e9;border-radius:6px;display:flex;gap:10px;padding:8px 12px}.user-info i[data-v-0bf00b78]{color:#3498db;font-size:14px}.timeline[data-v-0bf00b78]{background:#fafafa;border:2px solid #e9ecef;border-radius:8px;padding:20px;position:relative}.timeline[data-v-0bf00b78]:before{background:linear-gradient(180deg,#3498db,#ecf0f1);border-radius:2px;bottom:20px;content:"";left:35px;position:absolute;top:20px;width:3px}.timeline-item[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #ecf0f1;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);display:flex;margin-bottom:24px;margin-left:20px;padding:16px;position:relative}.timeline-item[data-v-0bf00b78]:last-child{margin-bottom:0}.timeline-icon[data-v-0bf00b78]{align-items:center;border:3px solid #fff;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,.2);color:#fff;display:flex;font-size:16px;height:40px;justify-content:center;left:-36px;margin-right:20px;position:absolute;width:40px;z-index:1}.timeline-icon.created[data-v-0bf00b78]{background:linear-gradient(135deg,#3498db,#2980b9)}.timeline-icon.approved[data-v-0bf00b78]{background:linear-gradient(135deg,#27ae60,#229954)}.timeline-icon.due[data-v-0bf00b78]{background:linear-gradient(135deg,#f39c12,#e67e22)}.timeline-icon.due.overdue[data-v-0bf00b78]{animation:pulse-0bf00b78 2s infinite;background:linear-gradient(135deg,#e74c3c,#c0392b)}.timeline-icon.settled[data-v-0bf00b78]{background:linear-gradient(135deg,#9b59b6,#8e44ad)}@keyframes pulse-0bf00b78{0%{box-shadow:0 0 0 0 rgba(231,76,60,.7),0 2px 8px rgba(0,0,0,.2)}70%{box-shadow:0 0 0 12px rgba(231,76,60,0),0 2px 8px rgba(0,0,0,.2)}to{box-shadow:0 0 0 0 rgba(231,76,60,0),0 2px 8px rgba(0,0,0,.2)}}.timeline-content[data-v-0bf00b78]{flex:1;margin-left:20px}.timeline-content label[data-v-0bf00b78]{color:#6c757d;display:block;font-size:12px;font-weight:700;letter-spacing:.5px;margin-bottom:4px;text-transform:uppercase}.timeline-date[data-v-0bf00b78]{color:#2c3e50;font-size:15px;font-weight:600}.timeline-date.overdue[data-v-0bf00b78]{color:#e74c3c;font-weight:700}.overdue-badge[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#e74c3c,#c0392b);border:1px solid #a93226;border-radius:12px;color:#fff;display:inline-flex;font-size:11px;font-weight:600;gap:4px;margin-left:8px;padding:4px 8px}.notes-content[data-v-0bf00b78]{background:#fff9e6;border:2px solid #f7dc6f;border-left:6px solid #f1c40f;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);color:#2c3e50;font-size:15px;font-style:italic;line-height:1.8;padding:20px}.history-list[data-v-0bf00b78]{display:flex;flex-direction:column;gap:12px}.history-item[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #ecf0f1;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.05);display:flex;gap:16px;padding:16px;transition:all .2s ease}.history-item[data-v-0bf00b78]:hover{background:#f8fcff;border-color:#3498db}.history-icon[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#3498db,#2980b9);border:2px solid #85c1e9;border-radius:50%;color:#fff;display:flex;flex-shrink:0;font-size:12px;height:32px;justify-content:center;width:32px}.history-content[data-v-0bf00b78]{display:flex;flex:1;flex-direction:column;gap:4px}.history-action[data-v-0bf00b78]{color:#2c3e50;font-size:15px;font-weight:700;text-transform:capitalize}.history-user[data-v-0bf00b78]{color:#6c757d;font-size:13px;font-weight:500}.history-date[data-v-0bf00b78]{color:#95a5a6;font-size:12px;font-weight:400}.detail-error[data-v-0bf00b78]{background:#fff;border:2px solid #fadbd8;border-radius:12px;color:#e74c3c;margin:20px;padding:60px 20px;text-align:center}.detail-error i[data-v-0bf00b78]{font-size:48px;margin-bottom:15px;opacity:.7}.detail-footer[data-v-0bf00b78]{align-items:center;background:#f8f9fa;border-top:2px solid #e9ecef;display:flex;justify-content:space-between;padding:16px 24px}.close-detail-btn[data-v-0bf00b78]{align-items:center;background:#6c757d;border:none;border-radius:6px;color:#fff;cursor:pointer;display:flex;font-weight:500;gap:6px;padding:8px 16px;transition:all .2s ease}.close-detail-btn[data-v-0bf00b78]:hover{background:#5a6268;transform:translateY(-1px)}.detail-actions[data-v-0bf00b78]{align-items:center;display:flex;gap:8px}.detail-actions .action-btn[data-v-0bf00b78]{align-items:center;border:none;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);cursor:pointer;display:flex;font-size:14px;height:36px;justify-content:center;padding:0;position:relative;transition:all .2s ease;width:36px}.detail-actions .action-btn[data-v-0bf00b78]:hover{box-shadow:0 4px 8px rgba(0,0,0,.15);transform:translateY(-2px)}.detail-actions .action-btn[data-v-0bf00b78]:active{box-shadow:0 1px 2px rgba(0,0,0,.1);transform:translateY(0)}.detail-actions .btn-warning[data-v-0bf00b78]{background:#ffc107;color:#212529}.detail-actions .btn-warning[data-v-0bf00b78]:hover{background:#e0a800}.detail-actions .btn-success[data-v-0bf00b78]{background:#28a745;color:#fff}.detail-actions .btn-success[data-v-0bf00b78]:hover{background:#218838}.detail-actions .btn-primary[data-v-0bf00b78]{background:#007bff;color:#fff}.detail-actions .btn-primary[data-v-0bf00b78]:hover{background:#0056b3}.btn[data-v-0bf00b78]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:6px;padding:8px 16px;transition:all .2s ease}.btn-primary[data-v-0bf00b78]{background:#007bff;color:#fff}.btn-primary[data-v-0bf00b78]:hover{background:#0056b3}.btn-secondary[data-v-0bf00b78]{background:#6c757d;color:#fff}.btn-secondary[data-v-0bf00b78]:hover{background:#5a6268}.btn-sm[data-v-0bf00b78]{font-size:12px;padding:4px 8px}.detail-actions .action-btn[data-v-0bf00b78]:before{background:rgba(0,0,0,.8);border-radius:4px;bottom:-32px;color:#fff;content:attr(title);font-size:11px;left:50%;opacity:0;padding:4px 8px;pointer-events:none;position:absolute;transform:translateX(-50%);transition:opacity .2s ease;white-space:nowrap;z-index:10}.detail-actions .action-btn[data-v-0bf00b78]:hover:before{opacity:1}@media (max-width:768px){.detail-dialog[data-v-0bf00b78]{margin:10px;width:98%}.detail-grid[data-v-0bf00b78]{gap:16px;grid-template-columns:1fr}.detail-footer[data-v-0bf00b78]{align-items:center;flex-direction:row;justify-content:space-between;padding:12px 16px}.close-detail-btn[data-v-0bf00b78]{font-size:14px;padding:6px 12px}.detail-actions[data-v-0bf00b78]{gap:6px}.detail-actions .action-btn[data-v-0bf00b78]{font-size:12px;height:32px;width:32px}.detail-actions .action-btn[data-v-0bf00b78]:before{bottom:-28px;font-size:10px}.timeline[data-v-0bf00b78]{padding:16px}.timeline[data-v-0bf00b78]:before{left:25px}.timeline-item[data-v-0bf00b78]{margin-left:10px;padding:12px}.timeline-icon[data-v-0bf00b78]{font-size:12px;height:32px;left:-26px;width:32px}.amount-display[data-v-0bf00b78]{font-size:24px}.exchange-rate-display[data-v-0bf00b78]{font-size:16px}.detail-content[data-v-0bf00b78],.detail-section[data-v-0bf00b78],.modal-header[data-v-0bf00b78]{padding:16px}.section-title[data-v-0bf00b78]{font-size:16px}}@media (max-width:480px){.detail-content[data-v-0bf00b78],.detail-section[data-v-0bf00b78]{padding:12px}.section-title[data-v-0bf00b78]{font-size:14px}.amount-display[data-v-0bf00b78]{font-size:20px}.exchange-rate-display[data-v-0bf00b78]{font-size:14px}.timeline-content[data-v-0bf00b78]{margin-left:10px}}@media print{.modal-overlay[data-v-0bf00b78]{-webkit-backdrop-filter:none!important;backdrop-filter:none!important;background:none!important;position:static!important}.detail-dialog[data-v-0bf00b78]{box-shadow:none!important;margin:0!important;max-width:none!important;width:100%!important}.modal-footer[data-v-0bf00b78],.modal-header[data-v-0bf00b78]{display:none!important}.detail-body[data-v-0bf00b78]{background:#fff!important;max-height:none!important}.btn[data-v-0bf00b78],.header-actions[data-v-0bf00b78]{display:none!important}.detail-section[data-v-0bf00b78]{-moz-column-break-inside:avoid;border:2px solid #333!important;break-inside:avoid;margin-bottom:20px!important;page-break-inside:avoid}.section-title[data-v-0bf00b78]{border-bottom:2px solid #333!important}}',""]),n.locals={},t.exports=n},965:function(t,e,r){"use strict";r(912)},966:function(t,e,r){var n=r(15)((function(i){return i[1]}));n.push([t.i,'.audit-dialog[data-v-5c476a8a]{max-height:90vh;max-width:900px;width:95%}.audit-header[data-v-5c476a8a]{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff}.audit-content[data-v-5c476a8a]{max-height:70vh;overflow-y:auto}.error-container[data-v-5c476a8a],.loading-container[data-v-5c476a8a],.no-data-container[data-v-5c476a8a]{color:#666;padding:40px 20px;text-align:center}.spinner[data-v-5c476a8a]{animation:spin-5c476a8a 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#4f46e5;height:40px;margin:0 auto 20px;width:40px}@keyframes spin-5c476a8a{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-icon[data-v-5c476a8a],.no-data-icon[data-v-5c476a8a]{font-size:48px;margin-bottom:15px;opacity:.5}.audit-summary[data-v-5c476a8a]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:24px}.summary-card[data-v-5c476a8a]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;gap:12px;padding:16px}.summary-card[data-v-5c476a8a],.summary-icon[data-v-5c476a8a]{align-items:center;display:flex}.summary-icon[data-v-5c476a8a]{background:#4f46e5;border-radius:50%;color:#fff;font-size:18px;height:40px;justify-content:center;width:40px}.summary-info[data-v-5c476a8a]{flex:1}.summary-label[data-v-5c476a8a]{color:#64748b;font-size:12px;margin-bottom:4px}.summary-value[data-v-5c476a8a]{color:#1e293b;font-size:16px;font-weight:600}.audit-controls[data-v-5c476a8a]{margin-bottom:24px}.filter-controls[data-v-5c476a8a]{align-items:center;display:flex;gap:12px}.filter-select[data-v-5c476a8a]{border:1px solid #d1d5db;border-radius:6px;font-size:14px;max-width:200px;padding:8px 12px}.audit-timeline[data-v-5c476a8a]{position:relative}.audit-timeline[data-v-5c476a8a]:before{background:#e2e8f0;bottom:0;content:"";left:20px;position:absolute;top:0;width:2px}.timeline-item[data-v-5c476a8a]{margin-bottom:24px;margin-left:40px;position:relative}.timeline-item.expandable .timeline-header[data-v-5c476a8a]{cursor:pointer}.timeline-item.expandable .timeline-header[data-v-5c476a8a]:hover{background:#f8fafc}.timeline-marker[data-v-5c476a8a]{align-items:center;background:#fff;border:2px solid #e2e8f0;border-radius:50%;display:flex;font-size:16px;height:40px;justify-content:center;left:-60px;position:absolute;top:8px;width:40px}.timeline-content[data-v-5c476a8a]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.timeline-header[data-v-5c476a8a]{align-items:center;border-radius:8px;display:flex;justify-content:space-between;padding:16px;transition:background-color .2s}.timeline-main-info[data-v-5c476a8a]{flex:1}.timeline-action[data-v-5c476a8a]{align-items:center;display:flex;gap:12px;margin-bottom:4px}.action-badge[data-v-5c476a8a]{border-radius:12px;font-size:12px;font-weight:600;padding:4px 8px;text-transform:uppercase}.action-badge.create[data-v-5c476a8a]{background:#dcfce7;color:#166534}.action-badge.update[data-v-5c476a8a]{background:#fef3c7;color:#92400e}.action-badge.approve[data-v-5c476a8a]{background:#dcfce7;color:#166534}.action-badge.settle[data-v-5c476a8a]{background:#dbeafe;color:#1e40af}.action-badge.delete[data-v-5c476a8a]{background:#fee2e2;color:#dc2626}.timeline-time[data-v-5c476a8a]{color:#64748b;font-size:12px}.timeline-user[data-v-5c476a8a]{align-items:center;color:#475569;display:flex;font-size:14px;gap:6px}.timeline-toggle[data-v-5c476a8a]{align-items:center;color:#64748b;display:flex;gap:8px}.changes-count[data-v-5c476a8a],.toggle-icon[data-v-5c476a8a]{font-size:12px}.toggle-icon[data-v-5c476a8a]{transition:transform .2s}.timeline-reason[data-v-5c476a8a]{align-items:center;background:#f1f5f9;border-top:1px solid #e2e8f0;color:#475569;display:flex;font-size:14px;font-style:italic;gap:8px;padding:8px 16px}.timeline-details[data-v-5c476a8a]{background:#fafbfc;border-top:1px solid #e2e8f0;padding:16px}.changes-list h6[data-v-5c476a8a]{color:#374151;font-size:14px;margin:0 0 12px}.change-item[data-v-5c476a8a]{background:#fff;border:1px solid #e2e8f0;border-radius:6px;margin-bottom:12px;padding:12px}.change-field[data-v-5c476a8a]{align-items:center;color:#374151;display:flex;font-size:14px;font-weight:600;gap:8px;margin-bottom:8px}.change-values[data-v-5c476a8a]{grid-gap:12px;align-items:center;display:grid;gap:12px;grid-template-columns:1fr auto 1fr}.new-value[data-v-5c476a8a],.old-value[data-v-5c476a8a]{display:flex;flex-direction:column;gap:4px}.value-label[data-v-5c476a8a]{color:#64748b;font-size:12px;font-weight:500}.value[data-v-5c476a8a]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:4px;color:#1e293b;font-size:14px;padding:6px 8px}.old-value .value[data-v-5c476a8a]{background:#fef2f2;border-color:#fecaca;color:#991b1b}.new-value .value[data-v-5c476a8a]{background:#f0fdf4;border-color:#bbf7d0;color:#166534}.arrow[data-v-5c476a8a]{color:#64748b;font-size:14px}.view-full-details[data-v-5c476a8a]{margin-top:12px;text-align:center}.load-more-container[data-v-5c476a8a]{border-top:1px solid #e2e8f0;margin-top:24px;padding-top:24px;text-align:center}.btn[data-v-5c476a8a]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:8px 16px;transition:all .2s}.btn[data-v-5c476a8a]:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-1px)}.btn-primary[data-v-5c476a8a]{background:#4f46e5;color:#fff}.btn-secondary[data-v-5c476a8a]{background:#6b7280;color:#fff}.btn-info[data-v-5c476a8a]{background:#0ea5e9;color:#fff}.btn-link[data-v-5c476a8a]{background:none;border:1px solid transparent;color:#4f46e5;-webkit-text-decoration:none;text-decoration:none}.btn-link[data-v-5c476a8a]:hover{background:#f0f9ff;border-color:#bae6fd}.btn-sm[data-v-5c476a8a]{font-size:12px;padding:6px 12px}.btn[data-v-5c476a8a]:disabled{box-shadow:none!important;cursor:not-allowed;opacity:.6;transform:none!important}.audit-footer[data-v-5c476a8a]{background:#f8fafc;border-top:1px solid #e2e8f0;display:flex;gap:12px;justify-content:flex-end}@media (max-width:768px){.audit-dialog[data-v-5c476a8a]{margin:10px;width:98%}.audit-summary[data-v-5c476a8a]{grid-template-columns:1fr}.filter-controls[data-v-5c476a8a]{align-items:stretch;flex-direction:column}.filter-select[data-v-5c476a8a]{max-width:none}.timeline-item[data-v-5c476a8a]{margin-left:20px}.timeline-marker[data-v-5c476a8a]{font-size:14px;height:30px;left:-40px;width:30px}.change-values[data-v-5c476a8a]{gap:8px;grid-template-columns:1fr}.arrow[data-v-5c476a8a]{text-align:center;transform:rotate(90deg)}.audit-footer[data-v-5c476a8a]{flex-direction:column-reverse}.audit-footer .btn[data-v-5c476a8a]{justify-content:center;width:100%}}',""]),n.locals={},t.exports=n},967:function(t,e,r){"use strict";r(913)},968:function(t,e,r){var n=r(15)((function(i){return i[1]}));n.push([t.i,'.modal-overlay[data-v-e6a23e30]{align-items:center;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.comparison-dialog[data-v-e6a23e30]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:1000px;overflow:hidden;width:95%}.modal-header[data-v-e6a23e30]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-title-section[data-v-e6a23e30]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-e6a23e30]{font-size:20px}.modal-title[data-v-e6a23e30]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-e6a23e30]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;opacity:.8;padding:8px;transition:opacity .2s}.close-btn[data-v-e6a23e30]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-e6a23e30]{max-height:70vh;overflow-y:auto;padding:0}.error-state[data-v-e6a23e30],.loading-state[data-v-e6a23e30],.no-differences[data-v-e6a23e30],.select-versions-prompt[data-v-e6a23e30]{align-items:center;display:flex;flex-direction:column;justify-content:center;padding:60px 20px;text-align:center}.spinner[data-v-e6a23e30]{animation:spin-e6a23e30 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#667eea;height:40px;margin-bottom:20px;width:40px}@keyframes spin-e6a23e30{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-icon[data-v-e6a23e30],.no-diff-icon[data-v-e6a23e30],.prompt-icon[data-v-e6a23e30]{font-size:48px;margin-bottom:20px;opacity:.6}.error-icon[data-v-e6a23e30]{color:#e74c3c}.prompt-icon[data-v-e6a23e30]{color:#3498db}.no-diff-icon[data-v-e6a23e30]{color:#27ae60}.version-selector[data-v-e6a23e30]{grid-gap:20px;align-items:end;background:#f8f9fa;border-bottom:1px solid #e9ecef;display:grid;gap:20px;grid-template-columns:1fr auto 1fr;padding:24px}.selector-group[data-v-e6a23e30]{display:flex;flex-direction:column;gap:8px}.selector-group label[data-v-e6a23e30]{color:#2c3e50;font-size:14px;font-weight:600}.form-control[data-v-e6a23e30]{background:#fff;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;padding:12px 16px;transition:border-color .2s ease}.form-control[data-v-e6a23e30]:focus{border-color:#667eea;outline:none}.comparison-arrow[data-v-e6a23e30]{align-items:center;background:#667eea;border-radius:50%;color:#fff;display:flex;font-size:16px;height:40px;justify-content:center;margin-top:24px;width:40px}.comparison-results[data-v-e6a23e30]{padding:24px}.comparison-summary[data-v-e6a23e30]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));margin-bottom:24px}.summary-card[data-v-e6a23e30]{background:#fff;border:1px solid #e9ecef;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);gap:12px;padding:16px}.summary-card[data-v-e6a23e30],.summary-icon[data-v-e6a23e30]{align-items:center;display:flex}.summary-icon[data-v-e6a23e30]{background:#667eea;border-radius:50%;color:#fff;font-size:16px;height:40px;justify-content:center;width:40px}.summary-number[data-v-e6a23e30]{color:#2c3e50;font-size:20px;font-weight:700}.summary-text[data-v-e6a23e30]{color:#2c3e50;font-size:12px;font-weight:600;word-break:break-word}.summary-label[data-v-e6a23e30]{color:#7f8c8d;font-size:11px;margin-top:4px}.differences-table h6[data-v-e6a23e30]{align-items:center;color:#2c3e50;display:flex;font-size:16px;font-weight:600;gap:8px;margin-bottom:16px}.table-container[data-v-e6a23e30]{border:1px solid #e9ecef;border-radius:8px;overflow:hidden}.comparison-table[data-v-e6a23e30]{background:#fff;border-collapse:collapse;width:100%}.comparison-table th[data-v-e6a23e30]{background:#f8f9fa;border-bottom:2px solid #e9ecef;font-size:13px;font-weight:600;padding:16px 12px;text-align:left}.field-header[data-v-e6a23e30]{color:#495057;width:200px}.version-header[data-v-e6a23e30]{position:relative}.version-header.version1[data-v-e6a23e30]{background:linear-gradient(135deg,#ffe6e6,#fcc)}.version-header.version2[data-v-e6a23e30]{background:linear-gradient(135deg,#e6ffe6,#cfc)}.version-info[data-v-e6a23e30]{text-align:center}.version-label[data-v-e6a23e30]{color:#2c3e50;font-weight:700}.version-date[data-v-e6a23e30]{color:#7f8c8d;font-size:11px;margin-top:2px}.comparison-table td[data-v-e6a23e30]{border-bottom:1px solid #f1f3f4;padding:16px 12px;vertical-align:top}.diff-row[data-v-e6a23e30]:hover{background:#f8f9fa}.field-cell[data-v-e6a23e30]{background:#fafbfc;border-right:1px solid #e9ecef}.field-info[data-v-e6a23e30]{align-items:center;display:flex;gap:8px}.field-info i[data-v-e6a23e30]{color:#6c757d;text-align:center;width:16px}.field-name[data-v-e6a23e30]{color:#495057;font-size:13px;font-weight:600}.value-cell[data-v-e6a23e30]{position:relative}.value-cell.version1[data-v-e6a23e30]{background:#fff8f8}.value-cell.version2[data-v-e6a23e30]{background:#f8fff8}.value-content[data-v-e6a23e30]{align-items:center;display:flex;justify-content:space-between;min-height:24px;position:relative}.value-text[data-v-e6a23e30]{background:hsla(0,0%,100%,.8);border:1px solid transparent;border-radius:4px;flex:1;font-family:"Monaco","Menlo","Ubuntu Mono",monospace;font-size:12px;padding:6px 10px}.old-value .value-text[data-v-e6a23e30]{background:#fef2f2;border-color:#fecaca;color:#dc2626}.new-value .value-text[data-v-e6a23e30]{background:#f0fdf4;border-color:#bbf7d0;color:#059669}.change-indicator[data-v-e6a23e30]{color:#3b82f6;font-size:12px;margin-left:8px;opacity:.7}.comparison-actions[data-v-e6a23e30]{gap:12px;justify-content:center;margin-top:24px;padding-top:24px}.comparison-actions[data-v-e6a23e30],.modal-footer[data-v-e6a23e30]{border-top:1px solid #e9ecef;display:flex}.modal-footer[data-v-e6a23e30]{align-items:center;background:#f8f9fa;justify-content:space-between;padding:20px 24px}.btn[data-v-e6a23e30]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn[data-v-e6a23e30]:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-1px)}.btn[data-v-e6a23e30]:disabled{cursor:not-allowed;opacity:.6;transform:none!important}.btn-primary[data-v-e6a23e30]{background:#667eea;color:#fff}.btn-secondary[data-v-e6a23e30]{background:#6c757d;color:#fff}.btn-warning[data-v-e6a23e30]{background:#f39c12;color:#fff}.btn-outline[data-v-e6a23e30]{background:#fff;border:2px solid #667eea;color:#667eea}.btn-outline[data-v-e6a23e30]:hover:not(:disabled){background:#667eea;color:#fff}.btn-sm[data-v-e6a23e30]{font-size:12px;padding:8px 16px}@media (max-width:768px){.comparison-dialog[data-v-e6a23e30]{margin:10px;width:98%}.version-selector[data-v-e6a23e30]{gap:16px;grid-template-columns:1fr}.comparison-arrow[data-v-e6a23e30]{margin:0 auto;transform:rotate(90deg)}.comparison-summary[data-v-e6a23e30]{grid-template-columns:1fr}.comparison-table[data-v-e6a23e30]{font-size:12px}.comparison-table td[data-v-e6a23e30],.comparison-table th[data-v-e6a23e30]{padding:12px 8px}.field-header[data-v-e6a23e30]{width:auto}.modal-footer[data-v-e6a23e30]{gap:12px}.comparison-actions[data-v-e6a23e30],.modal-footer[data-v-e6a23e30]{flex-direction:column}}',""]),n.locals={},t.exports=n},969:function(t,e,r){"use strict";r(914)},970:function(t,e,r){var n=r(15)((function(i){return i[1]}));n.push([t.i,".modal-overlay[data-v-7e1ed358]{align-items:center;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.reports-dialog[data-v-7e1ed358]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:1200px;overflow:hidden;width:95%}.modal-header[data-v-7e1ed358]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-title-section[data-v-7e1ed358]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-7e1ed358]{font-size:20px}.modal-title[data-v-7e1ed358]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-7e1ed358]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;opacity:.8;padding:8px;transition:opacity .2s}.close-btn[data-v-7e1ed358]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-7e1ed358]{max-height:70vh;overflow-y:auto;padding:0}.tabs-container[data-v-7e1ed358]{background:#f8f9fa;border-bottom:1px solid #e9ecef}.tabs[data-v-7e1ed358]{display:flex;padding:0 24px}.tab-btn[data-v-7e1ed358]{align-items:center;background:none;border:none;border-bottom:3px solid transparent;color:#6c757d;cursor:pointer;display:flex;font-size:14px;font-weight:500;gap:8px;padding:16px 24px;transition:all .2s ease}.tab-btn[data-v-7e1ed358]:hover{background:hsla(0,0%,100%,.5);color:#495057}.tab-btn.active[data-v-7e1ed358]{background:#fff;border-bottom-color:#667eea;color:#667eea}.report-content[data-v-7e1ed358]{padding:24px}.report-header[data-v-7e1ed358]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;margin-bottom:24px;padding-bottom:16px}.report-header h6[data-v-7e1ed358]{color:#2c3e50;font-size:16px;gap:8px;margin:0}.date-filter[data-v-7e1ed358],.report-header h6[data-v-7e1ed358]{align-items:center;display:flex}.date-filter[data-v-7e1ed358]{gap:12px}.date-filter span[data-v-7e1ed358]{color:#6c757d;font-size:14px}.form-control[data-v-7e1ed358]{border:1px solid #ddd;border-radius:4px;font-size:14px;padding:8px 12px}.loading-state[data-v-7e1ed358]{align-items:center;color:#6c757d;display:flex;gap:12px;justify-content:center;padding:60px}.spinner-sm[data-v-7e1ed358]{animation:spin-7e1ed358 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#667eea;height:20px;width:20px}.activity-summary[data-v-7e1ed358]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:24px}.summary-card[data-v-7e1ed358]{background:#fff;border:1px solid #e9ecef;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);gap:12px;padding:16px}.summary-card[data-v-7e1ed358],.summary-icon[data-v-7e1ed358]{align-items:center;display:flex}.summary-icon[data-v-7e1ed358]{background:#667eea;border-radius:50%;color:#fff;font-size:16px;height:40px;justify-content:center;width:40px}.summary-number[data-v-7e1ed358]{color:#2c3e50;font-size:20px;font-weight:700}.summary-text[data-v-7e1ed358]{color:#2c3e50;font-size:14px;font-weight:600}.summary-label[data-v-7e1ed358]{color:#7f8c8d;font-size:11px;margin-top:4px}.activity-table[data-v-7e1ed358]{border:1px solid #e9ecef;border-radius:8px;overflow:hidden}.table[data-v-7e1ed358]{border-collapse:collapse;margin:0;width:100%}.table th[data-v-7e1ed358]{background:#f8f9fa;border-bottom:1px solid #e9ecef;color:#495057;font-weight:600;text-align:left}.table td[data-v-7e1ed358],.table th[data-v-7e1ed358]{font-size:13px;padding:12px}.table td[data-v-7e1ed358]{border-bottom:1px solid #f1f3f4}.user-info[data-v-7e1ed358]{display:flex;flex-direction:column;gap:2px}.user-name[data-v-7e1ed358]{color:#2c3e50;font-weight:600}.user-id[data-v-7e1ed358]{color:#7f8c8d;font-size:11px}.activity-count[data-v-7e1ed358]{border-radius:12px;display:inline-block;font-size:11px;font-weight:600;min-width:24px;padding:4px 8px;text-align:center}.activity-count.create[data-v-7e1ed358]{background:#d4edda;color:#155724}.activity-count.update[data-v-7e1ed358]{background:#fff3cd;color:#856404}.activity-count.approve[data-v-7e1ed358]{background:#cce5ff;color:#004085}.activity-count.settle[data-v-7e1ed358]{background:#e2e3e5;color:#495057}.activity-count.delete[data-v-7e1ed358]{background:#f8d7da;color:#721c24}.total-count[data-v-7e1ed358]{color:#2c3e50;font-weight:700}.chart-container[data-v-7e1ed358]{margin-bottom:32px}.chart-container h6[data-v-7e1ed358]{color:#2c3e50;margin-bottom:16px}.chart-placeholder[data-v-7e1ed358]{background:#f8f9fa;border-radius:8px;min-height:200px;padding:20px}.chart-bars[data-v-7e1ed358]{align-items:end;display:flex;gap:4px;height:150px;margin-bottom:8px}.chart-bar[data-v-7e1ed358]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:4px 4px 0 0;cursor:pointer;flex:1;min-height:8px;position:relative;transition:all .2s ease}.chart-bar[data-v-7e1ed358]:hover{opacity:.8}.bar-value[data-v-7e1ed358]{color:#495057;font-size:10px;font-weight:600;left:50%;position:absolute;top:-20px;transform:translateX(-50%)}.chart-labels[data-v-7e1ed358]{display:flex;gap:4px}.chart-label[data-v-7e1ed358]{color:#6c757d;flex:1;font-size:10px;text-align:center}.breakdown-grid[data-v-7e1ed358]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));margin-bottom:32px}.breakdown-item[data-v-7e1ed358]{align-items:center;background:#f8f9fa;border-radius:8px;display:flex;gap:12px;padding:16px}.breakdown-icon[data-v-7e1ed358]{align-items:center;border-radius:50%;color:#fff;display:flex;font-size:14px;height:32px;justify-content:center;width:32px}.breakdown-icon.create[data-v-7e1ed358]{background:#28a745}.breakdown-icon.update[data-v-7e1ed358]{background:#ffc107;color:#212529}.breakdown-icon.approve[data-v-7e1ed358]{background:#17a2b8}.breakdown-icon.settle[data-v-7e1ed358]{background:#6c757d}.breakdown-icon.delete[data-v-7e1ed358]{background:#dc3545}.breakdown-label[data-v-7e1ed358]{color:#2c3e50;font-size:12px;font-weight:600}.breakdown-count[data-v-7e1ed358]{color:#495057;font-size:18px;font-weight:700}.breakdown-percentage[data-v-7e1ed358]{color:#7f8c8d;font-size:11px}.changes-timeline[data-v-7e1ed358]{display:flex;flex-direction:column;gap:12px}.change-item[data-v-7e1ed358]{background:#f8f9fa;border-radius:6px;gap:12px;padding:12px}.change-icon[data-v-7e1ed358],.change-item[data-v-7e1ed358]{align-items:center;display:flex}.change-icon[data-v-7e1ed358]{border-radius:50%;color:#fff;font-size:10px;height:24px;justify-content:center;width:24px}.change-content[data-v-7e1ed358]{flex:1}.change-text[data-v-7e1ed358]{color:#495057;font-size:13px;margin-bottom:2px}.change-time[data-v-7e1ed358]{color:#7f8c8d;font-size:11px}.export-options[data-v-7e1ed358]{display:flex;flex-direction:column;gap:24px}.export-option[data-v-7e1ed358]{border:1px solid #e9ecef;border-radius:8px;padding:20px}.option-header[data-v-7e1ed358]{align-items:center;display:flex;gap:12px;margin-bottom:12px}.option-header i[data-v-7e1ed358]{color:#667eea;font-size:18px}.option-header h6[data-v-7e1ed358]{color:#2c3e50;margin:0}.export-controls[data-v-7e1ed358]{gap:12px;margin-top:16px}.date-range[data-v-7e1ed358],.export-controls[data-v-7e1ed358]{align-items:center;display:flex}.date-range[data-v-7e1ed358]{gap:8px}.backup-info[data-v-7e1ed358]{color:#6c757d}.btn[data-v-7e1ed358]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:8px 16px;transition:all .2s ease}.btn[data-v-7e1ed358]:hover:not(:disabled){transform:translateY(-1px)}.btn[data-v-7e1ed358]:disabled{cursor:not-allowed;opacity:.6;transform:none!important}.btn-primary[data-v-7e1ed358]{background:#667eea;color:#fff}.btn-secondary[data-v-7e1ed358]{background:#6c757d;color:#fff}.btn-warning[data-v-7e1ed358]{background:#ffc107;color:#212529}.btn-outline[data-v-7e1ed358]{background:#fff;border:2px solid #667eea;color:#667eea}.btn-outline[data-v-7e1ed358]:hover:not(:disabled){background:#667eea;color:#fff}.btn-sm[data-v-7e1ed358]{font-size:12px;padding:6px 12px}.modal-footer[data-v-7e1ed358]{align-items:center;background:#f8f9fa;border-top:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px 24px}.no-data[data-v-7e1ed358]{color:#6c757d;padding:60px 20px;text-align:center}.no-data i[data-v-7e1ed358]{font-size:48px;margin-bottom:16px;opacity:.5}@media (max-width:768px){.reports-dialog[data-v-7e1ed358]{margin:10px;width:98%}.tabs[data-v-7e1ed358]{overflow-x:auto;padding:0 16px}.tab-btn[data-v-7e1ed358]{padding:12px 16px;white-space:nowrap}.report-content[data-v-7e1ed358]{padding:16px}.report-header[data-v-7e1ed358]{align-items:stretch;flex-direction:column;gap:16px}.date-filter[data-v-7e1ed358]{flex-wrap:wrap}.activity-summary[data-v-7e1ed358],.breakdown-grid[data-v-7e1ed358]{grid-template-columns:1fr}.export-controls[data-v-7e1ed358]{align-items:stretch;flex-direction:column}.date-range[data-v-7e1ed358]{justify-content:center}}@keyframes spin-7e1ed358{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),n.locals={},t.exports=n}}]);