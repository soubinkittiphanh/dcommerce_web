(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1006:function(t,n,e){"use strict";e.r(n);e(35);var o=e(20),r=(e(92),e(30),e(63),{name:"PrintTicketDialog",props:{show:{type:Boolean,default:!1},ticket:{type:Object,default:null},restaurantInfo:{type:Object,default:function(){return{name:"Restaurant Name",address:"123 Main Street<br>City, State 12345<br>Phone: (555) 123-4567"}}},footerMessage:{type:String,default:"Thank you for your visit!"},customFooter:{type:String,default:null},printTitle:{type:String,default:"Print Ticket"}},data:function(){return{printing:!1}},methods:{closeDialog:function(){this.$emit("close")},printNow:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var e,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ticket){n.next=2;break}return n.abrupt("return");case 2:t.printing=!0;try{e=document.querySelector(".print-preview").innerHTML,(o=window.open("","_blank")).document.write("\n          <!DOCTYPE html>\n          <html>\n          <head>\n            <title>Ticket #".concat(t.ticket.id,"</title>\n            <style>\n              ").concat(t.getPrintStyles(),"\n            </style>\n          </head>\n          <body>\n            ").concat(e,"\n          </body>\n          </html>\n        ")),o.document.close(),o.focus(),setTimeout((function(){o.print(),o.close(),t.printing=!1,t.$emit("printed",t.ticket),t.closeDialog()}),250)}catch(n){console.error("Print error:",n),t.printing=!1,t.$emit("print-error",n)}case 4:case"end":return n.stop()}}),n)})))()},getPrintStyles:function(){return"\n        body {\n          font-family: 'Courier New', monospace;\n          font-size: 12px;\n          line-height: 1.4;\n          margin: 0;\n          padding: 20px;\n          color: #000;\n        }\n        .print-header {\n          text-align: center;\n          margin-bottom: 20px;\n        }\n        .restaurant-name {\n          font-size: 18px;\n          font-weight: bold;\n          margin: 0 0 8px 0;\n        }\n        .restaurant-address {\n          font-size: 11px;\n          margin: 0;\n          line-height: 1.3;\n        }\n        .print-ticket-info {\n          margin-bottom: 15px;\n        }\n        .detail-row {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 3px;\n        }\n        .detail-label {\n          font-weight: bold;\n        }\n        .print-divider {\n          border-top: 1px dashed #000;\n          margin: 15px 0;\n        }\n        .section-title {\n          font-size: 14px;\n          font-weight: bold;\n          margin: 0 0 10px 0;\n          text-align: center;\n        }\n        .print-item {\n          margin-bottom: 8px;\n        }\n        .item-line {\n          margin-bottom: 2px;\n        }\n        .item-main {\n          display: flex;\n          justify-content: space-between;\n          font-weight: bold;\n        }\n        .item-details {\n          display: flex;\n          justify-content: space-between;\n          font-size: 11px;\n          margin-left: 10px;\n        }\n        .item-notes {\n          font-size: 10px;\n          font-style: italic;\n          margin-left: 10px;\n          color: #666;\n        }\n        .print-summary {\n          margin: 15px 0;\n        }\n        .summary-line {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 3px;\n        }\n        .total-line {\n          font-weight: bold;\n          font-size: 14px;\n          border-top: 1px solid #000;\n          padding-top: 5px;\n          margin-top: 8px;\n        }\n        .print-payment {\n          margin: 15px 0;\n        }\n        .payment-status {\n          display: flex;\n          justify-content: space-between;\n          font-weight: bold;\n        }\n        .payment-details {\n          font-size: 11px;\n          margin-top: 5px;\n        }\n        .payment-info {\n          display: flex;\n          flex-direction: column;\n          gap: 2px;\n        }\n        .print-notes {\n          margin: 15px 0;\n        }\n        .print-notes h4 {\n          font-size: 12px;\n          margin: 0 0 5px 0;\n        }\n        .print-notes p {\n          margin: 0;\n          font-size: 11px;\n        }\n        .print-custom-footer {\n          margin: 15px 0;\n          text-align: center;\n        }\n        .print-footer {\n          text-align: center;\n          margin-top: 20px;\n        }\n        .thank-you {\n          font-weight: bold;\n          margin: 10px 0 5px 0;\n        }\n        .print-time {\n          font-size: 10px;\n          margin: 0;\n          color: #666;\n        }\n        .payment-pending { color: #856404; }\n        .payment-paid { color: #155724; }\n        .payment-refunded { color: #721c24; }\n        .no-items-print {\n          text-align: center;\n          padding: 20px;\n          color: #666;\n          font-style: italic;\n        }\n        @media print {\n          body { margin: 0; padding: 10px; }\n        }\n      "},formatPrintDate:function(t){return t?new Date(t).toLocaleDateString():"N/A"},formatPrintTime:function(t){return t?new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"},formatPrintDateTime:function(t){return t?new Date(t).toLocaleString():"N/A"},formatPrice:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(t||0));return n?"".concat(e," ₭"):e},formatStatus:function(t){return{pending:"Pending",preparing:"Preparing",ready:"Ready",served:"Served",paid:"Paid"}[t]||t},formatPaymentStatus:function(t){return{pending:"Unpaid",paid:"Paid",refunded:"Refunded"}[t]||t},getItemName:function(line){return console.info("Line detail ".concat(JSON.stringify(line))),line.pro_name||line.pro_desc||"Unknown Item"},getItemTotal:function(line){return line.total||line.totalPrice||line.subtotal||line.quantity*line.originalTicketLinePrice||0}}}),c=r,l=(e(963),e(32)),component=Object(l.a)(c,(function(){var t,n,e,o,r=this,c=r._self._c;return r.show?c("div",{staticClass:"dialog-overlay",on:{click:r.closeDialog}},[c("div",{staticClass:"print-dialog-content",on:{click:function(t){t.stopPropagation()}}},[c("div",{staticClass:"print-dialog-header"},[c("h2",[r._v("Print Ticket")]),r._v(" "),c("button",{staticClass:"close-btn",on:{click:r.closeDialog}},[r._v("×")])]),r._v(" "),r.ticket?c("div",{staticClass:"print-preview"},[c("div",{staticClass:"print-header"},[c("div",{staticClass:"restaurant-info"},[c("h1",{staticClass:"restaurant-name"},[r._v(r._s(r.restaurantInfo.name))]),r._v(" "),c("p",{staticClass:"restaurant-address",domProps:{innerHTML:r._s(r.restaurantInfo.address)}})])]),r._v(" "),c("div",{staticClass:"print-ticket-info"},[c("div",{staticClass:"ticket-details"},[c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[r._v("Ticket #:")]),r._v(" "),c("span",{staticClass:"detail-value"},[r._v(r._s(r.ticket.id))])]),r._v(" "),c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[r._v("Date:")]),r._v(" "),c("span",{staticClass:"detail-value"},[r._v(r._s(r.formatPrintDate(r.ticket.createdAt)))])]),r._v(" "),c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[r._v("Time:")]),r._v(" "),c("span",{staticClass:"detail-value"},[r._v(r._s(r.formatPrintTime(r.ticket.createdAt)))])]),r._v(" "),c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[r._v("Status:")]),r._v(" "),c("span",{staticClass:"detail-value"},[r._v(r._s(r.formatStatus(r.ticket.status)))])])]),r._v(" "),c("div",{staticClass:"customer-table-info"},[c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[r._v("Customer:")]),r._v(" "),c("span",{staticClass:"detail-value"},[r._v(r._s((null===(t=r.ticket.client)||void 0===t?void 0:t.name)||"Walk-in Customer"))])]),r._v(" "),c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[r._v("Table:")]),r._v(" "),c("span",{staticClass:"detail-value"},[r._v(r._s((null===(n=r.ticket.table)||void 0===n?void 0:n.number)||(null===(e=r.ticket.table)||void 0===e?void 0:e.name)||"N/A"))])]),r._v(" "),null!==(o=r.ticket.client)&&void 0!==o&&o.phone?c("div",{staticClass:"detail-row"},[c("span",{staticClass:"detail-label"},[r._v("Phone:")]),r._v(" "),c("span",{staticClass:"detail-value"},[r._v(r._s(r.ticket.client.phone))])]):r._e()])]),r._v(" "),c("div",{staticClass:"print-divider"}),r._v(" "),c("div",{staticClass:"print-items"},[c("h3",{staticClass:"section-title"},[r._v("ORDER ITEMS")]),r._v(" "),r.ticket.ticketLines&&r.ticket.ticketLines.length>0?c("div",r._l(r.ticket.ticketLines,(function(line){return c("div",{key:line.id,staticClass:"print-item"},[c("div",{staticClass:"item-line"},[c("div",{staticClass:"item-main"},[c("span",{staticClass:"item-name"},[r._v(r._s(r.getItemName(line)))]),r._v(" "),c("span",{staticClass:"item-price"},[r._v("$"+r._s(r.formatPrice(line.originalTicketLinePrice)))])]),r._v(" "),c("div",{staticClass:"item-details"},[c("span",{staticClass:"item-qty"},[r._v("Qty: "+r._s(line.quantity))]),r._v(" "),c("span",{staticClass:"item-total"},[r._v("$"+r._s(r.formatPrice(r.getItemTotal(line))))])])]),r._v(" "),line.notes?c("div",{staticClass:"item-notes"},[r._v("\n              Note: "+r._s(line.notes)+"\n            ")]):r._e()])})),0):c("div",{staticClass:"no-items-print"},[c("p",[r._v("No items in this order")])])]),r._v(" "),c("div",{staticClass:"print-divider"}),r._v(" "),c("div",{staticClass:"print-summary"},[c("div",{staticClass:"summary-line"},[c("span",{staticClass:"summary-label"},[r._v("Subtotal:")]),r._v(" "),c("span",{staticClass:"summary-value"},[r._v("$"+r._s(r.formatPrice(r.ticket.subtotal)))])]),r._v(" "),c("div",{staticClass:"summary-line"},[c("span",{staticClass:"summary-label"},[r._v("Tax:")]),r._v(" "),c("span",{staticClass:"summary-value"},[r._v("$"+r._s(r.formatPrice(r.ticket.tax)))])]),r._v(" "),c("div",{staticClass:"summary-line total-line"},[c("span",{staticClass:"summary-label"},[r._v("TOTAL:")]),r._v(" "),c("span",{staticClass:"summary-value"},[r._v("$"+r._s(r.formatPrice(r.ticket.total)))])])]),r._v(" "),c("div",{staticClass:"print-payment"},[c("div",{staticClass:"payment-status"},[c("span",{staticClass:"payment-label"},[r._v("Payment Status:")]),r._v(" "),c("span",{staticClass:"payment-value",class:"payment-".concat(r.ticket.paymentStatus)},[r._v("\n            "+r._s(r.formatPaymentStatus(r.ticket.paymentStatus))+"\n          ")])]),r._v(" "),r.ticket.payment&&"paid"===r.ticket.paymentStatus?c("div",{staticClass:"payment-details"},[c("div",{staticClass:"payment-info"},[c("span",[r._v("Method: "+r._s(r.ticket.payment.payment_code||"N/A"))]),r._v(" "),r.ticket.payment.id?c("span",[r._v("\n              Transaction: "+r._s(r.ticket.payment.payment_code)+"\n            ")]):r._e()])]):r._e()]),r._v(" "),r.ticket.notes?c("div",{staticClass:"print-notes"},[c("div",{staticClass:"print-divider"}),r._v(" "),c("h4",[r._v("NOTES:")]),r._v(" "),c("p",[r._v(r._s(r.ticket.notes))])]):r._e(),r._v(" "),r.customFooter?c("div",{staticClass:"print-custom-footer"},[c("div",{staticClass:"print-divider"}),r._v(" "),c("div",{domProps:{innerHTML:r._s(r.customFooter)}})]):r._e(),r._v(" "),c("div",{staticClass:"print-footer"},[c("div",{staticClass:"print-divider"}),r._v(" "),c("p",{staticClass:"thank-you"},[r._v(r._s(r.footerMessage))]),r._v(" "),c("p",{staticClass:"print-time"},[r._v("\n          Printed: "+r._s(r.formatPrintDateTime(new Date))+"\n        ")])])]):r._e(),r._v(" "),c("div",{staticClass:"print-dialog-actions"},[c("button",{staticClass:"print-btn print-primary",attrs:{disabled:r.printing},on:{click:r.printNow}},[r.printing?c("span",[r._v("Printing...")]):c("span",[r._v("🖨️ Print")])]),r._v(" "),c("button",{staticClass:"print-btn print-secondary",on:{click:r.closeDialog}},[r._v("\n        Cancel\n      ")])])])]):r._e()}),[],!1,null,"02cb606c",null);n.default=component.exports},912:function(t,n,e){var content=e(964);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(16).default)("129a2380",content,!0,{sourceMap:!1})},963:function(t,n,e){"use strict";e(912)},964:function(t,n,e){var o=e(15)((function(i){return i[1]}));o.push([t.i,'.dialog-overlay[data-v-02cb606c]{align-items:center;background:rgba(0,0,0,.5);bottom:0;display:flex;justify-content:center;left:0;padding:20px;position:fixed;right:0;top:0;z-index:1000}.print-dialog-content[data-v-02cb606c]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:600px;overflow-y:auto;width:100%}.print-dialog-header[data-v-02cb606c]{align-items:center;background:#f8f9fa;border-bottom:1px solid #e9ecef;border-radius:12px 12px 0 0;display:flex;justify-content:space-between;padding:20px 24px}.print-dialog-header h2[data-v-02cb606c]{color:#333;font-size:20px;margin:0}.close-btn[data-v-02cb606c]{align-items:center;background:none;border:none;border-radius:50%;color:#6c757d;cursor:pointer;display:flex;font-size:28px;height:32px;justify-content:center;padding:0;transition:all .2s;width:32px}.close-btn[data-v-02cb606c]:hover{background:#e9ecef;color:#333}.print-preview[data-v-02cb606c]{background:#fff;color:#000;font-family:"Courier New",monospace;font-size:13px;line-height:1.4;padding:24px}.print-header[data-v-02cb606c]{margin-bottom:20px;text-align:center}.restaurant-name[data-v-02cb606c]{color:#333;font-size:24px;font-weight:700;margin:0 0 8px}.restaurant-address[data-v-02cb606c]{color:#666;font-size:14px;line-height:1.3;margin:0}.print-ticket-info[data-v-02cb606c]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:1fr 1fr;margin-bottom:15px}.detail-row[data-v-02cb606c]{display:flex;font-size:13px;justify-content:space-between;margin-bottom:4px}.detail-label[data-v-02cb606c]{color:#333;font-weight:700}.detail-value[data-v-02cb606c]{color:#000}.print-divider[data-v-02cb606c]{border-top:2px dashed #333;margin:20px 0}.print-items[data-v-02cb606c]{margin-bottom:20px}.section-title[data-v-02cb606c]{color:#333;font-size:16px;font-weight:700;margin:0 0 15px;text-align:center}.print-item[data-v-02cb606c]{border-bottom:1px dotted #ccc;margin-bottom:12px;padding-bottom:8px}.print-item[data-v-02cb606c]:last-child{border-bottom:none}.item-line[data-v-02cb606c]{margin-bottom:4px}.item-main[data-v-02cb606c]{display:flex;font-weight:700;justify-content:space-between;margin-bottom:2px}.item-name[data-v-02cb606c]{color:#333}.item-price[data-v-02cb606c]{color:#000}.item-details[data-v-02cb606c]{color:#666;display:flex;font-size:12px;justify-content:space-between;margin-left:15px}.item-total[data-v-02cb606c]{color:#000;font-weight:700}.item-notes[data-v-02cb606c]{color:#888;font-size:11px;font-style:italic;margin-left:15px;margin-top:4px}.no-items-print[data-v-02cb606c]{color:#666;font-style:italic;padding:20px;text-align:center}.print-summary[data-v-02cb606c]{margin:20px 0}.summary-line[data-v-02cb606c]{display:flex;font-size:14px;justify-content:space-between;margin-bottom:4px}.summary-label[data-v-02cb606c]{color:#333}.summary-value[data-v-02cb606c]{color:#000;font-weight:700}.total-line[data-v-02cb606c]{border-top:2px solid #333;font-size:18px;font-weight:700;margin-top:12px;padding-top:8px}.total-line .summary-label[data-v-02cb606c],.total-line .summary-value[data-v-02cb606c]{color:#000}.print-payment[data-v-02cb606c]{margin:20px 0}.payment-status[data-v-02cb606c]{display:flex;font-size:14px;font-weight:700;justify-content:space-between;margin-bottom:8px}.payment-label[data-v-02cb606c]{color:#333}.payment-value.payment-pending[data-v-02cb606c]{color:#856404}.payment-value.payment-paid[data-v-02cb606c]{color:#155724}.payment-value.payment-refunded[data-v-02cb606c]{color:#721c24}.payment-details[data-v-02cb606c]{color:#666;font-size:12px}.payment-info[data-v-02cb606c]{display:flex;flex-direction:column;gap:4px}.print-notes[data-v-02cb606c]{margin:20px 0}.print-notes h4[data-v-02cb606c]{color:#333;font-size:14px;font-weight:700;margin:0 0 8px}.print-notes p[data-v-02cb606c]{background:#f8f9fa;border-left:4px solid #ffc107;border-radius:4px;color:#000;font-size:13px;margin:0;padding:10px}.print-custom-footer[data-v-02cb606c]{color:#666;font-size:12px;margin:20px 0;text-align:center}.print-footer[data-v-02cb606c]{margin-top:30px;text-align:center}.thank-you[data-v-02cb606c]{color:#333;font-size:16px;font-weight:700;margin:15px 0 10px}.print-time[data-v-02cb606c]{color:#888;font-size:11px;margin:0}.print-dialog-actions[data-v-02cb606c]{background:#f8f9fa;border-radius:0 0 12px 12px;border-top:1px solid #e9ecef;display:flex;gap:12px;justify-content:flex-end;padding:20px 24px}.print-btn[data-v-02cb606c]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:flex;font-size:14px;font-weight:500;gap:8px;padding:12px 24px;transition:all .2s}.print-primary[data-v-02cb606c]{background:#007bff;color:#fff}.print-primary[data-v-02cb606c]:disabled{background:#6c757d;cursor:not-allowed}.print-secondary[data-v-02cb606c]{background:#6c757d;color:#fff}.print-btn[data-v-02cb606c]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}@media (max-width:768px){.print-dialog-content[data-v-02cb606c]{margin:10px;max-height:95vh}.print-preview[data-v-02cb606c]{font-size:12px;padding:16px}.print-ticket-info[data-v-02cb606c]{gap:10px;grid-template-columns:1fr}.restaurant-name[data-v-02cb606c]{font-size:20px}.section-title[data-v-02cb606c]{font-size:14px}.total-line[data-v-02cb606c]{font-size:16px}.print-dialog-actions[data-v-02cb606c]{flex-direction:column}.print-btn[data-v-02cb606c]{justify-content:center;width:100%}}',""]),o.locals={},t.exports=o}}]);