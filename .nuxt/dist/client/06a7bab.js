(window.webpackJsonp=window.webpackJsonp||[]).push([[218],{1253:function(t,e,n){var content=n(1561);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("25251352",content,!0,{sourceMap:!1})},1560:function(t,e,n){"use strict";n(1253)},1561:function(t,e,n){var c=n(15)((function(i){return i[1]}));c.push([t.i,".chart-account-settlement-report[data-v-52d339c0]{padding:0}.report-header[data-v-52d339c0]{align-items:center;background:linear-gradient(135deg,#8b5cf6,#ec4899);border-radius:8px;color:#fff;display:flex;justify-content:space-between;margin-bottom:24px;padding:20px}.title-section h1[data-v-52d339c0]{font-size:28px;font-weight:600;margin:0}.title-section p[data-v-52d339c0]{font-size:14px;margin:5px 0 0;opacity:.9}.action-buttons[data-v-52d339c0]{gap:12px}.filter-card[data-v-52d339c0]{background:#fff}.filter-title[data-v-52d339c0]{background:#f8f9fa;color:#495057;font-weight:600}.summary-cards[data-v-52d339c0]{margin-bottom:24px}.summary-card[data-v-52d339c0]{height:140px;overflow:hidden;position:relative}.summary-content[data-v-52d339c0]{align-items:center;display:flex;height:100%}.summary-icon[data-v-52d339c0]{font-size:48px;margin-right:16px;opacity:.8}.summary-details h3[data-v-52d339c0]{color:#333;font-size:16px;font-weight:600;margin:0}.summary-details p[data-v-52d339c0]{color:#666;font-size:12px;margin:4px 0}.summary-details h2[data-v-52d339c0]{font-size:24px;font-weight:700;margin:8px 0 0}.summary-lcy[data-v-52d339c0]{font-size:11px;margin-top:4px!important;opacity:.8}.accounts-card[data-v-52d339c0]{background:linear-gradient(135deg,#a8edea,#fed6e3);color:#333}.amount-card[data-v-52d339c0],.lak-card[data-v-52d339c0],.settlement-card[data-v-52d339c0]{background:linear-gradient(135deg,#a8edea,#fed6e3);color:#fff}.currency-breakdown[data-v-52d339c0]{margin-bottom:24px}.currency-card[data-v-52d339c0]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;height:100%;padding:16px;text-align:center}.currency-header[data-v-52d339c0]{align-items:center;display:flex;justify-content:space-between;margin-bottom:12px}.currency-flag[data-v-52d339c0]{font-size:24px}.currency-stats[data-v-52d339c0]{text-align:center}.original-amount[data-v-52d339c0]{color:#333;font-family:monospace;font-size:18px;font-weight:700;margin-bottom:4px}.lak-equivalent[data-v-52d339c0]{color:#f59e0b;font-family:monospace;font-size:14px;font-weight:600;margin-bottom:8px}.settlement-count[data-v-52d339c0]{color:#666;font-size:12px;margin-bottom:4px}.percentage[data-v-52d339c0]{color:#999;font-size:11px}.exchange-rate-cell[data-v-52d339c0]{text-align:center}.exchange-rate-cell .default-rate[data-v-52d339c0]{color:#999;font-style:italic}.lak-amount-cell[data-v-52d339c0]{text-align:center}.lak-amount[data-v-52d339c0]{color:#f59e0b;font-family:monospace;font-size:13px;font-weight:600}.chart-card[data-v-52d339c0]{margin-bottom:24px}.chart-container[data-v-52d339c0]{height:400px;position:relative}.cards-container[data-v-52d339c0],.table-card[data-v-52d339c0]{margin-bottom:24px}.cards-title[data-v-52d339c0],.table-title[data-v-52d339c0]{background:#f8f9fa;color:#495057;font-weight:600}.search-field[data-v-52d339c0]{max-width:300px}.chart-account-card[data-v-52d339c0]{cursor:pointer;height:100%;transition:all .3s ease}.chart-account-card[data-v-52d339c0]:hover{box-shadow:0 8px 25px rgba(0,0,0,.15)!important;transform:translateY(-4px)}.chart-account-card.selected[data-v-52d339c0]{border:2px solid #8b5cf6}.account-header[data-v-52d339c0]{align-items:flex-start;display:flex;justify-content:space-between}.account-info .rank-badge[data-v-52d339c0]{margin-bottom:8px}.account-info h3[data-v-52d339c0]{color:#333;font-size:16px;font-weight:600;margin:0}.account-code[data-v-52d339c0]{color:#1976d2;font-family:monospace;font-size:16px;font-weight:700}.account-name[data-v-52d339c0]{color:#666;font-size:12px;line-height:1.3;margin:4px 0}.account-icon[data-v-52d339c0]{color:#8b5cf6;font-size:24px;opacity:.7}.stat-item[data-v-52d339c0]{align-items:center;display:flex;justify-content:space-between;margin-bottom:8px}.stat-label[data-v-52d339c0]{color:#666;font-size:12px}.stat-value[data-v-52d339c0]{font-size:13px;font-weight:600}.amount-value[data-v-52d339c0]{color:#4caf50}.count-value[data-v-52d339c0]{color:#2196f3}.average-value[data-v-52d339c0]{color:#ff9800}.progress-section[data-v-52d339c0]{margin-top:12px}.progress-label[data-v-52d339c0]{color:#666;font-size:11px;margin-bottom:4px}.no-data-state[data-v-52d339c0]{padding:48px 24px;text-align:center}.no-data-icon[data-v-52d339c0]{color:#ccc;font-size:64px;margin-bottom:16px}.no-data-title[data-v-52d339c0]{color:#666;font-size:18px;margin:0 0 8px}.no-data-subtitle[data-v-52d339c0]{color:#999;font-size:14px;margin:0}.chart-account-table[data-v-52d339c0]{background:#fff}.account-code-cell .account-code[data-v-52d339c0]{color:#1976d2;font-family:monospace;font-size:14px;font-weight:700}.account-name-cell .account-name[data-v-52d339c0]{color:#333;font-size:13px}.total-amount[data-v-52d339c0]{color:#4caf50;font-size:14px}.average-amount[data-v-52d339c0]{color:#ff9800}.dialog-header[data-v-52d339c0]{background:linear-gradient(135deg,#8b5cf6,#ec4899);color:#fff}.section-title[data-v-52d339c0]{color:#333;font-size:18px;font-weight:600;margin:0}.detail-stat[data-v-52d339c0]{align-items:center;background:#f8f9fa;border-radius:8px;display:flex;height:100%;padding:16px}.stat-icon[data-v-52d339c0]{color:#8b5cf6;font-size:24px;margin-right:12px}.stat-info strong[data-v-52d339c0]{color:#666;display:block;font-size:12px;margin-bottom:4px}.stat-number[data-v-52d339c0]{font-family:monospace;font-size:16px;font-weight:600;margin:0}.method-card[data-v-52d339c0]{background:#f8f9fa;border-radius:8px;height:100%;padding:16px;text-align:center}.method-header[data-v-52d339c0]{margin-bottom:12px}.method-count[data-v-52d339c0]{color:#666;font-size:14px;margin-bottom:4px}.method-amount[data-v-52d339c0]{font-family:monospace;font-size:18px;font-weight:600;margin-bottom:4px}.method-percentage[data-v-52d339c0]{color:#999;font-size:12px}.filter-buttons[data-v-52d339c0]{display:flex;flex-wrap:wrap;gap:8px}.settlement-table[data-v-52d339c0]{background:#fff}.date-cell[data-v-52d339c0]{font-family:monospace;font-size:13px}.amount-breakdown[data-v-52d339c0]{align-items:center;display:flex;flex-direction:column}.amount-cell[data-v-52d339c0]{font-family:monospace;font-size:13px;font-weight:600}.exchange-rate[data-v-52d339c0]{color:#666;font-size:10px;margin-top:2px}.user-info .user-name[data-v-52d339c0]{font-weight:500}.ministry-info[data-v-52d339c0]{display:flex;flex-direction:column}.ministry-name[data-v-52d339c0]{font-size:13px;font-weight:500}.advance-info .advance-status[data-v-52d339c0],.ministry-code[data-v-52d339c0]{color:#666;font-size:10px;margin-top:2px}.no-advance[data-v-52d339c0],.no-ministry[data-v-52d339c0]{color:#999;font-style:italic}.action-buttons[data-v-52d339c0]{display:flex;gap:4px}.no-filtered-data[data-v-52d339c0]{color:#666;padding:24px;text-align:center}.no-filtered-data i[data-v-52d339c0]{color:#ccc;font-size:32px;margin-bottom:8px}.notes-header[data-v-52d339c0]{background:linear-gradient(135deg,#4caf50,#2196f3);color:#fff}.notes-content[data-v-52d339c0]{line-height:1.6;padding:24px;white-space:pre-wrap}@media print{.action-buttons[data-v-52d339c0],.filter-card[data-v-52d339c0],.v-btn[data-v-52d339c0]{display:none!important}.chart-card[data-v-52d339c0],.summary-cards[data-v-52d339c0]{page-break-inside:avoid}}@media (max-width:768px){.report-header[data-v-52d339c0]{gap:16px}.report-header[data-v-52d339c0],.summary-content[data-v-52d339c0]{flex-direction:column;text-align:center}.summary-icon[data-v-52d339c0]{margin-bottom:8px;margin-right:0}.chart-container[data-v-52d339c0]{height:300px}.account-header[data-v-52d339c0]{flex-direction:column;text-align:center}.account-icon[data-v-52d339c0]{margin-top:8px}.detail-stat[data-v-52d339c0]{flex-direction:column;text-align:center}.stat-icon[data-v-52d339c0]{margin-bottom:8px;margin-right:0}.filter-buttons[data-v-52d339c0]{justify-content:center}}",""]),c.locals={},t.exports=c},1744:function(t,e,n){"use strict";n.r(e);var c=n(316),r=n(313),o=n(18),l=n(317),d=n(780),m=n(789),v=n(1625),f=n(754),h=n(312),C=n(167),_=n(318),x=n(252),y=n(314),w=n(779),k=n(65),A=n(777),D=n(113),M=(n(34),n(131),n(35),n(20)),S=n(33),z=(n(92),n(9),n(5),n(39),n(51),n(30),n(44),n(823),n(54),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(53),n(8),n(69),n(446),n(10),n(62),n(818),n(858)),R={name:"ChartAccountSettlementReport",head:function(){return{title:"Chart Account Settlement Reports"}},data:function(){return{loading:!1,exporting:!1,loadingDetails:!1,search:"",startDateMenu:!1,endDateMenu:!1,settlementDialog:!1,topChartAccounts:[],selectedChartAccount:null,selectedSettlements:[],settlementSummary:{totalAmount:0,settlementCount:0},methodDistribution:[],currencyBreakdown:[],currencies:[],pagination:{currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10},filters:{startDate:null,endDate:null,limit:"10",currencyId:null},viewMode:"cards",selectedMethodFilter:"",showNotesModal:!1,selectedNotes:"",chartAccountChart:null,limitOptions:[{text:"‡∫≠‡∫±‡∫ô‡∫î‡∫±‡∫ö 5 (Top 5)",value:"5"},{text:"‡∫≠‡∫±‡∫ô‡∫î‡∫±‡∫ö 10 (Top 10)",value:"10"},{text:"‡∫≠‡∫±‡∫ô‡∫î‡∫±‡∫ö 15 (Top 15)",value:"15"},{text:"‡∫≠‡∫±‡∫ô‡∫î‡∫±‡∫ö 20 (Top 20)",value:"20"}],viewModeOptions:[{text:"‡∫ö‡∫±‡∫î (Card View)",value:"cards"},{text:"‡∫ï‡∫≤‡∫ï‡∫∞‡∫•‡∫≤‡∫á (Table View)",value:"table"},{text:"‡∫Å‡∫≤‡∫ü (Chart View)",value:"chart"}],tableHeaders:[{text:"‡∫≠‡∫±‡∫ô‡∫î‡∫±‡∫ö",value:"rank",width:"80px"},{text:"‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ö‡∫±‡∫ô‡∫ä‡∫µ",value:"accountCode",width:"120px"},{text:"‡∫ä‡∫∑‡ªà‡∫ö‡∫±‡∫ô‡∫ä‡∫µ",value:"accountName",width:"200px"},{text:"‡∫•‡∫ß‡∫°‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô",value:"totalAmount",width:"150px"},{text:"‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞",value:"settlementCount",width:"120px"},{text:"‡∫Ñ‡ªà‡∫≤‡∫™‡∫∞‡ªÄ‡∫•‡ªà‡∫ç",value:"averageAmount",width:"120px"},{text:"‡∫à‡∫±‡∫î‡∫Å‡∫≤‡∫ô",value:"actions",sortable:!1,width:"120px"}],settlementHeaders:[{text:"‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫•‡∫ª‡∫á‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å",value:"bookingDate",width:"120px"},{text:"‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô",value:"currency",width:"80px"},{text:"‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫ï‡∫ª‡ªâ‡∫ô",value:"amount",width:"130px"},{text:"‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡ªÅ‡∫•‡∫Å‡∫õ‡ªà‡∫Ω‡∫ô",value:"exchangeRate",width:"100px"},{text:"‡ªÄ‡∫ó‡∫ª‡ªà‡∫≤‡∫Å‡∫±‡∫ö‡∫•‡∫≤‡∫ß‡∫Å‡∫µ‡∫ö",value:"lakAmount",width:"130px"},{text:"‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô",value:"method",width:"100px"},{text:"‡∫ú‡∫π‡ªâ‡∫î‡∫≥‡ªÄ‡∫ô‡∫µ‡∫ô‡∫Å‡∫≤‡∫ô",value:"proceeder",width:"130px"},{text:"‡∫Å‡∫∞‡∫ä‡∫ß‡∫á",value:"ministry",width:"120px"},{text:"‡ªÄ‡∫á‡∫¥‡∫ô‡∫Å‡ªà‡∫≠‡∫ô",value:"moneyAdvance",width:"100px"},{text:"‡∫à‡∫±‡∫î‡∫Å‡∫≤‡∫ô",value:"actions",sortable:!1,width:"120px"}]}},computed:{filteredChartAccounts:function(){var t=this;return this.search?this.topChartAccounts.filter((function(e){var n,c,r,o;return(null===(n=e.chartAccount)||void 0===n||null===(c=n.accountCode)||void 0===c?void 0:c.toLowerCase().includes(t.search.toLowerCase()))||(null===(r=e.chartAccount)||void 0===r||null===(o=r.accountName)||void 0===o?void 0:o.toLowerCase().includes(t.search.toLowerCase()))})):this.topChartAccounts},maxAmount:function(){return Math.max.apply(Math,Object(S.a)(this.topChartAccounts.map((function(a){return a.totalAmount}))).concat([0]))},totalAmount:function(){return this.topChartAccounts.reduce((function(t,e){return t+parseFloat(e.totalAmount)}),0)},totalSettlements:function(){return this.topChartAccounts.reduce((function(t,e){return t+parseInt(e.settlementCount)}),0)},averageAmount:function(){return this.totalSettlements>0?this.totalAmount/this.totalSettlements:0},availableMethods:function(){var t=new Set;return this.selectedSettlements.forEach((function(e){t.add(e.method)})),Array.from(t)},filteredSettlements:function(){var t=this;return this.selectedMethodFilter?this.selectedSettlements.filter((function(e){return e.method===t.selectedMethodFilter})):this.selectedSettlements},currencyOptions:function(){var t=[{text:"‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô (All Currencies)",value:null}];return this.currencies.forEach((function(e){e.isActive&&t.push({text:"".concat(e.name," (").concat(e.code,")"),value:e.id})})),t},uniqueCurrencies:function(){return this.currencyBreakdown.length||0},totalLakAmount:function(){return this.currencyBreakdown.reduce((function(t,e){return t+(e.lakEquivalent||0)}),0)}},mounted:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadCurrencies();case 2:t.setDefaultDates(),t.loadChartAccountData(),t.$nextTick((function(){t.initializeChart()}));case 5:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.chartAccountChart&&this.chartAccountChart.destroy()},methods:{loadCurrencies:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/currency/find");case 3:(n=e.sent).data.success&&(t.currencies=n.data.data||[]),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error loading currencies:",e.t0),t.currencies=[{id:1,code:"LAK",name:"Lao Kip",isActive:!0,isLocalCCY:!0,rate:1},{id:2,code:"USD",name:"US Dollar",isActive:!0,isLocalCCY:!1,rate:21e3},{id:3,code:"THB",name:"Thai Baht",isActive:!0,isLocalCCY:!1,rate:650}];case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},setDefaultDates:function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1);this.filters.startDate=e.toISOString().substr(0,10),this.filters.endDate=t.toISOString().substr(0,10)},loadChartAccountData:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=new URLSearchParams,t.filters.startDate&&n.append("startDate",t.filters.startDate),t.filters.endDate&&n.append("endDate",t.filters.endDate),t.filters.limit&&n.append("limit",t.filters.limit),t.filters.currencyId&&n.append("currencyId",t.filters.currencyId),e.next=9,t.$axios.get("/api/settlements/analytics/top-chart-accounts?".concat(n));case 9:if(!(c=e.sent).data.success){e.next=15;break}return t.topChartAccounts=c.data.data.topChartAccounts||[],e.next=14,t.calculateCurrencyBreakdown();case 14:t.updateChart();case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error loading chart account data:",e.t0),t.$toast.error("Failed to load chart account reports");case 21:return e.prev=21,t.loading=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,17,21,24]])})))()},calculateCurrencyBreakdown:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URLSearchParams,t.filters.startDate&&n.append("startDate",t.filters.startDate),t.filters.endDate&&n.append("endDate",t.filters.endDate),t.filters.limit&&n.append("limit",t.filters.limit),t.filters.currencyId&&n.append("currencyId",t.filters.currencyId),e.next=8,t.$axios.get("/api/settlements/currency-breakdown?".concat(n));case 8:(c=e.sent).data.success&&(t.currencyBreakdown=c.data.data.currencies||[]),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error calculating currency breakdown:",e.t0),t.currencyBreakdown=[];case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},selectChartAccount:function(t,e){var n=this;return Object(M.a)(regeneratorRuntime.mark((function c(){var r;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.loadingDetails=!0,n.settlementDialog=!0,c.prev=2,c.next=5,n.$axios.get("/api/settlements/by-chart-account/".concat(t));case 5:(r=c.sent).data.success&&(n.selectedSettlements=r.data.data.settlements,n.settlementSummary=r.data.data.summary,n.pagination=r.data.data.pagination||n.pagination,n.selectedChartAccount=e,n.selectedMethodFilter="",n.calculateMethodDistribution()),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(2),console.error("Error loading chart account settlements:",c.t0),n.$toast.error("Failed to load settlement details");case 13:return c.prev=13,n.loadingDetails=!1,c.finish(13);case 16:case"end":return c.stop()}}),c,null,[[2,9,13,16]])})))()},calculateMethodDistribution:function(){var t={};this.selectedSettlements.forEach((function(e){t[e.method]||(t[e.method]={count:0,total:0}),t[e.method].count++,t[e.method].total+=parseFloat(e.amount)})),this.methodDistribution=Object.keys(t).map((function(e){return{method:e,count:t[e].count,total:t[e].total}}))},filterByMethod:function(t){this.selectedMethodFilter=t},getMostUsedMethod:function(){if(0===this.selectedSettlements.length)return"N/A";var t={};this.selectedSettlements.forEach((function(e){t[e.method]=(t[e.method]||0)+1}));var e=Object.keys(t).reduce((function(a,b){return t[a]>t[b]?a:b}));return this.formatMethod(e)},getAdvancePercentage:function(){if(0===this.selectedSettlements.length)return 0;var t=this.selectedSettlements.filter((function(s){return s.moneyAdvanceId})).length;return Math.round(t/this.selectedSettlements.length*100)},resetFilters:function(){this.filters={startDate:null,endDate:null,limit:"10",currencyId:null},this.viewMode="cards",this.setDefaultDates(),this.loadChartAccountData()},initializeChart:function(){if(this.$refs.chartAccountChart){var t=this.$refs.chartAccountChart.getContext("2d");this.chartAccountChart=new z.default(t,{type:"doughnut",data:{labels:[],datasets:[{data:[],backgroundColor:[],borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{position:"bottom"},tooltips:{callbacks:{label:function(t,data){var e=data.datasets[t.datasetIndex],n=e.data.reduce((function(a,b){return a+b}),0),c=e.data[t.index],r=Math.round(c/n*100);return data.labels[t.index]+": $"+new Intl.NumberFormat("en-US").format(c)+" ("+r+"%)"}}}}})}},updateChart:function(){var t=this;if(this.chartAccountChart&&0!==this.topChartAccounts.length){var e=this.topChartAccounts.map((function(t){return t.chartAccount.accountCode})).slice(0,8),n=this.topChartAccounts.map((function(t){return parseFloat(t.totalAmount)})).slice(0,8),c=e.map((function(e,n){return t.getChartColor(n)}));this.chartAccountChart.data.labels=e,this.chartAccountChart.data.datasets[0].data=n,this.chartAccountChart.data.datasets[0].backgroundColor=c,this.chartAccountChart.update()}},closeDialog:function(){this.settlementDialog=!1,this.selectedChartAccount=null,this.selectedSettlements=[],this.methodDistribution=[]},exportToExcel:function(){var t=this;return Object(M.a)(regeneratorRuntime.mark((function e(){var n,c,r,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.exporting=!0,e.prev=1,n=new URLSearchParams,Object.keys(t.filters).forEach((function(e){t.filters[e]&&n.append(e,t.filters[e])})),e.next=6,t.$axios.get("/api/settlements/analytics/top-chart-accounts/export?".concat(n),{responseType:"blob"});case 6:c=e.sent,r=new Blob([c.data]),(link=document.createElement("a")).href=window.URL.createObjectURL(r),link.download="chart-account-settlement-report-".concat(t.filters.startDate,"-").concat(t.filters.endDate,".xlsx"),link.click(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error exporting report:",e.t0),t.$toast.error("Error exporting report");case 18:return e.prev=18,t.exporting=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,14,18,21]])})))()},printReport:function(){window.print()},viewSettlement:function(t){this.$router.push("/settlements/".concat(t))},showNotes:function(t){this.selectedNotes=t,this.showNotesModal=!0},getChartColor:function(t){var e=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6B7280","#1F2937","#059669","#DC2626","#7C3AED","#0891B2"];return e[t%e.length]},getMethodColor:function(t){return{cash:"green",bank_transfer:"blue",deduction:"orange"}[t]||"grey"},getCurrencyColor:function(t){return{LAK:"orange",USD:"green",THB:"blue",CNY:"red",EUR:"purple",JPY:"pink",GBP:"indigo",KRW:"teal"}[t]||"grey"},getCurrencyFlag:function(t){return{LAK:"üá±üá¶",USD:"üá∫üá∏",THB:"üáπüá≠",CNY:"üá®üá≥",EUR:"üá™üá∫",JPY:"üáØüáµ",GBP:"üá¨üáß",KRW:"üá∞üá∑"}[t]||"üè≥Ô∏è"},calculateLakAmount:function(t,e){return t?t*(e||1):0},formatCurrency:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";if(!t)return"0.00";var n=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return"LAK"===e?n+" ‚Ç≠":"USD"===e?"$"+n:"THB"===e?n+" ‡∏ø":"CNY"===e?"¬•"+n:"EUR"===e?"‚Ç¨"+n:n+" "+e},formatExchangeRate:function(t){return t?new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}).format(t):"1.0000"},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""},formatMethod:function(t){return{cash:"‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫ª‡∫î (Cash)",bank_transfer:"‡ªÇ‡∫≠‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô (Transfer)",deduction:"‡∫´‡∫±‡∫Å‡∫•‡∫ª‡∫ö (Deduction)"}[t]||t}}},F=R,L=(n(1560),n(32)),component=Object(L.a)(F,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"chart-account-settlement-report"},[e("div",{staticClass:"report-header"},[t._m(0),t._v(" "),e("div",{staticClass:"action-buttons"},[e(c.a,{attrs:{color:"success",loading:t.exporting},on:{click:t.exportToExcel}},[e("i",{staticClass:"fas fa-file-excel"}),t._v("\n        Export Excel\n      ")]),t._v(" "),e(c.a,{attrs:{color:"primary"},on:{click:t.printReport}},[e("i",{staticClass:"fas fa-print"}),t._v("\n        Print\n      ")])],1)]),t._v(" "),e(r.a,{staticClass:"filter-card mb-4",attrs:{elevation:"2"}},[e(o.d,{staticClass:"filter-title"},[e("i",{staticClass:"fas fa-filter"}),t._v("\n      ‡∫ï‡∫ª‡∫ß‡∫Å‡∫≠‡∫á (Filters & Controls)\n    ")]),t._v(" "),e(o.c,[e(w.a,[e(d.a,{attrs:{cols:"12",md:"2"}},[e(_.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var c=n.on,r=n.attrs;return[e(D.a,t._g(t._b({attrs:{label:"‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡ªÄ‡∫•‡∫µ‡ªà‡∫°‡∫ï‡∫ª‡ªâ‡∫ô (Start Date)","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.filters.startDate,callback:function(e){t.$set(t.filters,"startDate",e)},expression:"filters.startDate"}},"v-text-field",r,!1),c))]}}]),model:{value:t.startDateMenu,callback:function(e){t.startDateMenu=e},expression:"startDateMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.startDateMenu=!1}},model:{value:t.filters.startDate,callback:function(e){t.$set(t.filters,"startDate",e)},expression:"filters.startDate"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(_.a,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var c=n.on,r=n.attrs;return[e(D.a,t._g(t._b({attrs:{label:"‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫™‡∫¥‡ªâ‡∫ô‡∫™‡∫∏‡∫î (End Date)","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.filters.endDate,callback:function(e){t.$set(t.filters,"endDate",e)},expression:"filters.endDate"}},"v-text-field",r,!1),c))]}}]),model:{value:t.endDateMenu,callback:function(e){t.endDateMenu=e},expression:"endDateMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.endDateMenu=!1}},model:{value:t.filters.endDate,callback:function(e){t.$set(t.filters,"endDate",e)},expression:"filters.endDate"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(k.a,{attrs:{items:t.limitOptions,"item-text":"text","item-value":"value",label:"‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫ö‡∫±‡∫ô‡∫ä‡∫µ (Top Accounts)","prepend-icon":"mdi-format-list-numbered"},model:{value:t.filters.limit,callback:function(e){t.$set(t.filters,"limit",e)},expression:"filters.limit"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(k.a,{attrs:{items:t.currencyOptions,"item-text":"text","item-value":"value",label:"‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô (Currency)","prepend-icon":"mdi-currency-usd",clearable:""},model:{value:t.filters.currencyId,callback:function(e){t.$set(t.filters,"currencyId",e)},expression:"filters.currencyId"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(k.a,{attrs:{items:t.viewModeOptions,"item-text":"text","item-value":"value",label:"‡∫Æ‡∫π‡∫ö‡ªÅ‡∫ö‡∫ö‡∫Å‡∫≤‡∫ô‡∫™‡∫∞‡ªÅ‡∫î‡∫á (View Mode)","prepend-icon":"mdi-view-dashboard"},model:{value:t.viewMode,callback:function(e){t.viewMode=e},expression:"viewMode"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"2"}},[e(c.a,{attrs:{color:"primary",loading:t.loading,block:""},on:{click:t.loadChartAccountData}},[e("i",{staticClass:"fas fa-search"}),t._v("\n            ‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤\n          ")])],1)],1),t._v(" "),e(w.a,[e(d.a,{attrs:{cols:"12",md:"2"}},[e(c.a,{attrs:{color:"secondary",block:""},on:{click:t.resetFilters}},[e("i",{staticClass:"fas fa-undo"}),t._v("\n            ‡∫£‡∫µ‡ªÄ‡∫ä‡∫±‡∫î\n          ")])],1)],1)],1)],1),t._v(" "),t.loading?t._e():e(w.a,{staticClass:"summary-cards mb-4"},[e(d.a,{attrs:{cols:"12",md:"3"}},[e(r.a,{staticClass:"summary-card accounts-card",attrs:{elevation:"3"}},[e(o.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-chart-line"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ú‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ó‡∫µ‡ªà‡ªÉ‡∫ä‡ªâ‡∫á‡∫≤‡∫ô")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Active Chart Accounts")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v(t._s(t.topChartAccounts.length))]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("Chart Accounts")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"3"}},[e(r.a,{staticClass:"summary-card amount-card",attrs:{elevation:"3"}},[e(o.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-dollar-sign"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("‡∫•‡∫ß‡∫°‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total Settlement Amount")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                $"+t._s(t.formatCurrency(t.totalAmount))+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("USD Amount")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"3"}},[e(r.a,{staticClass:"summary-card settlement-card",attrs:{elevation:"3"}},[e(o.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-coins"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("‡∫•‡∫ß‡∫°‡∫ó‡∫∏‡∫Å‡∫™‡∫∞‡∫Å‡∫∏‡∫ô")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Multi-Currency Total")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v(t._s(t.uniqueCurrencies))]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v(t._s(t.uniqueCurrencies)+" Currencies")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"3"}},[e(r.a,{staticClass:"summary-card lak-card",attrs:{elevation:"3"}},[e(o.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-calculator"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("‡∫•‡∫≤‡∫ß‡∫Å‡∫µ‡∫ö (LAK)")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total LAK Equivalent")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.formatCurrency(t.totalLakAmount,"LAK"))+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-lcy"},[t._v("Local Currency")])])])])],1)],1)],1),t._v(" "),!t.loading&&t.currencyBreakdown.length>0?e(w.a,{staticClass:"currency-breakdown mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(r.a,{attrs:{elevation:"2"}},[e(o.d,[e("i",{staticClass:"fas fa-coins"}),t._v("\n          ‡∫Å‡∫≤‡∫ô‡ªÅ‡∫à‡∫Å‡∫¢‡∫≤‡∫ç‡∫ï‡∫≤‡∫°‡∫™‡∫∞‡∫Å‡∫∏‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô (Currency Breakdown)\n        ")]),t._v(" "),e(o.c,[e(w.a,t._l(t.currencyBreakdown,(function(n){return e(d.a,{key:n.currencyCode||n.currencyId,attrs:{cols:"12",md:"4",lg:"3"}},[e("div",{staticClass:"currency-card"},[e("div",{staticClass:"currency-header"},[e(l.a,{attrs:{color:t.getCurrencyColor(n.currencyCode),"text-color":"white",large:""}},[t._v("\n                    "+t._s(n.currencyCode||"LAK")+"\n                  ")]),t._v(" "),e("div",{staticClass:"currency-flag"},[t._v("\n                    "+t._s(t.getCurrencyFlag(n.currencyCode))+"\n                  ")])],1),t._v(" "),e("div",{staticClass:"currency-stats"},[e("div",{staticClass:"original-amount"},[t._v("\n                    "+t._s(t.formatCurrency(n.totalAmount,n.currencyCode))+"\n                  ")]),t._v(" "),e("div",{staticClass:"lak-equivalent"},[t._v("\n                    ‚âà "+t._s(t.formatCurrency(n.lakEquivalent,"LAK"))+"\n                  ")]),t._v(" "),e("div",{staticClass:"settlement-count"},[t._v("\n                    "+t._s(n.count)+" ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞\n                  ")]),t._v(" "),e("div",{staticClass:"percentage"},[t._v("\n                    "+t._s(Math.round(n.lakEquivalent/t.totalLakAmount*100))+"% ‡∫Ç‡∫≠‡∫á‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î\n                  ")])])])])})),1)],1)],1)],1)],1):t._e(),t._v(" "),t.loading?e("div",{staticClass:"text-center py-8"},[e(x.a,{attrs:{indeterminate:"",color:"primary",size:"64"}}),t._v(" "),e("p",{staticClass:"mt-4 text-gray-600"},[t._v("\n      ‡∫Å‡∫≥‡∫•‡∫±‡∫á‡ªÇ‡∫´‡∫•‡∫î‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô... Loading chart account reports...\n    ")])],1):t._e(),t._v(" "),"chart"===t.viewMode&&!t.loading&&t.topChartAccounts.length>0?e(r.a,{staticClass:"chart-card mb-4",attrs:{elevation:"2"}},[e(o.d,[e("i",{staticClass:"fas fa-chart-bar"}),t._v("\n      ‡∫Å‡∫≤‡∫ü‡∫™‡∫∞‡∫´‡∫º‡∫∏‡∫ö‡∫ï‡∫≤‡∫°‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ú‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ (Chart Account Settlement Distribution)\n    ")]),t._v(" "),e(o.c,[e("div",{staticClass:"chart-container"},[e("canvas",{ref:"chartAccountChart",attrs:{width:"400",height:"200"}})])])],1):t._e(),t._v(" "),"table"!==t.viewMode||t.loading?t._e():e(r.a,{staticClass:"table-card mb-4",attrs:{elevation:"2"}},[e(o.d,{staticClass:"table-title"},[e("i",{staticClass:"fas fa-table"}),t._v("\n      ‡∫ï‡∫≤‡∫ï‡∫∞‡∫•‡∫≤‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ú‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ (Chart Accounts Table View)\n      "),e(A.a),t._v(" "),e(D.a,{staticClass:"search-field",attrs:{"append-icon":"mdi-magnify",label:"‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤‡∫ö‡∫±‡∫ô‡∫ä‡∫µ...","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),e(m.a,{staticClass:"chart-account-table",attrs:{headers:t.tableHeaders,items:t.filteredChartAccounts,search:t.search,loading:t.loading,"items-per-page":15,"footer-props":{itemsPerPageOptions:[10,15,25,50],itemsPerPageText:"‡ªÅ‡∫ñ‡∫ß‡∫ï‡ªç‡ªà‡ªú‡ªâ‡∫≤:"}},scopedSlots:t._u([{key:"item.rank",fn:function(n){n.item;var c=n.index;return[e(l.a,{attrs:{color:t.getChartColor(c),"text-color":"white",small:""}},[t._v("\n          "+t._s(c+1)+"\n        ")])]}},{key:"item.accountCode",fn:function(n){var c=n.item;return[e("div",{staticClass:"account-code-cell"},[e("span",{staticClass:"account-code"},[t._v(t._s(c.chartAccount.accountCode))])])]}},{key:"item.accountName",fn:function(n){var c=n.item;return[e("div",{staticClass:"account-name-cell"},[e("span",{staticClass:"account-name"},[t._v(t._s(c.chartAccount.accountName))])])]}},{key:"item.totalAmount",fn:function(n){var c=n.item;return[e("span",{staticClass:"amount-cell total-amount"},[t._v("\n          $"+t._s(t.formatCurrency(c.totalAmount))+"\n        ")])]}},{key:"item.settlementCount",fn:function(n){var c=n.item;return[e(l.a,{attrs:{color:"blue","text-color":"white",small:""}},[t._v("\n          "+t._s(c.settlementCount)+"\n        ")])]}},{key:"item.averageAmount",fn:function(n){var c=n.item;return[e("span",{staticClass:"amount-cell average-amount"},[t._v("\n          $"+t._s(t.formatCurrency(c.totalAmount/c.settlementCount))+"\n        ")])]}},{key:"item.actions",fn:function(n){var r=n.item;return[e(c.a,{attrs:{small:"",color:"primary"},on:{click:function(e){return t.selectChartAccount(r.chartAccountId,r.chartAccount)}}},[e("i",{staticClass:"fas fa-eye"}),t._v("\n          ‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î\n        ")])]}}],null,!1,429529254)})],1),t._v(" "),"cards"!==t.viewMode||t.loading?t._e():e(r.a,{staticClass:"cards-container",attrs:{elevation:"2"}},[e(o.d,{staticClass:"cards-title"},[e("i",{staticClass:"fas fa-th-large"}),t._v("\n      ‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ú‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ó‡∫µ‡ªà‡∫ô‡∫¥‡∫ç‡∫ª‡∫°‡ªÉ‡∫ä‡ªâ (Popular Chart Accounts)\n      "),e(A.a),t._v(" "),e(D.a,{staticClass:"search-field",attrs:{"append-icon":"mdi-magnify",label:"‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤‡∫ö‡∫±‡∫ô‡∫ä‡∫µ...","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),t.topChartAccounts.length>0?e(o.c,[e(w.a,t._l(t.filteredChartAccounts,(function(n,m){var v;return e(d.a,{key:n.chartAccountId,attrs:{cols:"12",md:"6",lg:"4"}},[e(r.a,{staticClass:"chart-account-card",class:{selected:(null===(v=t.selectedChartAccount)||void 0===v?void 0:v.id)==n.chartAccountId},attrs:{elevation:"2"},on:{click:function(e){return t.selectChartAccount(n.chartAccountId,n.chartAccount)}}},[e(o.c,[e("div",{staticClass:"account-header"},[e("div",{staticClass:"account-info"},[e("div",{staticClass:"rank-badge"},[e(l.a,{attrs:{color:t.getChartColor(m),"text-color":"white",small:""}},[t._v("\n                      #"+t._s(m+1)+"\n                    ")])],1),t._v(" "),e("h3",{staticClass:"account-code"},[t._v("\n                    "+t._s(n.chartAccount.accountCode)+"\n                  ")]),t._v(" "),e("p",{staticClass:"account-name"},[t._v("\n                    "+t._s(n.chartAccount.accountName)+"\n                  ")])]),t._v(" "),e("div",{staticClass:"account-icon"},[e("i",{staticClass:"fas fa-chart-line"})])]),t._v(" "),e(h.a,{staticClass:"my-3"}),t._v(" "),e("div",{staticClass:"account-stats"},[e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("‡∫•‡∫ß‡∫°‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô:")]),t._v(" "),e("span",{staticClass:"stat-value amount-value"},[t._v("\n                    $"+t._s(t.formatCurrency(n.totalAmount))+"\n                  ")])]),t._v(" "),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞:")]),t._v(" "),e("span",{staticClass:"stat-value count-value"},[t._v("\n                    "+t._s(n.settlementCount)+"\n                  ")])]),t._v(" "),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("‡∫Ñ‡ªà‡∫≤‡∫™‡∫∞‡ªÄ‡∫•‡ªà‡∫ç:")]),t._v(" "),e("span",{staticClass:"stat-value average-value"},[t._v("\n                    $"+t._s(t.formatCurrency(n.totalAmount/n.settlementCount))+"\n                  ")])])]),t._v(" "),e("div",{staticClass:"progress-section mt-3"},[e("div",{staticClass:"progress-label"},[t._v("Settlement Volume")]),t._v(" "),e(y.a,{attrs:{value:n.totalAmount/t.maxAmount*100,color:t.getChartColor(m),height:"8",rounded:""}})],1),t._v(" "),e("div",{staticClass:"card-actions mt-3"},[e(c.a,{attrs:{small:"",color:t.getChartColor(m),block:"","text-color":"white"}},[e("i",{staticClass:"fas fa-eye"}),t._v("\n                  ‡ªÄ‡∫ö‡∫¥‡ªà‡∫á‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î\n                ")])],1)],1)],1)],1)})),1)],1):e(o.c,[e("div",{staticClass:"no-data-state"},[e("div",{staticClass:"no-data-icon"},[e("i",{staticClass:"fas fa-chart-line"})]),t._v(" "),e("h3",{staticClass:"no-data-title"},[t._v("‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ú‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ")]),t._v(" "),e("p",{staticClass:"no-data-subtitle"},[t._v("\n          No chart account settlement data found for the selected period.\n        ")])])])],1),t._v(" "),e(f.a,{attrs:{"max-width":"1400px",scrollable:""},model:{value:t.settlementDialog,callback:function(e){t.settlementDialog=e},expression:"settlementDialog"}},[t.selectedChartAccount?e(r.a,[e(o.d,{staticClass:"dialog-header"},[e("i",{staticClass:"fas fa-chart-line"}),t._v("\n        ‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞ - "+t._s(t.selectedChartAccount.accountCode)+"\n        "),e(A.a),t._v(" "),e(c.a,{attrs:{icon:""},on:{click:t.closeDialog}},[e(C.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(o.c,[e(w.a,{staticClass:"summary-section mb-4"},[e(d.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("\n              ‡∫™‡∫∞‡∫´‡∫º‡∫∏‡∫ö‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ú‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ (Chart Account Summary)\n            ")]),t._v(" "),e(h.a,{staticClass:"mb-3"})],1),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-code"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ö‡∫±‡∫ô‡∫ä‡∫µ:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  "+t._s(t.selectedChartAccount.accountCode)+"\n                ")])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-list-ol"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  "+t._s(t.settlementSummary.settlementCount)+"\n                ")])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-dollar-sign"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("‡∫•‡∫ß‡∫°‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  $"+t._s(t.formatCurrency(t.settlementSummary.totalAmount))+"\n                ")])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-calculator"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("‡∫Ñ‡ªà‡∫≤‡∫™‡∫∞‡ªÄ‡∫•‡ªà‡∫ç:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v("\n                  $"+t._s(t.formatCurrency(t.settlementSummary.totalAmount/t.settlementSummary.settlementCount))+"\n                ")])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-credit-card"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫ô‡∫¥‡∫ç‡∫ª‡∫°:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v(t._s(t.getMostUsedMethod()))])])])]),t._v(" "),e(d.a,{attrs:{cols:"6",md:"2"}},[e("div",{staticClass:"detail-stat"},[e("div",{staticClass:"stat-icon"},[e("i",{staticClass:"fas fa-percentage"})]),t._v(" "),e("div",{staticClass:"stat-info"},[e("strong",[t._v("‡∫°‡∫µ‡ªÄ‡∫á‡∫¥‡∫ô‡∫Å‡ªà‡∫≠‡∫ô:")]),t._v(" "),e("p",{staticClass:"stat-number"},[t._v(t._s(t.getAdvancePercentage())+"%")])])])])],1),t._v(" "),t.methodDistribution.length>0?e(w.a,{staticClass:"method-distribution mb-4"},[e(d.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("\n              ‡∫Å‡∫≤‡∫ô‡ªÅ‡∫à‡∫Å‡∫¢‡∫≤‡∫ç‡∫ï‡∫≤‡∫°‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞ (Settlement Method Distribution)\n            ")]),t._v(" "),e(h.a,{staticClass:"mb-3"})],1),t._v(" "),t._l(t.methodDistribution,(function(n){return e(d.a,{key:n.method,attrs:{cols:"12",md:"4"}},[e("div",{staticClass:"method-card"},[e("div",{staticClass:"method-header"},[e(l.a,{attrs:{color:t.getMethodColor(n.method),"text-color":"white",small:""}},[t._v("\n                  "+t._s(t.formatMethod(n.method))+"\n                ")])],1),t._v(" "),e("div",{staticClass:"method-stats"},[e("div",{staticClass:"method-count"},[t._v(t._s(n.count)+" ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞")]),t._v(" "),e("div",{staticClass:"method-amount"},[t._v("\n                  $"+t._s(t.formatCurrency(n.total))+"\n                ")]),t._v(" "),e("div",{staticClass:"method-percentage"},[t._v("\n                  "+t._s(Math.round(n.count/t.settlementSummary.settlementCount*100))+"% ‡∫Ç‡∫≠‡∫á‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î\n                ")])])])])}))],2):t._e(),t._v(" "),e(w.a,{staticClass:"method-filters mb-4"},[e(d.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("‡∫Å‡∫≠‡∫á‡∫ï‡∫≤‡∫°‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô (Filter by Method)")]),t._v(" "),e(h.a,{staticClass:"mb-3"}),t._v(" "),e("div",{staticClass:"filter-buttons"},[e(c.a,{staticClass:"mr-2 mb-2",attrs:{outlined:""!==t.selectedMethodFilter,color:""===t.selectedMethodFilter?"primary":"grey",small:""},on:{click:function(e){return t.filterByMethod("")}}},[t._v("\n                ‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î (All Methods)\n              ")]),t._v(" "),t._l(t.availableMethods,(function(n){return e(c.a,{key:n,staticClass:"mr-2 mb-2",attrs:{outlined:t.selectedMethodFilter!==n,color:t.selectedMethodFilter===n?t.getMethodColor(n):"grey",small:""},on:{click:function(e){return t.filterByMethod(n)}}},[t._v("\n                "+t._s(t.formatMethod(n))+"\n              ")])}))],2)],1)],1),t._v(" "),e(w.a,[e(d.a,{attrs:{cols:"12"}},[e("h3",{staticClass:"section-title"},[t._v("\n              ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞ (Settlement Transactions)\n            ")]),t._v(" "),e(h.a,{staticClass:"mb-3"}),t._v(" "),e(m.a,{staticClass:"settlement-table",attrs:{headers:t.settlementHeaders,items:t.filteredSettlements,loading:t.loadingDetails,"items-per-page":10,"footer-props":{itemsPerPageOptions:[5,10,25,50],itemsPerPageText:"‡ªÅ‡∫ñ‡∫ß‡∫ï‡ªç‡ªà‡ªú‡ªâ‡∫≤:"}},scopedSlots:t._u([{key:"item.bookingDate",fn:function(n){var c=n.item;return[e("span",{staticClass:"date-cell"},[t._v(t._s(t.formatDate(c.bookingDate)))])]}},{key:"item.currency",fn:function(n){var c,r,o=n.item;return[e(l.a,{attrs:{color:t.getCurrencyColor(null===(c=o.currency)||void 0===c?void 0:c.code),"text-color":"white",small:""}},[t._v("\n                  "+t._s((null===(r=o.currency)||void 0===r?void 0:r.code)||"LAK")+"\n                ")])]}},{key:"item.amount",fn:function(n){var c,r=n.item;return[e("div",{staticClass:"amount-breakdown"},[e("span",{staticClass:"amount-cell"},[t._v(t._s(t.formatCurrency(r.amount,null===(c=r.currency)||void 0===c?void 0:c.code)))])])]}},{key:"item.exchangeRate",fn:function(n){var c=n.item;return[e("div",{staticClass:"exchange-rate-cell"},[c.exchangeRate&&1!==c.exchangeRate?e("span",[t._v("\n                    "+t._s(t.formatExchangeRate(c.exchangeRate))+"\n                  ")]):e("span",{staticClass:"default-rate"},[t._v("1.0000")])])]}},{key:"item.lakAmount",fn:function(n){var c=n.item;return[e("div",{staticClass:"lak-amount-cell"},[e("span",{staticClass:"lak-amount"},[t._v(t._s(t.formatCurrency(t.calculateLakAmount(c.amount,c.exchangeRate),"LAK")))])])]}},{key:"item.method",fn:function(n){var c=n.item;return[e(l.a,{attrs:{color:t.getMethodColor(c.method),"text-color":"white",small:""}},[t._v("\n                  "+t._s(t.formatMethod(c.method))+"\n                ")])]}},{key:"item.proceeder",fn:function(n){var c,r=n.item;return[e("div",{staticClass:"user-info"},[e("span",{staticClass:"user-name"},[t._v(t._s((null===(c=r.proceeder)||void 0===c?void 0:c.name)||"N/A"))])])]}},{key:"item.ministry",fn:function(n){var c=n.item;return[c.ministry?e("div",{staticClass:"ministry-info"},[e("span",{staticClass:"ministry-name"},[t._v(t._s(c.ministry.name))]),t._v(" "),e("div",{staticClass:"ministry-code"},[t._v(t._s(c.ministry.code))])]):e("span",{staticClass:"no-ministry"},[t._v("N/A")])]}},{key:"item.moneyAdvance",fn:function(n){var c=n.item;return[c.moneyAdvance?e("div",{staticClass:"advance-info"},[e(l.a,{attrs:{color:"blue","text-color":"white",small:""}},[t._v("\n                    #"+t._s(c.moneyAdvance.id)+"\n                  ")]),t._v(" "),e("div",{staticClass:"advance-status"},[t._v("\n                    "+t._s(c.moneyAdvance.status)+"\n                  ")])],1):e("span",{staticClass:"no-advance"},[t._v("Standalone")])]}},{key:"item.actions",fn:function(n){var r=n.item;return[e("div",{staticClass:"action-buttons"},[e(c.a,{staticClass:"mr-1",attrs:{small:"",color:"primary"},on:{click:function(e){return t.viewSettlement(r.id)}}},[e("i",{staticClass:"fas fa-eye"}),t._v("\n                    ‡ªÄ‡∫ö‡∫¥‡ªà‡∫á\n                  ")]),t._v(" "),r.notes?e(c.a,{attrs:{small:"",color:"green"},on:{click:function(e){return t.showNotes(r.notes)}}},[e("i",{staticClass:"fas fa-sticky-note"}),t._v("\n                    ‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î\n                  ")]):t._e()],1)]}},{key:"no-data",fn:function(){return[e("div",{staticClass:"no-filtered-data"},[e("i",{staticClass:"fas fa-search"}),t._v(" "),e("p",[t._v("‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞‡∫ó‡∫µ‡ªà‡∫Å‡∫ª‡∫á‡∫Å‡∫±‡∫ö‡∫Å‡∫≤‡∫ô‡∫Å‡∫≠‡∫á‡∫ó‡∫µ‡ªà‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å")]),t._v(" "),e("p",[t._v("No settlements found for the selected filter.")])])]},proxy:!0}],null,!1,3015417283)})],1)],1)],1)],1):t._e()],1),t._v(" "),e(f.a,{attrs:{"max-width":"600px"},model:{value:t.showNotesModal,callback:function(e){t.showNotesModal=e},expression:"showNotesModal"}},[e(r.a,[e(o.d,{staticClass:"notes-header"},[e("i",{staticClass:"fas fa-sticky-note"}),t._v("\n        ‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î‡∫Å‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞ (Settlement Notes)\n        "),e(A.a),t._v(" "),e(c.a,{attrs:{icon:""},on:{click:function(e){t.showNotesModal=!1}}},[e(C.a,[t._v("mdi-close")])],1)],1),t._v(" "),e(o.c,{staticClass:"notes-content"},[e("p",[t._v(t._s(t.selectedNotes))])])],1)],1)],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title-section"},[e("h1",{staticClass:"page-title"},[e("i",{staticClass:"fas fa-chart-line"}),t._v("\n        ‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô‡∫ä‡∫≥‡∫•‡∫∞‡∫ï‡∫≤‡∫°‡∫ö‡∫±‡∫ô‡∫ä‡∫µ‡∫ú‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ä‡∫µ\n      ")]),t._v(" "),e("p",{staticClass:"page-subtitle"},[t._v("Chart Account Settlement Report")])])}],!1,null,"52d339c0",null);e.default=component.exports}}]);