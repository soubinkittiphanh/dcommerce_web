(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{1268:function(t,e,r){var content=r(1573);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("18bf2b87",content,!0,{sourceMap:!1})},1572:function(t,e,r){"use strict";r(1268)},1573:function(t,e,r){var n=r(15)((function(i){return i[1]}));n.push([t.i,".mou-summary[data-v-63e49dd0]{background-color:#f5f5f5;min-height:100vh;padding:24px}.page-header[data-v-63e49dd0]{align-items:center;background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);display:flex;justify-content:space-between;margin-bottom:32px;padding:24px}.header-content h1[data-v-63e49dd0]{color:#2c3e50;font-size:2rem;font-weight:600;margin:0}.header-content p[data-v-63e49dd0]{color:#7f8c8d;font-size:1rem;margin:4px 0 0}.stats-grid[data-v-63e49dd0]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));margin-bottom:24px}.stat-card[data-v-63e49dd0]{border-radius:12px;overflow:hidden;transition:transform .2s ease}.stat-card[data-v-63e49dd0]:hover{transform:translateY(-4px)}.primary-card[data-v-63e49dd0]{background:linear-gradient(135deg,#667eea,#764ba2)}.success-card[data-v-63e49dd0]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.warning-card[data-v-63e49dd0]{background:linear-gradient(135deg,#f093fb,#f5576c)}.info-card[data-v-63e49dd0]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.stat-content[data-v-63e49dd0]{align-items:center;color:#fff;display:flex;padding:24px}.stat-icon[data-v-63e49dd0]{margin-right:16px;opacity:.9}.stat-details h2[data-v-63e49dd0]{font-size:2.5rem;font-weight:700;line-height:1;margin:0}.stat-details p[data-v-63e49dd0]{font-size:.9rem;margin:4px 0 0;opacity:.9}.chart-card[data-v-63e49dd0],.table-card[data-v-63e49dd0]{border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1)}.card-title[data-v-63e49dd0]{border-bottom:1px solid #e0e0e0;font-weight:600;padding:20px 24px 16px}.status-breakdown[data-v-63e49dd0]{padding:16px 0}.status-item[data-v-63e49dd0]{align-items:center;display:flex;margin-bottom:12px}.status-indicator[data-v-63e49dd0]{border-radius:50%;height:12px;margin-right:12px;width:12px}.status-draft[data-v-63e49dd0]{background-color:#95a5a6}.status-open[data-v-63e49dd0]{background-color:#3498db}.status-inProgress[data-v-63e49dd0]{background-color:#f39c12}.status-completed[data-v-63e49dd0]{background-color:#27ae60}.status-cancelled[data-v-63e49dd0]{background-color:#e74c3c}.status-name[data-v-63e49dd0]{flex:1;font-weight:500}.status-count[data-v-63e49dd0]{background:#ecf0f1;border-radius:12px;color:#2c3e50;font-size:.85rem;font-weight:600;padding:4px 8px}.action-buttons[data-v-63e49dd0]{display:flex;flex-direction:column;gap:8px}.mou-table[data-v-63e49dd0]{border-radius:0 0 12px 12px}.action-buttons-inline[data-v-63e49dd0]{display:flex;gap:4px}.search-field[data-v-63e49dd0]{max-width:300px}@media (max-width:768px){.mou-summary[data-v-63e49dd0]{padding:16px}.page-header[data-v-63e49dd0]{flex-direction:column;gap:16px;text-align:center}.stats-grid[data-v-63e49dd0]{grid-template-columns:1fr}.stat-content[data-v-63e49dd0]{justify-content:center;text-align:center}}",""]),n.locals={},t.exports=n},1828:function(t,e,r){"use strict";r.r(e);var n=r(316),o=r(313),c=r(18),d=r(317),l=r(784),m=r(793),v=r(758),f=r(167),h=r(783),x=r(781),_=r(113),C=(r(34),r(131),r(10),r(7),r(9),r(5),r(12),r(8),r(13),r(3)),y=r(20);r(62),r(92);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var w={name:"MouSummary",components:{MouMaintenanceDialog:r(1703).default},data:function(){return{statistics:{totalMOUs:0,totalWorkers:0,statusBreakdown:{draft:0,open:0,inProgress:0,completed:0,cancelled:0}},mous:[],loading:!1,search:"",maintenanceDialog:!1,deleteDialog:!1,editingItem:null,deletingItem:null,pagination:{totalItems:0,totalPages:0,currentPage:1},options:{page:1,itemsPerPage:10,sortBy:["createdAt"],sortDesc:[!0]},headers:[{text:"Job Code",value:"jobCode",width:120},{text:"Job Title",value:"jobTitle",width:200},{text:"Company",value:"employerCompany",width:180},{text:"Workers",value:"numberOfWorkers",width:100,align:"center"},{text:"Type",value:"workerType",width:100},{text:"Status",value:"jobStatus",width:120},{text:"PM Charge",value:"pmCharge",width:120},{text:"Actions",value:"actions",sortable:!1,width:100}],quickActionStatuses:[{value:"draft",label:"Draft",color:"grey",icon:"mdi-file-outline"},{value:"open",label:"Open",color:"blue",icon:"mdi-folder-open"},{value:"inProgress",label:"In Progress",color:"orange",icon:"mdi-clock-outline"},{value:"completed",label:"Completed",color:"green",icon:"mdi-check-circle"}]}},mounted:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchStatistics();case 2:return e.next=4,t.fetchMOUs();case 4:case"end":return e.stop()}}),e)})))()},methods:{fetchStatistics:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$get("/api/mous/statistics");case 3:(r=e.sent).success&&(t.statistics=r.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t.$toast.error("Failed to load statistics"),console.error("Error fetching statistics:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},fetchMOUs:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,d,l,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,r=t.options,n=r.page,o=r.itemsPerPage,c=r.sortBy,d=r.sortDesc,l={page:n,limit:o,sortBy:c[0]||"createdAt",sortOrder:d[0]?"DESC":"ASC"},t.search&&(l.search=t.search),e.next=7,t.$axios.$get("/api/mous",{params:l});case 7:(m=e.sent).success&&(t.mous=m.data.mous,t.pagination=m.data.pagination),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t.$toast.error("Failed to load MOUs"),console.error("Error fetching MOUs:",e.t0);case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})))()},openMaintenanceDialog:function(){this.editingItem=null,this.maintenanceDialog=!0},editMOU:function(t){this.editingItem=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(C.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t),this.maintenanceDialog=!0},deleteMOU:function(t){this.deletingItem=t,this.deleteDialog=!0},confirmDelete:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$delete("/api/mous/".concat(t.deletingItem.id));case 3:if(!e.sent.success){e.next=10;break}return t.$toast.success("MOU deleted successfully"),e.next=8,t.fetchMOUs();case 8:return e.next=10,t.fetchStatistics();case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t.$toast.error("Failed to delete MOU"),console.error("Error deleting MOU:",e.t0);case 16:t.deleteDialog=!1,t.deletingItem=null;case 18:case"end":return e.stop()}}),e,null,[[0,12]])})))()},onMOUSaved:function(){var t=this;return Object(y.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.maintenanceDialog=!1,t.editingItem=null,e.next=4,t.fetchMOUs();case 4:return e.next=6,t.fetchStatistics();case 6:case"end":return e.stop()}}),e)})))()},onDialogCancelled:function(){this.maintenanceDialog=!1,this.editingItem=null},filterByStatus:function(t){this.$router.push("/mous?status=".concat(t))},formatStatusName:function(t){return{draft:"Draft",open:"Open",inProgress:"In Progress",completed:"Completed",cancelled:"Cancelled"}[t]||t},getStatusColor:function(t){return{draft:"grey",open:"blue",in_progress:"orange",completed:"green",cancelled:"red"}[t]||"grey"},getWorkerTypeColor:function(t){return{Man:"blue",Woman:"pink",Spous:"purple",Any:"green"}[t]||"grey"},getWorkerTypeIcon:function(t){return{Man:"mdi-account",Woman:"mdi-account-outline",Spous:"mdi-account-heart",Any:"mdi-account-group"}[t]||"mdi-account"},formatCurrency:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:2}).format(t||0)}},watch:{search:function(){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.options.page=1,t.fetchMOUs()}),300)}}},O=w,M=(r(1572),r(32)),component=Object(M.a)(O,(function(){var t,e=this,r=e._self._c;return r("div",{staticClass:"mou-summary"},[r("div",{staticClass:"page-header"},[e._m(0),e._v(" "),r(n.a,{staticClass:"add-btn",attrs:{color:"primary",large:""},on:{click:e.openMaintenanceDialog}},[r(f.a,{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n      Add New MOU\n    ")],1)],1),e._v(" "),r("div",{staticClass:"stats-grid"},[r(o.a,{staticClass:"stat-card primary-card"},[r("div",{staticClass:"stat-content"},[r("div",{staticClass:"stat-icon"},[r(f.a,{attrs:{size:"40",color:"white"}},[e._v("mdi-file-document-multiple")])],1),e._v(" "),r("div",{staticClass:"stat-details"},[r("h2",{staticClass:"stat-number"},[e._v(e._s(e.statistics.totalMOUs))]),e._v(" "),r("p",{staticClass:"stat-label"},[e._v("Total MOUs")])])])]),e._v(" "),r(o.a,{staticClass:"stat-card success-card"},[r("div",{staticClass:"stat-content"},[r("div",{staticClass:"stat-icon"},[r(f.a,{attrs:{size:"40",color:"white"}},[e._v("mdi-account-group")])],1),e._v(" "),r("div",{staticClass:"stat-details"},[r("h2",{staticClass:"stat-number"},[e._v(e._s(e.statistics.totalWorkers))]),e._v(" "),r("p",{staticClass:"stat-label"},[e._v("Total Workers")])])])]),e._v(" "),r(o.a,{staticClass:"stat-card warning-card"},[r("div",{staticClass:"stat-content"},[r("div",{staticClass:"stat-icon"},[r(f.a,{attrs:{size:"40",color:"white"}},[e._v("mdi-clock-outline")])],1),e._v(" "),r("div",{staticClass:"stat-details"},[r("h2",{staticClass:"stat-number"},[e._v(e._s(e.statistics.statusBreakdown.inProgress))]),e._v(" "),r("p",{staticClass:"stat-label"},[e._v("In Progress")])])])]),e._v(" "),r(o.a,{staticClass:"stat-card info-card"},[r("div",{staticClass:"stat-content"},[r("div",{staticClass:"stat-icon"},[r(f.a,{attrs:{size:"40",color:"white"}},[e._v("mdi-check-circle")])],1),e._v(" "),r("div",{staticClass:"stat-details"},[r("h2",{staticClass:"stat-number"},[e._v(e._s(e.statistics.statusBreakdown.completed))]),e._v(" "),r("p",{staticClass:"stat-label"},[e._v("Completed")])])])])],1),e._v(" "),r(h.a,{staticClass:"mt-6"},[r(l.a,{attrs:{cols:"12",md:"6"}},[r(o.a,{staticClass:"chart-card"},[r(c.d,{staticClass:"card-title"},[r(f.a,{attrs:{left:"",color:"primary"}},[e._v("mdi-chart-pie")]),e._v("\n          Status Distribution\n        ")],1),e._v(" "),r(c.c,[r("div",{staticClass:"status-breakdown"},e._l(e.statistics.statusBreakdown,(function(t,n){return r("div",{key:n,staticClass:"status-item"},[r("div",{staticClass:"status-indicator",class:"status-".concat(n)}),e._v(" "),r("span",{staticClass:"status-name"},[e._v(e._s(e.formatStatusName(n)))]),e._v(" "),r("span",{staticClass:"status-count"},[e._v(e._s(t))])])})),0)])],1)],1),e._v(" "),r(l.a,{attrs:{cols:"12",md:"6"}},[r(o.a,{staticClass:"chart-card"},[r(c.d,{staticClass:"card-title"},[r(f.a,{attrs:{left:"",color:"primary"}},[e._v("mdi-trending-up")]),e._v("\n          Quick Actions\n        ")],1),e._v(" "),r(c.c,[r("div",{staticClass:"action-buttons"},e._l(e.quickActionStatuses,(function(t){return r(n.a,{key:t.value,staticClass:"ma-1",attrs:{color:t.color,outlined:"",block:""},on:{click:function(r){return e.filterByStatus(t.value)}}},[r(f.a,{attrs:{left:""}},[e._v(e._s(t.icon))]),e._v("\n              View "+e._s(t.label)+" ("+e._s(e.statistics.statusBreakdown[t.value]||0)+")\n            ")],1)})),1)])],1)],1)],1),e._v(" "),r(o.a,{staticClass:"mt-6 table-card"},[r(c.d,{staticClass:"card-title"},[r(f.a,{attrs:{left:"",color:"primary"}},[e._v("mdi-format-list-bulleted")]),e._v("\n      Recent MOUs\n      "),r(x.a),e._v(" "),r(_.a,{staticClass:"search-field",attrs:{"append-icon":"mdi-magnify",label:"Search MOUs","single-line":"","hide-details":"",dense:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),r(m.a,{staticClass:"mou-table",attrs:{headers:e.headers,items:e.mous,search:e.search,loading:e.loading,"server-items-length":e.pagination.totalItems,options:e.options},on:{"update:options":[function(t){e.options=t},e.fetchMOUs]},scopedSlots:e._u([{key:"item.jobStatus",fn:function(t){var n=t.item;return[r(d.a,{attrs:{color:e.getStatusColor(n.jobStatus),small:"","text-color":"white"}},[e._v("\n          "+e._s(e.formatStatusName(n.jobStatus))+"\n        ")])]}},{key:"item.workerType",fn:function(t){var n=t.item;return[r(f.a,{attrs:{small:"",color:e.getWorkerTypeColor(n.workerType)}},[e._v("\n          "+e._s(e.getWorkerTypeIcon(n.workerType))+"\n        ")]),e._v("\n        "+e._s(n.workerType)+"\n      ")]}},{key:"item.numberOfWorkers",fn:function(t){var n=t.item;return[r("span",{staticClass:"font-weight-medium"},[e._v(e._s(n.numberOfWorkers))])]}},{key:"item.pmCharge",fn:function(t){var n,o=t.item;return[r("span",{staticClass:"font-weight-medium"},[e._v("\n          "+e._s(e.formatCurrency(o.pmCharge,null===(n=o.currency)||void 0===n?void 0:n.code))+"\n        ")])]}},{key:"item.actions",fn:function(t){var o=t.item;return[r("div",{staticClass:"action-buttons-inline"},[r(n.a,{attrs:{icon:"",small:"",color:"primary"},on:{click:function(t){return e.editMOU(o)}}},[r(f.a,{attrs:{small:""}},[e._v("mdi-pencil")])],1),e._v(" "),r(n.a,{attrs:{icon:"",small:"",color:"error"},on:{click:function(t){return e.deleteMOU(o)}}},[r(f.a,{attrs:{small:""}},[e._v("mdi-delete")])],1)],1)]}}])})],1),e._v(" "),r("MouMaintenanceDialog",{attrs:{"editing-item":e.editingItem},on:{saved:e.onMOUSaved,cancelled:e.onDialogCancelled},model:{value:e.maintenanceDialog,callback:function(t){e.maintenanceDialog=t},expression:"maintenanceDialog"}}),e._v(" "),r(v.a,{attrs:{"max-width":"400"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r(o.a,[r(c.d,{staticClass:"headline"},[e._v("Confirm Delete")]),e._v(" "),r(c.c,[e._v('\n        Are you sure you want to delete MOU "'+e._s(null===(t=e.deletingItem)||void 0===t?void 0:t.jobCode)+'"?\n        This action cannot be undone.\n      ')]),e._v(" "),r(c.a,[r(x.a),e._v(" "),r(n.a,{attrs:{text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),e._v(" "),r(n.a,{attrs:{color:"error",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header-content"},[e("h1",{staticClass:"page-title"},[t._v("MOU Management")]),t._v(" "),e("p",{staticClass:"page-subtitle"},[t._v("Monitor and manage Memorandums of Understanding")])])}],!1,null,"63e49dd0",null);e.default=component.exports}}]);