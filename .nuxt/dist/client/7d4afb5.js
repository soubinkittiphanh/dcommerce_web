(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{936:function(e,t,n){"use strict";n.r(t);var r=n(788),o=n(317),c=n(314),l=n(18),d=n(781),m=n(760),f=n(787),v=n(783),y=n(113),O=(n(10),n(7),n(9),n(5),n(11),n(8),n(12),n(20)),h=n(3),w=(n(92),n(22),n(35),n(36)),j=n(40);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(h.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var A={props:{amount:{type:Number,require:!0,default:0},orderId:{type:Number,require:!0},dyCusId:{type:Number,require:!0}},computed:x(x({},Object(j.c)(["findAllPayment","findAllCurrency"])),{},{user:function(){return this.$auth.user||""},numberRule:function(){return[function(e){return null!=e&&""!==e||"Field is required"},function(e){return/^(\d+(\.\d{1,2})?)|(0(\.\d{1,2})?)$/.test(e)||"Rate must be a number with up to 2 decimal places"}]}}),data:function(){return{loaddata:[],isloading:!1,valid:!0,message:null,dialogMessage:!1,paymentAmount:this.amount,paymentId:1,codFee:0,rule:{idRules:[function(e){return!!e||"ໄອດີ is required"}],amountRules:[function(e){return!!e||"ກລນ ໃສ່ຈຳນວນ is required"}],amountCODRules:[function(e){return!!e||"ກລນ ໃສ່ຈຳນວນ is required"}],txnRule:[function(e){return!!e||"ກະລຸນາເລືອກ ລາຍການທຸລະກຳ is required"}]}}},created:function(){var e=this;return Object(O.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.codFee=0;case 1:case"end":return t.stop()}}),t)})))()},watch:{amount:function(e){console.log("New amount: ",e),this.paymentAmount=e}},methods:{submitDatas:function(){var e=this;return Object(O.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isloading=!0,console.log("AMOUNT: ",e.amount),e.$refs.form.validate()){t.next=6;break}return console.log("From validate is verified"),e.isloading=!1,t.abrupt("return");case 6:return n={paymentId:e.paymentId,codFee:e.codFee,customerId:e.dyCusId,amount:e.paymentAmount},r="api/sale/settle/".concat(e.orderId),console.log("PAYLOAD: ".concat(JSON.stringify(n))),t.next=11,e.$axios.put(r,n).then((function(t){return console.log("this.message",t.status),200==t.status?(console.log("RELOAD DATA TRIGGER"),e.refreshData(!0),Object(w.k)(e.$swal,"Succeed","Your transaction completed")):Object(w.j)(e.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ")})).catch((function(t){return Object(w.j)(e.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ ".concat(t))}));case 11:e.isloading=!1;case 12:case"end":return t.stop()}}),t)})))()},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},formatNum:function(e){return(new Intl.NumberFormat).format(e)},refreshData:function(e){this.$emit("reload",e)}}},I=n(32),component=Object(I.a)(A,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(m.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[t("loading-indicator")],1),e._v(" "),t(c.a,[t(l.d,[e._v("\n      ຊຳລະບິນ "+e._s(this.orderId||"null")+" ຍອດ:\n      "+e._s(e.formatNum(this.amount))+" ")]),e._v(" "),t(d.a,[t(f.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(r.a,{attrs:{"item-text":"payment_code","item-value":"id",items:e.findAllPayment,label:"ການຊຳລະ*"},model:{value:e.paymentId,callback:function(t){e.paymentId=t},expression:"paymentId"}}),e._v(" "),t(y.a,{attrs:{counter:10,rules:e.rule.amountRules,label:"ຈຳນວນເງິນ: "+e.formatNum(e.paymentAmount),required:""},model:{value:e.paymentAmount,callback:function(t){e.paymentAmount=t},expression:"paymentAmount"}}),e._v(" "),t(y.a,{attrs:{counter:10,rules:e.numberRule,label:"ຄ່າທຳນຽມ COD: "+e.formatNum(e.codFee),required:""},model:{value:e.codFee,callback:function(t){e.codFee=e._n(t)},expression:"codFee"}})],1),e._v(" "),e._t("default")],2),e._v(" "),t(l.a,[t(v.a),e._v(" "),t(o.a,{staticClass:"warning",attrs:{rounded:"",text:""},on:{click:function(t){return e.$emit("close-dialog")}}},[e._v("\n        ປິດ\n      ")]),e._v(" "),t(o.a,{staticClass:"primary",attrs:{rounded:"",text:""},on:{click:e.submitDatas}},[e._v(" ບັນທຶກ ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{LoadingIndicator:n(248).default})}}]);