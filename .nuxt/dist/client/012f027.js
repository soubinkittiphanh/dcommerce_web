(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{1304:function(t,e,r){var content=r(1640);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(15).default)("2a550722",content,!0,{sourceMap:!1})},1639:function(t,e,r){"use strict";r(1304)},1640:function(t,e,r){var n=r(14)((function(i){return i[1]}));n.push([t.i,".money-advance-report[data-v-3bbed50e]{padding:0}.report-header[data-v-3bbed50e]{align-items:center;background:#01532b;border-radius:8px;color:#fff;display:flex;justify-content:space-between;margin-bottom:24px;padding:24px}.title-section h1[data-v-3bbed50e]{font-size:28px;font-weight:600;margin:0}.title-section p[data-v-3bbed50e]{font-size:14px;margin:8px 0 0;opacity:.9}.action-buttons[data-v-3bbed50e]{display:flex;gap:16px}.custom-btn[data-v-3bbed50e]{border:1px solid #fff!important;color:#01532b!important;font-weight:500!important;text-transform:none!important}.custom-btn[data-v-3bbed50e]:hover{background-color:#fff!important;color:#01532b!important}.filter-card[data-v-3bbed50e]{background:#fff;border-radius:8px}.filter-title[data-v-3bbed50e]{background:#01532b;color:#fff;font-weight:600}.custom-primary-btn[data-v-3bbed50e]{background-color:#01532b!important;color:#fff!important;font-weight:500!important;text-transform:none!important}.custom-primary-btn[data-v-3bbed50e]:hover{background-color:#014025!important}.custom-secondary-btn[data-v-3bbed50e]{background-color:#6c757d!important;color:#fff!important;font-weight:500!important;text-transform:none!important}.custom-secondary-btn[data-v-3bbed50e]:hover{background-color:#5a6268!important}.summary-card[data-v-3bbed50e]{border-radius:8px;height:140px;overflow:hidden;position:relative}.summary-card[data-v-3bbed50e]:hover{transform:translateY(-2px)}.summary-icon[data-v-3bbed50e]{color:#fff;font-size:48px;margin-right:16px;opacity:.9}.custom-primary-bg[data-v-3bbed50e]{background-color:#01532b!important}.summary-details .summary-title[data-v-3bbed50e]{color:#fff;font-size:16px;font-weight:600;margin:0}.summary-details .summary-subtitle[data-v-3bbed50e]{color:hsla(0,0%,100%,.9);font-size:12px;margin:4px 0}.summary-details .summary-amount[data-v-3bbed50e]{color:#fff;font-size:24px;font-weight:700;margin:8px 0 0}.summary-lcy[data-v-3bbed50e]{color:hsla(0,0%,100%,.9);font-size:11px;margin-top:4px!important;opacity:.9}.advance-card[data-v-3bbed50e],.brought-forward-card[data-v-3bbed50e],.outstanding-card[data-v-3bbed50e],.settlement-card[data-v-3bbed50e]{background:#01532b;color:#fff}.additional-summary[data-v-3bbed50e]{margin-bottom:24px}.stats-card[data-v-3bbed50e]{border-radius:8px;height:100px;transition:all .3s ease}.stats-card[data-v-3bbed50e]:hover{box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-2px)}.stats-number[data-v-3bbed50e]{color:#01532b;font-size:24px;font-weight:700;margin:0}.stats-label[data-v-3bbed50e]{color:#666;font-size:11px;line-height:1.2;margin:4px 0 0}.currency-breakdown-card[data-v-3bbed50e]{border-radius:8px;margin-bottom:24px}.currency-title[data-v-3bbed50e]{background:#01532b;color:#fff;font-weight:600}.currency-card[data-v-3bbed50e]{border-radius:8px;transition:all .3s ease}.currency-card[data-v-3bbed50e]:hover{border-color:#01532b;box-shadow:0 8px 24px rgba(1,83,43,.2);transform:translateY(-4px)}.currency-summary h4[data-v-3bbed50e]{border-bottom:1px solid #01532b;color:#01532b;font-weight:600;margin:0 0 12px;padding-bottom:8px}.currency-details p[data-v-3bbed50e]{font-size:13px;margin:4px 0}.currency-details strong[data-v-3bbed50e]{color:#01532b}.ministry-table-title[data-v-3bbed50e]{background:#01532b;color:#fff;font-weight:600}.ministry-table-header[data-v-3bbed50e]{background:#01532b!important}.ministry-table-footer[data-v-3bbed50e]{background:rgba(1,83,43,.8)!important;color:#fff}.custom-export-btn[data-v-3bbed50e]{border-color:#fff!important;color:#fff!important}.custom-export-btn[data-v-3bbed50e]:hover{background-color:#fff!important;color:#01532b!important}.bank-table-title[data-v-3bbed50e]{background:#01532b;color:#fff;font-weight:600}.bank-table-header[data-v-3bbed50e]{background:#01532b!important}.bank-table-footer[data-v-3bbed50e]{background:rgba(1,83,43,.8)!important;color:#fff}.table-card[data-v-3bbed50e]{border-radius:8px;margin-bottom:24px}.table-title[data-v-3bbed50e]{background:#01532b;color:#fff;font-weight:600}.search-field[data-v-3bbed50e]{max-width:300px}.search-field[data-v-3bbed50e] .v-icon,.search-field[data-v-3bbed50e] input{color:#fff!important}.report-table[data-v-3bbed50e]{background:#fff}.report-table[data-v-3bbed50e] thead th{background-color:#01532b!important;border-bottom:none!important;color:#fff!important;font-weight:600!important}.report-table[data-v-3bbed50e] tbody tr:hover{background-color:rgba(1,83,43,.1)!important}.date-cell[data-v-3bbed50e]{color:#01532b;font-family:monospace;font-size:13px}.amount-cell[data-v-3bbed50e]{font-weight:600;text-align:right}.amount-cell[data-v-3bbed50e],.exchange-rate-cell[data-v-3bbed50e]{display:block;font-family:monospace}.exchange-rate-cell[data-v-3bbed50e]{font-size:12px;text-align:center}.advance-amount[data-v-3bbed50e]{color:#01532b}.settlement-amount[data-v-3bbed50e]{color:#228b22}.outstanding-amount[data-v-3bbed50e]{color:#dc3545}.lcy-amount[data-v-3bbed50e]{color:#32cd32}.settlement-progress[data-v-3bbed50e]{width:100%}.progress-text[data-v-3bbed50e]{color:#fff;font-size:11px;font-weight:600;text-shadow:1px 1px 1px rgba(0,0,0,.5)}.ministry-cell[data-v-3bbed50e]{display:flex;flex-direction:column}.ministry-name[data-v-3bbed50e]{color:#01532b;font-size:13px;font-weight:600}.ministry-code[data-v-3bbed50e]{background:#f8f9fa;border-radius:4px;color:#666;display:inline-block;font-family:monospace;font-size:11px;margin-top:4px;padding:2px 6px;width:-moz-fit-content;width:fit-content}.dialog-header[data-v-3bbed50e]{background:#01532b!important;font-weight:600!important}.close-btn[data-v-3bbed50e],.dialog-header[data-v-3bbed50e]{color:#fff!important}.detail-item[data-v-3bbed50e]{font-size:14px;margin-bottom:12px}.detail-item strong[data-v-3bbed50e]{color:#01532b}.settlement-table[data-v-3bbed50e]{margin-top:16px}.settlement-table[data-v-3bbed50e] thead th{background-color:#01532b!important;color:#fff!important;font-weight:600!important}@media print{.action-buttons[data-v-3bbed50e],.filter-card[data-v-3bbed50e],.v-btn[data-v-3bbed50e]{display:none!important}.additional-summary[data-v-3bbed50e],.chart-card[data-v-3bbed50e],.currency-breakdown-card[data-v-3bbed50e],.summary-cards[data-v-3bbed50e]{page-break-inside:avoid}.report-header[data-v-3bbed50e]{background:#01532b!important;color:#fff!important;-webkit-print-color-adjust:exact}}@media (max-width:768px){.report-header[data-v-3bbed50e]{flex-direction:column;gap:16px;padding:16px;text-align:center}.title-section h1[data-v-3bbed50e]{font-size:24px}.action-buttons[data-v-3bbed50e]{flex-wrap:wrap;justify-content:center}.summary-icon[data-v-3bbed50e]{font-size:40px;margin-bottom:8px;margin-right:0}.summary-details .summary-amount[data-v-3bbed50e]{font-size:20px}.stats-card[data-v-3bbed50e]{height:80px}.stats-number[data-v-3bbed50e]{font-size:18px}.stats-label[data-v-3bbed50e]{font-size:10px}}.v-dialog .v-card-text[data-v-3bbed50e]{max-height:70vh;overflow-y:auto}.v-dialog .v-card-text[data-v-3bbed50e]::-webkit-scrollbar{width:6px}.v-dialog .v-card-text[data-v-3bbed50e]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.v-dialog .v-card-text[data-v-3bbed50e]::-webkit-scrollbar-thumb{background:#01532b;border-radius:3px}.v-dialog .v-card-text[data-v-3bbed50e]::-webkit-scrollbar-thumb:hover{background:#014025}",""]),n.locals={},t.exports=n},1870:function(t,e,r){"use strict";r.r(e);var n=r(321),o=r(318),c=r(19),l=r(322),d=r(797),m=r(806),v=r(771),f=r(317),y=r(168),h=r(319),x=r(796),C=r(66),k=r(794),_=r(112),A=(r(34),r(130),r(23)),w=r(32),D=r(36),R=r(17),S=(r(253),r(5),r(54),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(53),r(838),r(839),r(840),r(841),r(842),r(843),r(844),r(845),r(846),r(847),r(848),r(849),r(850),r(851),r(852),r(853),r(854),r(8),r(250),r(69),r(39),r(10),r(103),r(30),r(833),r(448),r(208),r(85),r(1738)),L={name:"MoneyAdvanceReport",data:function(){return{bankAccountSummaryReport:[],bankAccountTotals:{currencyTotals:{},totalLakEquivalent:0},bankAccountCurrencyList:[],loadingBankAccountReport:!1,ministrySummaryReport:[],ministryTotals:{currencyTotals:{},totalLakEquivalent:0},currencyList:[],loadingMinistryReport:!1,loading:!1,exporting:!1,loadingSettlements:!1,search:"",fromDateMenu:!1,toDateMenu:!1,detailsDialog:!1,settlementsDialog:!1,selectedItem:null,settlements:[],filters:{fromDate:null,toDate:null,ministryId:null,currencyId:null,status:null,makerId:null},ministries:[],currencies:[],users:[],statusOptions:[{text:"ລໍຖ້າອະນຸມັດ (Pending)",value:"pending"},{text:"ອະນຸມັດແລ້ວ (Approved)",value:"approved"},{text:"ຊຳລະແລ້ວ (Settled)",value:"settled"}],reportData:[],summaryData:{totalAdvances:0,totalSettlements:0,outstandingBalance:0,broughtForward:0,totalAdvancesLcy:0,totalSettlementsLcy:0,outstandingBalanceLcy:0,broughtForwardLcy:0,totalRecords:0,fullySettledCount:0,partiallySettledCount:0,unsettledCount:0,overdueCount:0,averageSettlementPercentage:0,currencyBreakdown:[]},ministryChart:null,trendChart:null,tableHeaders:[{text:"ວັນທີ",value:"bookingDate",width:"100px"},{text:"ຈຳນວນເງິນ",value:"amount",width:"120px"},{text:"ອັດຕາແລກປ່ຽນ",value:"exchangeRate",width:"100px"},{text:"ການຊຳລະ",value:"settlementAmount",width:"120px"},{text:"ຍອດຄ້າງ",value:"outstandingAmount",width:"120px"},{text:"% ຊຳລະ",value:"settlementPercentage",width:"100px"},{text:"ກະຊວງ",value:"ministry",width:"150px"},{text:"ຈຸດປະສົງ",value:"purpose",width:"200px"},{text:"ສະຖານະ",value:"status",width:"100px"},{text:"ຜູ້ລົງ",value:"maker.cus_name",width:"120px"},{text:"ຈັດການ",value:"actions",sortable:!1,width:"100px"}],settlementHeaders:[{text:"ວັນທີ",value:"bookingDate"},{text:"ຈຳນວນ",value:"amount"},{text:"ວິທີການ",value:"method"},{text:"ໝາຍເຫດ",value:"notes"},{text:"ຜູ້ດຳເນີນການ",value:"user.cus_name"}]}},created:function(){var t=this;return Object(R.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:return t.setDefaultDates(),e.next=5,t.applyFilters();case 5:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;this.$nextTick((function(){t.initializeCharts()}))},beforeDestroy:function(){this.ministryChart&&this.ministryChart.destroy(),this.trendChart&&this.trendChart.destroy()},methods:{processBankAccountReportData:function(t){if(!t||!t.data||!Array.isArray(t.data))return{bankAccountSummaryReport:[],bankAccountTotals:{currencyTotals:{},totalLakEquivalent:0},bankAccountCurrencyList:[]};var data=t.data,e=new Map,r=new Set,n={};data.forEach((function(t){var o=t.bankAccount,c=t.currency,l=t.settlementAmount||0,d=t.settlementLcyEquivalent||0,m=t.settlementCount||0,v=(null==o?void 0:o.id)||"NO_BANK_ACCOUNT",f=(null==o?void 0:o.accountNumber)||"N/A",y=(null==o?void 0:o.accountName)||"No Bank Account",h=(null==o?void 0:o.bankName)||"No Bank Specified",x=(null==o?void 0:o.accountType)||"N/A",C=(null==c?void 0:c.code)||"UNKNOWN";r.add(C),e.has(v)||e.set(v,{bankAccountId:v,accountNumber:f,accountName:y,bankName:h,accountType:x,settlementCount:0,amounts:{},totalLakEquivalent:0});var k=e.get(v);k.settlementCount+=m,k.totalLakEquivalent+=d,k.amounts[C]||(k.amounts[C]=0),k.amounts[C]+=l,n[C]||(n[C]=0),n[C]+=l}));var o=Array.from(e.values()).sort((function(a,b){if("NO_BANK_ACCOUNT"===a.bankAccountId)return 1;if("NO_BANK_ACCOUNT"===b.bankAccountId)return-1;var t=a.bankName.localeCompare(b.bankName);return 0!==t?t:a.accountNumber.localeCompare(b.accountNumber)})),c=o.reduce((function(t,e){return t+e.totalLakEquivalent}),0);return{bankAccountSummaryReport:o,bankAccountTotals:{currencyTotals:n,totalLakEquivalent:c},bankAccountCurrencyList:Array.from(r).sort()}},refreshBankAccountReport:function(){var t=this;return Object(R.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadingBankAccountReport=!0;try{r=t.processBankAccountReportData({data:t.reportData}),t.bankAccountSummaryReport=r.bankAccountSummaryReport,t.bankAccountTotals=r.bankAccountTotals,t.bankAccountCurrencyList=r.bankAccountCurrencyList,t.$toast.success("Bank account report refreshed successfully")}catch(e){console.error("Error refreshing bank account report:",e),t.$toast.error("Failed to refresh bank account report")}finally{t.loadingBankAccountReport=!1}case 2:case"end":return e.stop()}}),e)})))()},exportBankAccountReportToExcel:function(){var t=this;return Object(R.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bankAccountSummaryReport.length){e.next=3;break}return t.$toast.warning("No bank account data to export"),e.abrupt("return");case 3:return t.exporting=!0,e.prev=4,n=t.bankAccountSummaryReport.map((function(e,r){var n={"#":r+1,"Account Number":e.accountNumber,"Account Name":e.accountName,"Bank Name":e.bankName,"Account Type":e.accountType,Count:e.settlementCount};return t.bankAccountCurrencyList.forEach((function(r){var o;n[r]=t.formatAmount((null===(o=e.amounts)||void 0===o?void 0:o[r])||0)})),n["Total (LAK)"]=t.formatAmount(e.totalLakEquivalent||0),n})),o={"#":"","Account Number":"","Account Name":"","Bank Name":"ລວມ (Total)","Account Type":"",Count:t.bankAccountSummaryReport.reduce((function(t,b){return t+b.settlementCount}),0)},t.bankAccountCurrencyList.forEach((function(e){var r,n;o[e]=t.formatAmount((null===(r=t.bankAccountTotals)||void 0===r||null===(n=r.currencyTotals)||void 0===n?void 0:n[e])||0)})),o["Total (LAK)"]=t.formatAmount((null===(r=t.bankAccountTotals)||void 0===r?void 0:r.totalLakEquivalent)||0),n.push(o),e.next=12,t.exportToExcelBankAccount(n,"Bank_Account_Report");case 12:t.$toast.success("Bank account report exported successfully"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("Error exporting bank account report:",e.t0),t.$toast.error("Failed to export bank account report");case 19:return e.prev=19,t.exporting=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[4,15,19,22]])})))()},exportToExcelBankAccount:function(data,t){return Object(R.a)(regeneratorRuntime.mark((function e(){var r,n,o,link,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==data.length){e.next=2;break}return e.abrupt("return");case 2:r=Object.keys(data[0]),n=[r.join(",")].concat(Object(D.a)(data.map((function(t){return r.map((function(header){return'"'.concat(t[header]||"",'"')})).join(",")})))).join("\n"),o=new Blob([n],{type:"text/csv;charset=utf-8;"}),link=document.createElement("a"),c=URL.createObjectURL(o),link.setAttribute("href",c),link.setAttribute("download","".concat(t,"-").concat((new Date).toISOString().substr(0,10),".csv")),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link),URL.revokeObjectURL(c);case 14:case"end":return e.stop()}}),e)})))()},processMinistryReportData:function(t){if(!t||!t.data||!Array.isArray(t.data))return{ministrySummaryReport:[],ministryTotals:{currencyTotals:{},totalLakEquivalent:0},currencyList:[]};var data=t.data,e=new Map,r=new Set,n={};data.forEach((function(t){var o=t.ministry,c=t.currency,l=t.settlementAmount||0,d=t.settlementLcyEquivalent||0,m=t.settlementCount||0,v=(null==o?void 0:o.id)||"NO_MINISTRY",f=(null==o?void 0:o.ministryCode)||"N/A",y=(null==o?void 0:o.ministryName)||"No Ministry Assigned",h=(null==c?void 0:c.code)||"UNKNOWN";r.add(h),e.has(v)||e.set(v,{ministryId:v,ministryCode:f,ministryName:y,settlementCount:0,amounts:{},totalLakEquivalent:0});var x=e.get(v);x.settlementCount+=m,x.totalLakEquivalent+=d,x.amounts[h]||(x.amounts[h]=0),x.amounts[h]+=l,n[h]||(n[h]=0),n[h]+=l}));var o=Array.from(e.values()).sort((function(a,b){return"NO_MINISTRY"===a.ministryId?1:"NO_MINISTRY"===b.ministryId?-1:a.ministryCode.localeCompare(b.ministryCode)})),c=o.reduce((function(t,e){return t+e.totalLakEquivalent}),0);return{ministrySummaryReport:o,ministryTotals:{currencyTotals:n,totalLakEquivalent:c},currencyList:Array.from(r).sort()}},refreshMinistryReport:function(){var t=this;return Object(R.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadingMinistryReport=!0;try{r=t.processMinistryReportData({data:t.reportData}),t.ministrySummaryReport=r.ministrySummaryReport,t.ministryTotals=r.ministryTotals,t.currencyList=r.currencyList,t.$toast.success("Ministry report refreshed successfully")}catch(e){console.error("Error refreshing ministry report:",e),t.$toast.error("Failed to refresh ministry report")}finally{t.loadingMinistryReport=!1}case 2:case"end":return e.stop()}}),e)})))()},exportMinistryReportToExcel:function(){var t=this;return Object(R.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ministrySummaryReport.length){e.next=3;break}return t.$toast.warning("No data to export"),e.abrupt("return");case 3:return t.exporting=!0,e.prev=4,n=t.ministrySummaryReport.map((function(e,r){var n={"#":r+1,"Ministry Code":e.ministryCode,"Ministry Name":e.ministryName,Count:e.settlementCount};return t.currencyList.forEach((function(r){var o;n[r]=t.formatAmount((null===(o=e.amounts)||void 0===o?void 0:o[r])||0)})),n["Total (LAK)"]=t.formatAmount(e.totalLakEquivalent||0),n})),o={"#":"","Ministry Code":"","Ministry Name":"ລວມ (Total)",Count:t.ministrySummaryReport.reduce((function(t,e){return t+e.settlementCount}),0)},t.currencyList.forEach((function(e){var r,n;o[e]=t.formatAmount((null===(r=t.ministryTotals)||void 0===r||null===(n=r.currencyTotals)||void 0===n?void 0:n[e])||0)})),o["Total (LAK)"]=t.formatAmount((null===(r=t.ministryTotals)||void 0===r?void 0:r.totalLakEquivalent)||0),n.push(o),e.next=12,t.exportToExcelMinistry(n,"Ministry_Report");case 12:t.$toast.success("Ministry report exported successfully"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("Error exporting ministry report:",e.t0),t.$toast.error("Failed to export ministry report");case 19:return e.prev=19,t.exporting=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[4,15,19,22]])})))()},exportToExcelMinistry:function(data,t){return Object(R.a)(regeneratorRuntime.mark((function e(){var r,n,o,link,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==data.length){e.next=2;break}return e.abrupt("return");case 2:r=Object.keys(data[0]),n=[r.join(",")].concat(Object(D.a)(data.map((function(t){return r.map((function(header){return'"'.concat(t[header]||"",'"')})).join(",")})))).join("\n"),o=new Blob([n],{type:"text/csv;charset=utf-8;"}),link=document.createElement("a"),c=URL.createObjectURL(o),link.setAttribute("href",c),link.setAttribute("download","".concat(t,"-").concat((new Date).toISOString().substr(0,10),".csv")),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link),URL.revokeObjectURL(c);case 14:case"end":return e.stop()}}),e)})))()},loadInitialData:function(){var t=this;return Object(R.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([t.$axios.get("/api/ministries"),t.$axios.get("/api/currency/find"),t.$axios.get("/api/user/find")]);case 3:r=e.sent,n=Object(w.a)(r,3),o=n[0],c=n[1],l=n[2],t.ministries=o.data.data||o.data,t.currencies=c.data.data||c.data,t.users=l.data.data||l.data,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error loading initial data:",e.t0),t.$toast.error("Error loading initial data");case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},setDefaultDates:function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1);this.filters.fromDate=e.toISOString().substr(0,10),this.filters.toDate=t.toISOString().substr(0,10)},applyFilters:function(){var t=this;return Object(R.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,o=new URLSearchParams,Object.keys(t.filters).forEach((function(e){t.filters[e]&&o.append(e,t.filters[e])})),e.next=6,t.$axios.get("/api/money-advances/report?".concat(o));case 6:(c=e.sent).data.success?(t.reportData=c.data.data||[],t.summaryData=c.data.summary||{}):(t.reportData=c.data.data||c.data||[],t.summaryData=c.data.summary||t.calculateSummary()),console.log("=== DEBUG INFORMATION ==="),console.log("Full API Response:",c.data),console.log("reportData type:",Object(A.a)(t.reportData)),console.log("reportData is Array?",Array.isArray(t.reportData)),console.log("reportData length:",t.reportData.length),console.log("First reportData item:",t.reportData[0]),console.log("Summary data:",t.summaryData),console.log("========================"),0===t.reportData.length&&(null===(r=t.summaryData)||void 0===r||null===(n=r.currencyBreakdown)||void 0===n?void 0:n.length)>0?(console.log("Using summary-based processing"),t.processSummaryBasedReports()):(console.log("Using detailed data processing"),l=t.processMinistryReportData({data:t.reportData}),t.ministrySummaryReport=l.ministrySummaryReport,t.ministryTotals=l.ministryTotals,t.currencyList=l.currencyList,d=t.processBankAccountReportData({data:t.reportData}),t.bankAccountSummaryReport=d.bankAccountSummaryReport,t.bankAccountTotals=d.bankAccountTotals,t.bankAccountCurrencyList=d.bankAccountCurrencyList),t.$nextTick((function(){t.updateCharts()})),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(1),console.error("Error loading report data:",e.t0),t.$toast.error("Error loading report data");case 24:return e.prev=24,t.loading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,20,24,27]])})))()},processSummaryBasedReports:function(){var t=this;console.log("Processing summary-based reports with:",this.summaryData);var e=this.summaryData.currencyBreakdown||[];this.ministrySummaryReport=[{ministryId:"SUMMARY",ministryCode:"ALL",ministryName:"ສະຫຼຸບລວມ (All Ministries)",settlementCount:this.summaryData.totalRecords||0,amounts:{},totalLakEquivalent:this.summaryData.totalAdvancesLcy||0}],this.bankAccountSummaryReport=[{bankAccountId:"SUMMARY",accountNumber:"ALL",accountName:"ສະຫຼຸບລວມ (All Accounts)",bankName:"All Banks",accountType:"Summary",settlementCount:this.summaryData.totalRecords||0,amounts:{},totalLakEquivalent:this.summaryData.totalAdvancesLcy||0}];var r={},n=[];e.forEach((function(e){var o=e.currencyCode||"LAK";n.push(o),r[o]=e.totalAdvances||0,t.ministrySummaryReport[0].amounts[o]=e.totalAdvances||0,t.bankAccountSummaryReport[0].amounts[o]=e.totalAdvances||0})),this.ministryTotals={currencyTotals:r,totalLakEquivalent:this.summaryData.totalAdvancesLcy||0},this.bankAccountTotals={currencyTotals:r,totalLakEquivalent:this.summaryData.totalAdvancesLcy||0},this.currencyList=n.sort(),this.bankAccountCurrencyList=n.sort(),console.log("Summary-based reports created:",{ministry:this.ministrySummaryReport,bankAccount:this.bankAccountSummaryReport,currencies:n})},resetFilters:function(){this.filters={fromDate:null,toDate:null,ministryId:null,currencyId:null,status:null,makerId:null},this.setDefaultDates(),this.applyFilters()},calculateSummary:function(){var summary={totalAdvances:0,totalSettlements:0,outstandingBalance:0,totalRecords:this.reportData.length,fullySettledCount:0,partiallySettledCount:0,unsettledCount:0,overdueCount:0};return this.reportData.forEach((function(t){summary.totalAdvances+=parseFloat(t.amount||0),summary.totalSettlements+=parseFloat(t.settlementAmount||0),summary.outstandingBalance+=parseFloat(t.outstandingAmount||0),t.isFullySettled?summary.fullySettledCount++:t.settlementAmount>0?summary.partiallySettledCount++:summary.unsettledCount++,t.daysOverdue>0&&summary.overdueCount++})),summary},initializeCharts:function(){this.$refs.ministryChart&&this.$refs.trendChart&&(this.createMinistryChart(),this.createTrendChart())},createMinistryChart:function(){var t=this.$refs.ministryChart.getContext("2d");this.ministryChart&&this.ministryChart.destroy(),this.ministryChart=new S.default(t,{type:"doughnut",data:{labels:[],datasets:[{data:[],backgroundColor:["#01532B","#228B22","#32CD32","#006400","#9ACD32","#00FA9A","#66CDAA","#20B2AA"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})},createTrendChart:function(){var t=this.$refs.trendChart.getContext("2d");this.trendChart&&this.trendChart.destroy(),this.trendChart=new S.default(t,{type:"line",data:{labels:[],datasets:[{label:"ລາຍຈ່າຍລ່ວງໜ້າ",data:[],borderColor:"#01532B",backgroundColor:"rgba(1, 83, 43, 0.1)",tension:.1},{label:"ການຊຳລະ",data:[],borderColor:"#228B22",backgroundColor:"rgba(34, 139, 34, 0.1)",tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})},updateCharts:function(){if(this.ministryChart&&this.trendChart){var t=this.groupByMinistry();this.ministryChart.data.labels=t.labels,this.ministryChart.data.datasets[0].data=t.data,this.ministryChart.update();var e=this.groupByMonth();this.trendChart.data.labels=e.labels,this.trendChart.data.datasets[0].data=e.advances,this.trendChart.data.datasets[1].data=e.settlements,this.trendChart.update()}},groupByMinistry:function(){var t={};return this.reportData.forEach((function(e){var r,n=(null===(r=e.ministry)||void 0===r?void 0:r.ministryName)||"ບໍ່ລະບຸກະຊວງ";t[n]||(t[n]=0),t[n]+=parseFloat(e.lcyEquivalent||e.amount||0)})),{labels:Object.keys(t),data:Object.values(t)}},groupByMonth:function(){var t={};this.reportData.forEach((function(e){var r=new Date(e.bookingDate).toISOString().substr(0,7);t[r]||(t[r]={advances:0,settlements:0}),t[r].advances+=parseFloat(e.lcyEquivalent||e.amount||0),t[r].settlements+=parseFloat(e.settlementLcyEquivalent||e.settlementAmount||0)}));var e=Object.keys(t).sort();return{labels:e,advances:e.map((function(e){return t[e].advances})),settlements:e.map((function(e){return t[e].settlements}))}},viewDetails:function(t){var e=this;return Object(R.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.selectedItem=t,e.detailsDialog=!0;case 2:case"end":return r.stop()}}),r)})))()},viewSettlements:function(t){var e=this;return Object(R.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.loadingSettlements=!0,e.settlementsDialog=!0,r.prev=2,r.next=5,e.$axios.get("/api/money-advances/".concat(t.id,"/settlements"));case 5:n=r.sent,e.settlements=n.data.data||n.data||[],r.next=14;break;case 9:r.prev=9,r.t0=r.catch(2),console.error("Error loading settlements:",r.t0),e.$toast.error("Error loading settlements"),e.settlements=[];case 14:return r.prev=14,e.loadingSettlements=!1,r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[2,9,14,17]])})))()},exportToExcel:function(){var t=this;return Object(R.a)(regeneratorRuntime.mark((function e(){var r,n,o,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.exporting=!0,e.prev=1,r=new URLSearchParams,Object.keys(t.filters).forEach((function(e){t.filters[e]&&r.append(e,t.filters[e])})),e.next=6,t.$axios.get("/api/money-advances/report/export?".concat(r),{responseType:"blob"});case 6:n=e.sent,o=new Blob([n.data]),(link=document.createElement("a")).href=window.URL.createObjectURL(o),link.download="money-advance-report-".concat((new Date).toISOString().substr(0,10),".xlsx"),link.click(),window.URL.revokeObjectURL(link.href),t.$toast.success("Report exported successfully"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.error("Error exporting report:",e.t0),t.$toast.error("Error exporting report");case 20:return e.prev=20,t.exporting=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,16,20,23]])})))()},printReport:function(){window.print()},formatAmount:function(t){return t&&0!==t?new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t):"0"},formatCurrency:function(t){return t||0===t?new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t):"0.00"},formatExchangeRate:function(t){return t||0===t?new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}).format(t):"1.0000"},formatDate:function(t){return t?new Date(t).toLocaleDateString("lo-LA"):""},getProgressColor:function(t){var e=parseFloat(t||0);return e>=100?"#01532B":e>=50?"#228B22":"#32CD32"},getStatusColor:function(t){return{pending:"#32CD32",approved:"#228B22",settled:"#01532B"}[t]||"#666"},getStatusText:function(t){return{pending:"ລໍຖ້າ",approved:"ອະນຸມັດ",settled:"ຊຳລະແລ້ວ"}[t]||t},getMethodColor:function(t){return{cash:"#01532B",bank_transfer:"#228B22",deduction:"#32CD32"}[t]||"#01532B"},getMethodText:function(t){return{cash:"ເງິນສົດ",bank_transfer:"ໂອນເງິນ",deduction:"ຫັກລົບ"}[t]||t}}},N=(r(1639),r(31)),component=Object(N.a)(L,(function(){var t,e,r=this,A=r._self._c;return A("div",{staticClass:"money-advance-report"},[A("div",{staticClass:"report-header"},[r._m(0),r._v(" "),A("div",{staticClass:"action-buttons"},[A(n.a,{staticClass:"custom-btn export-btn",attrs:{loading:r.exporting},on:{click:r.exportToExcel}},[A("i",{staticClass:"fas fa-file-excel"}),r._v("\n        Export Excel\n      ")]),r._v(" "),A(n.a,{staticClass:"custom-btn print-btn",on:{click:r.printReport}},[A("i",{staticClass:"fas fa-print"}),r._v("\n        Print\n      ")])],1)]),r._v(" "),A(o.a,{staticClass:"filter-card mb-4",attrs:{elevation:"1"}},[A(c.d,{staticClass:"filter-title py-2"},[A(y.a,{staticClass:"mr-2",attrs:{small:""}},[r._v("mdi-filter")]),r._v("\n    ຕົວກອງ (Filters)\n  ")],1),r._v(" "),A(c.c,{staticClass:"pa-3"},[A(x.a,{attrs:{dense:""}},[A(d.a,{attrs:{cols:"6",sm:"3"}},[A(_.a,{attrs:{type:"date",label:"From",outlined:"",dense:"","hide-details":""},on:{change:r.applyFilters},model:{value:r.filters.fromDate,callback:function(t){r.$set(r.filters,"fromDate",t)},expression:"filters.fromDate"}})],1),r._v(" "),A(d.a,{attrs:{cols:"6",sm:"3"}},[A(_.a,{attrs:{type:"date",label:"To",outlined:"",dense:"","hide-details":""},on:{change:r.applyFilters},model:{value:r.filters.toDate,callback:function(t){r.$set(r.filters,"toDate",t)},expression:"filters.toDate"}})],1),r._v(" "),A(d.a,{attrs:{cols:"6",sm:"2"}},[A(C.a,{attrs:{items:r.ministries,"item-text":"ministryName","item-value":"id",label:"Ministry",clearable:"",outlined:"",dense:"","hide-details":""},on:{change:r.applyFilters},model:{value:r.filters.ministryId,callback:function(t){r.$set(r.filters,"ministryId",t)},expression:"filters.ministryId"}})],1),r._v(" "),A(d.a,{attrs:{cols:"6",sm:"2"}},[A(C.a,{attrs:{items:r.currencies,"item-text":"name","item-value":"id",label:"Currency",clearable:"",outlined:"",dense:"","hide-details":""},on:{change:r.applyFilters},model:{value:r.filters.currencyId,callback:function(t){r.$set(r.filters,"currencyId",t)},expression:"filters.currencyId"}})],1),r._v(" "),A(d.a,{staticClass:"d-flex align-center",attrs:{cols:"12",sm:"2"}},[A(n.a,{staticClass:"custom-primary-bg white--text mr-1",attrs:{small:"",loading:r.loading},on:{click:r.applyFilters}},[A(y.a,{attrs:{small:""}},[r._v("mdi-refresh")])],1),r._v(" "),A(n.a,{staticClass:"custom-secondary-btn",attrs:{small:""},on:{click:r.resetFilters}},[A(y.a,{attrs:{small:""}},[r._v("mdi-restore")])],1)],1)],1)],1)],1),r._v(" "),A(x.a,{staticClass:"mb-4",attrs:{dense:""}},[A(d.a,{attrs:{cols:"12",md:"3"}},[A(o.a,{staticClass:"summary-card advance-card",attrs:{elevation:"4"}},[A(c.c,{staticClass:"pa-4"},[A(x.a,{attrs:{align:"center"}},[A(d.a,{attrs:{cols:"3"}},[A("div",{staticClass:"summary-icon"},[A("i",{staticClass:"fas fa-cash-register"})])]),r._v(" "),A(d.a,{attrs:{cols:"9"}},[A("div",{staticClass:"summary-details"},[A("div",{staticClass:"summary-title"},[r._v("ລວມລາຍຈ່າຍ")]),r._v(" "),A("div",{staticClass:"summary-subtitle"},[r._v("Total Advances")]),r._v(" "),A("div",{staticClass:"summary-amount"},[r._v("\n                  "+r._s(r.formatCurrency(r.summaryData.totalAdvances))+"\n                ")]),r._v(" "),r.summaryData.totalAdvancesLcy?A("div",{staticClass:"summary-lcy"},[r._v("\n                  LCY: "+r._s(r.formatCurrency(r.summaryData.totalAdvancesLcy))+"\n                ")]):r._e()])])],1)],1)],1)],1),r._v(" "),A(d.a,{attrs:{cols:"12",md:"3"}},[A(o.a,{staticClass:"summary-card settlement-card",attrs:{elevation:"4"}},[A(c.c,{staticClass:"pa-4"},[A(x.a,{attrs:{align:"center"}},[A(d.a,{attrs:{cols:"3"}},[A("div",{staticClass:"summary-icon"},[A("i",{staticClass:"fas fa-hand-holding-usd"})])]),r._v(" "),A(d.a,{attrs:{cols:"9"}},[A("div",{staticClass:"summary-details"},[A("div",{staticClass:"summary-title"},[r._v("ລວມການຊຳລະ")]),r._v(" "),A("div",{staticClass:"summary-subtitle"},[r._v("Total Settlements")]),r._v(" "),A("div",{staticClass:"summary-amount"},[r._v("\n                  "+r._s(r.formatCurrency(r.summaryData.totalSettlements))+"\n                ")]),r._v(" "),r.summaryData.totalSettlementsLcy?A("div",{staticClass:"summary-lcy"},[r._v("\n                  LCY: "+r._s(r.formatCurrency(r.summaryData.totalSettlementsLcy))+"\n                ")]):r._e()])])],1)],1)],1)],1),r._v(" "),A(d.a,{attrs:{cols:"12",md:"3"}},[A(o.a,{staticClass:"summary-card outstanding-card",attrs:{elevation:"4"}},[A(c.c,{staticClass:"pa-4"},[A(x.a,{attrs:{align:"center"}},[A(d.a,{attrs:{cols:"3"}},[A("div",{staticClass:"summary-icon"},[A("i",{staticClass:"fas fa-exclamation-triangle"})])]),r._v(" "),A(d.a,{attrs:{cols:"9"}},[A("div",{staticClass:"summary-details"},[A("div",{staticClass:"summary-title"},[r._v("ຍອດຄ້າງຊຳລະ")]),r._v(" "),A("div",{staticClass:"summary-subtitle"},[r._v("Outstanding Balance")]),r._v(" "),A("div",{staticClass:"summary-amount"},[r._v("\n                  "+r._s(r.formatCurrency(r.summaryData.outstandingBalance))+"\n                ")]),r._v(" "),r.summaryData.outstandingBalanceLcy?A("div",{staticClass:"summary-lcy"},[r._v("\n                  LCY: "+r._s(r.formatCurrency(r.summaryData.outstandingBalanceLcy))+"\n                ")]):r._e()])])],1)],1)],1)],1),r._v(" "),A(d.a,{attrs:{cols:"12",md:"3"}},[A(o.a,{staticClass:"summary-card brought-forward-card",attrs:{elevation:"4"}},[A(c.c,{staticClass:"pa-4"},[A(x.a,{attrs:{align:"center"}},[A(d.a,{attrs:{cols:"3"}},[A("div",{staticClass:"summary-icon"},[A("i",{staticClass:"fas fa-arrow-right"})])]),r._v(" "),A(d.a,{attrs:{cols:"9"}},[A("div",{staticClass:"summary-details"},[A("div",{staticClass:"summary-title"},[r._v("ຍອດຍົກມາ")]),r._v(" "),A("div",{staticClass:"summary-subtitle"},[r._v("Brought Forward")]),r._v(" "),A("div",{staticClass:"summary-amount"},[r._v("\n                  "+r._s(r.formatCurrency(r.summaryData.broughtForward))+"\n                ")]),r._v(" "),r.summaryData.broughtForwardLcy?A("div",{staticClass:"summary-lcy"},[r._v("\n                  LCY: "+r._s(r.formatCurrency(r.summaryData.broughtForwardLcy))+"\n                ")]):r._e()])])],1)],1)],1)],1)],1),r._v(" "),A(o.a,{staticClass:"table-card",attrs:{elevation:"2"}},[A(c.d,{staticClass:"table-title"},[A("i",{staticClass:"fas fa-table"}),r._v("\n      ລາຍລະອຽດລາຍງານ (Detailed Report)\n      "),A(k.a),r._v(" "),A(_.a,{staticClass:"search-field",attrs:{"append-icon":"mdi-magnify",label:"ຄົ້ນຫາ...","single-line":"","hide-details":"",outlined:"",dense:""},model:{value:r.search,callback:function(t){r.search=t},expression:"search"}})],1),r._v(" "),A(m.a,{staticClass:"report-table",attrs:{headers:r.tableHeaders,items:r.reportData,search:r.search,loading:r.loading,"items-per-page":25,"footer-props":{itemsPerPageOptions:[10,25,50,100],itemsPerPageText:"ແຖວຕໍ່ໜ້າ:"}},scopedSlots:r._u([{key:"item.bookingDate",fn:function(t){var e=t.item;return[A("span",{staticClass:"date-cell"},[r._v(r._s(r.formatDate(e.bookingDate)))])]}},{key:"item.amount",fn:function(t){var e=t.item;return[A("span",{staticClass:"amount-cell advance-amount"},[r._v("\n          "+r._s(r.formatCurrency(e.amount))+"\n        ")])]}},{key:"item.currencyCode",fn:function(t){var e=t.item;return[A(l.a,{attrs:{small:"",outlined:""}},[r._v("\n          "+r._s(e.currencyCode||"N/A")+"\n        ")])]}},{key:"item.exchangeRate",fn:function(t){var e=t.item;return[A("span",{staticClass:"exchange-rate-cell"},[r._v("\n          "+r._s(r.formatExchangeRate(e.exchangeRate))+"\n        ")])]}},{key:"item.lcyEquivalent",fn:function(t){var e=t.item;return[A("span",{staticClass:"amount-cell lcy-amount"},[r._v("\n          "+r._s(r.formatCurrency(e.lcyEquivalent))+"\n        ")])]}},{key:"item.settlementAmount",fn:function(t){var e=t.item;return[A("span",{staticClass:"amount-cell settlement-amount"},[r._v("\n          "+r._s(r.formatCurrency(e.settlementAmount||0))+"\n        ")])]}},{key:"item.outstandingAmount",fn:function(t){var e=t.item;return[A("span",{staticClass:"amount-cell outstanding-amount"},[r._v("\n          "+r._s(r.formatCurrency(e.outstandingAmount))+"\n        ")])]}},{key:"item.settlementPercentage",fn:function(t){var e=t.item;return[A("div",{staticClass:"settlement-progress"},[A(h.a,{attrs:{value:parseFloat(e.settlementPercentage),color:r.getProgressColor(e.settlementPercentage),height:"20",rounded:""}},[A("span",{staticClass:"progress-text"},[r._v(r._s(e.settlementPercentage)+"%")])])],1)]}},{key:"item.status",fn:function(t){var e=t.item;return[A(l.a,{attrs:{color:r.getStatusColor(e.status),"text-color":"white",small:""}},[r._v("\n          "+r._s(r.getStatusText(e.status))+"\n        ")])]}},{key:"item.daysOverdue",fn:function(t){var e=t.item;return[e.daysOverdue>0?A(l.a,{attrs:{color:"red","text-color":"white",small:""}},[r._v("\n          "+r._s(e.daysOverdue)+" ມື້\n        ")]):A("span",{staticClass:"text-success"},[r._v("-")])]}},{key:"item.ministry",fn:function(t){var e,n,o=t.item;return[A("div",{staticClass:"ministry-cell"},[A("span",{staticClass:"ministry-name"},[r._v(r._s((null===(e=o.ministry)||void 0===e?void 0:e.ministryName)||"N/A"))]),r._v(" "),A("span",{staticClass:"ministry-code"},[r._v(r._s((null===(n=o.ministry)||void 0===n?void 0:n.ministryCode)||""))])])]}},{key:"item.actions",fn:function(t){var e=t.item;return[A(n.a,{staticClass:"mr-2",attrs:{small:"",color:"#01532B"},on:{click:function(t){return r.viewDetails(e)}}},[A("i",{staticClass:"fas fa-eye"})]),r._v(" "),e.settlementCount>0?A(n.a,{attrs:{small:"",color:"#228B22"},on:{click:function(t){return r.viewSettlements(e)}}},[A("i",{staticClass:"fas fa-list"}),r._v("\n          "+r._s(e.settlementCount)+"\n        ")]):r._e()]}}])})],1),r._v(" "),A(v.a,{attrs:{"max-width":"900px"},model:{value:r.detailsDialog,callback:function(t){r.detailsDialog=t},expression:"detailsDialog"}},[A(o.a,[A(c.d,{staticClass:"dialog-header"},[A("i",{staticClass:"fas fa-info-circle"}),r._v("\n        ລາຍລະອຽດລາຍຈ່າຍ (Advance Details)\n        "),A(k.a),r._v(" "),A(n.a,{staticClass:"close-btn",attrs:{icon:""},on:{click:function(t){r.detailsDialog=!1}}},[A(y.a,[r._v("mdi-close")])],1)],1),r._v(" "),r.selectedItem?A(c.c,[A(x.a,[A(d.a,{attrs:{cols:"6"}},[A("div",{staticClass:"detail-item"},[A("strong",[r._v("ວັນທີບັນທຶກ:")]),r._v("\n              "+r._s(r.formatDate(r.selectedItem.bookingDate))+"\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ຈຳນວນເງິນ:")]),r._v("\n              "+r._s(r.formatCurrency(r.selectedItem.amount))+"\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ສະກຸນເງິນ:")]),r._v("\n              "+r._s(r.selectedItem.currencyCode||"N/A")+"\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ອັດຕາແລກປ່ຽນ:")]),r._v("\n              "+r._s(r.formatExchangeRate(r.selectedItem.exchangeRate))+"\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ເທົ່າກັບກີບ:")]),r._v("\n              "+r._s(r.formatCurrency(r.selectedItem.lcyEquivalent))+"\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ຈຸດປະສົງ:")]),r._v(" "+r._s(r.selectedItem.purpose||"N/A")+"\n            ")])]),r._v(" "),A(d.a,{attrs:{cols:"6"}},[A("div",{staticClass:"detail-item"},[A("strong",[r._v("ກະຊວງ:")]),r._v("\n              "+r._s((null===(t=r.selectedItem.ministry)||void 0===t?void 0:t.ministryName)||"N/A")+"\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ສະຖານະ:")]),r._v(" "),A(l.a,{attrs:{color:r.getStatusColor(r.selectedItem.status),"text-color":"white",small:""}},[r._v("\n                "+r._s(r.getStatusText(r.selectedItem.status))+"\n              ")])],1),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ຈຳນວນຊຳລະ:")]),r._v("\n              "+r._s(r.formatCurrency(r.selectedItem.settlementAmount))+"\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ຍອດຄ້າງ:")]),r._v("\n              "+r._s(r.formatCurrency(r.selectedItem.outstandingAmount))+"\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ເປີເຊັນຊຳລະ:")]),r._v("\n              "+r._s(r.selectedItem.settlementPercentage)+"%\n            ")]),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ຜູ້ລົງບັນທຶກ:")]),r._v("\n              "+r._s((null===(e=r.selectedItem.maker)||void 0===e?void 0:e.cus_name)||"N/A")+"\n            ")])])],1),r._v(" "),A(f.a,{staticClass:"my-4"}),r._v(" "),A("div",{staticClass:"detail-item"},[A("strong",[r._v("ໝາຍເຫດ:")]),r._v(" "+r._s(r.selectedItem.note||"ບໍ່ມີໝາຍເຫດ")+"\n        ")]),r._v(" "),r.selectedItem.daysOverdue>0?A("div",{staticClass:"detail-item"},[A("strong",[r._v("ເກີນກຳນົດ:")]),r._v(" "),A(l.a,{attrs:{color:"red","text-color":"white",small:""}},[r._v("\n            "+r._s(r.selectedItem.daysOverdue)+" ມື້\n          ")])],1):r._e()],1):r._e()],1)],1),r._v(" "),A(v.a,{attrs:{"max-width":"900px"},model:{value:r.settlementsDialog,callback:function(t){r.settlementsDialog=t},expression:"settlementsDialog"}},[A(o.a,[A(c.d,{staticClass:"dialog-header"},[A("i",{staticClass:"fas fa-receipt"}),r._v("\n        ປະຫວັດການຊຳລະ (Settlement History)\n        "),A(k.a),r._v(" "),A(n.a,{staticClass:"close-btn",attrs:{icon:""},on:{click:function(t){r.settlementsDialog=!1}}},[A(y.a,[r._v("mdi-close")])],1)],1),r._v(" "),A(c.c,[A(m.a,{staticClass:"settlement-table",attrs:{headers:r.settlementHeaders,items:r.settlements,loading:r.loadingSettlements,"hide-default-footer":""},scopedSlots:r._u([{key:"item.bookingDate",fn:function(t){var e=t.item;return[A("span",{staticClass:"date-cell"},[r._v(r._s(r.formatDate(e.bookingDate)))])]}},{key:"item.amount",fn:function(t){var e=t.item;return[A("span",{staticClass:"amount-cell settlement-amount"},[r._v("\n              "+r._s(r.formatCurrency(e.amount))+"\n            ")])]}},{key:"item.method",fn:function(t){var e=t.item;return[A(l.a,{attrs:{small:"",color:r.getMethodColor(e.method)}},[r._v("\n              "+r._s(r.getMethodText(e.method))+"\n            ")])]}}])})],1)],1)],1)],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"title-section"},[e("h1",{staticClass:"page-title"},[e("i",{staticClass:"fas fa-chart-line"}),t._v("\n        ລາຍງານ ລາຍຈ່າຍລ່ວງໜ້າ\n      ")]),t._v(" "),e("p",{staticClass:"page-subtitle"},[t._v("Money Advance Report")])])}],!1,null,"3bbed50e",null);e.default=component.exports}}]);