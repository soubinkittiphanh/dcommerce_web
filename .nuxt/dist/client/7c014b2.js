(window.webpackJsonp=window.webpackJsonp||[]).push([[212,89,90,91,103,104,105],{1232:function(t,e,n){var content=n(1469);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("2d03bb9a",content,!0,{sourceMap:!1})},1468:function(t,e,n){"use strict";n(1232)},1469:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,".money-advance-container[data-v-28c64cb6]{background-color:#fafafa;min-height:100vh;padding:8px}.header-card[data-v-28c64cb6]{border:1px solid #e2e8f0;margin-bottom:8px}.header-content[data-v-28c64cb6]{align-items:center;display:flex;justify-content:space-between}.header-title[data-v-28c64cb6]{color:#1a202c;font-size:18px;font-weight:600;margin:0}.header-actions[data-v-28c64cb6]{display:flex;gap:8px}.summary-grid[data-v-28c64cb6]{grid-gap:8px;display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}.summary-card[data-v-28c64cb6]{border:1px solid #e2e8f0;transition:transform .2s}.summary-card[data-v-28c64cb6]:hover{transform:translateY(-2px)}.summary-card.total-amount[data-v-28c64cb6]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff}.summary-card.pending[data-v-28c64cb6]{border-left:4px solid #f59e0b}.summary-card.approved[data-v-28c64cb6]{border-left:4px solid #10b981}.summary-card.settled[data-v-28c64cb6]{border-left:4px solid #3b82f6}.summary-layout[data-v-28c64cb6]{gap:12px}.summary-icon[data-v-28c64cb6],.summary-layout[data-v-28c64cb6]{align-items:center;display:flex}.summary-icon[data-v-28c64cb6]{background:#f3f4f6;border-radius:50%;flex-shrink:0;height:36px;justify-content:center;width:36px}.summary-icon.total[data-v-28c64cb6]{background:hsla(0,0%,100%,.2)}.summary-content[data-v-28c64cb6]{flex:1;min-width:0}.summary-amount[data-v-28c64cb6]{color:#1a202c;font-size:16px;font-weight:700;word-break:break-word}.total-amount .summary-amount[data-v-28c64cb6]{color:#fff}.summary-label[data-v-28c64cb6]{color:#718096;font-size:11px;margin-top:2px}.total-amount .summary-label[data-v-28c64cb6]{color:hsla(0,0%,100%,.9)}.filter-card[data-v-28c64cb6]{border:1px solid #e2e8f0}.filter-row[data-v-28c64cb6]{align-items:flex-end}.filter-actions[data-v-28c64cb6]{flex-direction:column}.action-buttons[data-v-28c64cb6],.filter-actions[data-v-28c64cb6]{display:flex;gap:4px}.table-card[data-v-28c64cb6]{border:1px solid #e2e8f0}.table-title[data-v-28c64cb6]{font-size:14px;font-weight:600}.table-controls[data-v-28c64cb6]{align-items:center;display:flex;gap:8px}.compact-table[data-v-28c64cb6]{font-size:12px}.compact-table[data-v-28c64cb6] th{background:#f8fafc!important;font-size:11px!important;font-weight:600!important;height:36px!important;padding:6px 8px!important}.compact-table[data-v-28c64cb6] td{border-bottom:1px solid #f1f5f9!important;height:40px!important;padding:4px 8px!important}.id-text[data-v-28c64cb6]{font-size:12px;font-weight:600}.maker-name[data-v-28c64cb6]{color:#2d3748;font-size:11px}.ministry-compact[data-v-28c64cb6]{display:flex;justify-content:center}.amount-column[data-v-28c64cb6]{align-items:flex-end;display:flex;flex-direction:column;text-align:right}.amount-value[data-v-28c64cb6]{color:#22c55e;font-size:12px;font-weight:600}.currency-code[data-v-28c64cb6]{color:#718096;font-size:9px;text-transform:uppercase}.purpose-text[data-v-28c64cb6]{color:#4a5568;font-size:11px}.bank-compact[data-v-28c64cb6]{font-size:10px}.bank-name[data-v-28c64cb6]{color:#2d3748;font-weight:600}.account-number[data-v-28c64cb6]{color:#718096;font-family:monospace}.date-compact[data-v-28c64cb6]{color:#4a5568;font-size:10px}.date-compact.overdue[data-v-28c64cb6]{color:#e53e3e;font-weight:600}.action-buttons-table[data-v-28c64cb6]{display:flex;gap:2px;justify-content:center}.no-data[data-v-28c64cb6]{color:#a0aec0;font-size:10px;font-style:italic}.no-data-card[data-v-28c64cb6]{border:1px solid #e2e8f0;margin-top:16px}.compact-pagination[data-v-28c64cb6]{align-items:center;background:#f8fafc;border-top:1px solid #e2e8f0;display:flex;justify-content:space-between;padding:8px 12px}.pagination-info[data-v-28c64cb6]{color:#718096;font-size:11px}.pagination-controls[data-v-28c64cb6]{align-items:center;display:flex;gap:4px}.page-numbers[data-v-28c64cb6]{display:flex;gap:2px;margin:0 8px}@media (max-width:960px){.header-content[data-v-28c64cb6]{align-items:stretch;flex-direction:column;gap:12px}.summary-grid[data-v-28c64cb6]{grid-template-columns:repeat(2,1fr)}.filter-row[data-v-28c64cb6]{gap:8px}.action-buttons-table[data-v-28c64cb6]{flex-direction:column;gap:1px}}@media (max-width:600px){.money-advance-container[data-v-28c64cb6]{padding:4px}.summary-grid[data-v-28c64cb6]{grid-template-columns:1fr}.compact-pagination[data-v-28c64cb6]{align-items:stretch;text-align:center}.compact-pagination[data-v-28c64cb6],.summary-layout[data-v-28c64cb6],.table-controls[data-v-28c64cb6]{flex-direction:column;gap:8px}.summary-layout[data-v-28c64cb6]{text-align:center}.summary-icon[data-v-28c64cb6]{margin:0 auto}}.v-card[data-v-28c64cb6]{box-shadow:0 1px 3px rgba(0,0,0,.1)!important}.v-btn--small[data-v-28c64cb6]{height:28px!important;min-width:60px!important}.v-btn--x-small[data-v-28c64cb6]{height:24px!important;min-width:24px!important}.v-chip--x-small[data-v-28c64cb6]{font-size:10px!important;height:18px!important;padding:0 6px!important}.v-select--dense .v-input__control[data-v-28c64cb6],.v-text-field--dense .v-input__control[data-v-28c64cb6]{min-height:32px!important}.v-text-field--dense .v-input__details[data-v-28c64cb6]{min-height:14px!important;padding-top:2px!important}.v-text-field--dense .v-messages[data-v-28c64cb6]{font-size:10px!important}",""]),o.locals={},t.exports=o},1792:function(t,e,n){"use strict";n.r(e);var o=n(321),r=n(318),c=n(19),l=n(322),d=n(796),f=n(805),m=n(1748),v=n(168),h=n(323),x=n(310),y=n(251),_=n(795),k=n(66),D=n(793),C=n(112),w=(n(35),n(64),n(5),n(10),n(7),n(12),n(8),n(13),n(3)),A=n(17),F=n(36),I=(n(85),n(30),n(39),n(337),n(38),n(52),n(54),n(53),n(34),n(130),n(9),n(62),n(832),n(448),n(76),n(974)),R=n(975),T=n(906),E=n(976),N=n(977),O=n(978),P=n(979),S=n(37);function z(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(e){Object(w.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L={name:"MoneyAdvanceManagement",components:{MoneyAdvanceDialog:I.default,MoneyAdvanceDetailDialog:R.default,VoucherPrintComponent:T.default,AuditTrailDialog:E.default,VersionComparisonDialog:N.default,AuditReportsDialog:O.default,SettlementDialog:P.default},middleware:"auths",data:function(){return{fromDateMenu:!1,toDateMenu:!1,pickerFromDate:null,pickerToDate:null,formattedFromDate:null,formattedToDate:null,statusFilter:"",searchTerm:"",searchTimeout:null,statusLabels:{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ",rejected:"ປະຕິເສດ",cancelled:"ຍົກເລີກ"},advances:[],users:[],currencies:[],ministries:[],bankAccounts:[],chartAccounts:[],dashboard:{counts:{total:0,pending:0,approved:0,settled:0},amounts:{total:0,pending:0}},pagination:{currentPage:1,totalPages:1,totalItems:0,itemsPerPage:25},filters:{status:"",makerId:"",ministryId:"",fromDate:"",toDate:""},loading:!1,saving:!1,formLoading:!1,detailLoading:!1,showDialog:!1,randomKeyMaintenanceDialog:1,showDetailDialog:!1,showPrintVoucher:!1,showSettlementDialog:!1,showAuditDialog:!1,showComparisonDialog:!1,showAuditReportsDialog:!1,selectedAdvance:null,advanceDetails:null,settlementData:null,selectedAdvanceForSettlement:null,selectedRecordForAudit:null,selectedRecordForComparison:null,comparisonData:null,isEdit:!1,canRestoreRecord:!1,form:{id:null,amount:"",method:"cash",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",reason:"",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""}}},computed:{user:function(){return this.$auth.user||""},compactHeaders:function(){return[{text:"ID",value:"id",width:"60px",sortable:!0},{text:"ຜູ້ລົງ",value:"maker",width:"100px",sortable:!0},{text:"ກົມ",value:"ministry",width:"80px",sortable:!1},{text:"ຈຳນວນ ຈ່າຍ",value:"amount",width:"100px",sortable:!0},{text:"ຈຳນວນ ຮັບ",value:"settleLine",width:"100px",sortable:!0},{text:"ຈຸດປະສົງ",value:"purpose",width:"150px",sortable:!0},{text:"ບັນຊີ",value:"bankAccount",width:"120px",sortable:!1},{text:"ສະຖານະ",value:"status",width:"80px",sortable:!0},{text:"ຄົບກຳໜົດ",value:"dueDate",width:"80px",sortable:!0},{text:"ວັນທີ",value:"bookingDate",width:"80px",sortable:!0},{text:"",value:"actions",width:"120px",sortable:!1}]},statusOptions:function(){return[{text:"ຄ້າງອະນຸມັດ",value:"pending"},{text:"ອະນຸມັດແລ້ວ",value:"approved"},{text:"ຊຳລະແລ້ວ",value:"settled"}]},userOptions:function(){return[{text:"ທຸກຜູ້ໃຊ້",value:""}].concat(Object(F.a)(this.users.map((function(t){return{text:t.cus_name,value:t.id}}))))},ministryOptions:function(){return[{text:"ທຸກກະຊວງ",value:""}].concat(Object(F.a)(this.ministries.map((function(t){return{text:"".concat(t.ministryCode," - ").concat(t.ministryName),value:t.id}}))))},perPageOptions:function(){return[10,25,50,100]},paginationPages:function(){for(var t=[],e=Math.max(1,this.pagination.currentPage-2),n=Math.min(this.pagination.totalPages,this.pagination.currentPage+2),i=e;i<=n;i++)t.push(i);return t},paginationInfo:function(){var t=(this.pagination.currentPage-1)*this.pagination.itemsPerPage+1,e=Math.min(t+this.pagination.itemsPerPage-1,this.pagination.totalItems);return{start:this.pagination.totalItems>0?t:0,end:e,total:this.pagination.totalItems}}},mounted:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:t.canRestoreRecord=t.checkRestorePermissions();case 3:case"end":return e.stop()}}),e)})))()},methods:{getSettleAmount:function(t){return t.reduce((function(t,e){return t+e.amount}),0)},formatDate:function(t){if(!t)return null;var e=new Date(t),n=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(n,"/").concat(o,"/").concat(r)},setFromDate:function(t){this.formattedFromDate=this.formatDate(t),this.pickerFromDate=t,this.filters.fromDate=t,this.fromDateMenu=!1},setToDate:function(t){this.formattedToDate=this.formatDate(t),this.pickerToDate=t,this.filters.toDate=t,this.toDateMenu=!1},clearFromDate:function(){this.formattedFromDate=null,this.pickerFromDate=null,this.filters.fromDate=""},clearToDate:function(){this.formattedToDate=null,this.pickerToDate=null,this.filters.toDate=""},formatCompactDate:function(t){return t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}):"-"},truncateText:function(text){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return text?text.length>t?text.substring(0,t)+"...":text:"N/A"},getStatusColor:function(t){return{pending:"warning",approved:"success",settled:"info",rejected:"error",cancelled:"grey"}[t]||"grey"},getStatusInLao:function(t){return this.statusLabels[t]||t.toUpperCase()},isOverdue:function(t){return!!t&&new Date(t)<new Date},checkRestorePermissions:function(){var t,e,n;return"admin"===(null===(t=this.user)||void 0===t?void 0:t.role)||(null===(e=this.user)||void 0===e||null===(n=e.permissions)||void 0===n?void 0:n.includes("restore_records"))},loadInitialData:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.fetchData(),t.fetchDashboard(),t.fetchUsers(),t.fetchCurrencies(),t.fetchMinistry(),t.fetchBankAccounts(),t.fetchChartAccounts()]);case 2:case"end":return e.stop()}}),e)})))()},fetchData:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=j({page:t.pagination.currentPage,limit:t.pagination.itemsPerPage},t.filters),t.statusFilter&&(n.status=t.statusFilter),t.searchTerm&&(n.search=t.searchTerm),e.next=7,t.$axios.get("/api/money-advances",{params:n});case 7:o=e.sent,data=o.data,t.advances=data.data.advances,t.pagination=data.data.pagination,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),t.showToast("Error fetching money advances","error"),console.error(e.t0);case 17:return e.prev=17,t.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))()},fetchDashboard:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},t.filters.makerId&&(n.makerId=t.filters.makerId),t.filters.ministryId&&(n.ministryId=t.filters.ministryId),t.filters.fromDate&&(n.fromDate=t.filters.fromDate),t.filters.toDate&&(n.toDate=t.filters.toDate),n.method="cash",e.next=9,t.$axios.get("/api/money-advances/dashboard",{params:n});case 9:o=e.sent,data=o.data,t.dashboard=data.data,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error fetching dashboard:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))()},fetchUsers:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/user/find");case 3:n=e.sent,(data=n.data)&&data.data?t.users=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.users=data:t.users=[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching users:",e.t0),t.users=[],t.showToast("Failed to load users","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchCurrencies:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/currency/find");case 3:n=e.sent,(data=n.data)&&data.data?t.currencies=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.currencies=data:t.currencies=[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching currencies:",e.t0),t.currencies=[],t.showToast("Failed to load currencies","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchMinistry:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/ministries");case 3:(n=e.sent).data&&n.data.success?t.ministries=n.data.data||[]:t.ministries=[],e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching ministries:",e.t0),t.ministries=[],t.showToast("Failed to load ministries","error");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))()},fetchBankAccounts:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/bank_account/find");case 3:n=e.sent,(data=n.data)&&data.data?t.bankAccounts=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.bankAccounts=data:t.bankAccounts=[],t.bankAccounts=t.bankAccounts.filter((function(t){return t.isActive})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching bank accounts:",e.t0),t.bankAccounts=[];case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},fetchChartAccounts:function(){var t=this;return Object(A.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/accountChart/find");case 3:n=e.sent,(data=n.data)&&data.data?t.chartAccounts=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.chartAccounts=data:t.chartAccounts=[],e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching chart accounts:",e.t0),t.chartAccounts=[];case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onFilterChange:function(){this.filters.status=this.statusFilter,this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},applyFilters:function(){this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},resetFilters:function(){this.filters={status:"",makerId:"",ministryId:"",fromDate:"",toDate:""},this.searchTerm="",this.statusFilter="",this.clearFromDate(),this.clearToDate(),this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},debounceSearch:function(){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.pagination.currentPage=1,t.fetchData()}),500)},openDialog:function(){var t=arguments,e=this;return Object(A.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:null,e.isEdit=!!o,e.showDialog=!0,e.randomKeyMaintenanceDialog="dialog-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random())),0!==e.users.length&&0!==e.currencies.length&&0!==e.ministries.length){n.next=9;break}return e.formLoading=!0,n.next=8,Promise.all([0===e.users.length?e.fetchUsers():Promise.resolve(),0===e.currencies.length?e.fetchCurrencies():Promise.resolve(),0===e.ministries.length?e.fetchMinistry():Promise.resolve(),0===e.bankAccounts.length?e.fetchBankAccounts():Promise.resolve()]);case 8:e.formLoading=!1;case 9:o?e.form={id:o.id,amount:o.amount,method:o.method,purpose:o.purpose||"",note:o.note||"",makerId:o.makerId,currencyId:o.currencyId,dueDate:o.dueDate?o.dueDate.split("T")[0]:"",bankAccountId:o.bankAccountId||"",ministryId:o.ministryId||"",bookingDate:o.bookingDate||"",externalBookingDate:o.externalBookingDate||"",exchangeRate:o.exchangeRate||"",reason:"",externalRef:o.externalRef||"",externalRefNo:o.externalRefNo||"",chequeNo:o.chequeNo||"",receiveName:o.receiveName||"",receiveIDNO:o.receiveIDNO||""}:(e.resetForm(),e.currencies.length>0&&(r=e.currencies.find((function(t){return"USD"===t.code}))||e.currencies[0],e.form.currencyId=r.id));case 10:case"end":return n.stop()}}),n)})))()},closeDialog:function(){this.showDialog=!1,this.resetForm()},resetForm:function(){var t=(new Date).toISOString().split("T")[0];this.form={id:null,amount:"",purpose:"",note:"",makerId:this.user.id,currencyId:"",dueDate:"",bankAccountId:"",exchangeRate:1,ministryId:"",bookingDate:t,reason:"",method:"cash",externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:""},this.isEdit=!1},saveAdvance:function(t){var e=this;return Object(A.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,d,f,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.saving=!0,n.prev=1,r={reason:t.reason||(e.isEdit?"Updated record":"Created new record"),userId:null===(o=e.user)||void 0===o?void 0:o.id},!e.isEdit||!t.id){n.next=10;break}return t.updateUserId=e.user.id,n.next=7,e.$axios.put("/api/money-advances/".concat(t.id),j(j({},t),r));case 7:e.showToast("Money advance updated successfully","success"),n.next=18;break;case 10:return n.next=12,e.$axios.post("/api/money-advances",j(j({},t),r));case 12:c=n.sent,l=c.data.data,e.form={id:l.id,amount:l.amount,method:l.method||"cash",purpose:l.purpose||"",note:l.note||"",makerId:l.makerId,currencyId:l.currencyId,dueDate:l.dueDate?l.dueDate.split("T")[0]:"",bankAccountId:l.bankAccountId||"",ministryId:l.ministryId||"",bookingDate:l.bookingDate||"",exchangeRate:l.exchangeRate||"",reason:"",externalRef:l.externalRef||"",externalRefNo:l.externalRefNo||"",chequeNo:l.chequeNo||"",receiveName:l.receiveName||"",receiveIDNO:l.receiveIDNO||""},e.isEdit=!0,e.$nextTick((function(){e.randomKeyMaintenanceDialog="dialog-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random()))})),e.showToast("Money advance created successfully","success");case 18:return n.next=20,e.fetchData();case 20:return n.next=22,e.fetchDashboard();case 22:n.next=29;break;case 24:n.prev=24,n.t0=n.catch(1),m=(null===(d=n.t0.response)||void 0===d||null===(f=d.data)||void 0===f?void 0:f.message)||"Error saving money advance",e.showToast(m,"error"),console.error("Save error:",n.t0);case 29:return n.prev=29,e.saving=!1,n.finish(29);case 32:case"end":return n.stop()}}),n,null,[[1,24,29,32]])})))()},approveAdvance:function(t){var e=this;return Object(A.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(S.i)(e.$swal,"ຢືນຢັນ ການອະນຸມັດ","ທ່ານແນ່ໃຈທີ່ຈະອະນຸມັດລາຍການນີ້ແມ່ນບໍ່ ".concat(e.formatCurrency(t.amount),"?"),"question","ບໍ່","ຕົກລົງ");case 3:if(!n.sent.isConfirmed){n.next=12;break}return n.next=7,e.$axios.put("/api/money-advances/".concat(t.id,"/approve"),{checkerId:e.user.id,reason:"Approved by manager"});case 7:return e.showToast("Money advance approved successfully","success"),n.next=10,e.fetchData();case 10:return n.next=12,e.fetchDashboard();case 12:n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),console.error("Error approving:",n.t0),e.showToast("Error approving money advance","error");case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))()},viewDetails:function(t){var e=this;return Object(A.a)(regeneratorRuntime.mark((function n(){var o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.selectedAdvance=t,e.showDetailDialog=!0,n.prev=2,e.detailLoading=!0,n.next=6,e.$axios.get("/api/money-advances/".concat(t.id));case 6:o=n.sent,data=o.data,e.advanceDetails=data.data,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),console.error("Error fetching advance details:",n.t0),e.showToast("Error loading advance details","error");case 15:return n.prev=15,e.detailLoading=!1,n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,11,15,18]])})))()},closeDetailDialog:function(){this.showDetailDialog=!1,this.selectedAdvance=null,this.advanceDetails=null},createSettlement:function(t){var e=this;return Object(A.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{e.selectedAdvanceForSettlement=t,o=(new Date).toISOString().split("T")[0],e.settlementData={id:null,amount:t.amount,currencyId:t.currencyId,userId:t.makerId,ministryId:t.ministryId||"",bankAccountId:t.bankAccountId||"",chartAccountId:"",method:"",settlementDate:o,bookingDate:o,notes:"ຊຳລະຄືນ ຈາກ ລາຍຈ່າຍເລກທີ #".concat(t.id," - ").concat(t.purpose||"ບໍ່ໄດ້ລະບຸເນື້ອໃນ"),moneyAdvanceId:t.id,linkToAdvance:"true"},e.showSettlementDialog=!0}catch(t){console.error("Error preparing settlement:",t),e.showToast("Error preparing settlement","error")}case 1:case"end":return n.stop()}}),n)})))()},closeSettlementDialog:function(){this.showSettlementDialog=!1,this.settlementData=null,this.selectedAdvanceForSettlement=null},saveSettlement:function(t){var e=this;return Object(A.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,d,f,m,v,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c={reason:"Settlement created for Money Advance #".concat(null===(o=e.selectedAdvanceForSettlement)||void 0===o?void 0:o.id),userId:null===(r=e.user)||void 0===r?void 0:r.id},l=j(j({},t),{},{bookingDate:t.bookingDate||t.settlementDate},c),n.next=5,e.$axios.post("/api/settlements",l);case 5:if(!(d=n.sent).data||!d.data.success){n.next=15;break}return e.showToast("Settlement created successfully","success"),e.closeSettlementDialog(),n.next=11,e.fetchData();case 11:return n.next=13,e.fetchDashboard();case 13:n.next=16;break;case 15:throw new Error((null===(f=d.data)||void 0===f?void 0:f.message)||"Failed to create settlement");case 16:n.next=23;break;case 18:n.prev=18,n.t0=n.catch(0),console.error("Error saving settlement:",n.t0),h=(null===(m=n.t0.response)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.message)||"Error creating settlement",e.showToast(h,"error");case 23:case"end":return n.stop()}}),n,null,[[0,18]])})))()},printAdvanceDetails:function(t){var e=this;this.showPrintVoucher=!1,this.$nextTick((function(){e.advanceDetails=t,e.showPrintVoucher=!0}))},closePrintVoucher:function(){var t=this;this.showPrintVoucher=!1,setTimeout((function(){t.advanceDetails=null}),100)},viewAuditTrail:function(t){this.selectedRecordForAudit=t,this.showAuditDialog=!0},closeAuditDialog:function(){var t=this;this.showAuditDialog=!1,setTimeout((function(){t.selectedRecordForAudit=null}),300)},handleVersionComparison:function(t){this.selectedRecordForComparison=this.selectedRecordForAudit,this.comparisonData=t,this.showAuditDialog=!1,this.showComparisonDialog=!0},closeComparisonDialog:function(){var t=this;this.showComparisonDialog=!1,setTimeout((function(){t.selectedRecordForComparison=null,t.comparisonData=null}),300)},handleVersionRestore:function(t){var e=this;return Object(A.a)(regeneratorRuntime.mark((function n(){var o,r,c,l,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(S.i)(e.$swal,"ຢືນຢັນການກັບຄືນ","ທ່ານແນ່ໃຈທີ່ຈະກັບຄືນໄປຫາເວີຊັ່ນນີ້ບໍ່?","question","ຍົກເລີກ","ກັບຄືນ");case 3:if(!n.sent.isConfirmed){n.next=19;break}return c=(null===(o=e.selectedRecordForAudit)||void 0===o?void 0:o.id)||(null===(r=e.selectedRecordForComparison)||void 0===r?void 0:r.id),n.next=8,e.$axios.post("/api/money-advances/".concat(c,"/restore"),{targetVersion:t.version,reason:"Restored via audit trail"});case 8:if(l=n.sent,!(data=l.data).success){n.next=18;break}return e.showToast("ກັບຄືນເວີຊັ່ນສຳເລັດ","success"),e.closeAuditDialog(),e.closeComparisonDialog(),n.next=16,e.fetchData();case 16:n.next=19;break;case 18:throw new Error(data.message||"Restore failed");case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(0),console.error("Error restoring version:",n.t0),e.showToast("ເກີດຂໍ້ຜິດພາດໃນການກັບຄືນ","error");case 25:case"end":return n.stop()}}),n,null,[[0,21]])})))()},handleViewFullChanges:function(t){console.log("View full changes for:",t),this.showToast("ຟັງຊັ່ນນີ້ຈະຖືກພັດທະນາໃນອະນາຄົດ","info")},openAuditReports:function(){this.showAuditReportsDialog=!0},closeAuditReportsDialog:function(){this.showAuditReportsDialog=!1},downloadAdvanceDetails:function(){var details=this.formatAdvanceForDownload(),t=new Blob([details],{type:"text/plain"}),e=window.URL.createObjectURL(t),a=document.createElement("a");a.href=e,a.download="money-advance-".concat(this.advanceDetails.id,".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(e)},retryLoadDetails:function(){this.selectedAdvance&&this.viewDetails(this.selectedAdvance)},handleEditFromDetail:function(t){this.closeDetailDialog(),this.openDialog(t)},handleApproveFromDetail:function(t){this.closeDetailDialog(),this.approveAdvance(t)},handleCreateSettlement:function(t){this.closeDetailDialog(),this.createSettlement(t)},formatAdvanceForDownload:function(){var t,e,n,o=this.advanceDetails;return"\nMONEY ADVANCE DETAILS\n=====================\n\nID: ".concat(o.id,"\nMaker: ").concat((null===(t=o.maker)||void 0===t?void 0:t.cus_name)||"N/A","\nMinistry: ").concat((null===(e=o.ministry)||void 0===e?void 0:e.name)||"N/A","\nAmount: ").concat(this.formatCurrency(o.amount)," ").concat((null===(n=o.currency)||void 0===n?void 0:n.code)||"","\nPurpose: ").concat(o.purpose||"N/A","\nStatus: ").concat(o.status.toUpperCase(),"\nDue Date: ").concat(this.formatDate(o.dueDate),"\nCreated Date: ").concat(this.formatDate(o.createdAt),"\nUpdated Date: ").concat(this.formatDate(o.updatedAt),"\n\n").concat(o.bankAccount?"Bank Account: ".concat(o.bankAccount.bankName," - ").concat(o.bankAccount.accountNumber):"No Bank Account","\n\nNotes: ").concat(o.note||"No notes provided","\n\n").concat(o.checker?"Checker: ".concat(o.checker.cus_name):"","\n").concat(o.approvedAt?"Approved At: ".concat(this.formatDate(o.approvedAt)):"","\n").concat(o.settledAt?"Settled At: ".concat(this.formatDate(o.settledAt)):"","\n\nGenerated on: ").concat((new Date).toLocaleString(),"\n      ").trim()},changePage:function(t){t>=1&&t<=this.pagination.totalPages&&(this.pagination.currentPage=t,this.fetchData())},updateSelectedCurrency:function(t){console.log("Currency changed to:",t)},updateSelectedBankAccount:function(t){console.log("Bank account changed to:",t)},updateSelectedMinistry:function(t){console.log("Ministry changed to:",t)},formatCurrency:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LAK";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:"LAK"===e?0:2,maximumFractionDigits:"LAK"===e?0:2}).format(t||0)}catch(n){return"".concat(this.formatNumber(t)," ").concat(e)}},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[e](t):this.$notify?this.$notify({title:"error"===e?"Error":"Success",message:t,type:"error"===e?"error":"success"}):console.log("".concat(e.toUpperCase(),": ").concat(t))}}},M=L,V=(n(1468),n(31)),component=Object(V.a)(M,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"money-advance-container"},[e(r.a,{staticClass:"header-card",attrs:{flat:""}},[e(c.c,{staticClass:"py-3"},[e("div",{staticClass:"header-content"},[e("h1",{staticClass:"header-title"},[t._v("ອອກລາຍຈ່າຍ ເງິນສົດ")]),t._v(" "),e("div",{staticClass:"header-actions"},[e(o.a,{attrs:{color:"secondary",small:"",outlined:""},on:{click:t.openAuditReports}},[e(v.a,{attrs:{left:"",small:""}},[t._v("mdi-chart-line")]),t._v("\n            ລາຍງານ\n          ")],1),t._v(" "),e(o.a,{attrs:{color:"primary",small:""},on:{click:function(e){return t.openDialog()}}},[e(v.a,{attrs:{left:"",small:""}},[t._v("mdi-plus")]),t._v("\n            ລົງລາຍຈ່າຍ\n          ")],1)],1)])])],1),t._v(" "),e("div",{staticClass:"summary-grid mb-2"},[e(r.a,{staticClass:"summary-card"},[e(c.c,{staticClass:"pa-3"},[e("div",{staticClass:"summary-layout"},[e("div",{staticClass:"summary-icon total"},[e(v.a,{attrs:{color:"white"}},[t._v("mdi-cash-multiple")])],1),t._v(" "),e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-amount"},[t._v(t._s(t.dashboard.counts.total))]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ຈນ ລາຍຈ່າຍ")])])])])],1),t._v(" "),e(r.a,{staticClass:"summary-card settled"},[e(c.c,{staticClass:"pa-3"},[e("div",{staticClass:"summary-layout"},[e("div",{staticClass:"summary-icon"},[e(v.a,{attrs:{color:"info"}},[t._v("mdi-cash-check")])],1),t._v(" "),e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-amount"},[t._v(t._s(t.dashboard.counts.settled))]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ຊຳລະແລ້ວ")])])])])],1),t._v(" "),e(r.a,{staticClass:"summary-card total-amount"},[e(c.c,{staticClass:"pa-3"},[e("div",{staticClass:"summary-layout"},[e("div",{staticClass:"summary-icon total"},[e(v.a,{attrs:{color:"white"}},[t._v("mdi-calculator")])],1),t._v(" "),e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-amount"},[t._v("\n              "+t._s(t.formatCurrency(t.dashboard.amounts.total))+"\n            ")]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ລວມຍອດທັງໝົດ")])])])])],1)],1),t._v(" "),e(r.a,{staticClass:"filter-card mb-2",attrs:{flat:""}},[e(c.c,{staticClass:"py-2"},[e(_.a,{staticClass:"filter-row",attrs:{"no-gutters":"",align:"center"}},[e(d.a,{staticClass:"px-1",attrs:{cols:"12",sm:"6",md:"2"}},[e(h.a,{ref:"fromDateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(C.a,t._g(t._b({attrs:{label:"ວັນທີ່ເລີ່ມຕົ້ນ",hint:"DD/MM/YYYY",dense:"",outlined:"",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar"},on:{"click:clear":t.clearFromDate},model:{value:t.formattedFromDate,callback:function(e){t.formattedFromDate=e},expression:"formattedFromDate"}},"v-text-field",r,!1),o))]}}]),model:{value:t.fromDateMenu,callback:function(e){t.fromDateMenu=e},expression:"fromDateMenu"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:t.setFromDate},model:{value:t.pickerFromDate,callback:function(e){t.pickerFromDate=e},expression:"pickerFromDate"}})],1)],1),t._v(" "),e(d.a,{staticClass:"px-1",attrs:{cols:"12",sm:"6",md:"2"}},[e(h.a,{ref:"toDateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(C.a,t._g(t._b({attrs:{label:"ວັນທີ່ສິ້ນສຸດ",hint:"DD/MM/YYYY",dense:"",outlined:"",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-calendar"},on:{"click:clear":t.clearToDate},model:{value:t.formattedToDate,callback:function(e){t.formattedToDate=e},expression:"formattedToDate"}},"v-text-field",r,!1),o))]}}]),model:{value:t.toDateMenu,callback:function(e){t.toDateMenu=e},expression:"toDateMenu"}},[t._v(" "),e(m.a,{attrs:{"no-title":""},on:{input:t.setToDate},model:{value:t.pickerToDate,callback:function(e){t.pickerToDate=e},expression:"pickerToDate"}})],1)],1),t._v(" "),e(d.a,{staticClass:"px-1",attrs:{cols:"12",sm:"6",md:"2"}},[e(k.a,{attrs:{items:t.userOptions,label:"ຜູ້ໃຊ້",dense:"",outlined:"",clearable:"","hide-details":"auto"},on:{change:t.fetchData},model:{value:t.filters.makerId,callback:function(e){t.$set(t.filters,"makerId",e)},expression:"filters.makerId"}})],1),t._v(" "),e(d.a,{staticClass:"px-1",attrs:{cols:"12",sm:"6",md:"2"}},[e(k.a,{attrs:{items:t.ministryOptions,label:"ກະຊວງ",dense:"",outlined:"",clearable:"","hide-details":"auto"},on:{change:t.fetchData},model:{value:t.filters.ministryId,callback:function(e){t.$set(t.filters,"ministryId",e)},expression:"filters.ministryId"}})],1),t._v(" "),e(d.a,{staticClass:"px-1",attrs:{cols:"12",sm:"6",md:"2"}},[e("div",{staticClass:"filter-actions"},[e(C.a,{staticStyle:{"margin-bottom":"4px"},attrs:{label:"ຄົ້ນຫາ",dense:"",outlined:"",clearable:"","hide-details":"auto","prepend-inner-icon":"mdi-magnify"},on:{input:t.debounceSearch},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}})],1)]),t._v(" "),e(d.a,{staticClass:"px-1",attrs:{cols:"12",sm:"6",md:"2"}},[e("div",{staticClass:"action-buttons"},[e(o.a,{attrs:{color:"primary","x-small":"",loading:t.loading},on:{click:t.applyFilters}},[e(v.a,{attrs:{small:""}},[t._v("mdi-filter")])],1),t._v(" "),e(o.a,{attrs:{"x-small":"",outlined:"",disabled:t.loading},on:{click:t.resetFilters}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1)])],1)],1)],1),t._v(" "),e(r.a,{staticClass:"table-card",attrs:{flat:""}},[e(c.d,{staticClass:"py-2 px-3"},[e("span",{staticClass:"table-title"},[t._v("ລາຍການ ("+t._s(t.advances.length)+")")]),t._v(" "),e(D.a),t._v(" "),e("div",{staticClass:"table-controls"},[e(k.a,{staticStyle:{"max-width":"70px"},attrs:{items:t.perPageOptions,label:"ແຖວ",dense:"",outlined:"","hide-details":""},on:{input:function(e){return t.changePage(1)}},model:{value:t.pagination.itemsPerPage,callback:function(e){t.$set(t.pagination,"itemsPerPage",e)},expression:"pagination.itemsPerPage"}})],1)],1),t._v(" "),e(f.a,{staticClass:"compact-table",attrs:{headers:t.compactHeaders,items:t.advances,page:t.pagination.currentPage,"items-per-page":t.pagination.itemsPerPage,"server-items-length":t.pagination.totalItems,dense:"","hide-default-footer":"",loading:t.loading,"loading-text":"ກຳລັງໂຫຼດຂໍ້ມູນ..."},on:{"update:page":function(e){return t.$set(t.pagination,"currentPage",e)}},scopedSlots:t._u([{key:"item.id",fn:function(n){var o=n.item;return[e("span",{staticClass:"id-text"},[t._v(t._s(o.id))])]}},{key:"item.maker",fn:function(n){var o=n.item;return[e("span",{staticClass:"maker-name"},[t._v(t._s(o.maker?o.maker.cus_name:"N/A"))])]}},{key:"item.ministry",fn:function(n){var o=n.item;return[o.ministry?e("div",{staticClass:"ministry-compact"},[e(l.a,{attrs:{color:"info","x-small":"",outlined:""}},[t._v("\n            "+t._s(o.ministry.ministryCode||o.ministry.name)+"\n          ")])],1):e("span",{staticClass:"no-data"},[t._v("-")])]}},{key:"item.amount",fn:function(n){var o=n.item;return[e("div",{staticClass:"amount-column"},[e("span",{staticClass:"amount-value"},[t._v(t._s(t.formatCurrency(o.amount,o.currency.code)))]),t._v(" "),o.currency?e("span",{staticClass:"currency-code"},[t._v(t._s(o.currency.code))]):t._e()])]}},{key:"item.settleLine",fn:function(n){var o=n.item;return[e("div",{staticClass:"amount-column"},[e("span",{staticClass:"amount-value"},[t._v(t._s(t.formatCurrency(t.getSettleAmount(o.settlementLine||0),o.currency.code)))]),t._v(" "),o.currency?e("span",{staticClass:"currency-code"},[t._v(t._s(o.currency.code))]):t._e()])]}},{key:"item.purpose",fn:function(n){var o=n.item;return[e("span",{staticClass:"purpose-text",attrs:{title:o.purpose}},[t._v("\n          "+t._s(t.truncateText(o.purpose,20))+"\n        ")])]}},{key:"item.bankAccount",fn:function(n){var o=n.item;return[o.bankAccount?e("div",{staticClass:"bank-compact"},[e("div",{staticClass:"bank-name"},[t._v(t._s(o.bankAccount.bankName))]),t._v(" "),e("div",{staticClass:"account-number"},[t._v("\n            "+t._s(o.bankAccount.accountNumber)+"\n          ")])]):e("span",{staticClass:"no-data"},[t._v("-")])]}},{key:"item.status",fn:function(n){var o=n.item;return[e(l.a,{attrs:{color:t.getStatusColor(o.status),"x-small":"",outlined:""}},[t._v("\n          "+t._s(t.getStatusInLao(o.status))+"\n        ")])]}},{key:"item.dueDate",fn:function(n){var o=n.item;return[e("span",{staticClass:"date-compact",class:{overdue:t.isOverdue(o.dueDate)}},[t._v("\n          "+t._s(t.formatCompactDate(o.dueDate))+"\n        ")])]}},{key:"item.bookingDate",fn:function(n){var o=n.item;return[e("span",{staticClass:"date-compact"},[t._v(t._s(t.formatCompactDate(o.bookingDate)))])]}},{key:"item.actions",fn:function(n){var r=n.item;return[e("div",{staticClass:"action-buttons-table"},[e(o.a,{attrs:{icon:"","x-small":"",title:"ເບິ່ງລາຍລະອຽດ"},on:{click:function(e){return t.viewDetails(r)}}},[e(v.a,{attrs:{small:""}},[t._v("mdi-eye")])],1),t._v(" "),e(o.a,{attrs:{icon:"","x-small":"",title:"ແກ້ໄຂ"},on:{click:function(e){return t.openDialog(r)}}},[e(v.a,{attrs:{small:""}},[t._v("mdi-pencil")])],1),t._v(" "),"pending"===r.status?e(o.a,{attrs:{icon:"","x-small":"",color:"success",title:"ອະນຸມັດ"},on:{click:function(e){return t.approveAdvance(r)}}},[e(v.a,{attrs:{small:""}},[t._v("mdi-check")])],1):t._e(),t._v(" "),"approved"===r.status?e(o.a,{attrs:{icon:"","x-small":"",color:"success",title:"ສ້າງການຊຳລະ"},on:{click:function(e){return t.createSettlement(r)}}},[e(v.a,{attrs:{small:""}},[t._v("mdi-cash-register")])],1):t._e(),t._v(" "),e(o.a,{attrs:{icon:"","x-small":"",color:"error",title:"ພິມ"},on:{click:function(e){return t.printAdvanceDetails(r)}}},[e(v.a,{attrs:{small:""}},[t._v("mdi-printer")])],1)],1)]}}])}),t._v(" "),e("div",{staticClass:"compact-pagination"},[e("div",{staticClass:"pagination-info"},[t._v("\n        "+t._s(t.paginationInfo.start)+"-"+t._s(t.paginationInfo.end)+" ຈາກ\n        "+t._s(t.pagination.totalItems)+"\n      ")]),t._v(" "),e("div",{staticClass:"pagination-controls"},[e(o.a,{attrs:{icon:"",small:"",disabled:1===t.pagination.currentPage},on:{click:function(e){return t.changePage(t.pagination.currentPage-1)}}},[e(v.a,[t._v("mdi-chevron-left")])],1),t._v(" "),e("div",{staticClass:"page-numbers"},t._l(t.paginationPages,(function(n){return e(o.a,{key:n,attrs:{color:n===t.pagination.currentPage?"primary":"",outlined:n!==t.pagination.currentPage,"x-small":"","min-width":"30"},on:{click:function(e){return t.changePage(n)}}},[t._v("\n            "+t._s(n)+"\n          ")])})),1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",disabled:t.pagination.currentPage===t.pagination.totalPages},on:{click:function(e){return t.changePage(t.pagination.currentPage+1)}}},[e(v.a,[t._v("mdi-chevron-right")])],1)],1)])],1),t._v(" "),t.loading||0!==t.advances.length?t._e():e(r.a,{staticClass:"no-data-card",attrs:{flat:""}},[e(c.c,{staticClass:"text-center py-8"},[e(v.a,{attrs:{size:"64",color:"grey lighten-2"}},[t._v("mdi-inbox")]),t._v(" "),e("div",{staticClass:"mt-3 text-h6 grey--text"},[t._v("ບໍ່ມີຂໍ້ມູນ")]),t._v(" "),e("div",{staticClass:"grey--text"},[t._v("\n        ບໍ່ພົບລາຍການລາຍຈ່າຍທີ່ຕົງກັບເງື່ອນໄຂການຄົ້ນຫາ\n      ")])],1)],1),t._v(" "),e("money-advance-dialog",{key:t.randomKeyMaintenanceDialog,attrs:{show:t.showDialog,"is-edit":t.isEdit,"form-data":t.form,users:t.users,currencies:t.currencies,"bank-accounts":t.bankAccounts,ministries:t.ministries,"form-loading":t.formLoading,saving:t.saving},on:{close:t.closeDialog,print:function(e){t.printAdvanceDetails(t.advances.find((function(e){return e.id==t.form.id})))},save:t.saveAdvance,"currency-changed":t.updateSelectedCurrency,"bank-account-changed":t.updateSelectedBankAccount,"ministry-changed":t.updateSelectedMinistry,"validation-error":t.showToast}}),t._v(" "),e("money-advance-detail-dialog",{attrs:{show:t.showDetailDialog,details:t.advanceDetails,loading:t.detailLoading,"status-labels":t.statusLabels},on:{close:t.closeDetailDialog,print:t.printAdvanceDetails,download:t.downloadAdvanceDetails,"retry-load":t.retryLoadDetails,edit:t.handleEditFromDetail,approve:t.handleApproveFromDetail,"create-settlement":t.handleCreateSettlement}}),t._v(" "),t.selectedRecordForAudit&&t.selectedRecordForAudit.id?e("audit-trail-dialog",{attrs:{show:t.showAuditDialog,"record-id":t.selectedRecordForAudit.id,"record-data":t.selectedRecordForAudit,"can-restore":t.canRestoreRecord},on:{close:t.closeAuditDialog,compare:t.handleVersionComparison,restore:t.handleVersionRestore,"view-full-changes":t.handleViewFullChanges,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}):t._e(),t._v(" "),t.selectedRecordForComparison&&t.selectedRecordForComparison.id?e("version-comparison-dialog",{attrs:{show:t.showComparisonDialog,"record-id":t.selectedRecordForComparison.id,"record-data":t.selectedRecordForComparison,"initial-comparison":t.comparisonData,"can-restore":t.canRestoreRecord},on:{close:t.closeComparisonDialog,restore:t.handleVersionRestore,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}):t._e(),t._v(" "),e("audit-reports-dialog",{attrs:{show:t.showAuditReportsDialog},on:{close:t.closeAuditReportsDialog,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}),t._v(" "),t.showPrintVoucher&&t.advanceDetails?e("VoucherPrintComponent",{key:t.advanceDetails.id,attrs:{"voucher-data":t.advanceDetails},on:{close:t.closePrintVoucher}}):t._e(),t._v(" "),e("SettlementDialog",{attrs:{visible:t.showSettlementDialog,settlement:t.settlementData,"outstanding-invoices":[],currencies:t.currencies,"bank-accounts":t.bankAccounts,ministries:t.ministries,"chart-accounts":t.chartAccounts,users:t.users},on:{close:t.closeSettlementDialog,save:t.saveSettlement}}),t._v(" "),e(x.a,{attrs:{value:t.loading}},[e(y.a,{attrs:{indeterminate:"",size:"64",color:"primary"}})],1)],1)}),[],!1,null,"28c64cb6",null);e.default=component.exports},889:function(t,e,n){var content=n(915);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("08dd24f8",content,!0,{sourceMap:!1})},900:function(t,e,n){var content=n(943);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("9515ad8e",content,!0,{sourceMap:!1})},901:function(t,e,n){var content=n(945);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("5422c78c",content,!0,{sourceMap:!1})},902:function(t,e,n){var content=n(947);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("683701e4",content,!0,{sourceMap:!1})},903:function(t,e,n){var content=n(949);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("3bcd7bf8",content,!0,{sourceMap:!1})},904:function(t,e,n){var content=n(951);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("9673ac5e",content,!0,{sourceMap:!1})},906:function(t,e,n){"use strict";n.r(e);var o=n(796),r=n(795),c=(n(337),n(5),n(68),n(30),n(8),n(76),n(38),n(52),{name:"VoucherPrintComponent",props:{voucherData:{type:Object,default:function(){return{id:5,amount:4e6,purpose:"test",note:"",status:"pending",method:"cash",approvedAt:null,dueDate:"2025-07-24T00:00:00.000Z",createdAt:"2025-07-09T15:12:51.000Z",updateTimestamp:"2025-07-09T15:12:51.000Z",makerId:2,checkerId:null,currencyId:5,externalRef:"",externalRefNo:"",chequeNo:"",receiveName:"",receiveIDNO:"",maker:{id:2,cus_id:1001,cus_pass:"1111",cus_name:"USER01",cus_tel:"TELEPHONE",cus_email:"EMAIL",cus_active:!0,village:null,district:null,province:null,remark:null,isActive:!0,createdAt:"2025-01-24T19:54:20.000Z",updateTimestamp:"2025-01-24T19:54:20.000Z",groupId:1},checker:null,currency:{id:5,code:"USD",name:"US Dollar",rate:1,isActive:!0,isLocalCCY:!1,createdAt:"2023-09-17T06:52:15.000Z",updateTimestamp:"2025-03-03T01:11:36.000Z"},ministry:null,settlementLine:[]}}}},data:function(){return{showPrintDialog:!1}},watch:{voucherData:{handler:function(t){t&&t.id&&(this.showPrintDialog=!0)},deep:!0,immediate:!0}},methods:{formatDateLao:function(t){if(!t)return"N/A";var e=new Date(t),n=e.getDate().toString().padStart(2,"0"),o=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getFullYear();return"".concat(n,"/").concat(o,"/").concat(r)},openPrintDialog:function(){this.showPrintDialog=!0},closePrintDialog:function(){this.showPrintDialog=!1,this.$emit("close")},formatVoucherNumber:function(t){return String(t).padStart(6,"0")},formatDate:function(t){if(!t)return{day:"",month:"",year:""};var e=new Date(t);return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},formatAmount:function(t){return t?new Intl.NumberFormat("en-US").format(t):"0"},getCurrencyWord:function(t){var e="";switch(t){case"LAK":e+=" ກີບ";break;case"USD":e+=" ໂດລາ";break;case"THB":e+=" ບາດ";break;default:e+="ກີບ"}return e},convertToWords:function(t,e){if(!t)return"";var n=["","ໜຶ່ງ","ສອງ","ສາມ","ສີ່","ຫ້າ","ຫົກ","ເຈັດ","ແປດ","ເກົ້າ"],o=t.toString().length;if(o>10)return this.formatAmount(t)+" "+(e||"");var r="",c=function(t){var text="",e=Math.floor(t/100),o=t%100,r=Math.floor(o/10),c=o%10;return e>0&&(text+=n[e]+"ຮ້ອຍ"),20===o?text+="ຊາວ":r>=2?(text+=n[r]+"ສິບ",c>0&&(text+=n[c])):1===r?(text+="ສິບ",c>0&&(text+=n[c])):c>0&&(text+=n[c]),text};if(o<=3)r=c(t);else if(o<=6)if(t>=1e5){var l=Math.floor(t/1e5),d=t%1e5;if(r=10===l?"ສິບແສນ":n[l]+"ແສນ",d>0)if(d>=1e3){var f=Math.floor(d/1e3),m=d%1e3;r+=10===f?"ສິບພັນ":20===f?"ຊາວພັນ":c(f)+"ພັນ",m>0&&(r+=c(m))}else r+=c(d)}else{var v=Math.floor(t/1e3),h=t%1e3;r=10===v?"ສິບພັນ":20===v?"ຊາວພັນ":c(v)+"ພັນ",h>0&&(r+=c(h))}else if(o<=9){var x=Math.floor(t/1e6),y=t%1e6;if(r=10===x?"ສິບລ້ານ":20===x?"ຊາວລ້ານ":c(x)+"ລ້ານ",y>0)if(y>=1e5){var _=Math.floor(y/1e5),k=y%1e5;if(r+=n[_]+"ແສນ",k>0)if(k>=1e3){var D=Math.floor(k/1e3),C=k%1e3;r+=10===D?"ສິບພັນ":20===D?"ຊາວພັນ":c(D)+"ພັນ",C>0&&(r+=c(C))}else r+=c(k)}else if(y>=1e3){var w=Math.floor(y/1e3),A=y%1e3;r+=10===w?"ສິບພັນ":20===w?"ຊາວພັນ":c(w)+"ພັນ",A>0&&(r+=c(A))}else r+=c(y)}else if(o<=10){var F=Math.floor(t/1e9),I=t%1e9;if(r=n[F]+"ພັນລ້ານ",I>0)if(I>=1e6){var R=Math.floor(I/1e6),T=I%1e6;if(r+=10===R?"ສິບລ້ານ":20===R?"ຊາວລ້ານ":c(R)+"ລ້ານ",T>0)if(T>=1e5){var E=Math.floor(T/1e5),N=T%1e5;if(r+=n[E]+"ແສນ",N>0)if(N>=1e3){var O=Math.floor(N/1e3),P=N%1e3;r+=10===O?"ສິບພັນ":20===O?"ຊາວພັນ":c(O)+"ພັນ",P>0&&(r+=c(P))}else r+=c(N)}else if(T>=1e3){var S=Math.floor(T/1e3),z=T%1e3;r+=10===S?"ສິບພັນ":20===S?"ຊາວພັນ":c(S)+"ພັນ",z>0&&(r+=c(z))}else r+=c(T)}else if(I>=1e5){var j=Math.floor(I/1e5),L=I%1e5;if(r+=n[j]+"ແສນ",L>0)if(L>=1e3){var M=Math.floor(L/1e3),V=L%1e3;r+=10===M?"ສິບພັນ":20===M?"ຊາວພັນ":c(M)+"ພັນ",V>0&&(r+=c(V))}else r+=c(L)}else if(I>=1e3){var B=Math.floor(I/1e3),$=I%1e3;r+=10===B?"ສິບພັນ":20===B?"ຊາວພັນ":c(B)+"ພັນ",$>0&&(r+=c($))}else r+=c(I)}switch(e){case"LAK":r+=" ກີບ";break;case"USD":r+=" ໂດລາ";break;case"THB":r+=" ບາດ";break;default:r+=e?" "+e:""}return r},printVoucher:function(){var t=this,e=this.$refs.voucherContent.cloneNode(!0);e.querySelectorAll('input[type="checkbox"]').forEach((function(e,n){var o=!1;if(0===n)o="cash"===t.voucherData.method;else if(1===n)o="cheque"===t.voucherData.method;else if(2===n){var r;o="LAK"===(null===(r=t.voucherData.currency)||void 0===r?void 0:r.code)}else if(3===n){var c;o="THB"===(null===(c=t.voucherData.currency)||void 0===c?void 0:c.code)}else if(4===n){var l;o="USD"===(null===(l=t.voucherData.currency)||void 0===l?void 0:l.code)}if(n>=2){var d,f=e.closest("label"),m=f?f.textContent.trim():"";if(m.includes("ກີບ"))o="LAK"===(null===(d=t.voucherData.currency)||void 0===d?void 0:d.code);else if(m.includes("ບາດ")){var v;o="THB"===(null===(v=t.voucherData.currency)||void 0===v?void 0:v.code)}else if(m.includes("ໂດລາ")){var h;o="USD"===(null===(h=t.voucherData.currency)||void 0===h?void 0:h.code)}}o?(e.setAttribute("checked","checked"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}));var n=e.innerHTML,o=window.open("","_blank","width=800,height=600");o.document.write('\n    <html>\n      <head>\n        <title>ໃບຈ່າຍເງິນສົດອອກຄັງ</title>\n        <style>\n          body { \n            font-family: \'Phetsarath OT\', \'Noto Sans Lao\', Arial, sans-serif; \n            margin: 0; \n            padding: 20px; \n            line-height: 1.4;\n            font-weight: bold !important;\n          }\n\n          * {\n            font-weight: bold !important;\n          }\n\n          .voucher-logo {\n            width: 110px;\n            height: 110px;\n            object-fit: contain;\n            margin-bottom: 1px !important;\n            line-height: 1 !important;\n          }\n          \n          .voucher-logo-gov {\n            max-width: 90px;\n            max-height: 90px;\n            width: auto;\n            height: auto;\n            object-fit: contain;\n            margin-top: 30px !important;\n            margin-bottom: 4px !important;\n            line-height: 1 !important;\n          }\n          \n          .voucher-container { \n            border: 2px solid #000; \n            padding: 15px; \n            font-size: 12px; \n            line-height: 1.4; \n            max-width: 210mm;\n            margin: 0 auto;\n            font-weight: bold;\n          }\n          \n          .voucher-header { \n            display: flex; \n            justify-content: space-between; \n            align-items: flex-start; \n            margin-bottom: 15px; \n            padding-bottom: 5px; \n          }\n          \n          .ministry-voucher-section {\n            display: flex;\n            justify-content: space-between;\n            align-items: flex-end;\n            margin: 0 !important;\n            padding: 0 !important;\n            margin-bottom: 10px !important;\n          }\n          \n          .ministry-voucher-section .col,\n          .ministry-voucher-section > div {\n            padding: 0 !important;\n            margin: 0 !important;\n          }\n          \n          .voucher-title {\n            font-size: 16px !important;\n            margin: 0 !important;\n            margin-bottom: 2px !important;\n            line-height: 1.2 !important;\n            text-align: left;\n            text-decoration: none;\n            font-weight: bold !important;\n          }\n          \n          .voucher-title-main {\n            text-align: center;\n            font-size: 18px;\n            font-weight: bold;\n            margin: 20px 0;\n            text-decoration: underline;\n          }\n          \n          .company-info { \n            flex: 1; \n            text-align: center; \n          }\n          \n          .company-name { \n            font-weight: bold !important; \n            font-size: 14px; \n            margin-bottom: 3px; \n          }\n          \n          .department { \n            font-size: 12px; \n            margin-bottom: 3px; \n            font-weight: bold !important;\n          }\n          \n          .sub-department { \n            font-size: 10px; \n            margin-bottom: 10px; \n            font-weight: bold !important;\n          }\n          \n          .amount-line { \n            font-size: 10px; \n            letter-spacing: 2px; \n            font-weight: bold !important;\n          }\n          \n          .number-box { \n            border: 2px solid #000; \n            padding: 5px 8px; \n            text-align: center; \n            background: #f9f9f9; \n            margin-bottom: 5px;\n          }\n          \n          .number-label { \n            font-weight: bold !important; \n            margin-right: 10px; \n          }\n          \n          .number-value { \n            font-weight: bold !important; \n          }\n          \n          .detail-row { \n            display: flex; \n            align-items: center; \n            margin-bottom: 8px; \n            min-height: 20px; \n          }\n          \n          .label { \n            font-weight: bold !important; \n            margin-right: 8px; \n            white-space: nowrap; \n          }\n          \n          .value { \n            margin-right: 15px; \n            border-bottom: 1px solid #000; \n            min-width: 35px; \n            text-align: center; \n            padding: 1px 3px; \n            font-weight: bold !important;\n          }\n          \n          .dotted-line { \n            flex: 1; \n            border-bottom: 1px dotted #000; \n            margin: 0 8px; \n            min-height: 18px; \n            padding: 1px 3px; \n            font-weight: bold !important;\n          }\n          \n          .currency-options { \n            display: flex; \n            gap: 15px; \n            margin-left: 8px; \n          }\n          \n          .currency-options label { \n            display: flex; \n            align-items: center; \n            gap: 3px; \n            font-weight: bold !important; \n          }\n          \n          .amount-display { \n            font-weight: bold !important; \n            font-size: 16px; \n            margin: 0 8px; \n          }\n          \n          .amount-words { \n            flex: 1; \n            border-bottom: 1px solid #000; \n            margin-left: 8px; \n            padding: 1px 8px; \n            font-style: italic; \n            font-weight: bold !important;\n          }\n          \n          .signature-section { \n            display: flex; \n            justify-content: space-between; \n            margin-top: 30px; \n            gap: 8px; \n          }\n          \n          .signature-box { \n            flex: 1; \n            text-align: center; \n          }\n          \n          .signature-title { \n            font-size: 14px; \n            margin-bottom: 25px;\n            margin-bottom: 100px; \n            font-weight: bold !important; \n          }\n          \n          .signature-name { \n            font-size: 14px; \n            margin-top: 5px; \n            font-weight: bold !important; \n          }\n\n          /* Ensure checkboxes are visible and properly styled */\n          input[type="checkbox"] {\n            width: 14px;\n            height: 14px;\n            margin-right: 4px;\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n          }\n\n          /* Force checkbox states to be visible in print */\n          input[type="checkbox"]:checked {\n            accent-color: black;\n          }\n\n          @media print {\n            input[type="checkbox"] {\n              -webkit-appearance: checkbox;\n              appearance: checkbox;\n            }\n          }\n        </style>\n      </head>\n      <body>\n        '.concat(n,"\n      </body>\n    </html>\n  ")),o.document.close(),o.print(),o.close()}}}),l=(n(914),n(31)),component=Object(l.a)(c,(function(){var t,e,c,l,d,f,m,v,h,x=this,y=x._self._c;return y("div",[x.showPrintDialog?y("div",{staticClass:"modal-overlay",on:{click:x.closePrintDialog}},[y("div",{staticClass:"modal-content",on:{click:function(t){t.stopPropagation()}}},[y("div",{staticClass:"modal-header"},[y("h3",[x._v("ພິມໃບຈ່າຍສົດອອກຄັງ")]),x._v(" "),y("button",{staticClass:"close-btn",on:{click:x.closePrintDialog}},[y("i",{staticClass:"fas fa-times"})])]),x._v(" "),y("div",{staticClass:"modal-body"},[y("div",{ref:"voucherContent",staticClass:"voucher-container",attrs:{id:"voucher-print"}},[y("div",{staticClass:"voucher-header"},[y("div",{staticClass:"company-info"},[y("div",{staticClass:"company-name"},[y("img",{staticClass:"voucher-logo-gov",attrs:{src:n(457),alt:"Ministry Logo"}})]),x._v(" "),y("div",{staticClass:"company-name"},[x._v("\n                ສາທາລະນະລັດ ປະຊາທິປະໄຕ ປະຊາຊົນລາວ\n              ")]),x._v(" "),y("div",{staticClass:"company-name"},[x._v("\n                ສັນຕິພາບ ເອກະລາດ ປະຊາທິປະໄຕ ເອກະພາບ ວັດທະນາຖາວອນ\n              ")])])]),x._v(" "),y(r.a,{staticClass:"ministry-voucher-section",attrs:{align:"end",justify:"space-between","no-gutters":""}},[y(o.a,{staticClass:"d-flex flex-column align-start pa-0",attrs:{cols:"6"}},[y("img",{staticClass:"voucher-logo",attrs:{src:n(456),alt:"Ministry Logo"}}),x._v(" "),y("div",{staticClass:"voucher-title"},[x._v("ກະຊວງໂຍທາທິການ ແລະ ຂົນສົ່ງ.")]),x._v(" "),y("div",{staticClass:"voucher-title"},[x._v("ກົມແຜນການ ແລະ ການເງິນ")]),x._v(" "),y("div",{staticClass:"voucher-title"},[x._v("ພະແນກຄຸ້ມຄອງລາຍຮັບ")]),x._v(" "),y("div",{staticClass:"voucher-title"})]),x._v(" "),y(o.a,{staticClass:"d-flex flex-column align-end pa-0",attrs:{cols:"6"}},[y("div",{staticClass:"number-box"},[y("span",{staticClass:"number-label"},[x._v("No")]),x._v(" "),y("span",{staticClass:"number-value"},[x._v("\n                  "+x._s(x.formatVoucherNumber(x.voucherData.id))+"\n                ")])])])],1),x._v(" "),y(r.a,{staticClass:"ministry-voucher-section",attrs:{align:"end",justify:"space-between","no-gutters":""}},[y(o.a,{staticClass:"d-flex flex-column align-start pa-0",attrs:{cols:"6"}}),x._v(" "),y(o.a,{staticClass:"d-flex flex-column align-end pa-0",attrs:{cols:"6"}},[y("div",{staticClass:"voucher-title"},[y("span",{staticClass:"label",staticStyle:{"font-size":"14px !important"}},[x._v("ນະຄອນຫຼວງວຽງຈັນ ວັນທີ")]),x._v(" "),y("span",{staticClass:"dotted-line"},[x._v("\n                  "+x._s(x.formatDateLao(x.voucherData.bookingDate))+"\n                ")])])])],1),x._v(" "),y("div",{staticClass:"voucher-title-main"},[x._v("ໃບຈ່າຍເງິນສົດອອກຄັງ")]),x._v(" "),y("div",{staticClass:"voucher-details"},[y("div",{staticClass:"detail-row"},[y("span",{staticClass:"label"},[x._v("ອີງໃສ່ໃບສັ່ງຈ່າຍ ເລກທີ")]),x._v(" "),y("span",{staticClass:"dotted-line"},[x._v("\n                "+x._s(x.voucherData.externalRef||""))]),x._v(" "),y("span",{staticClass:"label"},[x._v("ລົງວັນທີ")]),x._v(" "),y("span",{staticClass:"value"},[x._v(x._s(x.formatDate(x.voucherData.externalBookingDate).day))]),x._v(" "),y("span",{staticClass:"label"},[x._v("ເດືອນ")]),x._v(" "),y("span",{staticClass:"value"},[x._v(x._s(x.formatDate(x.voucherData.externalBookingDate).month))]),x._v(" "),y("span",{staticClass:"label"},[x._v("ປີ")]),x._v(" "),y("span",{staticClass:"value"},[x._v(x._s(x.formatDate(x.voucherData.externalBookingDate).year))])]),x._v(" "),x._m(0),x._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"label"},[x._v("ໄດ້ຈ່າຍເງິນ ")]),x._v(" "),y("label",[y("input",{attrs:{type:"checkbox"},domProps:{checked:"cash"===x.voucherData.method}})]),x._v(" "),y("span",{staticClass:"label"},[x._v(" ສົດ ")]),x._v(" "),y("label",[y("input",{attrs:{type:"checkbox"},domProps:{checked:"cheque"===x.voucherData.method}})]),x._v(" "),y("span",{staticClass:"label"},[x._v(" ແຊັກເລກທີ່ ")]),x._v(" "),y("span",{staticClass:"dotted-line"},[x._v(x._s(x.voucherData.chequeNo||""))]),x._v(" "),y("div",{staticClass:"currency-options"},[y("label",[y("input",{attrs:{type:"checkbox"},domProps:{checked:"LAK"===(null===(t=x.voucherData.currency)||void 0===t?void 0:t.code)}}),x._v("\n                  ກີບ")]),x._v(" "),y("label",[y("input",{attrs:{type:"checkbox"},domProps:{checked:"THB"===(null===(e=x.voucherData.currency)||void 0===e?void 0:e.code)}}),x._v("\n                  ບາດ")]),x._v(" "),y("label",[y("input",{attrs:{type:"checkbox"},domProps:{checked:"USD"===(null===(c=x.voucherData.currency)||void 0===c?void 0:c.code)}}),x._v("\n                  ໂດລາ")])])]),x._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"label"},[x._v("ໃຫ້ທ່ານ")]),x._v(" "),y("span",{staticClass:"dotted-line"},[x._v(x._s(x.voucherData.receiveName||(null===(l=x.voucherData.maker)||void 0===l?void 0:l.cus_name)||""))]),x._v(" "),y("span",{staticClass:"label"},[x._v("ເລກບັດປະຈຳຕົວ")]),x._v(" "),y("span",{staticClass:"dotted-line"},[x._v(x._s(x.voucherData.receiveIDNO||""))])]),x._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"label"},[x._v("ສັງກັດຢູ່ພາກສ່ວນ ກົມ/ກອງ")]),x._v(" "),y("span",{staticClass:"dotted-line"},[x._v(x._s((null===(d=x.voucherData.ministry)||void 0===d?void 0:d.ministryName)||""))])]),x._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"label"},[x._v("ເນື້ອໃນລາຍຈ່າຍ")]),x._v(" "),y("span",{staticClass:"dotted-line"},[x._v(x._s(x.voucherData.purpose||""))])]),x._v(" "),x._m(1),x._v(" "),x._m(2),x._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"label"},[x._v("ຈຳນວນ")]),x._v(" "),y("span",{staticClass:"amount-display"},[x._v(x._s(x.formatAmount(x.voucherData.amount))+"\n                "+x._s(x.getCurrencyWord(null===(f=x.voucherData.currency)||void 0===f?void 0:f.code))+"\n              ")])]),x._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"label"},[x._v("ຈຳນວນເງິນເປັນຕົວຫນັງສື")]),x._v(" "),y("span",{staticClass:"amount-words"},[x._v(x._s(x.convertToWords(x.voucherData.amount,null===(m=x.voucherData.currency)||void 0===m?void 0:m.code)))])])]),x._v(" "),y("div",{staticClass:"signature-section"},[x._m(3),x._v(" "),y("div",{staticClass:"signature-box"},[y("div",{staticClass:"signature-title"},[x._v("ຜູ້ຮັບເງິນ")]),x._v(" "),y("div",{staticClass:"signature-name"},[x._v("\n                "+x._s(x.voucherData.receiveName||(null===(v=x.voucherData.maker)||void 0===v?void 0:v.cus_name)||"")+"\n              ")])]),x._v(" "),y("div",{staticClass:"signature-box"},[y("div",{staticClass:"signature-title"},[x._v("ຜູ້ຈ່າຍເງິນ")]),x._v(" "),y("div",{staticClass:"signature-name"},[x._v("\n                "+x._s((null===(h=x.voucherData.checker)||void 0===h?void 0:h.cus_name)||"")+"\n              ")])])])],1)]),x._v(" "),y("div",{staticClass:"modal-footer"},[y("button",{staticClass:"btn btn-secondary",on:{click:x.closePrintDialog}},[y("i",{staticClass:"fas fa-times"}),x._v("\n          ຍົກເລີກ\n        ")]),x._v(" "),y("button",{staticClass:"btn btn-primary",on:{click:x.printVoucher}},[y("i",{staticClass:"fas fa-print"}),x._v("\n          ພິມ\n        ")])])])]):x._e()])}),[function(){var t=this._self._c;return t("div",{staticClass:"detail-row"},[t("span",{staticClass:"label"},[this._v("ພະແນກຄຸ້ມຄອງລາຍຮັບ, ກະຊວງ ໂຍທາທິການ ແລະ ຂົນສົ່ງ.")])])},function(){var t=this._self._c;return t("div",{staticClass:"detail-row"},[t("span",{staticClass:"label"}),this._v(" "),t("span",{staticClass:"dotted-line"})])},function(){var t=this._self._c;return t("div",{staticClass:"detail-row"},[t("span",{staticClass:"label"}),this._v(" "),t("span",{staticClass:"dotted-line"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"signature-box"},[e("div",{staticClass:"signature-title"},[t._v("ຫົວໜ້າພະແນກ ຄຸ້ມຄອງລາຍຮັບ")]),t._v(" "),e("div",{staticClass:"signature-name"})])}],!1,null,"3d1eb6e0",null);e.default=component.exports},914:function(t,e,n){"use strict";n(889)},915:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,'.voucher-logo[data-v-3d1eb6e0]{height:110px;line-height:1!important;margin-bottom:1px!important;-o-object-fit:contain;object-fit:contain;width:110px}.voucher-logo-gov[data-v-3d1eb6e0]{height:auto;line-height:1!important;margin-bottom:4px!important;margin-top:30px!important;max-height:80px;max-width:80px;-o-object-fit:contain;object-fit:contain;width:auto}.modal-overlay[data-v-3d1eb6e0]{align-items:center;background:rgba(0,0,0,.5);display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:1000}.modal-content[data-v-3d1eb6e0]{background:#fff;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.3);max-height:90vh;max-width:800px;overflow-y:auto;width:90%}.modal-header[data-v-3d1eb6e0]{align-items:center;border-bottom:1px solid #eee;display:flex;justify-content:space-between;padding:20px}.modal-header h3[data-v-3d1eb6e0]{color:#333;margin:0}.close-btn[data-v-3d1eb6e0]{background:none;border:none;color:#666;cursor:pointer;font-size:18px}.close-btn[data-v-3d1eb6e0]:hover{color:#333}.modal-body[data-v-3d1eb6e0]{padding:20px}.modal-footer[data-v-3d1eb6e0]{border-top:1px solid #eee;display:flex;gap:10px;justify-content:flex-end;padding:20px}.btn[data-v-3d1eb6e0]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:8px;padding:10px 20px;transition:all .2s}.btn-primary[data-v-3d1eb6e0]{background:#007bff;color:#fff}.btn-primary[data-v-3d1eb6e0]:hover{background:#0056b3}.btn-secondary[data-v-3d1eb6e0]{background:#6c757d;color:#fff}.btn-secondary[data-v-3d1eb6e0]:hover{background:#545b62}.voucher-container[data-v-3d1eb6e0]{background:#fff;border:2px solid #333;font-family:"Phetsarath OT","Noto Sans Lao",Arial,sans-serif;font-size:14px;font-weight:700;line-height:1.3;margin:0 auto;max-width:700px;padding:15px;width:100%}.voucher-container *[data-v-3d1eb6e0]{font-weight:700!important}.voucher-header[data-v-3d1eb6e0]{align-items:flex-start;display:flex;justify-content:space-between;margin-bottom:15;padding-bottom:5px}.ministry-voucher-section[data-v-3d1eb6e0]{margin:0 0 10px!important;padding:0!important}.ministry-voucher-section .col[data-v-3d1eb6e0],.ministry-voucher-section .v-col[data-v-3d1eb6e0]{margin:0!important;padding:0!important}.row[data-v-3d1eb6e0]{margin:0!important}.col[data-v-3d1eb6e0]{padding:0!important}.company-info[data-v-3d1eb6e0]{flex:1;text-align:center}.company-name[data-v-3d1eb6e0]{font-size:16px;margin-bottom:3px}.company-name[data-v-3d1eb6e0],.department[data-v-3d1eb6e0]{font-weight:700!important}.department[data-v-3d1eb6e0]{font-size:14px;margin-bottom:3px}.sub-department[data-v-3d1eb6e0]{font-size:12px;margin-bottom:8px}.amount-line[data-v-3d1eb6e0],.sub-department[data-v-3d1eb6e0]{font-weight:700!important}.amount-line[data-v-3d1eb6e0]{font-size:12px;letter-spacing:2px}.number-box[data-v-3d1eb6e0]{background:#f9f9f9;border:2px solid #333;margin-bottom:5px;padding:6px 10px;text-align:center}.number-label[data-v-3d1eb6e0]{margin-right:8px}.number-label[data-v-3d1eb6e0],.number-value[data-v-3d1eb6e0]{font-weight:700!important}.number-value[data-v-3d1eb6e0]{color:#d32f2f}.voucher-title[data-v-3d1eb6e0]{font-size:18px;font-weight:700!important;margin:15px 0;text-align:center;-webkit-text-decoration:underline;text-decoration:underline}.voucher-title[data-v-3d1eb6e0]:not(.voucher-container>.voucher-title){font-size:16px!important;font-weight:700!important;line-height:1.2!important;margin:0 0 2px!important;text-align:left!important;-webkit-text-decoration:none!important;text-decoration:none!important}.voucher-details[data-v-3d1eb6e0]{margin-bottom:25px}.detail-row[data-v-3d1eb6e0]{align-items:center;display:flex;margin-bottom:10px;min-height:22px}.detail-row.description[data-v-3d1eb6e0]{align-items:flex-start;flex-direction:column}.label[data-v-3d1eb6e0]{margin-right:8px;white-space:nowrap}.label[data-v-3d1eb6e0],.value[data-v-3d1eb6e0]{font-weight:700!important}.value[data-v-3d1eb6e0]{border-bottom:1px solid #333;margin-right:15px;min-width:35px;padding:2px 4px;text-align:center}.dotted-line[data-v-3d1eb6e0]{border-bottom:1px dotted #333;flex:1;font-weight:700!important;margin:0 8px;min-height:18px;padding:2px 4px}.currency-options[data-v-3d1eb6e0]{display:flex;gap:15px;margin-left:8px}.currency-options label[data-v-3d1eb6e0]{align-items:center;display:flex;gap:4px}.amount-display[data-v-3d1eb6e0],.currency-options label[data-v-3d1eb6e0]{font-weight:700!important}.amount-display[data-v-3d1eb6e0]{font-size:16px;margin:0 8px}.description-content[data-v-3d1eb6e0]{background:#fafafa;border:1px solid #333;margin-top:4px;min-height:50px;padding:8px;width:100%}.amount-words[data-v-3d1eb6e0],.description-content[data-v-3d1eb6e0]{font-weight:700!important}.amount-words[data-v-3d1eb6e0]{border-bottom:1px solid #333;flex:1;font-style:italic;margin-left:8px;padding:2px 8px}.signature-section[data-v-3d1eb6e0]{display:flex;gap:8px;justify-content:space-between;margin-top:30px}.signature-box[data-v-3d1eb6e0]{flex:1;text-align:center}.signature-title[data-v-3d1eb6e0]{font-size:14px;font-weight:700!important;margin-bottom:100px}.signature-line[data-v-3d1eb6e0]{border-bottom:1px solid #333;height:1px;margin-top:15px}.signature-name[data-v-3d1eb6e0]{color:#666;font-size:14px;font-weight:700!important;margin-top:4px}.voucher-title-main[data-v-3d1eb6e0]{font-size:18px;font-weight:700;margin:20px 0;text-align:center;-webkit-text-decoration:underline;text-decoration:underline}@media print{*[data-v-3d1eb6e0],.print-only[data-v-3d1eb6e0],.print-only *[data-v-3d1eb6e0],body *[data-v-3d1eb6e0]{font-weight:700!important}.print-only[data-v-3d1eb6e0],.print-only *[data-v-3d1eb6e0]{visibility:visible}.print-only[data-v-3d1eb6e0]{left:0;position:absolute;top:0;width:100%}.voucher-container.print-version[data-v-3d1eb6e0]{border:2px solid #000!important;font-size:12px!important;font-weight:700!important;margin:0!important;max-width:none!important;padding:15px!important;width:100%!important}}.print-only[data-v-3d1eb6e0]{left:-9999px;position:absolute;top:-9999px}@media print{.print-only[data-v-3d1eb6e0]{left:auto;position:static;top:auto}}',""]),o.locals={},t.exports=o},942:function(t,e,n){"use strict";n(900)},943:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,'.compact-date-field[data-v-0024d5f2]{font-size:12px!important}.compact-date-field .v-input__control[data-v-0024d5f2],.compact-date-field .v-input__slot[data-v-0024d5f2]{max-height:32px!important;min-height:32px!important}.compact-date-field .v-input__slot[data-v-0024d5f2]{align-items:center!important;padding:0 8px!important}.compact-date-field .v-text-field__details[data-v-0024d5f2]{display:none!important}.compact-date-field .v-input__icon--prepend-inner[data-v-0024d5f2]{align-self:center!important;margin-right:6px!important;margin-top:0!important}.compact-date-field .v-input__icon--append[data-v-0024d5f2]{align-self:center!important;margin-left:6px!important;margin-top:0!important}.compact-date-field .v-text-field__slot[data-v-0024d5f2]{align-items:center!important;max-height:30px!important;min-height:30px!important}.compact-date-field input[data-v-0024d5f2]{font-size:12px!important;height:30px!important;line-height:1.2!important;margin:0!important;padding:0!important}.compact-date-field .v-text-field--outlined .v-input__control .v-input__slot[data-v-0024d5f2],.compact-date-field.v-text-field--outlined .v-input__control .v-input__slot[data-v-0024d5f2]{background:#fafafa!important;border:1px solid #e5e7eb!important;border-radius:4px!important}.compact-date-field .v-text-field--outlined.v-input--is-focused .v-input__control .v-input__slot[data-v-0024d5f2],.compact-date-field.v-input--is-focused .v-input__slot[data-v-0024d5f2]{background:#fff!important;border-color:#667eea!important;box-shadow:0 0 0 2px rgba(102,126,234,.1)!important}.compact-date-field .v-text-field--outlined.v-input--is-disabled .v-input__control .v-input__slot[data-v-0024d5f2],.compact-date-field.v-input--is-disabled .v-input__slot[data-v-0024d5f2]{background-color:#f3f4f6!important;border-color:#d1d5db!important;opacity:.6!important}.compact-date-field .v-text-field--outlined fieldset[data-v-0024d5f2]{border:none!important}.compact-date-field .v-text-field--outlined .v-text-field__details[data-v-0024d5f2]{display:none!important}.v-menu__content[data-v-0024d5f2]{border-radius:8px!important;box-shadow:0 8px 32px rgba(0,0,0,.12)!important;overflow:hidden!important}.v-date-picker[data-v-0024d5f2]{box-shadow:none!important}.modal-header-right[data-v-0024d5f2]{align-items:center;display:flex;gap:15px}.voucher-number[data-v-0024d5f2]{color:#fff;font-size:14px;font-weight:600;opacity:.9}.modal-overlay[data-v-0024d5f2]{align-items:center;animation:fadeIn-0024d5f2 .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}@keyframes fadeIn-0024d5f2{0%{opacity:0}to{opacity:1}}.enhanced-dialog[data-v-0024d5f2]{animation:slideIn-0024d5f2 .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:98vh;max-width:95vw;overflow:hidden;width:95%}@keyframes slideIn-0024d5f2{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[data-v-0024d5f2]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:16px 18px}.modal-title-section[data-v-0024d5f2]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-0024d5f2]{font-size:18px;opacity:.9}.modal-title[data-v-0024d5f2]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-0024d5f2]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:16px;opacity:.8;padding:6px;transition:opacity .2s}.close-btn[data-v-0024d5f2]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-0024d5f2]{max-height:calc(98vh - 120px);overflow-y:auto;padding:16px 18px}.form-loading[data-v-0024d5f2]{align-items:center;color:#666;display:flex;justify-content:center;padding:40px}.spinner-small[data-v-0024d5f2]{animation:spin-0024d5f2 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:20px;margin-right:10px;width:20px}@keyframes spin-0024d5f2{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.form-grid[data-v-0024d5f2]{grid-gap:12px;display:grid;gap:12px;grid-template-columns:repeat(3,1fr)}.form-group[data-v-0024d5f2]{margin-bottom:0}.form-group.full-width[data-v-0024d5f2]{grid-column:1/-1}.form-group.span-2[data-v-0024d5f2]{grid-column:span 2}.form-group.span-3[data-v-0024d5f2]{grid-column:span 3}.form-label[data-v-0024d5f2]{align-items:center;color:#374151;display:flex;font-size:11px;font-weight:600;gap:6px;margin-bottom:4px}.form-label.required[data-v-0024d5f2]:after{color:#e74c3c;content:"*";margin-left:4px}.form-label i[data-v-0024d5f2]{color:#6b7280;font-size:11px}.form-control[data-v-0024d5f2]{background:#fafafa;border:1px solid #e5e7eb;border-radius:4px;box-sizing:border-box;font-size:12px;height:32px;padding:6px 8px;transition:all .2s ease;width:100%}.form-control[data-v-0024d5f2]:focus{background:#fff;border-color:#667eea;box-shadow:0 0 0 2px rgba(102,126,234,.1);outline:none}textarea.form-control[data-v-0024d5f2]{height:auto;min-height:60px;resize:vertical}.custom-select-wrapper[data-v-0024d5f2]{position:relative}.custom-select[data-v-0024d5f2]{appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:32px}.select-icon[data-v-0024d5f2]{color:#6b7280;font-size:12px;pointer-events:none;position:absolute;right:8px;top:50%;transform:translateY(-50%)}.ministry-info[data-v-0024d5f2]{background:#f0f9ff;border:1px solid #bae6fd;border-radius:4px;margin-top:6px;padding:6px}.ministry-details[data-v-0024d5f2]{grid-gap:3px;display:grid;gap:3px;grid-template-columns:1fr}.ministry-detail-item[data-v-0024d5f2]{align-items:center;color:#075985;display:flex;font-size:10px;gap:4px}.ministry-detail-item i[data-v-0024d5f2]{color:#0ea5e9;flex-shrink:0;width:12px}.ministry-name[data-v-0024d5f2]{font-weight:600}.ministry-code[data-v-0024d5f2]{background:#e0f2fe;border-radius:2px;font-family:monospace;padding:1px 4px}.bank-account-info[data-v-0024d5f2]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:4px;margin-top:6px;padding:6px}.bank-details[data-v-0024d5f2]{grid-gap:3px;display:grid;gap:3px;grid-template-columns:1fr}.bank-detail-item[data-v-0024d5f2]{align-items:center;color:#6b7280;display:flex;font-size:10px;gap:4px}.bank-detail-item i[data-v-0024d5f2]{color:#667eea;width:12px}.form-errors[data-v-0024d5f2]{background:#fef2f2;border:1px solid #fecaca;border-radius:6px;margin-top:16px;padding:12px}.form-errors h6[data-v-0024d5f2]{align-items:center;color:#dc2626;display:flex;font-size:12px;gap:6px;margin:0 0 8px}.form-errors ul[data-v-0024d5f2]{color:#dc2626;font-size:11px;margin:0;padding-left:16px}.enhanced-footer[data-v-0024d5f2]{background:#f8f9fa;border-top:1px solid #e9ecef;display:flex;gap:10px;justify-content:flex-end;padding:12px 18px}.btn[data-v-0024d5f2]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:12px;font-weight:600;gap:6px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn[data-v-0024d5f2]:hover:not(:disabled){box-shadow:0 3px 8px rgba(0,0,0,.15);transform:translateY(-1px)}.btn[data-v-0024d5f2]:active:not(:disabled){transform:translateY(0)}.btn-primary[data-v-0024d5f2]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-secondary[data-v-0024d5f2]{background:#6c757d;color:#fff}.btn[data-v-0024d5f2]:disabled{box-shadow:none!important;cursor:not-allowed;opacity:.6;transform:none!important}.fa-spin[data-v-0024d5f2]{animation:spin-0024d5f2 1s linear infinite}@media (max-width:1024px){.form-grid[data-v-0024d5f2]{grid-template-columns:repeat(2,1fr)}.form-group.span-2[data-v-0024d5f2],.form-group.span-3[data-v-0024d5f2]{grid-column:1/-1}}@media (max-width:768px){.enhanced-dialog[data-v-0024d5f2]{margin:10px;width:98%}.form-grid[data-v-0024d5f2]{grid-template-columns:1fr}.form-group.span-2[data-v-0024d5f2],.form-group.span-3[data-v-0024d5f2]{grid-column:1}.enhanced-footer[data-v-0024d5f2],.modal-body[data-v-0024d5f2],.modal-header[data-v-0024d5f2]{padding:14px 16px}.enhanced-footer[data-v-0024d5f2]{flex-direction:column-reverse}.enhanced-footer .btn[data-v-0024d5f2]{justify-content:center;width:100%}.compact-date-field .v-input__slot[data-v-0024d5f2]{padding:0 6px!important}}',""]),o.locals={},t.exports=o},944:function(t,e,n){"use strict";n(901)},945:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,'.modal-overlay[data-v-0bf00b78]{align-items:center;animation:fadeIn-0bf00b78 .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}@keyframes fadeIn-0bf00b78{0%{opacity:0}to{opacity:1}}.detail-dialog[data-v-0bf00b78]{animation:slideIn-0bf00b78 .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:850px;overflow:hidden;width:95%}@keyframes slideIn-0bf00b78{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-title-section[data-v-0bf00b78]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-0bf00b78]{font-size:20px;opacity:.9}.modal-title[data-v-0bf00b78]{font-size:20px;font-weight:600;margin:0}.header-actions[data-v-0bf00b78]{align-items:center;display:flex;gap:8px}.btn-icon[data-v-0bf00b78]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;opacity:.8;padding:8px;transition:all .2s}.btn-icon[data-v-0bf00b78]:hover{background:hsla(0,0%,100%,.1);opacity:1}.close-btn[data-v-0bf00b78]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;opacity:.8;padding:8px;transition:opacity .2s}.close-btn[data-v-0bf00b78]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-0bf00b78]{max-height:70vh;overflow-y:auto;padding:0}.detail-body[data-v-0bf00b78]{background:#f8f9fa}.detail-loading[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #e9ecef;border-radius:8px;color:#666;display:flex;justify-content:center;margin:20px;padding:60px}.spinner-small[data-v-0bf00b78]{animation:spin-0bf00b78 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:20px;margin-right:10px;width:20px}@keyframes spin-0bf00b78{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.detail-content[data-v-0bf00b78]{display:flex;flex-direction:column;gap:20px;padding:24px}.detail-status[data-v-0bf00b78]{background:#fff;border:2px solid #e9ecef;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:0;padding:20px;text-align:center}.status-badge[data-v-0bf00b78]{align-items:center;border:2px solid transparent;border-radius:25px;display:inline-flex;font-size:16px;font-weight:600;gap:8px;letter-spacing:.5px;padding:12px 24px;text-transform:uppercase}.status-badge.status-pending[data-v-0bf00b78]{background:linear-gradient(135deg,#f39c12,#e67e22);border-color:#d68910;color:#fff}.status-badge.status-approved[data-v-0bf00b78]{background:linear-gradient(135deg,#27ae60,#229954);border-color:#1e8449;color:#fff}.status-badge.status-settled[data-v-0bf00b78]{background:linear-gradient(135deg,#3498db,#2980b9);border-color:#2471a3;color:#fff}.status-badge.status-rejected[data-v-0bf00b78]{background:linear-gradient(135deg,#e74c3c,#c0392b);border-color:#a93226;color:#fff}.status-badge.status-cancelled[data-v-0bf00b78]{background:linear-gradient(135deg,#95a5a6,#7f8c8d);border-color:#6c7b7d;color:#fff}.detail-section[data-v-0bf00b78]{background:#fff;border:2px solid #e9ecef;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:20px;padding:24px;transition:all .2s ease}.detail-section[data-v-0bf00b78]:hover{border-color:#dee2e6;box-shadow:0 4px 12px rgba(0,0,0,.12)}.detail-section[data-v-0bf00b78]:last-child{margin-bottom:0}.section-title[data-v-0bf00b78]{align-items:center;border-bottom:3px solid #ecf0f1;color:#2c3e50;display:flex;font-size:18px;font-weight:700;gap:12px;margin-bottom:20px;padding-bottom:12px}.section-title i[data-v-0bf00b78]{color:#3498db;font-size:16px}.detail-grid[data-v-0bf00b78]{grid-gap:24px;display:grid;gap:24px;grid-template-columns:1fr 1fr}.detail-item[data-v-0bf00b78]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;display:flex;flex-direction:column;gap:8px;padding:16px;transition:all .2s ease}.detail-item[data-v-0bf00b78]:hover{background:#e8f4fd;border-color:#3498db}.detail-item.full-width[data-v-0bf00b78]{grid-column:1/-1}.detail-item label[data-v-0bf00b78]{color:#6c757d;font-size:12px;font-weight:700;letter-spacing:.8px;margin-bottom:4px;text-transform:uppercase}.detail-value[data-v-0bf00b78]{color:#2c3e50;font-size:16px;font-weight:600;word-break:break-word}.amount-display[data-v-0bf00b78]{background:linear-gradient(135deg,#d5f4e6,#fafafa);border:2px solid #a9dfbf;border-radius:8px;color:#27ae60;font-size:28px;font-weight:800;padding:8px;text-align:center}.amount-display small[data-v-0bf00b78]{color:#6c757d;font-size:16px;font-weight:500;margin-left:8px}.exchange-rate-display[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#f4ecf7,#fafafa);border:2px solid #d7bde2;border-radius:8px;color:#8e44ad;display:flex;font-size:18px;font-weight:700;gap:8px;justify-content:center;padding:12px;text-align:center}.exchange-rate-display i[data-v-0bf00b78]{color:#9b59b6;font-size:16px}.user-info[data-v-0bf00b78]{align-items:center;background:#e8f4fd;border:1px solid #85c1e9;border-radius:6px;display:flex;gap:10px;padding:8px 12px}.user-info i[data-v-0bf00b78]{color:#3498db;font-size:14px}.timeline[data-v-0bf00b78]{background:#fafafa;border:2px solid #e9ecef;border-radius:8px;padding:20px;position:relative}.timeline[data-v-0bf00b78]:before{background:linear-gradient(180deg,#3498db,#ecf0f1);border-radius:2px;bottom:20px;content:"";left:35px;position:absolute;top:20px;width:3px}.timeline-item[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #ecf0f1;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);display:flex;margin-bottom:24px;margin-left:20px;padding:16px;position:relative}.timeline-item[data-v-0bf00b78]:last-child{margin-bottom:0}.timeline-icon[data-v-0bf00b78]{align-items:center;border:3px solid #fff;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,.2);color:#fff;display:flex;font-size:16px;height:40px;justify-content:center;left:-36px;margin-right:20px;position:absolute;width:40px;z-index:1}.timeline-icon.created[data-v-0bf00b78]{background:linear-gradient(135deg,#3498db,#2980b9)}.timeline-icon.approved[data-v-0bf00b78]{background:linear-gradient(135deg,#27ae60,#229954)}.timeline-icon.due[data-v-0bf00b78]{background:linear-gradient(135deg,#f39c12,#e67e22)}.timeline-icon.due.overdue[data-v-0bf00b78]{animation:pulse-0bf00b78 2s infinite;background:linear-gradient(135deg,#e74c3c,#c0392b)}.timeline-icon.settled[data-v-0bf00b78]{background:linear-gradient(135deg,#9b59b6,#8e44ad)}@keyframes pulse-0bf00b78{0%{box-shadow:0 0 0 0 rgba(231,76,60,.7),0 2px 8px rgba(0,0,0,.2)}70%{box-shadow:0 0 0 12px rgba(231,76,60,0),0 2px 8px rgba(0,0,0,.2)}to{box-shadow:0 0 0 0 rgba(231,76,60,0),0 2px 8px rgba(0,0,0,.2)}}.timeline-content[data-v-0bf00b78]{flex:1;margin-left:20px}.timeline-content label[data-v-0bf00b78]{color:#6c757d;display:block;font-size:12px;font-weight:700;letter-spacing:.5px;margin-bottom:4px;text-transform:uppercase}.timeline-date[data-v-0bf00b78]{color:#2c3e50;font-size:15px;font-weight:600}.timeline-date.overdue[data-v-0bf00b78]{color:#e74c3c;font-weight:700}.overdue-badge[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#e74c3c,#c0392b);border:1px solid #a93226;border-radius:12px;color:#fff;display:inline-flex;font-size:11px;font-weight:600;gap:4px;margin-left:8px;padding:4px 8px}.notes-content[data-v-0bf00b78]{background:#fff9e6;border:2px solid #f7dc6f;border-left:6px solid #f1c40f;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);color:#2c3e50;font-size:15px;font-style:italic;line-height:1.8;padding:20px}.history-list[data-v-0bf00b78]{display:flex;flex-direction:column;gap:12px}.history-item[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #ecf0f1;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.05);display:flex;gap:16px;padding:16px;transition:all .2s ease}.history-item[data-v-0bf00b78]:hover{background:#f8fcff;border-color:#3498db}.history-icon[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#3498db,#2980b9);border:2px solid #85c1e9;border-radius:50%;color:#fff;display:flex;flex-shrink:0;font-size:12px;height:32px;justify-content:center;width:32px}.history-content[data-v-0bf00b78]{display:flex;flex:1;flex-direction:column;gap:4px}.history-action[data-v-0bf00b78]{color:#2c3e50;font-size:15px;font-weight:700;text-transform:capitalize}.history-user[data-v-0bf00b78]{color:#6c757d;font-size:13px;font-weight:500}.history-date[data-v-0bf00b78]{color:#95a5a6;font-size:12px;font-weight:400}.detail-error[data-v-0bf00b78]{background:#fff;border:2px solid #fadbd8;border-radius:12px;color:#e74c3c;margin:20px;padding:60px 20px;text-align:center}.detail-error i[data-v-0bf00b78]{font-size:48px;margin-bottom:15px;opacity:.7}.detail-footer[data-v-0bf00b78]{align-items:center;background:#f8f9fa;border-top:2px solid #e9ecef;display:flex;justify-content:space-between;padding:16px 24px}.close-detail-btn[data-v-0bf00b78]{align-items:center;background:#6c757d;border:none;border-radius:6px;color:#fff;cursor:pointer;display:flex;font-weight:500;gap:6px;padding:8px 16px;transition:all .2s ease}.close-detail-btn[data-v-0bf00b78]:hover{background:#5a6268;transform:translateY(-1px)}.detail-actions[data-v-0bf00b78]{align-items:center;display:flex;gap:8px}.detail-actions .action-btn[data-v-0bf00b78]{align-items:center;border:none;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);cursor:pointer;display:flex;font-size:14px;height:36px;justify-content:center;padding:0;position:relative;transition:all .2s ease;width:36px}.detail-actions .action-btn[data-v-0bf00b78]:hover{box-shadow:0 4px 8px rgba(0,0,0,.15);transform:translateY(-2px)}.detail-actions .action-btn[data-v-0bf00b78]:active{box-shadow:0 1px 2px rgba(0,0,0,.1);transform:translateY(0)}.detail-actions .btn-warning[data-v-0bf00b78]{background:#ffc107;color:#212529}.detail-actions .btn-warning[data-v-0bf00b78]:hover{background:#e0a800}.detail-actions .btn-success[data-v-0bf00b78]{background:#28a745;color:#fff}.detail-actions .btn-success[data-v-0bf00b78]:hover{background:#218838}.detail-actions .btn-primary[data-v-0bf00b78]{background:#007bff;color:#fff}.detail-actions .btn-primary[data-v-0bf00b78]:hover{background:#0056b3}.btn[data-v-0bf00b78]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:6px;padding:8px 16px;transition:all .2s ease}.btn-primary[data-v-0bf00b78]{background:#007bff;color:#fff}.btn-primary[data-v-0bf00b78]:hover{background:#0056b3}.btn-secondary[data-v-0bf00b78]{background:#6c757d;color:#fff}.btn-secondary[data-v-0bf00b78]:hover{background:#5a6268}.btn-sm[data-v-0bf00b78]{font-size:12px;padding:4px 8px}.detail-actions .action-btn[data-v-0bf00b78]:before{background:rgba(0,0,0,.8);border-radius:4px;bottom:-32px;color:#fff;content:attr(title);font-size:11px;left:50%;opacity:0;padding:4px 8px;pointer-events:none;position:absolute;transform:translateX(-50%);transition:opacity .2s ease;white-space:nowrap;z-index:10}.detail-actions .action-btn[data-v-0bf00b78]:hover:before{opacity:1}@media (max-width:768px){.detail-dialog[data-v-0bf00b78]{margin:10px;width:98%}.detail-grid[data-v-0bf00b78]{gap:16px;grid-template-columns:1fr}.detail-footer[data-v-0bf00b78]{align-items:center;flex-direction:row;justify-content:space-between;padding:12px 16px}.close-detail-btn[data-v-0bf00b78]{font-size:14px;padding:6px 12px}.detail-actions[data-v-0bf00b78]{gap:6px}.detail-actions .action-btn[data-v-0bf00b78]{font-size:12px;height:32px;width:32px}.detail-actions .action-btn[data-v-0bf00b78]:before{bottom:-28px;font-size:10px}.timeline[data-v-0bf00b78]{padding:16px}.timeline[data-v-0bf00b78]:before{left:25px}.timeline-item[data-v-0bf00b78]{margin-left:10px;padding:12px}.timeline-icon[data-v-0bf00b78]{font-size:12px;height:32px;left:-26px;width:32px}.amount-display[data-v-0bf00b78]{font-size:24px}.exchange-rate-display[data-v-0bf00b78]{font-size:16px}.detail-content[data-v-0bf00b78],.detail-section[data-v-0bf00b78],.modal-header[data-v-0bf00b78]{padding:16px}.section-title[data-v-0bf00b78]{font-size:16px}}@media (max-width:480px){.detail-content[data-v-0bf00b78],.detail-section[data-v-0bf00b78]{padding:12px}.section-title[data-v-0bf00b78]{font-size:14px}.amount-display[data-v-0bf00b78]{font-size:20px}.exchange-rate-display[data-v-0bf00b78]{font-size:14px}.timeline-content[data-v-0bf00b78]{margin-left:10px}}@media print{.modal-overlay[data-v-0bf00b78]{-webkit-backdrop-filter:none!important;backdrop-filter:none!important;background:none!important;position:static!important}.detail-dialog[data-v-0bf00b78]{box-shadow:none!important;margin:0!important;max-width:none!important;width:100%!important}.modal-footer[data-v-0bf00b78],.modal-header[data-v-0bf00b78]{display:none!important}.detail-body[data-v-0bf00b78]{background:#fff!important;max-height:none!important}.btn[data-v-0bf00b78],.header-actions[data-v-0bf00b78]{display:none!important}.detail-section[data-v-0bf00b78]{-moz-column-break-inside:avoid;border:2px solid #333!important;break-inside:avoid;margin-bottom:20px!important;page-break-inside:avoid}.section-title[data-v-0bf00b78]{border-bottom:2px solid #333!important}}',""]),o.locals={},t.exports=o},946:function(t,e,n){"use strict";n(902)},947:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,'.audit-dialog[data-v-5c476a8a]{max-height:90vh;max-width:900px;width:95%}.audit-header[data-v-5c476a8a]{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff}.audit-content[data-v-5c476a8a]{max-height:70vh;overflow-y:auto}.error-container[data-v-5c476a8a],.loading-container[data-v-5c476a8a],.no-data-container[data-v-5c476a8a]{color:#666;padding:40px 20px;text-align:center}.spinner[data-v-5c476a8a]{animation:spin-5c476a8a 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#4f46e5;height:40px;margin:0 auto 20px;width:40px}@keyframes spin-5c476a8a{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-icon[data-v-5c476a8a],.no-data-icon[data-v-5c476a8a]{font-size:48px;margin-bottom:15px;opacity:.5}.audit-summary[data-v-5c476a8a]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:24px}.summary-card[data-v-5c476a8a]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;gap:12px;padding:16px}.summary-card[data-v-5c476a8a],.summary-icon[data-v-5c476a8a]{align-items:center;display:flex}.summary-icon[data-v-5c476a8a]{background:#4f46e5;border-radius:50%;color:#fff;font-size:18px;height:40px;justify-content:center;width:40px}.summary-info[data-v-5c476a8a]{flex:1}.summary-label[data-v-5c476a8a]{color:#64748b;font-size:12px;margin-bottom:4px}.summary-value[data-v-5c476a8a]{color:#1e293b;font-size:16px;font-weight:600}.audit-controls[data-v-5c476a8a]{margin-bottom:24px}.filter-controls[data-v-5c476a8a]{align-items:center;display:flex;gap:12px}.filter-select[data-v-5c476a8a]{border:1px solid #d1d5db;border-radius:6px;font-size:14px;max-width:200px;padding:8px 12px}.audit-timeline[data-v-5c476a8a]{position:relative}.audit-timeline[data-v-5c476a8a]:before{background:#e2e8f0;bottom:0;content:"";left:20px;position:absolute;top:0;width:2px}.timeline-item[data-v-5c476a8a]{margin-bottom:24px;margin-left:40px;position:relative}.timeline-item.expandable .timeline-header[data-v-5c476a8a]{cursor:pointer}.timeline-item.expandable .timeline-header[data-v-5c476a8a]:hover{background:#f8fafc}.timeline-marker[data-v-5c476a8a]{align-items:center;background:#fff;border:2px solid #e2e8f0;border-radius:50%;display:flex;font-size:16px;height:40px;justify-content:center;left:-60px;position:absolute;top:8px;width:40px}.timeline-content[data-v-5c476a8a]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.timeline-header[data-v-5c476a8a]{align-items:center;border-radius:8px;display:flex;justify-content:space-between;padding:16px;transition:background-color .2s}.timeline-main-info[data-v-5c476a8a]{flex:1}.timeline-action[data-v-5c476a8a]{align-items:center;display:flex;gap:12px;margin-bottom:4px}.action-badge[data-v-5c476a8a]{border-radius:12px;font-size:12px;font-weight:600;padding:4px 8px;text-transform:uppercase}.action-badge.create[data-v-5c476a8a]{background:#dcfce7;color:#166534}.action-badge.update[data-v-5c476a8a]{background:#fef3c7;color:#92400e}.action-badge.approve[data-v-5c476a8a]{background:#dcfce7;color:#166534}.action-badge.settle[data-v-5c476a8a]{background:#dbeafe;color:#1e40af}.action-badge.delete[data-v-5c476a8a]{background:#fee2e2;color:#dc2626}.timeline-time[data-v-5c476a8a]{color:#64748b;font-size:12px}.timeline-user[data-v-5c476a8a]{align-items:center;color:#475569;display:flex;font-size:14px;gap:6px}.timeline-toggle[data-v-5c476a8a]{align-items:center;color:#64748b;display:flex;gap:8px}.changes-count[data-v-5c476a8a],.toggle-icon[data-v-5c476a8a]{font-size:12px}.toggle-icon[data-v-5c476a8a]{transition:transform .2s}.timeline-reason[data-v-5c476a8a]{align-items:center;background:#f1f5f9;border-top:1px solid #e2e8f0;color:#475569;display:flex;font-size:14px;font-style:italic;gap:8px;padding:8px 16px}.timeline-details[data-v-5c476a8a]{background:#fafbfc;border-top:1px solid #e2e8f0;padding:16px}.changes-list h6[data-v-5c476a8a]{color:#374151;font-size:14px;margin:0 0 12px}.change-item[data-v-5c476a8a]{background:#fff;border:1px solid #e2e8f0;border-radius:6px;margin-bottom:12px;padding:12px}.change-field[data-v-5c476a8a]{align-items:center;color:#374151;display:flex;font-size:14px;font-weight:600;gap:8px;margin-bottom:8px}.change-values[data-v-5c476a8a]{grid-gap:12px;align-items:center;display:grid;gap:12px;grid-template-columns:1fr auto 1fr}.new-value[data-v-5c476a8a],.old-value[data-v-5c476a8a]{display:flex;flex-direction:column;gap:4px}.value-label[data-v-5c476a8a]{color:#64748b;font-size:12px;font-weight:500}.value[data-v-5c476a8a]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:4px;color:#1e293b;font-size:14px;padding:6px 8px}.old-value .value[data-v-5c476a8a]{background:#fef2f2;border-color:#fecaca;color:#991b1b}.new-value .value[data-v-5c476a8a]{background:#f0fdf4;border-color:#bbf7d0;color:#166534}.arrow[data-v-5c476a8a]{color:#64748b;font-size:14px}.view-full-details[data-v-5c476a8a]{margin-top:12px;text-align:center}.load-more-container[data-v-5c476a8a]{border-top:1px solid #e2e8f0;margin-top:24px;padding-top:24px;text-align:center}.btn[data-v-5c476a8a]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:8px 16px;transition:all .2s}.btn[data-v-5c476a8a]:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-1px)}.btn-primary[data-v-5c476a8a]{background:#4f46e5;color:#fff}.btn-secondary[data-v-5c476a8a]{background:#6b7280;color:#fff}.btn-info[data-v-5c476a8a]{background:#0ea5e9;color:#fff}.btn-link[data-v-5c476a8a]{background:none;border:1px solid transparent;color:#4f46e5;-webkit-text-decoration:none;text-decoration:none}.btn-link[data-v-5c476a8a]:hover{background:#f0f9ff;border-color:#bae6fd}.btn-sm[data-v-5c476a8a]{font-size:12px;padding:6px 12px}.btn[data-v-5c476a8a]:disabled{box-shadow:none!important;cursor:not-allowed;opacity:.6;transform:none!important}.audit-footer[data-v-5c476a8a]{background:#f8fafc;border-top:1px solid #e2e8f0;display:flex;gap:12px;justify-content:flex-end}@media (max-width:768px){.audit-dialog[data-v-5c476a8a]{margin:10px;width:98%}.audit-summary[data-v-5c476a8a]{grid-template-columns:1fr}.filter-controls[data-v-5c476a8a]{align-items:stretch;flex-direction:column}.filter-select[data-v-5c476a8a]{max-width:none}.timeline-item[data-v-5c476a8a]{margin-left:20px}.timeline-marker[data-v-5c476a8a]{font-size:14px;height:30px;left:-40px;width:30px}.change-values[data-v-5c476a8a]{gap:8px;grid-template-columns:1fr}.arrow[data-v-5c476a8a]{text-align:center;transform:rotate(90deg)}.audit-footer[data-v-5c476a8a]{flex-direction:column-reverse}.audit-footer .btn[data-v-5c476a8a]{justify-content:center;width:100%}}',""]),o.locals={},t.exports=o},948:function(t,e,n){"use strict";n(903)},949:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,'.modal-overlay[data-v-e6a23e30]{align-items:center;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.comparison-dialog[data-v-e6a23e30]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:1000px;overflow:hidden;width:95%}.modal-header[data-v-e6a23e30]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-title-section[data-v-e6a23e30]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-e6a23e30]{font-size:20px}.modal-title[data-v-e6a23e30]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-e6a23e30]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;opacity:.8;padding:8px;transition:opacity .2s}.close-btn[data-v-e6a23e30]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-e6a23e30]{max-height:70vh;overflow-y:auto;padding:0}.error-state[data-v-e6a23e30],.loading-state[data-v-e6a23e30],.no-differences[data-v-e6a23e30],.select-versions-prompt[data-v-e6a23e30]{align-items:center;display:flex;flex-direction:column;justify-content:center;padding:60px 20px;text-align:center}.spinner[data-v-e6a23e30]{animation:spin-e6a23e30 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#667eea;height:40px;margin-bottom:20px;width:40px}@keyframes spin-e6a23e30{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-icon[data-v-e6a23e30],.no-diff-icon[data-v-e6a23e30],.prompt-icon[data-v-e6a23e30]{font-size:48px;margin-bottom:20px;opacity:.6}.error-icon[data-v-e6a23e30]{color:#e74c3c}.prompt-icon[data-v-e6a23e30]{color:#3498db}.no-diff-icon[data-v-e6a23e30]{color:#27ae60}.version-selector[data-v-e6a23e30]{grid-gap:20px;align-items:end;background:#f8f9fa;border-bottom:1px solid #e9ecef;display:grid;gap:20px;grid-template-columns:1fr auto 1fr;padding:24px}.selector-group[data-v-e6a23e30]{display:flex;flex-direction:column;gap:8px}.selector-group label[data-v-e6a23e30]{color:#2c3e50;font-size:14px;font-weight:600}.form-control[data-v-e6a23e30]{background:#fff;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;padding:12px 16px;transition:border-color .2s ease}.form-control[data-v-e6a23e30]:focus{border-color:#667eea;outline:none}.comparison-arrow[data-v-e6a23e30]{align-items:center;background:#667eea;border-radius:50%;color:#fff;display:flex;font-size:16px;height:40px;justify-content:center;margin-top:24px;width:40px}.comparison-results[data-v-e6a23e30]{padding:24px}.comparison-summary[data-v-e6a23e30]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));margin-bottom:24px}.summary-card[data-v-e6a23e30]{background:#fff;border:1px solid #e9ecef;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);gap:12px;padding:16px}.summary-card[data-v-e6a23e30],.summary-icon[data-v-e6a23e30]{align-items:center;display:flex}.summary-icon[data-v-e6a23e30]{background:#667eea;border-radius:50%;color:#fff;font-size:16px;height:40px;justify-content:center;width:40px}.summary-number[data-v-e6a23e30]{color:#2c3e50;font-size:20px;font-weight:700}.summary-text[data-v-e6a23e30]{color:#2c3e50;font-size:12px;font-weight:600;word-break:break-word}.summary-label[data-v-e6a23e30]{color:#7f8c8d;font-size:11px;margin-top:4px}.differences-table h6[data-v-e6a23e30]{align-items:center;color:#2c3e50;display:flex;font-size:16px;font-weight:600;gap:8px;margin-bottom:16px}.table-container[data-v-e6a23e30]{border:1px solid #e9ecef;border-radius:8px;overflow:hidden}.comparison-table[data-v-e6a23e30]{background:#fff;border-collapse:collapse;width:100%}.comparison-table th[data-v-e6a23e30]{background:#f8f9fa;border-bottom:2px solid #e9ecef;font-size:13px;font-weight:600;padding:16px 12px;text-align:left}.field-header[data-v-e6a23e30]{color:#495057;width:200px}.version-header[data-v-e6a23e30]{position:relative}.version-header.version1[data-v-e6a23e30]{background:linear-gradient(135deg,#ffe6e6,#fcc)}.version-header.version2[data-v-e6a23e30]{background:linear-gradient(135deg,#e6ffe6,#cfc)}.version-info[data-v-e6a23e30]{text-align:center}.version-label[data-v-e6a23e30]{color:#2c3e50;font-weight:700}.version-date[data-v-e6a23e30]{color:#7f8c8d;font-size:11px;margin-top:2px}.comparison-table td[data-v-e6a23e30]{border-bottom:1px solid #f1f3f4;padding:16px 12px;vertical-align:top}.diff-row[data-v-e6a23e30]:hover{background:#f8f9fa}.field-cell[data-v-e6a23e30]{background:#fafbfc;border-right:1px solid #e9ecef}.field-info[data-v-e6a23e30]{align-items:center;display:flex;gap:8px}.field-info i[data-v-e6a23e30]{color:#6c757d;text-align:center;width:16px}.field-name[data-v-e6a23e30]{color:#495057;font-size:13px;font-weight:600}.value-cell[data-v-e6a23e30]{position:relative}.value-cell.version1[data-v-e6a23e30]{background:#fff8f8}.value-cell.version2[data-v-e6a23e30]{background:#f8fff8}.value-content[data-v-e6a23e30]{align-items:center;display:flex;justify-content:space-between;min-height:24px;position:relative}.value-text[data-v-e6a23e30]{background:hsla(0,0%,100%,.8);border:1px solid transparent;border-radius:4px;flex:1;font-family:"Monaco","Menlo","Ubuntu Mono",monospace;font-size:12px;padding:6px 10px}.old-value .value-text[data-v-e6a23e30]{background:#fef2f2;border-color:#fecaca;color:#dc2626}.new-value .value-text[data-v-e6a23e30]{background:#f0fdf4;border-color:#bbf7d0;color:#059669}.change-indicator[data-v-e6a23e30]{color:#3b82f6;font-size:12px;margin-left:8px;opacity:.7}.comparison-actions[data-v-e6a23e30]{gap:12px;justify-content:center;margin-top:24px;padding-top:24px}.comparison-actions[data-v-e6a23e30],.modal-footer[data-v-e6a23e30]{border-top:1px solid #e9ecef;display:flex}.modal-footer[data-v-e6a23e30]{align-items:center;background:#f8f9fa;justify-content:space-between;padding:20px 24px}.btn[data-v-e6a23e30]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn[data-v-e6a23e30]:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-1px)}.btn[data-v-e6a23e30]:disabled{cursor:not-allowed;opacity:.6;transform:none!important}.btn-primary[data-v-e6a23e30]{background:#667eea;color:#fff}.btn-secondary[data-v-e6a23e30]{background:#6c757d;color:#fff}.btn-warning[data-v-e6a23e30]{background:#f39c12;color:#fff}.btn-outline[data-v-e6a23e30]{background:#fff;border:2px solid #667eea;color:#667eea}.btn-outline[data-v-e6a23e30]:hover:not(:disabled){background:#667eea;color:#fff}.btn-sm[data-v-e6a23e30]{font-size:12px;padding:8px 16px}@media (max-width:768px){.comparison-dialog[data-v-e6a23e30]{margin:10px;width:98%}.version-selector[data-v-e6a23e30]{gap:16px;grid-template-columns:1fr}.comparison-arrow[data-v-e6a23e30]{margin:0 auto;transform:rotate(90deg)}.comparison-summary[data-v-e6a23e30]{grid-template-columns:1fr}.comparison-table[data-v-e6a23e30]{font-size:12px}.comparison-table td[data-v-e6a23e30],.comparison-table th[data-v-e6a23e30]{padding:12px 8px}.field-header[data-v-e6a23e30]{width:auto}.modal-footer[data-v-e6a23e30]{gap:12px}.comparison-actions[data-v-e6a23e30],.modal-footer[data-v-e6a23e30]{flex-direction:column}}',""]),o.locals={},t.exports=o},950:function(t,e,n){"use strict";n(904)},951:function(t,e,n){var o=n(14)((function(i){return i[1]}));o.push([t.i,".modal-overlay[data-v-7e1ed358]{align-items:center;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.reports-dialog[data-v-7e1ed358]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:1200px;overflow:hidden;width:95%}.modal-header[data-v-7e1ed358]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-title-section[data-v-7e1ed358]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-7e1ed358]{font-size:20px}.modal-title[data-v-7e1ed358]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-7e1ed358]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;opacity:.8;padding:8px;transition:opacity .2s}.close-btn[data-v-7e1ed358]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-7e1ed358]{max-height:70vh;overflow-y:auto;padding:0}.tabs-container[data-v-7e1ed358]{background:#f8f9fa;border-bottom:1px solid #e9ecef}.tabs[data-v-7e1ed358]{display:flex;padding:0 24px}.tab-btn[data-v-7e1ed358]{align-items:center;background:none;border:none;border-bottom:3px solid transparent;color:#6c757d;cursor:pointer;display:flex;font-size:14px;font-weight:500;gap:8px;padding:16px 24px;transition:all .2s ease}.tab-btn[data-v-7e1ed358]:hover{background:hsla(0,0%,100%,.5);color:#495057}.tab-btn.active[data-v-7e1ed358]{background:#fff;border-bottom-color:#667eea;color:#667eea}.report-content[data-v-7e1ed358]{padding:24px}.report-header[data-v-7e1ed358]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;margin-bottom:24px;padding-bottom:16px}.report-header h6[data-v-7e1ed358]{color:#2c3e50;font-size:16px;gap:8px;margin:0}.date-filter[data-v-7e1ed358],.report-header h6[data-v-7e1ed358]{align-items:center;display:flex}.date-filter[data-v-7e1ed358]{gap:12px}.date-filter span[data-v-7e1ed358]{color:#6c757d;font-size:14px}.form-control[data-v-7e1ed358]{border:1px solid #ddd;border-radius:4px;font-size:14px;padding:8px 12px}.loading-state[data-v-7e1ed358]{align-items:center;color:#6c757d;display:flex;gap:12px;justify-content:center;padding:60px}.spinner-sm[data-v-7e1ed358]{animation:spin-7e1ed358 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#667eea;height:20px;width:20px}.activity-summary[data-v-7e1ed358]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:24px}.summary-card[data-v-7e1ed358]{background:#fff;border:1px solid #e9ecef;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);gap:12px;padding:16px}.summary-card[data-v-7e1ed358],.summary-icon[data-v-7e1ed358]{align-items:center;display:flex}.summary-icon[data-v-7e1ed358]{background:#667eea;border-radius:50%;color:#fff;font-size:16px;height:40px;justify-content:center;width:40px}.summary-number[data-v-7e1ed358]{color:#2c3e50;font-size:20px;font-weight:700}.summary-text[data-v-7e1ed358]{color:#2c3e50;font-size:14px;font-weight:600}.summary-label[data-v-7e1ed358]{color:#7f8c8d;font-size:11px;margin-top:4px}.activity-table[data-v-7e1ed358]{border:1px solid #e9ecef;border-radius:8px;overflow:hidden}.table[data-v-7e1ed358]{border-collapse:collapse;margin:0;width:100%}.table th[data-v-7e1ed358]{background:#f8f9fa;border-bottom:1px solid #e9ecef;color:#495057;font-weight:600;text-align:left}.table td[data-v-7e1ed358],.table th[data-v-7e1ed358]{font-size:13px;padding:12px}.table td[data-v-7e1ed358]{border-bottom:1px solid #f1f3f4}.user-info[data-v-7e1ed358]{display:flex;flex-direction:column;gap:2px}.user-name[data-v-7e1ed358]{color:#2c3e50;font-weight:600}.user-id[data-v-7e1ed358]{color:#7f8c8d;font-size:11px}.activity-count[data-v-7e1ed358]{border-radius:12px;display:inline-block;font-size:11px;font-weight:600;min-width:24px;padding:4px 8px;text-align:center}.activity-count.create[data-v-7e1ed358]{background:#d4edda;color:#155724}.activity-count.update[data-v-7e1ed358]{background:#fff3cd;color:#856404}.activity-count.approve[data-v-7e1ed358]{background:#cce5ff;color:#004085}.activity-count.settle[data-v-7e1ed358]{background:#e2e3e5;color:#495057}.activity-count.delete[data-v-7e1ed358]{background:#f8d7da;color:#721c24}.total-count[data-v-7e1ed358]{color:#2c3e50;font-weight:700}.chart-container[data-v-7e1ed358]{margin-bottom:32px}.chart-container h6[data-v-7e1ed358]{color:#2c3e50;margin-bottom:16px}.chart-placeholder[data-v-7e1ed358]{background:#f8f9fa;border-radius:8px;min-height:200px;padding:20px}.chart-bars[data-v-7e1ed358]{align-items:end;display:flex;gap:4px;height:150px;margin-bottom:8px}.chart-bar[data-v-7e1ed358]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:4px 4px 0 0;cursor:pointer;flex:1;min-height:8px;position:relative;transition:all .2s ease}.chart-bar[data-v-7e1ed358]:hover{opacity:.8}.bar-value[data-v-7e1ed358]{color:#495057;font-size:10px;font-weight:600;left:50%;position:absolute;top:-20px;transform:translateX(-50%)}.chart-labels[data-v-7e1ed358]{display:flex;gap:4px}.chart-label[data-v-7e1ed358]{color:#6c757d;flex:1;font-size:10px;text-align:center}.breakdown-grid[data-v-7e1ed358]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));margin-bottom:32px}.breakdown-item[data-v-7e1ed358]{align-items:center;background:#f8f9fa;border-radius:8px;display:flex;gap:12px;padding:16px}.breakdown-icon[data-v-7e1ed358]{align-items:center;border-radius:50%;color:#fff;display:flex;font-size:14px;height:32px;justify-content:center;width:32px}.breakdown-icon.create[data-v-7e1ed358]{background:#28a745}.breakdown-icon.update[data-v-7e1ed358]{background:#ffc107;color:#212529}.breakdown-icon.approve[data-v-7e1ed358]{background:#17a2b8}.breakdown-icon.settle[data-v-7e1ed358]{background:#6c757d}.breakdown-icon.delete[data-v-7e1ed358]{background:#dc3545}.breakdown-label[data-v-7e1ed358]{color:#2c3e50;font-size:12px;font-weight:600}.breakdown-count[data-v-7e1ed358]{color:#495057;font-size:18px;font-weight:700}.breakdown-percentage[data-v-7e1ed358]{color:#7f8c8d;font-size:11px}.changes-timeline[data-v-7e1ed358]{display:flex;flex-direction:column;gap:12px}.change-item[data-v-7e1ed358]{background:#f8f9fa;border-radius:6px;gap:12px;padding:12px}.change-icon[data-v-7e1ed358],.change-item[data-v-7e1ed358]{align-items:center;display:flex}.change-icon[data-v-7e1ed358]{border-radius:50%;color:#fff;font-size:10px;height:24px;justify-content:center;width:24px}.change-content[data-v-7e1ed358]{flex:1}.change-text[data-v-7e1ed358]{color:#495057;font-size:13px;margin-bottom:2px}.change-time[data-v-7e1ed358]{color:#7f8c8d;font-size:11px}.export-options[data-v-7e1ed358]{display:flex;flex-direction:column;gap:24px}.export-option[data-v-7e1ed358]{border:1px solid #e9ecef;border-radius:8px;padding:20px}.option-header[data-v-7e1ed358]{align-items:center;display:flex;gap:12px;margin-bottom:12px}.option-header i[data-v-7e1ed358]{color:#667eea;font-size:18px}.option-header h6[data-v-7e1ed358]{color:#2c3e50;margin:0}.export-controls[data-v-7e1ed358]{gap:12px;margin-top:16px}.date-range[data-v-7e1ed358],.export-controls[data-v-7e1ed358]{align-items:center;display:flex}.date-range[data-v-7e1ed358]{gap:8px}.backup-info[data-v-7e1ed358]{color:#6c757d}.btn[data-v-7e1ed358]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:8px 16px;transition:all .2s ease}.btn[data-v-7e1ed358]:hover:not(:disabled){transform:translateY(-1px)}.btn[data-v-7e1ed358]:disabled{cursor:not-allowed;opacity:.6;transform:none!important}.btn-primary[data-v-7e1ed358]{background:#667eea;color:#fff}.btn-secondary[data-v-7e1ed358]{background:#6c757d;color:#fff}.btn-warning[data-v-7e1ed358]{background:#ffc107;color:#212529}.btn-outline[data-v-7e1ed358]{background:#fff;border:2px solid #667eea;color:#667eea}.btn-outline[data-v-7e1ed358]:hover:not(:disabled){background:#667eea;color:#fff}.btn-sm[data-v-7e1ed358]{font-size:12px;padding:6px 12px}.modal-footer[data-v-7e1ed358]{align-items:center;background:#f8f9fa;border-top:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px 24px}.no-data[data-v-7e1ed358]{color:#6c757d;padding:60px 20px;text-align:center}.no-data i[data-v-7e1ed358]{font-size:48px;margin-bottom:16px;opacity:.5}@media (max-width:768px){.reports-dialog[data-v-7e1ed358]{margin:10px;width:98%}.tabs[data-v-7e1ed358]{overflow-x:auto;padding:0 16px}.tab-btn[data-v-7e1ed358]{padding:12px 16px;white-space:nowrap}.report-content[data-v-7e1ed358]{padding:16px}.report-header[data-v-7e1ed358]{align-items:stretch;flex-direction:column;gap:16px}.date-filter[data-v-7e1ed358]{flex-wrap:wrap}.activity-summary[data-v-7e1ed358],.breakdown-grid[data-v-7e1ed358]{grid-template-columns:1fr}.export-controls[data-v-7e1ed358]{align-items:stretch;flex-direction:column}.date-range[data-v-7e1ed358]{justify-content:center}}@keyframes spin-7e1ed358{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),o.locals={},t.exports=o},974:function(t,e,n){"use strict";n.r(e);var o=n(1748),r=n(323),c=n(112),l=(n(39),n(9),n(5),n(7),n(12),n(8),n(13),n(17)),d=n(3),f=n(23);n(85),n(64),n(208),n(30),n(337),n(68),n(62),n(10),n(34);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(d.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"MoneyAdvanceDialog",components:{VoucherPrintComponent:n(906).default},props:{show:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},formData:{type:Object,default:function(){return{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",exchangeRate:"",method:"",externalRef:"",externalRefNo:"",externalBookingDate:"",chequeNo:"",receiveName:"",receiveIDNO:""}}},users:{type:Array,default:function(){return[]}},currencies:{type:Array,default:function(){return[]}},bankAccounts:{type:Array,default:function(){return[]}},ministries:{type:Array,default:function(){return[]}},formLoading:{type:Boolean,default:!1},saving:{type:Boolean,default:!1},paymentMethod:{type:String,default:"cash"}},data:function(){return{bookingDateMenu:!1,externalBookingDateMenu:!1,dueDateMenu:!1,pickerBookingDate:null,pickerDueDate:null,pickerExternalBookingDate:null,formattedBookingDate:null,formattedDueDate:null,formattedExternalBookingDate:null,advanceDetails:null,showPrintVoucher:!1,localForm:{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",exchangeRate:"",method:"",externalRef:"",externalRefNo:"",externalBookingDate:"",chequeNo:"",receiveName:"",receiveIDNO:""},formErrors:[]}},computed:{user:function(){return this.$auth.user||""},selectedCurrencyCode:function(){var t=this;if(!this.localForm.currencyId)return"USD";var e=this.currencies.find((function(e){return e.id==t.localForm.currencyId}));return e?e.code:"USD"},selectedBankAccount:function(){var t=this;return this.localForm.bankAccountId?this.bankAccounts.find((function(e){return e.id==t.localForm.bankAccountId})):null},selectedMinistry:function(){var t=this;return this.localForm.ministryId?this.ministries.find((function(e){return e.id==t.localForm.ministryId})):null},selectedCurrency:function(){var t=this;return this.localForm.currencyId?this.currencies.find((function(e){return e.id==t.localForm.currencyId})):null},filteredBankAccounts:function(){if(!this.selectedCurrency||!this.bankAccounts.length)return this.bankAccounts;var t=this.selectedCurrency.code,e=this.bankAccounts.filter((function(e){return e.currency===t||!e.currency}));return e.length>0?e:this.bankAccounts},today:function(){return(new Date).toISOString().split("T")[0]},isFormValid:function(){var t={"amount exists":!!this.localForm.amount,"amount > 0":this.localForm.amount&&parseFloat(this.localForm.amount)>0,"makerId exists":!!this.localForm.makerId,"currencyId exists":!!this.localForm.currencyId,"bookingDate exists":!!this.localForm.bookingDate,"method exists":!!this.localForm.method,"users available":this.users.length>0,"currencies available":this.currencies.length>0,"exchange rate valid":!this.localForm.exchangeRate||this.localForm.exchangeRate&&!isNaN(parseFloat(this.localForm.exchangeRate))&&parseFloat(this.localForm.exchangeRate)>0,"externalRef valid":!this.localForm.externalRef||this.localForm.externalRef.length<=100,"externalRefNo valid":!this.localForm.externalRefNo||this.localForm.externalRefNo.length<=50,"chequeNo valid":!this.localForm.chequeNo||this.localForm.chequeNo.length<=50,"receiveName valid":!this.localForm.receiveName||this.localForm.receiveName.length<=100,"receiveIDNO valid":!this.localForm.receiveIDNO||this.localForm.receiveIDNO.length<=20,"cheque number required":"cheque"!==this.localForm.method||"cheque"===this.localForm.method&&!!this.localForm.chequeNo,"bank account required":"bank_transfer"!==this.localForm.method||"bank_transfer"===this.localForm.method&&!!this.localForm.bankAccountId};return Object.values(t).every(Boolean)}},watch:{show:function(t){t&&this.initForm()},formData:{handler:function(t){console.info("Form data is changing...",t),t&&"object"===Object(f.a)(t)&&(!this.localForm.id||t.id&&t.id!==this.localForm.id?(this.localForm=v(v({},this.getDefaultForm()),t),this.localForm.method&&""!==this.localForm.method||(this.localForm.method=this.paymentMethod,console.info("🔧 Setting method to default: cash")),this.isEdit||this.localForm.bookingDate||(this.localForm.bookingDate=this.today),console.info("🔧 Updated localForm:",this.localForm)):console.info("🔧 Skipping update - local form already has this data"))},deep:!0,immediate:!0},"localForm.method":function(t,e){console.info('Method changed from "'.concat(e,'" to "').concat(t,'"')),e&&t!==e&&this.handleMethodChange()}},mounted:function(){console.info("🔧 Component mounted, initializing form... ".concat(this.paymentMethod)),this.initForm()},methods:{formatDateForDisplay:function(t){if(!t)return null;var e=new Date(t),n=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(n,"/").concat(o,"/").concat(r)},setBookingDate:function(t){this.pickerBookingDate=t,this.localForm.bookingDate=this.formatDateForAPI(t),this.formattedBookingDate=this.formatDateForDisplay(t),this.bookingDateMenu=!1,console.info("Set booking date: picker=".concat(t,", localForm=").concat(this.localForm.bookingDate,", formatted=").concat(this.formattedBookingDate))},setExternalBookingDate:function(t){this.pickerExternalBookingDate=t,this.localForm.externalBookingDate=this.formatDateForAPI(t),this.formattedExternalBookingDate=this.formatDateForDisplay(t),this.externalBookingDateMenu=!1,console.info("Set external booking date: picker=".concat(t,", localForm=").concat(this.localForm.externalBookingDate,", formatted=").concat(this.formattedExternalBookingDate))},setDueDate:function(t){this.pickerDueDate=t,this.localForm.dueDate=this.formatDateForAPI(t),this.formattedDueDate=this.formatDateForDisplay(t),this.dueDateMenu=!1,console.info("Set due date: picker=".concat(t,", localForm=").concat(this.localForm.dueDate,", formatted=").concat(this.formattedDueDate))},clearBookingDate:function(){this.pickerBookingDate=null,this.localForm.bookingDate="",this.formattedBookingDate=null},clearExternalBookingDate:function(){this.pickerExternalBookingDate=null,this.localForm.externalBookingDate="",this.formattedExternalBookingDate=null},clearDueDate:function(){this.pickerDueDate=null,this.localForm.dueDate="",this.formattedDueDate=null},getDefaultForm:function(){return{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:this.today,exchangeRate:"",method:this.paymentMethod,externalRef:"",externalRefNo:"",externalBookingDate:"",chequeNo:"",receiveName:"",receiveIDNO:""}},formatDisplayDate:function(t){if(!t)return"";try{var e=new Date(t),n=e.getDate().toString().padStart(2,"0"),o=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getFullYear();return"".concat(n,"/").concat(o,"/").concat(r)}catch(e){return t}},formatVoucherNumber:function(t){return String(t).padStart(6,"0")},fetchAdvanceByid:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.localForm.id){e.next=2;break}return e.abrupt("return",t.showToast("ກະລຸນາບັນທຶກຂໍ້ມູນກ່ອນ","error"));case 2:return t.loading=!0,e.prev=3,e.next=6,t.$axios.get("/api/money-advances/".concat(t.localForm.id));case 6:n=e.sent,data=n.data,t.advanceDetails=data.data,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t.showToast("Error fetching money advances","error"),console.error(e.t0);case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,11,15,18]])})))()},printAdvanceDetails:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.saveAdvance();case 2:return e.next=4,t.fetchAdvanceByid();case 4:t.showPrintVoucher=!0;case 5:case"end":return e.stop()}}),e)})))()},closePrintVoucher:function(){var t=this;this.showPrintVoucher=!1,setTimeout((function(){t.advanceDetails=null}),100)},initForm:function(){var t=this;if(this.formErrors=[],console.info("🔧 initForm called with formData:",this.formData),this.isEdit&&this.formData&&this.formData.id){if(console.info("🔧 Edit mode - copying formData with defaults preserved"),this.localForm=v(v({},this.getDefaultForm()),this.formData),this.localForm.method&&""!==this.localForm.method||(this.localForm.method=this.paymentMethod,console.info("🔧 Edit mode: Setting method to default cash")),this.localForm.bookingDate){var e=this.formatDateForAPI(this.localForm.bookingDate);this.localForm.bookingDate=e,this.pickerBookingDate=e,this.formattedBookingDate=this.formatDateForDisplay(e)}if(this.localForm.externalBookingDate){var n=this.formatDateForAPI(this.localForm.externalBookingDate);this.localForm.externalBookingDate=n,this.pickerExternalBookingDate=n,this.formattedExternalBookingDate=this.formatDateForDisplay(n)}if(this.localForm.dueDate){var o=this.formatDateForAPI(this.localForm.dueDate);this.localForm.dueDate=o,this.pickerDueDate=o,this.formattedDueDate=this.formatDateForDisplay(o)}}else{console.info("🔧 New mode - using defaults"),this.localForm=this.getDefaultForm(),console.info("POPERTY PAYMEN ".concat(this.paymentMethod));var r=this.today;if(this.localForm.bookingDate=r,this.pickerBookingDate=r,this.formattedBookingDate=this.formatDateForDisplay(r),this.localForm.method=this.paymentMethod,this.localForm.dueDate="",this.pickerDueDate=null,this.formattedDueDate=null,this.localForm.externalBookingDate="",this.pickerExternalBookingDate=null,this.formattedExternalBookingDate=null,this.currencies.length>0){var c=this.currencies.find((function(t){return"LAK"===t.code}))||this.currencies[0];this.localForm.currencyId=c.id}if(this.user&&this.user.id&&(this.localForm.makerId=this.user.id),this.formData&&Object.keys(this.formData).some((function(e){return t.formData[e]&&"id"!==e}))){if(console.info("🔧 Copying non-empty formData to localForm"),Object.assign(this.localForm,this.formData),this.localForm.bookingDate){var l=this.formatDateForAPI(this.localForm.bookingDate);this.localForm.bookingDate=l,this.pickerBookingDate=l,this.formattedBookingDate=this.formatDateForDisplay(l)}if(this.localForm.externalBookingDate){var d=this.formatDateForAPI(this.localForm.externalBookingDate);this.localForm.externalBookingDate=d,this.pickerExternalBookingDate=d,this.formattedExternalBookingDate=this.formatDateForDisplay(d)}if(this.localForm.dueDate){var f=this.formatDateForAPI(this.localForm.dueDate);this.localForm.dueDate=f,this.pickerDueDate=f,this.formattedDueDate=this.formatDateForDisplay(f)}}}this.localForm.method||(this.localForm.method=this.paymentMethod,console.info("🔧 Final fallback: Setting method to cash")),console.info("🔧 Final localForm with formatted dates:",this.localForm)},resetForm:function(){console.info("🔧 resetForm called"),this.localForm=this.getDefaultForm();var t=this.today;this.pickerBookingDate=t,this.formattedBookingDate=this.formatDateForDisplay(t),this.pickerDueDate=null,this.formattedDueDate=null,this.pickerExternalBookingDate=null,this.formattedExternalBookingDate=null,this.bookingDateMenu=!1,this.externalBookingDateMenu=!1,this.dueDateMenu=!1},validateForm:function(){return this.formErrors=[],(!this.localForm.amount||parseFloat(this.localForm.amount)<=0)&&this.formErrors.push("Amount is required and must be greater than 0"),this.localForm.makerId||this.formErrors.push("User selection is required"),this.localForm.currencyId||this.formErrors.push("Currency selection is required"),this.localForm.bookingDate||this.formErrors.push("Booking date is required"),this.localForm.method||this.formErrors.push("Payment method is required"),"cheque"!==this.localForm.method||this.localForm.chequeNo||this.formErrors.push("Cheque number is required when payment method is cheque"),"bank_transfer"!==this.localForm.method||this.localForm.bankAccountId||this.formErrors.push("Bank account is required when payment method is bank transfer"),this.localForm.purpose&&this.localForm.purpose.length>255&&this.formErrors.push("Purpose must not exceed 255 characters"),this.localForm.note&&this.localForm.note.length>500&&this.formErrors.push("Note must not exceed 500 characters"),this.localForm.exchangeRate&&parseFloat(this.localForm.exchangeRate)<=0&&this.formErrors.push("Exchange rate must be greater than 0 if provided"),this.localForm.externalRef&&this.localForm.externalRef.length>100&&this.formErrors.push("External reference must not exceed 100 characters"),this.localForm.externalRefNo&&this.localForm.externalRefNo.length>50&&this.formErrors.push("External reference number must not exceed 50 characters"),this.localForm.chequeNo&&this.localForm.chequeNo.length>50&&this.formErrors.push("Cheque number must not exceed 50 characters"),this.localForm.receiveName&&this.localForm.receiveName.length>100&&this.formErrors.push("Receiver name must not exceed 100 characters"),this.localForm.receiveIDNO&&this.localForm.receiveIDNO.length>20&&this.formErrors.push("Receiver ID number must not exceed 20 characters"),this.localForm.chequeNo&&!/^[a-zA-Z0-9\-\/]*$/.test(this.localForm.chequeNo)&&this.formErrors.push("Cheque number can only contain letters, numbers, hyphens, and forward slashes"),this.localForm.receiveIDNO&&!/^[a-zA-Z0-9]*$/.test(this.localForm.receiveIDNO)&&this.formErrors.push("Receiver ID number can only contain letters and numbers"),0===this.users.length&&this.formErrors.push("No users available. Please contact administrator."),0===this.currencies.length&&this.formErrors.push("No currencies available. Please contact administrator."),0===this.formErrors.length},updateSelectedCurrency:function(){var t=this;if(console.info("select currency: ".concat(this.selectedCurrency.code," currency list ").concat(JSON.stringify(this.currencies))),this.localForm.exchangeRate=this.currencies.find((function(e){return e.code===t.selectedCurrency.code})).rate||1,this.selectedBankAccount&&this.selectedCurrency){var e=this.selectedBankAccount.currency,n=this.selectedCurrency.code;e&&e!==n&&(this.localForm.bankAccountId="")}this.$emit("currency-changed",this.localForm.currencyId)},updateSelectedBankAccount:function(){this.$emit("bank-account-changed",this.localForm.bankAccountId)},updateSelectedMinistry:function(){this.$emit("ministry-changed",this.localForm.ministryId)},handleMethodChange:function(){var t=this.localForm.method;console.info("🔧 handleMethodChange: ".concat(t)),"cheque"!==t&&(this.localForm.chequeNo=""),"bank_transfer"!==t&&(this.localForm.bankAccountId=""),this.$emit("method-changed",t)},closeDialog:function(){this.$emit("close")},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[e](t):this.$notify?this.$notify({title:"error"===e?"Error":"Success",message:t,type:"error"===e?"error":"success"}):alert("".concat(e.toUpperCase(),": ").concat(t))},saveAdvance:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateForm()){e.next=3;break}return t.$emit("validation-error","Please fix the form errors"),e.abrupt("return");case 3:console.info("FORM DATA BEFORE CLEANING: ".concat(JSON.stringify(t.localForm))),(n=v({},t.localForm)).bookingDate&&(n.bookingDate=t.formatDateForAPI(n.bookingDate)),n.dueDate&&(n.dueDate=t.formatDateForAPI(n.dueDate)),n.externalBookingDate&&(n.externalBookingDate=t.formatDateForAPI(n.externalBookingDate)),n.ministryId||delete n.ministryId,n.bankAccountId||delete n.bankAccountId,n.dueDate||delete n.dueDate,n.purpose||delete n.purpose,n.note||delete n.note,n.exchangeRate||delete n.exchangeRate,n.externalRef||delete n.externalRef,n.externalRefNo||delete n.externalRefNo,n.externalBookingDate||delete n.externalBookingDate,n.chequeNo||delete n.chequeNo,n.receiveName||delete n.receiveName,n.receiveIDNO||delete n.receiveIDNO,console.info("CLEANED FORM DATA WITH FORMATTED DATES: ".concat(JSON.stringify(n))),t.$emit("save",n);case 22:case"end":return e.stop()}}),e)})))()},formatDateForAPI:function(t){if(!t)return null;if("string"==typeof t&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;try{var e=new Date(t);if(isNaN(e.getTime()))return null;var n=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(n,"-").concat(o,"-").concat(r)}catch(t){return console.error("Error formatting date for API:",t),null}}}},x=h,y=(n(942),n(31)),component=Object(y.a)(x,(function(){var t=this,e=t._self._c;return e("div",[t.show?e("div",{staticClass:"modal-overlay",on:{click:t.closeDialog}},[e("div",{staticClass:"modal-dialog enhanced-dialog",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"modal-header"},[e("div",{staticClass:"modal-title-section"},[e("i",{staticClass:"fas fa-money-bill-wave modal-icon"}),t._v(" "),e("h5",{staticClass:"modal-title"},[t._v("\n            "+t._s(t.isEdit?"ແກ້ໄຂລາຍຈ່າຍ":"ລົງບັນຊີລາຍຈ່າຍ")+"\n          ")])]),t._v(" "),e("div",{staticClass:"modal-header-right"},[e("span",{staticClass:"voucher-number"},[t._v("\n            ເລກທີ:\n            "+t._s(t.formData.id?t.formatVoucherNumber(t.localForm.id):"000000")+"\n          ")]),t._v(" "),e("button",{staticClass:"close-btn",on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"})])])]),t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.saveAdvance.apply(null,arguments)}}},[e("div",{staticClass:"modal-body"},[t.formLoading?e("div",{staticClass:"form-loading"},[e("div",{staticClass:"spinner-small"}),t._v(" "),e("p",[t._v("Loading form data...")])]):e("div",{staticClass:"form-grid"},[e("div",{staticClass:"form-group"},[t._m(0),t._v(" "),e(r.a,{ref:"bookingDateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto",disabled:t.formLoading||t.saving},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(c.a,t._g(t._b({class:{"compact-date-field":!0},attrs:{outlined:"",dense:"",clearable:"","hide-details":"","prepend-inner-icon":"mdi-calendar",disabled:t.formLoading||t.saving},on:{"click:clear":t.clearBookingDate},model:{value:t.formattedBookingDate,callback:function(e){t.formattedBookingDate=e},expression:"formattedBookingDate"}},"v-text-field",r,!1),o))]}}],null,!1,3606568412),model:{value:t.bookingDateMenu,callback:function(e){t.bookingDateMenu=e},expression:"bookingDateMenu"}},[t._v(" "),e(o.a,{attrs:{"no-title":"",max:t.today,disabled:t.formLoading||t.saving},on:{input:t.setBookingDate},model:{value:t.pickerBookingDate,callback:function(e){t.pickerBookingDate=e},expression:"pickerBookingDate"}})],1)],1),t._v(" "),e("div",{staticClass:"form-group"},[t._m(1),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.method,expression:"localForm.method"}],staticClass:"form-control custom-select",attrs:{required:""},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"method",e.target.multiple?n:n[0])},t.handleMethodChange]}},[e("option",{attrs:{value:""}},[t._v("ເລືອກວິທີການຊຳລະ")]),t._v(" "),e("option",{attrs:{value:"cash"}},[t._v("ເງິນສົດ (Cash)")]),t._v(" "),e("option",{attrs:{value:"cheque"}},[t._v("ເຊັກ (Cheque)")]),t._v(" "),e("option",{attrs:{value:"bank_transfer"}},[t._v("\n                    ໂອນທະນາຄານ (Bank Transfer)\n                  ")]),t._v(" "),e("option",{attrs:{value:"deduction"}},[t._v("ຫັກລົບ (Deduction)")])]),t._v(" "),t._m(2)])]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(3),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.currencyId,expression:"localForm.currencyId"}],staticClass:"form-control custom-select",attrs:{required:""},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"currencyId",e.target.multiple?n:n[0])},t.updateSelectedCurrency]}},[e("option",{attrs:{value:""}},[t._v("ເລືອກສະກຸນເງິນ")]),t._v(" "),t._l(t.currencies,(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v("\n                    "+t._s(n.code)+"\n                  ")])}))],2),t._v(" "),t._m(4)])]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(5),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.exchangeRate,expression:"localForm.exchangeRate"}],staticClass:"form-control",attrs:{type:"number",step:"0.000001",min:"0",placeholder:"ອັດຕາແລກປ່ຽນ"},domProps:{value:t.localForm.exchangeRate},on:{input:function(e){e.target.composing||t.$set(t.localForm,"exchangeRate",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(6),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.amount,expression:"localForm.amount"}],staticClass:"form-control",attrs:{type:"number",step:"0.01",min:"0",placeholder:"Enter amount",required:""},domProps:{value:t.localForm.amount},on:{input:function(e){e.target.composing||t.$set(t.localForm,"amount",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(7),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.makerId,expression:"localForm.makerId"}],staticClass:"form-control custom-select",attrs:{required:"",disabled:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"makerId",e.target.multiple?n:n[0])}}},[e("option",{attrs:{value:""}},[t._v("ເລືອກຜູ້ລົງ")]),t._v(" "),t._l(t.users,(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v("\n                    "+t._s(n.cus_name)+"\n                  ")])}))],2),t._v(" "),t._m(8)])]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(9),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.externalRef,expression:"localForm.externalRef"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ອີງໃສ່ໃບສະເໜີ / ຖອນ",maxlength:"100"},domProps:{value:t.localForm.externalRef},on:{input:function(e){e.target.composing||t.$set(t.localForm,"externalRef",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(10),t._v(" "),e(r.a,{ref:"externalBookingDateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto",disabled:t.formLoading||t.saving},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(c.a,t._g(t._b({class:{"compact-date-field":!0},attrs:{outlined:"",dense:"",clearable:"","hide-details":"","prepend-inner-icon":"mdi-calendar-check",disabled:t.formLoading||t.saving,placeholder:"ເລືອກວັນທີ"},on:{"click:clear":t.clearExternalBookingDate},model:{value:t.formattedExternalBookingDate,callback:function(e){t.formattedExternalBookingDate=e},expression:"formattedExternalBookingDate"}},"v-text-field",r,!1),o))]}}],null,!1,123352561),model:{value:t.externalBookingDateMenu,callback:function(e){t.externalBookingDateMenu=e},expression:"externalBookingDateMenu"}},[t._v(" "),e(o.a,{attrs:{"no-title":"",max:t.today,disabled:t.formLoading||t.saving},on:{input:t.setExternalBookingDate},model:{value:t.pickerExternalBookingDate,callback:function(e){t.pickerExternalBookingDate=e},expression:"pickerExternalBookingDate"}})],1)],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"cheque"===t.localForm.method,expression:"localForm.method === 'cheque'"}],staticClass:"form-group"},[e("label",{staticClass:"form-label",class:{required:"cheque"===t.localForm.method}},[e("i",{staticClass:"fas fa-money-check"}),t._v("\n                ເລກເຊັກ\n              ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.chequeNo,expression:"localForm.chequeNo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເລກເຊັກ",maxlength:"50",required:"cheque"===t.localForm.method},domProps:{value:t.localForm.chequeNo},on:{input:function(e){e.target.composing||t.$set(t.localForm,"chequeNo",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(11),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.receiveName,expression:"localForm.receiveName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ຊື່ຜູ້ຮັບເງິນ",maxlength:"100"},domProps:{value:t.localForm.receiveName},on:{input:function(e){e.target.composing||t.$set(t.localForm,"receiveName",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(12),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.receiveIDNO,expression:"localForm.receiveIDNO"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເລກບັດປະຈຳຕົວ",maxlength:"20"},domProps:{value:t.localForm.receiveIDNO},on:{input:function(e){e.target.composing||t.$set(t.localForm,"receiveIDNO",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[t._m(13),t._v(" "),e(r.a,{ref:"dueDateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto",disabled:t.formLoading||t.saving},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(c.a,t._g(t._b({class:{"compact-date-field":!0},attrs:{outlined:"",dense:"",clearable:"","hide-details":"","prepend-inner-icon":"mdi-calendar-clock",disabled:t.formLoading||t.saving},on:{"click:clear":t.clearDueDate},model:{value:t.formattedDueDate,callback:function(e){t.formattedDueDate=e},expression:"formattedDueDate"}},"v-text-field",r,!1),o))]}}],null,!1,3924764633),model:{value:t.dueDateMenu,callback:function(e){t.dueDateMenu=e},expression:"dueDateMenu"}},[t._v(" "),e(o.a,{attrs:{"no-title":"",min:t.today,disabled:t.formLoading||t.saving},on:{input:t.setDueDate},model:{value:t.pickerDueDate,callback:function(e){t.pickerDueDate=e},expression:"pickerDueDate"}})],1)],1),t._v(" "),e("div",{staticClass:"form-group span-2"},[t._m(14),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.ministryId,expression:"localForm.ministryId"}],staticClass:"form-control custom-select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"ministryId",e.target.multiple?n:n[0])},t.updateSelectedMinistry]}},[e("option",{attrs:{value:""}},[t._v("ເລືອກກົມ (ທາງເລືອກ)")]),t._v(" "),t._l(t.ministries,(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v("\n                    "+t._s(n.ministryCode+" "+n.ministryName)+"\n                  ")])}))],2),t._v(" "),t._m(15)]),t._v(" "),t.selectedMinistry?e("div",{staticClass:"ministry-info"},[e("div",{staticClass:"ministry-details"},[e("div",{staticClass:"ministry-detail-item"},[e("i",{staticClass:"fas fa-building"}),t._v(" "),e("span",{staticClass:"ministry-name"},[t._v(t._s(t.selectedMinistry.ministryName))])]),t._v(" "),t.selectedMinistry.ministryCode?e("div",{staticClass:"ministry-detail-item"},[e("i",{staticClass:"fas fa-tag"}),t._v(" "),e("span",{staticClass:"ministry-code"},[t._v(t._s(t.selectedMinistry.ministryCode))])]):t._e()])]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"bank_transfer"===t.localForm.method,expression:"localForm.method === 'bank_transfer'"}],staticClass:"form-group"},[e("label",{staticClass:"form-label",class:{required:"bank_transfer"===t.localForm.method}},[e("i",{staticClass:"fas fa-university"}),t._v("\n                ບັນຊີທະນາຄານ\n              ")]),t._v(" "),e("div",{staticClass:"custom-select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.localForm.bankAccountId,expression:"localForm.bankAccountId"}],staticClass:"form-control custom-select",attrs:{required:"bank_transfer"===t.localForm.method},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.localForm,"bankAccountId",e.target.multiple?n:n[0])},t.updateSelectedBankAccount]}},[e("option",{attrs:{value:""}},[t._v("ເລືອກບັນຊີ")]),t._v(" "),t._l(t.filteredBankAccounts,(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v("\n                    "+t._s(n.bankName)+" - "+t._s(n.accountNumber)+"\n                  ")])}))],2),t._v(" "),t._m(16)]),t._v(" "),t.selectedBankAccount?e("div",{staticClass:"bank-account-info"},[e("div",{staticClass:"bank-details"},[e("div",{staticClass:"bank-detail-item"},[e("i",{staticClass:"fas fa-building"}),t._v(" "),e("span",[t._v(t._s(t.selectedBankAccount.bankName))])]),t._v(" "),e("div",{staticClass:"bank-detail-item"},[e("i",{staticClass:"fas fa-credit-card"}),t._v(" "),e("span",[t._v(t._s(t.selectedBankAccount.accountNumber))])])])]):t._e()]),t._v(" "),e("div",{staticClass:"form-group full-width"},[t._m(17),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.localForm.purpose,expression:"localForm.purpose"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເນື້ອໃນ ການອອກລາຍຈ່າຍ",maxlength:"255"},domProps:{value:t.localForm.purpose},on:{input:function(e){e.target.composing||t.$set(t.localForm,"purpose",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group full-width"},[t._m(18),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.localForm.note,expression:"localForm.note"}],staticClass:"form-control",attrs:{rows:"2",placeholder:"ລາຍລະອຽດເພີ່ມເຕີມ...",maxlength:"500"},domProps:{value:t.localForm.note},on:{input:function(e){e.target.composing||t.$set(t.localForm,"note",e.target.value)}}})])]),t._v(" "),t.formErrors.length>0?e("div",{staticClass:"form-errors"},[t._m(19),t._v(" "),e("ul",t._l(t.formErrors,(function(n){return e("li",{key:n},[t._v(t._s(n))])})),0)]):t._e()]),t._v(" "),e("div",{staticClass:"modal-footer enhanced-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:t.saving},on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"}),t._v("\n            ອອກ\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.saving||t.formLoading||!t.isFormValid}},[t.saving?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas",class:t.isEdit?"fa-save":"fa-plus"}),t._v("\n            "+t._s(t.saving?"Saving...":t.isEdit?"ບັນທຶກ ການແກ້ໄຂ":"ບັນທຶກ")+"\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-danger",attrs:{title:"Save & Print"},on:{click:function(e){return e.preventDefault(),t.printAdvanceDetails.apply(null,arguments)}}},[e("i",{staticClass:"fas fa-print"}),t._v("\n            Save & Print\n          ")])])])])]):t._e(),t._v(" "),t.showPrintVoucher&&t.advanceDetails?e("VoucherPrintComponent",{key:t.advanceDetails.id,attrs:{"voucher-data":t.advanceDetails},on:{close:t.closePrintVoucher}}):t._e()],1)}),[function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-calendar"}),this._v("\n                ວັນທີ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-credit-card"}),this._v("\n                ວິທີການຈ່າຍເງິນ\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-coins"}),this._v("\n                ສະກຸນເງິນ\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-exchange-alt"}),this._v("\n                ອັດຕາແລກປ່ຽນ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-dollar-sign"}),this._v("\n                ຈຳນວນເງິນ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label required"},[t("i",{staticClass:"fas fa-user"}),this._v("\n                ຜູ້ໃຊ້\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-external-link-alt"}),this._v("\n                ອີງໃສ່ໃບສະເໜີ / ຖອນ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-calendar-check"}),this._v("\n                ວັນທີອ້າງອີງພາຍນອກ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-user-circle"}),this._v("\n                ຊື່ຜູ້ຮັບ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-id-card"}),this._v("\n                ເລກບັດປະຈຳຕົວຜູ້ຮັບ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-calendar-alt"}),this._v("\n                ວັນຄົບຮອບຄວນຊຳລະ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-building"}),this._v("\n                ກົມ\n              ")])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("div",{staticClass:"select-icon"},[t("i",{staticClass:"fas fa-chevron-down"})])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-tag"}),this._v("\n                ຈຸດປະສົງ\n              ")])},function(){var t=this._self._c;return t("label",{staticClass:"form-label"},[t("i",{staticClass:"fas fa-sticky-note"}),this._v("\n                ໂນ໊ດ\n              ")])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-exclamation-circle"}),this._v("\n              Please fix the following errors:\n            ")])}],!1,null,"0024d5f2",null);e.default=component.exports},975:function(t,e,n){"use strict";n.r(e);var o={name:"MoneyAdvanceDetailDialog",props:{show:{type:Boolean,default:!1},details:{type:Object,default:null},loading:{type:Boolean,default:!1},statusLabels:{type:Object,default:function(){return{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ",rejected:"ປະຕິເສດ",cancelled:"ຍົກເລີກ"}}}},methods:{closeDialog:function(){this.$emit("close")},printDetails:function(){this.$emit("print")},downloadDetails:function(){this.$emit("download")},retryLoad:function(){this.$emit("retry-load")},editAdvance:function(){this.$emit("edit",this.details)},approveAdvance:function(){this.$emit("approve",this.details)},createSettlement:function(){this.$emit("create-settlement",this.details)},getStatusInLao:function(t){return this.statusLabels[t]||t.toUpperCase()},getStatusIcon:function(t){return{pending:"fa-clock",approved:"fa-check-circle",settled:"fa-money-bill-wave",rejected:"fa-times-circle",cancelled:"fa-ban"}[t]||"fa-question-circle"},getHistoryIcon:function(t){return{created:"fa-plus",updated:"fa-edit",approved:"fa-check",settled:"fa-money-bill",deleted:"fa-trash",rejected:"fa-times",cancelled:"fa-ban"}[t]||"fa-history"},formatCurrency:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)},formatExchangeRate:function(t){return t?new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:6}).format(t):"N/A"},formatDateTime:function(t){return t?new Date(t).toLocaleString():"N/A"},isOverdue:function(t){return!!t&&new Date(t)<new Date}}},r=(n(944),n(31)),component=Object(r.a)(o,(function(){var t,e,n,o=this,r=o._self._c;return o.show?r("div",{staticClass:"modal-overlay",on:{click:o.closeDialog}},[r("div",{staticClass:"modal-dialog detail-dialog",on:{click:function(t){t.stopPropagation()}}},[r("div",{staticClass:"modal-header"},[o._m(0),o._v(" "),r("div",{staticClass:"header-actions"},[r("button",{staticClass:"btn-icon",attrs:{title:"Print"},on:{click:o.printDetails}},[r("i",{staticClass:"fas fa-print"})]),o._v(" "),r("button",{staticClass:"btn-icon",attrs:{title:"Download"},on:{click:o.downloadDetails}},[r("i",{staticClass:"fas fa-download"})]),o._v(" "),r("button",{staticClass:"close-btn",on:{click:o.closeDialog}},[r("i",{staticClass:"fas fa-times"})])])]),o._v(" "),r("div",{staticClass:"modal-body detail-body"},[o.loading?r("div",{staticClass:"detail-loading"},[r("div",{staticClass:"spinner-small"}),o._v(" "),r("p",[o._v("Loading details...")])]):o.details?r("div",{staticClass:"detail-content"},[r("div",{staticClass:"detail-status"},[r("span",{class:["status-badge","status-"+o.details.status]},[r("i",{staticClass:"fas",class:o.getStatusIcon(o.details.status)}),o._v("\n            "+o._s(o.getStatusInLao(o.details.status))+"\n          ")])]),o._v(" "),r("div",{staticClass:"detail-section"},[o._m(1),o._v(" "),r("div",{staticClass:"detail-grid"},[r("div",{staticClass:"detail-item"},[r("label",[o._v("ID")]),o._v(" "),r("span",{staticClass:"detail-value"},[o._v("#"+o._s(o.details.id))])]),o._v(" "),r("div",{staticClass:"detail-item"},[r("label",[o._v("ຈຳນວນເງິນ")]),o._v(" "),r("span",{staticClass:"detail-value amount-display"},[o._v("\n                "+o._s(o.formatCurrency(o.details.amount))+"\n                "),r("small",[o._v(o._s(null===(t=o.details.currency)||void 0===t?void 0:t.code))])])]),o._v(" "),o.details.exchangeRate?r("div",{staticClass:"detail-item"},[r("label",[o._v("ອັດຕາແລກປ່ຽນ")]),o._v(" "),r("span",{staticClass:"detail-value exchange-rate-display"},[r("i",{staticClass:"fas fa-exchange-alt"}),o._v("\n                "+o._s(o.formatExchangeRate(o.details.exchangeRate))+"\n              ")])]):o._e(),o._v(" "),r("div",{staticClass:"detail-item full-width"},[r("label",[o._v("ຈຸດປະສົງ")]),o._v(" "),r("span",{staticClass:"detail-value"},[o._v(o._s(o.details.purpose||"No purpose specified"))])])])]),o._v(" "),r("div",{staticClass:"detail-section"},[o._m(2),o._v(" "),r("div",{staticClass:"detail-grid"},[r("div",{staticClass:"detail-item"},[r("label",[o._v("ຜູ້ລົງບັນຊີ")]),o._v(" "),r("span",{staticClass:"detail-value user-info"},[r("i",{staticClass:"fas fa-user"}),o._v("\n                "+o._s((null===(e=o.details.maker)||void 0===e?void 0:e.cus_name)||"N/A")+"\n              ")])]),o._v(" "),r("div",{staticClass:"detail-item"},[r("label",[o._v("ຜູ້ອະນຸມັດ")]),o._v(" "),r("span",{staticClass:"detail-value user-info"},[r("i",{staticClass:"fas fa-user-check"}),o._v("\n                "+o._s((null===(n=o.details.checker)||void 0===n?void 0:n.cus_name)||"Not yet approved")+"\n              ")])])])]),o._v(" "),r("div",{staticClass:"detail-section"},[o._m(3),o._v(" "),r("div",{staticClass:"timeline"},[r("div",{staticClass:"timeline-item"},[o._m(4),o._v(" "),r("div",{staticClass:"timeline-content"},[r("label",[o._v("ລົງບັນຊີລາຍຈ່າຍ")]),o._v(" "),r("span",{staticClass:"timeline-date"},[o._v(o._s(o.formatDateTime(o.details.createdAt)))])])]),o._v(" "),o.details.approvedAt?r("div",{staticClass:"timeline-item"},[o._m(5),o._v(" "),r("div",{staticClass:"timeline-content"},[r("label",[o._v("ອະນຸມັດແລ້ວ")]),o._v(" "),r("span",{staticClass:"timeline-date"},[o._v(o._s(o.formatDateTime(o.details.approvedAt)))])])]):o._e(),o._v(" "),o.details.dueDate?r("div",{staticClass:"timeline-item"},[r("div",{staticClass:"timeline-icon due",class:{overdue:o.isOverdue(o.details.dueDate)}},[r("i",{staticClass:"fas fa-clock"})]),o._v(" "),r("div",{staticClass:"timeline-content"},[r("label",[o._v("ວັນຄົບຮອບຄວນຊຳລະ")]),o._v(" "),r("span",{staticClass:"timeline-date",class:{overdue:o.isOverdue(o.details.dueDate)}},[o._v("\n                  "+o._s(o.formatDateTime(o.details.dueDate))+"\n                  "),o.isOverdue(o.details.dueDate)?r("span",{staticClass:"overdue-badge"},[r("i",{staticClass:"fas fa-exclamation-triangle"}),o._v(" Overdue\n                  ")]):o._e()])])]):o._e(),o._v(" "),o.details.settledAt?r("div",{staticClass:"timeline-item"},[o._m(6),o._v(" "),r("div",{staticClass:"timeline-content"},[r("label",[o._v("ຮັບຊຳລະ")]),o._v(" "),r("span",{staticClass:"timeline-date"},[o._v(o._s(o.formatDateTime(o.details.settledAt)))])])]):o._e()])]),o._v(" "),o.details.note?r("div",{staticClass:"detail-section"},[o._m(7),o._v(" "),r("div",{staticClass:"notes-content"},[o._v("\n            "+o._s(o.details.note)+"\n          ")])]):o._e(),o._v(" "),o.details.history&&o.details.history.length>0?r("div",{staticClass:"detail-section"},[o._m(8),o._v(" "),r("div",{staticClass:"history-list"},o._l(o.details.history,(function(t,e){return r("div",{key:e,staticClass:"history-item"},[r("div",{staticClass:"history-icon"},[r("i",{staticClass:"fas",class:o.getHistoryIcon(t.action)})]),o._v(" "),r("div",{staticClass:"history-content"},[r("span",{staticClass:"history-action"},[o._v(o._s(t.action))]),o._v(" "),r("span",{staticClass:"history-user"},[o._v("by "+o._s(t.user))]),o._v(" "),r("span",{staticClass:"history-date"},[o._v(o._s(o.formatDateTime(t.createdAt)))])])])})),0)]):o._e()]):r("div",{staticClass:"detail-error"},[r("i",{staticClass:"fas fa-exclamation-triangle"}),o._v(" "),r("p",[o._v("Failed to load advance details")]),o._v(" "),r("button",{staticClass:"btn btn-primary btn-sm",on:{click:o.retryLoad}},[r("i",{staticClass:"fas fa-redo"}),o._v(" Try Again\n        ")])])]),o._v(" "),r("div",{staticClass:"modal-footer detail-footer"},[r("button",{staticClass:"btn btn-secondary close-detail-btn",on:{click:o.closeDialog}},[r("i",{staticClass:"fas fa-times"}),o._v("\n        Close\n      ")]),o._v(" "),r("div",{staticClass:"detail-actions"},[o.details&&"pending"===o.details.status?r("button",{staticClass:"btn btn-warning action-btn",attrs:{title:"Edit"},on:{click:o.editAdvance}},[r("i",{staticClass:"fas fa-edit"})]):o._e(),o._v(" "),o.details&&"pending"===o.details.status?r("button",{staticClass:"btn btn-success action-btn",attrs:{title:"Approve"},on:{click:o.approveAdvance}},[r("i",{staticClass:"fas fa-check"})]):o._e(),o._v(" "),o.details&&"approved"===o.details.status?r("button",{staticClass:"btn btn-success action-btn",attrs:{title:"Create Settlement"},on:{click:o.createSettlement}},[r("i",{staticClass:"fas fa-file-invoice-dollar"})]):o._e()])])])]):o._e()}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-title-section"},[e("i",{staticClass:"fas fa-file-invoice-dollar modal-icon"}),t._v(" "),e("h5",{staticClass:"modal-title"},[t._v("ລາຍລະອຽດການອອກລາຍຈ່າຍ")])])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-info-circle"}),this._v("\n            ຂໍ້ມູນເບື້ອງຕົ້ນ\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-users"}),this._v("\n            ຜູ້ໃຊ້ ທີ່ກ່ຽວຂ້ອງ\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-calendar"}),this._v("\n            ການເຄື່ອນໄຫວລາຍການ\n          ")])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon created"},[t("i",{staticClass:"fas fa-plus"})])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon approved"},[t("i",{staticClass:"fas fa-check"})])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon settled"},[t("i",{staticClass:"fas fa-money-bill"})])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-sticky-note"}),this._v("\n            Notes\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-history"}),this._v("\n            Action History\n          ")])}],!1,null,"0bf00b78",null);e.default=component.exports},976:function(t,e,n){"use strict";n.r(e);n(39),n(9),n(5),n(10),n(7),n(12),n(8),n(13);var o=n(36),r=n(3),c=n(17);n(85),n(24),n(38),n(52),n(68),n(54),n(53),n(832),n(448),n(30);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"MoneyAdvanceAuditDialog",props:{show:{type:Boolean,default:!1},recordId:{type:[Number,String],required:!0},recordTitle:{type:String,default:""}},data:function(){return{auditTrail:[],filteredAuditTrail:[],loading:!1,loadingMore:!1,error:null,actionFilter:"",currentPage:1,hasMoreData:!1,actionLabels:{CREATE:"ສ້າງ",UPDATE:"ແກ້ໄຂ",APPROVE:"ອະນຸມັດ",SETTLE:"ຊຳລະ",DELETE:"ລົບ"},fieldLabels:{amount:"ຈຳນວນເງິນ",purpose:"ຈຸດປະສົງ",status:"ສະຖານະ",note:"ໂນ໊ດ",dueDate:"ວັນຄົບຮອບ",bookingDate:"ວັນທີບັນຊີ",makerId:"ຜູ້ລົງບັນຊີ",checkerId:"ຜູ້ກວດ",currencyId:"ສະກຸນເງິນ",bankAccountId:"ບັນຊີທະນາຄານ",ministryId:"ກະຊວງ",exchangeRate:"ອັດຕາແລກປ່ຽນ",approvedAt:"ວັນທີອະນຸມັດ"}}},watch:{show:function(t){t&&this.recordId&&this.loadAuditTrail()},recordId:function(t){t&&this.show&&this.loadAuditTrail()}},methods:{loadAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,t.currentPage=1,e.prev=3,e.next=6,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:20,offset:0}});case 6:n=e.sent,t.auditTrail=n.data.data.map((function(t){return d(d({},t),{},{expanded:!1})})),t.hasMoreData=20===n.data.data.length,t.filterAuditTrail(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("Error loading audit trail:",e.t0),t.error=(null===(o=e.t0.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||"ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ";case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})))()},loadMoreAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingMore=!0,t.currentPage++,e.prev=2,e.next=5,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:20,offset:20*(t.currentPage-1)}});case 5:r=e.sent,c=r.data.data.map((function(t){return d(d({},t),{},{expanded:!1})})),(n=t.auditTrail).push.apply(n,Object(o.a)(c)),t.hasMoreData=20===c.length,t.filterAuditTrail(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Error loading more audit trail:",e.t0),t.currentPage--;case 16:return e.prev=16,t.loadingMore=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,12,16,19]])})))()},filterAuditTrail:function(){var t=this;this.actionFilter?this.filteredAuditTrail=this.auditTrail.filter((function(e){return e.action===t.actionFilter})):this.filteredAuditTrail=Object(o.a)(this.auditTrail)},toggleExpand:function(t){t.totalChanges>0&&this.$set(t,"expanded",!t.expanded)},getActionInLao:function(t){return this.actionLabels[t]||t},getFieldNameInLao:function(t){return this.fieldLabels[t]||t},getActionIcon:function(t){return{CREATE:"fas fa-plus text-success",UPDATE:"fas fa-edit text-warning",APPROVE:"fas fa-check text-success",SETTLE:"fas fa-money-bill text-info",DELETE:"fas fa-trash text-danger"}[t]||"fas fa-circle"},getFieldIcon:function(t){return{amount:"fas fa-dollar-sign",purpose:"fas fa-tag",status:"fas fa-flag",note:"fas fa-sticky-note",dueDate:"fas fa-calendar",bookingDate:"fas fa-calendar-alt",makerId:"fas fa-user",checkerId:"fas fa-user-check",currencyId:"fas fa-coins",bankAccountId:"fas fa-university",ministryId:"fas fa-building",exchangeRate:"fas fa-exchange-alt",approvedAt:"fas fa-check-circle"}[t]||"fas fa-info-circle"},formatValue:function(t,e){if(null==e)return"ບໍ່ມີ";if("amount"===t)return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);if(t.includes("Date")||t.includes("At"))return this.formatDate(e);if("status"===t){return{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ"}[e]||e}return e.toString()},formatDateTime:function(t){return t?new Date(t).toLocaleString("lo-LA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},formatDate:function(t){return t?new Date(t).toLocaleDateString("lo-LA"):"N/A"},exportAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,o,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:1e3,offset:0,format:"csv"},responseType:"blob"});case 3:n=e.sent,o=new Blob([n.data],{type:"text/csv"}),r=window.URL.createObjectURL(o),(a=document.createElement("a")).href=r,a.download="audit-trail-".concat(t.recordId,"-").concat(Date.now(),".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$emit("show-toast","ເກີດຂໍ້ຜິດພາດໃນການສົ່ງອອກຂໍ້ມູນ","error");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))()},compareVersions:function(){this.$emit("compare-versions",this.recordId)},viewFullDetails:function(t){this.$emit("view-full-details",t)},closeDialog:function(){this.$emit("close")}}},m=(n(946),n(31)),component=Object(m.a)(f,(function(){var t,e,n=this,o=n._self._c;return n.show?o("div",{staticClass:"modal-overlay",on:{click:n.closeDialog}},[o("div",{staticClass:"modal-dialog audit-dialog",on:{click:function(t){t.stopPropagation()}}},[o("div",{staticClass:"modal-header audit-header"},[o("div",{staticClass:"modal-title-section"},[o("i",{staticClass:"fas fa-history modal-icon"}),n._v(" "),o("h5",{staticClass:"modal-title"},[n._v("\n          ປະຫວັດການປ່ຽນແປງ - "+n._s(n.recordTitle)+"\n        ")])]),n._v(" "),o("button",{staticClass:"close-btn",on:{click:n.closeDialog}},[o("i",{staticClass:"fas fa-times"})])]),n._v(" "),o("div",{staticClass:"modal-body"},[n.loading?o("div",{staticClass:"loading-container"},[o("div",{staticClass:"spinner"}),n._v(" "),o("p",[n._v("ກຳລັງໂຫຼດປະຫວັດການປ່ຽນແປງ...")])]):n.error?o("div",{staticClass:"error-container"},[n._m(0),n._v(" "),o("h4",[n._v("ເກີດຂໍ້ຜິດພາດ")]),n._v(" "),o("p",[n._v(n._s(n.error))]),n._v(" "),o("button",{staticClass:"btn btn-primary btn-sm",on:{click:n.loadAuditTrail}},[o("i",{staticClass:"fas fa-redo"}),n._v("\n          ລອງໃໝ່\n        ")])]):0===n.auditTrail.length?o("div",{staticClass:"no-data-container"},[n._m(1),n._v(" "),o("h4",[n._v("ບໍ່ມີປະຫວັດການປ່ຽນແປງ")]),n._v(" "),o("p",[n._v("ບໍ່ພົບປະຫວັດການປ່ຽນແປງສຳລັບບັນຊີນີ້")])]):o("div",{staticClass:"audit-content"},[o("div",{staticClass:"audit-summary"},[o("div",{staticClass:"summary-card"},[n._m(2),n._v(" "),o("div",{staticClass:"summary-info"},[o("div",{staticClass:"summary-label"},[n._v("ລວມການປ່ຽນແປງ")]),n._v(" "),o("div",{staticClass:"summary-value"},[n._v(n._s(n.auditTrail.length))])])]),n._v(" "),o("div",{staticClass:"summary-card"},[n._m(3),n._v(" "),o("div",{staticClass:"summary-info"},[o("div",{staticClass:"summary-label"},[n._v("ການປ່ຽນແປງລ່າສຸດ")]),n._v(" "),o("div",{staticClass:"summary-value"},[n._v(n._s(n.formatDateTime(null===(t=n.auditTrail[0])||void 0===t?void 0:t.changedAt)))])])]),n._v(" "),o("div",{staticClass:"summary-card"},[n._m(4),n._v(" "),o("div",{staticClass:"summary-info"},[o("div",{staticClass:"summary-label"},[n._v("ຜູ້ປ່ຽນແປງລ່າສຸດ")]),n._v(" "),o("div",{staticClass:"summary-value"},[n._v(n._s((null===(e=n.auditTrail[0])||void 0===e?void 0:e.changedBy)||"ລະບົບ"))])])])]),n._v(" "),o("div",{staticClass:"audit-controls"},[o("div",{staticClass:"filter-controls"},[o("select",{directives:[{name:"model",rawName:"v-model",value:n.actionFilter,expression:"actionFilter"}],staticClass:"form-control filter-select",on:{change:[function(t){var e=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));n.actionFilter=t.target.multiple?e:e[0]},n.filterAuditTrail]}},[o("option",{attrs:{value:""}},[n._v("ທຸກການດຳເນີນການ")]),n._v(" "),o("option",{attrs:{value:"CREATE"}},[n._v("ສ້າງ")]),n._v(" "),o("option",{attrs:{value:"UPDATE"}},[n._v("ແກ້ໄຂ")]),n._v(" "),o("option",{attrs:{value:"APPROVE"}},[n._v("ອະນຸມັດ")]),n._v(" "),o("option",{attrs:{value:"SETTLE"}},[n._v("ຊຳລະ")]),n._v(" "),o("option",{attrs:{value:"DELETE"}},[n._v("ລົບ")])]),n._v(" "),o("button",{staticClass:"btn btn-secondary btn-sm",on:{click:n.exportAuditTrail}},[o("i",{staticClass:"fas fa-download"}),n._v("\n              ສົ່ງອອກ\n            ")])])]),n._v(" "),o("div",{staticClass:"audit-timeline"},n._l(n.filteredAuditTrail,(function(t,e){return o("div",{key:t.id,staticClass:"timeline-item",class:{expandable:t.totalChanges>0}},[o("div",{staticClass:"timeline-marker"},[o("i",{class:n.getActionIcon(t.action)})]),n._v(" "),o("div",{staticClass:"timeline-content"},[o("div",{staticClass:"timeline-header",on:{click:function(e){return n.toggleExpand(t)}}},[o("div",{staticClass:"timeline-main-info"},[o("div",{staticClass:"timeline-action"},[o("span",{class:["action-badge",t.action.toLowerCase()]},[n._v("\n                      "+n._s(n.getActionInLao(t.action))+"\n                    ")]),n._v(" "),o("span",{staticClass:"timeline-time"},[n._v(n._s(n.formatDateTime(t.changedAt)))])]),n._v(" "),o("div",{staticClass:"timeline-user"},[o("i",{staticClass:"fas fa-user-circle"}),n._v("\n                    "+n._s(t.changedBy||"ລະບົບ")+"\n                  ")])]),n._v(" "),t.totalChanges>0?o("div",{staticClass:"timeline-toggle"},[o("span",{staticClass:"changes-count"},[n._v(n._s(t.totalChanges)+" ການປ່ຽນແປງ")]),n._v(" "),o("i",{staticClass:"toggle-icon",class:["fas",t.expanded?"fa-chevron-up":"fa-chevron-down"]})]):n._e()]),n._v(" "),t.reason?o("div",{staticClass:"timeline-reason"},[o("i",{staticClass:"fas fa-comment"}),n._v(" "),o("span",[n._v(n._s(t.reason))])]):n._e(),n._v(" "),t.expanded&&t.keyChanges&&t.keyChanges.length>0?o("div",{staticClass:"timeline-details"},[o("div",{staticClass:"changes-list"},[o("h6",[n._v("ລາຍລະອຽດການປ່ຽນແປງ:")]),n._v(" "),n._l(t.keyChanges,(function(t){return o("div",{key:t.field,staticClass:"change-item"},[o("div",{staticClass:"change-field"},[o("i",{class:n.getFieldIcon(t.field)}),n._v("\n                      "+n._s(n.getFieldNameInLao(t.field))+"\n                    ")]),n._v(" "),o("div",{staticClass:"change-values"},[o("div",{staticClass:"old-value"},[o("span",{staticClass:"value-label"},[n._v("ເກົ່າ:")]),n._v(" "),o("span",{staticClass:"value"},[n._v(n._s(n.formatValue(t.field,t.oldValue)))])]),n._v(" "),n._m(5,!0),n._v(" "),o("div",{staticClass:"new-value"},[o("span",{staticClass:"value-label"},[n._v("ໃໝ່:")]),n._v(" "),o("span",{staticClass:"value"},[n._v(n._s(n.formatValue(t.field,t.newValue)))])])])])}))],2)]):n._e(),n._v(" "),t.totalChanges>3&&t.expanded?o("div",{staticClass:"view-full-details"},[o("button",{staticClass:"btn btn-link btn-sm",on:{click:function(e){return n.viewFullDetails(t)}}},[o("i",{staticClass:"fas fa-eye"}),n._v("\n                  ເບິ່ງລາຍລະອຽດທັງໝົດ ("+n._s(t.totalChanges)+" ການປ່ຽນແປງ)\n                ")])]):n._e()])])})),0),n._v(" "),n.hasMoreData?o("div",{staticClass:"load-more-container"},[o("button",{staticClass:"btn btn-secondary",attrs:{disabled:n.loadingMore},on:{click:n.loadMoreAuditTrail}},[n.loadingMore?o("i",{staticClass:"fas fa-spinner fa-spin"}):o("i",{staticClass:"fas fa-plus"}),n._v("\n            "+n._s(n.loadingMore?"ກຳລັງໂຫຼດ...":"ໂຫຼດເພີ່ມ")+"\n          ")])]):n._e()])]),n._v(" "),o("div",{staticClass:"modal-footer audit-footer"},[o("button",{staticClass:"btn btn-info",attrs:{disabled:n.auditTrail.length<2},on:{click:n.compareVersions}},[o("i",{staticClass:"fas fa-balance-scale"}),n._v("\n        ປຽບທຽບເວີຊັ່ນ\n      ")]),n._v(" "),o("button",{staticClass:"btn btn-secondary",on:{click:n.closeDialog}},[o("i",{staticClass:"fas fa-times"}),n._v("\n        ປິດ\n      ")])])])]):n._e()}),[function(){var t=this._self._c;return t("div",{staticClass:"error-icon"},[t("i",{staticClass:"fas fa-exclamation-triangle"})])},function(){var t=this._self._c;return t("div",{staticClass:"no-data-icon"},[t("i",{staticClass:"fas fa-history"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-list"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-clock"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-user"})])},function(){var t=this._self._c;return t("div",{staticClass:"arrow"},[t("i",{staticClass:"fas fa-arrow-right"})])}],!1,null,"5c476a8a",null);e.default=component.exports},977:function(t,e,n){"use strict";n.r(e);n(39),n(9),n(5),n(10);var o=n(32),r=n(17),c=(n(85),n(24),n(8),n(64),n(30),n(38),n(52),n(54),n(53),n(832),n(448),n(346),n(103),n(34),n(75),{name:"VersionComparisonDialog",props:{show:{type:Boolean,default:!1},recordId:{type:[Number,String],required:!0},recordData:{type:Object,default:null},initialComparison:{type:Object,default:null},canRestore:{type:Boolean,default:!1}},data:function(){return{loading:!1,error:null,availableVersions:[],selectedVersion1:null,selectedVersion2:null,comparisonData:null,fieldLabels:{amount:"ຈຳນວນເງິນ",purpose:"ຈຸດປະສົງ",status:"ສະຖານະ",dueDate:"ວັນຄົບກຳນົດ",note:"ໝາຍເຫດ",ministryId:"ກະຊວງ",bankAccountId:"ບັນຊີທະນາຄານ",currencyId:"ສະກຸນເງິນ",bookingDate:"ວັນທີ່ລົງບັນຊີ",exchangeRate:"ອັດຕາແລກປ່ຽນ",makerId:"ຜູ້ລົງບັນຊີ",checkerId:"ຜູ້ອະນຸມັດ",approvedAt:"ວັນທີ່ອະນຸມັດ"}}},watch:{show:function(t){t&&this.initializeDialog()},initialComparison:{handler:function(t){t&&this.show&&this.setupInitialComparison()},immediate:!0}},methods:{initializeDialog:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.initialComparison){e.next=4;break}t.setupInitialComparison(),e.next=6;break;case 4:return e.next=6,t.fetchAvailableVersions();case 6:case"end":return e.stop()}}),e)})))()},setupInitialComparison:function(){this.initialComparison.current&&this.initialComparison.previous&&(this.selectedVersion1=this.initialComparison.previous.id,this.selectedVersion2=this.initialComparison.current.id,this.comparisonData={currentVersion:this.initialComparison.current.version||1,compareVersion:this.initialComparison.previous.version||1,differences:this.calculateDifferences(this.initialComparison.previous,this.initialComparison.current)})},calculateDifferences:function(t,e){var n={};return Object.keys(this.fieldLabels).forEach((function(o){var r,c,l=(null===(r=t.data)||void 0===r?void 0:r[o])||t[o],d=(null===(c=e.data)||void 0===c?void 0:c[o])||e[o];l!==d&&(n[o]={current:d,version:l})})),n},fetchAvailableVersions:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.recordId){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,t.error=null,e.prev=4,e.next=7,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"));case 7:if(n=e.sent,!(data=n.data).success){e.next=13;break}t.availableVersions=data.data.map((function(t){return{id:t.id,version:t.version||1,action:t.action,changedAt:t.changedAt,changedBy:t.changedBy,data:t.newData||t.oldData||{}}})),e.next=14;break;case 13:throw new Error(data.message||"Failed to fetch versions");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),console.error("Error fetching versions:",e.t0),t.error=(null===(o=e.t0.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||e.t0.message;case 20:return e.prev=20,t.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,16,20,23]])})))()},loadComparison:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedVersion1&&t.selectedVersion2){e.next=3;break}return t.comparisonData=null,e.abrupt("return");case 3:try{n=t.availableVersions.find((function(e){return e.id===t.selectedVersion1})),o=t.availableVersions.find((function(e){return e.id===t.selectedVersion2})),n&&o&&(t.comparisonData={currentVersion:o.version,compareVersion:n.version,differences:t.calculateDifferences(n,o)})}catch(e){console.error("Error loading comparison:",e),t.error="ເກີດຂໍ້ຜິດພາດໃນການປຽບທຽບ"}case 4:case"end":return e.stop()}}),e)})))()},getVersionLabel:function(t){var e=new Date(t.changedAt).toLocaleDateString("lo-LA"),n={CREATE:"ສ້າງ",UPDATE:"ແກ້ໄຂ",APPROVE:"ອະນຸມັດ",SETTLE:"ຊຳລະ",DELETE:"ລົບ"}[t.action]||t.action;return"v".concat(t.version," - ").concat(n," (").concat(e,")")},getVersionNumber:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));return(null==e?void 0:e.version)||"?"},getVersionDate:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));return e?new Date(e.changedAt).toLocaleDateString("lo-LA"):""},getTimeDifference:function(){var t=this;if(!this.selectedVersion1||!this.selectedVersion2)return 0;var e=this.availableVersions.find((function(e){return e.id===t.selectedVersion1})),n=this.availableVersions.find((function(e){return e.id===t.selectedVersion2}));if(e&&n){var o=new Date(e.changedAt),r=new Date(n.changedAt),c=Math.abs(r-o);return Math.ceil(c/864e5)}return 0},getDifferentUsers:function(){var t=this;if(!this.selectedVersion1||!this.selectedVersion2)return"N/A";var e=this.availableVersions.find((function(e){return e.id===t.selectedVersion1})),n=this.availableVersions.find((function(e){return e.id===t.selectedVersion2}));return e&&n?e.changedBy===n.changedBy?e.changedBy||"ບໍ່ຮູ້":"".concat(e.changedBy||"ບໍ່ຮູ້"," → ").concat(n.changedBy||"ບໍ່ຮູ້"):"N/A"},getFieldIcon:function(t){return{amount:"fas fa-dollar-sign",purpose:"fas fa-tag",status:"fas fa-flag",dueDate:"fas fa-calendar",note:"fas fa-sticky-note",ministryId:"fas fa-building",bankAccountId:"fas fa-university",currencyId:"fas fa-coins",bookingDate:"fas fa-calendar-day",exchangeRate:"fas fa-exchange-alt",makerId:"fas fa-user",checkerId:"fas fa-user-check",approvedAt:"fas fa-calendar-check"}[t]||"fas fa-info-circle"},getFieldLabel:function(t){return this.fieldLabels[t]||t},formatValue:function(t){if(null==t)return"N/A";if("boolean"==typeof t)return t?"ແມ່ນ":"ບໍ່";if("number"==typeof t)return t.toLocaleString();if("string"==typeof t&&t.includes("T"))try{return new Date(t).toLocaleDateString("lo-LA")}catch(e){return t}return String(t)},swapVersions:function(){var t=this.selectedVersion1;this.selectedVersion1=this.selectedVersion2,this.selectedVersion2=t,this.loadComparison()},restoreToVersion:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));e&&this.$emit("restore",e)},exportComparison:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.comparisonData){e.next=2;break}return e.abrupt("return");case 2:try{n=t.generateComparisonCSV(),o=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(o),(link=document.createElement("a")).href=r,link.download="comparison-".concat(t.recordId,"-v").concat(t.getVersionNumber(t.selectedVersion1),"-v").concat(t.getVersionNumber(t.selectedVersion2),".csv"),document.body.appendChild(link),link.click(),document.body.removeChild(link),window.URL.revokeObjectURL(r),t.$emit("success","ສົ່ງອອກການປຽບທຽບສຳເລັດ")}catch(e){console.error("Export error:",e),t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສົ່ງອອກ")}case 3:case"end":return e.stop()}}),e)})))()},generateComparisonCSV:function(){var t=this,e=[["Field","Version 1 Value","Version 2 Value"]];return Object.entries(this.comparisonData.differences).forEach((function(n){var r=Object(o.a)(n,2),c=r[0],l=r[1];e.push([t.getFieldLabel(c),t.formatValue(l.version),t.formatValue(l.current)])})),e.map((function(t){return t.map((function(t){return'"'.concat(String(t).replace(/"/g,'""'),'"')})).join(",")})).join("\n")},closeDialog:function(){this.selectedVersion1=null,this.selectedVersion2=null,this.comparisonData=null,this.$emit("close")}}}),l=(n(948),n(31)),component=Object(l.a)(c,(function(){var t,e=this,n=e._self._c;return e.show?n("div",{staticClass:"modal-overlay",on:{click:e.closeDialog}},[n("div",{staticClass:"modal-dialog comparison-dialog",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"modal-header"},[n("div",{staticClass:"modal-title-section"},[n("i",{staticClass:"fas fa-code-compare modal-icon"}),e._v(" "),n("h5",{staticClass:"modal-title"},[e._v("\n          ປຽບທຽບເວີຊັ່ນ - "+e._s((null===(t=e.recordData)||void 0===t?void 0:t.purpose)||"Record #".concat(e.recordId))+"\n        ")])]),e._v(" "),n("button",{staticClass:"close-btn",on:{click:e.closeDialog}},[n("i",{staticClass:"fas fa-times"})])]),e._v(" "),n("div",{staticClass:"modal-body"},[e.loading?n("div",{staticClass:"loading-state"},[n("div",{staticClass:"spinner"}),e._v(" "),n("p",[e._v("ກຳລັງໂຫຼດຂໍ້ມູນສຳລັບປຽບທຽບ...")])]):e.error?n("div",{staticClass:"error-state"},[e._m(0),e._v(" "),n("h6",[e._v("ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ")]),e._v(" "),n("p",[e._v(e._s(e.error))]),e._v(" "),n("button",{staticClass:"btn btn-primary btn-sm",on:{click:e.fetchComparisonData}},[n("i",{staticClass:"fas fa-redo"}),e._v("\n          ລອງໃໝ່\n        ")])]):n("div",{staticClass:"comparison-content"},[n("div",{staticClass:"version-selector"},[n("div",{staticClass:"selector-group"},[n("label",[e._v("ເວີຊັ່ນທີ່ 1 (ເກົ່າ):")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedVersion1,expression:"selectedVersion1"}],staticClass:"form-control",on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.selectedVersion1=t.target.multiple?n:n[0]},e.loadComparison]}},[n("option",{attrs:{value:""}},[e._v("ເລືອກເວີຊັ່ນ...")]),e._v(" "),e._l(e.availableVersions,(function(t){return n("option",{key:t.id,attrs:{disabled:t.id===e.selectedVersion2},domProps:{value:t.id}},[e._v("\n                "+e._s(e.getVersionLabel(t))+"\n              ")])}))],2)]),e._v(" "),e._m(1),e._v(" "),n("div",{staticClass:"selector-group"},[n("label",[e._v("ເວີຊັ່ນທີ່ 2 (ໃໝ່):")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedVersion2,expression:"selectedVersion2"}],staticClass:"form-control",on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.selectedVersion2=t.target.multiple?n:n[0]},e.loadComparison]}},[n("option",{attrs:{value:""}},[e._v("ເລືອກເວີຊັ່ນ...")]),e._v(" "),e._l(e.availableVersions,(function(t){return n("option",{key:t.id,attrs:{disabled:t.id===e.selectedVersion1},domProps:{value:t.id}},[e._v("\n                "+e._s(e.getVersionLabel(t))+"\n              ")])}))],2)])]),e._v(" "),e.comparisonData?n("div",{staticClass:"comparison-results"},[n("div",{staticClass:"comparison-summary"},[n("div",{staticClass:"summary-card"},[e._m(2),e._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-number"},[e._v(e._s(Object.keys(e.comparisonData.differences||{}).length))]),e._v(" "),n("div",{staticClass:"summary-label"},[e._v("ການປ່ຽນແປງ")])])]),e._v(" "),n("div",{staticClass:"summary-card"},[e._m(3),e._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-number"},[e._v(e._s(e.getTimeDifference()))]),e._v(" "),n("div",{staticClass:"summary-label"},[e._v("ວັນຫ່າງກັນ")])])]),e._v(" "),n("div",{staticClass:"summary-card"},[e._m(4),e._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-text"},[e._v(e._s(e.getDifferentUsers()))]),e._v(" "),n("div",{staticClass:"summary-label"},[e._v("ຜູ້ປ່ຽນແປງ")])])])]),e._v(" "),0===Object.keys(e.comparisonData.differences||{}).length?n("div",{staticClass:"no-differences"},[e._m(5),e._v(" "),n("h6",[e._v("ບໍ່ມີການປ່ຽນແປງ")]),e._v(" "),n("p",[e._v("ເວີຊັ່ນທັງສອງມີຂໍ້ມູນຄືກັນ")])]):n("div",{staticClass:"differences-table"},[e._m(6),e._v(" "),n("div",{staticClass:"table-container"},[n("table",{staticClass:"comparison-table"},[n("thead",[n("tr",[n("th",{staticClass:"field-header"},[e._v("ຟິວ")]),e._v(" "),n("th",{staticClass:"version-header version1"},[n("div",{staticClass:"version-info"},[n("div",{staticClass:"version-label"},[e._v("ເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion1)))]),e._v(" "),n("div",{staticClass:"version-date"},[e._v(e._s(e.getVersionDate(e.selectedVersion1)))])])]),e._v(" "),n("th",{staticClass:"version-header version2"},[n("div",{staticClass:"version-info"},[n("div",{staticClass:"version-label"},[e._v("ເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion2)))]),e._v(" "),n("div",{staticClass:"version-date"},[e._v(e._s(e.getVersionDate(e.selectedVersion2)))])])])])]),e._v(" "),n("tbody",e._l(e.comparisonData.differences,(function(t,o){return n("tr",{key:o,staticClass:"diff-row"},[n("td",{staticClass:"field-cell"},[n("div",{staticClass:"field-info"},[n("i",{class:e.getFieldIcon(o)}),e._v(" "),n("span",{staticClass:"field-name"},[e._v(e._s(e.getFieldLabel(o)))])])]),e._v(" "),n("td",{staticClass:"value-cell version1"},[n("div",{staticClass:"value-content old-value"},[n("div",{staticClass:"value-text"},[e._v(e._s(e.formatValue(t.current)))])])]),e._v(" "),n("td",{staticClass:"value-cell version2"},[n("div",{staticClass:"value-content new-value"},[n("div",{staticClass:"value-text"},[e._v(e._s(e.formatValue(t.version)))]),e._v(" "),e._m(7,!0)])])])})),0)])])]),e._v(" "),Object.keys(e.comparisonData.differences||{}).length>0?n("div",{staticClass:"comparison-actions"},[e.canRestore?n("button",{staticClass:"btn btn-warning",on:{click:function(t){return e.restoreToVersion(e.selectedVersion1)}}},[n("i",{staticClass:"fas fa-undo"}),e._v("\n              ກັບຄືນໄປເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion1))+"\n            ")]):e._e(),e._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:e.exportComparison}},[n("i",{staticClass:"fas fa-download"}),e._v("\n              ສົ່ງອອກການປຽບທຽບ\n            ")])]):e._e()]):n("div",{staticClass:"select-versions-prompt"},[e._m(8),e._v(" "),n("h6",[e._v("ເລືອກເວີຊັ່ນເພື່ອປຽບທຽບ")]),e._v(" "),n("p",[e._v("ກະລຸນາເລືອກສອງເວີຊັ່ນທີ່ທ່ານຕ້ອງການປຽບທຽບ")])])])]),e._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-outline",attrs:{disabled:!e.selectedVersion1||!e.selectedVersion2},on:{click:e.swapVersions}},[n("i",{staticClass:"fas fa-exchange-alt"}),e._v("\n        ສະຫຼັບເວີຊັ່ນ\n      ")]),e._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:e.closeDialog}},[n("i",{staticClass:"fas fa-times"}),e._v("\n        ປິດ\n      ")])])])]):e._e()}),[function(){var t=this._self._c;return t("div",{staticClass:"error-icon"},[t("i",{staticClass:"fas fa-exclamation-triangle"})])},function(){var t=this._self._c;return t("div",{staticClass:"comparison-arrow"},[t("i",{staticClass:"fas fa-exchange-alt"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-edit"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-calendar"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-user"})])},function(){var t=this._self._c;return t("div",{staticClass:"no-diff-icon"},[t("i",{staticClass:"fas fa-equals"})])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-list"}),this._v("\n              ລາຍລະອຽດການປ່ຽນແປງ\n            ")])},function(){var t=this._self._c;return t("div",{staticClass:"change-indicator"},[t("i",{staticClass:"fas fa-arrow-left"})])},function(){var t=this._self._c;return t("div",{staticClass:"prompt-icon"},[t("i",{staticClass:"fas fa-hand-pointer"})])}],!1,null,"e6a23e30",null);e.default=component.exports},978:function(t,e,n){"use strict";n.r(e);n(39),n(9),n(5),n(30);var o=n(32),r=n(17),c=n(36),l=(n(85),n(8),n(250),n(208),n(346),n(344),n(63),n(54),n(53),n(832),n(448),{name:"AuditReportsDialog",props:{show:{type:Boolean,default:!1}},data:function(){return{activeTab:"user-activity",reportTabs:[{id:"user-activity",label:"ກິດຈະກຳຜູ້ໃຊ້",icon:"fas fa-users"},{id:"system-activity",label:"ກິດຈະກຳລະບົບ",icon:"fas fa-server"},{id:"export",label:"ສົ່ງອອກ",icon:"fas fa-download"}],userActivityLoading:!1,userActivityData:[],userActivityFilter:{startDate:this.getDateDaysAgo(30),endDate:this.getTodayDate()},systemActivityLoading:!1,systemActivityData:null,systemActivityFilter:{period:"30"},exportLoading:!1,exportFilter:{startDate:this.getDateDaysAgo(30),endDate:this.getTodayDate(),reportType:"summary"},actionLabels:{CREATE:"ສ້າງ",UPDATE:"ແກ້ໄຂ",APPROVE:"ອະນຸມັດ",SETTLE:"ຊຳລະ",DELETE:"ລົບ"}}},computed:{isLoading:function(){return this.userActivityLoading||this.systemActivityLoading||this.exportLoading},uniqueActiveUsers:function(){return this.userActivityData.length},totalActivities:function(){return this.userActivityData.reduce((function(t,e){return t+e.totalActivities}),0)},mostActiveUser:function(){return 0===this.userActivityData.length?"N/A":this.userActivityData.reduce((function(t,e){return e.totalActivities>t.totalActivities?e:t})).userName},maxDailyActivity:function(){var t;return null!==(t=this.systemActivityData)&&void 0!==t&&t.dailyStats?Math.max.apply(Math,Object(c.a)(this.systemActivityData.dailyStats.map((function(t){return t.count})))):1}},watch:{show:function(t){t&&this.initializeReports()}},methods:{initializeReports:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchUserActivity();case 2:return e.next=4,t.fetchSystemActivity();case 4:case"end":return e.stop()}}),e)})))()},fetchUserActivity:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.userActivityLoading=!0,e.prev=1,n={startDate:t.userActivityFilter.startDate,endDate:t.userActivityFilter.endDate},e.next=5,t.$axios.get("/api/money-advances/audit/date-range",{params:n});case 5:o=e.sent,data=o.data,r={},data.data.forEach((function(t){var e,n=t.changedBy,o=(null===(e=t.changedByUser)||void 0===e?void 0:e.cus_name)||"Unknown User";r[n]||(r[n]={userId:n,userName:o,activities:{},totalActivities:0,lastActivity:t.changedAt}),r[n].activities[t.action]||(r[n].activities[t.action]=0),r[n].activities[t.action]++,r[n].totalActivities++,new Date(t.changedAt)>new Date(r[n].lastActivity)&&(r[n].lastActivity=t.changedAt)})),t.userActivityData=Object.values(r).sort((function(a,b){return b.totalActivities-a.totalActivities})),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Error fetching user activity:",e.t0),t.userActivityData=[],t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນກິດຈະກຳຜູ້ໃຊ້");case 17:return e.prev=17,t.userActivityLoading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,12,17,20]])})))()},fetchSystemActivity:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c,l,d,data,f,m,v,i,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.systemActivityLoading=!0,e.prev=1,n=parseInt(t.systemActivityFilter.period),r=new Date,(c=new Date).setDate(c.getDate()-n),l={startDate:c.toISOString().split("T")[0],endDate:r.toISOString().split("T")[0],limit:500},e.next=9,t.$axios.get("/api/money-advances/audit/date-range",{params:l});case 9:for(d=e.sent,data=d.data,f={},m={},v=0,data.data.forEach((function(t){var e=t.changedAt.split("T")[0];f[e]||(f[e]={date:e,count:0}),f[e].count++,m[t.action]||(m[t.action]=0),m[t.action]++,v++})),i=0;i<n;i++)(h=new Date).setDate(h.getDate()-i),x=h.toISOString().split("T")[0],f[x]||(f[x]={date:x,count:0});t.systemActivityData={dailyStats:Object.values(f).sort((function(a,b){return new Date(a.date)-new Date(b.date)})),activityBreakdown:Object.entries(m).map((function(t){var e=Object(o.a)(t,2),n=e[0],r=e[1];return{action:n,count:r,percentage:(r/v*100).toFixed(1)}})).sort((function(a,b){return b.count-a.count})),recentChanges:data.data.sort((function(a,b){return new Date(b.changedAt)-new Date(a.changedAt)})).slice(0,10).map((function(t){var e,n;return{id:t.id,action:t.action,user:(null===(e=t.changedByUser)||void 0===e?void 0:e.cus_name)||"Unknown",recordId:t.recordId,recordPurpose:null===(n=t.record)||void 0===n?void 0:n.purpose,changedAt:t.changedAt}}))},e.next=24;break;case 19:e.prev=19,e.t0=e.catch(1),console.error("Error fetching system activity:",e.t0),t.systemActivityData=null,t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນກິດຈະກຳລະບົບ");case 24:return e.prev=24,t.systemActivityLoading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,19,24,27]])})))()},exportCSV:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,o,r,c,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.exportLoading=!0,e.prev=1,n={startDate:t.exportFilter.startDate,endDate:t.exportFilter.endDate,format:"csv"},e.next=5,t.$axios.get("/api/money-advances/audit/export",{params:n,responseType:"blob"});case 5:o=e.sent,r=new Blob([o.data],{type:"text/csv"}),c=window.URL.createObjectURL(r),(link=document.createElement("a")).href=c,link.download="audit-report-".concat(n.startDate,"-to-").concat(n.endDate,".csv"),document.body.appendChild(link),link.click(),document.body.removeChild(link),window.URL.revokeObjectURL(c),t.$emit("success","ສົ່ງອອກ CSV ສຳເລັດ"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.error("Export error:",e.t0),t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສົ່ງອອກ CSV");case 22:return e.prev=22,t.exportLoading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,18,22,25]])})))()},generateReport:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.exportLoading=!0;try{t.$emit("success","ຟັງຊັ່ນນີ້ຈະຖືກພັດທະນາໃນອະນາຄົດ")}catch(e){t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສ້າງລາຍງານ")}finally{t.exportLoading=!1}case 2:case"end":return e.stop()}}),e)})))()},backupData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.exportLoading=!0;try{t.$emit("success","ຟັງຊັ່ນນີ້ຈະຖືກພັດທະນາໃນອະນາຄົດ")}catch(e){t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສໍາລອງຂໍ້ມູນ")}finally{t.exportLoading=!1}case 2:case"end":return e.stop()}}),e)})))()},refreshCurrentReport:function(){"user-activity"===this.activeTab?this.fetchUserActivity():"system-activity"===this.activeTab&&this.fetchSystemActivity()},getActivityIcon:function(t){return{CREATE:"fas fa-plus-circle",UPDATE:"fas fa-edit",APPROVE:"fas fa-check-circle",SETTLE:"fas fa-money-bill-wave",DELETE:"fas fa-trash-alt"}[t]||"fas fa-question-circle"},getActivityLabel:function(t){return this.actionLabels[t]||t},formatDateTime:function(t){return t?new Date(t).toLocaleString("lo-LA"):"N/A"},formatShortDate:function(t){return new Date(t).toLocaleDateString("lo-LA",{month:"short",day:"numeric"})},formatRelativeTime:function(t){var e=new Date-new Date(t),n=Math.floor(e/6e4),o=Math.floor(e/36e5),r=Math.floor(e/864e5);return n<1?"ຫຼ້າສຸດ":n<60?"".concat(n," ນາທີຜ່ານມາ"):o<24?"".concat(o," ຊົ່ວໂມງຜ່ານມາ"):"".concat(r," ມື້ຜ່ານມາ")},getDateDaysAgo:function(t){var e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]},getTodayDate:function(){return(new Date).toISOString().split("T")[0]},closeDialog:function(){this.$emit("close")}}}),d=(n(950),n(31)),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return t.show?e("div",{staticClass:"modal-overlay",on:{click:t.closeDialog}},[e("div",{staticClass:"modal-dialog reports-dialog",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"modal-header"},[t._m(0),t._v(" "),e("button",{staticClass:"close-btn",on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"})])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"tabs-container"},[e("div",{staticClass:"tabs"},t._l(t.reportTabs,(function(n){return e("button",{key:n.id,class:["tab-btn",{active:t.activeTab===n.id}],on:{click:function(e){t.activeTab=n.id}}},[e("i",{class:n.icon}),t._v("\n            "+t._s(n.label)+"\n          ")])})),0)]),t._v(" "),"user-activity"===t.activeTab?e("div",{staticClass:"report-content"},[e("div",{staticClass:"report-header"},[t._m(1),t._v(" "),e("div",{staticClass:"date-filter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.userActivityFilter.startDate,expression:"userActivityFilter.startDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.userActivityFilter.startDate},on:{change:t.fetchUserActivity,input:function(e){e.target.composing||t.$set(t.userActivityFilter,"startDate",e.target.value)}}}),t._v(" "),e("span",[t._v("ຫາ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.userActivityFilter.endDate,expression:"userActivityFilter.endDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.userActivityFilter.endDate},on:{change:t.fetchUserActivity,input:function(e){e.target.composing||t.$set(t.userActivityFilter,"endDate",e.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.fetchUserActivity}},[e("i",{staticClass:"fas fa-search"}),t._v("\n              ຄົ້ນຫາ\n            ")])])]),t._v(" "),t.userActivityLoading?e("div",{staticClass:"loading-state"},[e("div",{staticClass:"spinner-sm"}),t._v(" "),e("span",[t._v("ກຳລັງໂຫຼດຂໍ້ມູນ...")])]):t.userActivityData.length>0?e("div",{staticClass:"user-activity-content"},[e("div",{staticClass:"activity-summary"},[e("div",{staticClass:"summary-card"},[t._m(2),t._v(" "),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-number"},[t._v(t._s(t.uniqueActiveUsers))]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ຜູ້ໃຊ້ທີ່ມີກິດຈະກຳ")])])]),t._v(" "),e("div",{staticClass:"summary-card"},[t._m(3),t._v(" "),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-number"},[t._v(t._s(t.totalActivities))]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ລວມກິດຈະກຳ")])])]),t._v(" "),e("div",{staticClass:"summary-card"},[t._m(4),t._v(" "),e("div",{staticClass:"summary-info"},[e("div",{staticClass:"summary-text"},[t._v(t._s(t.mostActiveUser))]),t._v(" "),e("div",{staticClass:"summary-label"},[t._v("ຜູ້ໃຊ້ທີ່ມີກິດຈະກຳສູງສຸດ")])])])]),t._v(" "),e("div",{staticClass:"activity-table"},[e("table",{staticClass:"table"},[t._m(5),t._v(" "),e("tbody",t._l(t.userActivityData,(function(n){return e("tr",{key:n.userId},[e("td",[e("div",{staticClass:"user-info"},[e("div",{staticClass:"user-name"},[t._v(t._s(n.userName))]),t._v(" "),e("div",{staticClass:"user-id"},[t._v("ID: "+t._s(n.userId))])])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count create"},[t._v(t._s(n.activities.CREATE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count update"},[t._v(t._s(n.activities.UPDATE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count approve"},[t._v(t._s(n.activities.APPROVE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count settle"},[t._v(t._s(n.activities.SETTLE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"activity-count delete"},[t._v(t._s(n.activities.DELETE||0))])]),t._v(" "),e("td",[e("span",{staticClass:"total-count"},[t._v(t._s(n.totalActivities))])]),t._v(" "),e("td",[t._v(t._s(t.formatDateTime(n.lastActivity)))])])})),0)])])]):e("div",{staticClass:"no-data"},[e("i",{staticClass:"fas fa-chart-bar"}),t._v(" "),e("p",[t._v("ບໍ່ມີຂໍ້ມູນກິດຈະກຳໃນຊ່ວງເວລານີ້")])])]):t._e(),t._v(" "),"system-activity"===t.activeTab?e("div",{staticClass:"report-content"},[e("div",{staticClass:"report-header"},[t._m(6),t._v(" "),e("div",{staticClass:"date-filter"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.systemActivityFilter.period,expression:"systemActivityFilter.period"}],staticClass:"form-control",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.systemActivityFilter,"period",e.target.multiple?n:n[0])},t.fetchSystemActivity]}},[e("option",{attrs:{value:"7"}},[t._v("7 ວັນຜ່ານມາ")]),t._v(" "),e("option",{attrs:{value:"30"}},[t._v("30 ວັນຜ່ານມາ")]),t._v(" "),e("option",{attrs:{value:"90"}},[t._v("90 ວັນຜ່ານມາ")]),t._v(" "),e("option",{attrs:{value:"365"}},[t._v("1 ປີຜ່ານມາ")])]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.fetchSystemActivity}},[e("i",{staticClass:"fas fa-sync"}),t._v("\n              ອັບເດດ\n            ")])])]),t._v(" "),t.systemActivityLoading?e("div",{staticClass:"loading-state"},[e("div",{staticClass:"spinner-sm"}),t._v(" "),e("span",[t._v("ກຳລັງໂຫຼດຂໍ້ມູນ...")])]):t.systemActivityData?e("div",{staticClass:"system-activity-content"},[e("div",{staticClass:"chart-container"},[e("h6",[t._v("ກິດຈະກຳລາຍວັນ")]),t._v(" "),e("div",{staticClass:"chart-placeholder"},[e("div",{staticClass:"chart-bars"},t._l(t.systemActivityData.dailyStats,(function(n,o){return e("div",{key:o,staticClass:"chart-bar",style:{height:n.count/t.maxDailyActivity*100+"%"},attrs:{title:"".concat(n.date,": ").concat(n.count," ກິດຈະກຳ")}},[e("div",{staticClass:"bar-value"},[t._v(t._s(n.count))])])})),0),t._v(" "),e("div",{staticClass:"chart-labels"},t._l(t.systemActivityData.dailyStats,(function(n,o){return e("span",{key:o,staticClass:"chart-label"},[t._v("\n                  "+t._s(t.formatShortDate(n.date))+"\n                ")])})),0)])]),t._v(" "),e("div",{staticClass:"activity-breakdown"},[e("h6",[t._v("ການແບ່ງປະເພດກິດຈະກຳ")]),t._v(" "),e("div",{staticClass:"breakdown-grid"},t._l(t.systemActivityData.activityBreakdown,(function(n){return e("div",{key:n.action,staticClass:"breakdown-item"},[e("div",{staticClass:"breakdown-icon",class:n.action.toLowerCase()},[e("i",{class:t.getActivityIcon(n.action)})]),t._v(" "),e("div",{staticClass:"breakdown-info"},[e("div",{staticClass:"breakdown-label"},[t._v(t._s(t.getActivityLabel(n.action)))]),t._v(" "),e("div",{staticClass:"breakdown-count"},[t._v(t._s(n.count))]),t._v(" "),e("div",{staticClass:"breakdown-percentage"},[t._v(t._s(n.percentage)+"%")])])])})),0)]),t._v(" "),e("div",{staticClass:"recent-changes"},[e("h6",[t._v("ການປ່ຽນແປງຫຼ້າສຸດ")]),t._v(" "),e("div",{staticClass:"changes-timeline"},t._l(t.systemActivityData.recentChanges,(function(n){return e("div",{key:n.id,staticClass:"change-item"},[e("div",{staticClass:"change-icon",class:n.action.toLowerCase()},[e("i",{class:t.getActivityIcon(n.action)})]),t._v(" "),e("div",{staticClass:"change-content"},[e("div",{staticClass:"change-text"},[e("strong",[t._v(t._s(n.user))]),t._v(" \n                    "+t._s(t.getActivityLabel(n.action))+" \n                    "),e("em",[t._v(t._s(n.recordPurpose||"Record #".concat(n.recordId)))])]),t._v(" "),e("div",{staticClass:"change-time"},[t._v(t._s(t.formatRelativeTime(n.changedAt)))])])])})),0)])]):e("div",{staticClass:"no-data"},[e("i",{staticClass:"fas fa-server"}),t._v(" "),e("p",[t._v("ບໍ່ມີຂໍ້ມູນກິດຈະກຳລະບົບ")])])]):t._e(),t._v(" "),"export"===t.activeTab?e("div",{staticClass:"report-content"},[e("div",{staticClass:"export-content"},[t._m(7),t._v(" "),e("div",{staticClass:"export-options"},[e("div",{staticClass:"export-option"},[t._m(8),t._v(" "),e("p",[t._v("ສົ່ງອອກຂໍ້ມູນປະຫວັດການປ່ຽນແປງໃນຮູບແບບ CSV ສຳລັບການວິເຄາະ")]),t._v(" "),e("div",{staticClass:"export-controls"},[e("div",{staticClass:"date-range"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.exportFilter.startDate,expression:"exportFilter.startDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.exportFilter.startDate},on:{input:function(e){e.target.composing||t.$set(t.exportFilter,"startDate",e.target.value)}}}),t._v(" "),e("span",[t._v("ຫາ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.exportFilter.endDate,expression:"exportFilter.endDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.exportFilter.endDate},on:{input:function(e){e.target.composing||t.$set(t.exportFilter,"endDate",e.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn btn-secondary",attrs:{disabled:t.exportLoading},on:{click:t.exportCSV}},[t.exportLoading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-download"}),t._v("\n                  ສົ່ງອອກ CSV\n                ")])])]),t._v(" "),e("div",{staticClass:"export-option"},[t._m(9),t._v(" "),e("p",[t._v("ສົ່ງອອກລາຍງານສະຫຼຸບດ້ວຍກາຟິກແລະການວິເຄາະ")]),t._v(" "),e("div",{staticClass:"export-controls"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.exportFilter.reportType,expression:"exportFilter.reportType"}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.exportFilter,"reportType",e.target.multiple?n:n[0])}}},[e("option",{attrs:{value:"summary"}},[t._v("ສະຫຼຸບທົ່ວໄປ")]),t._v(" "),e("option",{attrs:{value:"user-activity"}},[t._v("ກິດຈະກຳຜູ້ໃຊ້")]),t._v(" "),e("option",{attrs:{value:"trend-analysis"}},[t._v("ການວິເຄາະແນວໂນ້ມ")])]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.exportLoading},on:{click:t.generateReport}},[t.exportLoading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-file-pdf"}),t._v("\n                  ສ້າງລາຍງານ\n                ")])])]),t._v(" "),e("div",{staticClass:"export-option"},[t._m(10),t._v(" "),e("p",[t._v("ສໍາລອງຂໍ້ມູນປະຫວັດການປ່ຽນແປງທັງໝົດ")]),t._v(" "),e("div",{staticClass:"export-controls"},[t._m(11),t._v(" "),e("button",{staticClass:"btn btn-warning",attrs:{disabled:t.exportLoading},on:{click:t.backupData}},[t.exportLoading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-archive"}),t._v("\n                  ສໍາລອງຂໍ້ມູນ\n                ")])])])])])]):t._e()]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline",attrs:{disabled:t.isLoading},on:{click:t.refreshCurrentReport}},[e("i",{staticClass:"fas fa-sync"}),t._v("\n        ອັບເດດ\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"}),t._v("\n        ປິດ\n      ")])])])]):t._e()}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-title-section"},[e("i",{staticClass:"fas fa-chart-line modal-icon"}),t._v(" "),e("h5",{staticClass:"modal-title"},[t._v("ລາຍງານປະຫວັດການປ່ຽນແປງ")])])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-users"}),this._v("\n            ລາຍງານກິດຈະກຳຜູ້ໃຊ້\n          ")])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-user-friends"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-edit"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-crown"})])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ຜູ້ໃຊ້")]),t._v(" "),e("th",[t._v("ສ້າງ")]),t._v(" "),e("th",[t._v("ແກ້ໄຂ")]),t._v(" "),e("th",[t._v("ອະນຸມັດ")]),t._v(" "),e("th",[t._v("ຊຳລະ")]),t._v(" "),e("th",[t._v("ລົບ")]),t._v(" "),e("th",[t._v("ລວມ")]),t._v(" "),e("th",[t._v("ກິດຈະກຳຫຼ້າສຸດ")])])])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-server"}),this._v("\n            ລາຍງານກິດຈະກຳລະບົບ\n          ")])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-download"}),this._v("\n            ສົ່ງອອກລາຍງານ\n          ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-header"},[e("i",{staticClass:"fas fa-file-csv"}),t._v(" "),e("h6",[t._v("ສົ່ງອອກຂໍ້ມູນ CSV")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-header"},[e("i",{staticClass:"fas fa-chart-pie"}),t._v(" "),e("h6",[t._v("ລາຍງານສະຫຼຸບ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-header"},[e("i",{staticClass:"fas fa-database"}),t._v(" "),e("h6",[t._v("ສໍາລອງຂໍ້ມູນ")])])},function(){var t=this._self._c;return t("div",{staticClass:"backup-info"},[t("small",[this._v("ຂໍ້ມູນທັງໝົດຈະຖືກສໍາລອງໃນຮູບແບບ JSON")])])}],!1,null,"7e1ed358",null);e.default=component.exports}}]);