(window.webpackJsonp=window.webpackJsonp||[]).push([[184,80,81,82,83],{1182:function(t,e,n){var content=n(1402);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("98dbe234",content,!0,{sourceMap:!1})},1281:function(t,e,n){"use strict";n.r(e);var r={name:"MoneyAdvanceDetailDialog",props:{show:{type:Boolean,default:!1},details:{type:Object,default:null},loading:{type:Boolean,default:!1},statusLabels:{type:Object,default:function(){return{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ",rejected:"ປະຕິເສດ",cancelled:"ຍົກເລີກ"}}}},methods:{closeDialog:function(){this.$emit("close")},printDetails:function(){this.$emit("print")},downloadDetails:function(){this.$emit("download")},retryLoad:function(){this.$emit("retry-load")},editAdvance:function(){this.$emit("edit",this.details)},approveAdvance:function(){this.$emit("approve",this.details)},createSettlement:function(){this.$emit("create-settlement",this.details)},getStatusInLao:function(t){return this.statusLabels[t]||t.toUpperCase()},getStatusIcon:function(t){return{pending:"fa-clock",approved:"fa-check-circle",settled:"fa-money-bill-wave",rejected:"fa-times-circle",cancelled:"fa-ban"}[t]||"fa-question-circle"},getHistoryIcon:function(t){return{created:"fa-plus",updated:"fa-edit",approved:"fa-check",settled:"fa-money-bill",deleted:"fa-trash",rejected:"fa-times",cancelled:"fa-ban"}[t]||"fa-history"},formatCurrency:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)},formatExchangeRate:function(t){return t?new Intl.NumberFormat("en-US",{minimumFractionDigits:4,maximumFractionDigits:6}).format(t):"N/A"},formatDateTime:function(t){return t?new Date(t).toLocaleString():"N/A"},isOverdue:function(t){return!!t&&new Date(t)<new Date}}},o=(n(955),n(32)),component=Object(o.a)(r,(function(){var t,e,n,r=this,o=r._self._c;return r.show?o("div",{staticClass:"modal-overlay",on:{click:r.closeDialog}},[o("div",{staticClass:"modal-dialog detail-dialog",on:{click:function(t){t.stopPropagation()}}},[o("div",{staticClass:"modal-header"},[r._m(0),r._v(" "),o("div",{staticClass:"header-actions"},[o("button",{staticClass:"btn-icon",attrs:{title:"Print"},on:{click:r.printDetails}},[o("i",{staticClass:"fas fa-print"})]),r._v(" "),o("button",{staticClass:"btn-icon",attrs:{title:"Download"},on:{click:r.downloadDetails}},[o("i",{staticClass:"fas fa-download"})]),r._v(" "),o("button",{staticClass:"close-btn",on:{click:r.closeDialog}},[o("i",{staticClass:"fas fa-times"})])])]),r._v(" "),o("div",{staticClass:"modal-body detail-body"},[r.loading?o("div",{staticClass:"detail-loading"},[o("div",{staticClass:"spinner-small"}),r._v(" "),o("p",[r._v("Loading details...")])]):r.details?o("div",{staticClass:"detail-content"},[o("div",{staticClass:"detail-status"},[o("span",{class:["status-badge","status-"+r.details.status]},[o("i",{staticClass:"fas",class:r.getStatusIcon(r.details.status)}),r._v("\n            "+r._s(r.getStatusInLao(r.details.status))+"\n          ")])]),r._v(" "),o("div",{staticClass:"detail-section"},[r._m(1),r._v(" "),o("div",{staticClass:"detail-grid"},[o("div",{staticClass:"detail-item"},[o("label",[r._v("ID")]),r._v(" "),o("span",{staticClass:"detail-value"},[r._v("#"+r._s(r.details.id))])]),r._v(" "),o("div",{staticClass:"detail-item"},[o("label",[r._v("ຈຳນວນເງິນ")]),r._v(" "),o("span",{staticClass:"detail-value amount-display"},[r._v("\n                "+r._s(r.formatCurrency(r.details.amount))+"\n                "),o("small",[r._v(r._s(null===(t=r.details.currency)||void 0===t?void 0:t.code))])])]),r._v(" "),r.details.exchangeRate?o("div",{staticClass:"detail-item"},[o("label",[r._v("ອັດຕາແລກປ່ຽນ")]),r._v(" "),o("span",{staticClass:"detail-value exchange-rate-display"},[o("i",{staticClass:"fas fa-exchange-alt"}),r._v("\n                "+r._s(r.formatExchangeRate(r.details.exchangeRate))+"\n              ")])]):r._e(),r._v(" "),o("div",{staticClass:"detail-item full-width"},[o("label",[r._v("ຈຸດປະສົງ")]),r._v(" "),o("span",{staticClass:"detail-value"},[r._v(r._s(r.details.purpose||"No purpose specified"))])])])]),r._v(" "),o("div",{staticClass:"detail-section"},[r._m(2),r._v(" "),o("div",{staticClass:"detail-grid"},[o("div",{staticClass:"detail-item"},[o("label",[r._v("ຜູ້ລົງບັນຊີ")]),r._v(" "),o("span",{staticClass:"detail-value user-info"},[o("i",{staticClass:"fas fa-user"}),r._v("\n                "+r._s((null===(e=r.details.maker)||void 0===e?void 0:e.cus_name)||"N/A")+"\n              ")])]),r._v(" "),o("div",{staticClass:"detail-item"},[o("label",[r._v("ຜູ້ອະນຸມັດ")]),r._v(" "),o("span",{staticClass:"detail-value user-info"},[o("i",{staticClass:"fas fa-user-check"}),r._v("\n                "+r._s((null===(n=r.details.checker)||void 0===n?void 0:n.cus_name)||"Not yet approved")+"\n              ")])])])]),r._v(" "),o("div",{staticClass:"detail-section"},[r._m(3),r._v(" "),o("div",{staticClass:"timeline"},[o("div",{staticClass:"timeline-item"},[r._m(4),r._v(" "),o("div",{staticClass:"timeline-content"},[o("label",[r._v("ລົງບັນຊີລາຍຈ່າຍ")]),r._v(" "),o("span",{staticClass:"timeline-date"},[r._v(r._s(r.formatDateTime(r.details.createdAt)))])])]),r._v(" "),r.details.approvedAt?o("div",{staticClass:"timeline-item"},[r._m(5),r._v(" "),o("div",{staticClass:"timeline-content"},[o("label",[r._v("ອະນຸມັດແລ້ວ")]),r._v(" "),o("span",{staticClass:"timeline-date"},[r._v(r._s(r.formatDateTime(r.details.approvedAt)))])])]):r._e(),r._v(" "),r.details.dueDate?o("div",{staticClass:"timeline-item"},[o("div",{staticClass:"timeline-icon due",class:{overdue:r.isOverdue(r.details.dueDate)}},[o("i",{staticClass:"fas fa-clock"})]),r._v(" "),o("div",{staticClass:"timeline-content"},[o("label",[r._v("ວັນຄົບຮອບຄວນຊຳລະ")]),r._v(" "),o("span",{staticClass:"timeline-date",class:{overdue:r.isOverdue(r.details.dueDate)}},[r._v("\n                  "+r._s(r.formatDateTime(r.details.dueDate))+"\n                  "),r.isOverdue(r.details.dueDate)?o("span",{staticClass:"overdue-badge"},[o("i",{staticClass:"fas fa-exclamation-triangle"}),r._v(" Overdue\n                  ")]):r._e()])])]):r._e(),r._v(" "),r.details.settledAt?o("div",{staticClass:"timeline-item"},[r._m(6),r._v(" "),o("div",{staticClass:"timeline-content"},[o("label",[r._v("ຮັບຊຳລະ")]),r._v(" "),o("span",{staticClass:"timeline-date"},[r._v(r._s(r.formatDateTime(r.details.settledAt)))])])]):r._e()])]),r._v(" "),r.details.note?o("div",{staticClass:"detail-section"},[r._m(7),r._v(" "),o("div",{staticClass:"notes-content"},[r._v("\n            "+r._s(r.details.note)+"\n          ")])]):r._e(),r._v(" "),r.details.history&&r.details.history.length>0?o("div",{staticClass:"detail-section"},[r._m(8),r._v(" "),o("div",{staticClass:"history-list"},r._l(r.details.history,(function(t,e){return o("div",{key:e,staticClass:"history-item"},[o("div",{staticClass:"history-icon"},[o("i",{staticClass:"fas",class:r.getHistoryIcon(t.action)})]),r._v(" "),o("div",{staticClass:"history-content"},[o("span",{staticClass:"history-action"},[r._v(r._s(t.action))]),r._v(" "),o("span",{staticClass:"history-user"},[r._v("by "+r._s(t.user))]),r._v(" "),o("span",{staticClass:"history-date"},[r._v(r._s(r.formatDateTime(t.createdAt)))])])])})),0)]):r._e()]):o("div",{staticClass:"detail-error"},[o("i",{staticClass:"fas fa-exclamation-triangle"}),r._v(" "),o("p",[r._v("Failed to load advance details")]),r._v(" "),o("button",{staticClass:"btn btn-primary btn-sm",on:{click:r.retryLoad}},[o("i",{staticClass:"fas fa-redo"}),r._v(" Try Again\n        ")])])]),r._v(" "),o("div",{staticClass:"modal-footer detail-footer"},[o("button",{staticClass:"btn btn-secondary close-detail-btn",on:{click:r.closeDialog}},[o("i",{staticClass:"fas fa-times"}),r._v("\n        Close\n      ")]),r._v(" "),o("div",{staticClass:"detail-actions"},[r.details&&"pending"===r.details.status?o("button",{staticClass:"btn btn-warning action-btn",attrs:{title:"Edit"},on:{click:r.editAdvance}},[o("i",{staticClass:"fas fa-edit"})]):r._e(),r._v(" "),r.details&&"pending"===r.details.status?o("button",{staticClass:"btn btn-success action-btn",attrs:{title:"Approve"},on:{click:r.approveAdvance}},[o("i",{staticClass:"fas fa-check"})]):r._e(),r._v(" "),r.details&&"approved"===r.details.status?o("button",{staticClass:"btn btn-success action-btn",attrs:{title:"Create Settlement"},on:{click:r.createSettlement}},[o("i",{staticClass:"fas fa-file-invoice-dollar"})]):r._e()])])])]):r._e()}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-title-section"},[e("i",{staticClass:"fas fa-file-invoice-dollar modal-icon"}),t._v(" "),e("h5",{staticClass:"modal-title"},[t._v("ລາຍລະອຽດການອອກລາຍຈ່າຍ")])])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-info-circle"}),this._v("\n            ຂໍ້ມູນເບື້ອງຕົ້ນ\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-users"}),this._v("\n            ຜູ້ໃຊ້ ທີ່ກ່ຽວຂ້ອງ\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-calendar"}),this._v("\n            ການເຄື່ອນໄຫວລາຍການ\n          ")])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon created"},[t("i",{staticClass:"fas fa-plus"})])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon approved"},[t("i",{staticClass:"fas fa-check"})])},function(){var t=this._self._c;return t("div",{staticClass:"timeline-icon settled"},[t("i",{staticClass:"fas fa-money-bill"})])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-sticky-note"}),this._v("\n            Notes\n          ")])},function(){var t=this._self._c;return t("h6",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-history"}),this._v("\n            Action History\n          ")])}],!1,null,"0bf00b78",null);e.default=component.exports},1282:function(t,e,n){"use strict";n.r(e);n(34),n(333),n(5),n(68);var r={name:"VoucherPrintComponent",props:{voucherData:{type:Object,default:function(){return{id:5,amount:4e6,purpose:"test",note:"",status:"pending",approvedAt:null,dueDate:"2025-07-24T00:00:00.000Z",createdAt:"2025-07-09T15:12:51.000Z",updateTimestamp:"2025-07-09T15:12:51.000Z",makerId:2,checkerId:null,currencyId:5,maker:{id:2,cus_id:1001,cus_pass:"1111",cus_name:"USER01",cus_tel:"TELEPHONE",cus_email:"EMAIL",cus_active:!0,village:null,district:null,province:null,remark:null,isActive:!0,createdAt:"2025-01-24T19:54:20.000Z",updateTimestamp:"2025-01-24T19:54:20.000Z",groupId:1},checker:null,currency:{id:5,code:"USD",name:"US Dollar",rate:1,isActive:!0,isLocalCCY:!1,createdAt:"2023-09-17T06:52:15.000Z",updateTimestamp:"2025-03-03T01:11:36.000Z"},settlementLine:[]}}}},data:function(){return{showPrintDialog:!1}},watch:{voucherData:{handler:function(t){t&&t.id&&(this.showPrintDialog=!0)},deep:!0,immediate:!0}},methods:{openPrintDialog:function(){this.showPrintDialog=!0},closePrintDialog:function(){this.showPrintDialog=!1,this.$emit("close")},formatVoucherNumber:function(t){return String(t).padStart(6,"0")},formatDate:function(t){if(!t)return{day:"",month:"",year:""};var e=new Date(t);return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},formatAmount:function(t){return t?new Intl.NumberFormat("en-US").format(t):"0"},convertToWords:function(t,e){if(!t)return"";var n=["","ໜຶ່ງ","ສອງ","ສາມ","ສີ່","ຫ້າ","ຫົກ","ເຈັດ","ແປດ","ເກົ້າ"],r=["","ສິບ","ຮ້ອຍ","ພັນ","ສິບພັນ","ແສນ","ລ້ານ"],o=t.toString(),c=o.length;if(c<=6){for(var d="",i=0;i<c;i++){var l=parseInt(o[i]);l>0&&(d+=n[l]+r[c-i-1])}switch(e){case"LAK":d+=" ກີບ";break;case"USD":d+=" ໂດລາ";break;case"THB":d+=" ບາດ";break;default:d+=e||""}return d}return this.formatAmount(t)+" "+(e||"")},printVoucher:function(){var t=this.$refs.voucherContent.innerHTML,e=window.open("","_blank","width=800,height=600");e.document.write("\n        <html>\n          <head>\n            <title>ໃບຈ່າຍເງິນສົດອອກຄັງ</title>\n            <style>\n              body { \n                font-family: 'Phetsarath OT', 'Noto Sans Lao', Arial, sans-serif; \n                margin: 0; \n                padding: 20px; \n              }\n              .voucher-container { \n                border: 2px solid #000; \n                padding: 15px; \n                font-size: 12px; \n                line-height: 1.4; \n              }\n              .voucher-header { \n                display: flex; \n                justify-content: space-between; \n                align-items: flex-start; \n                margin-bottom: 20px; \n                padding-bottom: 10px; \n                border-bottom: 1px solid #ccc; \n              }\n              .company-info { \n                flex: 1; \n                text-align: center; \n              }\n              .company-name { \n                font-weight: bold; \n                font-size: 14px; \n                margin-bottom: 5px; \n              }\n              .department { \n                font-size: 12px; \n                margin-bottom: 3px; \n              }\n              .sub-department { \n                font-size: 10px; \n                margin-bottom: 10px; \n              }\n              .amount-line { \n                font-size: 10px; \n                letter-spacing: 2px; \n              }\n              .voucher-number { \n                flex: 0 0 auto; \n                margin-left: 20px; \n              }\n              .number-box { \n                border: 2px solid #000; \n                padding: 8px 12px; \n                text-align: center; \n                background: #f9f9f9; \n              }\n              .number-label { \n                font-weight: bold; \n                margin-right: 10px; \n              }\n              .number-value { \n                font-weight: bold; \n              }\n              .voucher-title { \n                text-align: center; \n                font-size: 16px; \n                font-weight: bold; \n                margin: 20px 0; \n                text-decoration: underline; \n              }\n              .voucher-details { \n                margin-bottom: 30px; \n              }\n              .detail-row { \n                display: flex; \n                align-items: center; \n                margin-bottom: 12px; \n                min-height: 24px; \n              }\n              .detail-row.description { \n                flex-direction: column; \n                align-items: flex-start; \n              }\n              .label { \n                font-weight: 500; \n                margin-right: 10px; \n                white-space: nowrap; \n              }\n              .value { \n                margin-right: 20px; \n                border-bottom: 1px solid #000; \n                min-width: 40px; \n                text-align: center; \n                padding: 2px 5px; \n              }\n              .dotted-line { \n                flex: 1; \n                border-bottom: 1px dotted #000; \n                margin: 0 10px; \n                min-height: 20px; \n                padding: 2px 5px; \n              }\n              .currency-options { \n                display: flex; \n                gap: 20px; \n                margin-left: 10px; \n              }\n              .currency-options label { \n                display: flex; \n                align-items: center; \n                gap: 5px; \n                font-weight: normal; \n              }\n              .amount-number { \n                flex: 1; \n                border-bottom: 1px solid #000; \n                margin: 0 10px; \n                padding: 2px 10px; \n                text-align: right; \n                font-weight: bold; \n              }\n              .amount-display { \n                font-weight: bold; \n                font-size: 14px; \n                margin: 0 10px; \n              }\n              .description-content { \n                width: 100%; \n                min-height: 60px; \n                border: 1px solid #000; \n                padding: 10px; \n                margin-top: 5px; \n                background: #fafafa; \n              }\n              .amount-words { \n                flex: 1; \n                border-bottom: 1px solid #000; \n                margin-left: 10px; \n                padding: 2px 10px; \n                font-style: italic; \n              }\n              .signature-section { \n                display: flex; \n                justify-content: space-between; \n                margin-top: 40px; \n                gap: 10px; \n              }\n              .signature-box { \n                flex: 1; \n                text-align: center; \n              }\n              .signature-title { \n                font-size: 10px; \n                margin-bottom: 30px; \n                font-weight: 500; \n              }\n              .signature-line { \n                border-bottom: 1px solid #000; \n                height: 1px; \n                margin-top: 20px; \n              }\n              .signature-name { \n                font-size: 9px; \n                margin-top: 5px; \n                font-weight: normal; \n              }\n            </style>\n          </head>\n          <body>\n            ".concat(t,"\n          </body>\n        </html>\n      ")),e.document.close(),e.print(),e.close(),this.showPrintDialog=!1}}},o=(n(957),n(32)),component=Object(o.a)(r,(function(){var t,e,n,r,o,c,d,l,f,v,m,h,x,_,y=this,C=y._self._c;return C("div",[y.showPrintDialog?C("div",{staticClass:"modal-overlay",on:{click:y.closePrintDialog}},[C("div",{staticClass:"modal-content",on:{click:function(t){t.stopPropagation()}}},[C("div",{staticClass:"modal-header"},[C("h3",[y._v("ພິມໃບຈ່າຍສົດອອກຄັງ")]),y._v(" "),C("button",{staticClass:"close-btn",on:{click:y.closePrintDialog}},[C("i",{staticClass:"fas fa-times"})])]),y._v(" "),C("div",{staticClass:"modal-body"},[C("div",{ref:"voucherContent",staticClass:"voucher-container",attrs:{id:"voucher-print"}},[C("div",{staticClass:"voucher-header"},[y._m(0),y._v(" "),C("div",{staticClass:"voucher-number"},[C("div",{staticClass:"number-box"},[C("span",{staticClass:"number-label"},[y._v("No")]),y._v(" "),C("span",{staticClass:"number-value"},[y._v(y._s(y.formatVoucherNumber(y.voucherData.id)))])])])]),y._v(" "),C("div",{staticClass:"voucher-title"},[y._v("ໃບຈ່າຍເງິນສົດອອກຄັງ")]),y._v(" "),C("div",{staticClass:"voucher-details"},[y._m(1),y._v(" "),C("div",{staticClass:"detail-row"},[C("span",{staticClass:"label"},[y._v("ເລກທີ")]),y._v(" "),C("span",{staticClass:"value"},[y._v(y._s(y.voucherData.id||"N/A"))]),y._v(" "),C("span",{staticClass:"label"},[y._v("ລົງວັນທີ")]),y._v(" "),C("span",{staticClass:"value"},[y._v(y._s(y.formatDate(y.voucherData.createdAt).day))]),y._v(" "),C("span",{staticClass:"label"},[y._v("ເດືອນ")]),y._v(" "),C("span",{staticClass:"value"},[y._v(y._s(y.formatDate(y.voucherData.createdAt).month))]),y._v(" "),C("span",{staticClass:"label"},[y._v("ປີ")]),y._v(" "),C("span",{staticClass:"value"},[y._v(y._s(y.formatDate(y.voucherData.createdAt).year))])]),y._v(" "),y._m(2),y._v(" "),C("div",{staticClass:"detail-row"},[C("span",{staticClass:"label"},[y._v("ໄດ້ຈ່າຍເງິນ ")]),y._v(" "),y._m(3),y._v(" "),C("span",{staticClass:"label"},[y._v(" ສົດ ")]),y._v(" "),y._m(4),y._v(" "),C("span",{staticClass:"label"},[y._v(" ແຊັກເລກທີ່ ")]),y._v(" "),C("span",{staticClass:"dotted-line"}),y._v(" "),C("div",{staticClass:"currency-options"},[C("label",[C("input",{attrs:{type:"checkbox"},domProps:{checked:"LAK"===(null===(t=y.voucherData.currency)||void 0===t?void 0:t.code)}}),y._v("\n                  LAK")]),y._v(" "),C("label",[C("input",{attrs:{type:"checkbox"},domProps:{checked:"THB"===(null===(e=y.voucherData.currency)||void 0===e?void 0:e.code)}}),y._v("\n                  THB")]),y._v(" "),C("label",[C("input",{attrs:{type:"checkbox"},domProps:{checked:"USD"===(null===(n=y.voucherData.currency)||void 0===n?void 0:n.code)}}),y._v("\n                  USD")])])]),y._v(" "),y._m(5),y._v(" "),y._m(6),y._v(" "),y._m(7),y._v(" "),y._m(8),y._v(" "),y._m(9),y._v(" "),C("div",{staticClass:"detail-row"},[C("span",{staticClass:"label"},[y._v("ຈຳນວນ")]),y._v(" "),C("span",{staticClass:"amount-display"},[y._v(y._s(y.formatAmount(y.voucherData.amount)))]),y._v(" "),C("span",{staticClass:"label"},[y._v(y._s((null===(r=y.voucherData.currency)||void 0===r?void 0:r.name)||"N/A"))])]),y._v(" "),C("div",{staticClass:"detail-row"},[C("span",{staticClass:"label"},[y._v("ຈຳນວນເງິນເປັນຕົວຫນັງສື")]),y._v(" "),C("span",{staticClass:"amount-words"},[y._v(y._s(y.convertToWords(y.voucherData.amount,null===(o=y.voucherData.currency)||void 0===o?void 0:o.code)))])]),y._v(" "),C("div",{staticClass:"detail-row description"},[C("span",{staticClass:"label"},[y._v("ເນື້ອໃນລາຍການ")]),y._v(" "),C("div",{staticClass:"description-content"},[y._v("\n                "+y._s(y.voucherData.note||"ບໍ່ມີຫມາຍເຫດ")+"\n              ")])])]),y._v(" "),C("div",{staticClass:"signature-section"},[y._m(10),y._v(" "),y._m(11),y._v(" "),C("div",{staticClass:"signature-box"},[C("div",{staticClass:"signature-title"},[y._v("ຜູ້ຈ່າຍເງິນ")]),y._v(" "),C("div",{staticClass:"signature-line"}),y._v(" "),C("div",{staticClass:"signature-name"},[y._v("\n                "+y._s((null===(c=y.voucherData.checker)||void 0===c?void 0:c.cus_name)||"")+"\n              ")])]),y._v(" "),y._m(12)])])]),y._v(" "),C("div",{staticClass:"modal-footer"},[C("button",{staticClass:"btn btn-secondary",on:{click:y.closePrintDialog}},[C("i",{staticClass:"fas fa-times"}),y._v("\n          ຍົກເລີກ\n        ")]),y._v(" "),C("button",{staticClass:"btn btn-primary",on:{click:y.printVoucher}},[C("i",{staticClass:"fas fa-print"}),y._v("\n          ພິມ\n        ")])])])]):y._e(),y._v(" "),C("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"print-only"},[C("div",{staticClass:"voucher-container print-version"},[C("div",{staticClass:"voucher-header"},[y._m(13),y._v(" "),C("div",{staticClass:"voucher-number"},[C("div",{staticClass:"number-box"},[C("span",{staticClass:"number-label"},[y._v("No")]),y._v(" "),C("span",{staticClass:"number-value"},[y._v(y._s(y.formatVoucherNumber(y.voucherData.id)))])])])]),y._v(" "),C("div",{staticClass:"voucher-title"},[y._v("ໃບຈ່າຍເງິນສົດອອກຄັງ")]),y._v(" "),C("div",{staticClass:"voucher-details"},[C("div",{staticClass:"detail-row"},[C("span",{staticClass:"label"},[y._v("ຈ່າຍໃຫ້ຫຼືຮັບເອົາ")]),y._v(" "),C("span",{staticClass:"dotted-line"},[y._v(y._s((null===(d=y.voucherData.maker)||void 0===d?void 0:d.cus_name)||"N/A"))])]),y._v(" "),C("div",{staticClass:"detail-row"},[C("span",{staticClass:"label"},[y._v("ເລກທີ")]),y._v(" "),C("span",{staticClass:"value"},[y._v(y._s((null===(l=y.voucherData.maker)||void 0===l?void 0:l.cus_id)||"N/A"))]),y._v(" "),C("span",{staticClass:"label"},[y._v("ວັນທີນີ້")]),y._v(" "),C("span",{staticClass:"value"},[y._v(y._s(y.formatDate(y.voucherData.createdAt).day))]),y._v(" "),C("span",{staticClass:"label"},[y._v("ເດືອນ")]),y._v(" "),C("span",{staticClass:"value"},[y._v(y._s(y.formatDate(y.voucherData.createdAt).month))]),y._v(" "),C("span",{staticClass:"label"},[y._v("ປີ")]),y._v(" "),C("span",{staticClass:"value"},[y._v(y._s(y.formatDate(y.voucherData.createdAt).year))])]),y._v(" "),C("div",{staticClass:"detail-row"},[C("span",{staticClass:"label"},[y._v("ຈຳນວນເງິນ ກີບລາວ / ເອກະສານສຳຄັນ")]),y._v(" "),C("div",{staticClass:"currency-options"},[C("label",[C("input",{attrs:{type:"checkbox"},domProps:{checked:"LAK"===(null===(f=y.voucherData.currency)||void 0===f?void 0:f.code)}}),y._v("\n              LAK")]),y._v(" "),C("label",[C("input",{attrs:{type:"checkbox"},domProps:{checked:"THB"===(null===(v=y.voucherData.currency)||void 0===v?void 0:v.code)}}),y._v("\n              THB")]),y._v(" "),C("label",[C("input",{attrs:{type:"checkbox"},domProps:{checked:"USD"===(null===(m=y.voucherData.currency)||void 0===m?void 0:m.code)}}),y._v("\n              USD")])])]),y._v(" "),C("div",{staticClass:"detail-row"},[C("span",{staticClass:"label"},[y._v("ຈຳນວນ")]),y._v(" "),C("span",{staticClass:"amount-display"},[y._v(y._s(y.formatAmount(y.voucherData.amount)))]),y._v(" "),C("span",{staticClass:"label"},[y._v(y._s((null===(h=y.voucherData.currency)||void 0===h?void 0:h.name)||"N/A"))])]),y._v(" "),C("div",{staticClass:"detail-row description"},[C("span",{staticClass:"label"},[y._v("ເນື້ອໃນລາຍການ")]),y._v(" "),C("div",{staticClass:"description-content"},[y._v("\n            "+y._s(y.voucherData.note||"ບໍ່ມີຫມາຍເຫດ")+"\n          ")])])]),y._v(" "),C("div",{staticClass:"signature-section"},[C("div",{staticClass:"signature-box"},[C("div",{staticClass:"signature-title"},[y._v("ຜູ້ຮັບເງິນຂຶ້ນເຊັນ ຊື່ເຕັມ")]),y._v(" "),C("div",{staticClass:"signature-line"}),y._v(" "),C("div",{staticClass:"signature-name"},[y._v("\n            "+y._s((null===(x=y.voucherData.maker)||void 0===x?void 0:x.cus_name)||"")+"\n          ")])]),y._v(" "),y._m(14),y._v(" "),y._m(15),y._v(" "),C("div",{staticClass:"signature-box"},[C("div",{staticClass:"signature-title"},[y._v("ນາຍຄົນຈັງ")]),y._v(" "),C("div",{staticClass:"signature-line"}),y._v(" "),C("div",{staticClass:"signature-name"},[y._v("\n            "+y._s((null===(_=y.voucherData.checker)||void 0===_?void 0:_.cus_name)||"")+"\n          ")])])])])])])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"company-info"},[e("div",{staticClass:"company-name"},[t._v("\n                ສາທາລະນະລັດ ປະຊາທິປະໄຕ ປະຊາຊົນລາວ\n              ")]),t._v(" "),e("div",{staticClass:"company-name"},[t._v("\n                ສັນຕິພາບ ເອກະລາດ ປະຊາທິປະໄຕ ເອກະພາບ ວັດທະນາຖາວອນ\n              ")]),t._v(" "),e("div",{staticClass:"amount-line"},[t._v(".........(000)..........")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-row"},[e("span",{staticClass:"label"},[t._v("ອີງໃສ່ໃບ ຖອນ/ສະເຫນີ")]),t._v(" "),e("span",{staticClass:"dotted-line"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-row"},[e("span",{staticClass:"label"},[t._v("ຄັງເງິນສົດ, ກະຊວງ ໂຍທາທິການ ແລະ ຂົນສົ່ງ")]),t._v(" "),e("span",{staticClass:"dotted-line"})])},function(){var t=this._self._c;return t("label",[t("input",{attrs:{type:"checkbox"}})])},function(){var t=this._self._c;return t("label",[t("input",{attrs:{type:"checkbox"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-row"},[e("span",{staticClass:"label"},[t._v("ໃຫ້ທ່ານ")]),t._v(" "),e("span",{staticClass:"dotted-line"}),t._v(" "),e("span",{staticClass:"label"},[t._v("ເລກບັດປະຈຳຕົວ")]),t._v(" "),e("span",{staticClass:"dotted-line"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-row"},[e("span",{staticClass:"label"},[t._v("ສັງກັດຢູ່ພາກສ່ວນ ກົມ/ກອງ")]),t._v(" "),e("span",{staticClass:"dotted-line"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-row"},[e("span",{staticClass:"label"},[t._v("ເນື້ອໃນລາຍຈ່າຍ")]),t._v(" "),e("span",{staticClass:"dotted-line"})])},function(){var t=this._self._c;return t("div",{staticClass:"detail-row"},[t("span",{staticClass:"label"}),this._v(" "),t("span",{staticClass:"dotted-line"})])},function(){var t=this._self._c;return t("div",{staticClass:"detail-row"},[t("span",{staticClass:"label"}),this._v(" "),t("span",{staticClass:"dotted-line"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"signature-box"},[e("div",{staticClass:"signature-title"},[t._v("ຫົວໜ້າພະແນກ ຄັງເງິນສົດ")]),t._v(" "),e("div",{staticClass:"signature-line"}),t._v(" "),e("div",{staticClass:"signature-name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"signature-box"},[e("div",{staticClass:"signature-title"},[t._v("ຜູ້ຮັບເງິນ")]),t._v(" "),e("div",{staticClass:"signature-line"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"signature-box"},[e("div",{staticClass:"signature-title"},[t._v("ນາຍບັນຊີ")]),t._v(" "),e("div",{staticClass:"signature-line"}),t._v(" "),e("div",{staticClass:"signature-name"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"company-info"},[e("div",{staticClass:"company-name"},[t._v("ສາທາລະນະລັດ ປະຊາທິປະໄຕ ປະຊາຊົນລາວ")]),t._v(" "),e("div",{staticClass:"department"},[t._v("ກົມການເງິນ ແລະ ສິນເຊື່ອ")]),t._v(" "),e("div",{staticClass:"sub-department"},[t._v("\n            ພະນັກງານການເງິນ ອຳນວຍການ ວິທະຍາລັຍຂັ້ນສູງ\n          ")]),t._v(" "),e("div",{staticClass:"amount-line"},[t._v(".........(000)..........")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"signature-box"},[e("div",{staticClass:"signature-title"},[t._v("ຜູ້ສົ່ງເງິນ")]),t._v(" "),e("div",{staticClass:"signature-line"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"signature-box"},[e("div",{staticClass:"signature-title"},[t._v("ຜູ້ຈ່າຍເງິນ")]),t._v(" "),e("div",{staticClass:"signature-line"})])}],!1,null,"33ecff44",null);e.default=component.exports},1283:function(t,e,n){"use strict";n.r(e);n(44),n(9),n(5),n(10),n(7),n(11),n(8),n(12);var r=n(33),o=n(3),c=n(20);n(92),n(22),n(39),n(51),n(68),n(54),n(53),n(819),n(445),n(30);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"MoneyAdvanceAuditDialog",props:{show:{type:Boolean,default:!1},recordId:{type:[Number,String],required:!0},recordTitle:{type:String,default:""}},data:function(){return{auditTrail:[],filteredAuditTrail:[],loading:!1,loadingMore:!1,error:null,actionFilter:"",currentPage:1,hasMoreData:!1,actionLabels:{CREATE:"ສ້າງ",UPDATE:"ແກ້ໄຂ",APPROVE:"ອະນຸມັດ",SETTLE:"ຊຳລະ",DELETE:"ລົບ"},fieldLabels:{amount:"ຈຳນວນເງິນ",purpose:"ຈຸດປະສົງ",status:"ສະຖານະ",note:"ໂນ໊ດ",dueDate:"ວັນຄົບຮອບ",bookingDate:"ວັນທີບັນຊີ",makerId:"ຜູ້ລົງບັນຊີ",checkerId:"ຜູ້ກວດ",currencyId:"ສະກຸນເງິນ",bankAccountId:"ບັນຊີທະນາຄານ",ministryId:"ກະຊວງ",exchangeRate:"ອັດຕາແລກປ່ຽນ",approvedAt:"ວັນທີອະນຸມັດ"}}},watch:{show:function(t){t&&this.recordId&&this.loadAuditTrail()},recordId:function(t){t&&this.show&&this.loadAuditTrail()}},methods:{loadAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,t.currentPage=1,e.prev=3,e.next=6,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:20,offset:0}});case 6:n=e.sent,t.auditTrail=n.data.data.map((function(t){return l(l({},t),{},{expanded:!1})})),t.hasMoreData=20===n.data.data.length,t.filterAuditTrail(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("Error loading audit trail:",e.t0),t.error=(null===(r=e.t0.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||"ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ";case 16:return e.prev=16,t.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,12,16,19]])})))()},loadMoreAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingMore=!0,t.currentPage++,e.prev=2,e.next=5,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:20,offset:20*(t.currentPage-1)}});case 5:o=e.sent,c=o.data.data.map((function(t){return l(l({},t),{},{expanded:!1})})),(n=t.auditTrail).push.apply(n,Object(r.a)(c)),t.hasMoreData=20===c.length,t.filterAuditTrail(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Error loading more audit trail:",e.t0),t.currentPage--;case 16:return e.prev=16,t.loadingMore=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,12,16,19]])})))()},filterAuditTrail:function(){var t=this;this.actionFilter?this.filteredAuditTrail=this.auditTrail.filter((function(e){return e.action===t.actionFilter})):this.filteredAuditTrail=Object(r.a)(this.auditTrail)},toggleExpand:function(t){t.totalChanges>0&&this.$set(t,"expanded",!t.expanded)},getActionInLao:function(t){return this.actionLabels[t]||t},getFieldNameInLao:function(t){return this.fieldLabels[t]||t},getActionIcon:function(t){return{CREATE:"fas fa-plus text-success",UPDATE:"fas fa-edit text-warning",APPROVE:"fas fa-check text-success",SETTLE:"fas fa-money-bill text-info",DELETE:"fas fa-trash text-danger"}[t]||"fas fa-circle"},getFieldIcon:function(t){return{amount:"fas fa-dollar-sign",purpose:"fas fa-tag",status:"fas fa-flag",note:"fas fa-sticky-note",dueDate:"fas fa-calendar",bookingDate:"fas fa-calendar-alt",makerId:"fas fa-user",checkerId:"fas fa-user-check",currencyId:"fas fa-coins",bankAccountId:"fas fa-university",ministryId:"fas fa-building",exchangeRate:"fas fa-exchange-alt",approvedAt:"fas fa-check-circle"}[t]||"fas fa-info-circle"},formatValue:function(t,e){if(null==e)return"ບໍ່ມີ";if("amount"===t)return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);if(t.includes("Date")||t.includes("At"))return this.formatDate(e);if("status"===t){return{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ"}[e]||e}return e.toString()},formatDateTime:function(t){return t?new Date(t).toLocaleString("lo-LA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"},formatDate:function(t){return t?new Date(t).toLocaleDateString("lo-LA"):"N/A"},exportAuditTrail:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"),{params:{limit:1e3,offset:0,format:"csv"},responseType:"blob"});case 3:n=e.sent,r=new Blob([n.data],{type:"text/csv"}),o=window.URL.createObjectURL(r),(a=document.createElement("a")).href=o,a.download="audit-trail-".concat(t.recordId,"-").concat(Date.now(),".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(o),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$emit("show-toast","ເກີດຂໍ້ຜິດພາດໃນການສົ່ງອອກຂໍ້ມູນ","error");case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))()},compareVersions:function(){this.$emit("compare-versions",this.recordId)},viewFullDetails:function(t){this.$emit("view-full-details",t)},closeDialog:function(){this.$emit("close")}}},v=(n(959),n(32)),component=Object(v.a)(f,(function(){var t,e,n=this,r=n._self._c;return n.show?r("div",{staticClass:"modal-overlay",on:{click:n.closeDialog}},[r("div",{staticClass:"modal-dialog audit-dialog",on:{click:function(t){t.stopPropagation()}}},[r("div",{staticClass:"modal-header audit-header"},[r("div",{staticClass:"modal-title-section"},[r("i",{staticClass:"fas fa-history modal-icon"}),n._v(" "),r("h5",{staticClass:"modal-title"},[n._v("\n          ປະຫວັດການປ່ຽນແປງ - "+n._s(n.recordTitle)+"\n        ")])]),n._v(" "),r("button",{staticClass:"close-btn",on:{click:n.closeDialog}},[r("i",{staticClass:"fas fa-times"})])]),n._v(" "),r("div",{staticClass:"modal-body"},[n.loading?r("div",{staticClass:"loading-container"},[r("div",{staticClass:"spinner"}),n._v(" "),r("p",[n._v("ກຳລັງໂຫຼດປະຫວັດການປ່ຽນແປງ...")])]):n.error?r("div",{staticClass:"error-container"},[n._m(0),n._v(" "),r("h4",[n._v("ເກີດຂໍ້ຜິດພາດ")]),n._v(" "),r("p",[n._v(n._s(n.error))]),n._v(" "),r("button",{staticClass:"btn btn-primary btn-sm",on:{click:n.loadAuditTrail}},[r("i",{staticClass:"fas fa-redo"}),n._v("\n          ລອງໃໝ່\n        ")])]):0===n.auditTrail.length?r("div",{staticClass:"no-data-container"},[n._m(1),n._v(" "),r("h4",[n._v("ບໍ່ມີປະຫວັດການປ່ຽນແປງ")]),n._v(" "),r("p",[n._v("ບໍ່ພົບປະຫວັດການປ່ຽນແປງສຳລັບບັນຊີນີ້")])]):r("div",{staticClass:"audit-content"},[r("div",{staticClass:"audit-summary"},[r("div",{staticClass:"summary-card"},[n._m(2),n._v(" "),r("div",{staticClass:"summary-info"},[r("div",{staticClass:"summary-label"},[n._v("ລວມການປ່ຽນແປງ")]),n._v(" "),r("div",{staticClass:"summary-value"},[n._v(n._s(n.auditTrail.length))])])]),n._v(" "),r("div",{staticClass:"summary-card"},[n._m(3),n._v(" "),r("div",{staticClass:"summary-info"},[r("div",{staticClass:"summary-label"},[n._v("ການປ່ຽນແປງລ່າສຸດ")]),n._v(" "),r("div",{staticClass:"summary-value"},[n._v(n._s(n.formatDateTime(null===(t=n.auditTrail[0])||void 0===t?void 0:t.changedAt)))])])]),n._v(" "),r("div",{staticClass:"summary-card"},[n._m(4),n._v(" "),r("div",{staticClass:"summary-info"},[r("div",{staticClass:"summary-label"},[n._v("ຜູ້ປ່ຽນແປງລ່າສຸດ")]),n._v(" "),r("div",{staticClass:"summary-value"},[n._v(n._s((null===(e=n.auditTrail[0])||void 0===e?void 0:e.changedBy)||"ລະບົບ"))])])])]),n._v(" "),r("div",{staticClass:"audit-controls"},[r("div",{staticClass:"filter-controls"},[r("select",{directives:[{name:"model",rawName:"v-model",value:n.actionFilter,expression:"actionFilter"}],staticClass:"form-control filter-select",on:{change:[function(t){var e=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));n.actionFilter=t.target.multiple?e:e[0]},n.filterAuditTrail]}},[r("option",{attrs:{value:""}},[n._v("ທຸກການດຳເນີນການ")]),n._v(" "),r("option",{attrs:{value:"CREATE"}},[n._v("ສ້າງ")]),n._v(" "),r("option",{attrs:{value:"UPDATE"}},[n._v("ແກ້ໄຂ")]),n._v(" "),r("option",{attrs:{value:"APPROVE"}},[n._v("ອະນຸມັດ")]),n._v(" "),r("option",{attrs:{value:"SETTLE"}},[n._v("ຊຳລະ")]),n._v(" "),r("option",{attrs:{value:"DELETE"}},[n._v("ລົບ")])]),n._v(" "),r("button",{staticClass:"btn btn-secondary btn-sm",on:{click:n.exportAuditTrail}},[r("i",{staticClass:"fas fa-download"}),n._v("\n              ສົ່ງອອກ\n            ")])])]),n._v(" "),r("div",{staticClass:"audit-timeline"},n._l(n.filteredAuditTrail,(function(t,e){return r("div",{key:t.id,staticClass:"timeline-item",class:{expandable:t.totalChanges>0}},[r("div",{staticClass:"timeline-marker"},[r("i",{class:n.getActionIcon(t.action)})]),n._v(" "),r("div",{staticClass:"timeline-content"},[r("div",{staticClass:"timeline-header",on:{click:function(e){return n.toggleExpand(t)}}},[r("div",{staticClass:"timeline-main-info"},[r("div",{staticClass:"timeline-action"},[r("span",{class:["action-badge",t.action.toLowerCase()]},[n._v("\n                      "+n._s(n.getActionInLao(t.action))+"\n                    ")]),n._v(" "),r("span",{staticClass:"timeline-time"},[n._v(n._s(n.formatDateTime(t.changedAt)))])]),n._v(" "),r("div",{staticClass:"timeline-user"},[r("i",{staticClass:"fas fa-user-circle"}),n._v("\n                    "+n._s(t.changedBy||"ລະບົບ")+"\n                  ")])]),n._v(" "),t.totalChanges>0?r("div",{staticClass:"timeline-toggle"},[r("span",{staticClass:"changes-count"},[n._v(n._s(t.totalChanges)+" ການປ່ຽນແປງ")]),n._v(" "),r("i",{staticClass:"toggle-icon",class:["fas",t.expanded?"fa-chevron-up":"fa-chevron-down"]})]):n._e()]),n._v(" "),t.reason?r("div",{staticClass:"timeline-reason"},[r("i",{staticClass:"fas fa-comment"}),n._v(" "),r("span",[n._v(n._s(t.reason))])]):n._e(),n._v(" "),t.expanded&&t.keyChanges&&t.keyChanges.length>0?r("div",{staticClass:"timeline-details"},[r("div",{staticClass:"changes-list"},[r("h6",[n._v("ລາຍລະອຽດການປ່ຽນແປງ:")]),n._v(" "),n._l(t.keyChanges,(function(t){return r("div",{key:t.field,staticClass:"change-item"},[r("div",{staticClass:"change-field"},[r("i",{class:n.getFieldIcon(t.field)}),n._v("\n                      "+n._s(n.getFieldNameInLao(t.field))+"\n                    ")]),n._v(" "),r("div",{staticClass:"change-values"},[r("div",{staticClass:"old-value"},[r("span",{staticClass:"value-label"},[n._v("ເກົ່າ:")]),n._v(" "),r("span",{staticClass:"value"},[n._v(n._s(n.formatValue(t.field,t.oldValue)))])]),n._v(" "),n._m(5,!0),n._v(" "),r("div",{staticClass:"new-value"},[r("span",{staticClass:"value-label"},[n._v("ໃໝ່:")]),n._v(" "),r("span",{staticClass:"value"},[n._v(n._s(n.formatValue(t.field,t.newValue)))])])])])}))],2)]):n._e(),n._v(" "),t.totalChanges>3&&t.expanded?r("div",{staticClass:"view-full-details"},[r("button",{staticClass:"btn btn-link btn-sm",on:{click:function(e){return n.viewFullDetails(t)}}},[r("i",{staticClass:"fas fa-eye"}),n._v("\n                  ເບິ່ງລາຍລະອຽດທັງໝົດ ("+n._s(t.totalChanges)+" ການປ່ຽນແປງ)\n                ")])]):n._e()])])})),0),n._v(" "),n.hasMoreData?r("div",{staticClass:"load-more-container"},[r("button",{staticClass:"btn btn-secondary",attrs:{disabled:n.loadingMore},on:{click:n.loadMoreAuditTrail}},[n.loadingMore?r("i",{staticClass:"fas fa-spinner fa-spin"}):r("i",{staticClass:"fas fa-plus"}),n._v("\n            "+n._s(n.loadingMore?"ກຳລັງໂຫຼດ...":"ໂຫຼດເພີ່ມ")+"\n          ")])]):n._e()])]),n._v(" "),r("div",{staticClass:"modal-footer audit-footer"},[r("button",{staticClass:"btn btn-info",attrs:{disabled:n.auditTrail.length<2},on:{click:n.compareVersions}},[r("i",{staticClass:"fas fa-balance-scale"}),n._v("\n        ປຽບທຽບເວີຊັ່ນ\n      ")]),n._v(" "),r("button",{staticClass:"btn btn-secondary",on:{click:n.closeDialog}},[r("i",{staticClass:"fas fa-times"}),n._v("\n        ປິດ\n      ")])])])]):n._e()}),[function(){var t=this._self._c;return t("div",{staticClass:"error-icon"},[t("i",{staticClass:"fas fa-exclamation-triangle"})])},function(){var t=this._self._c;return t("div",{staticClass:"no-data-icon"},[t("i",{staticClass:"fas fa-history"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-list"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-clock"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-user"})])},function(){var t=this._self._c;return t("div",{staticClass:"arrow"},[t("i",{staticClass:"fas fa-arrow-right"})])}],!1,null,"5c476a8a",null);e.default=component.exports},1284:function(t,e,n){"use strict";n.r(e);n(44),n(9),n(5),n(10);var r=n(31),o=n(20),c=(n(92),n(22),n(8),n(66),n(30),n(39),n(51),n(54),n(53),n(819),n(445),n(344),n(102),n(35),n(85),{name:"VersionComparisonDialog",props:{show:{type:Boolean,default:!1},recordId:{type:[Number,String],required:!0},recordData:{type:Object,default:null},initialComparison:{type:Object,default:null},canRestore:{type:Boolean,default:!1}},data:function(){return{loading:!1,error:null,availableVersions:[],selectedVersion1:null,selectedVersion2:null,comparisonData:null,fieldLabels:{amount:"ຈຳນວນເງິນ",purpose:"ຈຸດປະສົງ",status:"ສະຖານະ",dueDate:"ວັນຄົບກຳນົດ",note:"ໝາຍເຫດ",ministryId:"ກະຊວງ",bankAccountId:"ບັນຊີທະນາຄານ",currencyId:"ສະກຸນເງິນ",bookingDate:"ວັນທີ່ລົງບັນຊີ",exchangeRate:"ອັດຕາແລກປ່ຽນ",makerId:"ຜູ້ລົງບັນຊີ",checkerId:"ຜູ້ອະນຸມັດ",approvedAt:"ວັນທີ່ອະນຸມັດ"}}},watch:{show:function(t){t&&this.initializeDialog()},initialComparison:{handler:function(t){t&&this.show&&this.setupInitialComparison()},immediate:!0}},methods:{initializeDialog:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.initialComparison){e.next=4;break}t.setupInitialComparison(),e.next=6;break;case 4:return e.next=6,t.fetchAvailableVersions();case 6:case"end":return e.stop()}}),e)})))()},setupInitialComparison:function(){this.initialComparison.current&&this.initialComparison.previous&&(this.selectedVersion1=this.initialComparison.previous.id,this.selectedVersion2=this.initialComparison.current.id,this.comparisonData={currentVersion:this.initialComparison.current.version||1,compareVersion:this.initialComparison.previous.version||1,differences:this.calculateDifferences(this.initialComparison.previous,this.initialComparison.current)})},calculateDifferences:function(t,e){var n={};return Object.keys(this.fieldLabels).forEach((function(r){var o,c,d=(null===(o=t.data)||void 0===o?void 0:o[r])||t[r],l=(null===(c=e.data)||void 0===c?void 0:c[r])||e[r];d!==l&&(n[r]={current:l,version:d})})),n},fetchAvailableVersions:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.recordId){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,t.error=null,e.prev=4,e.next=7,t.$axios.get("/api/money-advances/".concat(t.recordId,"/audit"));case 7:if(n=e.sent,!(data=n.data).success){e.next=13;break}t.availableVersions=data.data.map((function(t){return{id:t.id,version:t.version||1,action:t.action,changedAt:t.changedAt,changedBy:t.changedBy,data:t.newData||t.oldData||{}}})),e.next=14;break;case 13:throw new Error(data.message||"Failed to fetch versions");case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),console.error("Error fetching versions:",e.t0),t.error=(null===(r=e.t0.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||e.t0.message;case 20:return e.prev=20,t.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,16,20,23]])})))()},loadComparison:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.selectedVersion1&&t.selectedVersion2){e.next=3;break}return t.comparisonData=null,e.abrupt("return");case 3:try{n=t.availableVersions.find((function(e){return e.id===t.selectedVersion1})),r=t.availableVersions.find((function(e){return e.id===t.selectedVersion2})),n&&r&&(t.comparisonData={currentVersion:r.version,compareVersion:n.version,differences:t.calculateDifferences(n,r)})}catch(e){console.error("Error loading comparison:",e),t.error="ເກີດຂໍ້ຜິດພາດໃນການປຽບທຽບ"}case 4:case"end":return e.stop()}}),e)})))()},getVersionLabel:function(t){var e=new Date(t.changedAt).toLocaleDateString("lo-LA"),n={CREATE:"ສ້າງ",UPDATE:"ແກ້ໄຂ",APPROVE:"ອະນຸມັດ",SETTLE:"ຊຳລະ",DELETE:"ລົບ"}[t.action]||t.action;return"v".concat(t.version," - ").concat(n," (").concat(e,")")},getVersionNumber:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));return(null==e?void 0:e.version)||"?"},getVersionDate:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));return e?new Date(e.changedAt).toLocaleDateString("lo-LA"):""},getTimeDifference:function(){var t=this;if(!this.selectedVersion1||!this.selectedVersion2)return 0;var e=this.availableVersions.find((function(e){return e.id===t.selectedVersion1})),n=this.availableVersions.find((function(e){return e.id===t.selectedVersion2}));if(e&&n){var r=new Date(e.changedAt),o=new Date(n.changedAt),c=Math.abs(o-r);return Math.ceil(c/864e5)}return 0},getDifferentUsers:function(){var t=this;if(!this.selectedVersion1||!this.selectedVersion2)return"N/A";var e=this.availableVersions.find((function(e){return e.id===t.selectedVersion1})),n=this.availableVersions.find((function(e){return e.id===t.selectedVersion2}));return e&&n?e.changedBy===n.changedBy?e.changedBy||"ບໍ່ຮູ້":"".concat(e.changedBy||"ບໍ່ຮູ້"," → ").concat(n.changedBy||"ບໍ່ຮູ້"):"N/A"},getFieldIcon:function(t){return{amount:"fas fa-dollar-sign",purpose:"fas fa-tag",status:"fas fa-flag",dueDate:"fas fa-calendar",note:"fas fa-sticky-note",ministryId:"fas fa-building",bankAccountId:"fas fa-university",currencyId:"fas fa-coins",bookingDate:"fas fa-calendar-day",exchangeRate:"fas fa-exchange-alt",makerId:"fas fa-user",checkerId:"fas fa-user-check",approvedAt:"fas fa-calendar-check"}[t]||"fas fa-info-circle"},getFieldLabel:function(t){return this.fieldLabels[t]||t},formatValue:function(t){if(null==t)return"N/A";if("boolean"==typeof t)return t?"ແມ່ນ":"ບໍ່";if("number"==typeof t)return t.toLocaleString();if("string"==typeof t&&t.includes("T"))try{return new Date(t).toLocaleDateString("lo-LA")}catch(e){return t}return String(t)},swapVersions:function(){var t=this.selectedVersion1;this.selectedVersion1=this.selectedVersion2,this.selectedVersion2=t,this.loadComparison()},restoreToVersion:function(t){var e=this.availableVersions.find((function(e){return e.id===t}));e&&this.$emit("restore",e)},exportComparison:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.comparisonData){e.next=2;break}return e.abrupt("return");case 2:try{n=t.generateComparisonCSV(),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(r),(link=document.createElement("a")).href=o,link.download="comparison-".concat(t.recordId,"-v").concat(t.getVersionNumber(t.selectedVersion1),"-v").concat(t.getVersionNumber(t.selectedVersion2),".csv"),document.body.appendChild(link),link.click(),document.body.removeChild(link),window.URL.revokeObjectURL(o),t.$emit("success","ສົ່ງອອກການປຽບທຽບສຳເລັດ")}catch(e){console.error("Export error:",e),t.$emit("error","ເກີດຂໍ້ຜິດພາດໃນການສົ່ງອອກ")}case 3:case"end":return e.stop()}}),e)})))()},generateComparisonCSV:function(){var t=this,e=[["Field","Version 1 Value","Version 2 Value"]];return Object.entries(this.comparisonData.differences).forEach((function(n){var o=Object(r.a)(n,2),c=o[0],d=o[1];e.push([t.getFieldLabel(c),t.formatValue(d.version),t.formatValue(d.current)])})),e.map((function(t){return t.map((function(t){return'"'.concat(String(t).replace(/"/g,'""'),'"')})).join(",")})).join("\n")},closeDialog:function(){this.selectedVersion1=null,this.selectedVersion2=null,this.comparisonData=null,this.$emit("close")}}}),d=(n(961),n(32)),component=Object(d.a)(c,(function(){var t,e=this,n=e._self._c;return e.show?n("div",{staticClass:"modal-overlay",on:{click:e.closeDialog}},[n("div",{staticClass:"modal-dialog comparison-dialog",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"modal-header"},[n("div",{staticClass:"modal-title-section"},[n("i",{staticClass:"fas fa-code-compare modal-icon"}),e._v(" "),n("h5",{staticClass:"modal-title"},[e._v("\n          ປຽບທຽບເວີຊັ່ນ - "+e._s((null===(t=e.recordData)||void 0===t?void 0:t.purpose)||"Record #".concat(e.recordId))+"\n        ")])]),e._v(" "),n("button",{staticClass:"close-btn",on:{click:e.closeDialog}},[n("i",{staticClass:"fas fa-times"})])]),e._v(" "),n("div",{staticClass:"modal-body"},[e.loading?n("div",{staticClass:"loading-state"},[n("div",{staticClass:"spinner"}),e._v(" "),n("p",[e._v("ກຳລັງໂຫຼດຂໍ້ມູນສຳລັບປຽບທຽບ...")])]):e.error?n("div",{staticClass:"error-state"},[e._m(0),e._v(" "),n("h6",[e._v("ເກີດຂໍ້ຜິດພາດໃນການໂຫຼດຂໍ້ມູນ")]),e._v(" "),n("p",[e._v(e._s(e.error))]),e._v(" "),n("button",{staticClass:"btn btn-primary btn-sm",on:{click:e.fetchComparisonData}},[n("i",{staticClass:"fas fa-redo"}),e._v("\n          ລອງໃໝ່\n        ")])]):n("div",{staticClass:"comparison-content"},[n("div",{staticClass:"version-selector"},[n("div",{staticClass:"selector-group"},[n("label",[e._v("ເວີຊັ່ນທີ່ 1 (ເກົ່າ):")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedVersion1,expression:"selectedVersion1"}],staticClass:"form-control",on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.selectedVersion1=t.target.multiple?n:n[0]},e.loadComparison]}},[n("option",{attrs:{value:""}},[e._v("ເລືອກເວີຊັ່ນ...")]),e._v(" "),e._l(e.availableVersions,(function(t){return n("option",{key:t.id,attrs:{disabled:t.id===e.selectedVersion2},domProps:{value:t.id}},[e._v("\n                "+e._s(e.getVersionLabel(t))+"\n              ")])}))],2)]),e._v(" "),e._m(1),e._v(" "),n("div",{staticClass:"selector-group"},[n("label",[e._v("ເວີຊັ່ນທີ່ 2 (ໃໝ່):")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedVersion2,expression:"selectedVersion2"}],staticClass:"form-control",on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));e.selectedVersion2=t.target.multiple?n:n[0]},e.loadComparison]}},[n("option",{attrs:{value:""}},[e._v("ເລືອກເວີຊັ່ນ...")]),e._v(" "),e._l(e.availableVersions,(function(t){return n("option",{key:t.id,attrs:{disabled:t.id===e.selectedVersion1},domProps:{value:t.id}},[e._v("\n                "+e._s(e.getVersionLabel(t))+"\n              ")])}))],2)])]),e._v(" "),e.comparisonData?n("div",{staticClass:"comparison-results"},[n("div",{staticClass:"comparison-summary"},[n("div",{staticClass:"summary-card"},[e._m(2),e._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-number"},[e._v(e._s(Object.keys(e.comparisonData.differences||{}).length))]),e._v(" "),n("div",{staticClass:"summary-label"},[e._v("ການປ່ຽນແປງ")])])]),e._v(" "),n("div",{staticClass:"summary-card"},[e._m(3),e._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-number"},[e._v(e._s(e.getTimeDifference()))]),e._v(" "),n("div",{staticClass:"summary-label"},[e._v("ວັນຫ່າງກັນ")])])]),e._v(" "),n("div",{staticClass:"summary-card"},[e._m(4),e._v(" "),n("div",{staticClass:"summary-info"},[n("div",{staticClass:"summary-text"},[e._v(e._s(e.getDifferentUsers()))]),e._v(" "),n("div",{staticClass:"summary-label"},[e._v("ຜູ້ປ່ຽນແປງ")])])])]),e._v(" "),0===Object.keys(e.comparisonData.differences||{}).length?n("div",{staticClass:"no-differences"},[e._m(5),e._v(" "),n("h6",[e._v("ບໍ່ມີການປ່ຽນແປງ")]),e._v(" "),n("p",[e._v("ເວີຊັ່ນທັງສອງມີຂໍ້ມູນຄືກັນ")])]):n("div",{staticClass:"differences-table"},[e._m(6),e._v(" "),n("div",{staticClass:"table-container"},[n("table",{staticClass:"comparison-table"},[n("thead",[n("tr",[n("th",{staticClass:"field-header"},[e._v("ຟິວ")]),e._v(" "),n("th",{staticClass:"version-header version1"},[n("div",{staticClass:"version-info"},[n("div",{staticClass:"version-label"},[e._v("ເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion1)))]),e._v(" "),n("div",{staticClass:"version-date"},[e._v(e._s(e.getVersionDate(e.selectedVersion1)))])])]),e._v(" "),n("th",{staticClass:"version-header version2"},[n("div",{staticClass:"version-info"},[n("div",{staticClass:"version-label"},[e._v("ເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion2)))]),e._v(" "),n("div",{staticClass:"version-date"},[e._v(e._s(e.getVersionDate(e.selectedVersion2)))])])])])]),e._v(" "),n("tbody",e._l(e.comparisonData.differences,(function(t,r){return n("tr",{key:r,staticClass:"diff-row"},[n("td",{staticClass:"field-cell"},[n("div",{staticClass:"field-info"},[n("i",{class:e.getFieldIcon(r)}),e._v(" "),n("span",{staticClass:"field-name"},[e._v(e._s(e.getFieldLabel(r)))])])]),e._v(" "),n("td",{staticClass:"value-cell version1"},[n("div",{staticClass:"value-content old-value"},[n("div",{staticClass:"value-text"},[e._v(e._s(e.formatValue(t.current)))])])]),e._v(" "),n("td",{staticClass:"value-cell version2"},[n("div",{staticClass:"value-content new-value"},[n("div",{staticClass:"value-text"},[e._v(e._s(e.formatValue(t.version)))]),e._v(" "),e._m(7,!0)])])])})),0)])])]),e._v(" "),Object.keys(e.comparisonData.differences||{}).length>0?n("div",{staticClass:"comparison-actions"},[e.canRestore?n("button",{staticClass:"btn btn-warning",on:{click:function(t){return e.restoreToVersion(e.selectedVersion1)}}},[n("i",{staticClass:"fas fa-undo"}),e._v("\n              ກັບຄືນໄປເວີຊັ່ນ "+e._s(e.getVersionNumber(e.selectedVersion1))+"\n            ")]):e._e(),e._v(" "),n("button",{staticClass:"btn btn-secondary",on:{click:e.exportComparison}},[n("i",{staticClass:"fas fa-download"}),e._v("\n              ສົ່ງອອກການປຽບທຽບ\n            ")])]):e._e()]):n("div",{staticClass:"select-versions-prompt"},[e._m(8),e._v(" "),n("h6",[e._v("ເລືອກເວີຊັ່ນເພື່ອປຽບທຽບ")]),e._v(" "),n("p",[e._v("ກະລຸນາເລືອກສອງເວີຊັ່ນທີ່ທ່ານຕ້ອງການປຽບທຽບ")])])])]),e._v(" "),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-outline",attrs:{disabled:!e.selectedVersion1||!e.selectedVersion2},on:{click:e.swapVersions}},[n("i",{staticClass:"fas fa-exchange-alt"}),e._v("\n        ສະຫຼັບເວີຊັ່ນ\n      ")]),e._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:e.closeDialog}},[n("i",{staticClass:"fas fa-times"}),e._v("\n        ປິດ\n      ")])])])]):e._e()}),[function(){var t=this._self._c;return t("div",{staticClass:"error-icon"},[t("i",{staticClass:"fas fa-exclamation-triangle"})])},function(){var t=this._self._c;return t("div",{staticClass:"comparison-arrow"},[t("i",{staticClass:"fas fa-exchange-alt"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-edit"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-calendar"})])},function(){var t=this._self._c;return t("div",{staticClass:"summary-icon"},[t("i",{staticClass:"fas fa-user"})])},function(){var t=this._self._c;return t("div",{staticClass:"no-diff-icon"},[t("i",{staticClass:"fas fa-equals"})])},function(){var t=this._self._c;return t("h6",[t("i",{staticClass:"fas fa-list"}),this._v("\n              ລາຍລະອຽດການປ່ຽນແປງ\n            ")])},function(){var t=this._self._c;return t("div",{staticClass:"change-indicator"},[t("i",{staticClass:"fas fa-arrow-left"})])},function(){var t=this._self._c;return t("div",{staticClass:"prompt-icon"},[t("i",{staticClass:"fas fa-hand-pointer"})])}],!1,null,"e6a23e30",null);e.default=component.exports},1401:function(t,e,n){"use strict";n(1182)},1402:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".btn-outline[data-v-e13c068e]{background:#fff;border:2px solid #667eea;color:#667eea}.btn-outline[data-v-e13c068e]:hover{background:#667eea;color:#fff}.btn-audit[data-v-e13c068e]{background:#9b59b6;color:#fff}.btn-audit[data-v-e13c068e]:hover{background:#8e44ad;box-shadow:0 4px 8px rgba(155,89,182,.3);transform:translateY(-2px)}.money-advance-container[data-v-e13c068e]{margin:0 auto;max-width:1400px;padding:20px}.header-section[data-v-e13c068e]{align-items:center;display:flex;justify-content:space-between;margin-bottom:30px}.header-actions[data-v-e13c068e]{align-items:center;display:flex;gap:12px}.page-title[data-v-e13c068e]{color:#333;font-size:28px;font-weight:600;margin:0}.summary-cards[data-v-e13c068e]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:30px}.summary-card[data-v-e13c068e]{border:1px solid #e3e6f0;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1)}.card-body[data-v-e13c068e]{padding:20px;text-align:center}.card-title[data-v-e13c068e]{color:#666;font-size:14px;font-weight:600;margin-bottom:10px;text-transform:uppercase}.card-value[data-v-e13c068e]{color:#333;font-size:24px;font-weight:700;margin:0}.card-value.pending[data-v-e13c068e]{color:#f39c12}.card-value.approved[data-v-e13c068e]{color:#27ae60}.card-value.settled[data-v-e13c068e]{color:#3498db}.filters-section[data-v-e13c068e]{background:#f8f9fa;border-radius:8px;margin-bottom:20px;padding:20px}.row[data-v-e13c068e]{display:flex;flex-wrap:wrap;margin:-10px}.col-md-2[data-v-e13c068e]{flex:0 0 16.666%;max-width:16.666%;padding:10px}.col-md-3[data-v-e13c068e]{flex:0 0 25%;max-width:25%;padding:10px}.form-control[data-v-e13c068e]{border:1px solid #ddd;border-radius:4px;font-size:14px;padding:8px 12px;width:100%}.btn[data-v-e13c068e]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:8px;padding:8px 16px;transition:all .2s ease}.btn-primary[data-v-e13c068e]{background:#007bff;color:#fff}.btn-secondary[data-v-e13c068e]{background:#6c757d;color:#fff}.btn-block[data-v-e13c068e]{justify-content:center;width:100%}.btn[data-v-e13c068e]:hover{opacity:.9;transform:translateY(-1px)}.table-container[data-v-e13c068e]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);overflow:hidden;position:relative}.loading-overlay[data-v-e13c068e]{align-items:center;background:hsla(0,0%,100%,.8);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:10}.spinner[data-v-e13c068e]{animation:spin-e13c068e 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:40px;width:40px}@keyframes spin-e13c068e{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.table[data-v-e13c068e]{border-collapse:collapse;margin:0;width:100%}.table th[data-v-e13c068e]{background:#f8f9fa;border-bottom:2px solid #dee2e6;font-weight:600;white-space:nowrap}.table td[data-v-e13c068e],.table th[data-v-e13c068e]{font-size:13px;padding:15px 10px}.table td[data-v-e13c068e]{border-top:1px solid #dee2e6;vertical-align:middle}.table-striped tbody tr[data-v-e13c068e]:nth-of-type(odd){background-color:rgba(0,0,0,.05)}.amount[data-v-e13c068e]{color:#27ae60;font-weight:600}.ministry-info[data-v-e13c068e]{font-size:12px}.ministry-name[data-v-e13c068e]{color:#333;font-weight:600;margin-bottom:2px}.ministry-code[data-v-e13c068e]{background:#e3f2fd;border-radius:3px;color:#666;font-family:monospace;font-size:10px;padding:1px 4px}.no-ministry[data-v-e13c068e]{color:#999;font-size:11px;font-style:italic}.bank-account-info[data-v-e13c068e]{font-size:12px}.bank-name[data-v-e13c068e]{color:#333;font-weight:600}.account-number[data-v-e13c068e]{color:#666;font-family:monospace}.no-bank-account[data-v-e13c068e]{color:#999;font-size:12px;font-style:italic}.status-badge[data-v-e13c068e]{align-items:center;border:1px solid transparent;border-radius:20px;display:inline-flex;font-size:12px;font-weight:600;gap:6px;padding:6px 12px;text-transform:uppercase}.status-badge.pending[data-v-e13c068e]{background:#fff3cd;border-color:#ffeaa7;color:#856404}.status-badge.approved[data-v-e13c068e]{background:#d4edda;border-color:#c3e6cb;color:#155724}.status-badge.settled[data-v-e13c068e]{background:#cce5ff;border-color:#b3d7ff;color:#004085}.action-buttons[data-v-e13c068e]{flex-wrap:wrap;gap:4px}.action-buttons[data-v-e13c068e],.btn-sm[data-v-e13c068e]{display:flex;justify-content:center}.btn-sm[data-v-e13c068e]{align-items:center;border:none;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);cursor:pointer;font-size:11px;height:28px;padding:0;transition:all .2s ease;width:28px}.btn-sm[data-v-e13c068e]:hover{box-shadow:0 4px 8px rgba(0,0,0,.15);transform:translateY(-2px)}.btn-sm.btn-info[data-v-e13c068e]{background:#17a2b8;color:#fff}.btn-sm.btn-warning[data-v-e13c068e]{background:#ffc107;color:#212529}.btn-sm.btn-success[data-v-e13c068e]{background:#28a745;color:#fff}.btn-sm.btn-danger[data-v-e13c068e]{background:#dc3545;color:#fff}.no-data[data-v-e13c068e]{color:#666;padding:60px 20px;text-align:center}.no-data i[data-v-e13c068e]{font-size:48px;margin-bottom:15px;opacity:.5}.pagination-nav[data-v-e13c068e]{display:flex;justify-content:center;margin-top:20px}.pagination[data-v-e13c068e]{display:flex;list-style:none;margin:0;padding:0}.page-item[data-v-e13c068e]{margin:0 2px}.page-link[data-v-e13c068e]{background:#fff;border:1px solid #dee2e6;color:#007bff;cursor:pointer;padding:8px 12px;-webkit-text-decoration:none;text-decoration:none}.page-link[data-v-e13c068e]:hover{background:#e9ecef}.page-item.active .page-link[data-v-e13c068e]{background:#007bff;border-color:#007bff;color:#fff}.page-item.disabled .page-link[data-v-e13c068e]{background:#fff;color:#6c757d;cursor:not-allowed}@media (max-width:1200px){.table td[data-v-e13c068e],.table th[data-v-e13c068e]{font-size:12px;padding:10px 6px}.btn-sm[data-v-e13c068e]{font-size:10px;height:24px;width:24px}}@media (max-width:768px){.summary-cards[data-v-e13c068e]{grid-template-columns:repeat(2,1fr)}.table-container[data-v-e13c068e]{overflow-x:auto}.table[data-v-e13c068e]{min-width:800px}.action-buttons[data-v-e13c068e]{flex-direction:row;gap:3px}.row[data-v-e13c068e]{flex-direction:column}.col-md-2[data-v-e13c068e],.col-md-3[data-v-e13c068e]{flex:1;margin-bottom:10px;max-width:100%}}@media (max-width:480px){.summary-cards[data-v-e13c068e]{grid-template-columns:1fr}.header-section[data-v-e13c068e]{flex-direction:column;gap:15px;text-align:center}.action-buttons[data-v-e13c068e]{justify-content:center}}",""]),r.locals={},t.exports=r},1667:function(t,e,n){"use strict";n.r(e);n(44),n(9),n(5),n(34),n(10),n(7),n(11),n(8),n(12);var r=n(3),o=n(20),c=(n(39),n(51),n(54),n(53),n(35),n(131),n(63),n(30),n(66),n(819),n(445),n(75),n(92),n(1606)),d=n(1281),l=n(1282),f=n(1283),v=n(1284),m=n(1607),h=n(1285),x=n(36);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function y(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C={name:"MoneyAdvanceManagement",components:{MoneyAdvanceDialog:c.default,MoneyAdvanceDetailDialog:d.default,VoucherPrintComponent:l.default,AuditTrailDialog:f.default,VersionComparisonDialog:v.default,AuditReportsDialog:m.default,SettlementDialog:h.default},middleware:"auths",data:function(){return{statusFilter:"",statusLabels:{pending:"ຄ້າງອະນຸມັດ",approved:"ອະນຸມັດແລ້ວ",settled:"ຊຳລະແລ້ວ",rejected:"ປະຕິເສດ",cancelled:"ຍົກເລີກ"},advances:[],dashboard:{counts:{total:0,pending:0,approved:0,settled:0},amounts:{total:0,pending:0}},users:[],currencies:[],ministries:[],bankAccounts:[],chartAccounts:[],pagination:{currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10},filters:{status:"",makerId:"",ministryId:""},searchTerm:"",loading:!1,saving:!1,formLoading:!1,showDialog:!1,radnomKeyMaintenanceDialog:1,showDetailDialog:!1,showPrintVoucher:!1,showSettlementDialog:!1,settlementData:null,selectedAdvanceForSettlement:null,showAuditDialog:!1,showComparisonDialog:!1,showAuditReportsDialog:!1,selectedRecordForAudit:null,selectedRecordForComparison:null,comparisonData:null,canRestoreRecord:!1,isEdit:!1,selectedAdvance:null,advanceDetails:null,detailLoading:!1,form:{id:null,amount:"",purpose:"",note:"",makerId:"",currencyId:"",dueDate:"",bankAccountId:"",ministryId:"",bookingDate:"",reason:""},searchTimeout:null}},computed:{user:function(){return this.$auth.user||""},paginationPages:function(){for(var t=[],e=Math.max(1,this.pagination.currentPage-2),n=Math.min(this.pagination.totalPages,this.pagination.currentPage+2),i=e;i<=n;i++)t.push(i);return t}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:t.canRestoreRecord=t.checkRestorePermissions();case 3:case"end":return e.stop()}}),e)})))()},methods:{checkRestorePermissions:function(){var t,e,n;return"admin"===(null===(t=this.user)||void 0===t?void 0:t.role)||(null===(e=this.user)||void 0===e||null===(n=e.permissions)||void 0===n?void 0:n.includes("restore_records"))},getStatusInLao:function(t){return this.statusLabels[t]||t.toUpperCase()},getStatusOptions:function(){return[{value:"",label:"ທຸກສະຖານະ"},{value:"pending",label:"ຄ້າງອະນຸມັດ"},{value:"approved",label:"ອະນຸມັດແລ້ວ"},{value:"settled",label:"ຊຳລະແລ້ວ"}]},loadInitialData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.fetchData(),t.fetchDashboard(),t.fetchUsers(),t.fetchCurrencies(),t.fetchMinistry(),t.fetchBankAccounts(),t.fetchChartAccounts()]);case 2:case"end":return e.stop()}}),e)})))()},fetchData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,n=y({page:t.pagination.currentPage,limit:t.pagination.itemsPerPage},t.filters),t.statusFilter&&(n.status=t.statusFilter),t.searchTerm&&(n.search=t.searchTerm),e.next=7,t.$axios.get("/api/money-advances",{params:n});case 7:r=e.sent,data=r.data,t.advances=data.data.advances,t.pagination=data.data.pagination,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),t.showToast("Error fetching money advances","error"),console.error(e.t0);case 17:return e.prev=17,t.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))()},fetchDashboard:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},t.filters.makerId&&(n.makerId=t.filters.makerId),t.filters.ministryId&&(n.ministryId=t.filters.ministryId),e.next=6,t.$axios.get("/api/money-advances/dashboard",{params:n});case 6:r=e.sent,data=r.data,t.dashboard=data.data,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching dashboard:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},fetchUsers:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/user/find");case 3:n=e.sent,(data=n.data)&&data.data?t.users=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.users=data:t.users=[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching users:",e.t0),t.users=[],t.showToast("Failed to load users","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchCurrencies:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/currency/find");case 3:n=e.sent,(data=n.data)&&data.data?t.currencies=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.currencies=data:t.currencies=[],e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching currencies:",e.t0),t.currencies=[],t.showToast("Failed to load currencies","error");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchMinistry:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/ministries");case 3:(n=e.sent).data&&n.data.success?t.ministries=n.data.data||[]:t.ministries=[],e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching ministries:",e.t0),t.ministries=[],t.showToast("Failed to load ministries","error");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))()},fetchBankAccounts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/bank_account/find");case 3:n=e.sent,(data=n.data)&&data.data?t.bankAccounts=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.bankAccounts=data:t.bankAccounts=[],t.bankAccounts=t.bankAccounts.filter((function(t){return t.isActive})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching bank accounts:",e.t0),t.bankAccounts=[];case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},fetchChartAccounts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/accountChart/find");case 3:n=e.sent,(data=n.data)&&data.data?t.chartAccounts=Array.isArray(data.data)?data.data:[]:Array.isArray(data)?t.chartAccounts=data:t.chartAccounts=[],e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching chart accounts:",e.t0),t.chartAccounts=[];case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},viewAuditTrail:function(t){this.selectedRecordForAudit=t,this.showAuditDialog=!0,console.warn("DATA ".concat(JSON.stringify(this.selectedRecordForAudit)," ")),console.info("DATA ".concat(JSON.stringify(this.showAuditDialog)," "))},closeAuditDialog:function(){var t=this;this.showAuditDialog=!1,setTimeout((function(){t.selectedRecordForAudit=null}),300)},handleVersionComparison:function(t){this.selectedRecordForComparison=this.selectedRecordForAudit,this.comparisonData=t,this.showAuditDialog=!1,this.showComparisonDialog=!0},closeComparisonDialog:function(){var t=this;this.showComparisonDialog=!1,setTimeout((function(){t.selectedRecordForComparison=null,t.comparisonData=null}),300)},handleVersionRestore:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c,d,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(x.i)(e.$swal,"ຢືນຢັນການກັບຄືນ","ທ່ານແນ່ໃຈທີ່ຈະກັບຄືນໄປຫາເວີຊັ່ນນີ້ບໍ່?","question","ຍົກເລີກ","ກັບຄືນ");case 3:if(!n.sent.isConfirmed){n.next=19;break}return c=(null===(r=e.selectedRecordForAudit)||void 0===r?void 0:r.id)||(null===(o=e.selectedRecordForComparison)||void 0===o?void 0:o.id),n.next=8,e.$axios.post("/api/money-advances/".concat(c,"/restore"),{targetVersion:t.version,reason:"Restored via audit trail"});case 8:if(d=n.sent,!(data=d.data).success){n.next=18;break}return e.showToast("ກັບຄືນເວີຊັ່ນສຳເລັດ","success"),e.closeAuditDialog(),e.closeComparisonDialog(),n.next=16,e.fetchData();case 16:n.next=19;break;case 18:throw new Error(data.message||"Restore failed");case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(0),console.error("Error restoring version:",n.t0),e.showToast("ເກີດຂໍ້ຜິດພາດໃນການກັບຄືນ","error");case 25:case"end":return n.stop()}}),n,null,[[0,21]])})))()},handleViewFullChanges:function(t){console.log("View full changes for:",t),this.showToast("ຟັງຊັ່ນນີ້ຈະຖືກພັດທະນາໃນອະນາຄົດ","info")},openAuditReports:function(){this.showAuditReportsDialog=!0},closeAuditReportsDialog:function(){this.showAuditReportsDialog=!1},createSettlement:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{e.selectedAdvanceForSettlement=t,r=(new Date).toISOString().split("T")[0],e.settlementData={id:null,amount:t.amount,currencyId:t.currencyId,userId:t.makerId,ministryId:t.ministryId||"",bankAccountId:t.bankAccountId||"",chartAccountId:"",method:"",settlementDate:r,bookingDate:r,notes:"ຊຳລະຄືນ ຈາກ ລາຍຈ່າຍເລກທີ #".concat(t.id," - ").concat(t.purpose||"ບໍ່ໄດ້ລະບຸເນື້ອໃນ"),moneyAdvanceId:t.id,linkToAdvance:"true"},console.log("🔗 Creating settlement with money advance link:",{advanceId:t.id,linkToAdvance:e.settlementData.linkToAdvance,moneyAdvanceId:e.settlementData.moneyAdvanceId,settlementDate:e.settlementData.settlementDate,bookingDate:e.settlementData.bookingDate}),e.showSettlementDialog=!0}catch(t){console.error("Error preparing settlement:",t),e.showToast("Error preparing settlement","error")}case 1:case"end":return n.stop()}}),n)})))()},closeSettlementDialog:function(){this.showSettlementDialog=!1,this.settlementData=null,this.selectedAdvanceForSettlement=null},saveSettlement:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c,d,l,f,v,m,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c={reason:"Settlement created for Money Advance #".concat(null===(r=e.selectedAdvanceForSettlement)||void 0===r?void 0:r.id),userId:null===(o=e.user)||void 0===o?void 0:o.id},d=y(y({},t),{},{bookingDate:t.bookingDate||t.settlementDate},c),console.log("📤 Sending settlement to API:",d),n.next=6,e.$axios.post("/api/settlements",d);case 6:if(!(l=n.sent).data||!l.data.success){n.next=16;break}return e.showToast("Settlement created successfully","success"),e.closeSettlementDialog(),n.next=12,e.fetchData();case 12:return n.next=14,e.fetchDashboard();case 14:n.next=17;break;case 16:throw new Error((null===(f=l.data)||void 0===f?void 0:f.message)||"Failed to create settlement");case 17:n.next=24;break;case 19:n.prev=19,n.t0=n.catch(0),console.error("Error saving settlement:",n.t0),h=(null===(v=n.t0.response)||void 0===v||null===(m=v.data)||void 0===m?void 0:m.message)||"Error creating settlement",e.showToast(h,"error");case 24:case"end":return n.stop()}}),n,null,[[0,19]])})))()},saveAdvance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c,d,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.saving=!0,n.prev=1,o={reason:t.reason||(e.isEdit?"Updated record":"Created new record"),userId:null===(r=e.user)||void 0===r?void 0:r.id},!e.isEdit){n.next=10;break}return t.updateUserId=e.user.id,n.next=7,e.$axios.put("/api/money-advances/".concat(t.id),y(y({},t),o));case 7:e.showToast("Money advance updated successfully","success"),n.next=13;break;case 10:return n.next=12,e.$axios.post("/api/money-advances",y(y({},t),o));case 12:e.showToast("Money advance created successfully","success");case 13:return e.closeDialog(),n.next=16,e.fetchData();case 16:return n.next=18,e.fetchDashboard();case 18:n.next=25;break;case 20:n.prev=20,n.t0=n.catch(1),l=(null===(c=n.t0.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||"Error saving money advance",e.showToast(l,"error"),console.error("Save error:",n.t0);case 25:return n.prev=25,e.saving=!1,n.finish(25);case 28:case"end":return n.stop()}}),n,null,[[1,20,25,28]])})))()},approveAdvance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(x.i)(e.$swal,"ຢືນຢັນ ການອະນຸມັດ","ທ່ານແນ່ໃຈທີ່ຈະອະນຸມັດລາຍການນີ້ແມ່ນບໍ່ ".concat(e.formatCurrency(t.amount),"?"),"question","ບໍ່","ຕົກລົງ");case 3:if(!n.sent.isConfirmed){n.next=12;break}return n.next=7,e.$axios.put("/api/money-advances/".concat(t.id,"/approve"),{checkerId:e.user.id,reason:"Approved by manager"});case 7:return e.showToast("Money advance approved successfully","success"),n.next=10,e.fetchData();case 10:return n.next=12,e.fetchDashboard();case 12:n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),console.error("Error approving:",n.t0),e.showToast("Error approving money advance","error");case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))()},openDialog:function(){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:null,e.isEdit=!!r,e.showDialog=!0,e.randomKeyMaintenanceDialog="dialog-".concat(Date.now(),"-").concat(Math.floor(1e3*Math.random())),0!==e.users.length&&0!==e.currencies.length&&0!==e.ministries.length){n.next=9;break}return e.formLoading=!0,n.next=8,Promise.all([0===e.users.length?e.fetchUsers():Promise.resolve(),0===e.currencies.length?e.fetchCurrencies():Promise.resolve(),0===e.ministries.length?e.fetchMinistry():Promise.resolve(),0===e.bankAccounts.length?e.fetchBankAccounts():Promise.resolve()]);case 8:e.formLoading=!1;case 9:r?e.form={id:r.id,amount:r.amount,purpose:r.purpose||"",note:r.note||"",makerId:r.makerId,currencyId:r.currencyId,dueDate:r.dueDate?r.dueDate.split("T")[0]:"",bankAccountId:r.bankAccountId||"",ministryId:r.ministryId||"",bookingDate:r.bookingDate||"",exchangeRate:r.exchangeRate||"",reason:""}:(e.resetForm(),e.currencies.length>0&&(o=e.currencies.find((function(t){return"USD"===t.code}))||e.currencies[0],e.form.currencyId=o.id));case 10:case"end":return n.stop()}}),n)})))()},closeDialog:function(){this.showDialog=!1,this.resetForm()},resetForm:function(){var t=(new Date).toISOString().split("T")[0];this.form={id:null,amount:"",purpose:"",note:"",makerId:this.user.id,currencyId:"",dueDate:"",bankAccountId:"",exchangeRate:1,ministryId:"",bookingDate:t,reason:""}},updateSelectedCurrency:function(t){console.log("Currency changed to:",t)},updateSelectedBankAccount:function(t){console.log("Bank account changed to:",t)},updateSelectedMinistry:function(t){console.log("Ministry changed to:",t)},onFilterChange:function(){this.filters.status=this.statusFilter,this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},settleAdvance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!confirm("Mark money advance as settled?")){n.next=14;break}return n.prev=1,n.next=4,e.$axios.put("/api/money-advances/".concat(t.id,"/settle"),{reason:"Marked as settled"});case 4:return e.showToast("Money advance settled successfully","success"),n.next=7,e.fetchData();case 7:return n.next=9,e.fetchDashboard();case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),e.showToast("Error settling money advance","error");case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},deleteAdvance:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!confirm("Delete money advance for ".concat(e.formatCurrency(t.amount),"?"))){n.next=14;break}return n.prev=1,n.next=4,e.$axios.delete("/api/money-advances/".concat(t.id),{data:{reason:"Deleted by user"}});case 4:return e.showToast("Money advance deleted successfully","success"),n.next=7,e.fetchData();case 7:return n.next=9,e.fetchDashboard();case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),e.showToast("Error deleting money advance","error");case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},viewDetails:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.selectedAdvance=t,e.showDetailDialog=!0,n.prev=2,e.detailLoading=!0,n.next=6,e.$axios.get("/api/money-advances/".concat(t.id));case 6:r=n.sent,data=r.data,e.advanceDetails=data.data,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(2),console.error("Error fetching advance details:",n.t0),e.showToast("Error loading advance details","error");case 15:return n.prev=15,e.detailLoading=!1,n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,11,15,18]])})))()},closeDetailDialog:function(){this.showDetailDialog=!1,this.selectedAdvance=null,this.advanceDetails=null},closePrintVoucher:function(){var t=this;this.showPrintVoucher=!1,setTimeout((function(){t.advanceDetails=null}),100)},printAdvanceDetails:function(t){var e=this;this.showPrintVoucher=!1,this.$nextTick((function(){e.advanceDetails=t,e.showPrintVoucher=!0}))},downloadAdvanceDetails:function(){var details=this.formatAdvanceForDownload(),t=new Blob([details],{type:"text/plain"}),e=window.URL.createObjectURL(t),a=document.createElement("a");a.href=e,a.download="money-advance-".concat(this.advanceDetails.id,".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(e)},retryLoadDetails:function(){this.selectedAdvance&&this.viewDetails(this.selectedAdvance)},handleEditFromDetail:function(t){this.closeDetailDialog(),this.openDialog(t)},handleApproveFromDetail:function(t){this.closeDetailDialog(),this.approveAdvance(t)},handleCreateSettlement:function(t){this.closeDetailDialog(),this.createSettlement(t)},formatAdvanceForDownload:function(){var t,e,n,r=this.advanceDetails;return"\nMONEY ADVANCE DETAILS\n=====================\n\nID: ".concat(r.id,"\nMaker: ").concat((null===(t=r.maker)||void 0===t?void 0:t.cus_name)||"N/A","\nMinistry: ").concat((null===(e=r.ministry)||void 0===e?void 0:e.name)||"N/A","\nAmount: ").concat(this.formatCurrency(r.amount)," ").concat((null===(n=r.currency)||void 0===n?void 0:n.code)||"","\nPurpose: ").concat(r.purpose||"N/A","\nStatus: ").concat(r.status.toUpperCase(),"\nDue Date: ").concat(this.formatDate(r.dueDate),"\nCreated Date: ").concat(this.formatDate(r.createdAt),"\nUpdated Date: ").concat(this.formatDate(r.updatedAt),"\n\n").concat(r.bankAccount?"Bank Account: ".concat(r.bankAccount.bankName," - ").concat(r.bankAccount.accountNumber):"No Bank Account","\n\nNotes: ").concat(r.note||"No notes provided","\n\n").concat(r.checker?"Checker: ".concat(r.checker.cus_name):"","\n").concat(r.approvedAt?"Approved At: ".concat(this.formatDate(r.approvedAt)):"","\n").concat(r.settledAt?"Settled At: ".concat(this.formatDate(r.settledAt)):"","\n\nGenerated on: ").concat((new Date).toLocaleString(),"\n      ").trim()},changePage:function(t){t>=1&&t<=this.pagination.totalPages&&(this.pagination.currentPage=t,this.fetchData())},resetFilters:function(){this.filters={status:"",makerId:"",ministryId:""},this.searchTerm="",this.statusFilter="",this.pagination.currentPage=1,this.fetchData(),this.fetchDashboard()},debounceSearch:function(){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.pagination.currentPage=1,t.fetchData()}),500)},formatCurrency:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0)},formatDate:function(t){return t?new Date(t).toLocaleDateString():"N/A"},getStatusClass:function(t){return{pending:"warning",approved:"success",settled:"primary"}[t]||"secondary"},getStatusIcon:function(t){return{pending:"fa-clock",approved:"fa-check-circle",settled:"fa-money-bill-wave"}[t]||"fa-question-circle"},getHistoryIcon:function(t){return{created:"fa-plus",updated:"fa-edit",approved:"fa-check",settled:"fa-money-bill",deleted:"fa-trash"}[t]||"fa-history"},formatDateTime:function(t){return t?new Date(t).toLocaleString():"N/A"},isOverdue:function(t){return!!t&&new Date(t)<new Date},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$toast?this.$toast[e](t):this.$notify?this.$notify({title:"error"===e?"Error":"Success",message:t,type:"error"===e?"error":"success"}):alert("".concat(e.toUpperCase(),": ").concat(t))}}},w=C,k=(n(1401),n(32)),component=Object(k.a)(w,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"money-advance-container"},[e("div",{staticClass:"header-section"},[e("h1",{staticClass:"page-title"},[t._v("ອອກລາຍຈ່າຍ")]),t._v(" "),e("div",{staticClass:"header-actions"},[e("button",{staticClass:"btn btn-outline",on:{click:t.openAuditReports}},[e("i",{staticClass:"fas fa-chart-line"}),t._v(" ລາຍງານປະຫວັດ\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openDialog()}}},[e("i",{staticClass:"fas fa-plus"}),t._v(" ລົງບັນຊີລາຍຈ່າຍ\n      ")])])]),t._v(" "),e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ຈນ ລາຍຈ່າຍ")]),t._v(" "),e("p",{staticClass:"card-value"},[t._v(t._s(t.dashboard.counts.total))])])]),t._v(" "),e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ຄ້າງອະນຸມັດ")]),t._v(" "),e("p",{staticClass:"card-value pending"},[t._v(t._s(t.dashboard.counts.pending))])])]),t._v(" "),e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ອະນຸມັດແລ້ວ")]),t._v(" "),e("p",{staticClass:"card-value approved"},[t._v(t._s(t.dashboard.counts.approved))])])]),t._v(" "),e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ຊຳລະແລ້ວ")]),t._v(" "),e("p",{staticClass:"card-value settled"},[t._v(t._s(t.dashboard.counts.settled))])])]),t._v(" "),e("div",{staticClass:"card summary-card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("ລວມຍອດທັງໝົດ")]),t._v(" "),e("p",{staticClass:"card-value"},[t._v("\n          "+t._s(t.formatCurrency(t.dashboard.amounts.total))+"\n        ")])])])]),t._v(" "),e("div",{staticClass:"filters-section"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.statusFilter,expression:"statusFilter"}],staticClass:"form-control",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.statusFilter=e.target.multiple?n:n[0]},t.onFilterChange]}},[e("option",{attrs:{value:""}},[t._v("ທຸກສະຖານະ")]),t._v(" "),e("option",{attrs:{value:"pending"}},[t._v("ຄ້າງອະນຸມັດ")]),t._v(" "),e("option",{attrs:{value:"approved"}},[t._v("ອະນຸມັດແລ້ວ")]),t._v(" "),e("option",{attrs:{value:"settled"}},[t._v("ຊຳລະແລ້ວ")])])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.makerId,expression:"filters.makerId"}],staticClass:"form-control",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"makerId",e.target.multiple?n:n[0])},t.fetchData]}},[e("option",{attrs:{value:""}},[t._v("ຈາກຜູ້ໃຊ້ງານທັງໝົດ")]),t._v(" "),t._l(t.users,(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v("\n            "+t._s(n.cus_name)+"\n          ")])}))],2)]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.ministryId,expression:"filters.ministryId"}],staticClass:"form-control",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"ministryId",e.target.multiple?n:n[0])},t.fetchData]}},[e("option",{attrs:{value:""}},[t._v("ຈາກກະຊວງທັງໝົດ")]),t._v(" "),t._l(t.ministries,(function(n){return e("option",{key:n.id,domProps:{value:n.id}},[t._v("\n            "+t._s(n.name)+"\n          ")])}))],2)]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ຄົ້ນຫາ ດ້ວຍຈຸດປະສົງ..."},domProps:{value:t.searchTerm},on:{input:[function(e){e.target.composing||(t.searchTerm=e.target.value)},t.debounceSearch]}})]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("button",{staticClass:"btn btn-secondary btn-block",on:{click:t.resetFilters}},[e("i",{staticClass:"fas fa-undo"}),t._v(" ຄ່າເລີ່ມຕົ້ນ\n        ")])])])]),t._v(" "),e("div",{staticClass:"table-container"},[t.loading?e("div",{staticClass:"loading-overlay"},[e("div",{staticClass:"spinner"})]):t._e(),t._v(" "),e("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),e("tbody",t._l(t.advances,(function(n){return e("tr",{key:n.id},[e("td",[t._v(t._s(n.id))]),t._v(" "),e("td",[t._v(t._s(n.maker?n.maker.cus_name:"N/A"))]),t._v(" "),e("td",[n.ministry?e("div",{staticClass:"ministry-info"},[e("div",{staticClass:"ministry-name"},[t._v(t._s(n.ministry.name))]),t._v(" "),n.ministry.ministryCode?e("div",{staticClass:"ministry-code"},[t._v("\n                "+t._s(n.ministry.ministryCode+" "+n.ministry.ministryName)+"\n              ")]):t._e()]):e("span",{staticClass:"no-ministry"},[t._v("ບໍ່ໄດ້ລະບຸກະຊວງ")])]),t._v(" "),e("td",[e("span",{staticClass:"amount"},[t._v("\n              "+t._s(t.formatCurrency(n.amount))+"\n              "),n.currency?e("small",[t._v(t._s(n.currency.code))]):t._e()])]),t._v(" "),e("td",[t._v(t._s(n.purpose||"N/A"))]),t._v(" "),e("td",[n.bankAccount?e("div",{staticClass:"bank-account-info"},[e("div",{staticClass:"bank-name"},[t._v(t._s(n.bankAccount.bankName))]),t._v(" "),e("div",{staticClass:"account-number"},[t._v("\n                "+t._s(n.bankAccount.accountNumber)+"\n              ")])]):e("span",{staticClass:"no-bank-account"},[t._v("No Bank Account")])]),t._v(" "),e("td",[e("span",{class:["status-badge",n.status]},[t._v("\n              "+t._s(t.getStatusInLao(n.status))+"\n            ")])]),t._v(" "),e("td",[t._v(t._s(t.formatDate(n.dueDate)))]),t._v(" "),e("td",[t._v(t._s(t.formatDate(n.bookingDate)))]),t._v(" "),e("td",[e("div",{staticClass:"action-buttons"},[e("button",{staticClass:"btn btn-sm btn-info",attrs:{title:"View Details"},on:{click:function(e){return t.viewDetails(n)}}},[e("i",{staticClass:"fas fa-eye"})]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-warning",attrs:{title:"Edit"},on:{click:function(e){return t.openDialog(n)}}},[e("i",{staticClass:"fas fa-edit"})]),t._v(" "),"pending"===n.status?e("button",{staticClass:"btn btn-sm btn-success",attrs:{title:"Approve"},on:{click:function(e){return t.approveAdvance(n)}}},[e("i",{staticClass:"fas fa-check"})]):t._e(),t._v(" "),"approved"===n.status?e("button",{staticClass:"btn btn-sm btn-success",attrs:{title:"Create Settlement"},on:{click:function(e){return t.createSettlement(n)}}},[e("i",{staticClass:"fas fa-file-invoice-dollar"})]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-sm btn-danger",attrs:{title:"Print"},on:{click:function(e){return t.printAdvanceDetails(n)}}},[e("i",{staticClass:"fas fa-print"})])])])])})),0)]),t._v(" "),t.loading||0!==t.advances.length?t._e():e("div",{staticClass:"no-data"},[e("i",{staticClass:"fas fa-inbox"}),t._v(" "),e("p",[t._v("No money advances found")])])]),t._v(" "),t.pagination.totalPages>1?e("nav",{staticClass:"pagination-nav"},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:1===t.pagination.currentPage}},[e("button",{staticClass:"page-link",on:{click:function(e){return t.changePage(t.pagination.currentPage-1)}}},[t._v("\n          Previous\n        ")])]),t._v(" "),t._l(t.paginationPages,(function(n){return e("li",{key:n,staticClass:"page-item",class:{active:n===t.pagination.currentPage}},[e("button",{staticClass:"page-link",on:{click:function(e){return t.changePage(n)}}},[t._v("\n          "+t._s(n)+"\n        ")])])})),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:t.pagination.currentPage===t.pagination.totalPages}},[e("button",{staticClass:"page-link",on:{click:function(e){return t.changePage(t.pagination.currentPage+1)}}},[t._v("\n          Next\n        ")])])],2)]):t._e(),t._v(" "),e("money-advance-dialog",{key:t.radnomKeyMaintenanceDialog,attrs:{show:t.showDialog,"is-edit":t.isEdit,"form-data":t.form,users:t.users,currencies:t.currencies,"bank-accounts":t.bankAccounts,ministries:t.ministries,"form-loading":t.formLoading,saving:t.saving},on:{close:t.closeDialog,save:t.saveAdvance,"currency-changed":t.updateSelectedCurrency,"bank-account-changed":t.updateSelectedBankAccount,"ministry-changed":t.updateSelectedMinistry,"validation-error":t.showToast}}),t._v(" "),e("money-advance-detail-dialog",{attrs:{show:t.showDetailDialog,details:t.advanceDetails,loading:t.detailLoading,"status-labels":t.statusLabels},on:{close:t.closeDetailDialog,print:t.printAdvanceDetails,download:t.downloadAdvanceDetails,"retry-load":t.retryLoadDetails,edit:t.handleEditFromDetail,approve:t.handleApproveFromDetail,"create-settlement":t.handleCreateSettlement}}),t._v(" "),t.selectedRecordForAudit&&t.selectedRecordForAudit.id?e("audit-trail-dialog",{attrs:{show:t.showAuditDialog,"record-id":t.selectedRecordForAudit.id,"record-data":t.selectedRecordForAudit,"can-restore":t.canRestoreRecord},on:{close:t.closeAuditDialog,compare:t.handleVersionComparison,restore:t.handleVersionRestore,"view-full-changes":t.handleViewFullChanges,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}):t._e(),t._v(" "),t.selectedRecordForComparison&&t.selectedRecordForComparison.id?e("version-comparison-dialog",{attrs:{show:t.showComparisonDialog,"record-id":t.selectedRecordForComparison.id,"record-data":t.selectedRecordForComparison,"initial-comparison":t.comparisonData,"can-restore":t.canRestoreRecord},on:{close:t.closeComparisonDialog,restore:t.handleVersionRestore,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}):t._e(),t._v(" "),e("audit-reports-dialog",{attrs:{show:t.showAuditReportsDialog},on:{close:t.closeAuditReportsDialog,success:t.showToast,error:function(e){return t.showToast(e,"error")}}}),t._v(" "),t.showPrintVoucher&&t.advanceDetails?e("VoucherPrintComponent",{key:t.advanceDetails.id,attrs:{"voucher-data":t.advanceDetails},on:{close:t.closePrintVoucher}}):t._e(),t._v(" "),e("SettlementDialog",{attrs:{visible:t.showSettlementDialog,settlement:t.settlementData,"outstanding-invoices":[],currencies:t.currencies,"bank-accounts":t.bankAccounts,ministries:t.ministries,"chart-accounts":t.chartAccounts,users:t.users},on:{close:t.closeSettlementDialog,save:t.saveSettlement}})],1)}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),t._v(" "),e("th",[t._v("ຜູ້ລົງບັນຊີ")]),t._v(" "),e("th",[t._v("ກະຊວງ")]),t._v(" "),e("th",[t._v("ຈຳນວນເງິນ")]),t._v(" "),e("th",[t._v("ຈຸດປະສົງ")]),t._v(" "),e("th",[t._v("ບັນຊີທະນາຄານ")]),t._v(" "),e("th",[t._v("ສະຖານະ")]),t._v(" "),e("th",[t._v("ວັນຄົບຮອບຄວນຊຳລະ")]),t._v(" "),e("th",[t._v("ວັນທີລົງຊຳລະ")]),t._v(" "),e("th",[t._v("ຟັງຊັ່ນ")])])])}],!1,null,"e13c068e",null);e.default=component.exports},908:function(t,e,n){var content=n(956);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("5422c78c",content,!0,{sourceMap:!1})},909:function(t,e,n){var content=n(958);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("fb73d6dc",content,!0,{sourceMap:!1})},910:function(t,e,n){var content=n(960);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("683701e4",content,!0,{sourceMap:!1})},911:function(t,e,n){var content=n(962);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("3bcd7bf8",content,!0,{sourceMap:!1})},955:function(t,e,n){"use strict";n(908)},956:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,'.modal-overlay[data-v-0bf00b78]{align-items:center;animation:fadeIn-0bf00b78 .3s ease-out;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}@keyframes fadeIn-0bf00b78{0%{opacity:0}to{opacity:1}}.detail-dialog[data-v-0bf00b78]{animation:slideIn-0bf00b78 .3s ease-out;background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:850px;overflow:hidden;width:95%}@keyframes slideIn-0bf00b78{0%{opacity:0;transform:translateY(-50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-title-section[data-v-0bf00b78]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-0bf00b78]{font-size:20px;opacity:.9}.modal-title[data-v-0bf00b78]{font-size:20px;font-weight:600;margin:0}.header-actions[data-v-0bf00b78]{align-items:center;display:flex;gap:8px}.btn-icon[data-v-0bf00b78]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;opacity:.8;padding:8px;transition:all .2s}.btn-icon[data-v-0bf00b78]:hover{background:hsla(0,0%,100%,.1);opacity:1}.close-btn[data-v-0bf00b78]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;opacity:.8;padding:8px;transition:opacity .2s}.close-btn[data-v-0bf00b78]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-0bf00b78]{max-height:70vh;overflow-y:auto;padding:0}.detail-body[data-v-0bf00b78]{background:#f8f9fa}.detail-loading[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #e9ecef;border-radius:8px;color:#666;display:flex;justify-content:center;margin:20px;padding:60px}.spinner-small[data-v-0bf00b78]{animation:spin-0bf00b78 1s linear infinite;border:2px solid #f3f3f3;border-radius:50%;border-top-color:#3498db;height:20px;margin-right:10px;width:20px}@keyframes spin-0bf00b78{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.detail-content[data-v-0bf00b78]{display:flex;flex-direction:column;gap:20px;padding:24px}.detail-status[data-v-0bf00b78]{background:#fff;border:2px solid #e9ecef;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:0;padding:20px;text-align:center}.status-badge[data-v-0bf00b78]{align-items:center;border:2px solid transparent;border-radius:25px;display:inline-flex;font-size:16px;font-weight:600;gap:8px;letter-spacing:.5px;padding:12px 24px;text-transform:uppercase}.status-badge.status-pending[data-v-0bf00b78]{background:linear-gradient(135deg,#f39c12,#e67e22);border-color:#d68910;color:#fff}.status-badge.status-approved[data-v-0bf00b78]{background:linear-gradient(135deg,#27ae60,#229954);border-color:#1e8449;color:#fff}.status-badge.status-settled[data-v-0bf00b78]{background:linear-gradient(135deg,#3498db,#2980b9);border-color:#2471a3;color:#fff}.status-badge.status-rejected[data-v-0bf00b78]{background:linear-gradient(135deg,#e74c3c,#c0392b);border-color:#a93226;color:#fff}.status-badge.status-cancelled[data-v-0bf00b78]{background:linear-gradient(135deg,#95a5a6,#7f8c8d);border-color:#6c7b7d;color:#fff}.detail-section[data-v-0bf00b78]{background:#fff;border:2px solid #e9ecef;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:20px;padding:24px;transition:all .2s ease}.detail-section[data-v-0bf00b78]:hover{border-color:#dee2e6;box-shadow:0 4px 12px rgba(0,0,0,.12)}.detail-section[data-v-0bf00b78]:last-child{margin-bottom:0}.section-title[data-v-0bf00b78]{align-items:center;border-bottom:3px solid #ecf0f1;color:#2c3e50;display:flex;font-size:18px;font-weight:700;gap:12px;margin-bottom:20px;padding-bottom:12px}.section-title i[data-v-0bf00b78]{color:#3498db;font-size:16px}.detail-grid[data-v-0bf00b78]{grid-gap:24px;display:grid;gap:24px;grid-template-columns:1fr 1fr}.detail-item[data-v-0bf00b78]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;display:flex;flex-direction:column;gap:8px;padding:16px;transition:all .2s ease}.detail-item[data-v-0bf00b78]:hover{background:#e8f4fd;border-color:#3498db}.detail-item.full-width[data-v-0bf00b78]{grid-column:1/-1}.detail-item label[data-v-0bf00b78]{color:#6c757d;font-size:12px;font-weight:700;letter-spacing:.8px;margin-bottom:4px;text-transform:uppercase}.detail-value[data-v-0bf00b78]{color:#2c3e50;font-size:16px;font-weight:600;word-break:break-word}.amount-display[data-v-0bf00b78]{background:linear-gradient(135deg,#d5f4e6,#fafafa);border:2px solid #a9dfbf;border-radius:8px;color:#27ae60;font-size:28px;font-weight:800;padding:8px;text-align:center}.amount-display small[data-v-0bf00b78]{color:#6c757d;font-size:16px;font-weight:500;margin-left:8px}.exchange-rate-display[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#f4ecf7,#fafafa);border:2px solid #d7bde2;border-radius:8px;color:#8e44ad;display:flex;font-size:18px;font-weight:700;gap:8px;justify-content:center;padding:12px;text-align:center}.exchange-rate-display i[data-v-0bf00b78]{color:#9b59b6;font-size:16px}.user-info[data-v-0bf00b78]{align-items:center;background:#e8f4fd;border:1px solid #85c1e9;border-radius:6px;display:flex;gap:10px;padding:8px 12px}.user-info i[data-v-0bf00b78]{color:#3498db;font-size:14px}.timeline[data-v-0bf00b78]{background:#fafafa;border:2px solid #e9ecef;border-radius:8px;padding:20px;position:relative}.timeline[data-v-0bf00b78]:before{background:linear-gradient(180deg,#3498db,#ecf0f1);border-radius:2px;bottom:20px;content:"";left:35px;position:absolute;top:20px;width:3px}.timeline-item[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #ecf0f1;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);display:flex;margin-bottom:24px;margin-left:20px;padding:16px;position:relative}.timeline-item[data-v-0bf00b78]:last-child{margin-bottom:0}.timeline-icon[data-v-0bf00b78]{align-items:center;border:3px solid #fff;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,.2);color:#fff;display:flex;font-size:16px;height:40px;justify-content:center;left:-36px;margin-right:20px;position:absolute;width:40px;z-index:1}.timeline-icon.created[data-v-0bf00b78]{background:linear-gradient(135deg,#3498db,#2980b9)}.timeline-icon.approved[data-v-0bf00b78]{background:linear-gradient(135deg,#27ae60,#229954)}.timeline-icon.due[data-v-0bf00b78]{background:linear-gradient(135deg,#f39c12,#e67e22)}.timeline-icon.due.overdue[data-v-0bf00b78]{animation:pulse-0bf00b78 2s infinite;background:linear-gradient(135deg,#e74c3c,#c0392b)}.timeline-icon.settled[data-v-0bf00b78]{background:linear-gradient(135deg,#9b59b6,#8e44ad)}@keyframes pulse-0bf00b78{0%{box-shadow:0 0 0 0 rgba(231,76,60,.7),0 2px 8px rgba(0,0,0,.2)}70%{box-shadow:0 0 0 12px rgba(231,76,60,0),0 2px 8px rgba(0,0,0,.2)}to{box-shadow:0 0 0 0 rgba(231,76,60,0),0 2px 8px rgba(0,0,0,.2)}}.timeline-content[data-v-0bf00b78]{flex:1;margin-left:20px}.timeline-content label[data-v-0bf00b78]{color:#6c757d;display:block;font-size:12px;font-weight:700;letter-spacing:.5px;margin-bottom:4px;text-transform:uppercase}.timeline-date[data-v-0bf00b78]{color:#2c3e50;font-size:15px;font-weight:600}.timeline-date.overdue[data-v-0bf00b78]{color:#e74c3c;font-weight:700}.overdue-badge[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#e74c3c,#c0392b);border:1px solid #a93226;border-radius:12px;color:#fff;display:inline-flex;font-size:11px;font-weight:600;gap:4px;margin-left:8px;padding:4px 8px}.notes-content[data-v-0bf00b78]{background:#fff9e6;border:2px solid #f7dc6f;border-left:6px solid #f1c40f;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);color:#2c3e50;font-size:15px;font-style:italic;line-height:1.8;padding:20px}.history-list[data-v-0bf00b78]{display:flex;flex-direction:column;gap:12px}.history-item[data-v-0bf00b78]{align-items:center;background:#fff;border:2px solid #ecf0f1;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.05);display:flex;gap:16px;padding:16px;transition:all .2s ease}.history-item[data-v-0bf00b78]:hover{background:#f8fcff;border-color:#3498db}.history-icon[data-v-0bf00b78]{align-items:center;background:linear-gradient(135deg,#3498db,#2980b9);border:2px solid #85c1e9;border-radius:50%;color:#fff;display:flex;flex-shrink:0;font-size:12px;height:32px;justify-content:center;width:32px}.history-content[data-v-0bf00b78]{display:flex;flex:1;flex-direction:column;gap:4px}.history-action[data-v-0bf00b78]{color:#2c3e50;font-size:15px;font-weight:700;text-transform:capitalize}.history-user[data-v-0bf00b78]{color:#6c757d;font-size:13px;font-weight:500}.history-date[data-v-0bf00b78]{color:#95a5a6;font-size:12px;font-weight:400}.detail-error[data-v-0bf00b78]{background:#fff;border:2px solid #fadbd8;border-radius:12px;color:#e74c3c;margin:20px;padding:60px 20px;text-align:center}.detail-error i[data-v-0bf00b78]{font-size:48px;margin-bottom:15px;opacity:.7}.detail-footer[data-v-0bf00b78]{align-items:center;background:#f8f9fa;border-top:2px solid #e9ecef;display:flex;justify-content:space-between;padding:16px 24px}.close-detail-btn[data-v-0bf00b78]{align-items:center;background:#6c757d;border:none;border-radius:6px;color:#fff;cursor:pointer;display:flex;font-weight:500;gap:6px;padding:8px 16px;transition:all .2s ease}.close-detail-btn[data-v-0bf00b78]:hover{background:#5a6268;transform:translateY(-1px)}.detail-actions[data-v-0bf00b78]{align-items:center;display:flex;gap:8px}.detail-actions .action-btn[data-v-0bf00b78]{align-items:center;border:none;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);cursor:pointer;display:flex;font-size:14px;height:36px;justify-content:center;padding:0;position:relative;transition:all .2s ease;width:36px}.detail-actions .action-btn[data-v-0bf00b78]:hover{box-shadow:0 4px 8px rgba(0,0,0,.15);transform:translateY(-2px)}.detail-actions .action-btn[data-v-0bf00b78]:active{box-shadow:0 1px 2px rgba(0,0,0,.1);transform:translateY(0)}.detail-actions .btn-warning[data-v-0bf00b78]{background:#ffc107;color:#212529}.detail-actions .btn-warning[data-v-0bf00b78]:hover{background:#e0a800}.detail-actions .btn-success[data-v-0bf00b78]{background:#28a745;color:#fff}.detail-actions .btn-success[data-v-0bf00b78]:hover{background:#218838}.detail-actions .btn-primary[data-v-0bf00b78]{background:#007bff;color:#fff}.detail-actions .btn-primary[data-v-0bf00b78]:hover{background:#0056b3}.btn[data-v-0bf00b78]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:6px;padding:8px 16px;transition:all .2s ease}.btn-primary[data-v-0bf00b78]{background:#007bff;color:#fff}.btn-primary[data-v-0bf00b78]:hover{background:#0056b3}.btn-secondary[data-v-0bf00b78]{background:#6c757d;color:#fff}.btn-secondary[data-v-0bf00b78]:hover{background:#5a6268}.btn-sm[data-v-0bf00b78]{font-size:12px;padding:4px 8px}.detail-actions .action-btn[data-v-0bf00b78]:before{background:rgba(0,0,0,.8);border-radius:4px;bottom:-32px;color:#fff;content:attr(title);font-size:11px;left:50%;opacity:0;padding:4px 8px;pointer-events:none;position:absolute;transform:translateX(-50%);transition:opacity .2s ease;white-space:nowrap;z-index:10}.detail-actions .action-btn[data-v-0bf00b78]:hover:before{opacity:1}@media (max-width:768px){.detail-dialog[data-v-0bf00b78]{margin:10px;width:98%}.detail-grid[data-v-0bf00b78]{gap:16px;grid-template-columns:1fr}.detail-footer[data-v-0bf00b78]{align-items:center;flex-direction:row;justify-content:space-between;padding:12px 16px}.close-detail-btn[data-v-0bf00b78]{font-size:14px;padding:6px 12px}.detail-actions[data-v-0bf00b78]{gap:6px}.detail-actions .action-btn[data-v-0bf00b78]{font-size:12px;height:32px;width:32px}.detail-actions .action-btn[data-v-0bf00b78]:before{bottom:-28px;font-size:10px}.timeline[data-v-0bf00b78]{padding:16px}.timeline[data-v-0bf00b78]:before{left:25px}.timeline-item[data-v-0bf00b78]{margin-left:10px;padding:12px}.timeline-icon[data-v-0bf00b78]{font-size:12px;height:32px;left:-26px;width:32px}.amount-display[data-v-0bf00b78]{font-size:24px}.exchange-rate-display[data-v-0bf00b78]{font-size:16px}.detail-content[data-v-0bf00b78],.detail-section[data-v-0bf00b78],.modal-header[data-v-0bf00b78]{padding:16px}.section-title[data-v-0bf00b78]{font-size:16px}}@media (max-width:480px){.detail-content[data-v-0bf00b78],.detail-section[data-v-0bf00b78]{padding:12px}.section-title[data-v-0bf00b78]{font-size:14px}.amount-display[data-v-0bf00b78]{font-size:20px}.exchange-rate-display[data-v-0bf00b78]{font-size:14px}.timeline-content[data-v-0bf00b78]{margin-left:10px}}@media print{.modal-overlay[data-v-0bf00b78]{-webkit-backdrop-filter:none!important;backdrop-filter:none!important;background:none!important;position:static!important}.detail-dialog[data-v-0bf00b78]{box-shadow:none!important;margin:0!important;max-width:none!important;width:100%!important}.modal-footer[data-v-0bf00b78],.modal-header[data-v-0bf00b78]{display:none!important}.detail-body[data-v-0bf00b78]{background:#fff!important;max-height:none!important}.btn[data-v-0bf00b78],.header-actions[data-v-0bf00b78]{display:none!important}.detail-section[data-v-0bf00b78]{-moz-column-break-inside:avoid;border:2px solid #333!important;break-inside:avoid;margin-bottom:20px!important;page-break-inside:avoid}.section-title[data-v-0bf00b78]{border-bottom:2px solid #333!important}}',""]),r.locals={},t.exports=r},957:function(t,e,n){"use strict";n(909)},958:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,'.modal-overlay[data-v-33ecff44]{align-items:center;background:rgba(0,0,0,.5);display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:1000}.modal-content[data-v-33ecff44]{background:#fff;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.3);max-height:90vh;max-width:800px;overflow-y:auto;width:90%}.modal-header[data-v-33ecff44]{align-items:center;border-bottom:1px solid #eee;display:flex;justify-content:space-between;padding:20px}.modal-header h3[data-v-33ecff44]{color:#333;margin:0}.close-btn[data-v-33ecff44]{background:none;border:none;color:#666;cursor:pointer;font-size:18px}.close-btn[data-v-33ecff44]:hover{color:#333}.modal-body[data-v-33ecff44]{padding:20px}.modal-footer[data-v-33ecff44]{border-top:1px solid #eee;display:flex;gap:10px;justify-content:flex-end;padding:20px}.btn[data-v-33ecff44]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:8px;padding:10px 20px;transition:all .2s}.btn-primary[data-v-33ecff44]{background:#007bff;color:#fff}.btn-primary[data-v-33ecff44]:hover{background:#0056b3}.btn-secondary[data-v-33ecff44]{background:#6c757d;color:#fff}.btn-secondary[data-v-33ecff44]:hover{background:#545b62}.voucher-container[data-v-33ecff44]{background:#fff;border:2px solid #333;font-family:"Phetsarath OT","Noto Sans Lao",Arial,sans-serif;font-size:14px;line-height:1.4;margin:0 auto;max-width:700px;padding:20px;width:100%}.voucher-header[data-v-33ecff44]{align-items:flex-start;border-bottom:1px solid #ccc;display:flex;justify-content:space-between;margin-bottom:20px;padding-bottom:10px}.company-info[data-v-33ecff44]{flex:1;text-align:center}.company-name[data-v-33ecff44]{font-size:16px;font-weight:700;margin-bottom:5px}.department[data-v-33ecff44]{font-size:14px;margin-bottom:3px}.sub-department[data-v-33ecff44]{font-size:12px;margin-bottom:10px}.amount-line[data-v-33ecff44]{font-size:12px;letter-spacing:2px}.voucher-number[data-v-33ecff44]{flex:0 0 auto;margin-left:20px}.number-box[data-v-33ecff44]{background:#f9f9f9;border:2px solid #333;padding:8px 12px;text-align:center}.number-label[data-v-33ecff44]{font-weight:700;margin-right:10px}.number-value[data-v-33ecff44]{color:#d32f2f;font-weight:700}.voucher-title[data-v-33ecff44]{font-size:18px;font-weight:700;margin:20px 0;text-align:center;-webkit-text-decoration:underline;text-decoration:underline}.voucher-details[data-v-33ecff44]{margin-bottom:30px}.detail-row[data-v-33ecff44]{align-items:center;display:flex;margin-bottom:12px;min-height:24px}.detail-row.description[data-v-33ecff44]{align-items:flex-start;flex-direction:column}.label[data-v-33ecff44]{font-weight:500;margin-right:10px;white-space:nowrap}.value[data-v-33ecff44]{border-bottom:1px solid #333;margin-right:20px;min-width:40px;padding:2px 5px;text-align:center}.dotted-line[data-v-33ecff44]{border-bottom:1px dotted #333;flex:1;margin:0 10px;min-height:20px;padding:2px 5px}.currency-options[data-v-33ecff44]{display:flex;gap:20px;margin-left:10px}.currency-options label[data-v-33ecff44]{align-items:center;display:flex;font-weight:400;gap:5px}.amount-number[data-v-33ecff44]{border-bottom:1px solid #333;flex:1;font-weight:700;margin:0 10px;padding:2px 10px;text-align:right}.amount-display[data-v-33ecff44]{color:#d32f2f;font-size:16px;font-weight:700;margin:0 10px}.description-content[data-v-33ecff44]{background:#fafafa;border:1px solid #333;margin-top:5px;min-height:60px;padding:10px;width:100%}.amount-words[data-v-33ecff44]{border-bottom:1px solid #333;flex:1;font-style:italic;margin-left:10px;padding:2px 10px}.signature-section[data-v-33ecff44]{display:flex;gap:10px;justify-content:space-between;margin-top:40px}.signature-box[data-v-33ecff44]{flex:1;text-align:center}.signature-title[data-v-33ecff44]{font-size:12px;font-weight:500;margin-bottom:30px}.signature-line[data-v-33ecff44]{border-bottom:1px solid #333;height:1px;margin-top:20px}.signature-name[data-v-33ecff44]{color:#666;font-size:10px;font-weight:400;margin-top:5px}@media print{body *[data-v-33ecff44]{visibility:hidden}.print-only[data-v-33ecff44],.print-only *[data-v-33ecff44]{visibility:visible}.print-only[data-v-33ecff44]{left:0;position:absolute;top:0;width:100%}.voucher-container.print-version[data-v-33ecff44]{border:2px solid #000!important;font-size:12px!important;margin:0!important;max-width:none!important;padding:15px!important;width:100%!important}.voucher-title[data-v-33ecff44]{font-size:16px!important}.amount-display[data-v-33ecff44],.company-name[data-v-33ecff44]{font-size:14px!important}.signature-title[data-v-33ecff44]{font-size:10px!important}.department[data-v-33ecff44]{font-size:12px!important}.amount-line[data-v-33ecff44],.sub-department[data-v-33ecff44]{font-size:10px!important}.signature-name[data-v-33ecff44]{font-size:9px!important}}.print-only[data-v-33ecff44]{left:-9999px;position:absolute;top:-9999px}@media print{.print-only[data-v-33ecff44]{left:auto;position:static;top:auto}}',""]),r.locals={},t.exports=r},959:function(t,e,n){"use strict";n(910)},960:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,'.audit-dialog[data-v-5c476a8a]{max-height:90vh;max-width:900px;width:95%}.audit-header[data-v-5c476a8a]{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff}.audit-content[data-v-5c476a8a]{max-height:70vh;overflow-y:auto}.error-container[data-v-5c476a8a],.loading-container[data-v-5c476a8a],.no-data-container[data-v-5c476a8a]{color:#666;padding:40px 20px;text-align:center}.spinner[data-v-5c476a8a]{animation:spin-5c476a8a 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#4f46e5;height:40px;margin:0 auto 20px;width:40px}@keyframes spin-5c476a8a{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-icon[data-v-5c476a8a],.no-data-icon[data-v-5c476a8a]{font-size:48px;margin-bottom:15px;opacity:.5}.audit-summary[data-v-5c476a8a]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:24px}.summary-card[data-v-5c476a8a]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;gap:12px;padding:16px}.summary-card[data-v-5c476a8a],.summary-icon[data-v-5c476a8a]{align-items:center;display:flex}.summary-icon[data-v-5c476a8a]{background:#4f46e5;border-radius:50%;color:#fff;font-size:18px;height:40px;justify-content:center;width:40px}.summary-info[data-v-5c476a8a]{flex:1}.summary-label[data-v-5c476a8a]{color:#64748b;font-size:12px;margin-bottom:4px}.summary-value[data-v-5c476a8a]{color:#1e293b;font-size:16px;font-weight:600}.audit-controls[data-v-5c476a8a]{margin-bottom:24px}.filter-controls[data-v-5c476a8a]{align-items:center;display:flex;gap:12px}.filter-select[data-v-5c476a8a]{border:1px solid #d1d5db;border-radius:6px;font-size:14px;max-width:200px;padding:8px 12px}.audit-timeline[data-v-5c476a8a]{position:relative}.audit-timeline[data-v-5c476a8a]:before{background:#e2e8f0;bottom:0;content:"";left:20px;position:absolute;top:0;width:2px}.timeline-item[data-v-5c476a8a]{margin-bottom:24px;margin-left:40px;position:relative}.timeline-item.expandable .timeline-header[data-v-5c476a8a]{cursor:pointer}.timeline-item.expandable .timeline-header[data-v-5c476a8a]:hover{background:#f8fafc}.timeline-marker[data-v-5c476a8a]{align-items:center;background:#fff;border:2px solid #e2e8f0;border-radius:50%;display:flex;font-size:16px;height:40px;justify-content:center;left:-60px;position:absolute;top:8px;width:40px}.timeline-content[data-v-5c476a8a]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.timeline-header[data-v-5c476a8a]{align-items:center;border-radius:8px;display:flex;justify-content:space-between;padding:16px;transition:background-color .2s}.timeline-main-info[data-v-5c476a8a]{flex:1}.timeline-action[data-v-5c476a8a]{align-items:center;display:flex;gap:12px;margin-bottom:4px}.action-badge[data-v-5c476a8a]{border-radius:12px;font-size:12px;font-weight:600;padding:4px 8px;text-transform:uppercase}.action-badge.create[data-v-5c476a8a]{background:#dcfce7;color:#166534}.action-badge.update[data-v-5c476a8a]{background:#fef3c7;color:#92400e}.action-badge.approve[data-v-5c476a8a]{background:#dcfce7;color:#166534}.action-badge.settle[data-v-5c476a8a]{background:#dbeafe;color:#1e40af}.action-badge.delete[data-v-5c476a8a]{background:#fee2e2;color:#dc2626}.timeline-time[data-v-5c476a8a]{color:#64748b;font-size:12px}.timeline-user[data-v-5c476a8a]{align-items:center;color:#475569;display:flex;font-size:14px;gap:6px}.timeline-toggle[data-v-5c476a8a]{align-items:center;color:#64748b;display:flex;gap:8px}.changes-count[data-v-5c476a8a],.toggle-icon[data-v-5c476a8a]{font-size:12px}.toggle-icon[data-v-5c476a8a]{transition:transform .2s}.timeline-reason[data-v-5c476a8a]{align-items:center;background:#f1f5f9;border-top:1px solid #e2e8f0;color:#475569;display:flex;font-size:14px;font-style:italic;gap:8px;padding:8px 16px}.timeline-details[data-v-5c476a8a]{background:#fafbfc;border-top:1px solid #e2e8f0;padding:16px}.changes-list h6[data-v-5c476a8a]{color:#374151;font-size:14px;margin:0 0 12px}.change-item[data-v-5c476a8a]{background:#fff;border:1px solid #e2e8f0;border-radius:6px;margin-bottom:12px;padding:12px}.change-field[data-v-5c476a8a]{align-items:center;color:#374151;display:flex;font-size:14px;font-weight:600;gap:8px;margin-bottom:8px}.change-values[data-v-5c476a8a]{grid-gap:12px;align-items:center;display:grid;gap:12px;grid-template-columns:1fr auto 1fr}.new-value[data-v-5c476a8a],.old-value[data-v-5c476a8a]{display:flex;flex-direction:column;gap:4px}.value-label[data-v-5c476a8a]{color:#64748b;font-size:12px;font-weight:500}.value[data-v-5c476a8a]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:4px;color:#1e293b;font-size:14px;padding:6px 8px}.old-value .value[data-v-5c476a8a]{background:#fef2f2;border-color:#fecaca;color:#991b1b}.new-value .value[data-v-5c476a8a]{background:#f0fdf4;border-color:#bbf7d0;color:#166534}.arrow[data-v-5c476a8a]{color:#64748b;font-size:14px}.view-full-details[data-v-5c476a8a]{margin-top:12px;text-align:center}.load-more-container[data-v-5c476a8a]{border-top:1px solid #e2e8f0;margin-top:24px;padding-top:24px;text-align:center}.btn[data-v-5c476a8a]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:8px 16px;transition:all .2s}.btn[data-v-5c476a8a]:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-1px)}.btn-primary[data-v-5c476a8a]{background:#4f46e5;color:#fff}.btn-secondary[data-v-5c476a8a]{background:#6b7280;color:#fff}.btn-info[data-v-5c476a8a]{background:#0ea5e9;color:#fff}.btn-link[data-v-5c476a8a]{background:none;border:1px solid transparent;color:#4f46e5;-webkit-text-decoration:none;text-decoration:none}.btn-link[data-v-5c476a8a]:hover{background:#f0f9ff;border-color:#bae6fd}.btn-sm[data-v-5c476a8a]{font-size:12px;padding:6px 12px}.btn[data-v-5c476a8a]:disabled{box-shadow:none!important;cursor:not-allowed;opacity:.6;transform:none!important}.audit-footer[data-v-5c476a8a]{background:#f8fafc;border-top:1px solid #e2e8f0;display:flex;gap:12px;justify-content:flex-end}@media (max-width:768px){.audit-dialog[data-v-5c476a8a]{margin:10px;width:98%}.audit-summary[data-v-5c476a8a]{grid-template-columns:1fr}.filter-controls[data-v-5c476a8a]{align-items:stretch;flex-direction:column}.filter-select[data-v-5c476a8a]{max-width:none}.timeline-item[data-v-5c476a8a]{margin-left:20px}.timeline-marker[data-v-5c476a8a]{font-size:14px;height:30px;left:-40px;width:30px}.change-values[data-v-5c476a8a]{gap:8px;grid-template-columns:1fr}.arrow[data-v-5c476a8a]{text-align:center;transform:rotate(90deg)}.audit-footer[data-v-5c476a8a]{flex-direction:column-reverse}.audit-footer .btn[data-v-5c476a8a]{justify-content:center;width:100%}}',""]),r.locals={},t.exports=r},961:function(t,e,n){"use strict";n(911)},962:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,'.modal-overlay[data-v-e6a23e30]{align-items:center;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.comparison-dialog[data-v-e6a23e30]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:1000px;overflow:hidden;width:95%}.modal-header[data-v-e6a23e30]{align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);border-bottom:1px solid #e9ecef;color:#fff;display:flex;justify-content:space-between;padding:24px}.modal-title-section[data-v-e6a23e30]{align-items:center;display:flex;gap:12px}.modal-icon[data-v-e6a23e30]{font-size:20px}.modal-title[data-v-e6a23e30]{font-size:18px;font-weight:600;margin:0}.close-btn[data-v-e6a23e30]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:18px;opacity:.8;padding:8px;transition:opacity .2s}.close-btn[data-v-e6a23e30]:hover{background:hsla(0,0%,100%,.1);opacity:1}.modal-body[data-v-e6a23e30]{max-height:70vh;overflow-y:auto;padding:0}.error-state[data-v-e6a23e30],.loading-state[data-v-e6a23e30],.no-differences[data-v-e6a23e30],.select-versions-prompt[data-v-e6a23e30]{align-items:center;display:flex;flex-direction:column;justify-content:center;padding:60px 20px;text-align:center}.spinner[data-v-e6a23e30]{animation:spin-e6a23e30 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#667eea;height:40px;margin-bottom:20px;width:40px}@keyframes spin-e6a23e30{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-icon[data-v-e6a23e30],.no-diff-icon[data-v-e6a23e30],.prompt-icon[data-v-e6a23e30]{font-size:48px;margin-bottom:20px;opacity:.6}.error-icon[data-v-e6a23e30]{color:#e74c3c}.prompt-icon[data-v-e6a23e30]{color:#3498db}.no-diff-icon[data-v-e6a23e30]{color:#27ae60}.version-selector[data-v-e6a23e30]{grid-gap:20px;align-items:end;background:#f8f9fa;border-bottom:1px solid #e9ecef;display:grid;gap:20px;grid-template-columns:1fr auto 1fr;padding:24px}.selector-group[data-v-e6a23e30]{display:flex;flex-direction:column;gap:8px}.selector-group label[data-v-e6a23e30]{color:#2c3e50;font-size:14px;font-weight:600}.form-control[data-v-e6a23e30]{background:#fff;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;padding:12px 16px;transition:border-color .2s ease}.form-control[data-v-e6a23e30]:focus{border-color:#667eea;outline:none}.comparison-arrow[data-v-e6a23e30]{align-items:center;background:#667eea;border-radius:50%;color:#fff;display:flex;font-size:16px;height:40px;justify-content:center;margin-top:24px;width:40px}.comparison-results[data-v-e6a23e30]{padding:24px}.comparison-summary[data-v-e6a23e30]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));margin-bottom:24px}.summary-card[data-v-e6a23e30]{background:#fff;border:1px solid #e9ecef;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.05);gap:12px;padding:16px}.summary-card[data-v-e6a23e30],.summary-icon[data-v-e6a23e30]{align-items:center;display:flex}.summary-icon[data-v-e6a23e30]{background:#667eea;border-radius:50%;color:#fff;font-size:16px;height:40px;justify-content:center;width:40px}.summary-number[data-v-e6a23e30]{color:#2c3e50;font-size:20px;font-weight:700}.summary-text[data-v-e6a23e30]{color:#2c3e50;font-size:12px;font-weight:600;word-break:break-word}.summary-label[data-v-e6a23e30]{color:#7f8c8d;font-size:11px;margin-top:4px}.differences-table h6[data-v-e6a23e30]{align-items:center;color:#2c3e50;display:flex;font-size:16px;font-weight:600;gap:8px;margin-bottom:16px}.table-container[data-v-e6a23e30]{border:1px solid #e9ecef;border-radius:8px;overflow:hidden}.comparison-table[data-v-e6a23e30]{background:#fff;border-collapse:collapse;width:100%}.comparison-table th[data-v-e6a23e30]{background:#f8f9fa;border-bottom:2px solid #e9ecef;font-size:13px;font-weight:600;padding:16px 12px;text-align:left}.field-header[data-v-e6a23e30]{color:#495057;width:200px}.version-header[data-v-e6a23e30]{position:relative}.version-header.version1[data-v-e6a23e30]{background:linear-gradient(135deg,#ffe6e6,#fcc)}.version-header.version2[data-v-e6a23e30]{background:linear-gradient(135deg,#e6ffe6,#cfc)}.version-info[data-v-e6a23e30]{text-align:center}.version-label[data-v-e6a23e30]{color:#2c3e50;font-weight:700}.version-date[data-v-e6a23e30]{color:#7f8c8d;font-size:11px;margin-top:2px}.comparison-table td[data-v-e6a23e30]{border-bottom:1px solid #f1f3f4;padding:16px 12px;vertical-align:top}.diff-row[data-v-e6a23e30]:hover{background:#f8f9fa}.field-cell[data-v-e6a23e30]{background:#fafbfc;border-right:1px solid #e9ecef}.field-info[data-v-e6a23e30]{align-items:center;display:flex;gap:8px}.field-info i[data-v-e6a23e30]{color:#6c757d;text-align:center;width:16px}.field-name[data-v-e6a23e30]{color:#495057;font-size:13px;font-weight:600}.value-cell[data-v-e6a23e30]{position:relative}.value-cell.version1[data-v-e6a23e30]{background:#fff8f8}.value-cell.version2[data-v-e6a23e30]{background:#f8fff8}.value-content[data-v-e6a23e30]{align-items:center;display:flex;justify-content:space-between;min-height:24px;position:relative}.value-text[data-v-e6a23e30]{background:hsla(0,0%,100%,.8);border:1px solid transparent;border-radius:4px;flex:1;font-family:"Monaco","Menlo","Ubuntu Mono",monospace;font-size:12px;padding:6px 10px}.old-value .value-text[data-v-e6a23e30]{background:#fef2f2;border-color:#fecaca;color:#dc2626}.new-value .value-text[data-v-e6a23e30]{background:#f0fdf4;border-color:#bbf7d0;color:#059669}.change-indicator[data-v-e6a23e30]{color:#3b82f6;font-size:12px;margin-left:8px;opacity:.7}.comparison-actions[data-v-e6a23e30]{gap:12px;justify-content:center;margin-top:24px;padding-top:24px}.comparison-actions[data-v-e6a23e30],.modal-footer[data-v-e6a23e30]{border-top:1px solid #e9ecef;display:flex}.modal-footer[data-v-e6a23e30]{align-items:center;background:#f8f9fa;justify-content:space-between;padding:20px 24px}.btn[data-v-e6a23e30]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn[data-v-e6a23e30]:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-1px)}.btn[data-v-e6a23e30]:disabled{cursor:not-allowed;opacity:.6;transform:none!important}.btn-primary[data-v-e6a23e30]{background:#667eea;color:#fff}.btn-secondary[data-v-e6a23e30]{background:#6c757d;color:#fff}.btn-warning[data-v-e6a23e30]{background:#f39c12;color:#fff}.btn-outline[data-v-e6a23e30]{background:#fff;border:2px solid #667eea;color:#667eea}.btn-outline[data-v-e6a23e30]:hover:not(:disabled){background:#667eea;color:#fff}.btn-sm[data-v-e6a23e30]{font-size:12px;padding:8px 16px}@media (max-width:768px){.comparison-dialog[data-v-e6a23e30]{margin:10px;width:98%}.version-selector[data-v-e6a23e30]{gap:16px;grid-template-columns:1fr}.comparison-arrow[data-v-e6a23e30]{margin:0 auto;transform:rotate(90deg)}.comparison-summary[data-v-e6a23e30]{grid-template-columns:1fr}.comparison-table[data-v-e6a23e30]{font-size:12px}.comparison-table td[data-v-e6a23e30],.comparison-table th[data-v-e6a23e30]{padding:12px 8px}.field-header[data-v-e6a23e30]{width:auto}.modal-footer[data-v-e6a23e30]{gap:12px}.comparison-actions[data-v-e6a23e30],.modal-footer[data-v-e6a23e30]{flex-direction:column}}',""]),r.locals={},t.exports=r}}]);