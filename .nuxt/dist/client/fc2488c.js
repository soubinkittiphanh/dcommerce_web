(window.webpackJsonp=window.webpackJsonp||[]).push([[141,45],{1240:function(t,e,o){var content=o(1521);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("41e8b464",content,!0,{sourceMap:!1})},1295:function(t,e,o){"use strict";o.r(e);o(35),o(7),o(67),o(5);var n={name:"InvoiceHeaderView",props:{visible:{type:Boolean,default:!1},invoice:{type:Object,default:null}},methods:{closeDialog:function(){this.$emit("close")},printInvoice:function(){window.print()},calculateLinesTotal:function(){return this.invoice.invoiceLines?this.invoice.invoiceLines.reduce((function(t,line){return t+parseFloat(line.lineTotal||0)}),0):0},calculatePaymentsTotal:function(){return this.invoice.receiveHeaders?this.invoice.receiveHeaders.reduce((function(t,e){return t+parseFloat(e.totalReceivedAmount||0)}),0):0},calculateBalance:function(){return parseFloat(this.invoice.totalAmount||0)-this.calculatePaymentsTotal()},getBalanceClass:function(){var t=this.calculateBalance();return t<=0?"balance-paid":t>0?"balance-outstanding":""},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"},formatDateTime:function(t){return t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"},formatCurrency:function(t){return t?parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatNumber:function(t){return t?parseFloat(t).toLocaleString("en-US"):"0"},formatPercentage:function(t){return t?"".concat(parseFloat(t),"%"):"0%"},formatStatus:function(t){return{draft:"ແບບຮ່າງ",sent:"ສົ່ງແລ້ວ",paid:"ຈ່າຍແລ້ວ",overdue:"ເກີນກຳນົດ",cancelled:"ຍົກເລີກ"}[t]||t},formatPaymentMethod:function(t){return{cash:"ເງິນສົດ",check:"ເຊັກ",bank_transfer:"ໂອນເງິນທະນາຄານ",credit_card:"ບັດເຄຣດິດ",other:"ອື່ນໆ"}[t]||t},getDueDateClass:function(t,e){if(!t||"paid"===e||"cancelled"===e)return"";var o=new Date,n=new Date(t);return n<o&&"paid"!==e?"overdue-date":n<=new Date(o.getTime()+6048e5)?"due-soon":""}}},r=(o(974),o(32)),component=Object(r.a)(n,(function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"modal-overlay",on:{click:t.closeDialog}},[e("div",{staticClass:"modal-container",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"modal-header"},[e("h2",[t._v("ລາຍລະອຽດໃບແຈ້ງໜີ້")]),t._v(" "),e("button",{staticClass:"close-btn",on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"})])]),t._v(" "),t.invoice?e("div",{staticClass:"modal-body"},[e("div",{staticClass:"info-section"},[e("div",{staticClass:"section-header"},[t._m(0),t._v(" "),e("span",{class:["status-badge",t.invoice.status]},[t._v("\n            "+t._s(t.formatStatus(t.invoice.status))+"\n          ")])]),t._v(" "),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"info-item"},[e("label",[t._v("ເລກທີໃບແຈ້ງໜີ້:")]),t._v(" "),e("span",{staticClass:"invoice-number"},[t._v(t._s(t.invoice.invoiceNumber))])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("ວັນທີແຈ້ງໜີ້:")]),t._v(" "),e("span",[t._v(t._s(t.formatDate(t.invoice.invoiceDate)))])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("ວັນທີຄົບກຳນົດ:")]),t._v(" "),e("span",{class:t.getDueDateClass(t.invoice.dueDate,t.invoice.status)},[t._v("\n              "+t._s(t.formatDate(t.invoice.dueDate))+"\n            ")])]),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("ອັດຕາແລກປ່ຽນ:")]),t._v(" "),e("span",[t._v(t._s(t.formatNumber(t.invoice.exchangeRate)))])])])]),t._v(" "),t.invoice.customer?e("div",{staticClass:"info-section"},[t._m(1),t._v(" "),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"info-item"},[e("label",[t._v("ຊື່ລູກຄ້າ:")]),t._v(" "),e("span",{staticClass:"customer-name"},[t._v(t._s(t.invoice.customer.name))])]),t._v(" "),t.invoice.customer.email?e("div",{staticClass:"info-item"},[e("label",[t._v("ອີເມວ:")]),t._v(" "),e("span",[t._v(t._s(t.invoice.customer.email))])]):t._e(),t._v(" "),t.invoice.customer.phone?e("div",{staticClass:"info-item"},[e("label",[t._v("ເບີໂທ:")]),t._v(" "),e("span",[t._v(t._s(t.invoice.customer.phone))])]):t._e(),t._v(" "),t.invoice.customer.address?e("div",{staticClass:"info-item"},[e("label",[t._v("ທີ່ຢູ່:")]),t._v(" "),e("span",[t._v(t._s(t.invoice.customer.address))])]):t._e()])]):t._e(),t._v(" "),t.invoice.currency?e("div",{staticClass:"info-section"},[t._m(2),t._v(" "),e("div",{staticClass:"info-grid"},[e("div",{staticClass:"info-item"},[e("label",[t._v("ສະກຸນເງິນ:")]),t._v(" "),e("span",[t._v(t._s(t.invoice.currency.code)+" - "+t._s(t.invoice.currency.name))])]),t._v(" "),t.invoice.currency.symbol?e("div",{staticClass:"info-item"},[e("label",[t._v("ສັນຍາລັກ:")]),t._v(" "),e("span",[t._v(t._s(t.invoice.currency.symbol))])]):t._e()])]):t._e(),t._v(" "),e("div",{staticClass:"info-section"},[t._m(3),t._v(" "),e("div",{staticClass:"amount-summary"},[e("div",{staticClass:"amount-row"},[e("label",[t._v("ຍອດລວມ:")]),t._v(" "),e("span",{staticClass:"amount total-amount"},[t._v(t._s(t.formatCurrency(t.invoice.totalAmount)))])]),t._v(" "),e("div",{staticClass:"amount-row"},[e("label",[t._v("ຍອດພາສີ:")]),t._v(" "),e("span",{staticClass:"amount tax-amount"},[t._v(t._s(t.formatCurrency(t.invoice.taxAmount)))])]),t._v(" "),e("div",{staticClass:"amount-row subtotal"},[e("label",[t._v("ຍອດສຸດທິ:")]),t._v(" "),e("span",{staticClass:"amount net-amount"},[t._v(t._s(t.formatCurrency(t.invoice.netAmount)))])])])]),t._v(" "),t.invoice.description?e("div",{staticClass:"info-section"},[t._m(4),t._v(" "),e("div",{staticClass:"description-content"},[t._v("\n          "+t._s(t.invoice.description)+"\n        ")])]):t._e(),t._v(" "),t.invoice.invoiceLines&&t.invoice.invoiceLines.length>0?e("div",{staticClass:"info-section"},[e("div",{staticClass:"section-header"},[t._m(5),t._v(" "),e("span",{staticClass:"item-count"},[t._v(t._s(t.invoice.invoiceLines.length)+" ລາຍການ")])]),t._v(" "),e("div",{staticClass:"table-container"},[e("table",{staticClass:"data-table"},[t._m(6),t._v(" "),e("tbody",t._l(t.invoice.invoiceLines,(function(line){return e("tr",{key:line.id},[e("td",[t._v(t._s(line.lineNumber))]),t._v(" "),e("td",[e("div",{staticClass:"line-description"},[t._v("\n                    "+t._s(line.description)+"\n                  ")])]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t.formatNumber(line.quantity)))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t.formatCurrency(line.unitPrice)))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t.formatPercentage(line.taxRate)))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t.formatCurrency(line.taxAmount)))]),t._v(" "),e("td",{staticClass:"text-right total-cell"},[t._v(t._s(t.formatCurrency(line.lineTotal)))])])})),0),t._v(" "),e("tfoot",[e("tr",{staticClass:"summary-row"},[t._m(7),t._v(" "),e("td",{staticClass:"text-right"},[e("strong",[t._v(t._s(t.formatCurrency(t.calculateLinesTotal())))])])])])])])]):t._e(),t._v(" "),t.invoice.receiveHeaders&&t.invoice.receiveHeaders.length>0?e("div",{staticClass:"info-section"},[e("div",{staticClass:"section-header"},[t._m(8),t._v(" "),e("span",{staticClass:"item-count"},[t._v(t._s(t.invoice.receiveHeaders.length)+" ຄັ້ງ")])]),t._v(" "),e("div",{staticClass:"table-container"},[e("table",{staticClass:"data-table"},[t._m(9),t._v(" "),e("tbody",t._l(t.invoice.receiveHeaders,(function(o){return e("tr",{key:o.id},[e("td",[e("span",{staticClass:"receipt-number"},[t._v(t._s(o.receiptNumber))])]),t._v(" "),e("td",[t._v(t._s(t.formatDate(o.bookingDate)))]),t._v(" "),e("td",[t._v(t._s(t.formatDate(o.receivedDate)))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t.formatCurrency(o.totalReceivedAmount)))]),t._v(" "),e("td",[e("span",{class:["payment-method",o.paymentMethod]},[t._v("\n                    "+t._s(t.formatPaymentMethod(o.paymentMethod))+"\n                  ")])]),t._v(" "),e("td",[t._v(t._s(o.referenceNumber||"-"))])])})),0),t._v(" "),e("tfoot",[e("tr",{staticClass:"summary-row"},[t._m(10),t._v(" "),e("td",{staticClass:"text-right"},[e("strong",[t._v(t._s(t.formatCurrency(t.calculatePaymentsTotal())))])]),t._v(" "),e("td",{attrs:{colspan:"2"}})]),t._v(" "),e("tr",{staticClass:"balance-row"},[t._m(11),t._v(" "),e("td",{staticClass:"text-right"},[e("strong",{class:t.getBalanceClass()},[t._v("\n                    "+t._s(t.formatCurrency(t.calculateBalance()))+"\n                  ")])]),t._v(" "),e("td",{attrs:{colspan:"2"}})])])])])]):t._e(),t._v(" "),e("div",{staticClass:"info-section"},[t._m(12),t._v(" "),e("div",{staticClass:"info-grid"},[t.invoice.maker?e("div",{staticClass:"info-item"},[e("label",[t._v("ຜູ້ສ້າງ:")]),t._v(" "),e("span",[t._v(t._s(t.invoice.maker.username))])]):t._e(),t._v(" "),e("div",{staticClass:"info-item"},[e("label",[t._v("ວັນທີສ້າງ:")]),t._v(" "),e("span",[t._v(t._s(t.formatDateTime(t.invoice.createdAt)))])]),t._v(" "),t.invoice.updateUser?e("div",{staticClass:"info-item"},[e("label",[t._v("ຜູ້ແກ້ໄຂຫຼ້າສຸດ:")]),t._v(" "),e("span",[t._v(t._s(t.invoice.updateUser.username))])]):t._e(),t._v(" "),t.invoice.updateTimestamp?e("div",{staticClass:"info-item"},[e("label",[t._v("ວັນທີແກ້ໄຂຫຼ້າສຸດ:")]),t._v(" "),e("span",[t._v(t._s(t.formatDateTime(t.invoice.updateTimestamp)))])]):t._e()])])]):t._e(),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.closeDialog}},[e("i",{staticClass:"fas fa-times"}),t._v("\n        ປິດ\n      ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.printInvoice}},[e("i",{staticClass:"fas fa-print"}),t._v("\n        ພິມ\n      ")])])])]):t._e()}),[function(){var t=this._self._c;return t("h3",[t("i",{staticClass:"fas fa-file-invoice"}),this._v("\n            ຂໍ້ມູນໃບແຈ້ງໜີ້\n          ")])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-user"}),this._v("\n            ຂໍ້ມູນລູກຄ້າ\n          ")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-coins"}),this._v("\n            ຂໍ້ມູນສະກຸນເງິນ\n          ")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-calculator"}),this._v("\n            ຂໍ້ມູນຍອດເງິນ\n          ")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-comment-alt"}),this._v("\n            ລາຍລະອຽດ\n          ")])])},function(){var t=this._self._c;return t("h3",[t("i",{staticClass:"fas fa-list"}),this._v("\n            ລາຍການສິນຄ້າ/ບໍລິການ\n          ")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ລຳດັບ")]),t._v(" "),e("th",[t._v("ລາຍການ")]),t._v(" "),e("th",[t._v("ຈຳນວນ")]),t._v(" "),e("th",[t._v("ລາຄາຕໍ່ຫົວ")]),t._v(" "),e("th",[t._v("ອັດຕາພາສີ")]),t._v(" "),e("th",[t._v("ຍອດພາສີ")]),t._v(" "),e("th",[t._v("ຍອດລວມ")])])])},function(){var t=this._self._c;return t("td",{attrs:{colspan:"6"}},[t("strong",[this._v("ລວມທັງໝົດ:")])])},function(){var t=this._self._c;return t("h3",[t("i",{staticClass:"fas fa-receipt"}),this._v("\n            ປະຫວັດການຮັບຊຳລະ\n          ")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ເລກທີໃບຮັບ")]),t._v(" "),e("th",[t._v("ວັນທີບັນທຶກ")]),t._v(" "),e("th",[t._v("ວັນທີຮັບເງິນ")]),t._v(" "),e("th",[t._v("ຍອດເງິນ")]),t._v(" "),e("th",[t._v("ວິທີຈ່າຍ")]),t._v(" "),e("th",[t._v("ເລກອ້າງອີງ")])])])},function(){var t=this._self._c;return t("td",{attrs:{colspan:"3"}},[t("strong",[this._v("ລວມຊຳລະແລ້ວ:")])])},function(){var t=this._self._c;return t("td",{attrs:{colspan:"3"}},[t("strong",[this._v("ຍອດຄ້າງຊຳລະ:")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header"},[t("h3",[t("i",{staticClass:"fas fa-info-circle"}),this._v("\n            ຂໍ້ມູນລະບົບ\n          ")])])}],!1,null,"2f7741ef",null);e.default=component.exports},1520:function(t,e,o){"use strict";o(1240)},1521:function(t,e,o){var n=o(15)((function(i){return i[1]}));n.push([t.i,".invoice-header-summary-container[data-v-18ed1e13]{background-color:#f5f5f5;min-height:100vh;padding:20px}.page-header[data-v-18ed1e13]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px;padding:20px}.header-content[data-v-18ed1e13]{align-items:center;display:flex;justify-content:space-between}.page-title[data-v-18ed1e13]{color:#333;font-size:28px;font-weight:600;margin:0}.header-actions[data-v-18ed1e13]{display:flex;gap:12px}.filter-section[data-v-18ed1e13]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin-bottom:20px;padding:20px}.filter-row[data-v-18ed1e13]{align-items:flex-end;display:flex;flex-wrap:wrap;gap:20px}.filter-group[data-v-18ed1e13]{display:flex;flex-direction:column;gap:8px;min-width:150px}.filter-group label[data-v-18ed1e13]{color:#555;font-size:14px;font-weight:500}.filter-actions[data-v-18ed1e13]{align-self:flex-end;display:flex;gap:8px}.summary-cards[data-v-18ed1e13]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));margin-bottom:20px}.summary-card[data-v-18ed1e13]{align-items:flex-start;background:#fff;border:1px solid #e9ecef;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,.1);display:flex;padding:24px;transition:all .3s ease}.summary-card[data-v-18ed1e13]:hover{box-shadow:0 8px 16px rgba(0,0,0,.15);transform:translateY(-4px)}.summary-card.total-invoices[data-v-18ed1e13]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff}.summary-card.total-invoices .card-icon[data-v-18ed1e13]{background:hsla(0,0%,100%,.2);color:#fff}.summary-card.status-draft[data-v-18ed1e13]{border-left:4px solid #6c757d}.summary-card.status-sent[data-v-18ed1e13]{border-left:4px solid #17a2b8}.summary-card.status-paid[data-v-18ed1e13]{border-left:4px solid #28a745}.summary-card.status-overdue[data-v-18ed1e13]{border-left:4px solid #dc3545}.summary-card.amount-stats[data-v-18ed1e13]{border-left:4px solid #ffc107}.card-icon[data-v-18ed1e13]{align-items:center;border-radius:50%;display:flex;flex-shrink:0;font-size:24px;height:60px;justify-content:center;margin-right:20px;width:60px}.card-icon.total[data-v-18ed1e13]{background:hsla(0,0%,100%,.2);color:#fff}.card-icon.draft[data-v-18ed1e13]{background:#f8f9fa;color:#6c757d}.card-icon.sent[data-v-18ed1e13]{background:#d1ecf1;color:#17a2b8}.card-icon.paid[data-v-18ed1e13]{background:#d4edda;color:#28a745}.card-icon.overdue[data-v-18ed1e13]{background:#f8d7da;color:#dc3545}.card-icon.amount[data-v-18ed1e13]{background:#fff3cd;color:#ffc107}.card-content[data-v-18ed1e13]{flex:1;min-width:0}.card-content h3[data-v-18ed1e13]{font-size:24px;font-weight:700;margin:0 0 8px;word-break:break-word}.card-content p[data-v-18ed1e13]{font-size:14px;margin:0}.amount-info[data-v-18ed1e13]{display:block;font-size:12px;margin-top:4px;opacity:.8}.table-section[data-v-18ed1e13]{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);overflow:hidden}.table-header[data-v-18ed1e13]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px}.table-title h3[data-v-18ed1e13]{color:#333;margin:0}.record-count[data-v-18ed1e13]{color:#666;font-size:14px;margin-left:8px}.per-page-selector[data-v-18ed1e13]{align-items:center;display:flex;font-size:14px;gap:8px}.table-container[data-v-18ed1e13]{overflow-x:auto}.data-table[data-v-18ed1e13]{border-collapse:collapse;width:100%}.data-table td[data-v-18ed1e13],.data-table th[data-v-18ed1e13]{border-bottom:1px solid #e9ecef;padding:12px 16px;text-align:left}.data-table th[data-v-18ed1e13]{background-color:#f8f9fa;color:#495057;font-weight:600}.data-table th.sortable[data-v-18ed1e13]{cursor:pointer;transition:background-color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none}.data-table th.sortable[data-v-18ed1e13]:hover{background-color:#e9ecef}.data-table th i[data-v-18ed1e13]{margin-left:8px;opacity:.5}.invoice-number strong[data-v-18ed1e13]{color:#333;display:block;font-size:14px;margin-bottom:4px}.invoice-description[data-v-18ed1e13]{color:#666;font-size:12px}.customer-info .customer-name[data-v-18ed1e13]{align-items:center;color:#495057;display:flex;font-weight:600;gap:4px;margin-bottom:2px}.customer-info .customer-email[data-v-18ed1e13]{color:#666;font-size:12px;margin-left:16px}.amount-details .total-amount[data-v-18ed1e13]{color:#495057;font-weight:600;margin-bottom:2px}.amount-breakdown[data-v-18ed1e13]{color:#666;font-size:11px}.amount-breakdown small[data-v-18ed1e13]{display:block}.overdue-date[data-v-18ed1e13]{color:#dc3545;font-weight:600}.due-soon[data-v-18ed1e13]{color:#ffc107;font-weight:500}.status-badge[data-v-18ed1e13]{border-radius:12px;font-size:12px;font-weight:600;padding:4px 12px;text-transform:uppercase}.status-badge.draft[data-v-18ed1e13]{background-color:#f8f9fa;color:#6c757d}.status-badge.sent[data-v-18ed1e13]{background-color:#d1ecf1;color:#0c5460}.status-badge.paid[data-v-18ed1e13]{background-color:#d4edda;color:#155724}.status-badge.overdue[data-v-18ed1e13]{background-color:#f8d7da;color:#721c24}.status-badge.cancelled[data-v-18ed1e13]{background-color:#e2e3e5;color:#383d41}.maker-info[data-v-18ed1e13]{color:#495057;font-size:14px}.maker-info small[data-v-18ed1e13]{color:#666;display:block;font-size:12px;margin-top:2px}.actions-cell[data-v-18ed1e13]{display:flex;flex-wrap:wrap;gap:4px}.pagination-container[data-v-18ed1e13]{align-items:center;border-top:1px solid #e9ecef;display:flex;justify-content:space-between;padding:20px}.pagination-info[data-v-18ed1e13]{color:#666;font-size:14px}.pagination-controls[data-v-18ed1e13]{align-items:center;display:flex;gap:8px}.pagination-ellipsis[data-v-18ed1e13]{color:#666;padding:6px 12px}.btn[data-v-18ed1e13]{align-items:center;border:1px solid transparent;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s}.btn[data-v-18ed1e13]:disabled{cursor:not-allowed;opacity:.5}.btn-primary[data-v-18ed1e13]{background-color:#007bff;border-color:#007bff;color:#fff}.btn-primary[data-v-18ed1e13]:hover:not(:disabled){background-color:#0056b3;border-color:#0056b3}.btn-secondary[data-v-18ed1e13]{background-color:#6c757d;border-color:#6c757d;color:#fff}.btn-secondary[data-v-18ed1e13]:hover:not(:disabled){background-color:#5a6268;border-color:#5a6268}.btn-outline-primary[data-v-18ed1e13]{background-color:transparent;border-color:#007bff;color:#007bff}.btn-outline-primary[data-v-18ed1e13]:hover{background-color:#007bff;color:#fff}.btn-outline-secondary[data-v-18ed1e13]{background-color:transparent;border-color:#6c757d;color:#6c757d}.btn-outline-secondary[data-v-18ed1e13]:hover{background-color:#6c757d;color:#fff}.btn-outline-info[data-v-18ed1e13]{background-color:transparent;border-color:#17a2b8;color:#17a2b8}.btn-outline-info[data-v-18ed1e13]:hover{background-color:#17a2b8;color:#fff}.btn-outline-success[data-v-18ed1e13]{background-color:transparent;border-color:#28a745;color:#28a745}.btn-outline-success[data-v-18ed1e13]:hover{background-color:#28a745;color:#fff}.btn-outline-warning[data-v-18ed1e13]{background-color:transparent;border-color:#ffc107;color:#ffc107}.btn-outline-warning[data-v-18ed1e13]:hover{background-color:#ffc107;color:#212529}.btn-outline-danger[data-v-18ed1e13]{background-color:transparent;border-color:#dc3545;color:#dc3545}.btn-outline-danger[data-v-18ed1e13]:hover{background-color:#dc3545;color:#fff}.btn-sm[data-v-18ed1e13]{font-size:12px;padding:4px 8px}.form-control[data-v-18ed1e13]{border:1px solid #ced4da;border-radius:4px;font-size:14px;padding:8px 12px;transition:border-color .2s}.form-control[data-v-18ed1e13]:focus{border-color:#007bff;box-shadow:0 0 0 2px rgba(0,123,255,.25);outline:none}.loading-overlay[data-v-18ed1e13]{align-items:center;background-color:rgba(0,0,0,.5);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.loading-spinner[data-v-18ed1e13]{background:#fff;border-radius:8px;padding:40px;text-align:center}.loading-spinner i[data-v-18ed1e13]{color:#007bff;font-size:32px;margin-bottom:16px}@media (max-width:768px){.invoice-header-summary-container[data-v-18ed1e13]{padding:10px}.header-content[data-v-18ed1e13]{align-items:flex-start}.filter-row[data-v-18ed1e13],.header-content[data-v-18ed1e13]{flex-direction:column;gap:16px}.filter-group[data-v-18ed1e13]{min-width:auto;width:100%}.filter-actions[data-v-18ed1e13]{flex-direction:row;width:100%}.summary-cards[data-v-18ed1e13]{gap:16px;grid-template-columns:1fr}.summary-card[data-v-18ed1e13]{padding:20px}.card-icon[data-v-18ed1e13]{height:50px;margin-right:16px;width:50px}.card-content h3[data-v-18ed1e13],.card-icon[data-v-18ed1e13]{font-size:20px}.pagination-container[data-v-18ed1e13],.table-header[data-v-18ed1e13]{align-items:flex-start;flex-direction:column;gap:16px}.pagination-controls[data-v-18ed1e13]{flex-wrap:wrap}.actions-cell[data-v-18ed1e13]{flex-direction:column;gap:4px}}@media (max-width:576px){.summary-card[data-v-18ed1e13]{flex-direction:column;text-align:center}.card-icon[data-v-18ed1e13]{margin:0 auto 16px}}",""]),n.locals={},t.exports=n},1735:function(t,e,o){"use strict";o.r(e);o(34),o(131),o(44),o(9),o(5),o(35),o(7),o(67),o(10),o(11),o(8),o(12);var n=o(33),r=o(3),c=o(20),d=(o(92),o(62),o(39),o(51),o(250),o(102),o(30),o(85),o(54),o(53),o(818),o(446),o(1615)),view=o(1295);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"InvoiceHeaderSummary",components:{InvoiceHeaderMaintain:d.default,InvoiceHeaderView:view.default},data:function(){return{showEditDialog:!1,showViewDialog:!1,selectedInvoice:null,invoices:[],filteredInvoices:[],customers:[],currencies:[],loading:!1,filters:{search:"",status:"",customerId:"",dateFrom:"",dateTo:""},sort:{field:"invoiceDate",direction:"desc"},pagination:{currentPage:1,perPage:25},summaryStats:{total:{count:0},draft:{count:0,percentage:0},sent:{count:0,percentage:0},paid:{count:0,percentage:0},overdue:{count:0,percentage:0},cancelled:{count:0,percentage:0},totalAmount:0,paidAmount:0}}},computed:{user:function(){return this.$auth.user||""},paginatedInvoices:function(){var t=(this.pagination.currentPage-1)*this.pagination.perPage,e=t+this.pagination.perPage;return this.filteredInvoices.slice(t,e)},totalPages:function(){return Math.ceil(this.filteredInvoices.length/this.pagination.perPage)},paginationInfo:function(){var t=(this.pagination.currentPage-1)*this.pagination.perPage+1;return{start:t,end:Math.min(t+this.pagination.perPage-1,this.filteredInvoices.length),total:this.filteredInvoices.length}},visiblePages:function(){var t=[],e=this.pagination.currentPage,o=this.totalPages;if(o<=7)for(var i=1;i<=o;i++)t.push(i);else if(e<=4){for(var n=1;n<=5;n++)t.push(n);t.push("..."),t.push(o)}else if(e>=o-3){t.push(1),t.push("...");for(var r=o-4;r<=o;r++)t.push(r)}else{t.push(1),t.push("...");for(var c=e-1;c<=e+1;c++)t.push(c);t.push("..."),t.push(o)}return t}},mounted:function(){this.fetchInvoices(),this.fetchCustomers(),this.fetchCurrencies()},methods:{fetchInvoices:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var o,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,o=f({page:1,limit:1e3},t.filters),e.next=5,t.$axios.get("/api/ar-invoices",{params:o});case 5:n=e.sent,(data=n.data)&&data.success?t.invoices=data.data.invoices||[]:t.invoices=[],t.applyFilters(),t.calculateSummaryStats(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Error fetching invoices:",e.t0),t.showToast("Error loading invoice data","error"),t.invoices=[];case 17:return e.prev=17,t.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,12,17,20]])})))()},fetchCustomers:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/client/find");case 3:o=e.sent,data=o.data,console.info("Customer len ".concat(JSON.stringify(data))),data&&(t.customers=data||[]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching customers:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},fetchCurrencies:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/currency/find");case 3:o=e.sent,(data=o.data)&&(t.currencies=data||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching currencies:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},openCreateDialog:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.selectedInvoice=null,t.showEditDialog=!0;case 2:case"end":return e.stop()}}),e)})))()},editInvoice:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.selectedInvoice=t,e.showEditDialog=!0;case 2:case"end":return o.stop()}}),o)})))()},viewInvoice:function(t){this.selectedInvoice=t,this.showViewDialog=!0},closeEditDialog:function(){this.showEditDialog=!1,this.selectedInvoice=null},closeViewDialog:function(){this.showViewDialog=!1,this.selectedInvoice=null},onInvoiceSave:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var n,r,c,d,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,e.loading=!0,!e.selectedInvoice||!e.selectedInvoice.id){o.next=8;break}return o.next=5,e.$axios.put("/api/ar-invoices/".concat(e.selectedInvoice.id),t);case 5:n=o.sent,o.next=11;break;case 8:return o.next=10,e.$axios.post("/api/ar-invoices",t);case 10:n=o.sent;case 11:if(!n.data||!n.data.success){o.next=18;break}return e.showToast("ການບັນທຶກສຳເລັດແລ້ວ","success"),e.closeEditDialog(),o.next=16,e.fetchInvoices();case 16:o.next=19;break;case 18:throw new Error((null===(r=n.data)||void 0===r?void 0:r.message)||"Save failed");case 19:o.next=26;break;case 21:o.prev=21,o.t0=o.catch(0),console.error("Error saving invoice:",o.t0),l=(null===(c=o.t0.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||o.t0.message||"ການບັນທຶກບໍ່ສຳເລັດ",e.showToast(l,"error");case 26:return o.prev=26,e.loading=!1,o.finish(26);case 29:case"end":return o.stop()}}),o,null,[[0,21,26,29]])})))()},updateStatus:function(t,e){var o=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,c,d,l,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o.loading=!0,n.next=4,o.$axios.patch("/api/ar-invoices/".concat(t.id,"/status"),{status:e});case 4:if(!(r=n.sent).data||!r.data.success){n.next=11;break}return o.showToast("ອັບເດດສະຖານະສຳເລັດແລ້ວ","success"),n.next=9,o.fetchInvoices();case 9:n.next=12;break;case 11:throw new Error((null===(c=r.data)||void 0===c?void 0:c.message)||"Status update failed");case 12:n.next=19;break;case 14:n.prev=14,n.t0=n.catch(0),console.error("Error updating status:",n.t0),f=(null===(d=n.t0.response)||void 0===d||null===(l=d.data)||void 0===l?void 0:l.message)||n.t0.message||"ອັບເດດສະຖານະບໍ່ສຳເລັດ",o.showToast(f,"error");case 19:return n.prev=19,o.loading=!1,n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[0,14,19,22]])})))()},applyFilters:function(){var t=this,e=Object(n.a)(this.invoices);if(this.filters.search){var o=this.filters.search.toLowerCase();e=e.filter((function(t){return t.invoiceNumber.toLowerCase().includes(o)||t.description&&t.description.toLowerCase().includes(o)||t.customer&&t.customer.name.toLowerCase().includes(o)}))}this.filters.status&&(e=e.filter((function(e){return e.status===t.filters.status}))),this.filters.customerId&&(e=e.filter((function(e){return e.customerId==t.filters.customerId}))),(this.filters.dateFrom||this.filters.dateTo)&&(e=e.filter((function(e){var o=new Date(e.invoiceDate),n=t.filters.dateFrom?new Date(t.filters.dateFrom):null,r=t.filters.dateTo?new Date(t.filters.dateTo):null;return!(n&&o<n)&&!(r&&o>r)}))),this.filteredInvoices=e,this.sortData(),this.pagination.currentPage=1,this.calculateSummaryStats()},resetFilters:function(){this.filters={search:"",status:"",customerId:"",dateFrom:"",dateTo:""},this.applyFilters()},sortBy:function(t){this.sort.field===t?this.sort.direction="asc"===this.sort.direction?"desc":"asc":(this.sort.field=t,this.sort.direction="asc"),this.sortData()},sortData:function(){var t=this;this.filteredInvoices.sort((function(a,b){var e=a[t.sort.field],o=b[t.sort.field];return"string"==typeof e&&(e=e.toLowerCase(),o=o.toLowerCase()),e<o?"asc"===t.sort.direction?-1:1:e>o?"asc"===t.sort.direction?1:-1:0}))},getSortIcon:function(t){return this.sort.field!==t?"fas fa-sort":"asc"===this.sort.direction?"fas fa-sort-up":"fas fa-sort-down"},calculateSummaryStats:function(){var t=this.filteredInvoices.length,e=this.filteredInvoices.filter((function(i){return"draft"===i.status})).length,o=this.filteredInvoices.filter((function(i){return"sent"===i.status})).length,n=this.filteredInvoices.filter((function(i){return"paid"===i.status})).length,r=this.filteredInvoices.filter((function(i){return"overdue"===i.status})).length,c=this.filteredInvoices.filter((function(i){return"cancelled"===i.status})).length,d=this.filteredInvoices.reduce((function(t,e){return t+parseFloat(e.totalAmount||0)}),0),l=this.filteredInvoices.filter((function(i){return"paid"===i.status})).reduce((function(t,e){return t+parseFloat(e.totalAmount||0)}),0);this.summaryStats={total:{count:t},draft:{count:e,percentage:t>0?Math.round(e/t*100):0},sent:{count:o,percentage:t>0?Math.round(o/t*100):0},paid:{count:n,percentage:t>0?Math.round(n/t*100):0},overdue:{count:r,percentage:t>0?Math.round(r/t*100):0},cancelled:{count:c,percentage:t>0?Math.round(c/t*100):0},totalAmount:d,paidAmount:l}},updatePagination:function(){this.pagination.currentPage=1},previousPage:function(){this.pagination.currentPage>1&&this.pagination.currentPage--},nextPage:function(){this.pagination.currentPage<this.totalPages&&this.pagination.currentPage++},goToPage:function(t){this.pagination.currentPage=t},exportData:function(){var t=this.convertToCSV(this.filteredInvoices);this.downloadCSV(t,"invoices-summary.csv")},convertToCSV:function(data){var t=this;return[["Invoice Number","Invoice Date","Due Date","Customer","Total Amount","Tax Amount","Net Amount","Status","Description","Created Date"].join(",")].concat(Object(n.a)(data.map((function(e){return['"'.concat(e.invoiceNumber,'"'),e.invoiceDate,e.dueDate||"",'"'.concat(e.customer?e.customer.name:"",'"'),e.totalAmount,e.taxAmount,e.netAmount,e.status,'"'.concat((e.description||"").replace(/"/g,'""'),'"'),t.formatDate(e.createdAt)].join(",")})))).join("\n")},downloadCSV:function(t,e){var o=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download=e,a.click(),window.URL.revokeObjectURL(n)},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"},formatCurrency:function(t){return t?parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatStatus:function(t){return{draft:"ແບບຮ່າງ",sent:"ສົ່ງແລ້ວ",paid:"ຈ່າຍແລ້ວ",overdue:"ເກີນກຳນົດ",cancelled:"ຍົກເລີກ"}[t]||t},getDueDateClass:function(t,e){if(!t||"paid"===e||"cancelled"===e)return"";var o=new Date,n=new Date(t);return n<o&&"paid"!==e?"overdue-date":n<=new Date(o.getTime()+6048e5)?"due-soon":""},truncateText:function(text,t){return text?text.length>t?text.substring(0,t)+"...":text:""},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("".concat(e,": ").concat(t)),this.$toast?this.$toast[e](t):"error"===e?alert("Error: ".concat(t)):"success"===e&&console.log("✅ ".concat(t))}}},m=v,_=(o(1520),o(32)),component=Object(_.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"invoice-header-summary-container"},[e("div",{staticClass:"page-header"},[e("div",{staticClass:"header-content"},[e("h1",{staticClass:"page-title"},[t._v("ລະບົບຈັດການໃບແຈ້ງໜີ້")]),t._v(" "),e("div",{staticClass:"header-actions"},[e("button",{staticClass:"btn btn-primary",on:{click:t.openCreateDialog}},[e("i",{staticClass:"fas fa-plus"}),t._v("\n          ເພີ່ມໃບແຈ້ງໜີ້ໃໝ່\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-secondary",on:{click:t.exportData}},[e("i",{staticClass:"fas fa-download"}),t._v("\n          Export\n        ")])])])]),t._v(" "),e("div",{staticClass:"filter-section"},[e("div",{staticClass:"filter-row"},[e("div",{staticClass:"filter-group"},[e("label",[t._v("ຄົ້ນຫາ:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.search,expression:"filters.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ເລກທີໃບແຈ້ງໜີ້, ລູກຄ້າ..."},domProps:{value:t.filters.search},on:{input:[function(e){e.target.composing||t.$set(t.filters,"search",e.target.value)},t.applyFilters]}})]),t._v(" "),e("div",{staticClass:"filter-group"},[e("label",[t._v("ສະຖານະ:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.status,expression:"filters.status"}],staticClass:"form-control",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"status",e.target.multiple?o:o[0])},t.applyFilters]}},[e("option",{attrs:{value:""}},[t._v("ທັງໝົດ")]),t._v(" "),e("option",{attrs:{value:"draft"}},[t._v("ແບບຮ່າງ")]),t._v(" "),e("option",{attrs:{value:"sent"}},[t._v("ສົ່ງແລ້ວ")]),t._v(" "),e("option",{attrs:{value:"paid"}},[t._v("ຈ່າຍແລ້ວ")]),t._v(" "),e("option",{attrs:{value:"overdue"}},[t._v("ເກີນກຳນົດ")]),t._v(" "),e("option",{attrs:{value:"cancelled"}},[t._v("ຍົກເລີກ")])])]),t._v(" "),e("div",{staticClass:"filter-group"},[e("label",[t._v("ລູກຄ້າ:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.customerId,expression:"filters.customerId"}],staticClass:"form-control",on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filters,"customerId",e.target.multiple?o:o[0])},t.applyFilters]}},[e("option",{attrs:{value:""}},[t._v("ທັງໝົດ")]),t._v(" "),t._l(t.customers,(function(o){return e("option",{key:o.id,domProps:{value:o.id}},[t._v("\n            "+t._s(o.name)+"\n          ")])}))],2)]),t._v(" "),e("div",{staticClass:"filter-group"},[e("label",[t._v("ວັນທີແຈ້ງໜີ້ຈາກ:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.dateFrom,expression:"filters.dateFrom"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.filters.dateFrom},on:{change:t.applyFilters,input:function(e){e.target.composing||t.$set(t.filters,"dateFrom",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"filter-group"},[e("label",[t._v("ວັນທີແຈ້ງໜີ້ເຖິງ:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.dateTo,expression:"filters.dateTo"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.filters.dateTo},on:{change:t.applyFilters,input:function(e){e.target.composing||t.$set(t.filters,"dateTo",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"filter-actions"},[e("button",{staticClass:"btn btn-outline-primary",on:{click:t.applyFilters}},[e("i",{staticClass:"fas fa-search"}),t._v("\n          ຄົ້ນຫາ\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",on:{click:t.resetFilters}},[e("i",{staticClass:"fas fa-undo"}),t._v("\n          Reset\n        ")])])])]),t._v(" "),e("div",{staticClass:"summary-cards"},[e("div",{staticClass:"summary-card total-invoices"},[t._m(0),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.total.count))]),t._v(" "),e("p",[t._v("ລວມໃບແຈ້ງໜີ້ທັງໝົດ")])])]),t._v(" "),e("div",{staticClass:"summary-card status-draft"},[t._m(1),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.draft.count))]),t._v(" "),e("p",[t._v("ແບບຮ່າງ ("+t._s(t.summaryStats.draft.percentage)+"%)")])])]),t._v(" "),e("div",{staticClass:"summary-card status-sent"},[t._m(2),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.sent.count))]),t._v(" "),e("p",[t._v("ສົ່ງແລ້ວ ("+t._s(t.summaryStats.sent.percentage)+"%)")])])]),t._v(" "),e("div",{staticClass:"summary-card status-paid"},[t._m(3),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.paid.count))]),t._v(" "),e("p",[t._v("ຈ່າຍແລ້ວ ("+t._s(t.summaryStats.paid.percentage)+"%)")])])]),t._v(" "),e("div",{staticClass:"summary-card status-overdue"},[t._m(4),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.summaryStats.overdue.count))]),t._v(" "),e("p",[t._v("ເກີນກຳນົດ ("+t._s(t.summaryStats.overdue.percentage)+"%)")])])]),t._v(" "),e("div",{staticClass:"summary-card amount-stats"},[t._m(5),t._v(" "),e("div",{staticClass:"card-content"},[e("h3",[t._v(t._s(t.formatCurrency(t.summaryStats.totalAmount)))]),t._v(" "),e("p",[t._v("ຍອດລວມທັງໝົດ")]),t._v(" "),e("small",{staticClass:"amount-info"},[t._v("ຈ່າຍແລ້ວ: "+t._s(t.formatCurrency(t.summaryStats.paidAmount)))])])])]),t._v(" "),e("div",{staticClass:"table-section"},[e("div",{staticClass:"table-header"},[e("div",{staticClass:"table-title"},[e("h3",[t._v("ລາຍການໃບແຈ້ງໜີ້")]),t._v(" "),e("span",{staticClass:"record-count"},[t._v(t._s(t.filteredInvoices.length)+" ລາຍການ")])]),t._v(" "),e("div",{staticClass:"table-actions"},[e("div",{staticClass:"per-page-selector"},[e("label",[t._v("Show:")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.pagination.perPage,expression:"pagination.perPage"}],on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.pagination,"perPage",e.target.multiple?o:o[0])},t.updatePagination]}},[e("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),e("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),e("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),e("option",{attrs:{value:"100"}},[t._v("100")])]),t._v(" "),e("span",[t._v("per page")])])])]),t._v(" "),e("div",{staticClass:"table-container"},[e("table",{staticClass:"data-table"},[e("thead",[e("tr",[e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("invoiceNumber")}}},[t._v("\n              ເລກທີໃບແຈ້ງໜີ້\n              "),e("i",{class:t.getSortIcon("invoiceNumber")})]),t._v(" "),e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("invoiceDate")}}},[t._v("\n              ວັນທີແຈ້ງໜີ້\n              "),e("i",{class:t.getSortIcon("invoiceDate")})]),t._v(" "),e("th",[t._v("ລູກຄ້າ")]),t._v(" "),e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("dueDate")}}},[t._v("\n              ວັນທີຄົບກຳນົດ\n              "),e("i",{class:t.getSortIcon("dueDate")})]),t._v(" "),e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("totalAmount")}}},[t._v("\n              ຍອດລວມ\n              "),e("i",{class:t.getSortIcon("totalAmount")})]),t._v(" "),e("th",{staticClass:"sortable",on:{click:function(e){return t.sortBy("status")}}},[t._v("\n              ສະຖານະ\n              "),e("i",{class:t.getSortIcon("status")})]),t._v(" "),e("th",[t._v("ຜູ້ສ້າງ")]),t._v(" "),e("th",[t._v("ຟັງຊັ່ນ")])])]),t._v(" "),e("tbody",t._l(t.paginatedInvoices,(function(o){return e("tr",{key:o.id},[e("td",[e("div",{staticClass:"invoice-number"},[e("strong",[t._v(t._s(o.invoiceNumber))]),t._v(" "),o.description?e("div",{staticClass:"invoice-description"},[t._v("\n                  "+t._s(t.truncateText(o.description,50))+"\n                ")]):t._e()])]),t._v(" "),e("td",[t._v(t._s(t.formatDate(o.invoiceDate)))]),t._v(" "),e("td",[e("div",{staticClass:"customer-info"},[e("div",{staticClass:"customer-name"},[e("i",{staticClass:"fas fa-user"}),t._v("\n                  "+t._s(o.customer?o.customer.name:"N/A")+"\n                ")]),t._v(" "),o.customer&&o.customer.email?e("div",{staticClass:"customer-email"},[t._v("\n                  "+t._s(o.customer.email)+"\n                ")]):t._e()])]),t._v(" "),e("td",[e("span",{class:t.getDueDateClass(o.dueDate,o.status)},[t._v("\n                "+t._s(t.formatDate(o.dueDate))+"\n              ")])]),t._v(" "),e("td",[e("div",{staticClass:"amount-details"},[e("div",{staticClass:"total-amount"},[t._v("\n                  "+t._s(t.formatCurrency(o.totalAmount))+"\n                ")]),t._v(" "),e("div",{staticClass:"amount-breakdown"},[e("small",[t._v("Net: "+t._s(t.formatCurrency(o.netAmount)))]),t._v(" "),o.taxAmount>0?e("small",[t._v("Tax: "+t._s(t.formatCurrency(o.taxAmount)))]):t._e()])])]),t._v(" "),e("td",[e("span",{class:["status-badge",o.status]},[t._v("\n                "+t._s(t.formatStatus(o.status))+"\n              ")])]),t._v(" "),e("td",[e("div",{staticClass:"maker-info"},[t._v("\n                "+t._s(o.maker?o.maker.username:"N/A")+"\n                "),o.createdAt?e("small",[t._v(t._s(t.formatDate(o.createdAt)))]):t._e()])]),t._v(" "),e("td",{staticClass:"actions-cell"},[e("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{title:"ເບິ່ງລາຍລະອຽດ"},on:{click:function(e){return t.viewInvoice(o)}}},[e("i",{staticClass:"fas fa-eye"})]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-outline-info",attrs:{title:"ແກ້ໄຂ",disabled:"paid"===o.status},on:{click:function(e){return t.editInvoice(o)}}},[e("i",{staticClass:"fas fa-edit"})]),t._v(" "),"paid"!==o.status&&"cancelled"!==o.status?e("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{title:"ຈ່າຍແລ້ວ"},on:{click:function(e){return t.updateStatus(o,"paid")}}},[e("i",{staticClass:"fas fa-check"})]):t._e(),t._v(" "),"draft"===o.status?e("button",{staticClass:"btn btn-sm btn-outline-warning",attrs:{title:"ສົ່ງໃບແຈ້ງໜີ້"},on:{click:function(e){return t.updateStatus(o,"sent")}}},[e("i",{staticClass:"fas fa-paper-plane"})]):t._e(),t._v(" "),"paid"!==o.status&&"cancelled"!==o.status?e("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{title:"ຍົກເລີກ"},on:{click:function(e){return t.updateStatus(o,"cancelled")}}},[e("i",{staticClass:"fas fa-times"})]):t._e()])])})),0)])]),t._v(" "),e("div",{staticClass:"pagination-container"},[e("div",{staticClass:"pagination-info"},[t._v("\n        Showing "+t._s(t.paginationInfo.start)+" to "+t._s(t.paginationInfo.end)+" of\n        "+t._s(t.paginationInfo.total)+" entries\n      ")]),t._v(" "),e("div",{staticClass:"pagination-controls"},[e("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{disabled:1===t.pagination.currentPage},on:{click:t.previousPage}},[t._v("\n          Previous\n        ")]),t._v(" "),t._l(t.visiblePages,(function(o){return e("span",{key:o},["..."!==o?e("button",{staticClass:"btn btn-sm",class:o===t.pagination.currentPage?"btn-primary":"btn-outline-secondary",on:{click:function(e){return t.goToPage(o)}}},[t._v("\n            "+t._s(o)+"\n          ")]):e("span",{staticClass:"pagination-ellipsis"},[t._v("...")])])})),t._v(" "),e("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{disabled:t.pagination.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v("\n          Next\n        ")])],2)])]),t._v(" "),e("client-only",[e("InvoiceHeaderMaintain",{attrs:{visible:t.showEditDialog,invoice:t.selectedInvoice,customers:t.customers,currencies:t.currencies},on:{close:t.closeEditDialog,save:t.onInvoiceSave}})],1),t._v(" "),e("client-only",[e("InvoiceHeaderView",{attrs:{visible:t.showViewDialog,invoice:t.selectedInvoice},on:{close:t.closeViewDialog}})],1),t._v(" "),t.loading?e("div",{staticClass:"loading-overlay"},[t._m(6)]):t._e()],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"card-icon total"},[t("i",{staticClass:"fas fa-file-invoice"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon draft"},[t("i",{staticClass:"fas fa-edit"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon sent"},[t("i",{staticClass:"fas fa-paper-plane"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon paid"},[t("i",{staticClass:"fas fa-check-circle"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon overdue"},[t("i",{staticClass:"fas fa-exclamation-triangle"})])},function(){var t=this._self._c;return t("div",{staticClass:"card-icon amount"},[t("i",{staticClass:"fas fa-dollar-sign"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"loading-spinner"},[e("i",{staticClass:"fas fa-spinner fa-spin"}),t._v(" "),e("p",[t._v("Loading...")])])}],!1,null,"18ed1e13",null);e.default=component.exports},920:function(t,e,o){var content=o(975);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(16).default)("753719de",content,!0,{sourceMap:!1})},974:function(t,e,o){"use strict";o(920)},975:function(t,e,o){var n=o(15)((function(i){return i[1]}));n.push([t.i,".modal-overlay[data-v-2f7741ef]{align-items:center;background-color:rgba(0,0,0,.6);bottom:0;display:flex;justify-content:center;left:0;padding:20px;position:fixed;right:0;top:0;z-index:1000}.modal-container[data-v-2f7741ef]{background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.3);display:flex;flex-direction:column;max-height:90vh;max-width:1000px;overflow:hidden;width:100%}.modal-header[data-v-2f7741ef]{align-items:center;background-color:#f8f9fa;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:24px}.modal-header h2[data-v-2f7741ef]{color:#333;font-size:24px;font-weight:600;margin:0}.close-btn[data-v-2f7741ef]{background:none;border:none;border-radius:4px;color:#666;cursor:pointer;font-size:24px;padding:4px;transition:all .2s}.close-btn[data-v-2f7741ef]:hover{background-color:#e9ecef;color:#333}.modal-body[data-v-2f7741ef]{flex:1;overflow-y:auto;padding:24px}.modal-footer[data-v-2f7741ef]{background-color:#f8f9fa;border-top:1px solid #e9ecef;display:flex;gap:12px;justify-content:flex-end;padding:20px 24px}.info-section[data-v-2f7741ef]{border:1px solid #e9ecef;border-radius:8px;margin-bottom:32px;overflow:hidden}.info-section[data-v-2f7741ef]:last-child{margin-bottom:0}.section-header[data-v-2f7741ef]{align-items:center;background-color:#f8f9fa;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:16px 20px}.section-header h3[data-v-2f7741ef]{align-items:center;color:#333;display:flex;font-size:16px;font-weight:600;gap:8px;margin:0}.section-header h3 i[data-v-2f7741ef]{color:#007bff}.item-count[data-v-2f7741ef]{background-color:#e9ecef;border-radius:12px;color:#666;font-size:12px;padding:4px 8px}.info-grid[data-v-2f7741ef]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));padding:20px}.info-item[data-v-2f7741ef]{display:flex;flex-direction:column;gap:4px}.info-item label[data-v-2f7741ef]{color:#666;font-size:12px;font-weight:500;letter-spacing:.5px;text-transform:uppercase}.info-item span[data-v-2f7741ef]{color:#333;font-size:14px;font-weight:500}.invoice-number[data-v-2f7741ef]{color:#007bff!important;font-family:monospace;font-size:16px!important;font-weight:600!important}.customer-name[data-v-2f7741ef]{color:#495057!important;font-weight:600!important}.status-badge[data-v-2f7741ef]{border-radius:12px;font-size:12px;font-weight:600;padding:6px 12px;text-transform:uppercase}.status-badge.draft[data-v-2f7741ef]{background-color:#f8f9fa;color:#6c757d}.status-badge.sent[data-v-2f7741ef]{background-color:#d1ecf1;color:#0c5460}.status-badge.paid[data-v-2f7741ef]{background-color:#d4edda;color:#155724}.status-badge.overdue[data-v-2f7741ef]{background-color:#f8d7da;color:#721c24}.status-badge.cancelled[data-v-2f7741ef]{background-color:#e2e3e5;color:#383d41}.overdue-date[data-v-2f7741ef]{color:#dc3545!important;font-weight:600!important}.due-soon[data-v-2f7741ef]{color:#ffc107!important;font-weight:500!important}.amount-summary[data-v-2f7741ef]{padding:20px}.amount-row[data-v-2f7741ef]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:12px 0}.amount-row[data-v-2f7741ef]:last-child{border-bottom:none}.amount-row.subtotal[data-v-2f7741ef]{border-top:2px solid #007bff;font-weight:600;margin-top:8px;padding-top:16px}.amount-row label[data-v-2f7741ef]{color:#495057;font-size:14px;font-weight:500}.amount[data-v-2f7741ef]{font-family:monospace;font-size:16px;font-weight:600}.total-amount[data-v-2f7741ef]{color:#495057}.tax-amount[data-v-2f7741ef]{color:#ffc107}.net-amount[data-v-2f7741ef]{color:#28a745;font-size:18px}.description-content[data-v-2f7741ef]{background-color:#f8f9fa;border-radius:4px;color:#495057;font-size:14px;line-height:1.6;margin:20px;padding:20px}.table-container[data-v-2f7741ef]{overflow-x:auto}.data-table[data-v-2f7741ef]{border-collapse:collapse;width:100%}.data-table td[data-v-2f7741ef],.data-table th[data-v-2f7741ef]{border-bottom:1px solid #e9ecef;padding:12px;text-align:left}.data-table th[data-v-2f7741ef]{background-color:#f8f9fa;color:#495057;font-size:12px;font-weight:600;letter-spacing:.5px;text-transform:uppercase}.data-table td[data-v-2f7741ef]{color:#333;font-size:14px}.data-table .text-right[data-v-2f7741ef]{text-align:right}.data-table tbody tr[data-v-2f7741ef]:hover{background-color:#f8f9fa}.line-description[data-v-2f7741ef]{word-wrap:break-word;max-width:200px}.total-cell[data-v-2f7741ef]{color:#495057;font-weight:600}.receipt-number[data-v-2f7741ef]{color:#007bff;font-family:monospace;font-weight:600}.payment-method[data-v-2f7741ef]{border-radius:4px;font-size:12px;font-weight:500;padding:4px 8px}.payment-method.cash[data-v-2f7741ef]{background-color:#d4edda;color:#155724}.payment-method.check[data-v-2f7741ef]{background-color:#d1ecf1;color:#0c5460}.payment-method.bank_transfer[data-v-2f7741ef]{background-color:#d6d8db;color:#383d41}.payment-method.credit_card[data-v-2f7741ef]{background-color:#fff3cd;color:#856404}.payment-method.other[data-v-2f7741ef]{background-color:#f8d7da;color:#721c24}.data-table tfoot td[data-v-2f7741ef]{background-color:#f8f9fa;border-bottom:none;font-weight:600}.summary-row td[data-v-2f7741ef]{border-top:2px solid #dee2e6;color:#495057}.balance-row td[data-v-2f7741ef]{border-top:1px solid #dee2e6}.balance-paid[data-v-2f7741ef]{color:#28a745!important}.balance-outstanding[data-v-2f7741ef]{color:#dc3545!important}.btn[data-v-2f7741ef]{align-items:center;border:1px solid transparent;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;justify-content:center;min-width:120px;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s}.btn-primary[data-v-2f7741ef]{background-color:#007bff;border-color:#007bff;color:#fff}.btn-primary[data-v-2f7741ef]:hover{background-color:#0056b3;border-color:#0056b3}.btn-secondary[data-v-2f7741ef]{background-color:#6c757d;border-color:#6c757d;color:#fff}.btn-secondary[data-v-2f7741ef]:hover{background-color:#5a6268;border-color:#5a6268}@media (max-width:768px){.modal-overlay[data-v-2f7741ef]{padding:10px}.modal-container[data-v-2f7741ef]{max-height:95vh;max-width:100%}.modal-header[data-v-2f7741ef]{padding:20px}.modal-header h2[data-v-2f7741ef]{font-size:20px}.modal-body[data-v-2f7741ef]{padding:20px}.modal-footer[data-v-2f7741ef]{flex-direction:column;padding:16px 20px}.info-grid[data-v-2f7741ef]{gap:12px;grid-template-columns:1fr;padding:16px}.section-header[data-v-2f7741ef]{align-items:flex-start;flex-direction:column;gap:8px;padding:12px 16px}.amount-summary[data-v-2f7741ef]{padding:16px}.description-content[data-v-2f7741ef]{margin:16px;padding:16px}.data-table[data-v-2f7741ef]{font-size:12px}.data-table td[data-v-2f7741ef],.data-table th[data-v-2f7741ef]{padding:8px}.btn[data-v-2f7741ef]{width:100%}}@media (max-width:576px){.modal-header[data-v-2f7741ef]{align-items:flex-start;flex-direction:column;gap:12px}.close-btn[data-v-2f7741ef]{position:absolute;right:16px;top:16px}.data-table td[data-v-2f7741ef],.data-table th[data-v-2f7741ef]{font-size:11px;padding:6px}.line-description[data-v-2f7741ef]{max-width:150px}}",""]),n.locals={},t.exports=n}}]);