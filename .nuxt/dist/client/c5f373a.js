(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1268:function(e,t,n){var content=n(1573);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("5b676d62",content,!0,{sourceMap:!1})},1572:function(e,t,n){"use strict";n(1268)},1573:function(e,t,n){var r=n(15)((function(i){return i[1]}));r.push([e.i,".maintenance-dialog[data-v-2a29f051]{display:flex;flex-direction:column;height:100vh}.dialog-toolbar[data-v-2a29f051]{border-radius:0!important;flex-shrink:0}.toolbar-title[data-v-2a29f051]{font-size:1.25rem;font-weight:500}.dialog-content[data-v-2a29f051]{background-color:#fafafa;flex:1;overflow-y:auto}.form-container[data-v-2a29f051]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);margin:0 auto;max-width:1200px;padding:32px!important}.section-header[data-v-2a29f051]{align-items:center;border-bottom:2px solid #e3f2fd;display:flex;margin-bottom:20px;padding-bottom:12px}.section-icon[data-v-2a29f051]{font-size:24px!important;margin-right:12px}.section-title[data-v-2a29f051]{color:#1976d2;font-size:1.1rem;font-weight:600;margin:0}.dialog-actions[data-v-2a29f051]{background:#fff;border-top:1px solid #e0e0e0;flex-shrink:0;padding:16px 0!important}.documents-list[data-v-2a29f051]{min-height:60px}.documents-list[data-v-2a29f051],.image-gallery[data-v-2a29f051]{background:#f8f9fa;border:1px solid #e0e0e0;border-radius:8px;padding:12px}.image-card[data-v-2a29f051]{cursor:pointer;position:relative;transition:all .3s ease}.image-card[data-v-2a29f051]:hover{box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-2px)}.image-container[data-v-2a29f051]{position:relative}.image-overlay[data-v-2a29f051],.image-preview[data-v-2a29f051]{border-radius:8px 8px 0 0}.image-overlay[data-v-2a29f051]{background:rgba(0,0,0,.5);opacity:0;transition:opacity .3s ease}.image-card:hover .image-overlay[data-v-2a29f051]{opacity:1}.image-actions[data-v-2a29f051]{align-items:center;display:flex;gap:8px;height:100%;justify-content:center}.document-card[data-v-2a29f051]{border:1px solid #e0e0e0;transition:all .3s ease}.document-card[data-v-2a29f051]:hover{box-shadow:0 2px 8px rgba(0,0,0,.15)}.document-actions[data-v-2a29f051]{display:flex;gap:4px}.v-select--outlined[data-v-2a29f051] .v-input__control>.v-input__slot,.v-text-field--outlined[data-v-2a29f051] .v-input__control>.v-input__slot{min-height:48px}.v-file-input[data-v-2a29f051] .v-file-input__text{max-width:200px}@media (max-width:768px){.form-container[data-v-2a29f051]{border-radius:8px;margin:0 8px;padding:20px!important}.section-header[data-v-2a29f051]{align-items:flex-start;flex-direction:column;text-align:left}.section-icon[data-v-2a29f051]{margin-bottom:4px;margin-right:8px}.toolbar-title[data-v-2a29f051]{font-size:1.1rem}.image-actions[data-v-2a29f051]{gap:4px}}.v-btn[data-v-2a29f051]:not(.v-btn--flat):not(.v-btn--text):not(.v-btn--outlined):hover{box-shadow:0 4px 8px rgba(0,0,0,.2);transform:translateY(-1px)}.v-card[data-v-2a29f051]{transition:all .3s ease}.v-chip.v-size--small[data-v-2a29f051]{font-size:.75rem;height:24px}.v-select.v-select--is-loading[data-v-2a29f051] .v-input__append-inner{animation:spin-2a29f051 1s linear infinite}@keyframes spin-2a29f051{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.v-dialog[data-v-2a29f051] .v-card{overflow:visible}.pdf-viewer-content[data-v-2a29f051]{height:calc(100vh - 64px)}.pdf-container[data-v-2a29f051]{background:#f5f5f5;height:100%;position:relative;width:100%}.pdf-iframe[data-v-2a29f051]{background:#fff;border:none;height:100%;width:100%}.pdf-error[data-v-2a29f051],.pdf-loading[data-v-2a29f051]{align-items:center;color:#666;display:flex;flex-direction:column;font-size:16px;height:100%;justify-content:center}.pdf-loading[data-v-2a29f051]{background:#fff}.pdf-error[data-v-2a29f051]{background:#f8f8f8}@media (max-width:768px){.pdf-viewer-content[data-v-2a29f051]{height:calc(100vh - 56px)}.pdf-error[data-v-2a29f051],.pdf-loading[data-v-2a29f051]{font-size:14px}}",""]),r.locals={},e.exports=r},1707:function(e,t,n){"use strict";n.r(t);var r=n(317),o=n(314),l=n(18),c=n(318),d=n(785),f=n(780),v=n(759),m=n(954),x=n(786),h=n(167),_=n(244),y=n(306),w=n(251),k=n(315),C=n(784),O=n(65),I=n(782),j=n(113),$=n(816),D=n(91),P=n(334),S=(n(35),n(7),n(12),n(13),n(20)),R=n(3);n(92),n(66),n(5),n(44),n(9),n(69),n(54),n(100),n(39),n(51),n(53),n(821),n(447),n(62),n(121),n(30),n(34),n(85),n(339),n(8),n(10);function z(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(t){Object(R.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var U={name:"MouMaintenanceDialog",props:{value:{type:Boolean,default:!1},editingItem:{type:Object,default:null}},data:function(){var e;return e={isFormValid:!1,saving:!1,loadingAgencies:!1,loadingCurrencies:!1,processingFiles:!1,fileProgress:{current:0,total:0},agencies:[],currencies:[],selectedImages:[],selectedDocuments:[],imagePreviewDialog:!1,previewImage:null,previewImageIndex:null,pdfViewerDialog:!1,currentPdfUrl:null,currentPdfName:null},Object(R.a)(e,"pdfViewerDialog",!1),Object(R.a)(e,"currentPdfUrl",null),Object(R.a)(e,"currentPdfName",null),Object(R.a)(e,"form",{jobCode:"",mouNumber:"",pmCharge:0,exchangeRate:1,agencyId:null,employerCompany:"",workLocation:"",jobTitle:"",numberOfWorkers:1,workerType:"Any",jobStatus:"draft",documents:[],images:[],notes:"",currencyId:null}),Object(R.a)(e,"statusOptions",[{value:"draft",text:"ຮ່າງ"},{value:"open",text:"ເປີດ"},{value:"in_progress",text:"ກຳລັງດຳເນີນການ"},{value:"completed",text:"ສຳເລັດແລ້ວ"},{value:"cancelled",text:"ຍົກເລີກແລ້ວ"}]),Object(R.a)(e,"workerTypeOptions",[{value:"Any",text:"ເພດໃດກໍໄດ້"},{value:"Man",text:"ຜູ້ຊາຍເທົ່ານັ້ນ"},{value:"Woman",text:"ຜູ້ຍິງເທົ່ານັ້ນ"},{value:"Spous",text:"ຄູ່ສົມລົດ"}]),Object(R.a)(e,"rules",{required:function(e){return!!e||"ຈຳເປັນຕ້ອງໃສ່ຂໍ້ມູນ"},positiveNumber:function(e){return e>0||"ຕ້ອງໃຫ່ຍກວ່າ 0"}}),e},computed:{isEditing:function(){return!!this.editingItem},selectedCurrency:function(){var e=this;return this.currencies.find((function(t){return t.id===e.form.currencyId}))}},watch:{value:function(e){e&&(this.initForm(),this.fetchDropdownData())},editingItem:{handler:function(){this.editingItem&&this.populateForm()},deep:!0}},methods:{initForm:function(){this.isEditing?this.populateForm():this.resetForm()},resetForm:function(){var e=this;this.form={jobCode:"",mouNumber:"",pmCharge:0,exchangeRate:1,agencyId:null,employerCompany:"",workLocation:"",jobTitle:"",numberOfWorkers:1,workerType:"Any",jobStatus:"draft",documents:[],images:[],notes:"",currencyId:null},this.selectedImages=[],this.selectedDocuments=[],this.$nextTick((function(){var t;null===(t=e.$refs.form)||void 0===t||t.resetValidation()}))},populateForm:function(){var e=this;if(this.editingItem){var t,n,r=(this.editingItem.images||[]).map((function(img){return{id:img.id,name:img.orgName||img.img_path,size:img.imageSize||img.size,type:img.imageMimeType||img.type,url:e.getFileUrl("images",img.img_name||img.img_path),preview:e.getFileUrl("images",img.img_name||img.img_path),isExisting:!0}})),o=(this.editingItem.documents||[]).map((function(t,n){return{id:t.id||n,name:t.name,size:t.size,type:t.mimetype||t.type,url:t.path?e.getDocumentDownloadUrl(e.editingItem.id,n):null,path:t.path,filename:t.filename,isExisting:!0}}));this.form=F(F(F({},this.form),this.editingItem),{},{agencyId:(null===(t=this.editingItem.agency)||void 0===t?void 0:t.id)||null,currencyId:(null===(n=this.editingItem.currency)||void 0===n?void 0:n.id)||null,documents:o,images:r})}},handleImageSelection:function(e){var t=this;return Object(S.a)(regeneratorRuntime.mark((function n(){var r,i,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&0!==e.length){n.next=2;break}return n.abrupt("return");case 2:if(5242880,r=Array.from(e).filter((function(e){return e.type.startsWith("image/")?!(e.size>5242880)||(t.$toast.error("".concat(e.name," ມີຂະໜາດໃຫຍ່ເກີນ 5MB")),!1):(t.$toast.error("".concat(e.name," ບໍ່ແມ່ນໄຟລ໌ຮູບພາບ")),!1)})),0!==r.length){n.next=7;break}return t.selectedImages=[],n.abrupt("return");case 7:t.processingFiles=!0,t.fileProgress={current:0,total:r.length},n.prev=9,i=0;case 11:if(!(i<r.length)){n.next=30;break}return o=r[i],t.fileProgress.current=i,n.prev=14,n.next=17,t.readFileAsDataURL(o);case 17:return l=n.sent,t.form.images.push({name:o.name,size:o.size,type:o.type,file:o,preview:l,isNew:!0}),n.next=21,t.delay(10);case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(14),console.error("Error processing image ".concat(o.name,":"),n.t0),t.$toast.error("ໂຫລດຮູບພາບ ".concat(o.name," ບໍ່ສຳເລັດ"));case 27:i++,n.next=11;break;case 30:t.fileProgress.current=r.length,t.$toast.success("ໂຫລດຮູບພາບ ".concat(r.length," ໄຟລ໌ສຳເລັດ")),n.next=38;break;case 34:n.prev=34,n.t1=n.catch(9),console.error("Error in handleImageSelection:",n.t1),t.$toast.error("ເກີດຂໍ້ຜິດພາດໃນການໂຫລດຮູບພາບ");case 38:return n.prev=38,t.processingFiles=!1,t.fileProgress={current:0,total:0},t.selectedImages=[],t.$nextTick((function(){t.$refs.imageInput&&t.$refs.imageInput.reset()})),n.finish(38);case 44:case"end":return n.stop()}}),n,null,[[9,34,38,44],[14,23]])})))()},handleDocumentSelection:function(e){var t=this;return Object(S.a)(regeneratorRuntime.mark((function n(){var r,o,i,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&0!==e.length){n.next=2;break}return n.abrupt("return");case 2:if(10485760,r=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain"],o=Array.from(e).filter((function(e){return r.includes(e.mimetype)||t.isValidDocumentExtension(e.name)?!(e.size>10485760)||(t.$toast.error("".concat(e.name," ມີຂະໜາດໃຫຍ່ເກີນ 10MB")),!1):(t.$toast.error("".concat(e.name," ບໍ່ແມ່ນໄຟລ໌ເອກະສານທີ່ຮອງຮັບ")),!1)})),0!==o.length){n.next=8;break}return t.selectedDocuments=[],n.abrupt("return");case 8:t.processingFiles=!0,t.fileProgress={current:0,total:o.length},n.prev=10,i=0;case 12:if(!(i<o.length)){n.next=21;break}return l=o[i],t.fileProgress.current=i+1,t.form.documents.push({name:l.name,size:l.size,type:l.type,file:l,isNew:!0}),n.next=18,t.delay(5);case 18:i++,n.next=12;break;case 21:t.$toast.success("ໂຫລດເອກະສານ ".concat(o.length," ໄຟລ໌ສຳເລັດ")),n.next=28;break;case 24:n.prev=24,n.t0=n.catch(10),console.error("Error in handleDocumentSelection:",n.t0),t.$toast.error("ເກີດຂໍ້ຜິດພາດໃນການໂຫລດເອກະສານ");case 28:return n.prev=28,t.processingFiles=!1,t.fileProgress={current:0,total:0},t.selectedDocuments=[],t.$nextTick((function(){t.$refs.documentInput&&t.$refs.documentInput.reset()})),n.finish(28);case 34:case"end":return n.stop()}}),n,null,[[10,24,28,34]])})))()},readFileAsDataURL:function(e){var t=this;return new Promise((function(n,r){var o=new FileReader;o.onload=function(e){return n(e.target.result)},o.onerror=function(e){return r(new Error("Failed to read file"))},o.onabort=function(e){return r(new Error("File reading aborted"))},e.size>1048576?t.createImageThumbnail(e,300,300).then(n).catch((function(){o.readAsDataURL(e)})):o.readAsDataURL(e)}))},createImageThumbnail:function(e,t,n){return new Promise((function(r,o){var canvas=document.createElement("canvas"),l=canvas.getContext("2d"),img=new Image;img.onload=function(){var e=img.width,o=img.height;e>o?e>t&&(o=o*t/e,e=t):o>n&&(e=e*n/o,o=n),canvas.width=e,canvas.height=o,l.drawImage(img,0,0,e,o),r(canvas.toDataURL("image/jpeg",.8))},img.onerror=o,img.src=URL.createObjectURL(e)}))},isValidDocumentExtension:function(e){var t=e.toLowerCase().substring(e.lastIndexOf("."));return[".pdf",".doc",".docx",".xls",".xlsx",".txt"].includes(t)},isPdfFile:function(e){return!!e&&".pdf"===e.toLowerCase().substring(e.lastIndexOf("."))},viewPdf:function(e){var t=this;return Object(S.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.currentPdfName=e.name,!e.isExisting||!e.url){n.next=10;break}return n.next=5,t.$axios({method:"GET",url:e.url,responseType:"blob"});case 5:r=n.sent,o=new Blob([r.data],{type:"application/pdf"}),t.currentPdfUrl=window.URL.createObjectURL(o),n.next=11;break;case 10:e.file&&e.isNew&&(t.currentPdfUrl=URL.createObjectURL(e.file));case 11:t.pdfViewerDialog=!0,n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),console.error("Error viewing PDF:",n.t0),t.$toast.error("ເປີດ PDF ບໍ່ສຳເລັດ");case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))()},downloadCurrentPdf:function(){var e=this;return Object(S.a)(regeneratorRuntime.mark((function t(){var link;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.currentPdfUrl&&e.currentPdfName)try{(link=document.createElement("a")).href=e.currentPdfUrl,link.download=e.currentPdfName,document.body.appendChild(link),link.click(),document.body.removeChild(link),e.$toast.success("ດາວໂຫລດ PDF ສຳເລັດ")}catch(t){console.error("Error downloading PDF:",t),e.$toast.error("ດາວໂຫລດ PDF ບໍ່ສຳເລັດ")}case 1:case"end":return t.stop()}}),t)})))()},delay:function(e){return new Promise((function(t){return setTimeout(t,e)}))},removeImage:function(e){var t=this.form.images[e];t.isExisting&&t.id&&this.deleteExistingImage(t.id),this.form.images.splice(e,1)},removeDocument:function(e){var t=this;return Object(S.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.form.documents[e].isExisting||null===(r=t.editingItem)||void 0===r||!r.id){n.next=4;break}return n.next=4,t.deleteExistingDocument(t.editingItem.id,e);case 4:t.form.documents.splice(e,1);case 5:case"end":return n.stop()}}),n)})))()},openImagePreview:function(image,e){this.previewImage=image,this.previewImageIndex=e,this.imagePreviewDialog=!0},removeImageFromPreview:function(){null!==this.previewImageIndex&&(this.removeImage(this.previewImageIndex),this.imagePreviewDialog=!1,this.previewImage=null,this.previewImageIndex=null)},downloadDocument:function(e){var t=this;return Object(S.a)(regeneratorRuntime.mark((function n(){var r,o,l,link;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.url){n.next=23;break}return n.prev=1,n.next=4,t.$axios({method:"GET",url:e.url,responseType:"blob",headers:{}});case 4:r=n.sent,o=new Blob([r.data]),l=window.URL.createObjectURL(o),(link=document.createElement("a")).href=l,link.download=e.name||"document",document.body.appendChild(link),link.click(),document.body.removeChild(link),window.URL.revokeObjectURL(l),t.$toast.success("ດາວໂຫລດເອກະສານສຳເລັດ"),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(1),console.error("Download error:",n.t0),t.$toast.error("ດາວໂຫລດເອກະສານບໍ່ສຳເລັດ");case 21:n.next=24;break;case 23:t.$toast.warning("ເອກະສານຍັງບໍ່ໄດ້ຖືກບັນທຶກ, ກະລຸນາບັນທຶກ MOU ກ່ອນ");case 24:case"end":return n.stop()}}),n,null,[[1,17]])})))()},downloadImage:function(image){var e=this;return Object(S.a)(regeneratorRuntime.mark((function t(){var n,r,o,link;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!image.url){t.next=23;break}return t.prev=1,t.next=4,e.$axios({method:"GET",url:image.url,responseType:"blob"});case 4:n=t.sent,r=new Blob([n.data]),o=window.URL.createObjectURL(r),(link=document.createElement("a")).href=o,link.download=image.name||"image",document.body.appendChild(link),link.click(),document.body.removeChild(link),window.URL.revokeObjectURL(o),e.$toast.success("ດາວໂຫລດຮູບພາບສຳເລັດ"),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(1),console.error("Download error:",t.t0),e.$toast.error("ດາວໂຫລດຮູບພາບບໍ່ສຳເລັດ");case 21:t.next=24;break;case 23:image.preview&&(e.downloadDataURL(image.preview,image.name),e.$toast.success("ດາວໂຫລດຮູບພາບສຳເລັດ"));case 24:case"end":return t.stop()}}),t,null,[[1,17]])})))()},downloadDataURL:function(e,t){var link=document.createElement("a");link.href=e,link.download=t,document.body.appendChild(link),link.click(),document.body.removeChild(link)},deleteExistingImage:function(e){var t=this;return Object(S.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$delete("/api/mous/image/".concat(e));case 3:n.sent.success&&t.$toast.success("ລຶບຮູບພາບສຳເລັດແລ້ວ"),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.error("Error deleting image:",n.t0),t.$toast.error("ລຶບຮູບພາບບໍ່ສຳເລັດ");case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},deleteExistingDocument:function(e,t){var n=this;return Object(S.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.$axios.$delete("/api/mous/".concat(e,"/document/").concat(t));case 3:r.sent.success&&n.$toast.success("ລຶບເອກະສານສຳເລັດແລ້ວ"),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.error("Error deleting document:",r.t0),n.$toast.error("ລຶບເອກະສານບໍ່ສຳເລັດ");case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()},getFileUrl:function(e,t){if(console.info("Getting file URL for ".concat(e,": ").concat(t)),!t)return"";var n=this.$axios.defaults.baseURL||"";return console.info("Base URL: ".concat(n)),"".concat(n,"/uploads/").concat(e,"/").concat(t).replace(/\/+/g,"/").replace(":/","://")},getDocumentDownloadUrl:function(e,t){var n=this.$axios.defaults.baseURL||"";return"".concat(n,"/api/mous/download/document/").concat(e,"/").concat(t).replace(/\/+/g,"/").replace(":/","://")},getImageDownloadUrl:function(e){var t=this.$axios.defaults.baseURL||"";return"".concat(t,"/api/mous/download/image/").concat(e).replace(/\/+/g,"/").replace(":/","://")},formatFileSize:function(e){if(0===e)return"0 Bytes";var i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(2))+" "+["Bytes","KB","MB","GB"][i]},getDocumentTypeIcon:function(e){var t={pdf:"mdi-file-pdf-box",doc:"mdi-file-word-box",docx:"mdi-file-word-box",xls:"mdi-file-excel-box",xlsx:"mdi-file-excel-box",txt:"mdi-file-document-outline",default:"mdi-file-document"};return t[e.split(".").pop().toLowerCase()]||t.default},getDocumentTypeColor:function(e){var t={pdf:"red",doc:"blue",docx:"blue",xls:"green",xlsx:"green",txt:"grey",default:"primary"};return t[e.split(".").pop().toLowerCase()]||t.default},fetchDropdownData:function(){var e=this;return Object(S.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.fetchAgencies(),e.fetchCurrencies()]);case 2:case"end":return t.stop()}}),t)})))()},fetchAgencies:function(){var e=this;return Object(S.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingAgencies=!0,t.prev=1,t.next=4,e.$axios.$get("/api/agency");case 4:n=t.sent,console.info("AGENCY ".concat(JSON.stringify(n))),n.success&&n.data&&n.data.agencies?e.agencies=n.data.agencies:n.success&&Array.isArray(n.data)&&(e.agencies=n.data),console.log("Agencies loaded:",e.agencies),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.error("Error fetching agencies:",t.t0),e.$toast.error("ໂຫລດຂໍ້ມູນຕົວແທນບໍ່ສຳເລັດ");case 14:return t.prev=14,e.loadingAgencies=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,10,14,17]])})))()},fetchCurrencies:function(){var e=this;return Object(S.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingCurrencies=!0,t.prev=1,t.next=4,e.$axios.$get("/api/currency/find");case 4:n=t.sent,Array.isArray(n)?e.currencies=n:n.success&&n.data?e.currencies=n.data:n&&!n.success&&(e.currencies=n),console.log("Currencies loaded:",e.currencies),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error("Error fetching currencies:",t.t0),e.$toast.error("ໂຫລດຂໍ້ມູນສະກຸນເງິນບໍ່ສຳເລັດ");case 13:return t.prev=13,e.loadingCurrencies=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})))()},save:function(){var e=this;return Object(S.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=3;break}return e.$toast.error("ກະລຸນາແກ້ໄຂຂໍ້ຜິດພາດໃນແບບຟອມກ່ອນບັນທຶກ"),t.abrupt("return");case 3:if(e.saving=!0,t.prev=4,(n=F({},e.form)).pmCharge||(n.pmCharge=0),n.exchangeRate||(n.exchangeRate=1),n.numberOfWorkers||(n.numberOfWorkers=1),r=new FormData,Object.keys(n).forEach((function(e){"images"!==e&&"documents"!==e&&r.append(e,n[e])})),n.images.forEach((function(image,e){image.isNew&&image.file&&r.append("images",image.file)})),n.documents.forEach((function(e,t){e.isNew&&e.file&&r.append("documents",e.file)})),!e.isEditing){t.next=19;break}return t.next=16,e.$axios.$put("/api/mous/".concat(e.editingItem.id),r,{headers:{"Content-Type":"multipart/form-data"}});case 16:o=t.sent,t.next=22;break;case 19:return t.next=21,e.$axios.$post("/api/mous",r,{headers:{"Content-Type":"multipart/form-data"}});case 21:o=t.sent;case 22:o.success&&(e.$toast.success("MOU ".concat(e.isEditing?"ອັບເດດ":"ສ້າງ","ສຳເລັດແລ້ວ")),e.$emit("saved",o.data)),t.next=30;break;case 25:t.prev=25,t.t0=t.catch(4),console.error("Error saving MOU:",t.t0),d=(null===(l=t.t0.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.message)||"ເກີດຂໍ້ຜິດພາດໃນການບັນທຶກ",e.$toast.error(d);case 30:return t.prev=30,e.saving=!1,t.finish(30);case 33:case"end":return t.stop()}}),t,null,[[4,25,30,33]])})))()},cancel:function(){this.$emit("cancelled")},getStatusColor:function(e){return{draft:"grey",open:"blue",in_progress:"orange",completed:"green",cancelled:"red"}[e]||"grey"},getWorkerTypeColor:function(e){return{Man:"blue",Woman:"pink",Spous:"purple",Any:"green"}[e]||"grey"},getWorkerTypeIcon:function(e){return{Man:"mdi-account",Woman:"mdi-account-outline",Spous:"mdi-account-heart",Any:"mdi-account-group"}[e]||"mdi-account"}}},E=(n(1572),n(32)),component=Object(E.a)(U,(function(){var e,t=this,n=t._self._c;return n(v.a,{attrs:{value:t.value,fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition",scrollable:""},on:{input:function(e){return t.$emit("input",e)}}},[n(o.a,{staticClass:"maintenance-dialog"},[n(D.a,{staticClass:"dialog-toolbar",attrs:{color:"primary",dark:"",flat:""}},[n(r.a,{staticClass:"close-btn",attrs:{icon:""},on:{click:t.cancel}},[n(h.a,[t._v("mdi-close")])],1),t._v(" "),n(P.a,{staticClass:"toolbar-title"},[n(h.a,{staticClass:"mr-2",attrs:{left:""}},[t._v("mdi-file-document-edit")]),t._v("\n        "+t._s(t.isEditing?"ແກ້ໄຂ MOU":"ສ້າງ MOU ໃໝ່")+"\n      ")],1),t._v(" "),n(I.a),t._v(" "),n(r.a,{staticClass:"save-btn",attrs:{text:"",loading:t.saving,disabled:!t.isFormValid},on:{click:t.save}},[n(h.a,{attrs:{left:""}},[t._v("mdi-content-save")]),t._v("\n        ບັນທຶກ\n      ")],1)],1),t._v(" "),n(l.c,{staticClass:"dialog-content"},[n(f.a,{staticClass:"form-container",attrs:{fluid:""}},[n(x.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[n(C.a,[n(d.a,{attrs:{cols:"12"}},[n("div",{staticClass:"section-header"},[n(h.a,{staticClass:"section-icon",attrs:{color:"primary"}},[t._v("mdi-information")]),t._v(" "),n("h3",{staticClass:"section-title"},[t._v("ຂໍ້ມູນພື້ນຖານ")])],1)]),t._v(" "),n(d.a,{attrs:{cols:"12",sm:"6",md:"4"}},[n(j.a,{attrs:{label:"ລະຫັດວຽກ *",rules:[t.rules.required],outlined:"",dense:"","prepend-inner-icon":"mdi-identifier",disabled:t.isEditing,hint:"ລະຫັດງານເອກະລັກສຳລັບ MOU ນີ້","persistent-hint":""},model:{value:t.form.jobCode,callback:function(e){t.$set(t.form,"jobCode",e)},expression:"form.jobCode"}})],1),t._v(" "),n(d.a,{attrs:{cols:"12",sm:"6",md:"4"}},[n(j.a,{attrs:{label:"ເລກທີ MOU",outlined:"",dense:"","prepend-inner-icon":"mdi-file-document",hint:"ເລກທີເອກະສານ MOU ທາງການ","persistent-hint":""},model:{value:t.form.mouNumber,callback:function(e){t.$set(t.form,"mouNumber",e)},expression:"form.mouNumber"}})],1),t._v(" "),n(d.a,{attrs:{cols:"12",sm:"6",md:"4"}},[n(O.a,{attrs:{items:t.statusOptions,label:"ສະຖານະວຽກ *",rules:[t.rules.required],outlined:"",dense:"","prepend-inner-icon":"mdi-flag"},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item;return[n(c.a,{attrs:{color:t.getStatusColor(r.value),small:"","text-color":"white"}},[t._v("\n                    "+t._s(r.text)+"\n                  ")])]}},{key:"item",fn:function(e){var r=e.item;return[n(c.a,{staticClass:"mr-2",attrs:{color:t.getStatusColor(r.value),small:"","text-color":"white"}},[t._v("\n                    "+t._s(r.text)+"\n                  ")])]}}]),model:{value:t.form.jobStatus,callback:function(e){t.$set(t.form,"jobStatus",e)},expression:"form.jobStatus"}})],1),t._v(" "),n(d.a,{attrs:{cols:"12"}},[n(j.a,{attrs:{label:"ຫົວຂໍ້ວຽກ *",rules:[t.rules.required],outlined:"",dense:"","prepend-inner-icon":"mdi-briefcase",hint:"ລາຍລະອຽດຂອງຕຳແໜ່ງວຽກ","persistent-hint":""},model:{value:t.form.jobTitle,callback:function(e){t.$set(t.form,"jobTitle",e)},expression:"form.jobTitle"}})],1),t._v(" "),n(d.a,{staticClass:"pt-6",attrs:{cols:"12"}},[n("div",{staticClass:"section-header"},[n(h.a,{staticClass:"section-icon",attrs:{color:"primary"}},[t._v("mdi-domain")]),t._v(" "),n("h3",{staticClass:"section-title"},[t._v("ບໍລິສັດ & ສະຖານທີ່")])],1)]),t._v(" "),n(d.a,{attrs:{cols:"12",md:"6"}},[n(j.a,{attrs:{label:"ບໍລິສັດນາຍຈ້າງ",outlined:"",dense:"","prepend-inner-icon":"mdi-office-building",hint:"ຊື່ບໍລິສັດທີ່ຈ້າງງານ","persistent-hint":""},model:{value:t.form.employerCompany,callback:function(e){t.$set(t.form,"employerCompany",e)},expression:"form.employerCompany"}})],1),t._v(" "),n(d.a,{attrs:{cols:"12",md:"6"}},[n(j.a,{attrs:{label:"ສະຖານທີ່ເຮັດວຽກ",outlined:"",dense:"","prepend-inner-icon":"mdi-map-marker",hint:"ບ່ອນທີ່ຈະປະຕິບັດວຽກ","persistent-hint":""},model:{value:t.form.workLocation,callback:function(e){t.$set(t.form,"workLocation",e)},expression:"form.workLocation"}})],1),t._v(" "),n(d.a,{staticClass:"pt-6",attrs:{cols:"12"}},[n("div",{staticClass:"section-header"},[n(h.a,{staticClass:"section-icon",attrs:{color:"primary"}},[t._v("mdi-account-group")]),t._v(" "),n("h3",{staticClass:"section-title"},[t._v("ຂໍ້ມູນແຮງງານ")])],1)]),t._v(" "),n(d.a,{attrs:{cols:"12",sm:"6",md:"4"}},[n(j.a,{attrs:{label:"ຈຳນວນແຮງງານ *",rules:[t.rules.required,t.rules.positiveNumber],outlined:"",dense:"",type:"number",min:"1","prepend-inner-icon":"mdi-counter"},model:{value:t.form.numberOfWorkers,callback:function(e){t.$set(t.form,"numberOfWorkers",t._n(e))},expression:"form.numberOfWorkers"}})],1),t._v(" "),n(d.a,{attrs:{cols:"12",sm:"6",md:"4"}},[n(O.a,{attrs:{items:t.workerTypeOptions,label:"ປະເພດແຮງງານ *",rules:[t.rules.required],outlined:"",dense:"","prepend-inner-icon":"mdi-account"},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item;return[n(h.a,{staticClass:"mr-2",attrs:{small:"",color:t.getWorkerTypeColor(r.value)}},[t._v("\n                    "+t._s(t.getWorkerTypeIcon(r.value))+"\n                  ")]),t._v("\n                  "+t._s(r.text)+"\n                ")]}},{key:"item",fn:function(e){var r=e.item;return[n(h.a,{staticClass:"mr-3",attrs:{small:"",color:t.getWorkerTypeColor(r.value)}},[t._v("\n                    "+t._s(t.getWorkerTypeIcon(r.value))+"\n                  ")]),t._v("\n                  "+t._s(r.text)+"\n                ")]}}]),model:{value:t.form.workerType,callback:function(e){t.$set(t.form,"workerType",e)},expression:"form.workerType"}})],1),t._v(" "),n(d.a,{staticClass:"pt-6",attrs:{cols:"12"}},[n("div",{staticClass:"section-header"},[n(h.a,{staticClass:"section-icon",attrs:{color:"primary"}},[t._v("mdi-currency-usd")]),t._v(" "),n("h3",{staticClass:"section-title"},[t._v("ຂໍ້ມູນການເງິນ")])],1)]),t._v(" "),n(d.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(j.a,{attrs:{label:"ຄ່າບໍລິຫານ PM",outlined:"",dense:"",type:"number",min:"0",step:"0.01","prepend-inner-icon":"mdi-cash",suffix:(null===(e=t.selectedCurrency)||void 0===e?void 0:e.code)||"USD"},model:{value:t.form.pmCharge,callback:function(e){t.$set(t.form,"pmCharge",t._n(e))},expression:"form.pmCharge"}})],1),t._v(" "),n(d.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(j.a,{attrs:{label:"ອັດຕາແລກປ່ຽນ",outlined:"",dense:"",type:"number",min:"0",step:"0.001","prepend-inner-icon":"mdi-swap-horizontal",hint:"ຄ່າເລີ່ມຕົ້ນ: 1.0","persistent-hint":""},model:{value:t.form.exchangeRate,callback:function(e){t.$set(t.form,"exchangeRate",t._n(e))},expression:"form.exchangeRate"}})],1),t._v(" "),n(d.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(O.a,{attrs:{items:t.currencies,"item-text":"name","item-value":"id",label:"ສະກຸນເງິນ",outlined:"",dense:"","prepend-inner-icon":"mdi-currency-usd",loading:t.loadingCurrencies},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.item;return[t._v("\n                  "+t._s(n.code)+" - "+t._s(n.name)+"\n                ")]}},{key:"item",fn:function(e){var r=e.item;return[n("strong",[t._v(t._s(r.code))]),t._v(" - "+t._s(r.name)+"\n                ")]}}]),model:{value:t.form.currencyId,callback:function(e){t.$set(t.form,"currencyId",e)},expression:"form.currencyId"}})],1),t._v(" "),n(d.a,{staticClass:"pt-6",attrs:{cols:"12"}},[n("div",{staticClass:"section-header"},[n(h.a,{staticClass:"section-icon",attrs:{color:"primary"}},[t._v("mdi-account-tie")]),t._v(" "),n("h3",{staticClass:"section-title"},[t._v("ຂໍ້ມູນຕົວແທນ")])],1)]),t._v(" "),n(d.a,{attrs:{cols:"12",md:"6"}},[n(O.a,{attrs:{items:t.agencies,"item-text":"agencyName","item-value":"id",label:"ຕົວແທນ",outlined:"",dense:"","prepend-inner-icon":"mdi-domain",loading:t.loadingAgencies,clearable:""},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item;return[t._v("\n                  "+t._s(r.agencyName)+"\n                  "),n("small",{staticClass:"ml-2"},[t._v("("+t._s(r.agencyCode)+")")])]}},{key:"item",fn:function(e){var r=e.item;return[n("div",[n("div",{staticClass:"font-weight-medium"},[t._v("\n                      "+t._s(r.agencyName)+"\n                    ")]),t._v(" "),n("small",{staticClass:"text--secondary"},[t._v(t._s(r.agencyCode)+" - "+t._s(r.address))])])]}}]),model:{value:t.form.agencyId,callback:function(e){t.$set(t.form,"agencyId",e)},expression:"form.agencyId"}})],1),t._v(" "),n(d.a,{staticClass:"pt-6",attrs:{cols:"12"}},[n("div",{staticClass:"section-header"},[n(h.a,{staticClass:"section-icon",attrs:{color:"primary"}},[t._v("mdi-note-text")]),t._v(" "),n("h3",{staticClass:"section-title"},[t._v("ຂໍ້ມູນເພີ່ມເຕີມ")])],1)]),t._v(" "),n(d.a,{attrs:{cols:"12"}},[n($.a,{attrs:{label:"ໝາຍເຫດ",outlined:"",rows:"3","prepend-inner-icon":"mdi-note",hint:"ໝາຍເຫດ ຫຼື ຄຳອະທິບາຍເພີ່ມເຕີມກ່ຽວກັບ MOU ນີ້","persistent-hint":""},model:{value:t.form.notes,callback:function(e){t.$set(t.form,"notes",e)},expression:"form.notes"}})],1),t._v(" "),n(d.a,{staticClass:"pt-6",attrs:{cols:"12"}},[n("div",{staticClass:"section-header"},[n(h.a,{staticClass:"section-icon",attrs:{color:"primary"}},[t._v("mdi-image-multiple")]),t._v(" "),n("h3",{staticClass:"section-title"},[t._v("ຮູບພາບ")])],1)]),t._v(" "),n(d.a,{attrs:{cols:"12"}},[n(m.a,{ref:"imageInput",attrs:{label:"ເລືອກຮູບພາບ",multiple:"",accept:"image/*","prepend-icon":"mdi-camera",outlined:"",dense:"",clearable:!1,"show-size":"",disabled:t.processingFiles,hint:"ສາມາດເລືອກຮູບພາບໄດ້ຫຼາຍໄຟລ໌ (JPG, PNG, GIF, ຂະໜາດສູງສຸດ 5MB ຕໍ່ໄຟລ໌)","persistent-hint":""},on:{change:t.handleImageSelection},scopedSlots:t._u([{key:"selection",fn:function(e){e.text;return[n(c.a,{attrs:{small:"",label:"",color:"primary"}},[t._v("\n                    "+t._s(t.selectedImages?t.selectedImages.length:0)+" ຮູບພາບ\n                  ")])]}}]),model:{value:t.selectedImages,callback:function(e){t.selectedImages=e},expression:"selectedImages"}}),t._v(" "),t.processingFiles&&t.fileProgress.total>0?n(k.a,{staticClass:"mt-2",attrs:{value:t.fileProgress.current/t.fileProgress.total*100,color:"primary",height:"4"},scopedSlots:t._u([{key:"default",fn:function(){return[n("small",[t._v("ກຳລັງປະມວນຜົນ "+t._s(t.fileProgress.current)+" / "+t._s(t.fileProgress.total)+" ໄຟລ໌...")])]},proxy:!0}],null,!1,2510038093)}):t._e()],1),t._v(" "),t.form.images&&t.form.images.length>0?n(d.a,{attrs:{cols:"12"}},[n("div",{staticClass:"image-gallery"},[n(C.a,t._l(t.form.images,(function(image,e){return n(d.a,{key:"image-".concat(e),attrs:{cols:"6",sm:"4",md:"3",lg:"2"}},[n(o.a,{staticClass:"image-card",attrs:{elevation:"2"}},[n("div",{staticClass:"image-container"},[n(_.a,{staticClass:"image-preview",attrs:{src:image.preview||image.url,alt:image.name,"aspect-ratio":"1"},on:{click:function(n){return t.openImagePreview(image,e)}},scopedSlots:t._u([{key:"placeholder",fn:function(){return[n(C.a,{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n(w.a,{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),t._v(" "),n(y.a,{staticClass:"image-overlay",attrs:{absolute:""}},[n("div",{staticClass:"image-actions"},[n(r.a,{attrs:{icon:"",small:"",color:"white"},on:{click:function(n){return t.openImagePreview(image,e)}}},[n(h.a,[t._v("mdi-eye")])],1),t._v(" "),n(r.a,{attrs:{icon:"",small:"",color:"white"},on:{click:function(n){return t.removeImage(e)}}},[n(h.a,[t._v("mdi-delete")])],1)],1)])],1),t._v(" "),n(l.c,{staticClass:"pa-2"},[n("div",{staticClass:"text-caption text-truncate"},[t._v("\n                          "+t._s(image.name)+"\n                        ")]),t._v(" "),n("div",{staticClass:"text-caption text--secondary"},[t._v("\n                          "+t._s(t.formatFileSize(image.size))+"\n                        ")])])],1)],1)})),1)],1)]):t._e(),t._v(" "),n(d.a,{staticClass:"pt-6",attrs:{cols:"12"}},[n("div",{staticClass:"section-header"},[n(h.a,{staticClass:"section-icon",attrs:{color:"primary"}},[t._v("mdi-file-multiple")]),t._v(" "),n("h3",{staticClass:"section-title"},[t._v("ເອກະສານ")])],1)]),t._v(" "),n(d.a,{attrs:{cols:"12"}},[n(m.a,{ref:"documentInput",attrs:{label:"ເລືອກເອກະສານ",multiple:"",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt","prepend-icon":"mdi-file-document",outlined:"",dense:"",clearable:!1,"show-size":"",disabled:t.processingFiles,hint:"ສາມາດເລືອກເອກະສານໄດ້ຫຼາຍໄຟລ໌ (PDF, DOC, DOCX, XLS, XLSX, TXT, ຂະໜາດສູງສຸດ 10MB ຕໍ່ໄຟລ໌)","persistent-hint":""},on:{change:t.handleDocumentSelection},scopedSlots:t._u([{key:"selection",fn:function(e){e.text;return[n(c.a,{attrs:{small:"",label:"",color:"primary"}},[t._v("\n                    "+t._s(t.selectedDocuments?t.selectedDocuments.length:0)+" ເອກະສານ\n                  ")])]}}]),model:{value:t.selectedDocuments,callback:function(e){t.selectedDocuments=e},expression:"selectedDocuments"}})],1),t._v(" "),t.form.documents&&t.form.documents.length>0?n(d.a,{attrs:{cols:"12"}},[n("div",{staticClass:"documents-list"},[n(C.a,t._l(t.form.documents,(function(e,c){return n(d.a,{key:"doc-".concat(c),attrs:{cols:"12",sm:"6",md:"4"}},[n(o.a,{staticClass:"document-card",attrs:{elevation:"1"}},[n(l.c,{staticClass:"pa-3"},[n("div",{staticClass:"d-flex align-center"},[n(h.a,{staticClass:"mr-3",attrs:{large:"",color:t.getDocumentTypeColor(e.name)}},[t._v("\n                            "+t._s(t.getDocumentTypeIcon(e.name))+"\n                          ")]),t._v(" "),n("div",{staticClass:"flex-grow-1"},[n("div",{staticClass:"font-weight-medium text-truncate"},[t._v("\n                              "+t._s(e.name)+"\n                            ")]),t._v(" "),n("div",{staticClass:"text-caption text--secondary"},[t._v("\n                              "+t._s(t.formatFileSize(e.size))+"\n                            ")])]),t._v(" "),n("div",{staticClass:"document-actions"},[e.url&&t.isPdfFile(e.name)?n(r.a,{attrs:{icon:"",small:"",color:"green",title:"ເບິ່ງ PDF"},on:{click:function(n){return t.viewPdf(e)}}},[n(h.a,[t._v("mdi-eye")])],1):t._e(),t._v(" "),e.url?n(r.a,{attrs:{icon:"",small:"",color:"primary",title:"ດາວໂຫລດ"},on:{click:function(n){return t.downloadDocument(e)}}},[n(h.a,[t._v("mdi-download")])],1):t._e(),t._v(" "),n(r.a,{attrs:{icon:"",small:"",color:"red",title:"ລຶບ"},on:{click:function(e){return t.removeDocument(c)}}},[n(h.a,[t._v("mdi-delete")])],1)],1)],1)])],1)],1)})),1)],1)]):t._e()],1)],1)],1)],1),t._v(" "),n(l.a,{staticClass:"dialog-actions"},[n(f.a,{attrs:{fluid:""}},[n(C.a,{attrs:{justify:"end"}},[n(d.a,{attrs:{cols:"auto"}},[n(r.a,{staticClass:"mr-3",attrs:{text:"",large:""},on:{click:t.cancel}},[n(h.a,{attrs:{left:""}},[t._v("mdi-cancel")]),t._v("\n              ຍົກເລີກ\n            ")],1),t._v(" "),n(r.a,{attrs:{color:"primary",large:"",loading:t.saving,disabled:!t.isFormValid},on:{click:t.save}},[n(h.a,{attrs:{left:""}},[t._v("mdi-content-save")]),t._v("\n              "+t._s(t.isEditing?"ອັບເດດ MOU":"ສ້າງ MOU")+"\n            ")],1)],1)],1)],1)],1)],1),t._v(" "),n(v.a,{attrs:{"max-width":"90vw"},model:{value:t.imagePreviewDialog,callback:function(e){t.imagePreviewDialog=e},expression:"imagePreviewDialog"}},[t.previewImage?n(o.a,[n(l.d,{staticClass:"d-flex justify-space-between align-center"},[n("span",[t._v(t._s(t.previewImage.name))]),t._v(" "),n(r.a,{attrs:{icon:""},on:{click:function(e){t.imagePreviewDialog=!1}}},[n(h.a,[t._v("mdi-close")])],1)],1),t._v(" "),n(l.c,{staticClass:"pa-0"},[n(_.a,{attrs:{src:t.previewImage.preview||t.previewImage.url,contain:"","max-height":"70vh"}})],1),t._v(" "),n(l.a,[n(I.a),t._v(" "),t.previewImage.url?n(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){return t.downloadImage(t.previewImage)}}},[n(h.a,{attrs:{left:""}},[t._v("mdi-download")]),t._v("\n          ດາວໂຫລດ\n        ")],1):t._e(),t._v(" "),n(r.a,{attrs:{color:"red",text:""},on:{click:t.removeImageFromPreview}},[n(h.a,{attrs:{left:""}},[t._v("mdi-delete")]),t._v("\n          ລຶບ\n        ")],1)],1)],1):t._e()],1),t._v(" "),n(v.a,{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition",scrollable:""},model:{value:t.pdfViewerDialog,callback:function(e){t.pdfViewerDialog=e},expression:"pdfViewerDialog"}},[n(o.a,[n(D.a,{attrs:{dark:"",color:"primary"}},[n(r.a,{attrs:{icon:""},on:{click:function(e){t.pdfViewerDialog=!1}}},[n(h.a,[t._v("mdi-close")])],1),t._v(" "),n(P.a,[n(h.a,{attrs:{left:""}},[t._v("mdi-file-pdf-box")]),t._v("\n          "+t._s(t.currentPdfName)+"\n        ")],1),t._v(" "),n(I.a),t._v(" "),t.currentPdfUrl?n(r.a,{attrs:{text:""},on:{click:t.downloadCurrentPdf}},[n(h.a,{attrs:{left:""}},[t._v("mdi-download")]),t._v("\n          ດາວໂຫລດ\n        ")],1):t._e()],1),t._v(" "),n(l.c,{staticClass:"pa-0 pdf-viewer-content"},[n("div",{staticClass:"pdf-container"},[t.currentPdfUrl?n("iframe",{staticClass:"pdf-iframe",attrs:{src:t.currentPdfUrl+"#toolbar=1&navpanes=1&scrollbar=1",width:"100%",height:"100%",frameborder:"0"}},[n("p",[t._v("Your browser does not support iframes. Please download the PDF to view it.")])]):n("div",{staticClass:"pdf-loading"},[n(w.a,{attrs:{indeterminate:"",size:"64",color:"primary"}}),t._v(" "),n("p",{staticClass:"mt-4"},[t._v("ກຳລັງໂຫລດ PDF...")])],1),t._v(" "),t.pdfViewerDialog&&!t.currentPdfUrl?n("div",{staticClass:"pdf-error"},[n(h.a,{attrs:{size:"64",color:"error"}},[t._v("mdi-alert-circle")]),t._v(" "),n("p",{staticClass:"mt-4"},[t._v("ໂຫລດ PDF ບໍ່ສຳເລັດ")]),t._v(" "),n(r.a,{staticClass:"mt-2",attrs:{color:"primary"},on:{click:function(e){t.pdfViewerDialog=!1}}},[t._v("\n              ປິດ\n            ")])],1):t._e()])])],1)],1)],1)}),[],!1,null,"2a29f051",null);t.default=component.exports},208:function(e,t,n){"use strict";var r=n(113);t.a=r.a},802:function(e,t,n){var content=n(803);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("c54b7bb4",content,!0,{sourceMap:!1})},803:function(e,t,n){var r=n(15)((function(i){return i[1]}));r.push([e.i,".theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea{color:#fff}.theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::-moz-placeholder{color:hsla(0,0%,100%,.5)}.theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::placeholder{color:hsla(0,0%,100%,.5)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea{color:rgba(0,0,0,.87)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::-moz-placeholder{color:rgba(0,0,0,.38)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::placeholder{color:rgba(0,0,0,.38)}.v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{align-self:start;padding-top:2px}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__control textarea{caret-color:auto}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}",""]),r.locals={},e.exports=r},816:function(e,t,n){"use strict";n(10),n(7),n(9),n(5),n(12),n(8),n(13);var r=n(3),o=(n(22),n(62),n(802),n(113)),l=n(6);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var d=Object(l.a)(o.a);t.a=d.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},o.a.options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{autoGrow:function(e){var t=this;this.$nextTick((function(){var n;e?t.calculateInputHeight():null===(n=t.$refs.input)||void 0===n||n.style.removeProperty("height")}))},lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var input=this.$refs.input;if(input){input.style.height="0";var e=input.scrollHeight,t=parseInt(this.rows,10)*parseFloat(this.rowHeight);input.style.height=Math.max(t,e)+"px"}},genInput:function(){var input=o.a.options.methods.genInput.call(this);return input.tag="textarea",delete input.data.attrs.type,input.data.attrs.rows=this.rows,input},onInput:function(e){o.a.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},888:function(e,t,n){var content=n(889);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("735d40bc",content,!0,{sourceMap:!1})},889:function(e,t,n){var r=n(15)((function(i){return i[1]}));r.push([e.i,".theme--light.v-file-input .v-file-input__text{color:rgba(0,0,0,.87)}.theme--light.v-file-input .v-file-input__text--placeholder{color:rgba(0,0,0,.6)}.theme--light.v-file-input.v-input--is-disabled .v-file-input__text,.theme--light.v-file-input.v-input--is-disabled .v-file-input__text .v-file-input__text--placeholder{color:rgba(0,0,0,.38)}.theme--dark.v-file-input .v-file-input__text{color:#fff}.theme--dark.v-file-input .v-file-input__text--placeholder{color:hsla(0,0%,100%,.7)}.theme--dark.v-file-input.v-input--is-disabled .v-file-input__text,.theme--dark.v-file-input.v-input--is-disabled .v-file-input__text .v-file-input__text--placeholder{color:hsla(0,0%,100%,.5)}.v-file-input input[type=file]{left:0;max-width:0;opacity:0;pointer-events:none;position:absolute;width:0}.v-file-input .v-file-input__text{align-items:center;align-self:stretch;display:flex;flex-wrap:wrap;width:100%}.v-file-input .v-file-input__text.v-file-input__text--chips{flex-wrap:wrap}.v-file-input .v-file-input__text .v-chip{margin:4px}.v-file-input .v-text-field__slot{min-height:32px}.v-file-input.v-input--dense .v-text-field__slot{min-height:26px}.v-file-input.v-text-field--filled:not(.v-text-field--single-line) .v-file-input__text{padding-top:22px}.v-file-input.v-text-field--outlined .v-text-field__slot{padding:6px 0}.v-file-input.v-text-field--outlined.v-input--dense .v-text-field__slot{padding:3px 0}",""]),r.locals={},e.exports=r},954:function(e,t,n){"use strict";n(10),n(7),n(9),n(12),n(13);var r=n(33),o=n(3),l=n(27),c=(n(22),n(39),n(5),n(44),n(35),n(30),n(121),n(8),n(63),n(888),n(208)),d=n(318),f=n(1),v=n(14),m=n(46);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a=c.a.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:function(e){return"boolean"==typeof e||[1e3,1024].includes(e)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:function(e){return Object(f.I)(e).every((function(e){return null!=e&&"object"===Object(l.a)(e)}))}}},computed:{classes:function(){return h(h({},c.a.options.computed.classes.call(this)),{},{"v-file-input":!0})},computedCounterValue:function(){var e=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);var t=this.internalArrayValue.reduce((function(e,t){var n=t.size;return e+(void 0===n?0:n)}),0);return this.$vuetify.lang.t(this.counterSizeString,e,Object(f.w)(t,1024===this.base))},internalArrayValue:function(){return Object(f.I)(this.internalValue)},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty:function(){return this.internalArrayValue.length>0},isLabelActive:function(){return this.isDirty},text:function(){var e=this;return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((function(t){var n=t.name,r=void 0===n?"":n,o=t.size,l=void 0===o?0:o,c=e.truncateText(r);return e.showSize?"".concat(c," (").concat(Object(f.w)(l,1024===e.base),")"):c})):[this.placeholder]},base:function(){return"boolean"!=typeof this.showSize?this.showSize:void 0},hasChips:function(){return this.chips||this.smallChips}},watch:{readonly:{handler:function(e){!0===e&&Object(v.b)("readonly is not supported on <v-file-input>",this)},immediate:!0},value:function(e){var t=this.multiple?e:e?[e]:[];Object(f.k)(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback:function(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips:function(){var e=this;return this.isDirty?this.text.map((function(text,t){return e.$createElement(d.a,{props:{small:e.smallChips},on:{"click:close":function(){var n=e.internalValue;n.splice(t,1),e.internalValue=n}}},[text])})):[]},genControl:function(){var e=c.a.options.methods.genControl.call(this);return this.hideInput&&(e.data.style=Object(m.d)(e.data.style,{display:"none"})),e},genInput:function(){var input=c.a.options.methods.genInput.call(this);return input.data.attrs.multiple=this.multiple,delete input.data.domProps.value,delete input.data.on.input,input.data.on.change=this.onInput,[this.genSelections(),input]},genPrependSlot:function(){var e=this;if(!this.prependIcon)return null;var t=this.genIcon("prepend",(function(){e.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText:function(){var e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections:function(){var e=this,t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((function(n,r){e.$scopedSlots.selection&&t.push(e.$scopedSlots.selection({text:e.text[r],file:n,index:r}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot:function(){var e=this,t=c.a.options.methods.genTextFieldSlot.call(this);return t.data.on=h(h({},t.data.on||{}),{},{click:function(t){t.target&&"LABEL"===t.target.nodeName||e.$refs.input.click()}}),t},onInput:function(e){var t=Object(r.a)(e.target.files||[]);this.internalValue=this.multiple?t:t[0],this.initialValue=this.internalValue},onKeyDown:function(e){this.$emit("keydown",e)},truncateText:function(e){if(e.length<Number(this.truncateLength))return e;var t=Math.floor((Number(this.truncateLength)-1)/2);return"".concat(e.slice(0,t),"…").concat(e.slice(e.length-t))}}})}}]);