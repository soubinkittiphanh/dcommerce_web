(window.webpackJsonp=window.webpackJsonp||[]).push([[243],{1225:function(t,e,n){var content=n(1482);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("7fa75be9",content,!0,{sourceMap:!1})},1481:function(t,e,n){"use strict";n(1225)},1482:function(t,e,n){var c=n(15)((function(i){return i[1]}));c.push([t.i,'.tickets-listing-container[data-v-8fca29c8]{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;margin:0 auto;max-width:1400px;padding:20px}.page-header[data-v-8fca29c8]{align-items:center;border-bottom:2px solid #e9ecef;display:flex;justify-content:space-between;margin-bottom:30px;padding-bottom:20px}.page-header h1[data-v-8fca29c8]{color:#333;margin:0}.header-actions[data-v-8fca29c8]{align-items:center;display:flex;gap:15px}.search-filter[data-v-8fca29c8]{display:flex;gap:10px}.filter-select[data-v-8fca29c8],.search-input[data-v-8fca29c8]{border:1px solid #ddd;border-radius:5px;font-size:14px;padding:8px 12px}.search-input[data-v-8fca29c8]{width:200px}.date-input[data-v-8fca29c8]{border:1px solid #ddd;border-radius:5px;font-size:14px;padding:8px 12px;width:140px}.btn-refresh[data-v-8fca29c8]{align-items:center;background:#007bff;border:none;border-radius:5px;color:#fff;cursor:pointer;display:flex;gap:5px;padding:8px 16px}.refresh-icon[data-v-8fca29c8]{font-size:16px}.stats-summary[data-v-8fca29c8]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));margin-bottom:30px}.stat-card[data-v-8fca29c8]{background:#fff;border:1px solid #e9ecef;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1);padding:20px;text-align:center}.stat-number[data-v-8fca29c8]{color:#007bff;font-size:28px;font-weight:700;margin-bottom:5px}.stat-label[data-v-8fca29c8]{color:#6c757d;font-size:14px;letter-spacing:.5px;text-transform:uppercase}.error-state[data-v-8fca29c8],.loading-state[data-v-8fca29c8]{padding:60px 20px;text-align:center}.spinner[data-v-8fca29c8]{animation:spin-8fca29c8 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#007bff;height:40px;margin:0 auto 20px;width:40px}@keyframes spin-8fca29c8{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.error-state[data-v-8fca29c8]{color:#dc3545}.error-icon[data-v-8fca29c8]{font-size:48px;margin-bottom:20px}.retry-btn[data-v-8fca29c8]{background:#007bff;border:none;border-radius:5px;color:#fff;cursor:pointer;margin-top:20px;padding:10px 20px}.no-tickets[data-v-8fca29c8]{color:#6c757d;padding:60px 20px;text-align:center}.no-tickets-icon[data-v-8fca29c8]{font-size:64px;margin-bottom:20px}.tickets-grid[data-v-8fca29c8]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:repeat(auto-fill,minmax(400px,1fr))}.ticket-card[data-v-8fca29c8]{background:#fff;border:2px solid #e9ecef;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1);cursor:pointer;padding:20px;position:relative;transition:all .3s ease}.ticket-card[data-v-8fca29c8]:hover{box-shadow:0 8px 25px rgba(0,0,0,.15);transform:translateY(-2px)}.ticket-card.urgent[data-v-8fca29c8]{background:#fffbf0;border-color:#ffc107}.card-header[data-v-8fca29c8]{align-items:flex-start;display:flex;justify-content:space-between;margin-bottom:15px}.ticket-number[data-v-8fca29c8]{display:flex;flex-direction:column}.ticket-id[data-v-8fca29c8]{color:#333;font-size:18px;font-weight:700}.ticket-time[data-v-8fca29c8]{color:#6c757d;font-size:12px}.ticket-badges[data-v-8fca29c8]{align-items:flex-end;display:flex;flex-direction:column;gap:5px}.payment-badge[data-v-8fca29c8],.status-badge[data-v-8fca29c8]{border-radius:12px;font-size:10px;font-weight:600;letter-spacing:.5px;padding:4px 8px;text-transform:uppercase}.status-pending[data-v-8fca29c8]{background:#fff3cd;color:#856404}.status-preparing[data-v-8fca29c8]{background:#d1ecf1;color:#0c5460}.status-ready[data-v-8fca29c8]{background:#d4edda;color:#155724}.status-served[data-v-8fca29c8]{background:#e2e3e5;color:#383d41}.status-paid[data-v-8fca29c8]{background:#d1e7dd;color:#0f5132}.payment-pending[data-v-8fca29c8]{background:#fff3cd;color:#856404}.payment-paid[data-v-8fca29c8]{background:#d4edda;color:#155724}.payment-refunded[data-v-8fca29c8]{background:#f8d7da;color:#721c24}.card-info[data-v-8fca29c8]{margin-bottom:15px}.info-row[data-v-8fca29c8]{display:flex;justify-content:space-between;margin-bottom:8px}.info-label[data-v-8fca29c8]{color:#6c757d;font-size:14px}.info-value[data-v-8fca29c8]{color:#333;font-size:14px;font-weight:500}.card-summary[data-v-8fca29c8]{border-top:1px solid #e9ecef;margin-bottom:15px;padding-top:15px}.summary-total[data-v-8fca29c8]{align-items:center;display:flex;justify-content:space-between;margin-bottom:10px}.total-label[data-v-8fca29c8]{color:#333;font-weight:600}.total-amount[data-v-8fca29c8]{color:#28a745;font-size:18px;font-weight:700}.ticket-notes-preview[data-v-8fca29c8]{align-items:center;color:#6c757d;display:flex;font-size:12px;gap:5px}.notes-icon[data-v-8fca29c8]{font-size:14px}.notes-text[data-v-8fca29c8]{font-style:italic}.card-actions[data-v-8fca29c8]{display:flex;flex-wrap:wrap;gap:8px}.action-btn[data-v-8fca29c8]{border:none;border-radius:5px;cursor:pointer;font-size:12px;font-weight:500;padding:6px 12px;transition:all .2s}.btn-preparing[data-v-8fca29c8]{background:#17a2b8;color:#fff}.btn-ready[data-v-8fca29c8]{background:#28a745;color:#fff}.btn-served[data-v-8fca29c8]{background:#6f42c1;color:#fff}.btn-payment[data-v-8fca29c8]{background:#ffc107;color:#856404}.btn-print[data-v-8fca29c8]{background:#6c757d;color:#fff}.action-btn[data-v-8fca29c8]:hover{opacity:.8;transform:translateY(-1px)}.urgency-indicator[data-v-8fca29c8]{align-items:center;background:#ffc107;border-radius:12px;color:#856404;display:flex;font-size:10px;font-weight:600;gap:3px;padding:4px 8px;position:absolute;right:10px;top:10px}.urgency-icon[data-v-8fca29c8]{font-size:12px}.pagination[data-v-8fca29c8]{align-items:center;border-top:1px solid #e9ecef;display:flex;gap:20px;justify-content:center;margin-top:40px;padding-top:20px}.pagination-btn[data-v-8fca29c8]{background:#fff;border:1px solid #007bff;border-radius:5px;color:#007bff;cursor:pointer;padding:8px 16px}.pagination-btn[data-v-8fca29c8]:disabled{cursor:not-allowed;opacity:.5}.pagination-btn[data-v-8fca29c8]:hover:not(:disabled){background:#007bff;color:#fff}.pagination-info[data-v-8fca29c8]{color:#6c757d;font-size:14px}@media (max-width:768px){.page-header[data-v-8fca29c8]{align-items:stretch;flex-direction:column;gap:20px}.header-actions[data-v-8fca29c8]{gap:10px}.header-actions[data-v-8fca29c8],.search-filter[data-v-8fca29c8]{flex-direction:column}.search-input[data-v-8fca29c8]{width:100%}.stats-summary[data-v-8fca29c8]{grid-template-columns:repeat(2,1fr)}.tickets-grid[data-v-8fca29c8]{grid-template-columns:1fr}.card-actions[data-v-8fca29c8]{justify-content:center}}.dialog-overlay[data-v-8fca29c8]{align-items:center;background:rgba(0,0,0,.5);bottom:0;display:flex;justify-content:center;left:0;padding:20px;position:fixed;right:0;top:0;z-index:1000}.dialog-content[data-v-8fca29c8]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:800px;overflow-y:auto;width:100%}.dialog-header[data-v-8fca29c8]{align-items:center;background:#f8f9fa;border-bottom:1px solid #e9ecef;border-radius:12px 12px 0 0;display:flex;justify-content:space-between;padding:24px}.dialog-header h2[data-v-8fca29c8]{color:#333;font-size:24px;margin:0}.close-btn[data-v-8fca29c8]{align-items:center;background:none;border:none;border-radius:50%;color:#6c757d;cursor:pointer;display:flex;font-size:28px;height:32px;justify-content:center;padding:0;transition:all .2s;width:32px}.close-btn[data-v-8fca29c8]:hover{background:#e9ecef;color:#333}.dialog-body[data-v-8fca29c8]{padding:24px}.dialog-section[data-v-8fca29c8]{margin-bottom:32px}.dialog-section[data-v-8fca29c8]:last-child{margin-bottom:0}.section-header[data-v-8fca29c8]{align-items:center;display:flex;justify-content:space-between;margin-bottom:16px}.dialog-section h3[data-v-8fca29c8]{border-bottom:1px solid #dee2e6;color:#495057;font-size:18px;margin:0 0 16px;padding-bottom:8px}.ticket-status-badges[data-v-8fca29c8]{display:flex;gap:8px}.info-grid[data-v-8fca29c8]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}.info-item[data-v-8fca29c8]{background:#f8f9fa;border-radius:6px;font-size:14px;padding:12px}.info-item strong[data-v-8fca29c8]{color:#495057;margin-right:8px}.items-table[data-v-8fca29c8]{border:1px solid #dee2e6;border-radius:8px;overflow:hidden}.table-header[data-v-8fca29c8]{background:#f8f9fa;border-bottom:1px solid #dee2e6;color:#495057;font-weight:600}.table-header[data-v-8fca29c8],.table-row[data-v-8fca29c8]{grid-gap:16px;display:grid;gap:16px;grid-template-columns:2fr 80px 100px 100px;padding:16px}.table-row[data-v-8fca29c8]{align-items:center;border-bottom:1px solid #f1f3f4}.table-row[data-v-8fca29c8]:last-child{border-bottom:none}.col-item[data-v-8fca29c8]{display:flex;flex-direction:column}.item-name[data-v-8fca29c8]{font-weight:500;margin-bottom:4px}.item-notes[data-v-8fca29c8]{color:#6c757d;font-size:12px}.col-price[data-v-8fca29c8],.col-qty[data-v-8fca29c8],.col-total[data-v-8fca29c8]{font-weight:500;text-align:right}.no-items[data-v-8fca29c8]{color:#6c757d;font-style:italic;padding:40px;text-align:center}.summary-table[data-v-8fca29c8]{background:#f8f9fa;border-radius:8px;padding:20px}.summary-row[data-v-8fca29c8]{border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:8px 0}.summary-row[data-v-8fca29c8]:last-child{border-bottom:none}.total-row[data-v-8fca29c8]{border-top:2px solid #dee2e6;color:#333;font-size:18px;margin-top:8px;padding-top:16px}.notes-content[data-v-8fca29c8]{background:#fff3cd;border-left:4px solid #ffc107;border-radius:8px;color:#856404;font-style:italic;padding:16px}.dialog-footer[data-v-8fca29c8]{background:#f8f9fa;border-radius:0 0 12px 12px;border-top:1px solid #e9ecef;padding:24px}.dialog-actions[data-v-8fca29c8]{display:flex;flex-wrap:wrap;gap:12px;justify-content:flex-end}.dialog-btn[data-v-8fca29c8]{border:none;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;padding:10px 20px;transition:all .2s}.dialog-btn.btn-preparing[data-v-8fca29c8]{background:#17a2b8;color:#fff}.dialog-btn.btn-ready[data-v-8fca29c8]{background:#28a745;color:#fff}.dialog-btn.btn-served[data-v-8fca29c8]{background:#6f42c1;color:#fff}.dialog-btn.btn-payment[data-v-8fca29c8]{background:#ffc107;color:#856404}.dialog-btn.btn-close[data-v-8fca29c8],.dialog-btn.btn-print[data-v-8fca29c8]{background:#6c757d;color:#fff}.dialog-btn[data-v-8fca29c8]:hover{opacity:.9;transform:translateY(-1px)}@media (max-width:768px){.dialog-overlay[data-v-8fca29c8]{padding:10px}.dialog-content[data-v-8fca29c8]{max-height:95vh}.dialog-body[data-v-8fca29c8],.dialog-footer[data-v-8fca29c8],.dialog-header[data-v-8fca29c8]{padding:16px}.info-grid[data-v-8fca29c8],.table-header[data-v-8fca29c8],.table-row[data-v-8fca29c8]{grid-template-columns:1fr}.table-header[data-v-8fca29c8],.table-row[data-v-8fca29c8]{gap:8px}.table-header[data-v-8fca29c8]{display:none}.table-row[data-v-8fca29c8]{display:block;padding:16px}.col-price[data-v-8fca29c8],.col-qty[data-v-8fca29c8],.col-total[data-v-8fca29c8]{margin-top:4px;text-align:left}.col-qty[data-v-8fca29c8]:before{content:"Qty: ";font-weight:600}.col-price[data-v-8fca29c8]:before{content:"Price: ";font-weight:600}.col-total[data-v-8fca29c8]:before{content:"Total: ";font-weight:600}.dialog-actions[data-v-8fca29c8]{flex-direction:column}.dialog-btn[data-v-8fca29c8]{width:100%}}.print-dialog-content[data-v-8fca29c8]{background:#fff;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.3);max-height:90vh;max-width:600px;overflow-y:auto;width:100%}.print-dialog-header[data-v-8fca29c8]{align-items:center;background:#f8f9fa;border-bottom:1px solid #e9ecef;border-radius:12px 12px 0 0;display:flex;justify-content:space-between;padding:20px 24px}.print-dialog-header h2[data-v-8fca29c8]{color:#333;font-size:20px;margin:0}.print-preview[data-v-8fca29c8]{background:#fff;color:#000;font-family:"Courier New",monospace;font-size:13px;line-height:1.4;padding:24px}.print-header[data-v-8fca29c8]{margin-bottom:20px;text-align:center}.restaurant-name[data-v-8fca29c8]{color:#333;font-size:24px;font-weight:700;margin:0 0 8px}.restaurant-address[data-v-8fca29c8]{color:#666;font-size:14px;line-height:1.3;margin:0}.print-ticket-info[data-v-8fca29c8]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:1fr 1fr;margin-bottom:15px}.detail-row[data-v-8fca29c8]{display:flex;font-size:13px;justify-content:space-between;margin-bottom:4px}.detail-label[data-v-8fca29c8]{color:#333;font-weight:700}.detail-value[data-v-8fca29c8]{color:#000}.print-divider[data-v-8fca29c8]{border-top:2px dashed #333;margin:20px 0}.print-items[data-v-8fca29c8]{margin-bottom:20px}.section-title[data-v-8fca29c8]{color:#333;font-size:16px;font-weight:700;margin:0 0 15px;text-align:center}.print-item[data-v-8fca29c8]{border-bottom:1px dotted #ccc;margin-bottom:12px;padding-bottom:8px}.print-item[data-v-8fca29c8]:last-child{border-bottom:none}.item-line[data-v-8fca29c8]{margin-bottom:4px}.item-main[data-v-8fca29c8]{display:flex;font-weight:700;justify-content:space-between;margin-bottom:2px}.item-name[data-v-8fca29c8]{color:#333}.item-price[data-v-8fca29c8]{color:#000}.item-details[data-v-8fca29c8]{color:#666;display:flex;font-size:12px;justify-content:space-between;margin-left:15px}.item-total[data-v-8fca29c8]{color:#000;font-weight:700}.item-notes[data-v-8fca29c8]{color:#888;font-size:11px;font-style:italic;margin-left:15px;margin-top:4px}.no-items-print[data-v-8fca29c8]{color:#666;font-style:italic;padding:20px;text-align:center}.print-summary[data-v-8fca29c8]{margin:20px 0}.summary-line[data-v-8fca29c8]{display:flex;font-size:14px;justify-content:space-between;margin-bottom:4px}.summary-label[data-v-8fca29c8]{color:#333}.summary-value[data-v-8fca29c8]{color:#000;font-weight:700}.total-line[data-v-8fca29c8]{border-top:2px solid #333;font-size:18px;font-weight:700;margin-top:12px;padding-top:8px}.total-line .summary-label[data-v-8fca29c8],.total-line .summary-value[data-v-8fca29c8]{color:#000}.print-payment[data-v-8fca29c8]{margin:20px 0}.payment-status[data-v-8fca29c8]{display:flex;font-size:14px;font-weight:700;justify-content:space-between;margin-bottom:8px}.payment-label[data-v-8fca29c8]{color:#333}.payment-value.payment-pending[data-v-8fca29c8]{color:#856404}.payment-value.payment-paid[data-v-8fca29c8]{color:#155724}.payment-value.payment-refunded[data-v-8fca29c8]{color:#721c24}.payment-details[data-v-8fca29c8]{color:#666;font-size:12px}.payment-info[data-v-8fca29c8]{display:flex;flex-direction:column;gap:4px}.print-notes[data-v-8fca29c8]{margin:20px 0}.print-notes h4[data-v-8fca29c8]{color:#333;font-size:14px;font-weight:700;margin:0 0 8px}.print-notes p[data-v-8fca29c8]{background:#f8f9fa;border-left:4px solid #ffc107;border-radius:4px;color:#000;font-size:13px;margin:0;padding:10px}.print-footer[data-v-8fca29c8]{margin-top:30px;text-align:center}.thank-you[data-v-8fca29c8]{color:#333;font-size:16px;font-weight:700;margin:15px 0 10px}.print-time[data-v-8fca29c8]{color:#888;font-size:11px;margin:0}.print-dialog-actions[data-v-8fca29c8]{background:#f8f9fa;border-radius:0 0 12px 12px;border-top:1px solid #e9ecef;display:flex;gap:12px;justify-content:flex-end;padding:20px 24px}.print-btn[data-v-8fca29c8]{align-items:center;border:none;border-radius:6px;cursor:pointer;display:flex;font-size:14px;font-weight:500;gap:8px;padding:12px 24px;transition:all .2s}.print-primary[data-v-8fca29c8]{background:#007bff;color:#fff}.print-secondary[data-v-8fca29c8]{background:#6c757d;color:#fff}.print-btn[data-v-8fca29c8]:hover{opacity:.9;transform:translateY(-1px)}@media (max-width:768px){.print-dialog-content[data-v-8fca29c8]{margin:10px;max-height:95vh}.print-preview[data-v-8fca29c8]{font-size:12px;padding:16px}.print-ticket-info[data-v-8fca29c8]{gap:10px;grid-template-columns:1fr}.restaurant-name[data-v-8fca29c8]{font-size:20px}.section-title[data-v-8fca29c8]{font-size:14px}.total-line[data-v-8fca29c8]{font-size:16px}.print-dialog-actions[data-v-8fca29c8]{flex-direction:column}.print-btn[data-v-8fca29c8]{justify-content:center;width:100%}}',""]),c.locals={},t.exports=c},1732:function(t,e,n){"use strict";n.r(e);n(44),n(9),n(5),n(34),n(10),n(7),n(11),n(8),n(12);var c=n(3),o=n(20);n(92),n(39),n(51),n(68),n(66),n(30),n(63);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={name:"TicketsListing",data:function(){return{tickets:[],loading:!0,error:null,searchQuery:"",statusFilter:"",paymentFilter:"",startDate:"",endDate:"",showDialog:!1,selectedTicket:null,showPrintDialog:!1,printTicket:null,pagination:{currentPage:1,totalPages:1,limit:20},refreshInterval:null}},computed:{filteredTickets:function(){var t=this,e=this.tickets;if(this.searchQuery){var n=this.searchQuery.toLowerCase();e=e.filter((function(t){var e,c,o,r,d,l;return t.id.toString().includes(n)||(null===(e=t.client)||void 0===e||null===(c=e.name)||void 0===c?void 0:c.toLowerCase().includes(n))||(null===(o=t.table)||void 0===o||null===(r=o.number)||void 0===r?void 0:r.toString().includes(n))||(null===(d=t.table)||void 0===d||null===(l=d.name)||void 0===l?void 0:l.toLowerCase().includes(n))}))}return this.statusFilter&&(e=e.filter((function(e){return e.status===t.statusFilter}))),this.paymentFilter&&(e=e.filter((function(e){return e.paymentStatus===t.paymentFilter}))),e},hasActiveFilters:function(){return this.searchQuery||this.statusFilter||this.paymentFilter||this.startDate||this.endDate},stats:function(){return{total:this.tickets.length,pending:this.tickets.filter((function(t){return"pending"===t.status})).length,preparing:this.tickets.filter((function(t){return"preparing"===t.status})).length,ready:this.tickets.filter((function(t){return"ready"===t.status})).length,unpaid:this.tickets.filter((function(t){return"pending"===t.paymentStatus})).length}}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTickets();case 2:t.startAutoRefresh();case 3:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.stopAutoRefresh()},methods:{fetchTickets:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,c,o,r,l,v,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,e.prev=2,n={page:t.pagination.currentPage,limit:t.pagination.limit,include:"client,table,ticketLines",sort:"createdAt:desc"},t.statusFilter&&(n.status=t.statusFilter),t.paymentFilter&&(n.paymentStatus=t.paymentFilter),t.startDate&&(n.startDate=t.startDate),t.endDate&&(n.endDate=t.endDate),console.log("Fetching tickets with params:",n),e.next=11,t.$axios.get("/api/ticket/find",{params:n});case 11:c=e.sent,console.log("API Response:",c.data),t.tickets=c.data.tickets||c.data.data||c.data||[],c.data.pagination?t.pagination=d(d({},t.pagination),{},{totalPages:c.data.pagination.totalPages||c.data.pagination.pages||1,currentPage:c.data.pagination.currentPage||c.data.pagination.page||1}):t.pagination=d(d({},t.pagination),{},{totalPages:c.data.totalPages||1,currentPage:c.data.currentPage||1}),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),console.error("Error fetching tickets:",e.t0),console.error("Error details:",null===(o=e.t0.response)||void 0===o?void 0:o.data),t.error=(null===(r=e.t0.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||(null===(v=e.t0.response)||void 0===v||null===(f=v.data)||void 0===f?void 0:f.error)||e.t0.message||"Failed to load tickets";case 22:return e.prev=22,t.loading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[2,17,22,25]])})))()},refreshTickets:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTickets();case 2:null===(n=t.$toast)||void 0===n||n.success("Tickets refreshed");case 3:case"end":return e.stop()}}),e)})))()},changePage:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t>=1&&t<=e.pagination.totalPages)){n.next=4;break}return e.pagination.currentPage=t,n.next=4,e.fetchTickets();case 4:case"end":return n.stop()}}),n)})))()},updateTicketStatus:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function c(){var o,r,d;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,n.$axios.patch("/api/tickets/".concat(t),{status:e});case 3:(r=n.tickets.find((function(e){return e.id===t})))&&(r.status=e,r.updateTimestamp=new Date),null===(o=n.$toast)||void 0===o||o.success("Ticket #".concat(t," status updated to ").concat(n.formatStatus(e))),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(0),console.error("Error updating status:",c.t0),null===(d=n.$toast)||void 0===d||d.error("Failed to update ticket status");case 12:case"end":return c.stop()}}),c,null,[[0,8]])})))()},processPayment:function(t){this.$router.push("/tickets/".concat(t,"/payment"))},viewTicket:function(t){this.$router.push("/tickets/".concat(t))},viewTicketInDialog:function(t){this.selectedTicket=t,this.showDialog=!0},closeDialog:function(){this.showDialog=!1,this.selectedTicket=null},updateTicketStatusFromDialog:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var c,o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.selectedTicket){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,e.$axios.patch("/api/tickets/".concat(e.selectedTicket.id),{status:t});case 5:e.selectedTicket.status=t,e.selectedTicket.updateTimestamp=new Date,(o=e.tickets.find((function(t){return t.id===e.selectedTicket.id})))&&(o.status=t,o.updateTimestamp=new Date),null===(c=e.$toast)||void 0===c||c.success("Ticket #".concat(e.selectedTicket.id," status updated to ").concat(e.formatStatus(t))),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(2),console.error("Error updating status:",n.t0),null===(r=e.$toast)||void 0===r||r.error("Failed to update ticket status");case 16:case"end":return n.stop()}}),n,null,[[2,12]])})))()},processPaymentFromDialog:function(){this.selectedTicket&&(this.closeDialog(),this.$router.push("/tickets/".concat(this.selectedTicket.id,"/payment")))},printTicketFromDialog:function(){this.selectedTicket&&this.openPrintDialogFromDetail()},printTicket:function(t){var e=this.tickets.find((function(e){return e.id===t}));e&&this.openPrintDialog(e)},openPrintDialog:function(t){this.printTicket=t,this.showPrintDialog=!0},openPrintDialogFromDetail:function(){this.selectedTicket&&(this.printTicket=this.selectedTicket,this.showPrintDialog=!0)},closePrintDialog:function(){this.showPrintDialog=!1,this.printTicket=null},printNow:function(){var t=document.querySelector(".print-preview").innerHTML,e=window.open("","_blank");e.document.write("\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Ticket #".concat(this.printTicket.id,"</title>\n          <style>\n            body {\n              font-family: 'Courier New', monospace;\n              font-size: 12px;\n              line-height: 1.4;\n              margin: 0;\n              padding: 20px;\n              color: #000;\n            }\n            .print-header {\n              text-align: center;\n              margin-bottom: 20px;\n            }\n            .restaurant-name {\n              font-size: 18px;\n              font-weight: bold;\n              margin: 0 0 8px 0;\n            }\n            .restaurant-address {\n              font-size: 11px;\n              margin: 0;\n              line-height: 1.3;\n            }\n            .print-ticket-info {\n              margin-bottom: 15px;\n            }\n            .detail-row {\n              display: flex;\n              justify-content: space-between;\n              margin-bottom: 3px;\n            }\n            .detail-label {\n              font-weight: bold;\n            }\n            .print-divider {\n              border-top: 1px dashed #000;\n              margin: 15px 0;\n            }\n            .section-title {\n              font-size: 14px;\n              font-weight: bold;\n              margin: 0 0 10px 0;\n              text-align: center;\n            }\n            .print-item {\n              margin-bottom: 8px;\n            }\n            .item-line {\n              margin-bottom: 2px;\n            }\n            .item-main {\n              display: flex;\n              justify-content: space-between;\n              font-weight: bold;\n            }\n            .item-details {\n              display: flex;\n              justify-content: space-between;\n              font-size: 11px;\n              margin-left: 10px;\n            }\n            .item-notes {\n              font-size: 10px;\n              font-style: italic;\n              margin-left: 10px;\n              color: #666;\n            }\n            .print-summary {\n              margin: 15px 0;\n            }\n            .summary-line {\n              display: flex;\n              justify-content: space-between;\n              margin-bottom: 3px;\n            }\n            .total-line {\n              font-weight: bold;\n              font-size: 14px;\n              border-top: 1px solid #000;\n              padding-top: 5px;\n              margin-top: 8px;\n            }\n            .print-payment {\n              margin: 15px 0;\n            }\n            .payment-status {\n              display: flex;\n              justify-content: space-between;\n              font-weight: bold;\n            }\n            .payment-details {\n              font-size: 11px;\n              margin-top: 5px;\n            }\n            .payment-info {\n              display: flex;\n              flex-direction: column;\n              gap: 2px;\n            }\n            .print-notes {\n              margin: 15px 0;\n            }\n            .print-notes h4 {\n              font-size: 12px;\n              margin: 0 0 5px 0;\n            }\n            .print-notes p {\n              margin: 0;\n              font-size: 11px;\n            }\n            .print-footer {\n              text-align: center;\n              margin-top: 20px;\n            }\n            .thank-you {\n              font-weight: bold;\n              margin: 10px 0 5px 0;\n            }\n            .print-time {\n              font-size: 10px;\n              margin: 0;\n              color: #666;\n            }\n            .payment-pending { color: #856404; }\n            .payment-paid { color: #155724; }\n            .payment-refunded { color: #721c24; }\n            @media print {\n              body { margin: 0; padding: 10px; }\n            }\n          </style>\n        </head>\n        <body>\n          ").concat(t,"\n        </body>\n        </html>\n      ")),e.document.close(),e.focus(),setTimeout((function(){e.print(),e.close()}),250),this.closePrintDialog()},startAutoRefresh:function(){var t=this;this.refreshInterval=setInterval((function(){t.fetchTickets()}),3e4)},stopAutoRefresh:function(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)},formatTime:function(t){return t?new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"},formatDate:function(t){return t?new Date(t).toLocaleString():"N/A"},formatPrintDate:function(t){return t?new Date(t).toLocaleDateString():"N/A"},formatPrintTime:function(t){return t?new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"},formatPrintDateTime:function(t){return t?new Date(t).toLocaleString():"N/A"},formatPrice:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(t||0));return e?"".concat(n," ₭"):n},formatStatus:function(t){return{pending:"Pending",preparing:"Preparing",ready:"Ready",served:"Served",paid:"Paid"}[t]||t},formatPaymentStatus:function(t){return{pending:"Unpaid",paid:"Paid",refunded:"Refunded"}[t]||t},truncateNotes:function(t){return t?t.length>50?t.substring(0,50)+"...":t:""},isUrgent:function(t){var e=(new Date-new Date(t.createdAt))/6e4;return"preparing"===t.status&&e>15||"ready"===t.status&&e>5},getUrgencyReason:function(t){var e=new Date,n=new Date(t.createdAt),c=Math.floor((e-n)/6e4);return"preparing"===t.status?"Preparing for ".concat(c," minutes"):"ready"===t.status?"Ready for ".concat(c," minutes"):""}}},v=l,f=(n(1481),n(32)),component=Object(f.a)(v,(function(){var t,e,n,c,o,r,d,l,v,f,m,x,_,h=this,y=h._self._c;return y("div",{staticClass:"tickets-listing-container"},[y("div",{staticClass:"page-header"},[y("h1",[h._v("Tickets Management")]),h._v(" "),y("div",{staticClass:"header-actions"},[y("div",{staticClass:"search-filter"},[y("input",{directives:[{name:"model",rawName:"v-model",value:h.searchQuery,expression:"searchQuery"}],staticClass:"search-input",attrs:{type:"text",placeholder:"Search tickets..."},domProps:{value:h.searchQuery},on:{input:function(t){t.target.composing||(h.searchQuery=t.target.value)}}}),h._v(" "),y("select",{directives:[{name:"model",rawName:"v-model",value:h.statusFilter,expression:"statusFilter"}],staticClass:"filter-select",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));h.statusFilter=t.target.multiple?e:e[0]}}},[y("option",{attrs:{value:""}},[h._v("All Status")]),h._v(" "),y("option",{attrs:{value:"pending"}},[h._v("Pending")]),h._v(" "),y("option",{attrs:{value:"preparing"}},[h._v("Preparing")]),h._v(" "),y("option",{attrs:{value:"ready"}},[h._v("Ready")]),h._v(" "),y("option",{attrs:{value:"served"}},[h._v("Served")]),h._v(" "),y("option",{attrs:{value:"paid"}},[h._v("Paid")])]),h._v(" "),y("select",{directives:[{name:"model",rawName:"v-model",value:h.paymentFilter,expression:"paymentFilter"}],staticClass:"filter-select",on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));h.paymentFilter=t.target.multiple?e:e[0]}}},[y("option",{attrs:{value:""}},[h._v("All Payments")]),h._v(" "),y("option",{attrs:{value:"pending"}},[h._v("Payment Pending")]),h._v(" "),y("option",{attrs:{value:"paid"}},[h._v("Paid")]),h._v(" "),y("option",{attrs:{value:"refunded"}},[h._v("Refunded")])]),h._v(" "),y("input",{directives:[{name:"model",rawName:"v-model",value:h.startDate,expression:"startDate"}],staticClass:"date-input",attrs:{type:"date",placeholder:"Start Date"},domProps:{value:h.startDate},on:{input:function(t){t.target.composing||(h.startDate=t.target.value)}}}),h._v(" "),y("input",{directives:[{name:"model",rawName:"v-model",value:h.endDate,expression:"endDate"}],staticClass:"date-input",attrs:{type:"date",placeholder:"End Date"},domProps:{value:h.endDate},on:{input:function(t){t.target.composing||(h.endDate=t.target.value)}}})]),h._v(" "),y("button",{staticClass:"btn btn-refresh",on:{click:h.refreshTickets}},[y("span",{staticClass:"refresh-icon"},[h._v("↻")]),h._v(" Refresh\n      ")])])]),h._v(" "),y("div",{staticClass:"stats-summary"},[y("div",{staticClass:"stat-card"},[y("div",{staticClass:"stat-number"},[h._v(h._s(h.stats.total))]),h._v(" "),y("div",{staticClass:"stat-label"},[h._v("Total Tickets")])]),h._v(" "),y("div",{staticClass:"stat-card"},[y("div",{staticClass:"stat-number"},[h._v(h._s(h.stats.pending))]),h._v(" "),y("div",{staticClass:"stat-label"},[h._v("Pending")])]),h._v(" "),y("div",{staticClass:"stat-card"},[y("div",{staticClass:"stat-number"},[h._v(h._s(h.stats.preparing))]),h._v(" "),y("div",{staticClass:"stat-label"},[h._v("Preparing")])]),h._v(" "),y("div",{staticClass:"stat-card"},[y("div",{staticClass:"stat-number"},[h._v(h._s(h.stats.ready))]),h._v(" "),y("div",{staticClass:"stat-label"},[h._v("Ready")])]),h._v(" "),y("div",{staticClass:"stat-card"},[y("div",{staticClass:"stat-number"},[h._v(h._s(h.stats.unpaid))]),h._v(" "),y("div",{staticClass:"stat-label"},[h._v("Unpaid")])])]),h._v(" "),h.loading?y("div",{staticClass:"loading-state"},[y("div",{staticClass:"spinner"}),h._v(" "),y("p",[h._v("Loading tickets...")])]):h.error?y("div",{staticClass:"error-state"},[y("div",{staticClass:"error-icon"},[h._v("⚠️")]),h._v(" "),y("h3",[h._v("Error Loading Tickets")]),h._v(" "),y("p",[h._v(h._s(h.error))]),h._v(" "),y("button",{staticClass:"retry-btn",on:{click:h.fetchTickets}},[h._v("Try Again")])]):y("div",{staticClass:"tickets-list"},[0===h.filteredTickets.length?y("div",{staticClass:"no-tickets"},[y("div",{staticClass:"no-tickets-icon"},[h._v("🎫")]),h._v(" "),y("h3",[h._v("No tickets found")]),h._v(" "),h.hasActiveFilters?y("p",[h._v("Try adjusting your filters")]):y("p",[h._v("No tickets available")])]):y("div",{staticClass:"tickets-grid"},h._l(h.filteredTickets,(function(t){var e,n,c,o;return y("div",{key:t.id,staticClass:"ticket-card",class:{urgent:h.isUrgent(t)},on:{click:function(e){return h.viewTicketInDialog(t)}}},[y("div",{staticClass:"card-header"},[y("div",{staticClass:"ticket-number"},[y("span",{staticClass:"ticket-id"},[h._v("#"+h._s(t.id))]),h._v(" "),y("span",{staticClass:"ticket-time"},[h._v(h._s(h.formatTime(t.createdAt)))])]),h._v(" "),y("div",{staticClass:"ticket-badges"},[y("span",{class:["status-badge","status-".concat(t.status)]},[h._v("\n              "+h._s(h.formatStatus(t.status))+"\n            ")]),h._v(" "),y("span",{class:["payment-badge","payment-".concat(t.paymentStatus)]},[h._v("\n              "+h._s(h.formatPaymentStatus(t.paymentStatus))+"\n            ")])])]),h._v(" "),y("div",{staticClass:"card-info"},[y("div",{staticClass:"info-row"},[y("span",{staticClass:"info-label"},[h._v("Customer:")]),h._v(" "),y("span",{staticClass:"info-value"},[h._v(h._s((null===(e=t.client)||void 0===e?void 0:e.name)||"Walk-in"))])]),h._v(" "),y("div",{staticClass:"info-row"},[y("span",{staticClass:"info-label"},[h._v("Table:")]),h._v(" "),y("span",{staticClass:"info-value"},[h._v(h._s((null===(n=t.table)||void 0===n?void 0:n.number)||(null===(c=t.table)||void 0===c?void 0:c.name)||"N/A"))])]),h._v(" "),y("div",{staticClass:"info-row"},[y("span",{staticClass:"info-label"},[h._v("Items:")]),h._v(" "),y("span",{staticClass:"info-value"},[h._v(h._s((null===(o=t.ticketLines)||void 0===o?void 0:o.length)||0)+" items")])])]),h._v(" "),y("div",{staticClass:"card-summary"},[y("div",{staticClass:"summary-total"},[y("span",{staticClass:"total-label"},[h._v("Total:")]),h._v(" "),y("span",{staticClass:"total-amount"},[h._v("$"+h._s(h.formatPrice(t.total)))])]),h._v(" "),t.notes?y("div",{staticClass:"ticket-notes-preview"},[y("span",{staticClass:"notes-icon"},[h._v("📝")]),h._v(" "),y("span",{staticClass:"notes-text"},[h._v(h._s(h.truncateNotes(t.notes)))])]):h._e()]),h._v(" "),y("div",{staticClass:"card-actions",on:{click:function(t){t.stopPropagation()}}},["pending"===t.status?y("button",{staticClass:"action-btn btn-preparing",on:{click:function(e){return h.updateTicketStatus(t.id,"preparing")}}},[h._v("\n            Start Prep\n          ")]):h._e(),h._v(" "),"preparing"===t.status?y("button",{staticClass:"action-btn btn-ready",on:{click:function(e){return h.updateTicketStatus(t.id,"ready")}}},[h._v("\n            Mark Ready\n          ")]):h._e(),h._v(" "),"ready"===t.status?y("button",{staticClass:"action-btn btn-served",on:{click:function(e){return h.updateTicketStatus(t.id,"served")}}},[h._v("\n            Mark Served\n          ")]):h._e(),h._v(" "),"served"===t.status&&"pending"===t.paymentStatus?y("button",{staticClass:"action-btn btn-payment",on:{click:function(e){return h.processPayment(t.id)}}},[h._v("\n            Process Payment\n          ")]):h._e(),h._v(" "),y("button",{staticClass:"action-btn btn-print",on:{click:function(e){return h.openPrintDialog(t)}}},[h._v("\n            Print\n          ")])]),h._v(" "),h.isUrgent(t)?y("div",{staticClass:"urgency-indicator"},[y("span",{staticClass:"urgency-icon"},[h._v("⚠️")]),h._v(" "),y("span",{staticClass:"urgency-text"},[h._v(h._s(h.getUrgencyReason(t)))])]):h._e()])})),0)]),h._v(" "),h.pagination.totalPages>1?y("div",{staticClass:"pagination"},[y("button",{staticClass:"pagination-btn",attrs:{disabled:1===h.pagination.currentPage},on:{click:function(t){return h.changePage(h.pagination.currentPage-1)}}},[h._v("\n      Previous\n    ")]),h._v(" "),y("span",{staticClass:"pagination-info"},[h._v("\n      Page "+h._s(h.pagination.currentPage)+" of "+h._s(h.pagination.totalPages)+"\n    ")]),h._v(" "),y("button",{staticClass:"pagination-btn",attrs:{disabled:h.pagination.currentPage===h.pagination.totalPages},on:{click:function(t){return h.changePage(h.pagination.currentPage+1)}}},[h._v("\n      Next\n    ")])]):h._e(),h._v(" "),h.showDialog?y("div",{staticClass:"dialog-overlay",on:{click:h.closeDialog}},[y("div",{staticClass:"dialog-content",on:{click:function(t){t.stopPropagation()}}},[y("div",{staticClass:"dialog-header"},[y("h2",[h._v("Ticket #"+h._s(null===(t=h.selectedTicket)||void 0===t?void 0:t.id)+" Details")]),h._v(" "),y("button",{staticClass:"close-btn",on:{click:h.closeDialog}},[h._v("×")])]),h._v(" "),h.selectedTicket?y("div",{staticClass:"dialog-body"},[y("div",{staticClass:"dialog-section"},[y("div",{staticClass:"section-header"},[y("h3",[h._v("Ticket Information")]),h._v(" "),y("div",{staticClass:"ticket-status-badges"},[y("span",{class:["status-badge","status-".concat(h.selectedTicket.status)]},[h._v("\n                "+h._s(h.formatStatus(h.selectedTicket.status))+"\n              ")]),h._v(" "),y("span",{class:["payment-badge","payment-".concat(h.selectedTicket.paymentStatus)]},[h._v("\n                "+h._s(h.formatPaymentStatus(h.selectedTicket.paymentStatus))+"\n              ")])])]),h._v(" "),y("div",{staticClass:"info-grid"},[y("div",{staticClass:"info-item"},[y("strong",[h._v("Created:")]),h._v(" "+h._s(h.formatDate(h.selectedTicket.createdAt))+"\n            ")]),h._v(" "),y("div",{staticClass:"info-item"},[y("strong",[h._v("Last Updated:")]),h._v(" "+h._s(h.formatDate(h.selectedTicket.updateTimestamp))+"\n            ")]),h._v(" "),y("div",{staticClass:"info-item"},[y("strong",[h._v("Customer:")]),h._v(" "+h._s((null===(e=h.selectedTicket.client)||void 0===e?void 0:e.name)||"Walk-in")+"\n            ")]),h._v(" "),y("div",{staticClass:"info-item"},[y("strong",[h._v("Table:")]),h._v(" "+h._s((null===(n=h.selectedTicket.table)||void 0===n?void 0:n.number)||(null===(c=h.selectedTicket.table)||void 0===c?void 0:c.name)||"N/A")+"\n            ")])])]),h._v(" "),h.selectedTicket.client?y("div",{staticClass:"dialog-section"},[y("h3",[h._v("Customer Details")]),h._v(" "),y("div",{staticClass:"info-grid"},[y("div",{staticClass:"info-item"},[y("strong",[h._v("Name:")]),h._v(" "+h._s(h.selectedTicket.client.name)+"\n            ")]),h._v(" "),h.selectedTicket.client.email?y("div",{staticClass:"info-item"},[y("strong",[h._v("Email:")]),h._v(" "+h._s(h.selectedTicket.client.email)+"\n            ")]):h._e(),h._v(" "),h.selectedTicket.client.phone?y("div",{staticClass:"info-item"},[y("strong",[h._v("Phone:")]),h._v(" "+h._s(h.selectedTicket.client.phone)+"\n            ")]):h._e()])]):h._e(),h._v(" "),y("div",{staticClass:"dialog-section"},[y("h3",[h._v("Order Items")]),h._v(" "),h.selectedTicket.ticketLines&&h.selectedTicket.ticketLines.length>0?y("div",{staticClass:"items-table"},[h._m(0),h._v(" "),h._l(h.selectedTicket.ticketLines,(function(line){return y("div",{key:line.id,staticClass:"table-row"},[y("div",{staticClass:"col-item"},[y("div",{staticClass:"item-name"},[h._v(h._s(line.product.pro_name||"Unknown Item"))]),h._v(" "),line.notes?y("div",{staticClass:"item-notes"},[h._v(h._s(line.notes))]):h._e()]),h._v(" "),y("div",{staticClass:"col-qty"},[h._v(h._s(line.quantity))]),h._v(" "),y("div",{staticClass:"col-price"},[h._v("$"+h._s(h.formatPrice(line.unitPrice)))]),h._v(" "),y("div",{staticClass:"col-total"},[h._v("$"+h._s(h.formatPrice(line.total||line.quantity*line.unitPrice)))])])}))],2):y("div",{staticClass:"no-items"},[y("p",[h._v("No items in this order")])])]),h._v(" "),y("div",{staticClass:"dialog-section"},[y("h3",[h._v("Order Summary")]),h._v(" "),y("div",{staticClass:"summary-table"},[y("div",{staticClass:"summary-row"},[y("span",[h._v("Subtotal:")]),h._v(" "),y("span",[h._v("$"+h._s(h.formatPrice(h.selectedTicket.subtotal)))])]),h._v(" "),y("div",{staticClass:"summary-row"},[y("span",[h._v("Tax:")]),h._v(" "),y("span",[h._v("$"+h._s(h.formatPrice(h.selectedTicket.tax)))])]),h._v(" "),y("div",{staticClass:"summary-row total-row"},[h._m(1),h._v(" "),y("span",[y("strong",[h._v("$"+h._s(h.formatPrice(h.selectedTicket.total)))])])])])]),h._v(" "),h.selectedTicket.payment?y("div",{staticClass:"dialog-section"},[y("h3",[h._v("Payment Information")]),h._v(" "),y("div",{staticClass:"info-grid"},[y("div",{staticClass:"info-item"},[y("strong",[h._v("Method:")]),h._v(" "+h._s(h.selectedTicket.payment.method||"N/A")+"\n            ")]),h._v(" "),y("div",{staticClass:"info-item"},[y("strong",[h._v("Amount:")]),h._v(" $"+h._s(h.formatPrice(h.selectedTicket.payment.amount))+"\n            ")]),h._v(" "),y("div",{staticClass:"info-item"},[y("strong",[h._v("Status:")]),h._v(" "+h._s(h.formatPaymentStatus(h.selectedTicket.paymentStatus))+"\n            ")]),h._v(" "),h.selectedTicket.payment.transactionId?y("div",{staticClass:"info-item"},[y("strong",[h._v("Transaction ID:")]),h._v(" "+h._s(h.selectedTicket.payment.transactionId)+"\n            ")]):h._e()])]):h._e(),h._v(" "),h.selectedTicket.notes?y("div",{staticClass:"dialog-section"},[y("h3",[h._v("Notes")]),h._v(" "),y("div",{staticClass:"notes-content"},[h._v("\n            "+h._s(h.selectedTicket.notes)+"\n          ")])]):h._e()]):h._e(),h._v(" "),y("div",{staticClass:"dialog-footer"},[y("div",{staticClass:"dialog-actions"},["pending"===(null===(o=h.selectedTicket)||void 0===o?void 0:o.status)?y("button",{staticClass:"dialog-btn btn-preparing",on:{click:function(t){return h.updateTicketStatusFromDialog("preparing")}}},[h._v("\n            Start Preparing\n          ")]):h._e(),h._v(" "),"preparing"===(null===(r=h.selectedTicket)||void 0===r?void 0:r.status)?y("button",{staticClass:"dialog-btn btn-ready",on:{click:function(t){return h.updateTicketStatusFromDialog("ready")}}},[h._v("\n            Mark Ready\n          ")]):h._e(),h._v(" "),"ready"===(null===(d=h.selectedTicket)||void 0===d?void 0:d.status)?y("button",{staticClass:"dialog-btn btn-served",on:{click:function(t){return h.updateTicketStatusFromDialog("served")}}},[h._v("\n            Mark Served\n          ")]):h._e(),h._v(" "),"served"===(null===(l=h.selectedTicket)||void 0===l?void 0:l.status)&&"pending"===(null===(v=h.selectedTicket)||void 0===v?void 0:v.paymentStatus)?y("button",{staticClass:"dialog-btn btn-payment",on:{click:h.processPaymentFromDialog}},[h._v("\n            Process Payment\n          ")]):h._e(),h._v(" "),y("button",{staticClass:"dialog-btn btn-print",on:{click:h.openPrintDialogFromDetail}},[h._v("\n            Print Ticket\n          ")]),h._v(" "),y("button",{staticClass:"dialog-btn btn-close",on:{click:h.closeDialog}},[h._v("\n            Close\n          ")])])])])]):h._e(),h._v(" "),h.showPrintDialog?y("div",{staticClass:"dialog-overlay",on:{click:h.closePrintDialog}},[y("div",{staticClass:"print-dialog-content",on:{click:function(t){t.stopPropagation()}}},[y("div",{staticClass:"print-dialog-header"},[y("h2",[h._v("Print Ticket")]),h._v(" "),y("button",{staticClass:"close-btn",on:{click:h.closePrintDialog}},[h._v("×")])]),h._v(" "),h.printTicket?y("div",{staticClass:"print-preview"},[h._m(2),h._v(" "),y("div",{staticClass:"print-ticket-info"},[y("div",{staticClass:"ticket-details"},[y("div",{staticClass:"detail-row"},[y("span",{staticClass:"detail-label"},[h._v("Ticket #:")]),h._v(" "),y("span",{staticClass:"detail-value"},[h._v(h._s(h.printTicket.id))])]),h._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"detail-label"},[h._v("Date:")]),h._v(" "),y("span",{staticClass:"detail-value"},[h._v(h._s(h.formatPrintDate(h.printTicket.createdAt)))])]),h._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"detail-label"},[h._v("Time:")]),h._v(" "),y("span",{staticClass:"detail-value"},[h._v(h._s(h.formatPrintTime(h.printTicket.createdAt)))])]),h._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"detail-label"},[h._v("Status:")]),h._v(" "),y("span",{staticClass:"detail-value"},[h._v(h._s(h.formatStatus(h.printTicket.status)))])])]),h._v(" "),y("div",{staticClass:"customer-table-info"},[y("div",{staticClass:"detail-row"},[y("span",{staticClass:"detail-label"},[h._v("Customer:")]),h._v(" "),y("span",{staticClass:"detail-value"},[h._v(h._s((null===(f=h.printTicket.client)||void 0===f?void 0:f.name)||"Walk-in Customer"))])]),h._v(" "),y("div",{staticClass:"detail-row"},[y("span",{staticClass:"detail-label"},[h._v("Table:")]),h._v(" "),y("span",{staticClass:"detail-value"},[h._v(h._s((null===(m=h.printTicket.table)||void 0===m?void 0:m.number)||(null===(x=h.printTicket.table)||void 0===x?void 0:x.name)||"N/A"))])]),h._v(" "),null!==(_=h.printTicket.client)&&void 0!==_&&_.phone?y("div",{staticClass:"detail-row"},[y("span",{staticClass:"detail-label"},[h._v("Phone:")]),h._v(" "),y("span",{staticClass:"detail-value"},[h._v(h._s(h.printTicket.client.phone))])]):h._e()])]),h._v(" "),y("div",{staticClass:"print-divider"}),h._v(" "),y("div",{staticClass:"print-items"},[y("h3",{staticClass:"section-title"},[h._v("ORDER ITEMS")]),h._v(" "),h.printTicket.ticketLines&&h.printTicket.ticketLines.length>0?y("div",h._l(h.printTicket.ticketLines,(function(line){return y("div",{key:line.id,staticClass:"print-item"},[y("div",{staticClass:"item-line"},[y("div",{staticClass:"item-main"},[y("span",{staticClass:"item-name"},[h._v(h._s(line.product.pro_name||"Unknown Item"))]),h._v(" "),y("span",{staticClass:"item-price"},[h._v("$"+h._s(h.formatPrice(line.unitPrice)))])]),h._v(" "),y("div",{staticClass:"item-details"},[y("span",{staticClass:"item-qty"},[h._v("Qty: "+h._s(line.quantity))]),h._v(" "),y("span",{staticClass:"item-total"},[h._v("$"+h._s(h.formatPrice(line.total||line.quantity*line.unitPrice)))])])]),h._v(" "),line.notes?y("div",{staticClass:"item-notes"},[h._v("\n                Note: "+h._s(line.notes)+"\n              ")]):h._e()])})),0):y("div",{staticClass:"no-items-print"},[y("p",[h._v("No items in this order")])])]),h._v(" "),y("div",{staticClass:"print-divider"}),h._v(" "),y("div",{staticClass:"print-summary"},[y("div",{staticClass:"summary-line"},[y("span",{staticClass:"summary-label"},[h._v("Subtotal:")]),h._v(" "),y("span",{staticClass:"summary-value"},[h._v("$"+h._s(h.formatPrice(h.printTicket.subtotal)))])]),h._v(" "),y("div",{staticClass:"summary-line"},[y("span",{staticClass:"summary-label"},[h._v("Tax:")]),h._v(" "),y("span",{staticClass:"summary-value"},[h._v("$"+h._s(h.formatPrice(h.printTicket.tax)))])]),h._v(" "),y("div",{staticClass:"summary-line total-line"},[y("span",{staticClass:"summary-label"},[h._v("TOTAL:")]),h._v(" "),y("span",{staticClass:"summary-value"},[h._v("$"+h._s(h.formatPrice(h.printTicket.total)))])])]),h._v(" "),y("div",{staticClass:"print-payment"},[y("div",{staticClass:"payment-status"},[y("span",{staticClass:"payment-label"},[h._v("Payment Status:")]),h._v(" "),y("span",{staticClass:"payment-value",class:"payment-".concat(h.printTicket.paymentStatus)},[h._v("\n              "+h._s(h.formatPaymentStatus(h.printTicket.paymentStatus))+"\n            ")])]),h._v(" "),h.printTicket.payment&&"paid"===h.printTicket.paymentStatus?y("div",{staticClass:"payment-details"},[y("div",{staticClass:"payment-info"},[y("span",[h._v("Method: "+h._s(h.printTicket.payment.method||"N/A"))]),h._v(" "),h.printTicket.payment.transactionId?y("span",[h._v("\n                Transaction: "+h._s(h.printTicket.payment.transactionId)+"\n              ")]):h._e()])]):h._e()]),h._v(" "),h.printTicket.notes?y("div",{staticClass:"print-notes"},[y("div",{staticClass:"print-divider"}),h._v(" "),y("h4",[h._v("NOTES:")]),h._v(" "),y("p",[h._v(h._s(h.printTicket.notes))])]):h._e(),h._v(" "),y("div",{staticClass:"print-footer"},[y("div",{staticClass:"print-divider"}),h._v(" "),y("p",{staticClass:"thank-you"},[h._v("Thank you for your visit!")]),h._v(" "),y("p",{staticClass:"print-time"},[h._v("Printed: "+h._s(h.formatPrintDateTime(new Date)))])])]):h._e(),h._v(" "),y("div",{staticClass:"print-dialog-actions"},[y("button",{staticClass:"print-btn print-primary",on:{click:h.printNow}},[h._v("\n          🖨️ Print\n        ")]),h._v(" "),y("button",{staticClass:"print-btn print-secondary",on:{click:h.closePrintDialog}},[h._v("\n          Cancel\n        ")])])])]):h._e()])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-header"},[e("div",{staticClass:"col-item"},[t._v("Item")]),t._v(" "),e("div",{staticClass:"col-qty"},[t._v("Qty")]),t._v(" "),e("div",{staticClass:"col-price"},[t._v("Price")]),t._v(" "),e("div",{staticClass:"col-total"},[t._v("Total")])])},function(){var t=this._self._c;return t("span",[t("strong",[this._v("Total:")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"print-header"},[e("div",{staticClass:"restaurant-info"},[e("h1",{staticClass:"restaurant-name"},[t._v("Restaurant Name")]),t._v(" "),e("p",{staticClass:"restaurant-address"},[t._v("123 Main Street"),e("br"),t._v("City, State 12345"),e("br"),t._v("Phone: (555) 123-4567")])])])}],!1,null,"8fca29c8",null);e.default=component.exports}}]);