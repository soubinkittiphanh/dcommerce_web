(window.webpackJsonp=window.webpackJsonp||[]).push([[148,75],{1311:function(e,t,n){"use strict";n.r(t);var r=n(316),o=n(313),l=n(18),c=n(779),d=n(758),_=n(785),f=n(65),m=n(781),x=n(113),h=n(20),v=(n(92),n(22),n(44),{props:{userId:{type:Number,requiret:!0,default:0},cusBalance:{type:Number,requiret:!0,default:0}},data:function(){return{loaddata:[],isloading:!1,valid:!0,message:null,dialogMessage:!1,form_data:{txn_his_id:1e3,txn_id:1e3,txn_type:1004,txn_his_amount:1e4,user_id:this.userId,user_balance:this.cusBalance,txn_his_inputter:this.$store.getters.loggedInUser.id,txn_his_date:"2021-09-25 00:00:00"},rule:{idRules:[function(e){return!!e||"ໄອດີ is required"}],nameRules:[function(e){return!!e||"ຊຶ່ is required"}],amountRules:[function(e){return!!e||"ກລນ ໃສ່ຈຳນວນ is required"}],passRules:[function(e){return!!e||"ລະຫັດຜ່ານ is required"},function(e){return e.length<=10||"ລະຫັດຜ່ານ ຈຳກັດແຕ່ 10"}],walletRules:[function(e){return!!e||"ວົງເງິນ is required"}],txnRule:[function(e){return!!e||"ກະລຸນາເລືອກ ລາຍການທຸລະກຳ is required"}]}}},created:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:case"end":return t.stop()}}),t)})))()},watch:{userId:function(e){this.form_data.user_id=e},message:function(e){this.dialogMessage=null!=e}},methods:{selectChange:function(e){console.log("SELECT: "+e),this.form_data.txn_id=e},submitDatas:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,header;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isloading=!0,console.log("submitOut"),e.$refs.form.validate()){t.next=5;break}return e.isloading=!1,t.abrupt("return");case 5:if(console.log("submitIn"),n=e.form_data.user_balance,r=e.form_data.txn_his_amount,o=e.$store.getters.loggedInUser.token,1006!==e.form_data.txn_id){t.next=15;break}if(!(r>n)){t.next=15;break}return e.isloading=!1,e.message="ຍອດເງິນໃນບັນຊີ ບໍ່ພຽງພໍ",console.log("Biger"),t.abrupt("return");case 15:if(l="/txn_his_",header={headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}},!e.isedit){t.next=23;break}return t.next=20,e.$axios.put(l+"e",e.form_data,header).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 20:e.isloading=!1,t.next=26;break;case 23:return t.next=25,e.$axios.post(l+"i",e.form_data,header).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 25:e.isloading=!1;case 26:e.fetchData();case 27:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("txn_f").then((function(t){e.loaddata=t.data.map((function(e){return console.log(e.txn_id),{txn_id:e.txn_id,txn_type:e.txn_type,txn_name:e.txn_name,txn_amount:e.txn_amount,txn_user_id:e.txn_user_id,txn_inputter:e.txn_inputter,txn_date:e.txn_date,function:e.txn_id}}))})).catch((function(t){e.message=t,console.log("Error: "+t)}));case 2:case"end":return t.stop()}}),t)})))()},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},formatNum:function(e){return(new Intl.NumberFormat).format(e)}}}),k=n(32),component=Object(k.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(d.a,{attrs:{"max-width":"300px",persistent:""},model:{value:e.dialogMessage,callback:function(t){e.dialogMessage=t},expression:"dialogMessage"}},[t("dialog-classic-message",{attrs:{message:e.message},on:{closedialog:function(t){e.message=null}}})],1),e._v(" "),t(d.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[t("loading-indicator")],1),e._v(" "),t(o.a,[t(l.d,[e._v("\n      ຈັດການ Wallet "+e._s(e.form_data.user_id||"null")+" balance:\n      "+e._s(e.form_data.user_balance))]),e._v(" "),t(c.a,[t(_.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(x.a,{attrs:{counter:10,rules:e.rule.idRules,label:"ໄອດີ",required:"",disabled:""},model:{value:e.form_data.user_id,callback:function(t){e.$set(e.form_data,"user_id",t)},expression:"form_data.user_id"}}),e._v(" "),t(f.a,{attrs:{items:e.loaddata,"item-value":function(e){return e.txn_id},"item-text":function(e){return e.txn_id+" - "+e.txn_name},"append-outer-icon":"mdi-map","menu-props":"auto","hide-details":"",label:"ເລືອກທຸລະກຳ","single-line":"",rules:e.rule.txnRule},on:{change:e.selectChange},model:{value:e.form_data.txn_type,callback:function(t){e.$set(e.form_data,"txn_type",t)},expression:"form_data.txn_type"}}),e._v(" "),t(x.a,{attrs:{counter:10,rules:e.rule.amountRules,label:"ຈຳນວນເງິນ: "+e.formatNum(e.form_data.txn_his_amount),required:""},model:{value:e.form_data.txn_his_amount,callback:function(t){e.$set(e.form_data,"txn_his_amount",t)},expression:"form_data.txn_his_amount"}})],1),e._v("\n      "+e._s(e.userId)+"\n      "),e._t("default")],2),e._v(" "),t(l.a,[t(m.a),e._v(" "),t(r.a,{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" ລ້າງຂໍ້ມູນ ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.$emit("closewallet")}}},[e._v("\n        ປິດ\n      ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.submitDatas}},[e._v(" ບັນທຶກ ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{DialogClassicMessage:n(812).default,LoadingIndicator:n(248).default})},812:function(e,t,n){"use strict";n.r(t);var r=n(316),o=n(313),l=n(18),c=n(312),d=n(781),_={props:{message:{type:String,default:""}},methods:{toggleDialog:function(){this.$emit("closedialog")}}},f=n(32),component=Object(f.a)(_,(function(){var e=this,t=e._self._c;return t(o.a,[t(l.d,{staticClass:"text-h5 grey lighten-2"},[e._v(" ຂໍ້ຄວາມ ")]),e._v(" "),t(l.c,[e._v("\n    "+e._s(e.message)+"\n  ")]),e._v(" "),t(c.a),e._v(" "),t(l.a,[t(d.a),e._v(" "),t(r.a,{attrs:{color:"primary",text:""},on:{click:e.toggleDialog}},[e._v(" ຕົກລົງ ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);