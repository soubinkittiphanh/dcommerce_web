(window.webpackJsonp=window.webpackJsonp||[]).push([[259],{1240:function(t,e,r){var content=r(1514);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("ad794f2e",content,!0,{sourceMap:!1})},1513:function(t,e,r){"use strict";r(1240)},1514:function(t,e,r){var o=r(15)((function(i){return i[1]}));o.push([t.i,".v-data-table[data-v-c3dc263c] .v-data-table__wrapper{overflow-x:auto}.v-chip.font-weight-bold[data-v-c3dc263c]{font-weight:600!important}.text-h6.mb-3[data-v-c3dc263c]{border-bottom:2px solid #e0e0e0;padding-bottom:8px}.v-text-field[data-v-c3dc263c] .v-input__prepend-inner,.v-textarea[data-v-c3dc263c] .v-input__prepend-inner{margin-top:8px}.v-dialog>.v-card>.v-card__title[data-v-c3dc263c]{position:sticky;top:0;z-index:1}.v-card.outlined[data-v-c3dc263c]{transition:all .3s ease}.v-card.outlined[data-v-c3dc263c]:hover{box-shadow:0 4px 8px rgba(0,0,0,.12)!important;transform:translateY(-2px)}.v-data-table[data-v-c3dc263c] tbody tr:hover{background-color:#f5f5f5!important}.v-btn.v-size--small[data-v-c3dc263c]{min-width:32px!important}.v-card.outlined.grey.lighten-5[data-v-c3dc263c]{border:2px dashed #e0e0e0!important}@media (max-width:768px){.d-flex.align-center[data-v-c3dc263c]{align-items:stretch!important;flex-direction:column}.d-flex.align-center>*[data-v-c3dc263c]{margin-bottom:8px!important}.v-data-table[data-v-c3dc263c] .v-data-table__wrapper{font-size:.875rem}}.v-progress-circular[data-v-c3dc263c]{margin:1rem}.error--text[data-v-c3dc263c]{color:#f44336!important}.success--text[data-v-c3dc263c]{color:#4caf50!important}.v-dialog .v-card[data-v-c3dc263c]{max-height:90vh;overflow-y:auto}.v-dialog .v-card[data-v-c3dc263c]::-webkit-scrollbar{width:6px}.v-dialog .v-card[data-v-c3dc263c]::-webkit-scrollbar-track{background:#f1f1f1}.v-dialog .v-card[data-v-c3dc263c]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.v-dialog .v-card[data-v-c3dc263c]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}",""]),o.locals={},t.exports=o},1797:function(t,e,r){"use strict";r.r(e);var o=r(866),n=r(316),c=r(313),l=r(18),d=r(317),f=r(784),v=r(779),m=r(793),x=r(1718),h=r(758),_=r(785),D=r(167),w=r(318),y=r(251),k=r(783),T=r(65),C=r(962),R=r(781),F=r(868),A=r(113),S=r(815),P=r(985),O=(r(35),r(7),r(67),r(9),r(12),r(13),r(3)),j=r(20),E=(r(92),r(34),r(5),r(8),r(10),r(54),r(53),r(75),r(102),r(44),r(30),r(340),r(943));function N(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function M(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?N(Object(source),!0).forEach((function(e){Object(O.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):N(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var $={name:"TaxSummaryScreen",head:function(){return{title:"Tax Rate Management"}},data:function(){var t=this;return{taxRates:[],loading:!0,tableLoading:!1,error:null,searchQuery:"",statusFilter:"",filterDate:(new Date).toISOString().split("T")[0],dateMenu:!1,currentPage:1,itemsPerPage:10,totalItems:0,stats:{totalRates:0,activeRates:0,activeRatesCount:0,expiringRates:0,defaultRate:null},showTaxDialog:!1,showConfirmDialog:!1,editingTaxRate:null,formValid:!1,saving:!1,formData:{name:"",code:"",rate:"",description:"",effectiveFrom:(new Date).toISOString().split("T")[0],effectiveTo:"",isActive:!0,isDefault:!1},effectiveFromMenu:!1,effectiveToMenu:!1,displayPercentage:"0.00%",snackbar:{show:!1,message:"",color:"success",icon:"mdi-check",timeout:4e3},confirmDialog:{title:"",message:"",details:"",color:"primary",icon:"mdi-help",alertType:"info",cancelText:"Cancel",confirmText:"Confirm",confirmIcon:"mdi-check",onConfirm:function(){},onCancel:function(){t.showConfirmDialog=!1},loading:!1},headers:[{text:"Name",value:"name",sortable:!0},{text:"Code",value:"code",sortable:!0},{text:"Rate",value:"displayRate",sortable:!1},{text:"Status",value:"isActive",sortable:!0},{text:"Effective Period",value:"effectiveFrom",sortable:!0},{text:"Valid",value:"isValidForDate",sortable:!1},{text:"Actions",value:"actions",sortable:!1,width:"180px"}],statusOptions:[{text:"All",value:""},{text:"Active",value:"active"},{text:"Inactive",value:"inactive"}]}},computed:{debouncedSearch:function(){return Object(E.debounce)(this.loadTaxRates,500)},rules:function(){var t=this;return{required:function(t){return!!t||"This field is required"},code:function(t){return t?t.length<2?"Code must be at least 2 characters":t.length>20?"Code must be less than 20 characters":!!/^[A-Z0-9_]+$/.test(t)||"Code can only contain uppercase letters, numbers, and underscores":"Code is required"},rate:function(t){if(!t&&0!==t)return"Rate is required";var e=parseFloat(t);return isNaN(e)?"Rate must be a valid number":e<0?"Rate cannot be negative":!(e>1)||"Rate cannot exceed 1 (100%)"},dateOptional:function(t){if(!t||""===t)return!0;var e=new Date(t);return!isNaN(e.getTime())||"Please enter a valid date"},effectiveToAfterFrom:function(e){if(!e||""===e)return!0;if(!t.formData.effectiveFrom)return!0;var r=new Date(t.formData.effectiveFrom);return!(new Date(e)<=r)||"Effective to date must be after effective from date"}}}},mounted:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadTaxRates();case 2:return e.next=4,t.loadStatistics();case 4:case"end":return e.stop()}}),e)})))()},methods:{loadTaxRates:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var r,o,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tableLoading=!0,t.error=null,e.prev=2,r={page:t.currentPage,limit:t.itemsPerPage,search:t.searchQuery,active:"active"===t.statusFilter?"true":"inactive"===t.statusFilter?"false":void 0,includeInactive:(t.statusFilter,"true"),date:t.filterDate},Object.keys(r).forEach((function(t){void 0!==r[t]&&""!==r[t]||delete r[t]})),e.next=7,t.$axios.get("/api/tax",{params:r});case 7:o=e.sent,t.taxRates=o.data.data||[],o.data.pagination&&(t.totalItems=o.data.pagination.total,t.currentPage=o.data.pagination.page),o.data.meta&&(t.stats.activeRatesCount=o.data.meta.activeRatesCount||0),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Error loading tax rates:",e.t0),t.error=(null===(n=e.t0.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||"Failed to load tax rates",t.showNotification("Failed to load tax rates","error","mdi-alert");case 18:return e.prev=18,t.tableLoading=!1,t.loading=!1,e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[2,13,18,22]])})))()},loadStatistics:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/tax/statistics");case 3:r=e.sent,t.stats=M(M({},t.stats),r.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error loading statistics:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},refreshData:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Promise.all([t.loadTaxRates(),t.loadStatistics()]);case 3:t.showNotification("Data refreshed successfully","success","mdi-refresh");case 4:case"end":return e.stop()}}),e)})))()},openCreateDialog:function(){this.editingTaxRate=null,this.resetForm(),this.showTaxDialog=!0},editTaxRate:function(t){this.editingTaxRate=t,this.formData={name:t.name,code:t.code,rate:t.rate,description:t.description||"",effectiveFrom:t.effectiveFrom,effectiveTo:t.effectiveTo||"",isActive:t.isActive,isDefault:t.isDefault},this.updateDisplayRate(),this.showTaxDialog=!0},closeTaxDialog:function(){this.showTaxDialog=!1,this.editingTaxRate=null,this.resetForm()},resetForm:function(){this.formData={name:"",code:"",rate:"",description:"",effectiveFrom:(new Date).toISOString().split("T")[0],effectiveTo:"",isActive:!0,isDefault:!1},this.displayPercentage="0.00%",this.formValid=!1,this.$refs.taxForm&&this.$refs.taxForm.resetValidation()},saveTaxRate:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var r,o,n,c,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.taxForm.validate()){e.next=3;break}return t.showNotification("Please fix validation errors","error","mdi-alert"),e.abrupt("return");case 3:if(t.saving=!0,e.prev=4,r={name:t.formData.name.trim(),code:t.formData.code.toUpperCase().trim(),rate:parseFloat(t.formData.rate),description:t.formData.description?t.formData.description.trim():null,isActive:t.formData.isActive,isDefault:t.formData.isDefault,effectiveFrom:t.formData.effectiveFrom,effectiveTo:t.formData.effectiveTo&&""!==t.formData.effectiveTo.trim()?t.formData.effectiveTo:null},console.log("Sending tax data:",r),!t.editingTaxRate){e.next=14;break}return e.next=10,t.$axios.put("/api/tax/".concat(t.editingTaxRate.id),r);case 10:e.sent,t.showNotification("Tax rate updated successfully","success","mdi-check"),e.next=18;break;case 14:return e.next=16,t.$axios.post("/api/tax",r);case 16:e.sent,t.showNotification("Tax rate created successfully","success","mdi-check");case 18:return t.closeTaxDialog(),e.next=21,t.loadTaxRates();case 21:return e.next=23,t.loadStatistics();case 23:e.next=30;break;case 25:e.prev=25,e.t0=e.catch(4),console.error("Error saving tax rate:",e.t0),console.error("Error response:",null===(o=e.t0.response)||void 0===o?void 0:o.data),null!==(n=e.t0.response)&&void 0!==n&&null!==(c=n.data)&&void 0!==c&&c.errors?(l=e.t0.response.data.errors.map((function(t){return"".concat(t.field,": ").concat(t.message)})).join("\n"),t.showNotification("Validation Error:\n".concat(l),"error","mdi-alert")):t.showNotification((null===(d=e.t0.response)||void 0===d||null===(f=d.data)||void 0===f?void 0:f.message)||"Failed to save tax rate","error","mdi-alert");case 30:return e.prev=30,t.saving=!1,e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[4,25,30,33]])})))()},setDefaultRate:function(t){var e=this;return Object(j.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.confirmDialog={title:"Set Default Tax Rate",message:'Are you sure you want to set "'.concat(t.name,'" as the default tax rate?'),details:"This will unset any existing default tax rate.",color:"primary",icon:"mdi-star",alertType:"info",confirmText:"Set Default",confirmIcon:"mdi-star",onConfirm:function(){var r=Object(j.a)(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.confirmDialog.loading=!0,r.prev=1,r.next=4,e.$axios.patch("/api/tax/".concat(t.id,"/default"));case 4:return e.showNotification('"'.concat(t.name,'" is now the default tax rate'),"success","mdi-star"),r.next=7,e.loadTaxRates();case 7:return r.next=9,e.loadStatistics();case 9:r.next=15;break;case 11:r.prev=11,r.t0=r.catch(1),console.error("Error setting default:",r.t0),e.showNotification((null===(o=r.t0.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)||"Failed to set default tax rate","error","mdi-alert");case 15:return r.prev=15,e.confirmDialog.loading=!1,e.showConfirmDialog=!1,r.finish(15);case 19:case"end":return r.stop()}}),r,null,[[1,11,15,19]])})));return function(){return r.apply(this,arguments)}}(),onCancel:function(){e.showConfirmDialog=!1}},e.showConfirmDialog=!0;case 2:case"end":return r.stop()}}),r)})))()},toggleActiveStatus:function(t){var e=this;return Object(j.a)(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=t.isActive?"deactivate":"activate",n=t.isActive?"Deactivate":"Activate",e.confirmDialog={title:"".concat(n," Tax Rate"),message:"Are you sure you want to ".concat(o,' "').concat(t.name,'"?'),details:t.isActive?"Deactivating this tax rate will make it unavailable for new transactions.":"Activating this tax rate will make it available for use.",color:t.isActive?"warning":"success",icon:t.isActive?"mdi-eye-off":"mdi-eye",alertType:t.isActive?"warning":"success",confirmText:n,confirmIcon:t.isActive?"mdi-eye-off":"mdi-eye",onConfirm:function(){var r=Object(j.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.confirmDialog.loading=!0,r.prev=1,r.next=4,e.$axios.put("/api/tax/".concat(t.id),{isActive:!t.isActive});case 4:return e.showNotification('Tax rate "'.concat(t.name,'" ').concat(o,"d successfully"),"success","mdi-check"),r.next=7,e.loadTaxRates();case 7:return r.next=9,e.loadStatistics();case 9:r.next=15;break;case 11:r.prev=11,r.t0=r.catch(1),console.error("Error ".concat(o,"ing tax rate:"),r.t0),e.showNotification((null===(n=r.t0.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)||"Failed to ".concat(o," tax rate"),"error","mdi-alert");case 15:return r.prev=15,e.confirmDialog.loading=!1,e.showConfirmDialog=!1,r.finish(15);case 19:case"end":return r.stop()}}),r,null,[[1,11,15,19]])})));return function(){return r.apply(this,arguments)}}(),onCancel:function(){e.showConfirmDialog=!1}},e.showConfirmDialog=!0;case 4:case"end":return r.stop()}}),r)})))()},deleteTaxRate:function(t){var e=this;return Object(j.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.confirmDialog={title:"Delete Tax Rate",message:'Are you sure you want to delete "'.concat(t.name,'"?'),details:"This action cannot be undone. The tax rate will be permanently removed from the system.",color:"error",icon:"mdi-delete",alertType:"error",confirmText:"Delete",confirmIcon:"mdi-delete",onConfirm:function(){var r=Object(j.a)(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.confirmDialog.loading=!0,r.prev=1,r.next=4,e.$axios.delete("/api/tax/".concat(t.id));case 4:return e.showNotification('Tax rate "'.concat(t.name,'" deleted successfully'),"success","mdi-check"),r.next=7,e.loadTaxRates();case 7:return r.next=9,e.loadStatistics();case 9:r.next=15;break;case 11:r.prev=11,r.t0=r.catch(1),console.error("Error deleting tax rate:",r.t0),e.showNotification((null===(o=r.t0.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)||"Failed to delete tax rate","error","mdi-alert");case 15:return r.prev=15,e.confirmDialog.loading=!1,e.showConfirmDialog=!1,r.finish(15);case 19:case"end":return r.stop()}}),r,null,[[1,11,15,19]])})));return function(){return r.apply(this,arguments)}}(),onCancel:function(){e.showConfirmDialog=!1}},e.showConfirmDialog=!0;case 2:case"end":return r.stop()}}),r)})))()},handlePageChange:function(t){this.currentPage=t,this.loadTaxRates()},handleItemsPerPageChange:function(t){this.itemsPerPage=t,this.currentPage=1,this.loadTaxRates()},updateDisplayRate:function(){var t=parseFloat(this.formData.rate)||0;this.displayPercentage=(100*t).toFixed(2)+"%"},calculateExampleTax:function(t,e){return(t*parseFloat(e)).toFixed(2)},calculateExampleTotal:function(t,e){return(t+t*parseFloat(e)).toFixed(2)},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"N/A"},showNotification:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mdi-check";this.snackbar={show:!0,message:t,color:e,icon:r,timeout:"error"===e?6e3:4e3}}}},I=$,V=(r(1513),r(32)),component=Object(V.a)(I,(function(){var t=this,e=t._self._c;return e(v.a,{staticClass:"pa-4",attrs:{fluid:""}},[e(k.a,[e(f.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"mb-4",attrs:{elevation:"2"}},[e(l.d,{staticClass:"primary white--text"},[e(D.a,{attrs:{left:"",color:"white"}},[t._v("mdi-percent")]),t._v("\n            Tax Rate Management\n            "),e(R.a),t._v(" "),e(d.a,{staticClass:"mr-2",attrs:{color:"white","text-color":"primary"}},[e(D.a,{attrs:{left:"",small:""}},[t._v("mdi-calculator")]),t._v("\n              "+t._s(t.stats.activeRatesCount)+" Active Rates\n            ")],1),t._v(" "),e(n.a,{attrs:{color:"white",text:"",loading:t.loading},on:{click:t.refreshData}},[e(D.a,{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n              Refresh\n            ")],1)],1),t._v(" "),e(l.c,{staticClass:"pb-2"},[e(k.a,[e(f.a,{attrs:{cols:"6",md:"3"}},[e(c.a,{staticClass:"text-center pa-3",attrs:{outlined:""}},[e("div",{staticClass:"text-h4 primary--text font-weight-bold"},[t._v("\n                    "+t._s(t.stats.totalRates)+"\n                  ")]),t._v(" "),e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Total Rates")])])],1),t._v(" "),e(f.a,{attrs:{cols:"6",md:"3"}},[e(c.a,{staticClass:"text-center pa-3",attrs:{outlined:""}},[e("div",{staticClass:"text-h4 success--text font-weight-bold"},[t._v("\n                    "+t._s(t.stats.activeRates)+"\n                  ")]),t._v(" "),e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Active Rates")])])],1),t._v(" "),e(f.a,{attrs:{cols:"6",md:"3"}},[e(c.a,{staticClass:"text-center pa-3",attrs:{outlined:""}},[e("div",{staticClass:"text-h4 warning--text font-weight-bold"},[t._v("\n                    "+t._s(t.stats.expiringRates)+"\n                  ")]),t._v(" "),e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Expiring Soon")])])],1),t._v(" "),e(f.a,{attrs:{cols:"6",md:"3"}},[t.stats.defaultRate?e(c.a,{staticClass:"text-center pa-3",attrs:{outlined:""}},[e("div",{staticClass:"text-h6 info--text font-weight-bold"},[t._v("\n                    "+t._s(t.stats.defaultRate.displayRate)+"\n                  ")]),t._v(" "),e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("Default Rate")]),t._v(" "),e("div",{staticClass:"caption"},[t._v(t._s(t.stats.defaultRate.name))])]):e(c.a,{staticClass:"text-center pa-3",attrs:{outlined:""}},[e("div",{staticClass:"text-h6 error--text font-weight-bold"},[t._v("None")]),t._v(" "),e("div",{staticClass:"text-subtitle-2 grey--text"},[t._v("No Default")])])],1)],1)],1)],1)],1)],1),t._v(" "),e(k.a,[e(f.a,{attrs:{cols:"12"}},[e(c.a,{attrs:{elevation:"2"}},[e(l.d,[e("span",{staticClass:"text-h6"},[t._v("Tax Rates")]),t._v(" "),e(R.a),t._v(" "),e("div",{staticClass:"d-flex align-center",staticStyle:{"max-width":"600px"}},[e(A.a,{staticClass:"mr-2",staticStyle:{"max-width":"250px"},attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search tax rates...",dense:"",outlined:"",clearable:"","hide-details":""},on:{input:t.debouncedSearch},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),t._v(" "),e(T.a,{staticClass:"mr-2",staticStyle:{"max-width":"120px"},attrs:{items:t.statusOptions,label:"Status",dense:"",outlined:"",clearable:"","hide-details":""},on:{change:t.loadTaxRates},model:{value:t.statusFilter,callback:function(e){t.statusFilter=e},expression:"statusFilter"}}),t._v(" "),e(w.a,{ref:"dateMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on,n=r.attrs;return[e(A.a,t._g(t._b({staticClass:"mr-2",staticStyle:{"max-width":"150px"},attrs:{label:"Filter Date","prepend-icon":"mdi-calendar",readonly:"",dense:"",outlined:"","hide-details":""},on:{change:t.loadTaxRates},model:{value:t.filterDate,callback:function(e){t.filterDate=e},expression:"filterDate"}},"v-text-field",n,!1),o))]}}]),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[t._v(" "),e(x.a,{on:{input:function(e){t.dateMenu=!1,t.loadTaxRates()}},model:{value:t.filterDate,callback:function(e){t.filterDate=e},expression:"filterDate"}})],1)],1),t._v(" "),e(n.a,{staticClass:"ml-2",attrs:{color:"primary"},on:{click:t.openCreateDialog}},[e(D.a,{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n              Add Tax Rate\n            ")],1)],1),t._v(" "),t.loading?e("div",{staticClass:"text-center pa-8"},[e(y.a,{attrs:{size:"64",color:"primary",indeterminate:""}}),t._v(" "),e("p",{staticClass:"mt-4 text-h6"},[t._v("Loading tax rates...")])],1):t.error?e("div",{staticClass:"text-center pa-8"},[e(D.a,{attrs:{size:"64",color:"error"}},[t._v("mdi-alert-circle")]),t._v(" "),e("p",{staticClass:"mt-4 text-h6 error--text"},[t._v(t._s(t.error))]),t._v(" "),e(n.a,{attrs:{color:"primary"},on:{click:t.loadTaxRates}},[e(D.a,{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n              Try Again\n            ")],1)],1):e("div",[e(m.a,{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.taxRates,"items-per-page":t.itemsPerPage,page:t.currentPage,"server-items-length":t.totalItems,loading:t.tableLoading},on:{"update:page":[function(e){t.currentPage=e},t.handlePageChange],"update:items-per-page":t.handleItemsPerPageChange},scopedSlots:t._u([{key:"item.displayRate",fn:function(r){var o=r.item;return[e(d.a,{staticClass:"font-weight-bold",attrs:{color:o.isDefault?"primary":"default","text-color":o.isDefault?"white":"black",small:""}},[t._v("\n                  "+t._s(o.displayRate)+"\n                  "),o.isDefault?e(D.a,{attrs:{right:"",small:""}},[t._v("mdi-star")]):t._e()],1)]}},{key:"item.isActive",fn:function(r){var o=r.item;return[e(d.a,{attrs:{color:o.isActive?"success":"error","text-color":"white",small:""}},[e(D.a,{attrs:{left:"",small:""}},[t._v("\n                    "+t._s(o.isActive?"mdi-check-circle":"mdi-close-circle")+"\n                  ")]),t._v("\n                  "+t._s(o.isActive?"Active":"Inactive")+"\n                ")],1)]}},{key:"item.effectiveFrom",fn:function(r){var o=r.item;return[e("div",[e("div",{staticClass:"text-body-2"},[t._v("\n                    "+t._s(t.formatDate(o.effectiveFrom))+"\n                  ")]),t._v(" "),o.effectiveTo?e("div",{staticClass:"caption grey--text"},[t._v("\n                    Until: "+t._s(t.formatDate(o.effectiveTo))+"\n                  ")]):e("div",{staticClass:"caption success--text"},[t._v("Permanent")])])]}},{key:"item.isValidForDate",fn:function(r){var o=r.item;return[e(D.a,{attrs:{color:o.isValidForDate?"success":"warning",title:o.isValidForDate?"Valid for current date":"Not valid for current date"}},[t._v("\n                  "+t._s(o.isValidForDate?"mdi-check-circle":"mdi-clock-alert")+"\n                ")]),t._v(" "),o.daysUntilExpiry&&o.daysUntilExpiry<=30?e("span",{staticClass:"caption warning--text ml-1"},[t._v("\n                  "+t._s(o.daysUntilExpiry)+" days left\n                ")]):t._e()]}},{key:"item.actions",fn:function(r){var o=r.item;return[e(P.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var c=r.on,l=r.attrs;return[e(n.a,t._g(t._b({attrs:{icon:"",small:"",color:"primary"},on:{click:function(e){return t.editTaxRate(o)}}},"v-btn",l,!1),c),[e(D.a,{attrs:{small:""}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Edit Tax Rate")])]),t._v(" "),e(P.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var c=r.on,l=r.attrs;return[e(n.a,t._g(t._b({attrs:{icon:"",small:"",color:o.isDefault?"warning":"grey",disabled:o.isDefault||!o.isActive},on:{click:function(e){return t.setDefaultRate(o)}}},"v-btn",l,!1),c),[e(D.a,{attrs:{small:""}},[t._v("mdi-star")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(o.isDefault?"Already Default":"Set as Default"))])]),t._v(" "),e(P.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var c=r.on,l=r.attrs;return[e(n.a,t._g(t._b({attrs:{icon:"",small:"",color:o.isActive?"error":"success"},on:{click:function(e){return t.toggleActiveStatus(o)}}},"v-btn",l,!1),c),[e(D.a,{attrs:{small:""}},[t._v("\n                        "+t._s(o.isActive?"mdi-eye-off":"mdi-eye")+"\n                      ")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(o.isActive?"Deactivate":"Activate"))])]),t._v(" "),e(P.a,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var c=r.on,l=r.attrs;return[e(n.a,t._g(t._b({attrs:{icon:"",small:"",color:"error"},on:{click:function(e){return t.deleteTaxRate(o)}}},"v-btn",l,!1),c),[e(D.a,{attrs:{small:""}},[t._v("mdi-delete")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Delete Tax Rate")])])]}},{key:"no-data",fn:function(){return[e("div",{staticClass:"text-center pa-8"},[e(D.a,{attrs:{size:"64",color:"grey"}},[t._v("mdi-percent-outline")]),t._v(" "),e("p",{staticClass:"mt-4 text-h6 grey--text"},[t._v("No tax rates found")]),t._v(" "),e("p",{staticClass:"grey--text"},[t._v("\n                    Create your first tax rate to get started\n                  ")]),t._v(" "),e(n.a,{attrs:{color:"primary"},on:{click:t.openCreateDialog}},[e(D.a,{attrs:{left:""}},[t._v("mdi-plus")]),t._v("\n                    Add Tax Rate\n                  ")],1)],1)]},proxy:!0}])})],1)],1)],1)],1),t._v(" "),e(h.a,{attrs:{persistent:"","max-width":"600px"},model:{value:t.showTaxDialog,callback:function(e){t.showTaxDialog=e},expression:"showTaxDialog"}},[e(c.a,[e(l.d,{staticClass:"primary white--text py-2"},[e(D.a,{attrs:{left:"",small:"",color:"white"}},[t._v("\n        "+t._s(t.editingTaxRate?"mdi-pencil":"mdi-plus")+"\n      ")]),t._v(" "),e("span",{staticClass:"text-subtitle-1"},[t._v(t._s(t.editingTaxRate?"Edit Tax Rate":"Create Tax Rate"))]),t._v(" "),e(R.a),t._v(" "),e(n.a,{attrs:{icon:"",small:"",color:"white",disabled:t.saving},on:{click:t.closeTaxDialog}},[e(D.a,{attrs:{small:""}},[t._v("mdi-close")])],1)],1),t._v(" "),e(l.c,{staticClass:"pa-3"},[e(_.a,{ref:"taxForm",attrs:{"lazy-validation":""},model:{value:t.formValid,callback:function(e){t.formValid=e},expression:"formValid"}},[e(k.a,{attrs:{dense:""}},[e(f.a,{attrs:{cols:"8"}},[e(A.a,{attrs:{label:"Tax Rate Name *",rules:[t.rules.required],outlined:"",dense:"","hide-details":"auto"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),e(f.a,{attrs:{cols:"4"}},[e(A.a,{attrs:{label:"Code *",rules:[t.rules.required,t.rules.code],outlined:"",dense:"","hide-details":"auto"},on:{input:function(e){t.formData.code=e.toUpperCase()}},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),t._v(" "),e(f.a,{attrs:{cols:"6"}},[e(A.a,{attrs:{label:"Rate (Decimal) *",type:"number",step:"0.0001",min:"0",max:"1",rules:[t.rules.required,t.rules.rate],outlined:"",dense:"","hide-details":"auto"},on:{input:t.updateDisplayRate},model:{value:t.formData.rate,callback:function(e){t.$set(t.formData,"rate",e)},expression:"formData.rate"}})],1),t._v(" "),e(f.a,{attrs:{cols:"6"}},[e(A.a,{attrs:{value:t.displayPercentage,label:"Percentage",outlined:"",dense:"",readonly:"","hide-details":"auto"}})],1),t._v(" "),e(f.a,{attrs:{cols:"6"}},[e(w.a,{ref:"effectiveFromMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on,n=r.attrs;return[e(A.a,t._g(t._b({attrs:{label:"Effective From *",readonly:"",outlined:"",dense:"",rules:[t.rules.required],"hide-details":"auto"},model:{value:t.formData.effectiveFrom,callback:function(e){t.$set(t.formData,"effectiveFrom",e)},expression:"formData.effectiveFrom"}},"v-text-field",n,!1),o))]}}]),model:{value:t.effectiveFromMenu,callback:function(e){t.effectiveFromMenu=e},expression:"effectiveFromMenu"}},[t._v(" "),e(x.a,{on:{input:function(e){t.effectiveFromMenu=!1}},model:{value:t.formData.effectiveFrom,callback:function(e){t.$set(t.formData,"effectiveFrom",e)},expression:"formData.effectiveFrom"}})],1)],1),t._v(" "),e(f.a,{attrs:{cols:"6"}},[e(w.a,{ref:"effectiveToMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var o=r.on,n=r.attrs;return[e(A.a,t._g(t._b({attrs:{label:"Effective To",readonly:"",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.formData.effectiveTo,callback:function(e){t.$set(t.formData,"effectiveTo",e)},expression:"formData.effectiveTo"}},"v-text-field",n,!1),o))]}}]),model:{value:t.effectiveToMenu,callback:function(e){t.effectiveToMenu=e},expression:"effectiveToMenu"}},[t._v(" "),e(x.a,{attrs:{min:t.formData.effectiveFrom},on:{input:function(e){t.effectiveToMenu=!1}},model:{value:t.formData.effectiveTo,callback:function(e){t.$set(t.formData,"effectiveTo",e)},expression:"formData.effectiveTo"}})],1)],1),t._v(" "),e(f.a,{attrs:{cols:"12"}},[e(S.a,{attrs:{label:"Description",outlined:"",dense:"",rows:"2","hide-details":"auto","no-resize":""},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),t._v(" "),e(f.a,{attrs:{cols:"6"}},[e(F.a,{attrs:{label:"Active",color:"success",dense:"","hide-details":""},model:{value:t.formData.isActive,callback:function(e){t.$set(t.formData,"isActive",e)},expression:"formData.isActive"}})],1),t._v(" "),e(f.a,{attrs:{cols:"6"}},[e(F.a,{attrs:{label:"Default Rate",color:"primary",dense:"","hide-details":""},model:{value:t.formData.isDefault,callback:function(e){t.$set(t.formData,"isDefault",e)},expression:"formData.isDefault"}})],1),t._v(" "),t.formData.rate?e(f.a,{attrs:{cols:"12"}},[e(o.a,{staticClass:"mb-0",attrs:{dense:"",outlined:"",color:"info"}},[e("div",{staticClass:"d-flex justify-space-between align-center"},[e("span",[e("strong",[t._v(t._s(t.displayPercentage))])]),t._v(" "),e("span",{staticClass:"text-caption"},[t._v("\n                  ₭100 → Tax: ₭"+t._s(t.calculateExampleTax(100,t.formData.rate))+" | Total: ₭"+t._s(t.calculateExampleTotal(100,t.formData.rate))+"\n                ")])])])],1):t._e()],1)],1)],1),t._v(" "),e(l.a,{staticClass:"pa-3 pt-0"},[e(R.a),t._v(" "),e(n.a,{attrs:{text:"",disabled:t.saving,small:""},on:{click:t.closeTaxDialog}},[t._v("\n        Cancel\n      ")]),t._v(" "),e(n.a,{attrs:{color:"primary",disabled:!t.formValid,loading:t.saving,small:""},on:{click:t.saveTaxRate}},[t._v("\n        "+t._s(t.editingTaxRate?"Update":"Create")+"\n      ")])],1)],1)],1),t._v(" "),e(h.a,{attrs:{"max-width":"500",persistent:""},model:{value:t.showConfirmDialog,callback:function(e){t.showConfirmDialog=e},expression:"showConfirmDialog"}},[e(c.a,[e(l.d,{class:"".concat(t.confirmDialog.color," white--text")},[e(D.a,{attrs:{left:"",color:"white"}},[t._v(t._s(t.confirmDialog.icon))]),t._v("\n          "+t._s(t.confirmDialog.title)+"\n        ")],1),t._v(" "),e(l.c,{staticClass:"pa-6"},[e("div",{staticClass:"text-body-1"},[t._v(t._s(t.confirmDialog.message))]),t._v(" "),t.confirmDialog.details?e("div",{staticClass:"mt-3"},[e(o.a,{attrs:{type:t.confirmDialog.alertType||"info",dense:"",outlined:""}},[t._v("\n              "+t._s(t.confirmDialog.details)+"\n            ")])],1):t._e()]),t._v(" "),e(l.a,{staticClass:"pa-4"},[e(R.a),t._v(" "),e(n.a,{attrs:{color:"grey",text:""},on:{click:t.confirmDialog.onCancel}},[t._v("\n            "+t._s(t.confirmDialog.cancelText||"Cancel")+"\n          ")]),t._v(" "),e(n.a,{attrs:{color:t.confirmDialog.color,loading:t.confirmDialog.loading},on:{click:t.confirmDialog.onConfirm}},[e(D.a,{attrs:{left:""}},[t._v(t._s(t.confirmDialog.confirmIcon||"mdi-check"))]),t._v("\n            "+t._s(t.confirmDialog.confirmText||"Confirm")+"\n          ")],1)],1)],1)],1),t._v(" "),e(C.a,{attrs:{color:t.snackbar.color,timeout:t.snackbar.timeout,top:"",right:""},scopedSlots:t._u([{key:"action",fn:function(r){var o=r.attrs;return[e(n.a,t._b({attrs:{color:"white",text:""},on:{click:function(e){t.snackbar.show=!1}}},"v-btn",o,!1),[t._v("\n          Close\n        ")])]}}]),model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[e("div",{staticClass:"d-flex align-center"},[e(D.a,{staticClass:"mr-2",attrs:{color:"white"}},[t._v(t._s(t.snackbar.icon))]),t._v("\n        "+t._s(t.snackbar.message)+"\n      ")],1)])],1)}),[],!1,null,"c3dc263c",null);e.default=component.exports}}]);