(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{1278:function(t,e,n){var content=n(1595);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("c0edd022",content,!0,{sourceMap:!1})},1594:function(t,e,n){"use strict";n(1278)},1595:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,".payment-settlement-analysis[data-v-2948fc5e]{padding:0}.report-header[data-v-2948fc5e]{align-items:center;background:#01532b;border-radius:8px;color:#fff;display:flex;justify-content:space-between;margin-bottom:24px;padding:20px}.title-section h1[data-v-2948fc5e]{font-size:28px;font-weight:600;margin:0}.title-section p[data-v-2948fc5e]{font-size:14px;margin:5px 0 0;opacity:.9}.filter-card[data-v-2948fc5e]{background:#fff}.filter-title[data-v-2948fc5e]{background:#f8f9fa;color:#495057;font-weight:600}.filter-info[data-v-2948fc5e]{display:flex;flex-direction:column;height:100%;justify-content:center}.filter-actions[data-v-2948fc5e]{align-items:center;display:flex;gap:12px}.section-header[data-v-2948fc5e]{border-bottom:3px solid #e0e0e0;padding-bottom:8px}.section-title[data-v-2948fc5e]{color:#495057;font-size:24px;font-weight:600;margin:0}.section-title i[data-v-2948fc5e]{color:#01532b;margin-right:12px}.summary-cards .summary-card[data-v-2948fc5e]{height:100%}.summary-content[data-v-2948fc5e]{gap:16px}.summary-content[data-v-2948fc5e],.summary-icon[data-v-2948fc5e]{align-items:center;display:flex}.summary-icon[data-v-2948fc5e]{background:#01532b;border-radius:12px;color:#fff;font-size:24px;height:60px;justify-content:center;width:60px}.summary-details h3[data-v-2948fc5e]{color:#495057;font-size:16px;font-weight:600;margin:0}.summary-details p[data-v-2948fc5e]{color:#6c757d;font-size:14px;margin:4px 0}.summary-amount[data-v-2948fc5e]{color:#01532b;font-size:24px;font-weight:700;margin:8px 0 4px}.custom-green-header[data-v-2948fc5e]{background-color:#01532b!important;color:#fff!important}.custom-green-text[data-v-2948fc5e]{color:#01532b!important}.custom-green-bg-light[data-v-2948fc5e]{background-color:rgba(1,83,43,.1)!important}.custom-green-bg-lighter[data-v-2948fc5e]{background-color:rgba(1,83,43,.05)!important}.success--text[data-v-2948fc5e],.v-card-title.success--text[data-v-2948fc5e],.v-icon.success[data-v-2948fc5e],.v-progress-circular.success[data-v-2948fc5e]{color:#01532b!important}.success.lighten-3[data-v-2948fc5e]{background-color:#01532b!important}.success.lighten-4[data-v-2948fc5e]{background-color:rgba(1,83,43,.1)!important}@media (max-width:768px){.report-header[data-v-2948fc5e]{flex-direction:column;gap:16px;text-align:center}.filter-actions[data-v-2948fc5e]{flex-direction:column;width:100%}.filter-actions .v-btn[data-v-2948fc5e]{width:100%}.section-title[data-v-2948fc5e]{font-size:20px}.summary-content[data-v-2948fc5e]{flex-direction:column;text-align:center}.summary-amount[data-v-2948fc5e]{font-size:20px}.outstanding-total-card .summary-icon[data-v-2948fc5e]{background:linear-gradient(135deg,#ff6b6b,#ee5a24)}.outstanding-ministry-card .summary-icon[data-v-2948fc5e]{background:linear-gradient(135deg,#4834d4,#686de0)}.outstanding-account-card .summary-icon[data-v-2948fc5e]{background:linear-gradient(135deg,#00d2d3,#54a0ff)}.outstanding-total-card .summary-amount[data-v-2948fc5e]{color:#ee5a24}.outstanding-ministry-card .summary-amount[data-v-2948fc5e]{color:#4834d4}.outstanding-account-card .summary-amount[data-v-2948fc5e]{color:#00d2d3}.v-simple-table tbody tr.green.lighten-5[data-v-2948fc5e]{background-color:rgba(76,175,80,.1)!important}.v-simple-table tbody tr.red.lighten-5[data-v-2948fc5e]{background-color:rgba(244,67,54,.1)!important}.outstanding-positive[data-v-2948fc5e]{color:#4caf50!important;font-weight:700}.outstanding-negative[data-v-2948fc5e]{color:#f44336!important;font-weight:700}@media (max-width:768px){.outstanding-account-card .summary-amount[data-v-2948fc5e],.outstanding-ministry-card .summary-amount[data-v-2948fc5e],.outstanding-total-card .summary-amount[data-v-2948fc5e]{font-size:18px}}}",""]),r.locals={},t.exports=r},1835:function(t,e,n){"use strict";n.r(e);var r=n(866),o=n(316),c=n(313),l=n(18),d=n(784),m=n(312),v=n(167),y=n(251),f=n(783),h=n(65),_=n(434),x=n(781),C=(n(9),n(5),n(10),n(7),n(12),n(13),n(33)),k=n(31),w=n(3),N=n(20);n(92),n(332),n(68),n(30),n(66),n(35),n(253),n(54),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(53),n(823),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(8),n(69),n(250),n(44),n(102),n(820),n(447);function A(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function B(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(e){Object(w.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L={name:"PaymentSettlementAnalysis",data:function(){return{outstandingBalanceData:{byMinistry:[],byBankAccount:[],byCurrency:[],totals:{totalLakEquivalent:0,currencyTotals:{}}},loadingOutstandingBalance:!1,loading:!1,exporting:!1,selectedBranchId:1,selectedYear:(new Date).getFullYear(),selectedMonthNum:(new Date).getMonth()+1,monthOptions:[{name:"January",value:1},{name:"February",value:2},{name:"March",value:3},{name:"April",value:4},{name:"May",value:5},{name:"June",value:6},{name:"July",value:7},{name:"August",value:8},{name:"September",value:9},{name:"October",value:10},{name:"November",value:11},{name:"December",value:12}],balanceForwardData:{byMinistry:[],byBankAccount:[],byCurrency:[],totals:{totalLakEquivalent:0,currencyTotals:{}}},loadingBalanceForward:!1,paymentMinistryReport:[],paymentMinistryTotals:{currencyTotals:{},totalLakEquivalent:0},paymentBankReport:[],paymentBankTotals:{currencyTotals:{},totalLakEquivalent:0},paymentCurrencyList:[],loadingPaymentMinistry:!1,loadingPaymentBank:!1,settlementMinistryReport:[],settlementMinistryTotals:{currencyTotals:{},totalLakEquivalent:0},settlementBankReport:[],settlementBankTotals:{currencyTotals:{},totalLakEquivalent:0},settlementChartReport:[],settlementChartTotals:{currencyTotals:{},totalLakEquivalent:0},settlementCurrencyList:[],loadingSettlementMinistry:!1,loadingSettlementBank:!1,loadingSettlementChart:!1}},computed:{yearOptions:function(){for(var t=(new Date).getFullYear(),e=[],i=t-5;i<=t+2;i++)e.push(i);return e},selectedMonth:function(){var t=this.selectedMonthNum.toString().padStart(2,"0");return"".concat(this.selectedYear,"-").concat(t)},maxDate:function(){return(new Date).toISOString().substr(0,7)},formattedSelectedMonth:function(){var t,e=this,n=(null===(t=this.monthOptions.find((function(t){return t.value===e.selectedMonthNum})))||void 0===t?void 0:t.name)||"Invalid";return"".concat(n," ").concat(this.selectedYear)}},created:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setDefaultMonth(),e.next=3,t.fetchAllReports();case 3:case"end":return e.stop()}}),e)})))()},methods:{calculateOutstandingBalance:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.loadingOutstandingBalance=!0,console.log("Calculating outstanding balance..."),n=t.balanceForwardData,r=t.paymentMinistryReport,o=t.settlementMinistryReport,c=new Map,l=new Map,d=new Set,n.byMinistry.forEach((function(t){c.set(t.ministryId,{ministryId:t.ministryId,ministryCode:t.ministryCode,ministryName:t.ministryName,amounts:B({},t.amounts),totalLakEquivalent:t.totalLakEquivalent}),Object.keys(t.amounts||{}).forEach((function(t){d.add(t)}))})),n.byBankAccount.forEach((function(t){l.set(t.bankAccountId,{bankAccountId:t.bankAccountId,accountNumber:t.accountNumber,accountName:t.accountName,bankName:t.bankName,amounts:B({},t.amounts),totalLakEquivalent:t.totalLakEquivalent}),Object.keys(t.amounts||{}).forEach((function(t){d.add(t)}))})),r.forEach((function(t){var e=t.ministryId;c.has(e)||c.set(e,{ministryId:e,ministryCode:t.ministryCode,ministryName:t.ministryName,amounts:{},totalLakEquivalent:0});var n=c.get(e);n.totalLakEquivalent+=t.totalLakEquivalent,Object.keys(t.amounts||{}).forEach((function(e){d.add(e),n.amounts[e]=(n.amounts[e]||0)+t.amounts[e]}))})),t.paymentBankReport.forEach((function(t){var e=t.bankAccountId;l.has(e)||l.set(e,{bankAccountId:e,accountNumber:t.accountNumber,accountName:t.accountName,bankName:t.bankName,amounts:{},totalLakEquivalent:0});var n=l.get(e);n.totalLakEquivalent+=t.totalLakEquivalent,Object.keys(t.amounts||{}).forEach((function(e){d.add(e),n.amounts[e]=(n.amounts[e]||0)+t.amounts[e]}))})),o.forEach((function(t){var e=t.ministryId;c.has(e)||c.set(e,{ministryId:e,ministryCode:t.ministryCode,ministryName:t.ministryName,amounts:{},totalLakEquivalent:0});var n=c.get(e);n.totalLakEquivalent-=t.totalLakEquivalent,Object.keys(t.amounts||{}).forEach((function(e){d.add(e),n.amounts[e]=(n.amounts[e]||0)-t.amounts[e]}))})),t.settlementBankReport.forEach((function(t){var e=t.bankAccountId;l.has(e)||l.set(e,{bankAccountId:e,accountNumber:t.accountNumber,accountName:t.accountName,bankName:t.bankName,amounts:{},totalLakEquivalent:0});var n=l.get(e);n.totalLakEquivalent-=t.totalLakEquivalent,Object.keys(t.amounts||{}).forEach((function(e){d.add(e),n.amounts[e]=(n.amounts[e]||0)-t.amounts[e]}))})),m={},Array.from(d).forEach((function(t){m[t]=Array.from(c.values()).reduce((function(e,n){return e+(n.amounts[t]||0)}),0)})),v=Array.from(c.values()).reduce((function(t,e){return t+e.totalLakEquivalent}),0),t.outstandingBalanceData={byMinistry:Array.from(c.values()).sort((function(a,b){return"NO_MINISTRY"===a.ministryId?1:"NO_MINISTRY"===b.ministryId?-1:a.ministryName.localeCompare(b.ministryName)})),byBankAccount:Array.from(l.values()).sort((function(a,b){if("NO_BANK_ACCOUNT"===a.bankAccountId)return 1;if("NO_BANK_ACCOUNT"===b.bankAccountId)return-1;var t=a.bankName.localeCompare(b.bankName);return 0!==t?t:a.accountName.localeCompare(b.accountName)})),byCurrency:Array.from(d).map((function(t){return{currency:t,amount:m[t]||0}})),totals:{currencyTotals:m,totalLakEquivalent:v}},console.log("Outstanding balance calculated successfully")}catch(e){console.error("Error calculating outstanding balance:",e),t.$toast.error("Failed to calculate outstanding balance")}finally{t.loadingOutstandingBalance=!1}case 1:case"end":return e.stop()}}),e)})))()},setDefaultMonth:function(){var t=new Date;this.selectedYear=t.getFullYear(),this.selectedMonthNum=t.getMonth()+1},onDateChange:function(){console.log("Date changed to:",this.selectedMonth),this.fetchAllReports()},resetMonth:function(){this.setDefaultMonth(),this.fetchAllReports()},getDateRanges:function(){if(!this.selectedMonth)return{current:{},previous:{}};var t=this.selectedMonth.split("-"),e=Object(k.a)(t,2),n=e[0],r=e[1],o=parseInt(n),c=parseInt(r),l=new Date(o,c-1,1),d=new Date(o,c,0),m=new Date(1===c?o-1:o,0,1),v=new Date(o,c-1,0);return{current:{start:l.toISOString().substr(0,10),end:d.toISOString().substr(0,10)},previous:{start:m.toISOString().substr(0,10),end:v.toISOString().substr(0,10)}}},fetchAllReports:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,Promise.all([t.fetchBalanceForward(),t.fetchPaymentMinistryReport(),t.fetchPaymentBankReport(),t.fetchSettlementMinistryReport(),t.fetchSettlementBankReport(),t.fetchSettlementChartReport()]);case 4:return e.next=6,t.calculateOutstandingBalance();case 6:t.$toast.success("All reports loaded successfully"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error loading reports:",e.t0),t.$toast.error("Error loading some reports");case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,9,13,16]])})))()},fetchBalanceForward:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loadingBalanceForward=!0,console.log("Calculating balance forward..."),(n=t.getDateRanges()).previous.start){e.next=7;break}return console.log("No date selected for balance forward"),e.abrupt("return");case 7:return e.next=9,Promise.all([t.fetchPaymentsForPeriod(n.previous.start,n.previous.end),t.fetchSettlementsForPeriod(n.previous.start,n.previous.end)]);case 9:r=e.sent,o=Object(k.a)(r,2),c=o[0],l=o[1],console.log("Balance Forward - Payments: ".concat(c.length,", Settlements: ").concat(l.length)),t.calculateBalanceForward(c,l),console.log("Balance forward calculated successfully"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Error calculating balance forward:",e.t0),t.$toast.error("Failed to calculate balance forward");case 22:return e.prev=22,t.loadingBalanceForward=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,18,22,25]])})))()},fetchPaymentsForPeriod:function(t,e){var n=this;return Object(N.a)(regeneratorRuntime.mark((function r(){var o,c,l,d,m,v,y,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=[],c=1,l=1;case 3:return r.next=5,n.$axios.get("/api/money-advances",{params:{branchId:n.selectedBranchId,fromDate:t,toDate:e,include:["ministry","currency","bankAccount"],page:c,limit:50}});case 5:v=r.sent,y=(null===(d=v.data.data)||void 0===d?void 0:d.advances)||[],o=o.concat(y),(f=null===(m=v.data.data)||void 0===m?void 0:m.pagination)&&(l=f.totalPages),c++;case 11:if(c<=l){r.next=3;break}case 12:return r.abrupt("return",o);case 13:case"end":return r.stop()}}),r)})))()},fetchSettlementsForPeriod:function(t,e){var n=this;return Object(N.a)(regeneratorRuntime.mark((function r(){var o,c,l,d,m,v,y,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=[],c=1,l=1;case 3:return r.next=5,n.$axios.get("/api/settlements",{params:{branchId:n.selectedBranchId,fromDate:t,toDate:e,isPosted:!0,include:["ministry","currency","bankAccount"],page:c,limit:50}});case 5:v=r.sent,y=(null===(d=v.data.data)||void 0===d?void 0:d.settlements)||[],o=o.concat(y),(f=null===(m=v.data.data)||void 0===m?void 0:m.pagination)&&(l=f.totalPages),c++;case 11:if(c<=l){r.next=3;break}case 12:return r.abrupt("return",o);case 13:case"end":return r.stop()}}),r)})))()},calculateBalanceForward:function(t,e){var n=new Map,r=new Map,o={};t.forEach((function(t){var e,c=t.ministry,l=t.bankAccount,d=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",m=parseFloat(t.exchangeRate)||1,v=parseFloat(t.amount)||0,y=v*m,f=(null==c?void 0:c.id)||"NO_MINISTRY",h=(null==c?void 0:c.ministryCode)||"N/A",_=(null==c?void 0:c.ministryName)||"No Ministry Assigned";n.has(f)||n.set(f,{ministryId:f,ministryCode:h,ministryName:_,amounts:{},totalLakEquivalent:0});var x=n.get(f);x.amounts[d]=(x.amounts[d]||0)+v,x.totalLakEquivalent+=y;var C=(null==l?void 0:l.id)||"NO_BANK_ACCOUNT",k=(null==l?void 0:l.accountNumber)||"N/A",w=(null==l?void 0:l.accountName)||"Cash Transaction",N=(null==l?void 0:l.bankName)||"No Bank";r.has(C)||r.set(C,{bankAccountId:C,accountNumber:k,accountName:w,bankName:N,amounts:{},totalLakEquivalent:0});var A=r.get(C);A.amounts[d]=(A.amounts[d]||0)+v,A.totalLakEquivalent+=y,o[d]=(o[d]||0)+v})),e.forEach((function(t){var e,c=t.ministry,l=t.bankAccount,d=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",m=parseFloat(t.exchangeRate)||1,v=parseFloat(t.amount)||0,y=v*m,f=(null==c?void 0:c.id)||"NO_MINISTRY",h=(null==c?void 0:c.ministryCode)||"N/A",_=(null==c?void 0:c.ministryName)||"No Ministry Assigned";n.has(f)||n.set(f,{ministryId:f,ministryCode:h,ministryName:_,amounts:{},totalLakEquivalent:0});var x=n.get(f);x.amounts[d]=(x.amounts[d]||0)-v,x.totalLakEquivalent-=y;var C=(null==l?void 0:l.id)||"NO_BANK_ACCOUNT",k=(null==l?void 0:l.accountNumber)||"N/A",w=(null==l?void 0:l.accountName)||"Cash Transaction",N=(null==l?void 0:l.bankName)||"No Bank";r.has(C)||r.set(C,{bankAccountId:C,accountNumber:k,accountName:w,bankName:N,amounts:{},totalLakEquivalent:0});var A=r.get(C);A.amounts[d]=(A.amounts[d]||0)-v,A.totalLakEquivalent-=y,o[d]=(o[d]||0)-v}));var c=Array.from(n.values()).reduce((function(t,e){return t+e.totalLakEquivalent}),0);this.balanceForwardData={byMinistry:Array.from(n.values()).sort((function(a,b){return"NO_MINISTRY"===a.ministryId?1:"NO_MINISTRY"===b.ministryId?-1:a.ministryName.localeCompare(b.ministryName)})),byBankAccount:Array.from(r.values()).sort((function(a,b){if("NO_BANK_ACCOUNT"===a.bankAccountId)return 1;if("NO_BANK_ACCOUNT"===b.bankAccountId)return-1;var t=a.bankName.localeCompare(b.bankName);return 0!==t?t:a.accountName.localeCompare(b.accountName)})),totals:{currencyTotals:o,totalLakEquivalent:c}},console.log("Balance Forward Data:",this.balanceForwardData)},fetchPaymentMinistryReport:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loadingPaymentMinistry=!0,console.log("Fetching payment ministry report..."),(n=t.getDateRanges()).current.start){e.next=7;break}return console.log("No month selected"),e.abrupt("return");case 7:return e.next=9,t.fetchPaymentsForPeriod(n.current.start,n.current.end);case 9:r=e.sent,console.log("Current month payments: ".concat(r.length)),o=new Map,c=new Set,r.forEach((function(t){var e,n,r,l,d=t.ministry;d?(n=d.id,r=d.ministryName,l=d.ministryCode):(n="NO_MINISTRY",r="No Ministry Assigned",l="N/A");var m=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",v=parseFloat(t.exchangeRate)||1,y=parseFloat(t.amount)||0,f=y*v;c.add(m),o.has(n)||o.set(n,{ministryId:n,ministryName:r,ministryCode:l,count:0,totalLakEquivalent:0,amounts:{}});var h=o.get(n);h.count+=1,h.totalLakEquivalent+=f,h.amounts[m]=(h.amounts[m]||0)+y})),t.paymentCurrencyList=Array.from(c).sort(),t.paymentMinistryReport=Array.from(o.values()).sort((function(a,b){return"NO_MINISTRY"===a.ministryId?1:"NO_MINISTRY"===b.ministryId?-1:a.ministryName.localeCompare(b.ministryName)})),console.log("Payment ministry report: ".concat(t.paymentMinistryReport.length," ministries")),t.paymentMinistryTotals={totalLakEquivalent:t.paymentMinistryReport.reduce((function(t,e){return t+e.totalLakEquivalent}),0),currencyTotals:{}},t.paymentCurrencyList.forEach((function(e){t.paymentMinistryTotals.currencyTotals[e]=t.paymentMinistryReport.reduce((function(t,n){return t+(n.amounts[e]||0)}),0)})),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("Error fetching payment ministry report:",e.t0),t.$toast.error("Failed to fetch payment ministry report: "+e.t0.message);case 25:return e.prev=25,t.loadingPaymentMinistry=!1,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,21,25,28]])})))()},fetchPaymentBankReport:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loadingPaymentBank=!0,console.log("Fetching payment bank report..."),(n=t.getDateRanges()).current.start){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t.fetchPaymentsForPeriod(n.current.start,n.current.end);case 8:r=e.sent,console.log("Current month payments for bank report: ".concat(r.length)),o=new Map,c=new Set,r.forEach((function(t){var e,n,r,l,d,m=t.bankAccount;m?(n=m.id,r=m.accountNumber,l=m.accountName,d=m.bankName):(n="NO_BANK_ACCOUNT",r="N/A",l="Cash Transaction",d="No Bank");var v=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",y=parseFloat(t.exchangeRate)||1,f=parseFloat(t.amount)||0,h=f*y;c.add(v),o.has(n)||o.set(n,{bankAccountId:n,accountNumber:r,accountName:l,bankName:d,count:0,totalLakEquivalent:0,amounts:{}});var _=o.get(n);_.count+=1,_.totalLakEquivalent+=h,_.amounts[v]=(_.amounts[v]||0)+f})),t.paymentCurrencyList=Array.from(c).sort(),t.paymentBankReport=Array.from(o.values()).sort((function(a,b){if("NO_BANK_ACCOUNT"===a.bankAccountId)return 1;if("NO_BANK_ACCOUNT"===b.bankAccountId)return-1;var t=a.bankName.localeCompare(b.bankName);return 0!==t?t:a.accountName.localeCompare(b.accountName)})),console.log("Payment bank report: ".concat(t.paymentBankReport.length," bank accounts")),t.paymentBankTotals={totalLakEquivalent:t.paymentBankReport.reduce((function(t,b){return t+b.totalLakEquivalent}),0),currencyTotals:{}},t.paymentCurrencyList.forEach((function(e){t.paymentBankTotals.currencyTotals[e]=t.paymentBankReport.reduce((function(t,b){return t+(b.amounts[e]||0)}),0)})),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Error fetching payment bank report:",e.t0),t.$toast.error("Failed to fetch payment bank report: "+e.t0.message);case 24:return e.prev=24,t.loadingPaymentBank=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[0,20,24,27]])})))()},fetchSettlementMinistryReport:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loadingSettlementMinistry=!0,(n=t.getDateRanges()).current.start){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.fetchSettlementsForPeriod(n.current.start,n.current.end);case 7:r=e.sent,o=new Map,c=new Set,r.forEach((function(t){var e,n,r,l,d=t.ministry;d?(n=d.id,r=d.ministryName,l=d.ministryCode):(n="NO_MINISTRY",r="No Ministry Assigned",l="N/A");var m=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",v=parseFloat(t.exchangeRate)||1,y=parseFloat(t.amount)||0,f=y*v;c.add(m),o.has(n)||o.set(n,{ministryId:n,ministryName:r,ministryCode:l,count:0,totalLakEquivalent:0,amounts:{}});var h=o.get(n);h.count+=1,h.totalLakEquivalent+=f,h.amounts[m]=(h.amounts[m]||0)+y})),t.settlementCurrencyList=Array.from(c).sort(),t.settlementMinistryReport=Array.from(o.values()).sort((function(a,b){return"NO_MINISTRY"===a.ministryId?1:"NO_MINISTRY"===b.ministryId?-1:a.ministryName.localeCompare(b.ministryName)})),t.settlementMinistryTotals={totalLakEquivalent:t.settlementMinistryReport.reduce((function(t,e){return t+e.totalLakEquivalent}),0),currencyTotals:{}},t.settlementCurrencyList.forEach((function(e){t.settlementMinistryTotals.currencyTotals[e]=t.settlementMinistryReport.reduce((function(t,n){return t+(n.amounts[e]||0)}),0)})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error fetching settlement ministry report:",e.t0),t.$toast.error("Failed to fetch settlement ministry report.");case 21:return e.prev=21,t.loadingSettlementMinistry=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])})))()},fetchSettlementBankReport:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loadingSettlementBank=!0,(n=t.getDateRanges()).current.start){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.fetchSettlementsForPeriod(n.current.start,n.current.end);case 7:r=e.sent,o=new Map,c=new Set,r.forEach((function(t){var e,n,r,l,d,m=t.bankAccount;m?(n=m.id,r=m.accountNumber,l=m.accountName,d=m.bankName):(n="NO_BANK_ACCOUNT",r="N/A",l="Cash Transaction",d="No Bank");var v=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",y=parseFloat(t.exchangeRate)||1,f=parseFloat(t.amount)||0,h=f*y;c.add(v),o.has(n)||o.set(n,{bankAccountId:n,accountNumber:r,accountName:l,bankName:d,count:0,totalLakEquivalent:0,amounts:{}});var _=o.get(n);_.count+=1,_.totalLakEquivalent+=h,_.amounts[v]=(_.amounts[v]||0)+f})),t.settlementCurrencyList=Array.from(c).sort(),t.settlementBankReport=Array.from(o.values()).sort((function(a,b){if("NO_BANK_ACCOUNT"===a.bankAccountId)return 1;if("NO_BANK_ACCOUNT"===b.bankAccountId)return-1;var t=a.bankName.localeCompare(b.bankName);return 0!==t?t:a.accountName.localeCompare(b.accountName)})),t.settlementBankTotals={totalLakEquivalent:t.settlementBankReport.reduce((function(t,b){return t+b.totalLakEquivalent}),0),currencyTotals:{}},t.settlementCurrencyList.forEach((function(e){t.settlementBankTotals.currencyTotals[e]=t.settlementBankReport.reduce((function(t,b){return t+(b.amounts[e]||0)}),0)})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error fetching settlement bank report:",e.t0),t.$toast.error("Failed to fetch settlement bank report.");case 21:return e.prev=21,t.loadingSettlementBank=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])})))()},fetchSettlementChartReport:function(){var t=this;return Object(N.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loadingSettlementChart=!0,(n=t.getDateRanges()).current.start){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.fetchSettlementsForPeriod(n.current.start,n.current.end);case 7:r=e.sent,o=new Map,c=new Set,r.forEach((function(t){var e,n,r,l,d=t.chartAccount;d?(n=d.id,r=d.accountCode||d.code,l=d.accountName||d.name):(n="NO_CHART_ACCOUNT",r="N/A",l="No Chart Account");var m=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",v=parseFloat(t.exchangeRate)||1,y=parseFloat(t.amount)||0,f=y*v;c.add(m),o.has(n)||o.set(n,{chartAccountId:n,chartAccountCode:r,chartAccountName:l,count:0,totalLakEquivalent:0,amounts:{}});var h=o.get(n);h.count+=1,h.totalLakEquivalent+=f,h.amounts[m]=(h.amounts[m]||0)+y})),t.settlementCurrencyList=Array.from(c).sort(),t.settlementChartReport=Array.from(o.values()).sort((function(a,b){return"NO_CHART_ACCOUNT"===a.chartAccountId?1:"NO_CHART_ACCOUNT"===b.chartAccountId?-1:a.chartAccountCode.localeCompare(b.chartAccountCode)})),t.settlementChartTotals={totalLakEquivalent:t.settlementChartReport.reduce((function(t,e){return t+e.totalLakEquivalent}),0),currencyTotals:{}},t.settlementCurrencyList.forEach((function(e){t.settlementChartTotals.currencyTotals[e]=t.settlementChartReport.reduce((function(t,n){return t+(n.amounts[e]||0)}),0)})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("Error fetching settlement chart report:",e.t0),t.$toast.error("Failed to fetch settlement chart report.");case 21:return e.prev=21,t.loadingSettlementChart=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[0,17,21,24]])})))()},formatAmount:function(t){return t&&0!==t?new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t):"0"},exportReport:function(t){var e=this;return Object(N.a)(regeneratorRuntime.mark((function n(){var data,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.exporting=!0,n.prev=1,data=[],r="",n.t0=t,n.next="balance-ministry"===n.t0?7:"payment-ministry"===n.t0?10:"payment-bank"===n.t0?13:"settlement-ministry"===n.t0?16:"settlement-bank"===n.t0?19:"settlement-chart"===n.t0?22:"outstanding-ministry"===n.t0?25:"outstanding-bank"===n.t0?28:31;break;case 7:return data=e.prepareExportData(e.balanceForwardData.byMinistry,Object.keys(e.balanceForwardData.totals.currencyTotals),"ministry"),r="Balance_Forward_By_Ministry",n.abrupt("break",31);case 10:return data=e.prepareExportData(e.paymentMinistryReport,e.paymentCurrencyList,"ministry"),r="Payment_By_Ministry",n.abrupt("break",31);case 13:return data=e.prepareExportData(e.paymentBankReport,e.paymentCurrencyList,"bank"),r="Payment_By_Bank_Account",n.abrupt("break",31);case 16:return data=e.prepareExportData(e.settlementMinistryReport,e.settlementCurrencyList,"ministry"),r="Settlement_By_Ministry",n.abrupt("break",31);case 19:return data=e.prepareExportData(e.settlementBankReport,e.settlementCurrencyList,"bank"),r="Settlement_By_Bank_Account",n.abrupt("break",31);case 22:return data=e.prepareExportData(e.settlementChartReport,e.settlementCurrencyList,"chart"),r="Settlement_By_Chart_Account",n.abrupt("break",31);case 25:return data=e.prepareExportData(e.outstandingBalanceData.byMinistry,Object.keys(e.outstandingBalanceData.totals.currencyTotals),"ministry"),r="Outstanding_Balance_By_Ministry",n.abrupt("break",31);case 28:return data=e.prepareExportData(e.outstandingBalanceData.byBankAccount,Object.keys(e.outstandingBalanceData.totals.currencyTotals),"bank"),r="Outstanding_Balance_By_Bank_Account",n.abrupt("break",31);case 31:return n.next=33,e.exportToCSV(data,r);case 33:e.$toast.success("".concat(r," exported successfully")),n.next=40;break;case 36:n.prev=36,n.t1=n.catch(1),console.error("Error exporting report:",n.t1),e.$toast.error("Failed to export report");case 40:return n.prev=40,e.exporting=!1,n.finish(40);case 43:case"end":return n.stop()}}),n,null,[[1,36,40,43]])})))()},prepareExportData:function(t,e,n){var r=this;return t.map((function(t,o){var c={"#":o+1};return"ministry"===n?(c["Ministry Code"]=t.ministryCode,c["Ministry Name"]=t.ministryName):"bank"===n?(c["Account Number"]=t.accountNumber,c["Account Name"]=t.accountName,c["Bank Name"]=t.bankName):"chart"===n&&(c["Chart Account Code"]=t.chartAccountCode,c["Chart Account Name"]=t.chartAccountName),void 0!==t.count&&(c.Count=t.count),e.forEach((function(e){var n;c[e]=r.formatAmount((null===(n=t.amounts)||void 0===n?void 0:n[e])||0)})),c["Total (LAK)"]=r.formatAmount(t.totalLakEquivalent||0),c}))},exportToCSV:function(data,t){return Object(N.a)(regeneratorRuntime.mark((function e(){var n,r,o,link,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==data.length){e.next=2;break}return e.abrupt("return");case 2:n=Object.keys(data[0]),r=[n.join(",")].concat(Object(C.a)(data.map((function(t){return n.map((function(header){return'"'.concat(t[header]||"",'"')})).join(",")})))).join("\n"),o=new Blob([r],{type:"text/csv;charset=utf-8;"}),link=document.createElement("a"),c=URL.createObjectURL(o),link.setAttribute("href",c),link.setAttribute("download","".concat(t,"-").concat((new Date).toISOString().substr(0,10),".csv")),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link),URL.revokeObjectURL(c);case 14:case"end":return e.stop()}}),e)})))()}}},E=(n(1594),n(32)),component=Object(E.a)(L,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"payment-settlement-analysis"},[t._m(0),t._v(" "),e(c.a,{staticClass:"filter-card mb-4",attrs:{elevation:"2"}},[e(l.d,{staticClass:"filter-title"},[e("i",{staticClass:"fas fa-calendar"}),t._v("\n      ເລືອກເດືອນ (Monthly Filter)\n    ")]),t._v(" "),e(l.c,[e(f.a,{attrs:{align:"center"}},[e(d.a,{attrs:{cols:"12",md:"3"}},[e(h.a,{attrs:{items:t.yearOptions,label:"Select Year",outlined:"","prepend-icon":"mdi-calendar"},on:{change:t.onDateChange},model:{value:t.selectedYear,callback:function(e){t.selectedYear=e},expression:"selectedYear"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"3"}},[e(h.a,{attrs:{items:t.monthOptions,"item-text":"name","item-value":"value",label:"Select Month",outlined:"","prepend-icon":"mdi-calendar-month"},on:{change:t.onDateChange},model:{value:t.selectedMonthNum,callback:function(e){t.selectedMonthNum=e},expression:"selectedMonthNum"}})],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"6"}},[e("div",{staticClass:"filter-info"},[e(r.a,{staticClass:"mb-3",attrs:{type:"info",border:"left","colored-border":""}},[e("strong",[t._v("Selected Month:")]),t._v(" "+t._s(t.formattedSelectedMonth)+"\n            ")]),t._v(" "),e("div",{staticClass:"filter-actions"},[e(o.a,{attrs:{color:"primary",loading:t.loading,large:""},on:{click:t.fetchAllReports}},[e("i",{staticClass:"fas fa-search"}),t._v("\n                ວິເຄາະຂໍ້ມູນ (Analyze Data)\n              ")]),t._v(" "),e(o.a,{attrs:{color:"secondary",large:""},on:{click:t.resetMonth}},[e("i",{staticClass:"fas fa-undo"}),t._v("\n                ຣີເຊັດ (Reset)\n              ")])],1)],1)])],1)],1)],1),t._v(" "),t.loading?e(f.a,{attrs:{justify:"center"}},[e(d.a,{staticClass:"text-center",attrs:{cols:"12"}},[e(y.a,{attrs:{indeterminate:"",color:"primary",size:"64"}}),t._v(" "),e("div",{staticClass:"mt-2"},[t._v("Loading reports...")])],1)],1):t._e(),t._v(" "),t._m(1),t._v(" "),e(f.a,{staticClass:"summary-cards mb-4"},[e(d.a,{attrs:{cols:"12",md:"4"}},[e(c.a,{staticClass:"summary-card balance-forward-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-calendar-minus"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ຍອດຍົກມາທັງໝົດ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total Balance Forward")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.formatAmount(t.balanceForwardData.totals.totalLakEquivalent))+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("LAK")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"4"}},[e(c.a,{staticClass:"summary-card balance-ministry-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-building"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ກະຊວງມີຍອດ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Ministries with Balance")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.balanceForwardData.byMinistry.filter((function(t){return 0!==t.totalLakEquivalent})).length)+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Ministries")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"4"}},[e(c.a,{staticClass:"summary-card balance-account-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-university"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ບັນຊີມີຍອດ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Accounts with Balance")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.balanceForwardData.byBankAccount.filter((function(b){return 0!==b.totalLakEquivalent})).length)+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Accounts")])])])])],1)],1)],1),t._v(" "),e(f.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[e(l.d,{staticClass:"success--text py-2 px-4 d-flex align-center"},[e(v.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-office-building")]),t._v(" "),e("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v("\n            ຍອດຍົກມາ ຕາມກົມ ("+t._s(t.balanceForwardData.byMinistry.length)+")\n          ")]),t._v(" "),e(x.a),t._v(" "),e(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!t.balanceForwardData.byMinistry.length,loading:t.exporting},on:{click:function(e){return t.exportReport("balance-ministry")}}},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-file-excel")]),t._v("\n            Export\n          ")],1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",loading:t.loadingBalanceForward},on:{click:t.fetchBalanceForward}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pa-0"},[t.loadingBalanceForward?e("div",{staticClass:"text-center py-6"},[e(y.a,{attrs:{indeterminate:"",color:"success"}}),t._v(" "),e("div",{staticClass:"mt-2 text-caption"},[t._v("Loading balance forward...")])],1):t.balanceForwardData.byMinistry.length?e(_.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",{staticClass:"success lighten-3"},[e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("#")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Ministry Code\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Ministry Name\n                  ")]),t._v(" "),t._l(Object.keys(t.balanceForwardData.totals.currencyTotals),(function(n){return e("th",{key:"bf-min-"+n,staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    "+t._s(n)+"\n                  ")])})),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Balance (LAK)\n                  ")])],2)]),t._v(" "),e("tbody",t._l(t.balanceForwardData.byMinistry.filter((function(t){return 0!==t.totalLakEquivalent})),(function(n,r){return e("tr",{key:n.ministryId,class:{"grey lighten-5":r%2==0,"green lighten-5":n.totalLakEquivalent>0,"red lighten-5":n.totalLakEquivalent<0}},[e("td",{staticClass:"text-caption text-center"},[t._v(t._s(r+1))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.ministryCode))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.ministryName))]),t._v(" "),t._l(Object.keys(t.balanceForwardData.totals.currencyTotals),(function(r){var o;return e("td",{key:"bf-min-amt-"+r,staticClass:"text-body-2 text-right"},[t._v("\n                    "+t._s(t.formatAmount((null===(o=n.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold",class:n.totalLakEquivalent>=0?"success--text":"error--text"},[t._v("\n                    "+t._s(t.formatAmount(n.totalLakEquivalent||0))+"\n                  ")])],2)})),0)]},proxy:!0}])}):e("div",{staticClass:"text-center py-6"},[e(v.a,{attrs:{size:"48",color:"grey lighten-2"}},[t._v("mdi-information-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[t._v("\n              No balance forward data\n            ")])],1)],1)],1)],1)],1),t._v(" "),t._m(2),t._v(" "),e(f.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[e(l.d,{staticClass:"success--text py-2 px-4 d-flex align-center"},[e(v.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-office-building")]),t._v(" "),e("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v("\n            ລາຍຈ່າຍ ຕາມກົມ\n          ")]),t._v(" "),e(x.a),t._v(" "),e(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!t.paymentMinistryReport.length,loading:t.exporting},on:{click:function(e){return t.exportReport("payment-ministry")}}},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-file-excel")]),t._v("\n            Export\n          ")],1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",loading:t.loadingPaymentMinistry},on:{click:t.fetchPaymentMinistryReport}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pa-0"},[t.loadingPaymentMinistry?e("div",{staticClass:"text-center py-6"},[e(y.a,{attrs:{indeterminate:"",color:"success"}}),t._v(" "),e("div",{staticClass:"mt-2 text-caption"},[t._v("\n              Loading payment by ministry...\n            ")])],1):t.paymentMinistryReport.length?e(_.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){var n;return[e("thead",[e("tr",{staticClass:"success lighten-3"},[e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("#")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Ministry Code\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Ministry Name\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Count\n                  ")]),t._v(" "),t._l(t.paymentCurrencyList,(function(n){return e("th",{key:"pay-min-"+n,staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    "+t._s(n)+"\n                  ")])})),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Total (LAK)\n                  ")])],2)]),t._v(" "),e("tbody",[t._l(t.paymentMinistryReport,(function(n,r){return e("tr",{key:n.ministryId,class:{"grey lighten-5":r%2==0,"orange lighten-4":"NO_MINISTRY"===n.ministryId}},[e("td",{staticClass:"text-caption text-center"},[t._v(t._s(r+1))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.ministryCode))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.ministryName))]),t._v(" "),e("td",{staticClass:"text-body-2 text-right"},[t._v(t._s(n.count))]),t._v(" "),t._l(t.paymentCurrencyList,(function(r){var o;return e("td",{key:"pay-min-amt-"+r,staticClass:"text-body-2 text-right"},[t._v("\n                    "+t._s(t.formatAmount((null===(o=n.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold success--text"},[t._v("\n                    "+t._s(t.formatAmount(n.totalLakEquivalent||0))+"\n                  ")])],2)})),t._v(" "),e("tr",{staticClass:"success lighten-4"},[e("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"3"}},[t._v("\n                    ລວມ\n                  ")]),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.paymentMinistryReport.reduce((function(t,e){return t+e.count}),0))+"\n                  ")]),t._v(" "),t._l(t.paymentCurrencyList,(function(n){var r,o;return e("td",{key:"pay-min-sum-"+n,staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.formatAmount((null===(r=t.paymentMinistryTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[n])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2 success--text"},[t._v("\n                    "+t._s(t.formatAmount((null===(n=t.paymentMinistryTotals)||void 0===n?void 0:n.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):e("div",{staticClass:"text-center py-6"},[e(v.a,{attrs:{size:"48",color:"grey lighten-2"}},[t._v("mdi-information-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[t._v("\n              No payment data available\n            ")])],1)],1)],1)],1)],1),t._v(" "),e(f.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[e(l.d,{staticClass:"success--text py-2 px-4 d-flex align-center"},[e(v.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-bank")]),t._v(" "),e("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v("\n            ລາຍຈ່າຍ ຕາມບັນຊີທະນາຄານ\n          ")]),t._v(" "),e(x.a),t._v(" "),e(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!t.paymentBankReport.length,loading:t.exporting},on:{click:function(e){return t.exportReport("payment-bank")}}},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-file-excel")]),t._v("\n            Export\n          ")],1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",loading:t.loadingPaymentBank},on:{click:t.fetchPaymentBankReport}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pa-0"},[t.loadingPaymentBank?e("div",{staticClass:"text-center py-6"},[e(y.a,{attrs:{indeterminate:"",color:"success"}}),t._v(" "),e("div",{staticClass:"mt-2 text-caption"},[t._v("\n              Loading payment by bank account...\n            ")])],1):t.paymentBankReport.length?e(_.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){var n;return[e("thead",[e("tr",{staticClass:"success lighten-3"},[e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("#")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Account Number\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Account Name\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Bank Name\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Count\n                  ")]),t._v(" "),t._l(t.paymentCurrencyList,(function(n){return e("th",{key:"pay-bank-"+n,staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    "+t._s(n)+"\n                  ")])})),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Total (LAK)\n                  ")])],2)]),t._v(" "),e("tbody",[t._l(t.paymentBankReport,(function(n,r){return e("tr",{key:n.bankAccountId,class:{"grey lighten-5":r%2==0,"orange lighten-4":"NO_BANK_ACCOUNT"===n.bankAccountId}},[e("td",{staticClass:"text-caption text-center"},[t._v(t._s(r+1))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.accountNumber))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.accountName))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.bankName))]),t._v(" "),e("td",{staticClass:"text-body-2 text-right"},[t._v(t._s(n.count))]),t._v(" "),t._l(t.paymentCurrencyList,(function(r){var o;return e("td",{key:"pay-bank-amt-"+r,staticClass:"text-body-2 text-right"},[t._v("\n                    "+t._s(t.formatAmount((null===(o=n.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold success--text"},[t._v("\n                    "+t._s(t.formatAmount(n.totalLakEquivalent||0))+"\n                  ")])],2)})),t._v(" "),e("tr",{staticClass:"success lighten-4"},[e("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"4"}},[t._v("\n                    ລວມ\n                  ")]),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.paymentBankReport.reduce((function(t,b){return t+b.count}),0))+"\n                  ")]),t._v(" "),t._l(t.paymentCurrencyList,(function(n){var r,o;return e("td",{key:"pay-bank-sum-"+n,staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.formatAmount((null===(r=t.paymentBankTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[n])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2 success--text"},[t._v("\n                    "+t._s(t.formatAmount((null===(n=t.paymentBankTotals)||void 0===n?void 0:n.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):e("div",{staticClass:"text-center py-6"},[e(v.a,{attrs:{size:"48",color:"grey lighten-2"}},[t._v("mdi-information-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[t._v("\n              No payment bank data available\n            ")])],1)],1)],1)],1)],1),t._v(" "),t._m(3),t._v(" "),e(f.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[e(l.d,{staticClass:"success--text py-2 px-4 d-flex align-center"},[e(v.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-office-building")]),t._v(" "),e("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v("\n            ລາຍຮັບ ຕາມກົມ\n          ")]),t._v(" "),e(x.a),t._v(" "),e(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!t.settlementMinistryReport.length,loading:t.exporting},on:{click:function(e){return t.exportReport("settlement-ministry")}}},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-file-excel")]),t._v("\n            Export\n          ")],1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",loading:t.loadingSettlementMinistry},on:{click:t.fetchSettlementMinistryReport}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pa-0"},[t.loadingSettlementMinistry?e("div",{staticClass:"text-center py-6"},[e(y.a,{attrs:{indeterminate:"",color:"success"}}),t._v(" "),e("div",{staticClass:"mt-2 text-caption"},[t._v("\n              Loading settlement by ministry...\n            ")])],1):t.settlementMinistryReport.length?e(_.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){var n;return[e("thead",[e("tr",{staticClass:"success lighten-3"},[e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("#")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Ministry Code\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Ministry Name\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Count\n                  ")]),t._v(" "),t._l(t.settlementCurrencyList,(function(n){return e("th",{key:"set-min-"+n,staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    "+t._s(n)+"\n                  ")])})),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Total (LAK)\n                  ")])],2)]),t._v(" "),e("tbody",[t._l(t.settlementMinistryReport,(function(n,r){return e("tr",{key:n.ministryId,class:{"grey lighten-5":r%2==0,"orange lighten-4":"NO_MINISTRY"===n.ministryId}},[e("td",{staticClass:"text-caption text-center"},[t._v(t._s(r+1))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.ministryCode))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.ministryName))]),t._v(" "),e("td",{staticClass:"text-body-2 text-right"},[t._v(t._s(n.count))]),t._v(" "),t._l(t.settlementCurrencyList,(function(r){var o;return e("td",{key:"set-min-amt-"+r,staticClass:"text-body-2 text-right"},[t._v("\n                    "+t._s(t.formatAmount((null===(o=n.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold success--text"},[t._v("\n                    "+t._s(t.formatAmount(n.totalLakEquivalent||0))+"\n                  ")])],2)})),t._v(" "),e("tr",{staticClass:"success lighten-4"},[e("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"3"}},[t._v("\n                    ລວມ\n                  ")]),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.settlementMinistryReport.reduce((function(t,e){return t+e.count}),0))+"\n                  ")]),t._v(" "),t._l(t.settlementCurrencyList,(function(n){var r,o;return e("td",{key:"set-min-sum-"+n,staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.formatAmount((null===(r=t.settlementMinistryTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[n])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2 success--text"},[t._v("\n                    "+t._s(t.formatAmount((null===(n=t.settlementMinistryTotals)||void 0===n?void 0:n.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):e("div",{staticClass:"text-center py-6"},[e(v.a,{attrs:{size:"48",color:"grey lighten-2"}},[t._v("mdi-information-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[t._v("\n              No settlement data available\n            ")])],1)],1)],1)],1)],1),t._v(" "),e(f.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[e(l.d,{staticClass:"success--text py-2 px-4 d-flex align-center"},[e(v.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-bank")]),t._v(" "),e("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v("\n            ລາຍຮັບ ຕາມບັນຊີທະນາຄານ\n          ")]),t._v(" "),e(x.a),t._v(" "),e(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!t.settlementBankReport.length,loading:t.exporting},on:{click:function(e){return t.exportReport("settlement-bank")}}},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-file-excel")]),t._v("\n            Export\n          ")],1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",loading:t.loadingSettlementBank},on:{click:t.fetchSettlementBankReport}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pa-0"},[t.loadingSettlementBank?e("div",{staticClass:"text-center py-6"},[e(y.a,{attrs:{indeterminate:"",color:"success"}}),t._v(" "),e("div",{staticClass:"mt-2 text-caption"},[t._v("\n              Loading settlement by bank account...\n            ")])],1):t.settlementBankReport.length?e(_.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){var n;return[e("thead",[e("tr",{staticClass:"success lighten-3"},[e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("#")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Account Number\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Account Name\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Bank Name\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Count\n                  ")]),t._v(" "),t._l(t.settlementCurrencyList,(function(n){return e("th",{key:"set-bank-"+n,staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    "+t._s(n)+"\n                  ")])})),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Total (LAK)\n                  ")])],2)]),t._v(" "),e("tbody",[t._l(t.settlementBankReport,(function(n,r){return e("tr",{key:n.bankAccountId,class:{"grey lighten-5":r%2==0,"orange lighten-4":"NO_BANK_ACCOUNT"===n.bankAccountId}},[e("td",{staticClass:"text-caption text-center"},[t._v(t._s(r+1))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.accountNumber))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.accountName))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.bankName))]),t._v(" "),e("td",{staticClass:"text-body-2 text-right"},[t._v(t._s(n.count))]),t._v(" "),t._l(t.settlementCurrencyList,(function(r){var o;return e("td",{key:"set-bank-amt-"+r,staticClass:"text-body-2 text-right"},[t._v("\n                    "+t._s(t.formatAmount((null===(o=n.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold success--text"},[t._v("\n                    "+t._s(t.formatAmount(n.totalLakEquivalent||0))+"\n                  ")])],2)})),t._v(" "),e("tr",{staticClass:"success lighten-4"},[e("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"4"}},[t._v("\n                    ລວມ\n                  ")]),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.settlementBankReport.reduce((function(t,b){return t+b.count}),0))+"\n                  ")]),t._v(" "),t._l(t.settlementCurrencyList,(function(n){var r,o;return e("td",{key:"set-bank-sum-"+n,staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.formatAmount((null===(r=t.settlementBankTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[n])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2 success--text"},[t._v("\n                    "+t._s(t.formatAmount((null===(n=t.settlementBankTotals)||void 0===n?void 0:n.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):e("div",{staticClass:"text-center py-6"},[e(v.a,{attrs:{size:"48",color:"grey lighten-2"}},[t._v("mdi-information-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[t._v("\n              No settlement bank data available\n            ")])],1)],1)],1)],1)],1),t._v(" "),e(f.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[e(l.d,{staticClass:"success--text py-2 px-4 d-flex align-center"},[e(v.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-chart-tree")]),t._v(" "),e("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v("\n            ລາຍຮັບ ຕາມບັນຊີຜັງ\n          ")]),t._v(" "),e(x.a),t._v(" "),e(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!t.settlementChartReport.length,loading:t.exporting},on:{click:function(e){return t.exportReport("settlement-chart")}}},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-file-excel")]),t._v("\n            Export\n          ")],1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",loading:t.loadingSettlementChart},on:{click:t.fetchSettlementChartReport}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pa-0"},[t.loadingSettlementChart?e("div",{staticClass:"text-center py-6"},[e(y.a,{attrs:{indeterminate:"",color:"success"}}),t._v(" "),e("div",{staticClass:"mt-2 text-caption"},[t._v("\n              Loading settlement by chart account...\n            ")])],1):t.settlementChartReport.length?e(_.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){var n;return[e("thead",[e("tr",{staticClass:"success lighten-3"},[e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("#")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Chart Account Code\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Chart Account Name\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Count\n                  ")]),t._v(" "),t._l(t.settlementCurrencyList,(function(n){return e("th",{key:"set-chart-"+n,staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    "+t._s(n)+"\n                  ")])})),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Total (LAK)\n                  ")])],2)]),t._v(" "),e("tbody",[t._l(t.settlementChartReport,(function(n,r){return e("tr",{key:n.chartAccountId,class:{"grey lighten-5":r%2==0,"orange lighten-4":"NO_CHART_ACCOUNT"===n.chartAccountId}},[e("td",{staticClass:"text-caption text-center"},[t._v(t._s(r+1))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.chartAccountCode))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.chartAccountName))]),t._v(" "),e("td",{staticClass:"text-body-2 text-right"},[t._v(t._s(n.count))]),t._v(" "),t._l(t.settlementCurrencyList,(function(r){var o;return e("td",{key:"set-chart-amt-"+r,staticClass:"text-body-2 text-right"},[t._v("\n                    "+t._s(t.formatAmount((null===(o=n.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold success--text"},[t._v("\n                    "+t._s(t.formatAmount(n.totalLakEquivalent||0))+"\n                  ")])],2)})),t._v(" "),e("tr",{staticClass:"success lighten-4"},[e("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"3"}},[t._v("\n                    ລວມ\n                  ")]),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.settlementChartReport.reduce((function(t,e){return t+e.count}),0))+"\n                  ")]),t._v(" "),t._l(t.settlementCurrencyList,(function(n){var r,o;return e("td",{key:"set-chart-sum-"+n,staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.formatAmount((null===(r=t.settlementChartTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[n])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2 success--text"},[t._v("\n                    "+t._s(t.formatAmount((null===(n=t.settlementChartTotals)||void 0===n?void 0:n.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):e("div",{staticClass:"text-center py-6"},[e(v.a,{attrs:{size:"48",color:"grey lighten-2"}},[t._v("mdi-information-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[t._v("\n              No chart account data available\n            ")])],1)],1)],1)],1)],1),t._v(" "),t._m(4),t._v(" "),e(f.a,{staticClass:"summary-cards mb-4"},[e(d.a,{attrs:{cols:"12",md:"4"}},[e(c.a,{staticClass:"summary-card outstanding-total-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-balance-scale-right"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ຍອດຄົງເຫຼືອທັງໝົດ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Total Outstanding Balance")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.formatAmount(t.outstandingBalanceData.totals.totalLakEquivalent))+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("LAK")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"4"}},[e(c.a,{staticClass:"summary-card outstanding-ministry-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-building"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ກະຊວງມີຍອດຄົງເຫຼືອ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Ministries with Outstanding")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.outstandingBalanceData.byMinistry.filter((function(t){return Math.abs(t.totalLakEquivalent)>.01})).length)+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Ministries")])])])])],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12",md:"4"}},[e(c.a,{staticClass:"summary-card outstanding-account-card",attrs:{elevation:"3"}},[e(l.c,[e("div",{staticClass:"summary-content"},[e("div",{staticClass:"summary-icon"},[e("i",{staticClass:"fas fa-university"})]),t._v(" "),e("div",{staticClass:"summary-details"},[e("h3",{staticClass:"summary-title"},[t._v("ບັນຊີມີຍອດຄົງເຫຼືອ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Accounts with Outstanding")]),t._v(" "),e("h2",{staticClass:"summary-amount"},[t._v("\n                "+t._s(t.outstandingBalanceData.byBankAccount.filter((function(b){return Math.abs(b.totalLakEquivalent)>.01})).length)+"\n              ")]),t._v(" "),e("p",{staticClass:"summary-subtitle"},[t._v("Accounts")])])])])],1)],1)],1),t._v(" "),e(f.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[e(l.d,{staticClass:"success--text py-2 px-4 d-flex align-center"},[e(v.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-office-building")]),t._v(" "),e("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v("\n            ຍອດຄົງເຫຼືອ ຕາມກົມ ("+t._s(t.outstandingBalanceData.byMinistry.length)+")\n          ")]),t._v(" "),e(x.a),t._v(" "),e(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!t.outstandingBalanceData.byMinistry.length,loading:t.exporting},on:{click:function(e){return t.exportReport("outstanding-ministry")}}},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-file-excel")]),t._v("\n            Export\n          ")],1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",loading:t.loadingOutstandingBalance},on:{click:t.calculateOutstandingBalance}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pa-0"},[t.loadingOutstandingBalance?e("div",{staticClass:"text-center py-6"},[e(y.a,{attrs:{indeterminate:"",color:"success"}}),t._v(" "),e("div",{staticClass:"mt-2 text-caption"},[t._v("\n              Loading outstanding balance...\n            ")])],1):t.outstandingBalanceData.byMinistry.length?e(_.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",{staticClass:"success lighten-3"},[e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("#")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Ministry Code\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Ministry Name\n                  ")]),t._v(" "),t._l(Object.keys(t.outstandingBalanceData.totals.currencyTotals),(function(n){return e("th",{key:"out-min-"+n,staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    "+t._s(n)+"\n                  ")])})),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Outstanding (LAK)\n                  ")])],2)]),t._v(" "),e("tbody",[t._l(t.outstandingBalanceData.byMinistry.filter((function(t){return Math.abs(t.totalLakEquivalent)>.01})),(function(n,r){return e("tr",{key:n.ministryId,class:{"grey lighten-5":r%2==0,"green lighten-5":n.totalLakEquivalent>0,"red lighten-5":n.totalLakEquivalent<0}},[e("td",{staticClass:"text-caption text-center"},[t._v(t._s(r+1))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.ministryCode))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.ministryName))]),t._v(" "),t._l(Object.keys(t.outstandingBalanceData.totals.currencyTotals),(function(r){var o;return e("td",{key:"out-min-amt-"+r,staticClass:"text-body-2 text-right"},[t._v("\n                    "+t._s(t.formatAmount((null===(o=n.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold",class:n.totalLakEquivalent>=0?"success--text":"error--text"},[t._v("\n                    "+t._s(t.formatAmount(n.totalLakEquivalent||0))+"\n                  ")])],2)})),t._v(" "),e("tr",{staticClass:"success lighten-4"},[e("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"3"}},[t._v("\n                    ລວມ\n                  ")]),t._v(" "),t._l(Object.keys(t.outstandingBalanceData.totals.currencyTotals),(function(n){return e("td",{key:"out-min-sum-"+n,staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.formatAmount(t.outstandingBalanceData.totals.currencyTotals[n]||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2",class:t.outstandingBalanceData.totals.totalLakEquivalent>=0?"success--text":"error--text"},[t._v("\n                    "+t._s(t.formatAmount(t.outstandingBalanceData.totals.totalLakEquivalent||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):e("div",{staticClass:"text-center py-6"},[e(v.a,{attrs:{size:"48",color:"grey lighten-2"}},[t._v("mdi-information-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[t._v("\n              No outstanding balance data\n            ")])],1)],1)],1)],1)],1),t._v(" "),e(f.a,{staticClass:"mb-4"},[e(d.a,{attrs:{cols:"12"}},[e(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[e(l.d,{staticClass:"success--text py-2 px-4 d-flex align-center"},[e(v.a,{staticClass:"mr-2",attrs:{color:"success"}},[t._v("mdi-bank")]),t._v(" "),e("span",{staticClass:"text-subtitle-1 font-weight-medium"},[t._v("\n            ຍອດຄົງເຫຼືອ ຕາມບັນຊີທະນາຄານ\n          ")]),t._v(" "),e(x.a),t._v(" "),e(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!t.outstandingBalanceData.byBankAccount.length,loading:t.exporting},on:{click:function(e){return t.exportReport("outstanding-bank")}}},[e(v.a,{attrs:{small:"",left:""}},[t._v("mdi-file-excel")]),t._v("\n            Export\n          ")],1),t._v(" "),e(o.a,{attrs:{icon:"",small:"",loading:t.loadingOutstandingBalance},on:{click:t.calculateOutstandingBalance}},[e(v.a,{attrs:{small:""}},[t._v("mdi-refresh")])],1)],1),t._v(" "),e(m.a),t._v(" "),e(l.c,{staticClass:"pa-0"},[t.loadingOutstandingBalance?e("div",{staticClass:"text-center py-6"},[e(y.a,{attrs:{indeterminate:"",color:"success"}}),t._v(" "),e("div",{staticClass:"mt-2 text-caption"},[t._v("\n              Loading outstanding balance...\n            ")])],1):t.outstandingBalanceData.byBankAccount.length?e(_.a,{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",{staticClass:"success lighten-3"},[e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("#")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Account Number\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Account Name\n                  ")]),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold"},[t._v("\n                    Bank Name\n                  ")]),t._v(" "),t._l(Object.keys(t.outstandingBalanceData.totals.currencyTotals),(function(n){return e("th",{key:"out-bank-"+n,staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    "+t._s(n)+"\n                  ")])})),t._v(" "),e("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[t._v("\n                    Outstanding (LAK)\n                  ")])],2)]),t._v(" "),e("tbody",[t._l(t.outstandingBalanceData.byBankAccount.filter((function(b){return Math.abs(b.totalLakEquivalent)>.01})),(function(n,r){return e("tr",{key:n.bankAccountId,class:{"grey lighten-5":r%2==0,"green lighten-5":n.totalLakEquivalent>0,"red lighten-5":n.totalLakEquivalent<0}},[e("td",{staticClass:"text-caption text-center"},[t._v(t._s(r+1))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.accountNumber))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.accountName))]),t._v(" "),e("td",{staticClass:"text-body-2"},[t._v(t._s(n.bankName))]),t._v(" "),t._l(Object.keys(t.outstandingBalanceData.totals.currencyTotals),(function(r){var o;return e("td",{key:"out-bank-amt-"+r,staticClass:"text-body-2 text-right"},[t._v("\n                    "+t._s(t.formatAmount((null===(o=n.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold",class:n.totalLakEquivalent>=0?"success--text":"error--text"},[t._v("\n                    "+t._s(t.formatAmount(n.totalLakEquivalent||0))+"\n                  ")])],2)})),t._v(" "),e("tr",{staticClass:"success lighten-4"},[e("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"4"}},[t._v("\n                    ລວມ\n                  ")]),t._v(" "),t._l(Object.keys(t.outstandingBalanceData.totals.currencyTotals),(function(n){return e("td",{key:"out-bank-sum-"+n,staticClass:"text-right font-weight-bold text-body-2"},[t._v("\n                    "+t._s(t.formatAmount(t.outstandingBalanceData.totals.currencyTotals[n]||0))+"\n                  ")])})),t._v(" "),e("td",{staticClass:"text-right font-weight-bold text-body-2",class:t.outstandingBalanceData.totals.totalLakEquivalent>=0?"success--text":"error--text"},[t._v("\n                    "+t._s(t.formatAmount(t.outstandingBalanceData.totals.totalLakEquivalent||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):e("div",{staticClass:"text-center py-6"},[e(v.a,{attrs:{size:"48",color:"grey lighten-2"}},[t._v("mdi-information-outline")]),t._v(" "),e("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[t._v("\n              No outstanding balance data\n            ")])],1)],1)],1)],1)],1)],1)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-header"},[e("div",{staticClass:"title-section"},[e("h1",{staticClass:"page-title"},[e("i",{staticClass:"fas fa-analytics"}),t._v("\n        ການວິເຄາະການຊຳລະ ແລະລາຍຮັບ\n      ")]),t._v(" "),e("p",{staticClass:"page-subtitle"},[t._v("Payment & Settlement Analysis")])])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header mb-3"},[t("h2",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-balance-scale"}),this._v("\n      ຍອດຍົກມາ (BALANCE FORWARD)\n    ")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header mb-3"},[t("h2",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-credit-card"}),this._v("\n      ລາຍຈ່າຍ (PAYMENTS)\n    ")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header mb-3 mt-6"},[t("h2",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-receipt"}),this._v("\n      ລາຍຮັບ (SETTLEMENTS)\n    ")])])},function(){var t=this._self._c;return t("div",{staticClass:"section-header mb-3 mt-6"},[t("h2",{staticClass:"section-title"},[t("i",{staticClass:"fas fa-calculator"}),this._v("\n      ຍອດຄົງເຫຼືອ (OUTSTANDING BALANCE)\n    ")])])}],!1,null,"2948fc5e",null);e.default=component.exports}}]);