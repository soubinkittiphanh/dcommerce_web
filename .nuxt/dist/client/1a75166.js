(window.webpackJsonp=window.webpackJsonp||[]).push([[237,98,102],{1215:function(t,e,n){var content=n(1468);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("49c38452",content,!0,{sourceMap:!1})},1467:function(t,e,n){"use strict";n(1215)},1468:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,'.grey[data-v-6afa5d13],.text-h5[data-v-6afa5d13]{font-family:"Noto Sans Lao"}table[data-v-6afa5d13]{border:1px solid #000}',""]),r.locals={},t.exports=r},1704:function(t,e,n){"use strict";n.r(e);var r=n(316),o=n(313),l=n(18),c=n(317),d=n(780),m=n(789),f=n(1624),v=n(754),h=n(312),_=n(167),y=n(770),D=n(318),w=n(779),x=n(113),k=(n(35),n(131),n(62),n(34),n(69),n(54),n(7),n(67),n(93),n(53),n(31)),O=n(20),F=(n(9),n(5),n(8),n(39),n(51),n(85),n(68),n(30),n(333),n(92),n(36)),S=n(810),C=n(814),I=n(806);function T(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var N={components:{OrderDetailPos:S.default,OrderSumaryCardPos:I.default,OrderDetailPosCRUD:C.default},middleware:"auths",data:function(){return{viewTransaction:!1,whatsappContactLink:"",componentKey:0,dialogOrderDetail:!1,selectedOrder:0,wallet:!1,isedit:!1,dialog:!1,isloading:!1,dialogForm:!1,valid:!0,name:"",search:"",userId:null,headerList:[],loadDataNoCancelOrder:[],codPaid:[],componentCancelFormKey:1,cancelForm:!1,OrderIdSelected:"",headers:[{text:"ວັນທີ",align:"center",value:"bookingDate",sortable:!0},{text:"remark",align:"center",value:"remark",sortable:!0},{text:"from",align:"center",value:"srcLocation.name",sortable:!0},{text:"to",align:"center",value:"desLocation.name",sortable:!0},{text:"ຜູ້ລົງທຸລະກຳ",align:"end",value:"user.cus_name",sortable:!1},{text:"ເວລາລົງ",align:"end",value:"createdAt",sortable:!1},{text:"View/Update",align:"end",value:"id",sortable:!1}],date:Object(F.d)(),date2:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),dateFormatted:this.formatDate(Object(F.d)()),dateFormatted2:this.formatDate(new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)),menu1:!1,menu2:!1}},created:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadData();case 2:case"end":return e.stop()}}),e)})))()},watch:{isedit:function(t){t||(this.form_data.cus_id="1XXX")},date:function(t){this.dateFormatted=this.formatDate(this.date),this.loadData()},date2:function(t){this.dateFormatted2=this.formatDate(this.date2),this.loadData()}},computed:{activeheaderList:function(){return this.headerList.filter((function(t){return 1==t.isActive&&2!=t.paymentId}))},computedDateFormatted:function(){return this.formatDate(this.date)},totalSale:function(){var t=0;return this.activeheaderList.forEach((function(e){t+=e.total})),t},totalSaleRaw:function(){var t=0;return this.activeheaderList.forEach((function(e){console.log("====>",e.cartTotal),t+=parseInt(e.cartTotal)})),console.log("Price total: "+t),t},totalDiscount:function(){var t=0;return this.activeheaderList.forEach((function(e){t+=parseInt(e.discount)})),t},unpaidCodOrder:function(){var t=[],e={};this.headerList.forEach((function(element){"PENDING"===element.paymentStatus&&element.payment.includes("COD")&&(console.log("Concept applied"),t.push(element))}));var n=t.reduce((function(t,e){return t+e.cartTotal}),0),r=t.reduce((function(t,e){return t+e.discount}),0);return e.amount=t.length,e.saleRawNumber=n,e.sale=this.getFormatNum(n),e.discount=this.getFormatNum(r),e.gross=this.getFormatNum(0),e.title="ຍອດບິນ COD",e}},methods:{createSale:function(){this.componentKey+=1,this.selectedOrder=0,this.viewTransaction=!1,this.dialogOrderDetail=!0},countDay:function(t){return Object(F.b)(t)},dueDate:function(t,e){return console.log("DATE ",t," to ",e),Object(F.f)(t,e)},numberWithCommas:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getFormatNum:function(t){return(new Intl.NumberFormat).format(t)},editItem:function(t){this.componentKey+=1,this.selectedOrderId=t.orderId.toString(),this.dialogOrderDetail=!this.dialogOrderDetail},viewItem:function(t){this.componentKey+=1,this.viewTransaction=!0,this.selectedOrder=t.id,this.dialogOrderDetail=!0},cancelItem:function(t){console.log("Order id",t.orderId),this.componentCancelFormKey+=1,this.OrderIdSelected=t.orderId,this.cancelForm=!0},handleEvent:function(){this.dialogOrderDetail=!1},loadData:function(){var t=this;return Object(O.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isloading=!0,n={startDate:t.date,endDate:t.date2},e.next=4,t.$axios.get("api/transfer/findByDate",{params:{date:n}}).then((function(e){t.headerList=[];var n,r=T(e.data);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.headerList.push(o)}}catch(t){r.e(t)}finally{r.f()}console.log("====> "+t.headerList.length)})).catch((function(e){Object(F.j)(t.$swal,"Error","Could no load data "+e.Error),console.log("Error ===>: "+e)}));case 4:t.isloading=!1;case 5:case"end":return e.stop()}}),e)})))()},formatDate:function(t){if(!t)return null;console.log("DATE FORMAT METHOD1: "+t);var e=this.formatDateToISO(t).split("-"),n=Object(k.a)(e,3),r=n[0],o=n[1],l=n[2];return"".concat(o,"/").concat(l,"/").concat(r)},parseDate:function(t){if(console.log("DATE PARSE METHOD1: "+t),!t)return null;var e=t.split("/"),n=Object(k.a)(e,3),r=n[0],o=n[1],l=n[2];return"".concat(l,"-").concat(r.padStart(2,"0"),"-").concat(o.padStart(2,"0"))},formatDateToISO:function(t){t instanceof Date||(t=new Date(t));var e=t.getFullYear(),n="".concat(t.getMonth()+1).padStart(2,"0"),r="".concat(t.getDate()).padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(r)}}},L=(n(1467),n(32)),component=Object(L.a)(N,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-left"},[e(c.a,{staticClass:"pa-5",attrs:{color:"primary",label:"","text-color":"white"}},[e(_.a,{attrs:{start:""}},[t._v("mdi-label")]),t._v(" "),e("h3",[t._v("ລາຍການໂອນສິນຄ້າຂ້າມສ້າງ")])],1),t._v(" "),e(v.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(v.a,{attrs:{"max-width":"1024"},model:{value:t.dialogOrderDetail,callback:function(e){t.dialogOrderDetail=e},expression:"dialogOrderDetail"}},[e("transfer-form",{key:t.componentKey,attrs:{"is-quotation":!1,"is-update":t.viewTransaction,headerId:t.selectedOrder},on:{reload:function(e){t.loadData(),t.dialogOrderDetail=!1},"close-dialog":function(e){t.dialogOrderDetail=!1}}})],1),t._v(" "),e(v.a,{attrs:{"max-width":"1024"},model:{value:t.cancelForm,callback:function(e){t.cancelForm=e},expression:"cancelForm"}},[e("cancel-ticket-form",{key:t.componentCancelFormKey,attrs:{id:t.OrderIdSelected},on:{"close-dialog":function(e){t.cancelForm=!1},reload:function(e){t.cancelForm=!1,t.loadData()}}})],1),t._v(" "),e(o.a,[e(l.d,[e(y.a,{attrs:{row:"",wrap:""}},[e(d.a,{attrs:{cols:"6"}},[e(D.a,{ref:"menu1",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(x.a,t._g(t._b({attrs:{label:"ຈາກວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date=t.parseDate(t.dateFormatted)}},model:{value:t.dateFormatted,callback:function(e){t.dateFormatted=e},expression:"dateFormatted"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[t._v(" "),e(f.a,{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),e(D.a,{ref:"menu2",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(x.a,t._g(t._b({attrs:{label:"ຫາວັນທີ:",hint:"MM/DD/YYYY format","persistent-hint":"","prepend-icon":"mdi-calendar"},on:{blur:function(e){t.date2=t.parseDate(t.dateFormatted2)}},model:{value:t.dateFormatted2,callback:function(e){t.dateFormatted2=e},expression:"dateFormatted2"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),e(f.a,{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.date2,callback:function(e){t.date2=e},expression:"date2"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"6"}},[e(x.a,{attrs:{"append-icon":"mdi-magnify",label:"ຊອກຫາ","single-line":"","hide-detailsx":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),e(x.a,{attrs:{"append-icon":"mdi-magnify",label:"ລະຫັດຜູ້ຂາຍ","single-line":"","hide-detailsx":""},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}})],1),t._v(" "),e(d.a,{staticClass:"text-left",attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.createSale}},[e("span",{staticClass:"mdi mdi-plus"}),t._v("Create\n          ")])],1),t._v(" "),e(d.a,{staticClass:"text-right",attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.loadData}},[e("span",{staticClass:"mdi mdi-cloud-download"}),t._v("\n            ດຶງລາຍງານ\n          ")])],1)],1)],1),t._v(" "),e(h.a),t._v(" "),e(l.c,[e(y.a,{attrs:{row:"",wrap:""}},[e(w.a,[e(d.a,{attrs:{cols:"6",lg:"6"}},[e("order-sumary-card-pos",{attrs:{showTotal:!0,gross:t.getFormatNum(t.totalSaleRaw-+this.unpaidCodOrder.saleRawNumber),orderDetail:{title:"ຍອດບິນ",amount:t.getFormatNum(t.activeheaderList.length),sale:t.getFormatNum(t.totalSale),discount:t.getFormatNum(t.totalDiscount),gross:t.getFormatNum(t.totalSale-t.totalDiscount)}}})],1)],1)],1)],1),t._v(" "),t.activeheaderList?e(m.a,{attrs:{headers:t.headers,search:t.search,items:t.activeheaderList},scopedSlots:t._u([{key:"item.bookingDate",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(n.bookingDate.split("T")[0])+"\n      ")]}},{key:"item.total",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(t.numberWithCommas(n.total))+"\n      ")]}},{key:"item.createdAt",fn:function(e){var n=e.item;return[t._v("\n        "+t._s(n.createdAt.split(".")[0])+"\n      ")]}},{key:"item.id",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"primary",text:""},on:{click:function(e){t.viewItem(o),t.wallet=!0}}},[e("i",{staticClass:"fa-regular fa-pen-to-square"})])]}},{key:"item.cancel",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.cancelItem(o),t.wallet=!0}}},[e("i",{staticClass:"fas fa-sync"})])]}},{key:"item.cusTel",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.whatsappLink(o)}}},[t._v("\n          "+t._s(o.cusTel)+"\n          "),e("a",{attrs:{href:t.whatsappContactLink,target:"_blank"}},[t._v("Whatsapp")])])]}}],null,!0)}):t._e()],1)],1)}),[],!1,null,"6afa5d13",null);e.default=component.exports;installComponents(component,{LoadingIndicator:n(248).default,TransferForm:n(1610).default,CancelTicketForm:n(815).default,OrderSumaryCardPos:n(806).default})},806:function(t,e,n){"use strict";n.r(e);var r=n(313),o=n(18),l=n(780),c=n(312),d=n(779),m=n(777),f={props:{orderDetail:{type:Object,default:""},showTotal:{type:Boolean,default:!1},gross:{type:String,default:"0"}}},v=n(32),component=Object(v.a)(f,(function(){var t=this,e=t._self._c;return e(r.a,{staticClass:"ml-4"},[e(o.d,[t._v(t._s(this.orderDetail.title))]),t._v(" "),e("div",{staticClass:"pa-4"},[e(d.a,[e(l.a,{staticStyle:{"text-align":"left"},attrs:{cols:"6",lg:"6"}},[t._v("ຈຳນວນ")]),t._v(" "),e(l.a,{staticStyle:{"text-align":"right"},attrs:{cols:"6",lg:"6"}},[t._v(t._s(this.orderDetail.amount)+" ອໍເດີ")])],1),t._v(" "),e(c.a),t._v(" "),e(d.a,[e(l.a,{staticStyle:{"text-align":"left"},attrs:{cols:"6",lg:"6"}},[t._v("ມູນຄ່າ")]),t._v(" "),e(m.a),t._v(" "),e(l.a,{staticStyle:{"text-align":"right"},attrs:{cols:"6",lg:"6"}},[t._v(t._s(this.orderDetail.sale))])],1)],1),t._v(" "),e(c.a)],1)}),[],!1,null,null,null);e.default=component.exports},810:function(t,e,n){"use strict";n.r(e);var r=n(316),o=n(313),l=n(18),c=n(780),d=n(789),m=n(754),f=n(312),v=n(779),h=n(777),_=(n(34),n(35),n(131),n(20)),y=(n(92),n(36)),D={props:{header:{type:Object,default:null},isQuotation:{type:Boolean,default:!1}},methods:{post:function(){Object(y.a)(this.$swal,"You are posting to invoice ?",this.postToInvoice)},getFormatNum:function(t){return(new Intl.NumberFormat).format(t)},toggleDialog:function(){this.$emit("close-dialog")},postToInvoice:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isloading){e.next=2;break}return e.abrupt("return");case 2:return t.isloading=!0,{startDate:t.date,endDate:t.date2},e.next=6,t.$axios.put("api/sale/postToInvoice/".concat(t.header.id)).then((function(e){t.$emit("reload"),Object(y.k)(t.$swal,"Succeed","ດຳເນີນການສຳເລັດ")})).catch((function(e){Object(y.j)(t.$swal,"Error","Could no load data "+e.Error),console.log("Error ===>: "+e)}));case 6:t.isloading=!1;case 7:case"end":return e.stop()}}),e)})))()}},data:function(){return{search:"",isloading:!1,headers:[{text:"ສິນຄ້າ",align:"start",value:"product.pro_name"},{text:"ຈຳນວນ",align:"end",value:"quantity"},{text:"ລາຄາ",align:"end",value:"price",sortable:!0},{text:"ສ່ວນຫລຸດ",align:"end",value:"discount",sortable:!0},{text:"ລວມ",align:"end",value:"total",sortable:!1}]}}},w=n(32),component=Object(w.a)(D,(function(){var t=this,e=t._self._c;return e("div",[e(m.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(o.a,[e(l.b,[e(v.a,[e(c.a,{attrs:{cols:"6"}},[t._v("\n                    "+t._s(t.isQuotation?"Quotation #":"Invoice #")+"\n                    "+t._s(t.header.id)+"\n                ")]),t._v(" "),t.isQuotation?e(c.a,{staticStyle:{"text-align":"right"},attrs:{cols:"6"}},[e(r.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined"},on:{click:t.post}},[t._v("\n                        Post to invoice"),e("span",{staticClass:"mdi mdi-cloud-download"})])],1):t._e()],1)],1),t._v(" "),e(f.a),t._v(" "),e(l.c,[e(o.a,[e(l.c,[e("div",[e(v.a,[e(c.a,{attrs:{cols:"4"}},[e(v.a,[e(c.a,{attrs:{cols:"12"}},[t._v("ວັນທີ: "+t._s(t.header.bookingDate)+" ")]),t._v(" "),e(c.a,{attrs:{cols:"12"}},[t._v("ຊື່ລູກຄ້າ: "+t._s(t.header.client.name))]),t._v(" "),e(c.a,{attrs:{cols:"12"}},[t._v("ເບີໂທ: "+t._s(t.header.client.telephone))]),t._v(" "),e(c.a,{attrs:{cols:"12"}},[t._v("ບໍລິສັດ: "+t._s(t.header.client.company))]),t._v(" "),e(c.a,{attrs:{cols:"12"}},[t._v("ການຊຳລະ: "+t._s(t.header.payment.payment_code)+" ")])],1)],1),t._v(" "),e(c.a,{attrs:{cols:"4"}},[e(v.a,[e(c.a,{attrs:{cols:"12"}},[t._v("ສະກຸນ: "+t._s(t.header.currency.code))]),t._v(" "),e(c.a,{attrs:{cols:"12"}},[t._v("ອັດຕາແລກປ່ຽນ: "+t._s(t.header.exchangeRate))]),t._v(" "),e(c.a,{attrs:{cols:"12"}},[t._v("ສ່ວນຫລຸດ: "+t._s(t.header.discount))]),t._v(" "),e(c.a,{attrs:{cols:"12"}},[t._v("ຍອດລວມທັງໝົດ: "+t._s(t.getFormatNum(t.header.total)))])],1)],1),t._v(" "),e(c.a,{staticStyle:{"text-align":"end"},attrs:{cols:"4"}},[e(v.a,[e(c.a,{attrs:{cols:"12"}},[t._v("ຜູ້ລົງ: "+t._s(t.header.user.cus_id)+" ")]),t._v(" "),e(c.a,{attrs:{cols:"12"}},[t._v("ຊື່: "+t._s(t.header.user.cus_name))])],1)],1)],1)],1)])],1),t._v(" "),e(f.a),t._v(" "),t.header.lines?e(d.a,{attrs:{headers:t.headers,search:t.search,items:t.header.lines},scopedSlots:t._u([{key:"item.function",fn:function(n){var o=n.item;return[e(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.editItem(o),t.wallet=!0}}},[e("i",{staticClass:"fas fa-wallet"})])]}},{key:"item.price",fn:function(e){var n=e.item;return[t._v("\n                    "+t._s(t.getFormatNum(n.price))+"\n                ")]}},{key:"item.discount",fn:function(e){var n=e.item;return[t._v("\n                    "+t._s(t.getFormatNum(n.discount))+"\n                ")]}},{key:"item.total",fn:function(e){var n=e.item;return[t._v("\n                    "+t._s(t.getFormatNum(n.total))+"\n                ")]}}],null,!0)}):t._e()],1),t._v(" "),e(l.a,[e(h.a),t._v(" "),e(r.a,{attrs:{color:"warning",rounded:"",variant:"text"},on:{click:t.toggleDialog}},[t._v("\n                Close\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LoadingIndicator:n(248).default})}}]);