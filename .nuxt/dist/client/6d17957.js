(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{1289:function(t,e,r){"use strict";r.r(e);var o=r(782),n=r(316),c=r(313),l=r(18),d=r(317),f=r(780),m=r(754),h=r(312),v=r(781),y=r(167),C=r(779),_=r(777),w=(r(34),r(20)),x=(r(66),r(5),r(121),r(92),r(36)),k={props:{category:{type:Object,require:!0},isCreate:{type:Boolean,require:!0}},data:function(){return{productList:[],selectProductId:null,localCategory:this.category,isloading:!1,nameRules:[function(t){return!!t||"Name is required"},function(t){return t&&t.length<=150||"Name must be less than 20 characters"}]}},created:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loadEntry();case 1:case"end":return e.stop()}}),e)})))()},methods:{commitRecord:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isloading){e.next=13;break}if(t.isloading=!0,r=t.isCreate?"api/webproductgroup/create":"api/webproductgroup/update/".concat(t.localCategory.id),!t.isCreate){e.next=8;break}return e.next=6,t.$axios.post(r,t.localCategory).then((function(e){return t.refreshData(),t.$emit("close-dialog"),Object(x.k)(t.$swal,"Succeed","Your transaction completed")})).catch((function(e){return console.log("Error: ",e),Object(x.j)(t.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ")}));case 6:e.next=12;break;case 8:return console.log("update category product"),t.localCategory.productList=t.localCategory.products,e.next=12,t.$axios.put(r,t.localCategory).then((function(e){return t.refreshData(),t.$emit("close-dialog"),Object(x.k)(t.$swal,"Succeed","Your transaction completed")})).catch((function(e){return console.log("Error: ",e),Object(x.j)(t.$swal,"Error","ເກີດຂໍ້ຜິດພາດ ກະລຸນາລອງໃຫມ່ ພາຍຫລັງ")}));case 12:t.isloading=!1;case 13:case"end":return e.stop()}}),e)})))()},formatNumber:function(t){return Object(x.e)(t)},addProductToGroup:function(){var t=this;if(console.log("Add product to group handler"),this.selectProductId){var e=this.productList.find((function(e){return e.id==t.selectProductId}));if(console.log("Authority ".concat(e.id)),0==this.localCategory.products.length)console.log("TEHERE IS NO TERMINAL"),this.localCategory.products.push(e);else if("undefined"==this.localCategory.products)this.localCategory.products.push(e);else{var r=this.localCategory.products.find((function(e){return e.id==t.selectProductId}));console.log("ADD TERMINAL ".concat(r)),r||this.localCategory.products.push(e)}}},removeProductFromGroup:function(t){console.log("Remove product to group handler");var e=this.localCategory.products.indexOf(t);this.localCategory.products.splice(e,1)},loadEntry:function(){var t=this;return Object(w.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("===> Update form record load"),e.next=3,t.$axios.get("api/product/find").then((function(e){t.productList=e.data,t.selectProductId=t.productList[0].id})).catch((function(t){console.log("Cannot fetch data "+t)}));case 3:case"end":return e.stop()}}),e)})))()},refreshData:function(){this.$emit("reload-data")}},computed:{}},j=r(32),component=Object(j.a)(k,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center"},[e(m.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[e("loading-indicator")],1),t._v(" "),e(c.a,{staticClass:"pa-4"},[e(l.d,[e(d.a,{staticClass:"ma-0",attrs:{color:"primary",label:"","text-color":"white"}},[e(y.a,{attrs:{start:""}},[t._v("mdi-label")]),t._v("\n                "+t._s("ກຸ່ມສິນຄ້າຫນ້າເວັບ: ".concat(t.category.name," "))+"\n            ")],1)],1),t._v(" "),e(l.c,[e(v.a,{ref:"form"},[e(o.a,{attrs:{"item-text":"pro_name","item-value":"id",items:t.productList,label:"ສິນຄ້າ*"},model:{value:t.selectProductId,callback:function(e){t.selectProductId=e},expression:"selectProductId"}})],1),t._v(" "),e("div",[e(C.a,{attrs:{justify:"center",align:"center"}},[e(f.a,{attrs:{cols:"12"}},[e(n.a,{staticClass:"primary",attrs:{size:"large",variant:"outlined",rounded:""},on:{click:t.addProductToGroup}},[e("span",{staticClass:"mdi mdi-note-plus-outline"}),t._v("\n                            ເພີ່ມສິນຄ້າເຂົ້າກຸ່ມ\n                        ")])],1),t._v(" "),e(f.a,{attrs:{cols:"12"}},[e(h.a),t._v(" "),e("div",{staticClass:"mx-2"},[t._v("ສິນຄ້າ ທີ່ເລືອກ")]),t._v(" "),e(h.a)],1)],1),t._v(" "),e(C.a,{attrs:{"no-gutters":""}},t._l(t.localCategory.products,(function(r){return e(d.a,{key:r.id,staticClass:"ma-2",attrs:{color:"warning",variant:"outlined"},on:{click:function(e){return t.removeProductFromGroup(r)}}},[t._v("\n                        "+t._s(r.id)+" - "+t._s(r.pro_name)+"\n                    ")])})),1)],1)],1),t._v(" "),e(l.a,[e(_.a),t._v(" "),e(n.a,{attrs:{color:"warning",rounded:"",variant:"text"},on:{click:function(e){return t.$emit("close-dialog")}}},[t._v("\n                Close\n            ")]),t._v(" "),e(n.a,{attrs:{color:"primary",rounded:"",variant:"text"},on:{click:t.commitRecord}},[t._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{LoadingIndicator:r(248).default})}}]);