(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1254:function(e,t,o){var content=o(1546);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(16).default)("7069ae4f",content,!0,{sourceMap:!1})},1545:function(e,t,o){"use strict";o(1254)},1546:function(e,t,o){var n=o(15)((function(i){return i[1]}));n.push([e.i,'.modal-overlay[data-v-117ca84b]{align-items:center;background-color:rgba(0,0,0,.6);display:flex;height:100%;justify-content:center;left:0;padding:20px;position:fixed;top:0;width:100%;z-index:1050}.enhanced-dialog[data-v-117ca84b]{max-height:90vh;max-width:1200px}.enhanced-dialog[data-v-117ca84b],.invoice-browser-dialog[data-v-117ca84b]{background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.3);display:flex;flex-direction:column;overflow:hidden;width:100%}.invoice-browser-dialog[data-v-117ca84b]{max-height:80vh;max-width:1000px}.modal-header[data-v-117ca84b]{background:linear-gradient(135deg,#28a745,#20c997);border-bottom:1px solid #e9ecef;color:#fff;justify-content:space-between;padding:20px}.modal-header[data-v-117ca84b],.modal-title[data-v-117ca84b]{align-items:center;display:flex}.modal-title[data-v-117ca84b]{font-size:18px;font-weight:600;gap:10px;margin:0}.close-button[data-v-117ca84b]{background:none;border:none;border-radius:4px;color:#fff;cursor:pointer;font-size:20px;padding:5px;transition:background .2s}.close-button[data-v-117ca84b]:hover{background:hsla(0,0%,100%,.2)}.modal-body[data-v-117ca84b]{flex:1;overflow:hidden}.loading-state[data-v-117ca84b],.modal-body[data-v-117ca84b]{display:flex;flex-direction:column}.loading-state[data-v-117ca84b]{align-items:center;color:#666;justify-content:center;padding:40px}.spinner[data-v-117ca84b]{animation:spin-117ca84b 1s linear infinite;border:4px solid #f3f3f3;border-radius:50%;border-top-color:#28a745;height:40px;margin-bottom:15px;width:40px}@keyframes spin-117ca84b{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.receipt-form[data-v-117ca84b]{display:flex;flex:1;flex-direction:column;overflow:hidden}.tab-navigation[data-v-117ca84b]{background:#f8f9fa;border-bottom:1px solid #e9ecef;display:flex}.tab-btn[data-v-117ca84b]{align-items:center;background:none;border:none;color:#666;cursor:pointer;display:flex;flex:1;font-size:14px;font-weight:500;gap:8px;justify-content:center;padding:15px 20px;position:relative;transition:all .2s}.tab-btn[data-v-117ca84b]:hover{background:rgba(40,167,69,.1);color:#28a745}.tab-btn.active[data-v-117ca84b]{background:#fff;border-bottom:3px solid #28a745;color:#28a745}.line-count[data-v-117ca84b]{background:#28a745;border-radius:12px;color:#fff;font-size:12px;min-width:20px;padding:2px 8px;text-align:center}.tab-content[data-v-117ca84b]{flex:1;overflow-y:auto;padding:0}.form-section[data-v-117ca84b]{border-bottom:1px solid #f0f0f0;padding:25px}.form-section[data-v-117ca84b]:last-child{border-bottom:none}.section-title[data-v-117ca84b]{align-items:center;border-bottom:2px solid #e9ecef;color:#333;display:flex;font-size:16px;font-weight:600;gap:10px;margin-bottom:20px;padding-bottom:10px}.section-title i[data-v-117ca84b]{color:#28a745}.form-row[data-v-117ca84b]{display:flex;flex-wrap:wrap;margin:-10px}.form-group[data-v-117ca84b]{margin-bottom:20px;padding:10px}.col-md-6[data-v-117ca84b]{flex:0 0 50%;max-width:50%}.form-group label[data-v-117ca84b]{color:#333;display:block;font-size:14px;font-weight:500;margin-bottom:5px}.form-group label.required[data-v-117ca84b]:after{color:#e74c3c;content:" *"}.form-control[data-v-117ca84b]{border:1px solid #ddd;border-radius:6px;font-size:14px;padding:10px 12px;transition:border-color .2s,box-shadow .2s;width:100%}.form-control[data-v-117ca84b]:focus{border-color:#28a745;box-shadow:0 0 0 3px rgba(40,167,69,.1);outline:none}.form-control.is-invalid[data-v-117ca84b]{border-color:#e74c3c;box-shadow:0 0 0 3px rgba(231,76,60,.1)}.form-control-sm[data-v-117ca84b]{font-size:13px;padding:6px 8px}.invalid-feedback[data-v-117ca84b]{color:#e74c3c;display:block;font-size:12px;margin-top:5px;width:100%}.auto-calculated-field[data-v-117ca84b]{background-color:#f8f9fa!important;border-style:dashed!important;color:#495057!important;cursor:not-allowed;font-weight:600}.auto-calculated-field[data-v-117ca84b]:disabled{opacity:.8}.form-group label.auto-calculated[data-v-117ca84b]{align-items:center;color:#28a745;display:flex;font-weight:600;gap:8px}.form-text.text-muted[data-v-117ca84b]{align-items:center;color:#6c757d!important;display:flex;font-size:12px;gap:5px;margin-top:5px}.invoice-selector[data-v-117ca84b]{display:flex;gap:10px}.invoice-selector select[data-v-117ca84b]{flex:1}.btn-browse-invoice[data-v-117ca84b]{padding:10px 16px;white-space:nowrap}.allocation-summary[data-v-117ca84b],.amount-summary[data-v-117ca84b]{background:#f8f9fa;border-left:4px solid #28a745;border-radius:8px;margin:20px 25px;padding:20px}.totals-grid[data-v-117ca84b]{grid-gap:15px;display:grid;gap:15px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.total-item[data-v-117ca84b]{align-items:center;border-bottom:1px solid #e9ecef;display:flex;justify-content:space-between;padding:8px 0}.total-item[data-v-117ca84b]:last-child{border-bottom:none}.total-item.balance-warning[data-v-117ca84b]{background:#fff3cd;border:1px solid #ffeaa7;border-radius:6px;display:none;padding:12px}.total-item .amount[data-v-117ca84b]{color:#333;font-weight:600}.total-item .amount.received[data-v-117ca84b]{color:#28a745}.total-item .amount.allocated[data-v-117ca84b]{color:#007bff}.total-item .amount.balance.negative[data-v-117ca84b]{color:#dc3545}.total-item .amount.balance.positive[data-v-117ca84b]{color:#ffc107}.success-balance[data-v-117ca84b]{background:#d4edda;border-radius:6px;padding:8px 12px}.amount.balanced[data-v-117ca84b]{color:#155724!important;font-weight:600;gap:5px}.amount.balanced[data-v-117ca84b],.balance-info[data-v-117ca84b]{align-items:center;display:flex}.balance-info[data-v-117ca84b]{background:#e7f3ff;border:1px solid #bee5eb;border-radius:6px;color:#0c5460;font-size:14px;gap:8px;margin-top:15px;padding:12px}.balance-message[data-v-117ca84b]{display:none}.allocation-section[data-v-117ca84b]{padding:25px}.allocation-header[data-v-117ca84b]{align-items:center;display:flex;justify-content:space-between;margin-bottom:20px}.allocation-info[data-v-117ca84b]{align-items:center;display:flex;gap:15px}.invoice-info[data-v-117ca84b]{color:#666;font-size:14px}.allocation-count-info[data-v-117ca84b]{background:#e9ecef;border-radius:20px;color:#666;font-size:12px;font-weight:500;padding:8px 12px}.no-invoice-state[data-v-117ca84b],.no-lines-state[data-v-117ca84b],.no-results-state[data-v-117ca84b]{background:#f8f9fa;border:2px dashed #dee2e6;border-radius:8px;padding:60px 20px;text-align:center}.empty-content i[data-v-117ca84b]{color:#dee2e6;font-size:64px;margin-bottom:20px}.empty-content h4[data-v-117ca84b]{color:#666;margin-bottom:10px}.empty-content p[data-v-117ca84b]{color:#999;margin-bottom:30px}.allocation-notice[data-v-117ca84b]{align-items:center;background:#e7f3ff;border-left:4px solid #007bff;border-radius:6px;color:#495057;display:flex;font-size:14px;gap:10px;margin-bottom:20px;padding:15px}.allocation-table-container[data-v-117ca84b]{border:1px solid #e9ecef;border-radius:8px;margin-bottom:20px;overflow:hidden}.allocation-table .table[data-v-117ca84b],.invoice-table-container .table[data-v-117ca84b]{border-collapse:collapse;margin:0;width:100%}.allocation-table .table th[data-v-117ca84b],.invoice-table-container .table th[data-v-117ca84b]{background:#f8f9fa;border-bottom:2px solid #dee2e6;font-size:13px;font-weight:600;padding:12px 8px;text-align:center}.allocation-table .table td[data-v-117ca84b],.invoice-table-container .table td[data-v-117ca84b]{border-top:1px solid #dee2e6;font-size:13px;padding:8px;vertical-align:middle}.line-number[data-v-117ca84b]{color:#666;font-weight:600;text-align:center}.invoice-line-display[data-v-117ca84b]{line-height:1.4}.line-description[data-v-117ca84b]{color:#333;font-weight:500;margin-bottom:4px}.line-details[data-v-117ca84b]{color:#666;font-size:12px}.invoice-line-total[data-v-117ca84b],.remaining-amount[data-v-117ca84b]{color:#28a745;font-weight:600;text-align:right}.over-allocated[data-v-117ca84b]{color:#dc3545!important}.fully-allocated[data-v-117ca84b]{color:#6c757d!important}.allocation-row[data-v-117ca84b],.invoice-row[data-v-117ca84b]{transition:background-color .2s}.allocation-row[data-v-117ca84b]:hover,.invoice-row[data-v-117ca84b]:hover{background-color:rgba(40,167,69,.05)}.quick-allocation-actions[data-v-117ca84b]{align-items:center;border-top:1px solid #e9ecef;display:flex;justify-content:space-between;margin-top:10px;padding:15px 0}.quick-actions-left[data-v-117ca84b]{display:flex;gap:10px}.allocation-helper[data-v-117ca84b]{align-items:center;color:#666;display:flex;font-size:12px;font-style:italic;gap:5px}.search-section[data-v-117ca84b]{background:#f8f9fa;border-bottom:1px solid #e9ecef;padding:20px}.search-input-group[data-v-117ca84b]{max-width:400px;position:relative}.search-icon[data-v-117ca84b]{color:#666;font-size:16px;left:12px;position:absolute;top:50%;transform:translateY(-50%)}.search-input[data-v-117ca84b]{border-radius:8px;font-size:16px;padding-left:40px}.invoice-list[data-v-117ca84b]{flex:1;max-height:500px;overflow-y:auto}.customer-info[data-v-117ca84b]{line-height:1.4}.customer-name[data-v-117ca84b]{color:#333;font-weight:500}.customer-email[data-v-117ca84b]{color:#666;font-size:12px}.amount-cell[data-v-117ca84b]{color:#28a745;font-weight:600;text-align:right}.status-badge[data-v-117ca84b]{border-radius:12px;font-size:11px;font-weight:500;padding:4px 8px;text-transform:uppercase}.status-draft[data-v-117ca84b]{background:#ffeaa7;color:#fdcb6e}.status-sent[data-v-117ca84b]{background:#74b9ff;color:#0984e3}.status-paid[data-v-117ca84b]{background:#00b894;color:#00a085}.status-overdue[data-v-117ca84b]{background:#ff7675;color:#d63031}.status-cancelled[data-v-117ca84b]{background:#636e72;color:#2d3436}.btn[data-v-117ca84b]{align-items:center;border:none;border-radius:4px;cursor:pointer;display:inline-flex;font-size:14px;gap:8px;padding:8px 16px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s ease}.btn-primary[data-v-117ca84b]{background:#28a745;color:#fff}.btn-secondary[data-v-117ca84b]{background:#6c757d;color:#fff}.btn-outline-primary[data-v-117ca84b]{background:#fff;border:2px solid #007bff;color:#007bff}.btn-outline-primary[data-v-117ca84b]:hover{background:#007bff;color:#fff}.btn-outline-success[data-v-117ca84b]{background:#fff;border:2px solid #28a745;color:#28a745}.btn-outline-info[data-v-117ca84b]{background:#fff;border:2px solid #17a2b8;color:#17a2b8}.btn-outline-warning[data-v-117ca84b]{background:#fff;border:2px solid #ffc107;color:#ffc107}.btn-danger[data-v-117ca84b]{background:#dc3545;color:#fff}.btn[data-v-117ca84b]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}.btn[data-v-117ca84b]:disabled{cursor:not-allowed;opacity:.6;transform:none}.btn-sm[data-v-117ca84b]{font-size:12px;padding:6px 12px}.btn-lg[data-v-117ca84b]{font-size:16px;padding:12px 30px}.modal-footer[data-v-117ca84b]{background:#f8f9fa;border-top:1px solid #e9ecef;justify-content:space-between;padding:20px}.footer-info[data-v-117ca84b],.modal-footer[data-v-117ca84b]{align-items:center;display:flex}.result-count[data-v-117ca84b]{color:#666;font-size:14px}.footer-actions[data-v-117ca84b]{display:flex;gap:10px;justify-content:flex-end}@media (max-width:768px){.enhanced-dialog[data-v-117ca84b],.invoice-browser-dialog[data-v-117ca84b]{border-radius:0;height:100%;max-height:100vh;max-width:100%}.totals-grid[data-v-117ca84b]{grid-template-columns:1fr}.allocation-header[data-v-117ca84b]{flex-direction:column;gap:15px}.allocation-info[data-v-117ca84b]{flex-direction:column;gap:10px}.allocation-table-container[data-v-117ca84b],.invoice-table-container[data-v-117ca84b]{overflow-x:auto}.allocation-table .table[data-v-117ca84b],.invoice-table-container .table[data-v-117ca84b]{min-width:900px}.footer-actions[data-v-117ca84b]{flex-direction:column}.footer-actions .btn[data-v-117ca84b]{justify-content:center;width:100%}.tab-btn[data-v-117ca84b]{font-size:12px;gap:4px;padding:12px 8px}.form-row[data-v-117ca84b],.tab-btn[data-v-117ca84b]{flex-direction:column}.col-md-6[data-v-117ca84b]{flex:1;max-width:100%}.invoice-selector[data-v-117ca84b]{flex-direction:column;gap:10px}.quick-allocation-actions[data-v-117ca84b]{flex-direction:column;gap:15px}.search-input-group[data-v-117ca84b]{max-width:100%}}@media (max-width:480px){.modal-header[data-v-117ca84b]{padding:15px}.modal-title[data-v-117ca84b]{font-size:16px}.form-section[data-v-117ca84b]{padding:20px 15px}.section-title[data-v-117ca84b]{font-size:14px}.modal-footer[data-v-117ca84b]{padding:15px}.allocation-section[data-v-117ca84b]{padding:20px 15px}.no-invoice-state[data-v-117ca84b],.no-lines-state[data-v-117ca84b],.no-results-state[data-v-117ca84b]{padding:40px 15px}.empty-content i[data-v-117ca84b]{font-size:48px}.allocation-summary[data-v-117ca84b],.amount-summary[data-v-117ca84b]{margin:20px 15px}}',""]),n.locals={},e.exports=n},1641:function(e,t,o){"use strict";o.r(t);o(44),o(9),o(5),o(34),o(7),o(67),o(11),o(12);var n=o(3),r=o(20);o(92),o(39),o(51),o(8),o(66),o(104),o(339),o(10),o(100),o(30);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={name:"ReceiveHeaderMaintain",props:{visible:{type:Boolean,default:!1},receipt:{type:Object,default:null},invoices:{type:Array,default:function(){return[]}},users:{type:Array,default:function(){return[]}}},data:function(){return{activeTab:"header",formLoading:!1,saving:!1,errors:{},allocationLines:[],nextTempId:1,selectedInvoice:null,showInvoiceBrowser:!1,invoiceBrowserLoading:!1,filteredInvoices:[],invoiceSearchQuery:"",form:{id:null,receiptNumber:"",bookingDate:"",receivedDate:"",invoiceHeaderId:"",totalReceivedAmount:0,paymentMethod:"cash",referenceNumber:"",notes:"",inputterId:"",reason:""}}},computed:{isEdit:function(){return!(!this.receipt||!this.receipt.id)},user:function(){return this.$auth.user||{}},calculatedAllocatedTotal:function(){return this.allocationLines.reduce((function(e,t){return e+(parseFloat(t.allocatedAmount)||0)}),0)},allocationBalance:function(){return 0},autoCalculatedTotal:function(){return this.calculatedAllocatedTotal},availableInvoiceLines:function(){return this.selectedInvoice&&this.selectedInvoice.invoiceLines||[]},isFormValid:function(){var e=this.form.receiptNumber&&this.form.bookingDate&&this.form.receivedDate&&this.form.invoiceHeaderId&&this.form.paymentMethod&&(!this.isEdit||this.form.reason),t=this.allocationLines.length>0&&this.allocationLines.some((function(e){return e.invoiceLineId&&(parseFloat(e.allocatedAmount)||0)>0&&e.allocationDate}))&&(parseFloat(this.form.totalReceivedAmount)||0)>0;return e&&t},searchFilteredInvoices:function(){if(!this.invoiceSearchQuery)return this.filteredInvoices;var e=this.invoiceSearchQuery.toLowerCase();return this.filteredInvoices.filter((function(t){return t.invoiceNumber.toLowerCase().includes(e)||t.client&&t.client.name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)}))}},watch:{visible:{handler:function(e){e?this.initializeDialog():this.resetDialog()},immediate:!0},receipt:{handler:function(){this.visible&&this.initializeDialog()}},calculatedAllocatedTotal:{handler:function(e){this.form.totalReceivedAmount=e},immediate:!0},"form.receivedDate":{handler:function(e){e&&this.allocationLines.length>0&&this.allocationLines.forEach((function(t){t.allocationDate&&""!==t.allocationDate||(t.allocationDate=e)}))}}},methods:{updateSelectedInvoice:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("üîç updateSelectedInvoice called"),console.log("üìù Current form.invoiceHeaderId:",e.form.invoiceHeaderId),console.log("üìã Available invoices:",e.invoices.length),e.selectedInvoice=null,e.form.invoiceHeaderId){t.next=8;break}return console.log("‚ùå No invoice selected"),e.isEdit||(e.allocationLines=[]),t.abrupt("return");case 8:if(n=parseInt(e.form.invoiceHeaderId),console.log("üîç Looking for invoice ID:",n),e.selectedInvoice=e.invoices.find((function(e){return console.log("üîç Comparing:",e.id,"with",n),e.id===n})),e.selectedInvoice){t.next=15;break}return console.log("‚ùå Invoice not found in main invoices array, trying to load from API..."),t.next=15,e.loadInvoiceById(n);case 15:if(e.selectedInvoice){t.next=19;break}return console.log("‚ùå Could not find or load selected invoice"),e.showToast("‡∫ö‡ªç‡ªà‡∫û‡∫ª‡∫ö‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡∫ó‡∫µ‡ªà‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å","error"),t.abrupt("return");case 19:if(console.log("‚úÖ Selected invoice found:",e.selectedInvoice.invoiceNumber),console.log("üìÑ Invoice lines:",(null===(o=e.selectedInvoice.invoiceLines)||void 0===o?void 0:o.length)||0),e.selectedInvoice.invoiceLines&&0!==e.selectedInvoice.invoiceLines.length){t.next=25;break}return console.log("üîÑ Loading invoice lines..."),t.next=25,e.loadSelectedInvoiceLines();case 25:e.selectedInvoice.invoiceLines&&e.selectedInvoice.invoiceLines.length>0?(console.log("‚úÖ Creating allocation lines from",e.selectedInvoice.invoiceLines.length,"invoice lines"),e.isEdit?console.log("‚ÑπÔ∏è Edit mode - not auto-creating allocation lines"):e.createAllocationLinesFromInvoice()):(console.log("‚ùå No invoice lines available"),e.showToast("‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡∫ô‡∫µ‡ªâ‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤","warning")),console.log("üìä Final allocation lines count:",e.allocationLines.length);case 27:case"end":return t.stop()}}),t)})))()},loadInvoiceById:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n,data;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,console.log("üîÑ Loading invoice by ID:",e),o.next=4,t.$axios.get("/api/ar-invoices/".concat(e),{params:{include:["client","currency","invoiceLines"]}});case 4:n=o.sent,data=n.data,console.log("üì• API response for single invoice:",data),data.success&&data.data?(t.selectedInvoice=data.data,console.log("‚úÖ Invoice loaded successfully:",t.selectedInvoice.invoiceNumber)):data.invoiceNumber&&(t.selectedInvoice=data,console.log("‚úÖ Invoice loaded (alt structure):",t.selectedInvoice.invoiceNumber)),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(0),console.error("‚ùå Error loading invoice by ID:",o.t0),t.showToast("‡∫°‡∫µ‡∫õ‡∫±‡∫ô‡∫´‡∫≤‡ªÉ‡∫ô‡∫Å‡∫≤‡∫ô‡ªÇ‡∫´‡∫º‡∫î‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ","error");case 14:case"end":return o.stop()}}),o,null,[[0,10]])})))()},loadSelectedInvoiceLines:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectedInvoice){t.next=3;break}return console.log("‚ùå No selected invoice to load lines for"),t.abrupt("return");case 3:return t.prev=3,console.log("üîÑ Loading invoice lines for:",e.selectedInvoice.invoiceNumber),t.next=7,e.$axios.get("/api/ar-invoice-lines/by-header/".concat(e.selectedInvoice.id));case 7:o=t.sent,data=o.data,console.log("üì• Invoice lines API response:",data),data.success&&data.data&&Array.isArray(data.data)?(e.selectedInvoice.invoiceLines=data.data,console.log("‚úÖ Invoice lines loaded:",data.data.length)):Array.isArray(data)?(e.selectedInvoice.invoiceLines=data,console.log("‚úÖ Invoice lines loaded (alt structure):",data.length)):(console.warn("‚ùì Unexpected response structure:",data),e.selectedInvoice.invoiceLines=[]),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(3),console.error("‚ùå Error loading invoice lines:",t.t0),e.selectedInvoice.invoiceLines=[],e.showToast("‡∫°‡∫µ‡∫õ‡∫±‡∫ô‡∫´‡∫≤‡ªÉ‡∫ô‡∫Å‡∫≤‡∫ô‡ªÇ‡∫´‡∫º‡∫î‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ","error");case 18:case"end":return t.stop()}}),t,null,[[3,13]])})))()},createAllocationLinesFromInvoice:function(){var e=this;if(console.log("üîß createAllocationLinesFromInvoice called"),this.selectedInvoice){if(!this.selectedInvoice.invoiceLines||0===this.selectedInvoice.invoiceLines.length)return console.log("‚ùå No invoice lines available"),void(this.allocationLines=[]);console.log("‚úÖ Creating allocation lines from",this.selectedInvoice.invoiceLines.length,"invoice lines"),this.allocationLines=this.selectedInvoice.invoiceLines.map((function(line,t){var o={tempId:e.nextTempId++,lineNumber:t+1,invoiceLineId:line.id,invoiceLine:line,allocatedAmount:0,allocationDate:e.form.receivedDate||(new Date).toISOString().split("T")[0],notes:""};return console.log("üìù Created allocation ".concat(t+1,":"),{lineNumber:o.lineNumber,invoiceLineId:o.invoiceLineId,description:line.description,lineTotal:line.lineTotal}),o})),console.log("üéâ Successfully created",this.allocationLines.length,"allocation lines"),this.$forceUpdate()}else console.log("‚ùå No selected invoice")},onInvoiceChange:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("üîÑ onInvoiceChange triggered"),t.next=3,e.updateSelectedInvoice();case 3:e.clearFieldError("invoiceHeaderId"),e.allocationLines.length>0&&(console.log("üîÑ Switching to allocations tab"),e.$nextTick((function(){e.activeTab="allocations"})));case 5:case"end":return t.stop()}}),t)})))()},openInvoiceBrowser:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("üîÑ Opening invoice browser"),e.showInvoiceBrowser=!0,e.invoiceBrowserLoading=!0,e.invoiceSearchQuery="",t.prev=4,t.next=7,e.$axios.get("/api/ar-invoices",{params:{status:["draft","sent"],include:["client","currency","invoiceLines"],limit:100}});case 7:o=t.sent,data=o.data,console.log("üì• Invoice browser API response:",data),data.success&&data.data&&data.data.invoices&&Array.isArray(data.data.invoices)?(e.filteredInvoices=data.data.invoices,console.log("‚úÖ Loaded",e.filteredInvoices.length,"invoices for browser")):data.success&&data.data&&Array.isArray(data.data)?(e.filteredInvoices=data.data,console.log("‚úÖ Loaded",e.filteredInvoices.length,"invoices (alt structure)")):Array.isArray(data)?(e.filteredInvoices=data,console.log("‚úÖ Loaded",e.filteredInvoices.length,"invoices (direct array)")):(console.warn("‚ùì Unexpected response structure:",data),e.filteredInvoices=[]),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(4),console.error("‚ùå Error loading invoices for browser:",t.t0),e.showToast("‡∫°‡∫µ‡∫õ‡∫±‡∫ô‡∫´‡∫≤‡ªÉ‡∫ô‡∫Å‡∫≤‡∫ô‡ªÇ‡∫´‡∫º‡∫î‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ","error"),e.filteredInvoices=[];case 18:return t.prev=18,e.invoiceBrowserLoading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[4,13,18,21]])})))()},selectInvoiceFromBrowser:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("üéØ Selecting invoice from browser:",e.invoiceNumber),t.form.invoiceHeaderId=e.id,-1===(n=t.invoices.findIndex((function(t){return t.id===e.id})))?(console.log("‚ûï Adding invoice to main array"),t.invoices.push(e)):(console.log("üîÑ Updating existing invoice in main array"),t.invoices[n]=e),t.closeInvoiceBrowser(),o.next=7,t.onInvoiceChange();case 7:t.clearFieldError("invoiceHeaderId");case 8:case"end":return o.stop()}}),o)})))()},initializeDialog:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.activeTab="header",e.clearErrors(),!e.receipt){t.next=10;break}return e.form={id:e.receipt.id,receiptNumber:e.receipt.receiptNumber,bookingDate:e.receipt.bookingDate?e.receipt.bookingDate.split("T")[0]:"",receivedDate:e.receipt.receivedDate?e.receipt.receivedDate.split("T")[0]:"",invoiceHeaderId:e.receipt.invoiceHeaderId,totalReceivedAmount:e.receipt.totalReceivedAmount||0,paymentMethod:e.receipt.paymentMethod||"cash",referenceNumber:e.receipt.referenceNumber||"",notes:e.receipt.notes||"",inputterId:e.receipt.inputterId||"",reason:""},t.next=6,e.loadAllocationLines(e.receipt.id);case 6:return t.next=8,e.updateSelectedInvoice();case 8:t.next=16;break;case 10:e.resetForm(),o=(new Date).toISOString().split("T")[0],e.form.bookingDate=o,e.form.receivedDate=o,e.allocationLines=[],e.user&&e.user.id&&(e.form.inputterId=e.user.id);case 16:case"end":return t.stop()}}),t)})))()},resetDialog:function(){this.resetForm(),this.allocationLines=[],this.selectedInvoice=null,this.clearErrors(),this.activeTab="header",this.formLoading=!1,this.saving=!1,this.showInvoiceBrowser=!1,this.filteredInvoices=[],this.invoiceSearchQuery=""},loadAllocationLines:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n,data;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,t.$axios.get("/api/ar-receive-lines/by-header/".concat(e));case 3:n=o.sent,data=n.data,t.allocationLines=data.data||[],t.allocationLines.forEach((function(e){e.tempId||(e.tempId=t.nextTempId++),e.allocationDate&&(e.allocationDate=e.allocationDate.split("T")[0])})),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(0),console.error("Error loading allocation lines:",o.t0),t.allocationLines=[];case 13:case"end":return o.stop()}}),o,null,[[0,9]])})))()},closeInvoiceBrowser:function(){this.showInvoiceBrowser=!1,this.filteredInvoices=[],this.invoiceSearchQuery=""},allocateFullAmount:function(){0!==this.allocationLines.length&&this.selectedInvoice&&this.allocationLines.forEach((function(e){if(e.invoiceLine){var t=parseFloat(e.invoiceLine.lineTotal)||0;e.allocatedAmount=t.toFixed(2)}}))},allocateEqually:function(){if(0!==this.allocationLines.length&&this.selectedInvoice){var e=(parseFloat(this.selectedInvoice.totalAmount)||0)/this.allocationLines.length;this.allocationLines.forEach((function(t){t.allocatedAmount=e.toFixed(2)}))}},allocateProportionally:function(){0!==this.allocationLines.length&&this.selectedInvoice&&this.allocationLines.forEach((function(e){if(e.invoiceLine){var t=parseFloat(e.invoiceLine.lineTotal)||0;e.allocatedAmount=t.toFixed(2)}}))},clearAllAllocations:function(){this.allocationLines.forEach((function(e){e.allocatedAmount=0}))},getRemainingAmount:function(e){return e.invoiceLine?(parseFloat(e.invoiceLine.lineTotal)||0)-(parseFloat(e.allocatedAmount)||0):0},isFullyAllocated:function(e){return 0===this.getRemainingAmount(e)},isOverAllocated:function(e){return this.getRemainingAmount(e)<0},validateAllocation:function(e,t){var o=parseFloat(e.allocatedAmount)||0,n=parseFloat(e.invoiceLine.lineTotal)||0;o>n?this.errors["allocation_".concat(t,"_allocatedAmount")]="‡∫à‡∫≥‡∫ô‡∫ß‡∫ô‡ªÄ‡∫Å‡∫µ‡∫ô‡∫Å‡∫ß‡ªà‡∫≤‡∫ó‡∫µ‡ªà‡ªÄ‡∫´‡∫º‡∫∑‡∫≠ (‡∫™‡∫π‡∫á‡∫™‡∫∏‡∫î: ".concat(this.formatCurrency(n),")"):this.clearFieldError("allocation_".concat(t,"_allocatedAmount"))},validateForm:function(){if(this.errors={},this.form.receiptNumber||(this.errors.receiptNumber="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡ªÄ‡∫•‡∫Å‡∫ó‡∫µ‡ªÉ‡∫ö‡∫Æ‡∫±‡∫ö"),this.form.invoiceHeaderId||(this.errors.invoiceHeaderId="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ"),this.form.bookingDate||(this.errors.bookingDate="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å"),this.form.receivedDate||(this.errors.receivedDate="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫Æ‡∫±‡∫ö‡ªÄ‡∫á‡∫¥‡∫ô"),this.form.paymentMethod||(this.errors.paymentMethod="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ß‡∫¥‡∫ó‡∫µ‡∫à‡ªà‡∫≤‡∫ç"),this.form.bookingDate&&this.form.receivedDate){var e=new Date(this.form.bookingDate);new Date(this.form.receivedDate)<e&&(this.errors.receivedDate="‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫Æ‡∫±‡∫ö‡ªÄ‡∫á‡∫¥‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫ö‡ªç‡ªà‡∫Å‡ªà‡∫≠‡∫ô‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å")}if(0===this.allocationLines.length)this.errors.allocations="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫¢‡ªà‡∫≤‡∫á‡ªú‡ªâ‡∫≠‡∫ç 1 ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô";else{for(var t=!1,o=0,i=0;i<this.allocationLines.length;i++){var n=this.allocationLines[i];n.invoiceLineId||(this.errors["allocation_".concat(i,"_invoiceLineId")]="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ");var r=parseFloat(n.allocatedAmount)||0;r<=0?this.errors["allocation_".concat(i,"_allocatedAmount")]="‡∫ç‡∫≠‡∫î‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫´‡∫º‡∫≤‡∫ç‡∫Å‡∫ß‡ªà‡∫≤ 0":(t=!0,o+=r),n.allocationDate||(this.errors["allocation_".concat(i,"_allocationDate")]="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô"),this.isOverAllocated(n)&&(this.errors["allocation_".concat(i,"_allocatedAmount")]="‡∫ç‡∫≠‡∫î‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡ªÄ‡∫Å‡∫µ‡∫ô‡∫Å‡∫ß‡ªà‡∫≤‡∫ó‡∫µ‡ªà‡ªÄ‡∫´‡∫º‡∫∑‡∫≠")}t||(this.errors.allocations="‡∫¢‡ªà‡∫≤‡∫á‡ªú‡ªâ‡∫≠‡∫ç‡∫ï‡ªâ‡∫≠‡∫á‡∫°‡∫µ 1 ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫ó‡∫µ‡ªà‡∫°‡∫µ‡∫ç‡∫≠‡∫î‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô"),o<=0&&(this.errors.totalReceivedAmount="‡∫ç‡∫≠‡∫î‡∫•‡∫ß‡∫°‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫´‡∫º‡∫≤‡∫ç‡∫Å‡∫ß‡ªà‡∫≤ 0")}return this.isEdit&&!this.form.reason&&(this.errors.reason="‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡∫•‡∫∞‡∫ö‡∫∏‡ªÄ‡∫´‡∫î‡∫ú‡∫ª‡∫ô‡∫Ç‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç"),0===Object.keys(this.errors).length},clearErrors:function(){this.errors={}},clearFieldError:function(e){this.errors[e]&&this.$delete(this.errors,e)},handleSubmit:function(){if(this.validateForm()){this.saving=!0;var e=this.allocationLines.filter((function(e){return(parseFloat(e.allocatedAmount)||0)>0&&e.invoiceLineId}));this.isEdit?this.form.updateUserId=this.user.id:this.form.inputterId=this.user.id;var t=l(l({},this.form),{},{totalReceivedAmount:parseFloat(this.form.totalReceivedAmount)||0,allocationLines:e.map((function(e,t){return{tempId:e.tempId,lineNumber:t+1,invoiceLineId:e.invoiceLineId,allocatedAmount:parseFloat(e.allocatedAmount)||0,allocationDate:e.allocationDate,notes:e.notes||""}}))});this.$emit("save",t)}else Object.keys(this.errors).some((function(e){return e.startsWith("allocation_")}))?this.activeTab="allocations":this.activeTab="header"},handleOverlayClick:function(){this.saving||this.handleClose()},handleClose:function(){this.$emit("close")},resetForm:function(){var e;this.form={id:null,receiptNumber:"",bookingDate:"",receivedDate:"",invoiceHeaderId:"",totalReceivedAmount:0,paymentMethod:"cash",referenceNumber:"",notes:"",inputterId:(null===(e=this.user)||void 0===e?void 0:e.id)||"",reason:""}},formatCurrency:function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0)},formatNumber:function(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e||0)},formatDate:function(e){return e?new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):""},getStatusLabel:function(e){return{draft:"‡∫Æ‡ªà‡∫≤‡∫á",sent:"‡∫™‡∫ª‡ªà‡∫á‡ªÅ‡∫•‡ªâ‡∫ß",paid:"‡∫à‡ªà‡∫≤‡∫ç‡ªÅ‡∫•‡ªâ‡∫ß",overdue:"‡ªÄ‡∫Å‡∫µ‡∫ô‡∫Å‡∫≥‡ªú‡∫ª‡∫î",cancelled:"‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å"}[e]||e},showToast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("".concat(t,": ").concat(e)),this.$toast?"function"==typeof this.$toast[t]?this.$toast[t](e):console.log(e):"error"===t&&alert("Error: ".concat(e))},debugCreateAllocations:function(){var e;console.log("üîß DEBUG: Manually creating allocations"),console.log("Selected invoice:",this.selectedInvoice),console.log("Invoice lines:",null===(e=this.selectedInvoice)||void 0===e?void 0:e.invoiceLines),this.selectedInvoice&&this.selectedInvoice.invoiceLines?(this.createAllocationLinesFromInvoice(),this.showToast("Debug: Created ".concat(this.allocationLines.length," allocations"),"info")):this.showToast("Debug: No invoice or invoice lines found","error")}}},v=d,f=(o(1545),o(32)),component=Object(f.a)(v,(function(){var e=this,t=e._self._c;return t("div",[e.visible?t("div",{staticClass:"modal-overlay",on:{click:e.handleOverlayClick}},[t("div",{staticClass:"enhanced-dialog",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[t("i",{staticClass:"fas fa-receipt"}),e._v("\n          "+e._s(e.isEdit?"‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç‡∫Å‡∫≤‡∫ô‡∫Æ‡∫±‡∫ö‡∫ä‡∫≥‡∫•‡∫∞":"‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫Å‡∫≤‡∫ô‡∫Æ‡∫±‡∫ö‡∫ä‡∫≥‡∫•‡∫∞‡ªÉ‡ªù‡ªà")+"\n        ")]),e._v(" "),t("button",{staticClass:"close-button",attrs:{type:"button"},on:{click:e.handleClose}},[t("i",{staticClass:"fas fa-times"})])]),e._v(" "),t("div",{staticClass:"modal-body"},[e.formLoading?t("div",{staticClass:"loading-state"},[t("div",{staticClass:"spinner"}),e._v(" "),t("p",[e._v("‡∫Å‡∫≥‡∫•‡∫±‡∫á‡ªÇ‡∫´‡∫º‡∫î‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô...")])]):t("div",{staticClass:"receipt-form"},[t("div",{staticClass:"tab-navigation"},[t("button",{class:["tab-btn",{active:"header"===e.activeTab}],attrs:{type:"button"},on:{click:function(t){e.activeTab="header"}}},[t("i",{staticClass:"fas fa-file-alt"}),e._v("\n              ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫Å‡∫≤‡∫ô‡∫Æ‡∫±‡∫ö‡∫ä‡∫≥‡∫•‡∫∞\n            ")]),e._v(" "),t("button",{class:["tab-btn",{active:"allocations"===e.activeTab}],attrs:{type:"button"},on:{click:function(t){e.activeTab="allocations"}}},[t("i",{staticClass:"fas fa-list"}),e._v("\n              ‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫ä‡∫≥‡∫•‡∫∞\n              "),e.allocationLines.length>0?t("span",{staticClass:"line-count"},[e._v(e._s(e.allocationLines.length))]):e._e()])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"header"===e.activeTab,expression:"activeTab === 'header'"}],staticClass:"tab-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"form-section"},[e._m(0),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",{staticClass:"required",attrs:{for:"receiptNumber"}},[e._v("‡ªÄ‡∫•‡∫Å‡∫ó‡∫µ‡ªÉ‡∫ö‡∫Æ‡∫±‡∫ö")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.receiptNumber,expression:"form.receiptNumber"}],staticClass:"form-control",class:{"is-invalid":e.errors.receiptNumber},attrs:{id:"receiptNumber",type:"text",placeholder:"‡ªÄ‡∫ä‡∫±‡ªà‡∫ô: RCP-2025-001",readonly:e.isEdit},domProps:{value:e.form.receiptNumber},on:{input:function(t){t.target.composing||e.$set(e.form,"receiptNumber",t.target.value)}}}),e._v(" "),e.errors.receiptNumber?t("div",{staticClass:"invalid-feedback"},[e._v("\n                      "+e._s(e.errors.receiptNumber)+"\n                    ")]):e._e()]),e._v(" "),t("div",{staticClass:"form-group col-md-6"},[t("label",{staticClass:"required",attrs:{for:"invoiceHeaderId"}},[e._v("‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ")]),e._v(" "),t("div",{staticClass:"invoice-selector"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.invoiceHeaderId,expression:"form.invoiceHeaderId"}],staticClass:"form-control",class:{"is-invalid":e.errors.invoiceHeaderId},attrs:{id:"invoiceHeaderId"},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"invoiceHeaderId",t.target.multiple?o:o[0])},e.onInvoiceChange]}},[t("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ")]),e._v(" "),e._l(e.invoices,(function(o){return t("option",{key:o.id,domProps:{value:o.id}},[e._v("\n                          "+e._s(o.invoiceNumber)+" -\n                          "+e._s(o.customer?o.customer.name:"N/A")+"\n                          ("+e._s(e.formatCurrency(o.totalAmount))+")\n                        ")])}))],2),e._v(" "),t("button",{staticClass:"btn btn-outline-primary btn-browse-invoice",attrs:{type:"button",title:"‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ"},on:{click:e.openInvoiceBrowser}},[t("i",{staticClass:"fas fa-search"}),e._v("\n                        ‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤\n                      ")])]),e._v(" "),e.errors.invoiceHeaderId?t("div",{staticClass:"invalid-feedback"},[e._v("\n                      "+e._s(e.errors.invoiceHeaderId)+"\n                    ")]):e._e()])]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-6"},[e._m(1),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.totalReceivedAmount,expression:"form.totalReceivedAmount"}],staticClass:"form-control auto-calculated-field",class:{"is-invalid":e.errors.totalReceivedAmount},attrs:{id:"totalReceivedAmount",type:"number",step:"0.01",min:"0",placeholder:"0.00",readonly:"",disabled:""},domProps:{value:e.form.totalReceivedAmount},on:{input:function(t){t.target.composing||e.$set(e.form,"totalReceivedAmount",t.target.value)}}}),e._v(" "),e._m(2),e._v(" "),e.errors.totalReceivedAmount?t("div",{staticClass:"invalid-feedback"},[e._v("\n                      "+e._s(e.errors.totalReceivedAmount)+"\n                    ")]):e._e()]),e._v(" "),t("div",{staticClass:"form-group col-md-6"},[t("label",{staticClass:"required",attrs:{for:"paymentMethod"}},[e._v("‡∫ß‡∫¥‡∫ó‡∫µ‡∫à‡ªà‡∫≤‡∫ç")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.paymentMethod,expression:"form.paymentMethod"}],staticClass:"form-control",class:{"is-invalid":e.errors.paymentMethod},attrs:{id:"paymentMethod"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"paymentMethod",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"cash"}},[e._v("‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫ª‡∫î")]),e._v(" "),t("option",{attrs:{value:"check"}},[e._v("‡ªÄ‡∫ä‡∫±‡∫Å")]),e._v(" "),t("option",{attrs:{value:"bank_transfer"}},[e._v("‡ªÇ‡∫≠‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô‡∫ó‡∫∞‡∫ô‡∫≤‡∫Ñ‡∫≤‡∫ô")]),e._v(" "),t("option",{attrs:{value:"credit_card"}},[e._v("‡∫ö‡∫±‡∫î‡ªÄ‡∫Ñ‡∫£‡∫î‡∫¥‡∫î")]),e._v(" "),t("option",{attrs:{value:"other"}},[e._v("‡∫≠‡∫∑‡ªà‡∫ô‡ªÜ")])]),e._v(" "),e.errors.paymentMethod?t("div",{staticClass:"invalid-feedback"},[e._v("\n                      "+e._s(e.errors.paymentMethod)+"\n                    ")]):e._e()])])]),e._v(" "),t("div",{staticClass:"form-section"},[e._m(3),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",{staticClass:"required",attrs:{for:"bookingDate"}},[e._v("‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.bookingDate,expression:"form.bookingDate"}],staticClass:"form-control",class:{"is-invalid":e.errors.bookingDate},attrs:{id:"bookingDate",type:"date"},domProps:{value:e.form.bookingDate},on:{input:function(t){t.target.composing||e.$set(e.form,"bookingDate",t.target.value)}}}),e._v(" "),e.errors.bookingDate?t("div",{staticClass:"invalid-feedback"},[e._v("\n                      "+e._s(e.errors.bookingDate)+"\n                    ")]):e._e()]),e._v(" "),t("div",{staticClass:"form-group col-md-6"},[t("label",{staticClass:"required",attrs:{for:"receivedDate"}},[e._v("‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫Æ‡∫±‡∫ö‡ªÄ‡∫á‡∫¥‡∫ô")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.receivedDate,expression:"form.receivedDate"}],staticClass:"form-control",class:{"is-invalid":e.errors.receivedDate},attrs:{id:"receivedDate",type:"date"},domProps:{value:e.form.receivedDate},on:{input:function(t){t.target.composing||e.$set(e.form,"receivedDate",t.target.value)}}}),e._v(" "),e.errors.receivedDate?t("div",{staticClass:"invalid-feedback"},[e._v("\n                      "+e._s(e.errors.receivedDate)+"\n                    ")]):e._e()])])]),e._v(" "),t("div",{staticClass:"form-section"},[e._m(4),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",{attrs:{for:"referenceNumber"}},[e._v("‡ªÄ‡∫•‡∫Å‡∫≠‡ªâ‡∫≤‡∫á‡∫≠‡∫µ‡∫á")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.referenceNumber,expression:"form.referenceNumber"}],staticClass:"form-control",attrs:{id:"referenceNumber",type:"text",placeholder:"‡ªÄ‡∫•‡∫Å‡∫≠‡ªâ‡∫≤‡∫á‡∫≠‡∫µ‡∫á (‡∫ñ‡ªâ‡∫≤‡∫°‡∫µ)..."},domProps:{value:e.form.referenceNumber},on:{input:function(t){t.target.composing||e.$set(e.form,"referenceNumber",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group col-md-6"},[t("label",{attrs:{for:"inputterId"}},[e._v("‡∫ú‡∫π‡ªâ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.inputterId,expression:"form.inputterId"}],staticClass:"form-control",attrs:{id:"inputterId",disabled:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"inputterId",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:""}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ú‡∫π‡ªâ‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å")]),e._v(" "),e._l(e.users,(function(o){return t("option",{key:o.id,domProps:{value:o.id}},[e._v("\n                        "+e._s(o.cus_name)+" - "+e._s(o.cus_email)+"\n                      ")])}))],2)])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"notes"}},[e._v("‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.notes,expression:"form.notes"}],staticClass:"form-control",attrs:{id:"notes",rows:"3",placeholder:"‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î‡∫Å‡ªà‡∫Ω‡∫ß‡∫Å‡∫±‡∫ö‡∫Å‡∫≤‡∫ô‡∫Æ‡∫±‡∫ö‡∫ä‡∫≥‡∫•‡∫∞..."},domProps:{value:e.form.notes},on:{input:function(t){t.target.composing||e.$set(e.form,"notes",t.target.value)}}})]),e._v(" "),e.isEdit?t("div",{staticClass:"form-group"},[t("label",{staticClass:"required",attrs:{for:"reason"}},[e._v("‡ªÄ‡∫´‡∫î‡∫ú‡∫ª‡∫ô‡∫Ç‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.reason,expression:"form.reason"}],staticClass:"form-control",class:{"is-invalid":e.errors.reason},attrs:{id:"reason",type:"text",placeholder:"‡∫•‡∫∞‡∫ö‡∫∏‡ªÄ‡∫´‡∫î‡∫ú‡∫ª‡∫ô‡∫Ç‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç..."},domProps:{value:e.form.reason},on:{input:function(t){t.target.composing||e.$set(e.form,"reason",t.target.value)}}}),e._v(" "),e.errors.reason?t("div",{staticClass:"invalid-feedback"},[e._v("\n                    "+e._s(e.errors.reason)+"\n                  ")]):e._e()]):e._e()]),e._v(" "),t("div",{staticClass:"amount-summary"},[t("div",{staticClass:"totals-grid"},[t("div",{staticClass:"total-item"},[t("label",[e._v("‡∫ç‡∫≠‡∫î‡∫ó‡∫µ‡ªà‡∫Æ‡∫±‡∫ö (‡∫Ñ‡∫≥‡∫ô‡∫ß‡∫ô‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î):")]),e._v(" "),t("span",{staticClass:"amount received"},[e._v(e._s(e.formatCurrency(e.form.totalReceivedAmount)))])]),e._v(" "),t("div",{staticClass:"total-item"},[t("label",[e._v("‡∫•‡∫ß‡∫°‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô:")]),e._v(" "),t("span",{staticClass:"amount allocated"},[e._v(e._s(e.formatCurrency(e.calculatedAllocatedTotal)))])]),e._v(" "),e._m(5)]),e._v(" "),e._m(6)])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"allocations"===e.activeTab,expression:"activeTab === 'allocations'"}],staticClass:"tab-content"},[t("div",{staticClass:"allocation-section"},[t("div",{staticClass:"allocation-header"},[e._m(7),e._v(" "),t("div",{staticClass:"allocation-info"},[e.selectedInvoice?t("span",{staticClass:"invoice-info"},[t("strong",[e._v(e._s(e.selectedInvoice.invoiceNumber))]),e._v(" -\n                    "+e._s(e.selectedInvoice.customer?e.selectedInvoice.customer.name:"N/A")+"\n                  ")]):e._e(),e._v(" "),e.allocationLines.length>0?t("span",{staticClass:"allocation-count-info"},[e._v("\n                    "+e._s(e.allocationLines.length)+" ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô\n                  ")]):e._e()])]),e._v(" "),e.selectedInvoice?e.allocationLines.length>0?t("div",{staticClass:"allocation-table-container"},[e._m(8),e._v(" "),t("div",{staticClass:"allocation-table"},[t("table",{staticClass:"table"},[e._m(9),e._v(" "),t("tbody",e._l(e.allocationLines,(function(o,n){return t("tr",{key:o.invoiceLineId,staticClass:"allocation-row"},[t("td",{staticClass:"line-number"},[e._v("\n                          "+e._s(o.lineNumber)+"\n                        ")]),e._v(" "),t("td",[t("div",{staticClass:"invoice-line-display"},[t("div",{staticClass:"line-description"},[t("strong",[e._v(e._s(o.invoiceLine.description))])]),e._v(" "),t("div",{staticClass:"line-details"},[e._v("\n                              ‡∫à‡∫≥‡∫ô‡∫ß‡∫ô:\n                              "+e._s(e.formatNumber(o.invoiceLine.quantity))+"\n                              √ó\n                              "+e._s(e.formatCurrency(o.invoiceLine.unitPrice))+"\n                              "),o.invoiceLine.taxRate>0?t("span",[e._v("\n                                + ‡∫û‡∫≤‡∫™‡∫µ "+e._s(o.invoiceLine.taxRate)+"%\n                              ")]):e._e()])])]),e._v(" "),t("td",{staticClass:"invoice-line-total"},[e._v("\n                          "+e._s(e.formatCurrency(o.invoiceLine.lineTotal))+"\n                        ")]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:o.allocatedAmount,expression:"allocation.allocatedAmount"}],staticClass:"form-control form-control-sm",class:{"is-invalid":e.errors["allocation_".concat(n,"_allocatedAmount")]},attrs:{type:"number",step:"0.01",min:"0",max:o.invoiceLine.lineTotal,placeholder:"0.00"},domProps:{value:o.allocatedAmount},on:{blur:function(t){return e.validateAllocation(o,n)},input:function(t){t.target.composing||e.$set(o,"allocatedAmount",t.target.value)}}}),e._v(" "),e.errors["allocation_".concat(n,"_allocatedAmount")]?t("div",{staticClass:"invalid-feedback"},[e._v("\n                            "+e._s(e.errors["allocation_".concat(n,"_allocatedAmount")])+"\n                          ")]):e._e()]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:o.allocationDate,expression:"allocation.allocationDate"}],staticClass:"form-control form-control-sm",class:{"is-invalid":e.errors["allocation_".concat(n,"_allocationDate")]},attrs:{type:"date"},domProps:{value:o.allocationDate},on:{input:function(t){t.target.composing||e.$set(o,"allocationDate",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"remaining-amount"},[t("span",{class:{"over-allocated":e.isOverAllocated(o),"fully-allocated":e.isFullyAllocated(o)}},[e._v("\n                            "+e._s(e.formatCurrency(e.getRemainingAmount(o)))+"\n                          ")])]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:o.notes,expression:"allocation.notes"}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:"‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î..."},domProps:{value:o.notes},on:{input:function(t){t.target.composing||e.$set(o,"notes",t.target.value)}}})])])})),0)])]),e._v(" "),t("div",{staticClass:"quick-allocation-actions"},[t("div",{staticClass:"quick-actions-left"},[t("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button",title:"‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫ç‡∫≠‡∫î‡ªÄ‡∫ï‡∫±‡∫°‡∫Ç‡∫≠‡∫á‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ"},on:{click:e.allocateFullAmount}},[t("i",{staticClass:"fas fa-file-invoice-dollar"}),e._v("\n                      ‡∫ç‡∫≠‡∫î‡ªÄ‡∫ï‡∫±‡∫°\n                    ")]),e._v(" "),t("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button",title:"‡ªÅ‡∫ö‡ªà‡∫á‡∫ç‡∫≠‡∫î‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡ªÄ‡∫ó‡∫ª‡ªà‡∫≤‡∫Å‡∫±‡∫ô"},on:{click:e.allocateEqually}},[t("i",{staticClass:"fas fa-equals"}),e._v("\n                      ‡ªÅ‡∫ö‡ªà‡∫á‡ªÄ‡∫ó‡∫ª‡ªà‡∫≤‡∫Å‡∫±‡∫ô\n                    ")]),e._v(" "),t("button",{staticClass:"btn btn-outline-info btn-sm",attrs:{type:"button",title:"‡ªÅ‡∫ö‡ªà‡∫á‡∫ï‡∫≤‡∫°‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡∫™‡ªà‡∫ß‡∫ô‡∫Ç‡∫≠‡∫á‡ªÅ‡∫ï‡ªà‡∫•‡∫∞‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô"},on:{click:e.allocateProportionally}},[t("i",{staticClass:"fas fa-percentage"}),e._v("\n                      ‡ªÅ‡∫ö‡ªà‡∫á‡∫ï‡∫≤‡∫°‡∫≠‡∫±‡∫î‡∫ï‡∫≤‡∫™‡ªà‡∫ß‡∫ô\n                    ")]),e._v(" "),t("button",{staticClass:"btn btn-outline-warning btn-sm",attrs:{type:"button"},on:{click:e.clearAllAllocations}},[t("i",{staticClass:"fas fa-eraser"}),e._v("\n                      ‡∫•‡∫ª‡∫ö‡∫•‡ªâ‡∫≤‡∫á‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î\n                    ")])]),e._v(" "),e._m(10)]),e._v(" "),t("div",{staticClass:"allocation-summary"},[t("div",{staticClass:"totals-grid"},[t("div",{staticClass:"total-item"},[t("label",[e._v("‡∫ç‡∫≠‡∫î‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ:")]),e._v(" "),t("span",{staticClass:"amount"},[e._v(e._s(e.formatCurrency(e.selectedInvoice.totalAmount)))])]),e._v(" "),t("div",{staticClass:"total-item"},[t("label",[e._v("‡∫ç‡∫≠‡∫î‡∫ó‡∫µ‡ªà‡∫Æ‡∫±‡∫ö (‡∫Ñ‡∫≥‡∫ô‡∫ß‡∫ô‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î):")]),e._v(" "),t("span",{staticClass:"amount received"},[e._v(e._s(e.formatCurrency(e.form.totalReceivedAmount)))])]),e._v(" "),t("div",{staticClass:"total-item"},[t("label",[e._v("‡∫•‡∫ß‡∫°‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô:")]),e._v(" "),t("span",{staticClass:"amount allocated"},[e._v(e._s(e.formatCurrency(e.calculatedAllocatedTotal)))])]),e._v(" "),e._m(11)]),e._v(" "),e._m(12)])]):t("div",{staticClass:"no-lines-state"},[e._m(13)]):t("div",{staticClass:"no-invoice-state"},[t("div",{staticClass:"empty-content"},[t("i",{staticClass:"fas fa-file-invoice"}),e._v(" "),t("h4",[e._v("‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡∫Å‡ªà‡∫≠‡∫ô")]),e._v(" "),t("p",[e._v("\n                    ‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡ªÄ‡∫Æ‡∫±‡∫î‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫Å‡∫≤‡∫ô‡∫Æ‡∫±‡∫ö‡∫ä‡∫≥‡∫•‡∫∞\n                    ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡ªÉ‡∫ô‡ªÅ‡∫ñ‡∫ö‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫Å‡∫≤‡∫ô‡∫Æ‡∫±‡∫ö‡∫ä‡∫≥‡∫•‡∫∞‡∫Å‡ªà‡∫≠‡∫ô\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){e.activeTab="header"}}},[t("i",{staticClass:"fas fa-arrow-left"}),e._v("\n                    ‡∫Å‡∫±‡∫ö‡ªÑ‡∫õ‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ\n                  ")])])])])])])]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"footer-actions"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:e.saving},on:{click:e.handleClose}},[t("i",{staticClass:"fas fa-times"}),e._v("\n            ‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:e.saving||!e.isFormValid},on:{click:e.handleSubmit}},[e.saving?t("i",{staticClass:"fas fa-spinner fa-spin"}):t("i",{staticClass:"fas fa-save"}),e._v("\n            "+e._s(e.saving?"‡∫Å‡∫≥‡∫•‡∫±‡∫á‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å...":e.isEdit?"‡∫≠‡∫±‡∫ö‡ªÄ‡∫î‡∫î":"‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å")+"\n          ")])])])])]):e._e(),e._v(" "),e.showInvoiceBrowser?t("div",{staticClass:"modal-overlay",on:{click:e.closeInvoiceBrowser}},[t("div",{staticClass:"invoice-browser-dialog",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"modal-header"},[e._m(14),e._v(" "),t("button",{staticClass:"close-button",attrs:{type:"button"},on:{click:e.closeInvoiceBrowser}},[t("i",{staticClass:"fas fa-times"})])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"search-section"},[t("div",{staticClass:"search-input-group"},[t("i",{staticClass:"fas fa-search search-icon"}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.invoiceSearchQuery,expression:"invoiceSearchQuery"}],staticClass:"form-control search-input",attrs:{type:"text",placeholder:"‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤‡ªÄ‡∫•‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ, ‡∫ä‡∫∑‡ªà‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤, ‡∫´‡∫º‡∫∑ ‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î..."},domProps:{value:e.invoiceSearchQuery},on:{input:function(t){t.target.composing||(e.invoiceSearchQuery=t.target.value)}}})])]),e._v(" "),e.invoiceBrowserLoading?t("div",{staticClass:"loading-state"},[t("div",{staticClass:"spinner"}),e._v(" "),t("p",[e._v("‡∫Å‡∫≥‡∫•‡∫±‡∫á‡ªÇ‡∫´‡∫º‡∫î‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ...")])]):e.searchFilteredInvoices.length>0?t("div",{staticClass:"invoice-list"},[t("div",{staticClass:"invoice-table-container"},[t("table",{staticClass:"table"},[e._m(15),e._v(" "),t("tbody",e._l(e.searchFilteredInvoices,(function(o){return t("tr",{key:o.id,staticClass:"invoice-row"},[t("td",[t("strong",[e._v(e._s(o.invoiceNumber))])]),e._v(" "),t("td",[t("div",{staticClass:"customer-info"},[t("div",{staticClass:"customer-name"},[e._v("\n                        "+e._s(o.customer?o.customer.name:"N/A")+"\n                      ")]),e._v(" "),o.customer&&o.customer.email?t("div",{staticClass:"customer-email"},[e._v("\n                        "+e._s(o.customer.email)+"\n                      ")]):e._e()])]),e._v(" "),t("td",[e._v(e._s(e.formatDate(o.invoiceDate)))]),e._v(" "),t("td",[e._v(e._s(e.formatDate(o.dueDate)))]),e._v(" "),t("td",{staticClass:"amount-cell"},[e._v("\n                    "+e._s(e.formatCurrency(o.totalAmount))+"\n                  ")]),e._v(" "),t("td",[t("span",{staticClass:"status-badge",class:"status-".concat(o.status)},[e._v("\n                      "+e._s(e.getStatusLabel(o.status))+"\n                    ")])]),e._v(" "),t("td",[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",disabled:o.id===e.form.invoiceHeaderId},on:{click:function(t){return e.selectInvoiceFromBrowser(o)}}},[t("i",{staticClass:"fas fa-check"}),e._v("\n                      "+e._s(o.id===e.form.invoiceHeaderId?"‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÅ‡∫•‡ªâ‡∫ß":"‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å")+"\n                    ")])])])})),0)])])]):t("div",{staticClass:"no-results-state"},[t("div",{staticClass:"empty-content"},[t("i",{staticClass:"fas fa-file-invoice"}),e._v(" "),t("h4",[e._v("\n              "+e._s(e.invoiceSearchQuery?"‡∫ö‡ªç‡ªà‡∫û‡∫ª‡∫ö‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ":"‡∫ö‡ªç‡ªà‡∫°‡∫µ‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ")+"\n            ")]),e._v(" "),t("p",[e._v("\n              "+e._s(e.invoiceSearchQuery?'‡∫ö‡ªç‡ªà‡∫û‡∫ª‡∫ö‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡∫ó‡∫µ‡ªà‡∫ï‡∫ª‡∫á‡∫Å‡∫±‡∫ö "'.concat(e.invoiceSearchQuery,'"'):"‡∫ö‡ªç‡ªà‡∫°‡∫µ‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡∫ó‡∫µ‡ªà‡∫™‡∫≤‡∫°‡∫≤‡∫î‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÑ‡∫î‡ªâ")+"\n            ")])])])]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"footer-info"},[e.searchFilteredInvoices.length>0?t("span",{staticClass:"result-count"},[e._v("\n            ‡∫û‡∫ª‡∫ö "+e._s(e.searchFilteredInvoices.length)+" ‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ\n          ")]):e._e()]),e._v(" "),t("div",{staticClass:"footer-actions"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.closeInvoiceBrowser}},[t("i",{staticClass:"fas fa-times"}),e._v("\n            ‡∫õ‡∫¥‡∫î\n          ")])])])])]):e._e()])}),[function(){var e=this._self._c;return e("h5",{staticClass:"section-title"},[e("i",{staticClass:"fas fa-info-circle"}),this._v("\n                  ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫û‡∫∑‡ªâ‡∫ô‡∫ñ‡∫≤‡∫ô\n                ")])},function(){var e=this._self._c;return e("label",{staticClass:"auto-calculated",attrs:{for:"totalReceivedAmount"}},[e("i",{staticClass:"fas fa-calculator"}),this._v("\n                      ‡∫ç‡∫≠‡∫î‡ªÄ‡∫á‡∫¥‡∫ô‡∫ó‡∫µ‡ªà‡∫Æ‡∫±‡∫ö (‡∫Ñ‡∫≥‡∫ô‡∫ß‡∫ô‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î)\n                    ")])},function(){var e=this._self._c;return e("small",{staticClass:"form-text text-muted"},[e("i",{staticClass:"fas fa-info-circle"}),this._v("\n                      ‡∫ç‡∫≠‡∫î‡∫ô‡∫µ‡ªâ‡∫à‡∫∞‡∫ñ‡∫∑‡∫Å‡∫Ñ‡∫≥‡∫ô‡∫ß‡∫ô‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î‡∫à‡∫≤‡∫Å‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô\n                    ")])},function(){var e=this._self._c;return e("h5",{staticClass:"section-title"},[e("i",{staticClass:"fas fa-calendar-alt"}),this._v("\n                  ‡∫ß‡∫±‡∫ô‡∫ó‡∫µ\n                ")])},function(){var e=this._self._c;return e("h5",{staticClass:"section-title"},[e("i",{staticClass:"fas fa-clipboard-list"}),this._v("\n                  ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÄ‡∫ï‡∫µ‡∫°\n                ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"total-item success-balance"},[t("label",[e._v("‡∫™‡∫∞‡∫ñ‡∫≤‡∫ô‡∫∞:")]),e._v(" "),t("span",{staticClass:"amount balance balanced"},[t("i",{staticClass:"fas fa-check-circle"}),e._v("\n                      ‡∫™‡∫ª‡∫°‡∫î‡∫∏‡∫ô\n                    ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"balance-info"},[t("i",{staticClass:"fas fa-lightbulb"}),e._v(" "),t("span",[e._v('\n                    ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÑ‡∫õ‡∫ó‡∫µ‡ªà‡ªÅ‡∫ñ‡∫ö "‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫ä‡∫≥‡∫•‡∫∞"\n                    ‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡ªÉ‡∫™‡ªà‡∫ç‡∫≠‡∫î‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫™‡∫≥‡∫•‡∫±‡∫ö‡ªÅ‡∫ï‡ªà‡∫•‡∫∞‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô\n                  ')])])},function(){var e=this._self._c;return e("h5",{staticClass:"section-title"},[e("i",{staticClass:"fas fa-list"}),this._v("\n                  ‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫Å‡∫≤‡∫ô‡∫Æ‡∫±‡∫ö‡∫ä‡∫≥‡∫•‡∫∞\n                ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"allocation-notice"},[t("i",{staticClass:"fas fa-info-circle"}),e._v(" "),t("span",[e._v("‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫î‡ªâ‡∫≤‡∫ô‡∫•‡∫∏‡ªà‡∫°‡ªÅ‡∫°‡ªà‡∫ô‡∫°‡∫≤‡∫à‡∫≤‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡∫ó‡∫µ‡ªà‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å -\n                    ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫ç‡∫≠‡∫î‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫™‡∫≥‡∫•‡∫±‡∫ö‡ªÅ‡∫ï‡ªà‡∫•‡∫∞‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticStyle:{width:"40px"}},[e._v("#")]),e._v(" "),t("th",{staticStyle:{width:"250px"}},[e._v("‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ")]),e._v(" "),t("th",{staticStyle:{width:"100px"}},[e._v("‡∫ç‡∫≠‡∫î‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ")]),e._v(" "),t("th",{staticStyle:{width:"120px"}},[e._v("‡∫ç‡∫≠‡∫î‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô *")]),e._v(" "),t("th",{staticStyle:{width:"100px"}},[e._v("‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô *")]),e._v(" "),t("th",{staticStyle:{width:"120px"}},[e._v("‡∫ç‡∫≠‡∫î‡∫Ñ‡∫ª‡∫á‡ªÄ‡∫´‡∫º‡∫∑‡∫≠")]),e._v(" "),t("th",{staticStyle:{width:"150px"}},[e._v("‡ªù‡∫≤‡∫ç‡ªÄ‡∫´‡∫î")])])])},function(){var e=this._self._c;return e("div",{staticClass:"quick-actions-right"},[e("span",{staticClass:"allocation-helper"},[e("i",{staticClass:"fas fa-lightbulb"}),this._v("\n                      ‡ªÉ‡∫ä‡ªâ‡∫õ‡∫∏‡ªà‡∫°‡∫î‡ªâ‡∫≤‡∫ô‡∫ä‡ªâ‡∫≤‡∫ç‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î\n                    ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"total-item success-balance"},[t("label",[e._v("‡∫™‡∫∞‡∫ñ‡∫≤‡∫ô‡∫∞:")]),e._v(" "),t("span",{staticClass:"amount balance balanced"},[t("i",{staticClass:"fas fa-check-circle"}),e._v("\n                        ‡∫™‡∫ª‡∫°‡∫î‡∫∏‡∫ô\n                      ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"balance-info"},[t("i",{staticClass:"fas fa-info-circle"}),e._v(" "),t("span",[e._v("\n                      ‡∫ç‡∫≠‡∫î‡∫ó‡∫µ‡ªà‡∫Æ‡∫±‡∫ö‡∫à‡∫∞‡∫ñ‡∫∑‡∫Å‡∫Ñ‡∫≥‡∫ô‡∫ß‡∫ô‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î‡∫à‡∫≤‡∫Å‡∫•‡∫ß‡∫°‡∫ç‡∫≠‡∫î‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î\n                    ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"empty-content"},[t("i",{staticClass:"fas fa-list"}),e._v(" "),t("h4",[e._v("‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡∫ô‡∫µ‡ªâ‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô")]),e._v(" "),t("p",[e._v("‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ‡∫ó‡∫µ‡ªà‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫™‡∫¥‡∫ô‡∫Ñ‡ªâ‡∫≤/‡∫Å‡∫≤‡∫ô‡∫ö‡ªç‡∫•‡∫¥‡∫Å‡∫≤‡∫ô")])])},function(){var e=this._self._c;return e("h4",{staticClass:"modal-title"},[e("i",{staticClass:"fas fa-search"}),this._v("\n          ‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ\n        ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticStyle:{width:"120px"}},[e._v("‡ªÄ‡∫•‡∫Å‡ªÉ‡∫ö‡ªÅ‡∫à‡ªâ‡∫á‡ªú‡∫µ‡ªâ")]),e._v(" "),t("th",{staticStyle:{width:"200px"}},[e._v("‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤")]),e._v(" "),t("th",{staticStyle:{width:"100px"}},[e._v("‡∫ß‡∫±‡∫ô‡∫ó‡∫µ")]),e._v(" "),t("th",{staticStyle:{width:"100px"}},[e._v("‡∫Ñ‡∫ª‡∫ö‡∫Å‡∫≥‡ªú‡∫ª‡∫î")]),e._v(" "),t("th",{staticStyle:{width:"100px"}},[e._v("‡∫ç‡∫≠‡∫î‡ªÄ‡∫á‡∫¥‡∫ô")]),e._v(" "),t("th",{staticStyle:{width:"80px"}},[e._v("‡∫™‡∫∞‡∫ñ‡∫≤‡∫ô‡∫∞")]),e._v(" "),t("th",{staticStyle:{width:"80px"}},[e._v("‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å")])])])}],!1,null,"117ca84b",null);t.default=component.exports}}]);