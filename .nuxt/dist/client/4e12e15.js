(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1067:function(t,e,o){var content=o(1406);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(15).default)("760257fe",content,!0,{sourceMap:!1})},1405:function(t,e,o){"use strict";o(1067)},1406:function(t,e,o){var r=o(14)((function(i){return i[1]}));r.push([t.i,'.modal-overlay[data-v-5f6eb4c3]{align-items:center;background-color:rgba(0,0,0,.5);bottom:0;display:flex;justify-content:center;left:0;padding:20px;position:fixed;right:0;top:0;z-index:1000}.modal-container[data-v-5f6eb4c3]{animation:modalSlideIn-5f6eb4c3 .3s ease-out;background:#fff;border-radius:8px;box-shadow:0 10px 25px rgba(0,0,0,.2);max-height:90vh;max-width:700px;overflow-y:auto;width:100%}@keyframes modalSlideIn-5f6eb4c3{0%{opacity:0;transform:translateY(-30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[data-v-5f6eb4c3]{align-items:center;background-color:#f8f9fa;border-bottom:1px solid #e9ecef;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;padding:20px 20px 16px}.modal-title[data-v-5f6eb4c3]{color:#333;font-size:20px;font-weight:600;margin:0}.modal-close-btn[data-v-5f6eb4c3]{background:none;border:none;border-radius:4px;color:#666;cursor:pointer;font-size:18px;padding:4px 8px;transition:background-color .2s}.modal-close-btn[data-v-5f6eb4c3]:hover{background-color:#e9ecef;color:#333}.modal-body[data-v-5f6eb4c3]{padding:24px}.account-form[data-v-5f6eb4c3]{display:flex;flex-direction:column;gap:20px}.form-row[data-v-5f6eb4c3]{grid-gap:20px;display:grid;gap:20px;grid-template-columns:1fr 1fr}.form-group[data-v-5f6eb4c3]{display:flex;flex-direction:column;gap:8px}.form-label[data-v-5f6eb4c3]{color:#555;font-size:14px;font-weight:500}.form-label.required[data-v-5f6eb4c3]:after{color:#dc3545;content:" *"}.input-with-icon[data-v-5f6eb4c3]{position:relative}.input-icon[data-v-5f6eb4c3]{color:#666;font-size:14px;left:12px;position:absolute;top:50%;transform:translateY(-50%);z-index:1}.form-control[data-v-5f6eb4c3]{background-color:#fff;border:1px solid #ced4da;border-radius:6px;font-size:14px;padding:10px 12px 10px 40px;transition:all .2s}.form-control[data-v-5f6eb4c3]:focus{border-color:#007bff;box-shadow:0 0 0 3px rgba(0,123,255,.1);outline:none}.form-control.is-invalid[data-v-5f6eb4c3]{border-color:#dc3545}.invalid-feedback[data-v-5f6eb4c3]{color:#dc3545;font-size:12px;margin-top:4px}.status-toggle[data-v-5f6eb4c3]{align-items:center;display:flex;gap:12px}.toggle-switch[data-v-5f6eb4c3]{display:inline-block;height:24px;position:relative;width:48px}.toggle-input[data-v-5f6eb4c3]{height:0;opacity:0;width:0}.toggle-slider[data-v-5f6eb4c3]{background-color:#ccc;border-radius:24px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0;transition:.4s}.toggle-slider[data-v-5f6eb4c3]:before{background-color:#fff;border-radius:50%;bottom:3px;content:"";height:18px;left:3px;position:absolute;transition:.4s;width:18px}.toggle-input:checked+.toggle-slider[data-v-5f6eb4c3]{background-color:#28a745}.toggle-input:checked+.toggle-slider[data-v-5f6eb4c3]:before{transform:translateX(24px)}.toggle-label[data-v-5f6eb4c3]{color:#555;font-weight:500}.modal-footer[data-v-5f6eb4c3]{display:flex;gap:12px;justify-content:flex-end;padding:16px 24px 24px}.btn[data-v-5f6eb4c3]{align-items:center;border:1px solid transparent;border-radius:6px;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;gap:8px;padding:10px 20px;-webkit-text-decoration:none;text-decoration:none;transition:all .2s}.btn[data-v-5f6eb4c3]:disabled{cursor:not-allowed;opacity:.5}.btn-primary[data-v-5f6eb4c3]{background-color:#007bff;border-color:#007bff;color:#fff}.btn-primary[data-v-5f6eb4c3]:hover:not(:disabled){background-color:#0056b3;border-color:#0056b3}.btn-outline-secondary[data-v-5f6eb4c3]{background-color:transparent;border-color:#6c757d;color:#6c757d}.btn-outline-secondary[data-v-5f6eb4c3]:hover:not(:disabled){background-color:#6c757d;color:#fff}@media (max-width:768px){.modal-overlay[data-v-5f6eb4c3]{padding:10px}.modal-container[data-v-5f6eb4c3]{max-height:95vh}.modal-header[data-v-5f6eb4c3]{padding:16px}.modal-body[data-v-5f6eb4c3]{padding:20px 16px}.modal-footer[data-v-5f6eb4c3]{flex-direction:column-reverse;padding:12px 16px 16px}.form-row[data-v-5f6eb4c3]{gap:16px;grid-template-columns:1fr}.btn[data-v-5f6eb4c3]{justify-content:center;width:100%}}@media (max-width:480px){.modal-title[data-v-5f6eb4c3]{font-size:18px}.account-form[data-v-5f6eb4c3]{gap:16px}.form-group[data-v-5f6eb4c3]{gap:6px}.toggle-switch[data-v-5f6eb4c3]{height:20px;width:40px}.toggle-slider[data-v-5f6eb4c3]:before{bottom:2px;height:16px;left:2px;width:16px}.toggle-input:checked+.toggle-slider[data-v-5f6eb4c3]:before{transform:translateX(20px)}}',""]),r.locals={},t.exports=r},1719:function(t,e,o){"use strict";o.r(e);o(39),o(9),o(5),o(35),o(30),o(63);var r=o(17),n=(o(85),o(10),o(34),o(76),o(62),{name:"BankAccountDialog",props:{show:{type:Boolean,default:!1},account:{type:Object,default:null}},data:function(){return{showModal:!1,loading:!1,form:{accountNumber:"",accountName:"",bankName:"",bankBranch:"",accountType:"",currency:"LAK",isActive:!0},errors:{},bankList:[{code:"BCEL",name:"ທະນາຄານການຄ້າຕ່າງປະເທດລາວ (BCEL)"},{code:"LDB",name:"ທະນາຄານພັດທະນາລາວ (LDB)"},{code:"APB",name:"ທະນາຄານກະເສດຊາວກະສິກອນ (APB)"},{code:"JDB",name:"ທະນາຄານຮ່ວມພັດທະນາລາວ-ຫວຽດ (JDB)"},{code:"LVB",name:"ທະນາຄານລາວ-ຫວຽດ (LVB)"},{code:"IBL",name:"ທະນາຄານອຸດສາຫະກຳ (IBL)"},{code:"STB",name:"ທະນາຄານເສດຖະກິດລາວ (STB)"},{code:"MPB",name:"ທະນາຄານມະຫາຊົນ (MPB)"},{code:"LXB",name:"ທະນາຄານລາວ-ຈີນ (LXB)"},{code:"BMB",name:"ທະນາຄານເມືອງເຮືອງ (BMB)"},{code:"KKB",name:"ທະນາຄານຂົງໄຂ (KKB)"},{code:"SACOM",name:"ທະນາຄານສະຫະກອນ (SACOM)"},{code:"OTHER",name:"ອື່ນໆ"}]}},computed:{isEdit:function(){return!!this.account&&!!this.account.id},isFormValid:function(){return this.form.accountNumber&&this.form.accountName&&this.form.bankName&&this.form.accountType&&this.form.currency&&0===Object.keys(this.errors).length}},watch:{show:function(t){this.showModal=t,t?(this.initializeForm(),document.body.style.overflow="hidden"):document.body.style.overflow=""},"form.accountNumber":function(){this.validateAccountNumber()},"form.accountName":function(){this.validateAccountName()},"form.bankName":function(){this.validateBankName()},"form.accountType":function(){this.validateAccountType()},"form.currency":function(){this.validateCurrency()}},beforeDestroy:function(){document.body.style.overflow=""},methods:{initializeForm:function(){this.errors={},this.isEdit?this.form={accountNumber:this.account.accountNumber||"",accountName:this.account.accountName||"",bankName:this.account.bankName||"",bankBranch:this.account.bankBranch||"",accountType:this.account.accountType||"",currency:this.account.currency||"LAK",isActive:void 0===this.account.isActive||this.account.isActive}:this.form={accountNumber:"",accountName:"",bankName:"",bankBranch:"",accountType:"",currency:"LAK",isActive:!0}},validateAccountNumber:function(){this.form.accountNumber?this.form.accountNumber.length<5?this.$set(this.errors,"accountNumber","ເລກບັນຊີຕ້ອງມີຢ່າງນ້ອຍ 5 ຫຼັກ"):/^[0-9\-]+$/.test(this.form.accountNumber)?this.$delete(this.errors,"accountNumber"):this.$set(this.errors,"accountNumber","ເລກບັນຊີຕ້ອງເປັນຕົວເລກເທົ່ານັ້ນ"):this.$set(this.errors,"accountNumber","ກະລຸນາໃສ່ເລກບັນຊີ")},validateAccountName:function(){this.form.accountName?this.form.accountName.length<2?this.$set(this.errors,"accountName","ຊື່ບັນຊີຕ້ອງມີຢ່າງນ້ອຍ 2 ຕົວອັກສອນ"):this.$delete(this.errors,"accountName"):this.$set(this.errors,"accountName","ກະລຸນາໃສ່ຊື່ບັນຊີ")},validateBankName:function(){this.form.bankName?this.$delete(this.errors,"bankName"):this.$set(this.errors,"bankName","ກະລຸນາເລືອກທະນາຄານ")},validateAccountType:function(){this.form.accountType?this.$delete(this.errors,"accountType"):this.$set(this.errors,"accountType","ກະລຸນາເລືອກປະເພດບັນຊີ")},validateCurrency:function(){this.form.currency?this.$delete(this.errors,"currency"):this.$set(this.errors,"currency","ກະລຸນາເລືອກສະກຸນເງິນ")},validateForm:function(){return this.validateAccountNumber(),this.validateAccountName(),this.validateBankName(),this.validateAccountType(),this.validateCurrency(),0===Object.keys(this.errors).length},saveAccount:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,n,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validateForm()){e.next=3;break}return t.showToast("ກະລຸນາກວດສອບຂໍ້ມູນທີ່ໃສ່ອີກຄັ້ງ","error"),e.abrupt("return");case 3:if(e.prev=3,t.loading=!0,o={accountNumber:t.form.accountNumber.trim(),accountName:t.form.accountName.trim(),bankName:t.form.bankName,bankBranch:t.form.bankBranch?t.form.bankBranch.trim():null,accountType:t.form.accountType,currency:t.form.currency,isActive:t.form.isActive},!t.isEdit){e.next=12;break}return e.next=9,t.$axios.put("/api/bank_account/update/".concat(t.account.id),o);case 9:r=e.sent,e.next=15;break;case 12:return e.next=14,t.$axios.post("/api/bank_account/create",o);case 14:r=e.sent;case 15:r.data&&!1!==r.data.success?(n=t.isEdit?"ອັບເດດຂໍ້ມູນສຳເລັດແລ້ວ":"ບັນທຶກຂໍ້ມູນສຳເລັດແລ້ວ",t.showToast(n,"success"),t.$emit("saved",r.data),t.closeModal()):(c=r.data.message||"ມີຂໍ້ຜິດພາດໃນການບັນທຶກຂໍ້ມູນ",t.showToast(c,"error")),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error saving bank account:",e.t0),l="ມີຂໍ້ຜິດພາດໃນການບັນທຶກຂໍ້ມູນ",e.t0.response?e.t0.response.data&&e.t0.response.data.message?l=e.t0.response.data.message:404===e.t0.response.status?l="ບໍ່ພົບຂໍ້ມູນທີ່ຕ້ອງການ":403===e.t0.response.status?l="ບໍ່ມີສິດໃນການດຳເນີນການນີ້":500===e.t0.response.status?l="ມີຂໍ້ຜິດພາດຈາກເຊີເວີ ກະລຸນາລອງໃໝ່ໃນພາຍຫຼັງ":409===e.t0.response.status&&(l="ເລກບັນຊີນີ້ມີໃນລະບົບແລ້ວ"):e.t0.request&&(l="ບໍ່ສາມາດເຊື່ອມຕໍ່ກັບເຊີເວີໄດ້ ກະລຸນາກວດສອບການເຊື່ອມຕໍ່ອິນເຕີເນັດ"),t.showToast(l,"error");case 24:return e.prev=24,t.loading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[3,18,24,27]])})))()},closeModal:function(){var t=this;this.showModal=!1,this.$emit("close"),setTimeout((function(){t.initializeForm()}),300)},showToast:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";if(this.$swal){this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:"error"===o?5e3:3e3,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",e.$swal.stopTimer),t.addEventListener("mouseleave",e.$swal.resumeTimer)}}).fire({icon:{success:"success",error:"error",warning:"warning",info:"info"}[o]||"info",title:t})}else console.log("".concat(o,": ").concat(t)),alert("".concat(o.toUpperCase(),": ").concat(t))}}}),c=n,l=(o(1405),o(31)),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",[t.showModal?e("div",{staticClass:"modal-overlay",on:{click:t.closeModal}},[e("div",{staticClass:"modal-container",on:{click:function(t){t.stopPropagation()}}},[e("div",{staticClass:"modal-header"},[e("h3",{staticClass:"modal-title"},[t._v("\n          "+t._s(t.isEdit?"ແກ້ໄຂບັນຊີທະນາຄານ":"ເພີ່ມບັນຊີທະນາຄານໃໝ່")+"\n        ")]),t._v(" "),e("button",{staticClass:"modal-close-btn",on:{click:t.closeModal}},[e("i",{staticClass:"fas fa-times"})])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("form",{staticClass:"account-form",on:{submit:function(e){return e.preventDefault(),t.saveAccount.apply(null,arguments)}}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label required"},[t._v("ເລກບັນຊີ *")]),t._v(" "),e("div",{staticClass:"input-with-icon"},[e("i",{staticClass:"fas fa-credit-card input-icon"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.accountNumber,expression:"form.accountNumber"}],staticClass:"form-control",class:{"is-invalid":t.errors.accountNumber},attrs:{type:"text",placeholder:"ໃສ່ເລກບັນຊີ",required:""},domProps:{value:t.form.accountNumber},on:{input:function(e){e.target.composing||t.$set(t.form,"accountNumber",e.target.value)}}})]),t._v(" "),t.errors.accountNumber?e("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.accountNumber)+"\n              ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label required"},[t._v("ຊື່ບັນຊີ *")]),t._v(" "),e("div",{staticClass:"input-with-icon"},[e("i",{staticClass:"fas fa-user input-icon"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.accountName,expression:"form.accountName"}],staticClass:"form-control",class:{"is-invalid":t.errors.accountName},attrs:{type:"text",placeholder:"ໃສ່ຊື່ບັນຊີ",required:""},domProps:{value:t.form.accountName},on:{input:function(e){e.target.composing||t.$set(t.form,"accountName",e.target.value)}}})]),t._v(" "),t.errors.accountName?e("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.accountName)+"\n              ")]):t._e()])]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label required"},[t._v("ຊື່ທະນາຄານ *")]),t._v(" "),e("div",{staticClass:"input-with-icon"},[e("i",{staticClass:"fas fa-university input-icon"}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.bankName,expression:"form.bankName"}],staticClass:"form-control",class:{"is-invalid":t.errors.bankName},attrs:{required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"bankName",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:""}},[t._v("ເລືອກທະນາຄານ")]),t._v(" "),t._l(t.bankList,(function(o){return e("option",{key:o.code,domProps:{value:o.name}},[t._v("\n                    "+t._s(o.name)+"\n                  ")])}))],2)]),t._v(" "),t.errors.bankName?e("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.bankName)+"\n              ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label"},[t._v("ສາຂາ")]),t._v(" "),e("div",{staticClass:"input-with-icon"},[e("i",{staticClass:"fas fa-map-marker-alt input-icon"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.bankBranch,expression:"form.bankBranch"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ໃສ່ຊື່ສາຂາ (ທາງເລືອກ)"},domProps:{value:t.form.bankBranch},on:{input:function(e){e.target.composing||t.$set(t.form,"bankBranch",e.target.value)}}})])])]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label required"},[t._v("ປະເພດບັນຊີ *")]),t._v(" "),e("div",{staticClass:"input-with-icon"},[e("i",{staticClass:"fas fa-list input-icon"}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.accountType,expression:"form.accountType"}],staticClass:"form-control",class:{"is-invalid":t.errors.accountType},attrs:{required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"accountType",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:""}},[t._v("ເລືອກປະເພດບັນຊີ")]),t._v(" "),e("option",{attrs:{value:"Saving"}},[t._v("Saving Account")]),t._v(" "),e("option",{attrs:{value:"Current"}},[t._v("Current Account")]),t._v(" "),e("option",{attrs:{value:"Fixed Deposit"}},[t._v("Fixed Deposit")])])]),t._v(" "),t.errors.accountType?e("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.accountType)+"\n              ")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label required"},[t._v("ສະກຸນເງິນ *")]),t._v(" "),e("div",{staticClass:"input-with-icon"},[e("i",{staticClass:"fas fa-dollar-sign input-icon"}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.currency,expression:"form.currency"}],staticClass:"form-control",class:{"is-invalid":t.errors.currency},attrs:{required:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"currency",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:""}},[t._v("ເລືອກສະກຸນເງິນ")]),t._v(" "),e("option",{attrs:{value:"LAK"}},[t._v("LAK - ກີບ")]),t._v(" "),e("option",{attrs:{value:"USD"}},[t._v("USD - ໂດລາ")]),t._v(" "),e("option",{attrs:{value:"THB"}},[t._v("THB - ບາດ")]),t._v(" "),e("option",{attrs:{value:"CNY"}},[t._v("CNY - ຢວນ")])])]),t._v(" "),t.errors.currency?e("div",{staticClass:"invalid-feedback"},[t._v("\n                "+t._s(t.errors.currency)+"\n              ")]):t._e()])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label"},[t._v("ສະຖານະ")]),t._v(" "),e("div",{staticClass:"status-toggle"},[e("label",{staticClass:"toggle-switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.isActive,expression:"form.isActive"}],staticClass:"toggle-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.isActive)?t._i(t.form.isActive,null)>-1:t.form.isActive},on:{change:function(e){var o=t.form.isActive,r=e.target,n=!!r.checked;if(Array.isArray(o)){var c=t._i(o,null);r.checked?c<0&&t.$set(t.form,"isActive",o.concat([null])):c>-1&&t.$set(t.form,"isActive",o.slice(0,c).concat(o.slice(c+1)))}else t.$set(t.form,"isActive",n)}}}),t._v(" "),e("span",{staticClass:"toggle-slider"})]),t._v(" "),e("span",{staticClass:"toggle-label"},[t._v("\n                "+t._s(t.form.isActive?"ເປີດໃຊ້ງານ":"ປິດໃຊ້ງານ")+"\n              ")])])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",disabled:t.loading},on:{click:t.closeModal}},[e("i",{staticClass:"fas fa-times"}),t._v("\n          ຍົກເລີກ\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.loading||!t.isFormValid},on:{click:t.saveAccount}},[t.loading?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-save"}),t._v("\n          "+t._s(t.isEdit?"ອັບເດດ":"ບັນທຶກ")+"\n        ")])])])]):t._e()])}),[],!1,null,"5f6eb4c3",null);e.default=component.exports}}]);