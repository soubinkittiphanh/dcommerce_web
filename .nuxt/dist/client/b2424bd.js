(window.webpackJsonp=window.webpackJsonp||[]).push([[193,78,155],{1218:function(e,t,n){var content=n(1440);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(15).default)("0a9fef00",content,!0,{sourceMap:!1})},1351:function(e,t,n){"use strict";n.r(t);var r=n(321),o=n(318),l=n(19),c=n(792),d=n(771),f=n(798),m=n(66),_=n(794),h=n(112),v=n(17),x=(n(85),n(24),n(39),{props:{userId:{type:Number,requiret:!0,default:0},cusBalance:{type:Number,requiret:!0,default:0}},data:function(){return{loaddata:[],isloading:!1,valid:!0,message:null,dialogMessage:!1,form_data:{txn_his_id:1e3,txn_id:1e3,txn_type:1004,txn_his_amount:1e4,user_id:this.userId,user_balance:this.cusBalance,txn_his_inputter:this.$store.getters.loggedInUser.id,txn_his_date:"2021-09-25 00:00:00"},rule:{idRules:[function(e){return!!e||"ໄອດີ is required"}],nameRules:[function(e){return!!e||"ຊຶ່ is required"}],amountRules:[function(e){return!!e||"ກລນ ໃສ່ຈຳນວນ is required"}],passRules:[function(e){return!!e||"ລະຫັດຜ່ານ is required"},function(e){return e.length<=10||"ລະຫັດຜ່ານ ຈຳກັດແຕ່ 10"}],walletRules:[function(e){return!!e||"ວົງເງິນ is required"}],txnRule:[function(e){return!!e||"ກະລຸນາເລືອກ ລາຍການທຸລະກຳ is required"}]}}},created:function(){var e=this;return Object(v.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:case"end":return t.stop()}}),t)})))()},watch:{userId:function(e){this.form_data.user_id=e},message:function(e){this.dialogMessage=null!=e}},methods:{selectChange:function(e){console.log("SELECT: "+e),this.form_data.txn_id=e},submitDatas:function(){var e=this;return Object(v.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,header;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isloading=!0,console.log("submitOut"),e.$refs.form.validate()){t.next=5;break}return e.isloading=!1,t.abrupt("return");case 5:if(console.log("submitIn"),n=e.form_data.user_balance,r=e.form_data.txn_his_amount,o=e.$store.getters.loggedInUser.token,1006!==e.form_data.txn_id){t.next=15;break}if(!(r>n)){t.next=15;break}return e.isloading=!1,e.message="ຍອດເງິນໃນບັນຊີ ບໍ່ພຽງພໍ",console.log("Biger"),t.abrupt("return");case 15:if(l="/txn_his_",header={headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}},!e.isedit){t.next=23;break}return t.next=20,e.$axios.put(l+"e",e.form_data,header).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 20:e.isloading=!1,t.next=26;break;case 23:return t.next=25,e.$axios.post(l+"i",e.form_data,header).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 25:e.isloading=!1;case 26:e.fetchData();case 27:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(v.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("txn_f").then((function(t){e.loaddata=t.data.map((function(e){return console.log(e.txn_id),{txn_id:e.txn_id,txn_type:e.txn_type,txn_name:e.txn_name,txn_amount:e.txn_amount,txn_user_id:e.txn_user_id,txn_inputter:e.txn_inputter,txn_date:e.txn_date,function:e.txn_id}}))})).catch((function(t){e.message=t,console.log("Error: "+t)}));case 2:case"end":return t.stop()}}),t)})))()},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},formatNum:function(e){return(new Intl.NumberFormat).format(e)}}}),k=n(31),component=Object(k.a)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(d.a,{attrs:{"max-width":"300px",persistent:""},model:{value:e.dialogMessage,callback:function(t){e.dialogMessage=t},expression:"dialogMessage"}},[t("dialog-classic-message",{attrs:{message:e.message},on:{closedialog:function(t){e.message=null}}})],1),e._v(" "),t(d.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[t("loading-indicator")],1),e._v(" "),t(o.a,[t(l.d,[e._v("\n      ຈັດການ Wallet "+e._s(e.form_data.user_id||"null")+" balance:\n      "+e._s(e.form_data.user_balance))]),e._v(" "),t(c.a,[t(f.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(h.a,{attrs:{counter:10,rules:e.rule.idRules,label:"ໄອດີ",required:"",disabled:""},model:{value:e.form_data.user_id,callback:function(t){e.$set(e.form_data,"user_id",t)},expression:"form_data.user_id"}}),e._v(" "),t(m.a,{attrs:{items:e.loaddata,"item-value":function(e){return e.txn_id},"item-text":function(e){return e.txn_id+" - "+e.txn_name},"append-outer-icon":"mdi-map","menu-props":"auto","hide-details":"",label:"ເລືອກທຸລະກຳ","single-line":"",rules:e.rule.txnRule},on:{change:e.selectChange},model:{value:e.form_data.txn_type,callback:function(t){e.$set(e.form_data,"txn_type",t)},expression:"form_data.txn_type"}}),e._v(" "),t(h.a,{attrs:{counter:10,rules:e.rule.amountRules,label:"ຈຳນວນເງິນ: "+e.formatNum(e.form_data.txn_his_amount),required:""},model:{value:e.form_data.txn_his_amount,callback:function(t){e.$set(e.form_data,"txn_his_amount",t)},expression:"form_data.txn_his_amount"}})],1),e._v("\n      "+e._s(e.userId)+"\n      "),e._t("default")],2),e._v(" "),t(l.a,[t(_.a),e._v(" "),t(r.a,{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" ລ້າງຂໍ້ມູນ ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.$emit("closewallet")}}},[e._v("\n        ປິດ\n      ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.submitDatas}},[e._v(" ບັນທຶກ ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{DialogClassicMessage:n(826).default,LoadingIndicator:n(248).default})},1439:function(e,t,n){"use strict";n(1218)},1440:function(e,t,n){var r=n(14)((function(i){return i[1]}));r.push([e.i,'.grey[data-v-523df5d4],.text-h5[data-v-523df5d4]{font-family:"Noto Sans Lao"}',""]),r.locals={},e.exports=r},1779:function(e,t,n){"use strict";n.r(t);var r=n(321),o=n(318),l=n(19),c=n(831),d=n(792),f=n(806),m=n(771),_=n(317),h=n(798),v=n(168),x=n(794),k=n(112),w=n(92),y=n(339),I=(n(34),n(130),n(17)),$=(n(75),n(895),n(5),n(68),n(64),n(39),n(85),{middleware:"auths",data:function(){return{wallet:!1,isedit:!1,dialog:!1,isloading:!1,dialogForm:!1,message:"",valid:!0,name:"",search:"",form_data:{cus_id:"1XXX",cus_pass:"pasw1ss1",cus_name:"cmeedit",cus_tel:"99884dd",cus_email:"@email.com",cus_balance:0,cus_active:!1},loaddata:[],headers:[{text:"ໄອດີ",align:"center",value:"cus_id"},{text:"ຊື່ສະມາຊິກ",align:"center",value:"cus_name"},{text:"ເບີໂທ",align:"center",value:"cus_tel"},{text:"email",align:"center",value:"cus_email"},{text:"ຍອດເງິນ",align:"center",value:"cus_balance"},{text:"active",align:"end",value:"cus_active",sortable:!1},{text:"ຟັງຊັ່ນ",align:"end",value:"function",sortable:!1},{text:"ຟັງຊັ່ນ",align:"end",value:"wallet",sortable:!1}],rule:{idRules:[function(e){return!!e||"ໄອດີ is required"}],nameRules:[function(e){return!!e||"ຊຶ່ is required"}],passRules:[function(e){return!!e||"ລະຫັດຜ່ານ is required"},function(e){return e.length<=10||"ລະຫັດຜ່ານ ຈຳກັດແຕ່ 10"}],walletRules:[function(e){return!!e||"ວົງເງິນ is required"}]}}},created:function(){var e=this;return Object(I.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:case"end":return t.stop()}}),t)})))()},watch:{message:function(e){this.dialog=null!=e},isedit:function(e){e||(this.form_data.cus_id="1XXX")}},methods:{walletAction:function(e){console.log("Wallet: "+e.cus_id),console.log("Bal: "+e.cus_balance),this.form_data.cus_id=e.cus_id,this.form_data.cus_balance=parseInt(e.cus_balance.replaceAll(",","")),console.log("Int: "+parseInt(e.cus_balance.replaceAll(",","")).toString())},editItem:function(e){console.log(e.cus_id),this.form_data=this.loaddata.find((function(t){return t.cus_id===e.cus_id})),this.dialogForm=!0},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},submitDatas:function(){var e=this;return Object(I.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isloading=!0,console.log("submitOut"),e.$refs.form.validate()){t.next=5;break}return e.isloading=!1,t.abrupt("return");case 5:if(console.log("submitIn"),n="/customer_",!e.isedit){t.next=13;break}return t.next=10,e.$axios.put(n+"e",e.form_data).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 10:e.isloading=!1,t.next=16;break;case 13:return t.next=15,e.$axios.post(n+"i",e.form_data).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 15:e.isloading=!1;case 16:e.fetchData();case 17:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(I.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isloading=!0,t.next=3,e.$axios.get("customer_f").then((function(t){e.loaddata=t.data.map((function(e){return console.log(e.cus_id),{cus_id:e.cus_id,cus_pass:e.cus_pass,cus_name:e.cus_name,cus_tel:e.cus_tel,cus_email:e.cus_email,cus_balance:Intl.NumberFormat().format(e.CREDIT-(e.ORDER_DEBIT+e.DEBIT)),cus_active:e.cus_active,function:e.cus_id,wallet:e.cus_id}}))})).catch((function(t){e.message=t,console.log("Error: "+t)}));case 3:e.isloading=!1;case 4:case"end":return t.stop()}}),t)})))()}}}),O=(n(1439),n(31)),component=Object(O.a)($,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(m.a,{attrs:{"max-width":"300px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("dialog-classic-message",{attrs:{message:e.message},on:{closedialog:function(t){e.message=null}}})],1),e._v("\n  "+e._s(e.form_data.cus_id)+"\nbalance:  "+e._s(e.form_data.cus_balance)+"\n  "),t(m.a,{attrs:{"max-width":"300px"},model:{value:e.wallet,callback:function(t){e.wallet=t},expression:"wallet"}},[t("wallet",{attrs:{"user-id":e.form_data.cus_id,"cus-balance":e.form_data.cus_balance},on:{closewallet:function(t){e.wallet=!1}}})],1),e._v(" "),t(m.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[t("loading-indicator")],1),e._v(" "),t(m.a,{attrs:{"max-width":"600px"},model:{value:e.dialogForm,callback:function(t){e.dialogForm=t},expression:"dialogForm"}},[t(o.a,[t(l.d),e._v(" "),t(l.c,[t(d.a,[t(h.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(k.a,{attrs:{counter:10,rules:e.rule.idRules,label:"ໄອດີລູກຄ້າ",required:"",disabled:""},model:{value:e.form_data.cus_id,callback:function(t){e.$set(e.form_data,"cus_id",t)},expression:"form_data.cus_id"}}),e._v(" "),t(k.a,{attrs:{counter:10,rules:e.rule.nameRules,label:"ຊື່ລູກຄ້າ",required:""},model:{value:e.form_data.cus_name,callback:function(t){e.$set(e.form_data,"cus_name",t)},expression:"form_data.cus_name"}}),e._v(" "),t(k.a,{attrs:{counter:10,rules:e.rule.passRules,label:"ລະຫັດຜ່ານ",required:"",type:e.isedit?"password":""},model:{value:e.form_data.cus_pass,callback:function(t){e.$set(e.form_data,"cus_pass",t)},expression:"form_data.cus_pass"}}),e._v(" "),t(k.a,{attrs:{counter:10,rules:e.rule.nameRules,label:"ເບີໂທ",required:""},model:{value:e.form_data.cus_tel,callback:function(t){e.$set(e.form_data,"cus_tel",e._n(t))},expression:"form_data.cus_tel"}}),e._v(" "),t(k.a,{attrs:{counter:10,rules:e.rule.nameRules,label:"ອີເມວ",required:""},model:{value:e.form_data.cus_email,callback:function(t){e.$set(e.form_data,"cus_email",e._n(t))},expression:"form_data.cus_email"}}),e._v(" "),t(c.a,{attrs:{label:"ເປິດໃຊ້ງານທັນທີ"},model:{value:e.form_data.cus_active,callback:function(t){e.$set(e.form_data,"cus_active",t)},expression:"form_data.cus_active"}})],1)],1)],1),e._v(" "),t(l.a,[t(x.a),e._v(" "),t(r.a,{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" ລ້າງຂໍ້ມູນ ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogForm=!1}}},[e._v("\n          ປິດ\n        ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.submitDatas}},[e._v("\n          ບັນທຶກ\n        ")])],1)],1)],1),e._v(" "),t(o.a,[t(l.d,[t(k.a,{attrs:{"append-icon":"mdi-magnify",label:"ຊອກຫາ","single-line":"","hide-detailsx":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.loaddata?t(f.a,{attrs:{headers:e.headers,search:e.search,items:e.loaddata},scopedSlots:e._u([{key:"top",fn:function(){return[t(w.a,{attrs:{flat:""}},[t(y.a,[e._v("ລູກຄ້າ: "+e._s(e.loaddata.length))]),e._v(" "),t(_.a,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),t(x.a),e._v(" "),t(r.a,{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){e.dialogForm=!0,e.isedit=!1}}},[e._v("\n            ສ້າງໃຫມ່\n          ")])],1)]},proxy:!0},{key:"item.cus_active",fn:function(n){var r=n.item;return[t(c.a,{attrs:{disabled:""},model:{value:r.cus_active,callback:function(t){e.$set(r,"cus_active",t)},expression:"item.cus_active"}})]}},{key:"item.function",fn:function(n){var r=n.item;return[t(v.a,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){e.editItem(r),e.isedit=!0}}},[e._v("\n          mdi-pencil\n        ")])]}},{key:"item.wallet",fn:function(n){var o=n.item;return[t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.walletAction(o),e.wallet=!0}}},[t("i",{staticClass:"fas fa-wallet"})])]}}],null,!0)}):e._e()],1)],1)}),[],!1,null,"523df5d4",null);t.default=component.exports;installComponents(component,{DialogClassicMessage:n(826).default,Wallet:n(1351).default,LoadingIndicator:n(248).default})},816:function(e,t,n){var content=n(817);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(15).default)("7b5d4dc6",content,!0,{sourceMap:!1})},817:function(e,t,n){var r=n(14)((function(i){return i[1]}));r.push([e.i,".v-input--checkbox.v-input--indeterminate.v-input--is-disabled{opacity:.6}.v-input--checkbox.v-input--dense{margin-top:4px}",""]),r.locals={},e.exports=r},826:function(e,t,n){"use strict";n.r(t);var r=n(321),o=n(318),l=n(19),c=n(317),d=n(794),f={props:{message:{type:String,default:""}},methods:{toggleDialog:function(){this.$emit("closedialog")}}},m=n(31),component=Object(m.a)(f,(function(){var e=this,t=e._self._c;return t(o.a,[t(l.d,{staticClass:"text-h5 grey lighten-2"},[e._v(" ຂໍ້ຄວາມ ")]),e._v(" "),t(l.c,[e._v("\n    "+e._s(e.message)+"\n  ")]),e._v(" "),t(c.a),e._v(" "),t(l.a,[t(d.a),e._v(" "),t(r.a,{attrs:{color:"primary",text:""},on:{click:e.toggleDialog}},[e._v(" ຕົກລົງ ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports},831:function(e,t,n){"use strict";n(10),n(7),n(9),n(12),n(8),n(13);var r=n(99),o=n(3),l=(n(5),n(68),n(816),n(447),n(43)),c=n(51),d=n(176),f=["title"];function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a=d.a.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return _(_({},c.a.options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(e){var t=this;this.$nextTick((function(){return t.inputIndeterminate=e}))},inputIndeterminate:function(e){this.$emit("update:indeterminate",e)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var e=this.attrs$,t=(e.title,Object(r.a)(e,f));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(l.a,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",_(_({},t),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}})},895:function(e,t,n){"use strict";n(896)},896:function(e,t,n){"use strict";var r=n(11),o=n(48),l=n(25),c=n(72),d=n(40),f=n(49),m=n(349),_=n(55),h=n(131),v=n(209),x=n(454),k=n(45),w=n(77),y=k("replace"),I=TypeError,$=l("".indexOf),O=l("".replace),R=l("".slice),C=Math.max;r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,l,k,D,j,E,S,M,A,F=c(this),T=0,B="";if(f(e)){if((n=m(e))&&(r=_(c(v(e))),!~$(r,"g")))throw new I("`.replaceAll` does not allow non-global regexes");if(l=h(e,y))return o(l,e,F,t);if(w&&n)return O(_(F),e,t)}for(k=_(F),D=_(e),(j=d(t))||(t=_(t)),E=D.length,S=C(1,E),M=$(k,D);-1!==M;)A=j?_(t(D,M,k)):x(D,k,M,[],void 0,t),B+=R(k,T,M)+A,T=M+E,M=M+S>k.length?-1:$(k,D,M+S);return T<k.length&&(B+=R(k,T)),B}})}}]);