(window.webpackJsonp=window.webpackJsonp||[]).push([[219,215],{1249:function(t,e,n){"use strict";n.r(e);var r=n(33),o=n(20),c=(n(30),n(44),n(5),n(8),n(333),n(92),n(357));e.default={data:function(){return{sharedMessage:"Hello from mixin!"}},methods:{exportMinistryReportToExcel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.ministrySummaryReport.length){e.next=4;break}return t.$toast.warning("No ministry data to export"),e.abrupt("return");case 4:n=t.createExcelWorkbook(),r=t.createMinistryWorksheet(),c.utils.book_append_sheet(n,r,"Ministry Report"),o="Ministry_Report_".concat(t.formatDateForFilename(),".xlsx"),c.writeFile(n,o),t.$toast.success("Ministry report exported successfully"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$toast.error("Failed to export ministry report");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},exportBankAccountReportToExcel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.bankAccountSummaryReport.length){e.next=4;break}return t.$toast.warning("No bank account data to export"),e.abrupt("return");case 4:n=t.createExcelWorkbook(),r=t.createBankAccountWorksheet(),c.utils.book_append_sheet(n,r,"Bank Account Report"),o="Bank_Account_Report_".concat(t.formatDateForFilename(),".xlsx"),c.writeFile(n,o),t.$toast.success("Bank account report exported successfully"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$toast.error("Failed to export bank account report");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},exportChartAccountReportToExcel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.chartAccountSummaryReport.length){e.next=4;break}return t.$toast.warning("No chart account data to export"),e.abrupt("return");case 4:n=t.createExcelWorkbook(),r=t.createChartAccountWorksheet(),c.utils.book_append_sheet(n,r,"Chart Account Report"),o="Chart_Account_Report_".concat(t.formatDateForFilename(),".xlsx"),c.writeFile(n,o),t.$toast.success("Chart account report exported successfully"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$toast.error("Failed to export chart account report");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},exportAllReportsToExcel:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,l,d,m,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.ministrySummaryReport&&t.ministrySummaryReport.length>0,r=t.bankAccountSummaryReport&&t.bankAccountSummaryReport.length>0,o=t.chartAccountSummaryReport&&t.chartAccountSummaryReport.length>0,n||r||o){e.next=7;break}return t.$toast.warning("No data available to export"),e.abrupt("return");case 7:l=t.createExcelWorkbook(),n&&(d=t.createMinistryWorksheet(),c.utils.book_append_sheet(l,d,"Ministry Report")),r&&(m=t.createBankAccountWorksheet(),c.utils.book_append_sheet(l,m,"Bank Account Report")),o&&(v=t.createChartAccountWorksheet(),c.utils.book_append_sheet(l,v,"Chart Account Report")),h="Financial_Reports_".concat(t.formatDateForFilename(),".xlsx"),c.writeFile(l,h),t.$toast.success("All reports exported successfully"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Export error:",e.t0),t.$toast.error("Failed to export reports");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))()},createExcelWorkbook:function(){return c.utils.book_new()},createMinistryWorksheet:function(){var t,e=this,n=["#","Ministry Code","Ministry Name","Settlement Count"].concat(Object(r.a)(this.currencyList),["Total (LAK)"]),data=this.ministrySummaryReport.map((function(t,n){var r=[n+1,t.ministryCode,t.ministryName,t.settlementCount];return e.currencyList.forEach((function(e){var n;r.push((null===(n=t.amounts)||void 0===n?void 0:n[e])||0)})),r.push(t.totalLakEquivalent||0),r})),o=["","","TOTAL",this.ministrySummaryReport.reduce((function(t,e){return t+e.settlementCount}),0)];this.currencyList.forEach((function(t){var n,r;o.push((null===(n=e.ministryTotals)||void 0===n||null===(r=n.currencyTotals)||void 0===r?void 0:r[t])||0)})),o.push((null===(t=this.ministryTotals)||void 0===t?void 0:t.totalLakEquivalent)||0);var l=[n].concat(Object(r.a)(data),[o]),d=c.utils.aoa_to_sheet(l);return this.addWorksheetMetadata(d,"Ministry Financial Report"),d},createBankAccountWorksheet:function(){var t,e=this,n=["#","Account Number","Account Name","Bank Name","Account Type","Settlement Count"].concat(Object(r.a)(this.currencyList),["Total (LAK)"]),data=this.bankAccountSummaryReport.map((function(t,n){var r=[n+1,t.accountNumber,t.accountName,t.bankName,t.accountType,t.settlementCount];return e.currencyList.forEach((function(e){var n;r.push((null===(n=t.amounts)||void 0===n?void 0:n[e])||0)})),r.push(t.totalLakEquivalent||0),r})),o=["","","","","TOTAL",this.bankAccountSummaryReport.reduce((function(t,b){return t+b.settlementCount}),0)];this.currencyList.forEach((function(t){var n,r;o.push((null===(n=e.bankAccountTotals)||void 0===n||null===(r=n.currencyTotals)||void 0===r?void 0:r[t])||0)})),o.push((null===(t=this.bankAccountTotals)||void 0===t?void 0:t.totalLakEquivalent)||0);var l=[n].concat(Object(r.a)(data),[o]),d=c.utils.aoa_to_sheet(l);return this.addWorksheetMetadata(d,"Bank Account Financial Report"),d},createChartAccountWorksheet:function(){var t,e=this,n=["#","Account Number","Account Name","Settlement Count"].concat(Object(r.a)(this.currencyList),["Total (LAK)"]),data=this.chartAccountSummaryReport.map((function(t,n){var r=[n+1,t.accountNumber,t.accountName,t.settlementCount];return e.currencyList.forEach((function(e){var n;r.push((null===(n=t.amounts)||void 0===n?void 0:n[e])||0)})),r.push(t.totalLakEquivalent||0),r})),o=["","","TOTAL",this.chartAccountSummaryReport.reduce((function(t,e){return t+e.settlementCount}),0)];this.currencyList.forEach((function(t){var n,r;o.push((null===(n=e.chartAccountTotals)||void 0===n||null===(r=n.currencyTotals)||void 0===r?void 0:r[t])||0)})),o.push((null===(t=this.chartAccountTotals)||void 0===t?void 0:t.totalLakEquivalent)||0);var l=[n].concat(Object(r.a)(data),[o]),d=c.utils.aoa_to_sheet(l);return this.addWorksheetMetadata(d,"Chart Account Financial Report"),d},addWorksheetMetadata:function(t,title){var e,n,r=[[title],["Report Period: ".concat((null===(e=this.dateRange)||void 0===e?void 0:e.start)||"N/A"," to ").concat((null===(n=this.dateRange)||void 0===n?void 0:n.end)||"N/A")],["Generated: ".concat((new Date).toLocaleString())],[""]];c.utils.sheet_add_aoa(t,r,{origin:"A1"});var o=c.utils.decode_range(t["!ref"]);o.e.r+=r.length,t["!ref"]=c.utils.encode_range(o)},formatDateForFilename:function(){var t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0");return"".concat(e).concat(n).concat(r,"_").concat(o).concat(c)}}}},1250:function(t,e,n){var content=n(1555);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(16).default)("50bdc3b0",content,!0,{sourceMap:!1})},1554:function(t,e,n){"use strict";n(1250)},1555:function(t,e,n){var r=n(15)((function(i){return i[1]}));r.push([t.i,'.v-card[data-v-178d0b7e]{transition:all .3s ease}.v-card[data-v-178d0b7e]:hover{transform:translateY(-2px)}.sortable[data-v-178d0b7e]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sortable[data-v-178d0b7e]:hover{background-color:hsla(0,0%,100%,.1)!important}.primary.lighten-2 th[data-v-178d0b7e]{background-color:var(--v-primary-lighten2)!important}.chart-account-table[data-v-178d0b7e]{font-family:"Roboto",sans-serif}.chart-account-table thead th[data-v-178d0b7e]{background-color:var(--v-primary-base)!important;border-right:1px solid hsla(0,0%,100%,.2)!important;color:#fff!important;font-size:.875rem!important;font-weight:700!important;padding:12px 8px!important}.chart-account-table tbody td[data-v-178d0b7e]{border-bottom:1px solid #e0e0e0!important;border-right:1px solid #f5f5f5!important;font-size:.8rem!important;padding:8px!important}.chart-account-table tbody tr[data-v-178d0b7e]:hover{background-color:#f8f9fa!important}.chart-account-table .primary.lighten-4 td[data-v-178d0b7e]{background-color:var(--v-primary-lighten4)!important;border-top:2px solid var(--v-primary-base)!important;font-weight:700!important}@media (max-width:768px){.chart-account-table[data-v-178d0b7e]{font-size:.75rem}.chart-account-table tbody td[data-v-178d0b7e],.chart-account-table thead th[data-v-178d0b7e]{font-size:.7rem!important;padding:6px 4px!important}}',""]),r.locals={},t.exports=r},1741:function(t,e,n){"use strict";n.r(e);var r=n(310),o=n(316),c=n(313),l=n(18),d=n(317),m=n(780),v=n(775),h=n(789),f=n(754),_=n(312),y=n(786),x=n(788),C=n(787),k=n(785),A=n(781),w=n(167),S=n(306),R=n(199),N=n(307),T=n(309),O=n(28),E=n(168),F=n(252),M=n(779),L=n(65),D=n(433),I=n(777),B=n(113),$=n(810),j=n(1213),P=(n(30),n(5),n(7),n(9),n(11),n(12),n(3)),U=n(20);n(54),n(53),n(34),n(131),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(8),n(35),n(250),n(44),n(69),n(339),n(823),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(63),n(10),n(209),n(62),n(102),n(92);function K(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function z(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?K(Object(source),!0).forEach((function(e){Object(P.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):K(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var W={name:"SettlementDashboard",mixins:[n(1249).default],data:function(){return{loadingBankAccountReport:!1,bankAccountSummaryReport:[],bankAccountTotals:{totalLakEquivalent:0,currencyTotals:{}},dateRange:{start:null,end:null},ministryTotals:{},loadingMinistryReport:!1,settlements:[],loading:!1,saving:!1,dialog:!1,formValid:!1,dialogMode:"create",currentSettlement:{},settlementForm:{bookingDate:"",amount:"",method:"",exchangeRate:1,notes:"",userId:null},rules:{required:function(t){return!!t||"This field is required"},positiveNumber:function(t){return t&&t>0||"Must be greater than 0"}},tableOptions:{page:1,itemsPerPage:10,sortBy:["id"],sortDesc:[!0]},pagination:{totalItems:0},tableHeaders:[{text:"ID",value:"id",sortable:!0,width:"80px"},{text:"Date",value:"bookingDate",sortable:!0,width:"120px"},{text:"Amount",value:"amount",sortable:!0,width:"150px"},{text:"Method",value:"method",sortable:!1,width:"140px"},{text:"Proceeder",value:"proceeder",sortable:!1,width:"180px"},{text:"Money Advance",value:"moneyAdvance",sortable:!1,width:"140px"},{text:"Status",value:"status",sortable:!1,width:"120px"},{text:"Actions",value:"actions",sortable:!1,width:"120px"}],filters:{method:"",dateFrom:"",dateTo:""},searchQuery:"",searchTimeout:null,currencyList:[],stats:{totalCount:0,totalAmount:0,thisMonth:0,pending:0},ministrySummary:[],loadingMinistrySummary:!1,ministrySummaryReport:[],loadingChartAccountReport:!1,chartAccountSummaryReport:[],chartAccountTotals:{totalLakEquivalent:0,currencyTotals:{}},methodOptions:[{text:"All Methods",value:""},{text:"Cash Payment",value:"cash"},{text:"Bank Transfer",value:"bank_transfer"},{text:"Salary Deduction",value:"deduction"}],methodSelectOptions:[{text:"Cash Payment",value:"cash"},{text:"Bank Transfer",value:"bank_transfer"},{text:"Salary Deduction",value:"deduction"}],methodChart:null,trendChart:null}},computed:{dialogTitle:function(){return{create:"Create New Settlement",edit:"Edit Settlement",view:"Settlement Details"}[this.dialogMode]||"Settlement"},hasActiveFilters:function(){return this.filters.method||this.filters.dateFrom||this.filters.dateTo||this.searchQuery}},mounted:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:case"end":return e.stop()}}),e)})))()},methods:{loadInitialData:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.fetchSettlements(),t.fetchStats(),t.fetchMinistrySummary(),t.fetchChartAccountReport(),t.fetchMinistryReport(),t.fetchBankAccountReport()]);case 2:t.$nextTick((function(){t.initializeCharts()}));case 3:case"end":return e.stop()}}),e)})))()},refreshData:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadInitialData();case 2:t.$toast.success("Data refreshed successfully");case 3:case"end":return e.stop()}}),e)})))()},fetchSettlements:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,c=z({page:t.tableOptions.page||1,limit:t.tableOptions.itemsPerPage||10,sortBy:(null===(n=t.tableOptions.sortBy)||void 0===n?void 0:n[0])||"id",sortOrder:null!==(r=t.tableOptions.sortDesc)&&void 0!==r&&r[0]?"desc":"asc"},t.filters),t.searchQuery&&(c.search=t.searchQuery),e.next=6,t.$axios.get("/api/settlements",{params:c});case 6:l=e.sent,t.settlements=l.data.data.settlements||[],t.pagination.totalItems=(null===(o=l.data.data.pagination)||void 0===o?void 0:o.totalItems)||0,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Error fetching settlements:",e.t0),t.$toast.error("Failed to load settlements");case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})))()},fetchStats:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.get("/api/settlements/stats");case 3:n=e.sent,t.stats=n.data.data||{},e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching stats:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},fetchMinistrySummary:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingMinistrySummary=!0,e.prev=1,e.next=4,t.$axios.get("/api/settlements",{params:{limit:1e3,page:1}});case 4:r=e.sent,o=(null===(n=r.data.data)||void 0===n?void 0:n.settlements)||[],c=new Map,o.forEach((function(e){if(e.ministry){var n=e.ministry.id,r=e.ministry.ministryNameEn||e.ministry.ministryName||"Ministry ".concat(n);c.has(n)||c.set(n,{ministryId:n,ministryName:r,ministryCode:e.ministry.ministryCode||"",settlementCount:0,totalAmount:0,totalLakEquivalent:0,currencies:new Map});var o=c.get(n),l=e.currency||{},d=l.id||null,m=l.code||"LAK",v=t.getCurrencySymbol(m),h=parseFloat(e.exchangeRate)||1,f=parseFloat(e.amount)||0,_=f*h;o.currencies.has(d)||o.currencies.set(d,{currencyId:d,currencyCode:m,currencySymbol:v,currencyName:l.name||m,count:0,totalAmount:0,totalExchangeRateSum:0,lakEquivalent:0});var y=o.currencies.get(d);y.count+=1,y.totalAmount+=f,y.totalExchangeRateSum+=h,y.lakEquivalent+=_,o.settlementCount+=1,o.totalAmount+=f,o.totalLakEquivalent+=_}})),t.ministrySummary=Array.from(c.values()).map((function(t){var e=Array.from(t.currencies.values()).map((function(t){return z(z({},t),{},{avgExchangeRate:t.count>0?(t.totalExchangeRateSum/t.count).toFixed(4):"1.0000"})}));return z(z({},t),{},{currencies:e.sort((function(a,b){return b.totalAmount-a.totalAmount}))})})).sort((function(a,b){return b.totalLakEquivalent-a.totalLakEquivalent})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Error fetching ministry summary:",e.t0),t.ministrySummary=[];case 15:return e.prev=15,t.loadingMinistrySummary=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})))()},fetchChartAccountReport:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,v,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.loadingChartAccountReport=!0,n=[],r=1,o=1;case 5:return e.next=7,t.$axios.get("/api/settlements",{params:{branchId:t.selectedBranchId,fromDate:t.dateRange.start,toDate:t.dateRange.end,isPosted:!0,include:["chartAccount","currency"],page:r,limit:50}});case 7:d=e.sent,m=(null===(c=d.data.data)||void 0===c?void 0:c.settlements)||[],n=n.concat(m),(v=null===(l=d.data.data)||void 0===l?void 0:l.pagination)&&(o=v.totalPages,console.log("Fetched page ".concat(r," of ").concat(o,", got ").concat(m.length," settlements"))),r++;case 13:if(r<=o){e.next=5;break}case 14:console.log("Total settlements fetched for chart account report: ".concat(n.length)),h=new Map,f=new Set,n.forEach((function(t){var e,n,r,o,c=t.chartAccount;c?(n=c.id,r=c.accountNumber,o=c.accountName||c.accountLLName):(n="NO_CHART_ACCOUNT",r="N/A",o="No Chart Account Assigned");var l=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",d=parseFloat(t.exchangeRate)||1,m=parseFloat(t.amount)||0,v=m*d;f.add(l),h.has(n)||h.set(n,{chartAccountId:n,accountNumber:r,accountName:o,settlementCount:0,totalLakEquivalent:0,amounts:{}});var _=h.get(n);_.settlementCount+=1,_.totalLakEquivalent+=v,_.amounts[l]=(_.amounts[l]||0)+m})),t.currencyList=Array.from(f).sort(),t.chartAccountSummaryReport=Array.from(h.values()).sort((function(a,b){return"NO_CHART_ACCOUNT"===a.chartAccountId?1:"NO_CHART_ACCOUNT"===b.chartAccountId?-1:a.accountNumber&&b.accountNumber?String(a.accountNumber).localeCompare(String(b.accountNumber)):a.accountName.localeCompare(b.accountName)})),console.log("Chart account breakdown:"),t.chartAccountSummaryReport.forEach((function(t){console.log("- ".concat(t.accountNumber,": ").concat(t.accountName," (").concat(t.settlementCount," settlements)"))})),t.chartAccountTotals={totalLakEquivalent:t.chartAccountSummaryReport.reduce((function(t,e){return t+e.totalLakEquivalent}),0),currencyTotals:{}},t.currencyList.forEach((function(e){t.chartAccountTotals.currencyTotals[e]=t.chartAccountSummaryReport.reduce((function(t,n){return t+(n.amounts[e]||0)}),0)})),console.log("Final chart account report: ".concat(t.chartAccountSummaryReport.length," chart accounts found")),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(0),console.error("Error fetching chart account report:",e.t0),t.$toast.error("Failed to fetch chart account report.");case 31:return e.prev=31,t.loadingChartAccountReport=!1,e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[0,27,31,34]])})))()},fetchMinistryReport:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,v,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.loadingMinistryReport=!0,n=[],r=1,o=1;case 5:return e.next=7,t.$axios.get("/api/settlements",{params:{branchId:t.selectedBranchId,fromDate:t.dateRange.start,toDate:t.dateRange.end,isPosted:!0,include:["ministry","currency"],page:r,limit:50}});case 7:d=e.sent,m=(null===(c=d.data.data)||void 0===c?void 0:c.settlements)||[],n=n.concat(m),(v=null===(l=d.data.data)||void 0===l?void 0:l.pagination)&&(o=v.totalPages,console.log("Fetched page ".concat(r," of ").concat(o,", got ").concat(m.length," settlements"))),r++;case 13:if(r<=o){e.next=5;break}case 14:console.log("Total settlements fetched: ".concat(n.length)),console.log("All settlements:",n),h=new Map,f=new Set,n.forEach((function(t){var e,n,r,o,c=t.ministry;c?(n=c.id,r=c.ministryName,o=c.ministryCode):(n="NO_MINISTRY",r="No Ministry Assigned",o="N/A");var l=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",d=parseFloat(t.exchangeRate)||1,m=parseFloat(t.amount)||0,v=m*d;f.add(l),h.has(n)||h.set(n,{ministryId:n,ministryName:r,ministryCode:o,settlementCount:0,totalLakEquivalent:0,amounts:{}});var _=h.get(n);_.settlementCount+=1,_.totalLakEquivalent+=v,_.amounts[l]=(_.amounts[l]||0)+m})),t.currencyList=Array.from(f).sort(),t.ministrySummaryReport=Array.from(h.values()).sort((function(a,b){return"NO_MINISTRY"===a.ministryId?1:"NO_MINISTRY"===b.ministryId?-1:a.ministryName.localeCompare(b.ministryName)})),console.log("Ministry breakdown:"),t.ministrySummaryReport.forEach((function(t){console.log("- ".concat(t.ministryCode,": ").concat(t.ministryName," (").concat(t.settlementCount," settlements)"))})),t.ministryTotals={totalLakEquivalent:t.ministrySummaryReport.reduce((function(t,e){return t+e.totalLakEquivalent}),0),currencyTotals:{}},t.currencyList.forEach((function(e){t.ministryTotals.currencyTotals[e]=t.ministrySummaryReport.reduce((function(t,n){return t+(n.amounts[e]||0)}),0)})),console.log("Final report: ".concat(t.ministrySummaryReport.length," ministries found")),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),console.error("Error fetching ministry report:",e.t0),t.$toast.error("Failed to fetch ministry report.");case 32:return e.prev=32,t.loadingMinistryReport=!1,e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,28,32,35]])})))()},fetchBankAccountReport:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,m,v,h,f,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t.loadingBankAccountReport=!0,n=[],r=1,o=1;case 5:return e.next=7,t.$axios.get("/api/settlements",{params:{branchId:t.selectedBranchId,fromDate:t.dateRange.start,toDate:t.dateRange.end,isPosted:!0,include:["bankAccount","currency"],page:r,limit:50}});case 7:d=e.sent,m=(null===(c=d.data.data)||void 0===c?void 0:c.settlements)||[],n=n.concat(m),(v=null===(l=d.data.data)||void 0===l?void 0:l.pagination)&&(o=v.totalPages,console.log("Fetched page ".concat(r," of ").concat(o,", got ").concat(m.length," settlements"))),r++;case 13:if(r<=o){e.next=5;break}case 14:console.log("Total settlements fetched for bank account report: ".concat(n.length)),console.log("=== BANK ACCOUNT DEBUG ==="),n.forEach((function(t,e){(t.bankAccountId||t.bankAccount)&&console.log("Settlement ".concat(t.id,":"),{bankAccountId:t.bankAccountId,bankAccount:t.bankAccount,method:t.method,amount:t.amount})})),h={},n.forEach((function(t){var e=t.method||"unknown";h[e]=(h[e]||0)+1})),console.log("Settlement methods:",h),f=new Map,_=new Set,n.forEach((function(t){var e,n,r,o,c,l,d=t.bankAccount;console.log("Processing settlement ".concat(t.id,":"),{hasBankAccount:!!d,bankAccountId:t.bankAccountId,method:t.method}),d?(n=d.id,r=d.accountNumber,o=d.accountName,c=d.bankName,l=d.accountType,console.log("Found bank account: ".concat(r," - ").concat(o))):(n="NO_BANK_ACCOUNT",r="N/A",o="Cash Transaction",c="No Bank",l="Cash",console.log("Cash transaction: ".concat(t.method)));var m=(null===(e=t.currency)||void 0===e?void 0:e.code)||"LAK",v=parseFloat(t.exchangeRate)||1,h=parseFloat(t.amount)||0,y=h*v;_.add(m),f.has(n)||(f.set(n,{bankAccountId:n,accountNumber:r,accountName:o,bankName:c,accountType:l,settlementCount:0,totalLakEquivalent:0,amounts:{}}),console.log("Created new bank account group: ".concat(n," - ").concat(o)));var x=f.get(n);x.settlementCount+=1,x.totalLakEquivalent+=y,x.amounts[m]=(x.amounts[m]||0)+h})),console.log("Bank account groups created: ".concat(f.size)),console.log("Bank account map:",Array.from(f.entries())),t.currencyList=Array.from(_).sort(),t.bankAccountSummaryReport=Array.from(f.values()).sort((function(a,b){if("NO_BANK_ACCOUNT"===a.bankAccountId)return 1;if("NO_BANK_ACCOUNT"===b.bankAccountId)return-1;var t=a.bankName.localeCompare(b.bankName);return 0!==t?t:a.accountName.localeCompare(b.accountName)})),console.log("Final bank account breakdown:"),t.bankAccountSummaryReport.forEach((function(t){console.log("- ".concat(t.accountNumber,": ").concat(t.accountName," at ").concat(t.bankName," (").concat(t.settlementCount," settlements)"))})),t.bankAccountTotals={totalLakEquivalent:t.bankAccountSummaryReport.reduce((function(t,b){return t+b.totalLakEquivalent}),0),currencyTotals:{}},t.currencyList.forEach((function(e){t.bankAccountTotals.currencyTotals[e]=t.bankAccountSummaryReport.reduce((function(t,b){return t+(b.amounts[e]||0)}),0)})),console.log("Final bank account report: ".concat(t.bankAccountSummaryReport.length," bank accounts found")),console.log("Final report data:",t.bankAccountSummaryReport),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(0),console.error("Error fetching bank account report:",e.t0),t.$toast.error("Failed to fetch bank account report.");case 39:return e.prev=39,t.loadingBankAccountReport=!1,e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[0,35,39,42]])})))()},onTableOptionsUpdate:function(t){this.tableOptions=t,this.fetchSettlements()},changeSort:function(t){this.tableOptions.sortBy[0]===t?this.tableOptions.sortDesc[0]=!this.tableOptions.sortDesc[0]:(this.tableOptions.sortBy=[t],this.tableOptions.sortDesc=[!1]),this.fetchSettlements()},getSortIcon:function(t){return this.tableOptions.sortBy[0]!==t?"mdi-sort":this.tableOptions.sortDesc[0]?"mdi-sort-descending":"mdi-sort-ascending"},applyFilters:function(){this.tableOptions.page=1,this.fetchSettlements()},clearFilters:function(){this.filters={method:"",dateFrom:"",dateTo:""},this.searchQuery="",this.applyFilters()},debounceSearch:function(){var t=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((function(){t.applyFilters()}),500)},openCreateDialog:function(){var t;this.dialogMode="create",this.settlementForm={bookingDate:(new Date).toISOString().split("T")[0],amount:"",method:"",exchangeRate:1,notes:"",userId:(null===(t=this.$auth.user)||void 0===t?void 0:t.id)||null},this.dialog=!0},editSettlement:function(t){this.dialogMode="edit",this.currentSettlement=t,this.settlementForm={id:t.id,bookingDate:t.bookingDate,amount:t.amount,method:t.method,exchangeRate:t.exchangeRate||1,notes:t.notes||"",userId:t.userId},this.dialog=!0},viewSettlement:function(t){this.dialogMode="view",this.currentSettlement=t,this.dialog=!0},closeDialog:function(){this.dialog=!1,this.dialogMode="create",this.currentSettlement={},this.$refs.form&&this.$refs.form.reset()},saveSettlement:function(){var t=this;return Object(U.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$refs.form.validate()){e.next=2;break}return e.abrupt("return");case 2:if(t.saving=!0,e.prev=3,"create"!==t.dialogMode){e.next=10;break}return e.next=7,t.$axios.post("/api/settlements",t.settlementForm);case 7:t.$toast.success("Settlement created successfully"),e.next=13;break;case 10:return e.next=12,t.$axios.put("/api/settlements/".concat(t.settlementForm.id),t.settlementForm);case 12:t.$toast.success("Settlement updated successfully");case 13:return t.closeDialog(),e.next=16,t.loadInitialData();case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error saving settlement:",e.t0),t.$toast.error((null===(n=e.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to save settlement");case 22:return e.prev=22,t.saving=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[3,18,22,25]])})))()},confirmDelete:function(t){var e=this;return Object(U.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$swal({title:"Delete Settlement?",text:"Are you sure you want to delete settlement #".concat(t.id,"? This action cannot be undone."),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"});case 2:if(!n.sent.isConfirmed){n.next=6;break}return n.next=6,e.deleteSettlement(t);case 6:case"end":return n.stop()}}),n)})))()},deleteSettlement:function(t){var e=this;return Object(U.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.delete("/api/settlements/".concat(t.id));case 3:return e.$toast.success("Settlement deleted successfully"),n.next=6,e.loadInitialData();case 6:n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.error("Error deleting settlement:",n.t0),e.$toast.error("Failed to delete settlement");case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},initializeCharts:function(){this.initMethodChart(),this.initTrendChart()},initMethodChart:function(){if(this.$refs.methodChart&&window.Chart){var t=this.$refs.methodChart.getContext("2d");this.methodChart&&this.methodChart.destroy();var e={cash:0,bank_transfer:0,deduction:0};this.settlements.forEach((function(t){e.hasOwnProperty(t.method)&&e[t.method]++}));var data=[e.cash,e.bank_transfer,e.deduction],n=data.some((function(t){return t>0}));this.methodChart=new Chart(t,{type:"doughnut",data:{labels:["Cash Payment","Bank Transfer","Salary Deduction"],datasets:[{data:n?data:[1,1,1],backgroundColor:["#4CAF50","#2196F3","#FF9800"],borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:function(t){return n?t.label+": "+t.parsed+" settlements":"No data available"}}}}}})}},initTrendChart:function(){if(this.$refs.trendChart&&window.Chart){var t=this.$refs.trendChart.getContext("2d");this.trendChart&&this.trendChart.destroy();for(var e={},n=(new Date).getFullYear(),i=0;i<12;i++){var r=new Date(n,i,1).toLocaleDateString("en-US",{month:"short"});e[r]=0}this.settlements.forEach((function(t){var r=new Date(t.bookingDate);if(r.getFullYear()===n){var o=r.toLocaleDateString("en-US",{month:"short"}),c=(parseFloat(t.amount)||0)*(parseFloat(t.exchangeRate)||1);e[o]+=c}}));var o=Object.keys(e),data=Object.values(e),c=data.some((function(t){return t>0}));this.trendChart=new Chart(t,{type:"line",data:{labels:o,datasets:[{label:"Settlement Amount (LAK Equivalent)",data:c?data:[0,0,0,0,0,0,0,0,0,0,0,0],borderColor:"#01532B",backgroundColor:"rgba(1, 83, 43, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(t){return c?"LAK "+t.parsed.y.toLocaleString():"No data available"}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(t){return"₭"+t.toLocaleString()}}}}}})}},formatDate:function(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"},formatAmount:function(t){return t?parseFloat(t).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatMethod:function(t){return{cash:"Cash Payment",bank_transfer:"Bank Transfer",deduction:"Salary Deduction"}[t]||t},getMethodColor:function(t){return{cash:"success",bank_transfer:"primary",deduction:"warning"}[t]||"grey"},getMethodIcon:function(t){return{cash:"mdi-cash",bank_transfer:"mdi-bank",deduction:"mdi-minus-circle"}[t]||"mdi-help-circle"},getStatusColor:function(t){return{approved:"success",settled:"primary",pending:"warning",rejected:"error"}[t]||"grey"},getStatusIcon:function(t){return{approved:"mdi-check-circle",settled:"mdi-check-all",pending:"mdi-clock-outline",rejected:"mdi-close-circle"}[t]||"mdi-help-circle"},getInitials:function(t){return t?t.split(" ").map((function(t){return t[0]})).join("").toUpperCase().slice(0,2):"?"},getCurrencyColor:function(t){return{USD:"success",LAK:"primary",THB:"warning",BTH:"warning",EUR:"info",CNY:"error",VND:"secondary"}[t]||"grey"},getCurrencySymbol:function(t){return{USD:"$",LAK:"₭",THB:"฿",BTH:"฿",EUR:"€",CNY:"¥",VND:"₫"}[t]||"₭"}}},H=(n(1554),n(32)),component=Object(H.a)(W,(function(){var t,e=this,n=e._self._c;return n(v.a,{staticClass:"pa-4",attrs:{fluid:""}},[n(M.a,{staticClass:"mb-4"},[n(m.a,{attrs:{cols:"12",md:"8"}},[n("h1",{staticClass:"text-h4 font-weight-bold primary--text"},[e._v("\n        Settlements Dashboard\n      ")]),e._v(" "),n("p",{staticClass:"text-subtitle-1 grey--text"},[e._v("\n        Manage and monitor all settlement transactions\n      ")])]),e._v(" "),n(m.a,{staticClass:"text-right",attrs:{cols:"12",md:"4"}},[n(o.a,{staticClass:"mr-2",attrs:{color:"primary",large:""},on:{click:e.openCreateDialog}},[n(w.a,{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n        New Settlement\n      ")],1),e._v(" "),n(o.a,{attrs:{color:"secondary",large:"",outlined:"",loading:e.loading},on:{click:e.refreshData}},[n(w.a,{attrs:{left:""}},[e._v("mdi-refresh")]),e._v("\n        Refresh\n      ")],1)],1)],1),e._v(" "),n(M.a,{staticClass:"mb-6"},[n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(c.a,{staticClass:"text-center",attrs:{color:"primary",dark:"",elevation:"3"}},[n(l.c,{staticClass:"pb-2"},[n(w.a,{staticClass:"mb-2",attrs:{size:"40"}},[e._v("mdi-file-document-multiple")]),e._v(" "),n("div",{staticClass:"text-h4 font-weight-bold"},[e._v("\n            "+e._s(e.stats.totalCount||0)+"\n          ")]),e._v(" "),n("div",{staticClass:"text-subtitle-1"},[e._v("Total Settlements")])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(c.a,{staticClass:"text-center",attrs:{color:"success",dark:"",elevation:"3"}},[n(l.c,{staticClass:"pb-2"},[n(w.a,{staticClass:"mb-2",attrs:{size:"40"}},[e._v("mdi-currency-usd")]),e._v(" "),n("div",{staticClass:"text-h5 font-weight-bold"},[e._v("\n            ₭"+e._s(e.formatAmount(e.stats.totalAmount)||"0.00")+"\n          ")]),e._v(" "),n("div",{staticClass:"text-subtitle-1"},[e._v("Total Amount")])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(c.a,{staticClass:"text-center",attrs:{color:"info",dark:"",elevation:"3"}},[n(l.c,{staticClass:"pb-2"},[n(w.a,{staticClass:"mb-2",attrs:{size:"40"}},[e._v("mdi-calendar-month")]),e._v(" "),n("div",{staticClass:"text-h4 font-weight-bold"},[e._v("\n            "+e._s(e.stats.thisMonth||0)+"\n          ")]),e._v(" "),n("div",{staticClass:"text-subtitle-1"},[e._v("This Month")])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(c.a,{staticClass:"text-center",attrs:{color:"warning",dark:"",elevation:"3"}},[n(l.c,{staticClass:"pb-2"},[n(w.a,{staticClass:"mb-2",attrs:{size:"40"}},[e._v("mdi-clock-outline")]),e._v(" "),n("div",{staticClass:"text-h4 font-weight-bold"},[e._v(e._s(e.stats.pending||0))]),e._v(" "),n("div",{staticClass:"text-subtitle-1"},[e._v("Pending")])],1)],1)],1)],1),e._v(" "),n(M.a,{staticClass:"mb-6"},[n(m.a,{attrs:{cols:"12",md:"4"}},[n(c.a,{attrs:{elevation:"2"}},[n(l.d,{staticClass:"primary--text"},[n(w.a,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-chart-donut")]),e._v("\n          Settlement Methods\n        ")],1),e._v(" "),n(_.a),e._v(" "),n(l.c,{staticStyle:{height:"300px"}},[n("canvas",{ref:"methodChart",attrs:{width:"100%",height:"100%"}})])],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"4"}},[n(c.a,{attrs:{elevation:"2"}},[n(l.d,{staticClass:"primary--text"},[n(w.a,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-chart-line")]),e._v("\n          Monthly Trends\n        ")],1),e._v(" "),n(_.a),e._v(" "),n(l.c,{staticStyle:{height:"300px"}},[n("canvas",{ref:"trendChart",attrs:{width:"100%",height:"100%"}})])],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"4"}},[n(c.a,{attrs:{elevation:"2"}},[n(l.d,{staticClass:"primary--text"},[n(w.a,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-office-building")]),e._v("\n          Ministry & Currency Summary\n          "),n(I.a),e._v(" "),n(o.a,{attrs:{icon:"",small:"",loading:e.loadingMinistrySummary},on:{click:e.fetchMinistrySummary}},[n(w.a,{attrs:{small:""}},[e._v("mdi-refresh")])],1)],1),e._v(" "),n(_.a),e._v(" "),n(l.c,{staticStyle:{height:"300px","overflow-y":"auto"}},[e.loadingMinistrySummary?n("div",{staticClass:"text-center pa-4"},[n(F.a,{attrs:{indeterminate:"",color:"primary"}}),e._v(" "),n("div",{staticClass:"mt-2 text-caption"},[e._v("Loading summary...")])],1):0===e.ministrySummary.length?n("div",{staticClass:"text-center pa-4"},[n(w.a,{attrs:{size:"48",color:"grey lighten-2"}},[e._v("mdi-information-outline")]),e._v(" "),n("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[e._v("\n              No ministry data available\n            ")])],1):n(k.a,{attrs:{accordion:"",flat:""}},e._l(e.ministrySummary,(function(t){return n(y.a,{key:t.ministryId},[n(C.a,[n("div",{staticClass:"d-flex justify-space-between align-center"},[n("div",[n("div",{staticClass:"font-weight-medium text-subtitle-2"},[e._v("\n                      "+e._s(t.ministryName||"Ministry #".concat(t.ministryId))+"\n                    ")]),e._v(" "),n("div",{staticClass:"text-caption grey--text"},[e._v("\n                      "+e._s(t.settlementCount)+" settlements\n                    ")])]),e._v(" "),n("div",{staticClass:"text-right"},[n("div",{staticClass:"font-weight-bold success--text"},[e._v("\n                      ₭"+e._s(e.formatAmount(t.totalLakEquivalent))+"\n                    ")]),e._v(" "),n("div",{staticClass:"text-caption grey--text"},[e._v("\n                      "+e._s(t.currencies.length)+" currencies\n                    ")])])])]),e._v(" "),n(x.a,[n(S.a,{attrs:{dense:""}},e._l(t.currencies,(function(r){return n(R.a,{key:"".concat(t.ministryId,"-").concat(r.currencyId),staticClass:"px-0"},[n(T.a,{attrs:{size:"24"}},[n(d.a,{attrs:{"x-small":"",color:e.getCurrencyColor(r.currencyCode),dark:""}},[e._v("\n                        "+e._s(r.currencyCode||"LAK")+"\n                      ")])],1),e._v(" "),n(O.a,[n(O.c,{staticClass:"text-body-2"},[e._v("\n                        "+e._s(r.currencyCode||"LAK")+" -\n                        "+e._s(r.count)+" settlements\n                      ")]),e._v(" "),n(O.b,{staticClass:"text-caption"},[e._v("\n                        Rate: "+e._s(r.avgExchangeRate)+"\n                      ")])],1),e._v(" "),n(N.a,[n("div",{staticClass:"text-right"},[n("div",{staticClass:"font-weight-medium text-body-2"},[e._v("\n                          "+e._s(r.currencySymbol)+e._s(e.formatAmount(r.totalAmount))+"\n                        ")]),e._v(" "),n("div",{staticClass:"text-caption success--text"},[e._v("\n                          ₭"+e._s(e.formatAmount(r.lakEquivalent))+"\n                        ")])])])],1)})),1)],1)],1)})),1)],1)],1)],1)],1),e._v(" "),n(M.a,{staticClass:"mb-4"},[n(m.a,{attrs:{cols:"12"}},[n(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[n(l.d,{staticClass:"primary--text py-2 px-4 d-flex align-center"},[n(w.a,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-office-building")]),e._v(" "),n("span",{staticClass:"text-subtitle-1 font-weight-medium"},[e._v("\n            ລາຍງານ ຕາມກົມ\n          ")]),e._v(" "),n(I.a),e._v(" "),n(I.a),e._v(" "),n(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!e.ministrySummaryReport.length},on:{click:e.exportMinistryReportToExcel}},[n(w.a,{attrs:{small:"",left:""}},[e._v("mdi-file-excel")]),e._v("\n            Export Excel\n          ")],1),e._v(" "),n(o.a,{attrs:{icon:"",small:"",loading:e.loadingMinistryReport},on:{click:e.fetchMinistryReport}},[n(w.a,{attrs:{small:""}},[e._v("mdi-refresh")])],1)],1),e._v(" "),n(_.a),e._v(" "),n(l.c,{staticClass:"pa-0"},[e.loadingMinistryReport?n("div",{staticClass:"text-center py-6"},[n(F.a,{attrs:{indeterminate:"",color:"primary"}}),e._v(" "),n("div",{staticClass:"mt-2 text-caption"},[e._v("Loading ministry report...")])],1):e.ministrySummaryReport.length?n(D.a,{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){var t;return[n("thead",[n("tr",{staticClass:"primary lighten-3"},[n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("#")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Ministry Code\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Ministry Name\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Count\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){return n("th",{key:"head-"+t,staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    "+e._s(t)+"\n                  ")])})),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Total (LAK)\n                  ")])],2)]),e._v(" "),n("tbody",[e._l(e.ministrySummaryReport,(function(t,r){return n("tr",{key:t.ministryId,class:{"grey lighten-5":r%2==0,"orange lighten-4":"NO_MINISTRY"===t.ministryId}},[n("td",{staticClass:"text-caption text-center"},[e._v(e._s(r+1))]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text":"NO_MINISTRY"===t.ministryId}},[e._v("\n                    "+e._s(t.ministryCode)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text font-italic":"NO_MINISTRY"===t.ministryId}},[e._v("\n                    "+e._s(t.ministryName)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(t.settlementCount)+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(r){var o;return n("td",{key:"amt-"+r,staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(e.formatAmount((null===(o=t.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold success--text"},[e._v("\n                    "+e._s(e.formatAmount(t.totalLakEquivalent||0))+"\n                  ")])],2)})),e._v(" "),n("tr",{staticClass:"primary lighten-4"},[n("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"3"}},[e._v("\n                    ລວມ\n                  ")]),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.ministrySummaryReport.reduce((function(t,e){return t+e.settlementCount}),0))+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){var r,o;return n("td",{key:"sum-"+t,staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.formatAmount((null===(r=e.ministryTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[t])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2 primary--text"},[e._v("\n                    "+e._s(e.formatAmount((null===(t=e.ministryTotals)||void 0===t?void 0:t.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):n("div",{staticClass:"text-center py-6"},[n(w.a,{attrs:{size:"48",color:"grey lighten-2"}},[e._v("mdi-information-outline")]),e._v(" "),n("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[e._v("\n              No ministry data available\n            ")])],1)],1)],1)],1)],1),e._v(" "),n(M.a,{staticClass:"mb-4"},[n(m.a,{attrs:{cols:"12"}},[n(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[n(l.d,{staticClass:"primary--text py-2 px-4 d-flex align-center"},[n(w.a,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-bank")]),e._v(" "),n("span",{staticClass:"text-subtitle-1 font-weight-medium"},[e._v("\n            ລາຍງານຕາມບັນຊີ ທະນາຄານ\n           \n          ")]),e._v(" "),n(I.a),e._v(" "),n(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!e.bankAccountSummaryReport.length},on:{click:e.exportBankAccountReportToExcel}},[n(w.a,{attrs:{small:"",left:""}},[e._v("mdi-file-excel")]),e._v("\n            Export Excel\n          ")],1),e._v(" "),n(o.a,{attrs:{icon:"",small:"",loading:e.loadingBankAccountReport},on:{click:e.fetchBankAccountReport}},[n(w.a,{attrs:{small:""}},[e._v("mdi-refresh")])],1)],1),e._v(" "),n(_.a),e._v(" "),n(l.c,{staticClass:"pa-0"},[e.loadingBankAccountReport?n("div",{staticClass:"text-center py-6"},[n(F.a,{attrs:{indeterminate:"",color:"primary"}}),e._v(" "),n("div",{staticClass:"mt-2 text-caption"},[e._v("\n              Loading bank account report...\n            ")])],1):e.bankAccountSummaryReport.length?n(D.a,{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){var t;return[n("thead",[n("tr",{staticClass:"primary lighten-3"},[n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("#")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Account Number\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Account Name\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Bank Name\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Type\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Count\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){return n("th",{key:"head-"+t,staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    "+e._s(t)+"\n                  ")])})),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Total (LAK)\n                  ")])],2)]),e._v(" "),n("tbody",[e._l(e.bankAccountSummaryReport,(function(t,r){return n("tr",{key:t.bankAccountId,class:{"grey lighten-5":r%2==0,"orange lighten-4":"NO_BANK_ACCOUNT"===t.bankAccountId}},[n("td",{staticClass:"text-caption text-center"},[e._v(e._s(r+1))]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text":"NO_BANK_ACCOUNT"===t.bankAccountId}},[e._v("\n                    "+e._s(t.accountNumber)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text font-italic":"NO_BANK_ACCOUNT"===t.bankAccountId}},[e._v("\n                    "+e._s(t.accountName)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text font-italic":"NO_BANK_ACCOUNT"===t.bankAccountId}},[e._v("\n                    "+e._s(t.bankName)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2"},[n(d.a,{attrs:{"x-small":"",color:"Cash"===t.accountType?"orange":"blue","text-color":(t.accountType,"white")}},[e._v("\n                      "+e._s(t.accountType)+"\n                    ")])],1),e._v(" "),n("td",{staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(t.settlementCount)+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(r){var o;return n("td",{key:"amt-"+r,staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(e.formatAmount((null===(o=t.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold success--text"},[e._v("\n                    "+e._s(e.formatAmount(t.totalLakEquivalent||0))+"\n                  ")])],2)})),e._v(" "),n("tr",{staticClass:"primary lighten-4"},[n("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"5"}},[e._v("\n                    ລວມ\n                  ")]),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.bankAccountSummaryReport.reduce((function(t,b){return t+b.settlementCount}),0))+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){var r,o;return n("td",{key:"sum-"+t,staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.formatAmount((null===(r=e.bankAccountTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[t])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2 primary--text"},[e._v("\n                    "+e._s(e.formatAmount((null===(t=e.bankAccountTotals)||void 0===t?void 0:t.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):n("div",{staticClass:"text-center py-6"},[n(w.a,{attrs:{size:"48",color:"grey lighten-2"}},[e._v("mdi-information-outline")]),e._v(" "),n("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[e._v("\n              No bank account data available\n            ")])],1)],1)],1)],1)],1),e._v(" "),n(M.a,{staticClass:"mb-4"},[n(m.a,{attrs:{cols:"12"}},[n(c.a,{staticClass:"rounded-xl",attrs:{elevation:"2"}},[n(l.d,{staticClass:"primary--text py-2 px-4 d-flex align-center"},[n(w.a,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-account-multiple")]),e._v(" "),n("span",{staticClass:"text-subtitle-1 font-weight-medium"},[e._v("\n            ລາຍງານ ຕາມຫົວບັນຊີ\n          ")]),e._v(" "),n(I.a),e._v(" "),n(o.a,{staticClass:"mr-2",attrs:{color:"success",small:"",outlined:"",disabled:!e.chartAccountSummaryReport.length},on:{click:e.exportChartAccountReportToExcel}},[n(w.a,{attrs:{small:"",left:""}},[e._v("mdi-file-excel")]),e._v("\n            Export Excel\n          ")],1),e._v(" "),n(o.a,{attrs:{icon:"",small:"",loading:e.loadingChartAccountReport},on:{click:e.fetchChartAccountReport}},[n(w.a,{attrs:{small:""}},[e._v("mdi-refresh")])],1)],1),e._v(" "),n(_.a),e._v(" "),n(l.c,{staticClass:"pa-0"},[e.loadingChartAccountReport?n("div",{staticClass:"text-center py-6"},[n(F.a,{attrs:{indeterminate:"",color:"primary"}}),e._v(" "),n("div",{staticClass:"mt-2 text-caption"},[e._v("\n              Loading chart account report...\n            ")])],1):e.chartAccountSummaryReport.length?n(D.a,{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){var t;return[n("thead",[n("tr",{staticClass:"primary lighten-3"},[n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("#")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Account Number\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold"},[e._v("\n                    Account Name\n                  ")]),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Count\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){return n("th",{key:"head-"+t,staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    "+e._s(t)+"\n                  ")])})),e._v(" "),n("th",{staticClass:"white--text text-caption font-weight-bold text-right"},[e._v("\n                    Total (LAK)\n                  ")])],2)]),e._v(" "),n("tbody",[e._l(e.chartAccountSummaryReport,(function(t,r){return n("tr",{key:t.chartAccountId,class:{"grey lighten-5":r%2==0,"orange lighten-4":"NO_CHART_ACCOUNT"===t.chartAccountId}},[n("td",{staticClass:"text-caption text-center"},[e._v(e._s(r+1))]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text":"NO_CHART_ACCOUNT"===t.chartAccountId}},[e._v("\n                    "+e._s(t.accountNumber)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2",class:{"grey--text font-italic":"NO_CHART_ACCOUNT"===t.chartAccountId}},[e._v("\n                    "+e._s(t.accountName)+"\n                  ")]),e._v(" "),n("td",{staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(t.settlementCount)+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(r){var o;return n("td",{key:"amt-"+r,staticClass:"text-body-2 text-right"},[e._v("\n                    "+e._s(e.formatAmount((null===(o=t.amounts)||void 0===o?void 0:o[r])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold success--text"},[e._v("\n                    "+e._s(e.formatAmount(t.totalLakEquivalent||0))+"\n                  ")])],2)})),e._v(" "),n("tr",{staticClass:"primary lighten-4"},[n("td",{staticClass:"font-weight-bold text-caption",attrs:{colspan:"3"}},[e._v("\n                    ລວມ\n                  ")]),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.chartAccountSummaryReport.reduce((function(t,e){return t+e.settlementCount}),0))+"\n                  ")]),e._v(" "),e._l(e.currencyList,(function(t){var r,o;return n("td",{key:"sum-"+t,staticClass:"text-right font-weight-bold text-body-2"},[e._v("\n                    "+e._s(e.formatAmount((null===(r=e.chartAccountTotals)||void 0===r||null===(o=r.currencyTotals)||void 0===o?void 0:o[t])||0))+"\n                  ")])})),e._v(" "),n("td",{staticClass:"text-right font-weight-bold text-body-2 primary--text"},[e._v("\n                    "+e._s(e.formatAmount((null===(t=e.chartAccountTotals)||void 0===t?void 0:t.totalLakEquivalent)||0))+"\n                  ")])],2)],2)]},proxy:!0}])}):n("div",{staticClass:"text-center py-6"},[n(w.a,{attrs:{size:"48",color:"grey lighten-2"}},[e._v("mdi-information-outline")]),e._v(" "),n("div",{staticClass:"mt-2 text-subtitle-2 grey--text"},[e._v("\n              No chart account data available\n            ")])],1)],1)],1)],1)],1),e._v(" "),n(c.a,{staticClass:"mb-4",attrs:{elevation:"2"}},[n(l.d,{staticClass:"primary--text"},[n(w.a,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-filter")]),e._v("\n      Filters & Search\n    ")],1),e._v(" "),n(_.a),e._v(" "),n(l.c,[n(M.a,[n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(L.a,{attrs:{items:e.methodOptions,label:"Payment Method","prepend-icon":"mdi-credit-card",clearable:"",outlined:"",dense:""},on:{change:e.applyFilters},model:{value:e.filters.method,callback:function(t){e.$set(e.filters,"method",t)},expression:"filters.method"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(B.a,{attrs:{type:"date",label:"Date From","prepend-icon":"mdi-calendar",outlined:"",dense:""},on:{change:e.applyFilters},model:{value:e.filters.dateFrom,callback:function(t){e.$set(e.filters,"dateFrom",t)},expression:"filters.dateFrom"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(B.a,{attrs:{type:"date",label:"Date To","prepend-icon":"mdi-calendar",outlined:"",dense:""},on:{change:e.applyFilters},model:{value:e.filters.dateTo,callback:function(t){e.$set(e.filters,"dateTo",t)},expression:"filters.dateTo"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",sm:"6",md:"3"}},[n(B.a,{attrs:{label:"Search settlements...","prepend-icon":"mdi-magnify",outlined:"",dense:"",clearable:""},on:{input:e.debounceSearch},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)],1),e._v(" "),e.hasActiveFilters?n(M.a,[n(m.a,{attrs:{cols:"12"}},[n(o.a,{attrs:{small:"",outlined:"",color:"grey"},on:{click:e.clearFilters}},[n(w.a,{attrs:{left:"",small:""}},[e._v("mdi-filter-remove")]),e._v("\n            Clear All Filters\n          ")],1)],1)],1):e._e()],1)],1),e._v(" "),n(c.a,{attrs:{elevation:"2"}},[n(l.d,{staticClass:"primary--text"},[n(w.a,{staticClass:"mr-2",attrs:{color:"primary"}},[e._v("mdi-table")]),e._v("\n      Settlements List\n      "),n(I.a),e._v(" "),n(d.a,{attrs:{color:"primary",outlined:""}},[e._v("\n        "+e._s(e.pagination.totalItems)+" Total Records\n      ")])],1),e._v(" "),n(_.a),e._v(" "),n(h.a,{staticClass:"elevation-0",attrs:{headers:e.tableHeaders,items:e.settlements,loading:e.loading,"server-items-length":e.pagination.totalItems,options:e.tableOptions,"footer-props":{"items-per-page-options":[10,25,50,100],"show-current-page":!0,"show-first-last-page":!0},"loading-text":"Loading settlements...","no-data-text":"No settlements found"},on:{"update:options":[function(t){e.tableOptions=t},e.onTableOptionsUpdate]},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.props;return[n("thead",{staticClass:"primary lighten-2"},[n("tr",e._l(r.headers,(function(header){return n("th",{key:header.text,staticClass:"white--text font-weight-bold",class:[!1!==header.sortable?"sortable":""],on:{click:function(t){!1!==header.sortable&&e.changeSort(header.value)}}},[e._v("\n              "+e._s(header.text)+"\n              "),!1!==header.sortable?n(w.a,{staticClass:"ml-1",attrs:{color:"white",small:""}},[e._v("\n                "+e._s(e.getSortIcon(header.value))+"\n              ")]):e._e()],1)})),0)])]}},{key:"item.bookingDate",fn:function(t){var r=t.item;return[n(d.a,{attrs:{small:"",color:"grey lighten-3"}},[n(w.a,{attrs:{left:"",small:""}},[e._v("mdi-calendar")]),e._v("\n          "+e._s(e.formatDate(r.bookingDate))+"\n        ")],1)]}},{key:"item.amount",fn:function(t){var r,o=t.item;return[n("div",[n("span",{staticClass:"font-weight-bold text-h6 success--text"},[e._v("\n            "+e._s(e.getCurrencySymbol(null===(r=o.currency)||void 0===r?void 0:r.code))+e._s(e.formatAmount(o.amount))+"\n          ")]),e._v(" "),o.currency&&"LAK"!==o.currency.code?n("div",{staticClass:"text-caption grey--text"},[e._v("\n            "+e._s(o.currency.code)+" @ "+e._s(o.exchangeRate||1)+"\n          ")]):e._e()])]}},{key:"item.method",fn:function(t){var r=t.item;return[n(d.a,{attrs:{color:e.getMethodColor(r.method),small:"",dark:""}},[n(w.a,{attrs:{left:"","x-small":""}},[e._v(e._s(e.getMethodIcon(r.method)))]),e._v("\n          "+e._s(e.formatMethod(r.method))+"\n        ")],1)]}},{key:"item.proceeder",fn:function(t){var o=t.item;return[o.proceeder?n("div",{staticClass:"d-flex align-center"},[n(r.a,{staticClass:"mr-2",attrs:{size:"24",color:"primary"}},[n("span",{staticClass:"white--text text-caption"},[e._v("\n              "+e._s(e.getInitials(o.proceeder.cus_name||o.proceeder.cus_email))+"\n            ")])]),e._v(" "),n("div",[n("div",{staticClass:"font-weight-medium"},[e._v("\n              "+e._s(o.proceeder.cus_name||o.proceeder.cus_email)+"\n            ")]),e._v(" "),n("div",{staticClass:"text-caption grey--text"},[e._v("\n              "+e._s(o.proceeder.cus_email)+"\n            ")])])],1):n("span",{staticClass:"grey--text"},[e._v("N/A")])]}},{key:"item.moneyAdvance",fn:function(t){var r=t.item;return[r.moneyAdvance?n("div",[n(d.a,{staticClass:"mb-1",attrs:{"x-small":"",color:"info"}},[e._v("\n            #"+e._s(r.moneyAdvance.id)+"\n          ")]),e._v(" "),n("br"),e._v(" "),n(d.a,{attrs:{"x-small":"",color:e.getStatusColor(r.moneyAdvance.status),dark:""}},[e._v("\n            "+e._s(r.moneyAdvance.status)+"\n          ")])],1):n(d.a,{attrs:{"x-small":"",color:"grey",dark:""}},[e._v(" Independent ")])]}},{key:"item.status",fn:function(t){var r=t.item;return[r.moneyAdvance?n(d.a,{attrs:{color:e.getStatusColor(r.moneyAdvance.status),small:"",dark:""}},[n(w.a,{attrs:{left:"","x-small":""}},[e._v(e._s(e.getStatusIcon(r.moneyAdvance.status)))]),e._v("\n          "+e._s(r.moneyAdvance.status)+"\n        ")],1):n(d.a,{attrs:{color:"grey",small:"",dark:""}},[n(w.a,{attrs:{left:"","x-small":""}},[e._v("mdi-check-circle")]),e._v("\n          Independent\n        ")],1)]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("div",{staticClass:"d-flex"},[n(j.a,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var c=t.on,l=t.attrs;return[n(o.a,e._g(e._b({attrs:{icon:"","x-small":"",color:"primary"},on:{click:function(t){return e.viewSettlement(r)}}},"v-btn",l,!1),c),[n(w.a,{attrs:{small:""}},[e._v("mdi-eye")])],1)]}}],null,!0)},[e._v(" "),n("span",[e._v("View Details")])]),e._v(" "),n(j.a,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var c=t.on,l=t.attrs;return[n(o.a,e._g(e._b({staticClass:"ml-1",attrs:{icon:"","x-small":"",color:"secondary"},on:{click:function(t){return e.editSettlement(r)}}},"v-btn",l,!1),c),[n(w.a,{attrs:{small:""}},[e._v("mdi-pencil")])],1)]}}],null,!0)},[e._v(" "),n("span",[e._v("Edit Settlement")])]),e._v(" "),n(j.a,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var c=t.on,l=t.attrs;return[n(o.a,e._g(e._b({staticClass:"ml-1",attrs:{icon:"","x-small":"",color:"error"},on:{click:function(t){return e.confirmDelete(r)}}},"v-btn",l,!1),c),[n(w.a,{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}],null,!0)},[e._v(" "),n("span",[e._v("Delete Settlement")])])],1)]}}])})],1),e._v(" "),n(f.a,{attrs:{"max-width":"900px",persistent:"",scrollable:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n(c.a,[n(l.d,{staticClass:"primary white--text"},[n(w.a,{staticClass:"mr-2",attrs:{color:"white"}},[e._v("\n          "+e._s("create"===e.dialogMode?"mdi-plus":"edit"===e.dialogMode?"mdi-pencil":"mdi-eye")+"\n        ")]),e._v("\n        "+e._s(e.dialogTitle)+"\n        "),n(I.a),e._v(" "),n(o.a,{attrs:{icon:"",dark:""},on:{click:e.closeDialog}},[n(w.a,[e._v("mdi-close")])],1)],1),e._v(" "),n(l.c,{staticClass:"pt-6"},["view"!==e.dialogMode?n(A.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.formValid,callback:function(t){e.formValid=t},expression:"formValid"}},[n(M.a,[n(m.a,{attrs:{cols:"12",md:"6"}},[n(B.a,{attrs:{type:"date",label:"Booking Date","prepend-icon":"mdi-calendar",rules:[e.rules.required],outlined:"",required:""},model:{value:e.settlementForm.bookingDate,callback:function(t){e.$set(e.settlementForm,"bookingDate",t)},expression:"settlementForm.bookingDate"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(B.a,{attrs:{type:"number",step:"0.01",label:"Amount","prepend-icon":"mdi-currency-usd",rules:[e.rules.required,e.rules.positiveNumber],outlined:"",required:""},model:{value:e.settlementForm.amount,callback:function(t){e.$set(e.settlementForm,"amount",t)},expression:"settlementForm.amount"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(L.a,{attrs:{items:e.methodSelectOptions,label:"Payment Method","prepend-icon":"mdi-credit-card",rules:[e.rules.required],outlined:"",required:""},model:{value:e.settlementForm.method,callback:function(t){e.$set(e.settlementForm,"method",t)},expression:"settlementForm.method"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(B.a,{attrs:{type:"number",step:"0.0001",label:"Exchange Rate","prepend-icon":"mdi-swap-horizontal",placeholder:"1.0000",outlined:""},model:{value:e.settlementForm.exchangeRate,callback:function(t){e.$set(e.settlementForm,"exchangeRate",t)},expression:"settlementForm.exchangeRate"}})],1),e._v(" "),n(m.a,{attrs:{cols:"12"}},[n($.a,{attrs:{label:"Notes","prepend-icon":"mdi-note-text",rows:"3",outlined:"","no-resize":""},model:{value:e.settlementForm.notes,callback:function(t){e.$set(e.settlementForm,"notes",t)},expression:"settlementForm.notes"}})],1)],1)],1):n("div",[n(M.a,[n(m.a,{attrs:{cols:"12",md:"6"}},[n(R.a,[n(E.a,[n(w.a,{attrs:{color:"primary"}},[e._v("mdi-calendar")])],1),e._v(" "),n(O.a,[n(O.c,{staticClass:"font-weight-bold"},[e._v("Booking Date")]),e._v(" "),n(O.b,{staticClass:"text-h6"},[e._v(e._s(e.formatDate(e.currentSettlement.bookingDate)))])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(R.a,[n(E.a,[n(w.a,{attrs:{color:"success"}},[e._v("mdi-currency-usd")])],1),e._v(" "),n(O.a,[n(O.c,{staticClass:"font-weight-bold"},[e._v("Amount")]),e._v(" "),n(O.b,{staticClass:"text-h5 font-weight-bold success--text"},[e._v("\n                    "+e._s(e.getCurrencySymbol(null===(t=e.currentSettlement.currency)||void 0===t?void 0:t.code))+e._s(e.formatAmount(e.currentSettlement.amount))+"\n                  ")])],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(R.a,[n(E.a,[n(w.a,{attrs:{color:e.getMethodColor(e.currentSettlement.method)}},[e._v(e._s(e.getMethodIcon(e.currentSettlement.method)))])],1),e._v(" "),n(O.a,[n(O.c,{staticClass:"font-weight-bold"},[e._v("Payment Method")]),e._v(" "),n(O.b,[n(d.a,{attrs:{color:e.getMethodColor(e.currentSettlement.method),small:"",dark:""}},[e._v("\n                      "+e._s(e.formatMethod(e.currentSettlement.method))+"\n                    ")])],1)],1)],1)],1),e._v(" "),n(m.a,{attrs:{cols:"12",md:"6"}},[n(R.a,[n(E.a,[n(w.a,{attrs:{color:"info"}},[e._v("mdi-swap-horizontal")])],1),e._v(" "),n(O.a,[n(O.c,{staticClass:"font-weight-bold"},[e._v("Exchange Rate")]),e._v(" "),n(O.b,{staticClass:"text-h6"},[e._v(e._s(e.currentSettlement.exchangeRate||"1.0000"))])],1)],1)],1),e._v(" "),e.currentSettlement.notes?n(m.a,{attrs:{cols:"12"}},[n(R.a,[n(E.a,[n(w.a,{attrs:{color:"grey"}},[e._v("mdi-note-text")])],1),e._v(" "),n(O.a,[n(O.c,{staticClass:"font-weight-bold"},[e._v("Notes")]),e._v(" "),n(O.b,[e._v(e._s(e.currentSettlement.notes))])],1)],1)],1):e._e()],1)],1)],1),e._v(" "),n(_.a),e._v(" "),n(l.a,{staticClass:"pa-4"},[n(I.a),e._v(" "),n(o.a,{attrs:{outlined:""},on:{click:e.closeDialog}},[e._v("\n          "+e._s("view"===e.dialogMode?"Close":"Cancel")+"\n        ")]),e._v(" "),"view"!==e.dialogMode?n(o.a,{staticClass:"ml-2",attrs:{color:"primary",loading:e.saving,disabled:!e.formValid},on:{click:e.saveSettlement}},[n(w.a,{attrs:{left:""}},[e._v(e._s("create"===e.dialogMode?"mdi-plus":"mdi-content-save"))]),e._v("\n          "+e._s("create"===e.dialogMode?"Create":"Update")+"\n        ")],1):e._e()],1)],1)],1)],1)}),[],!1,null,"178d0b7e",null);e.default=component.exports}}]);